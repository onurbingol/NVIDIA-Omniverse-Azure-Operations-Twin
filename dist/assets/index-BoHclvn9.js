function _mergeNamespaces(o,e){for(var a=0;a<e.length;a++){const c=e[a];if(typeof c!="string"&&!Array.isArray(c)){for(const j in c)if(j!=="default"&&!(j in o)){const d=Object.getOwnPropertyDescriptor(c,j);d&&Object.defineProperty(o,j,d.get?d:{enumerable:!0,get:()=>c[j]})}}}return Object.freeze(Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const j of document.querySelectorAll('link[rel="modulepreload"]'))c(j);new MutationObserver(j=>{for(const d of j)if(d.type==="childList")for(const et of d.addedNodes)et.tagName==="LINK"&&et.rel==="modulepreload"&&c(et)}).observe(document,{childList:!0,subtree:!0});function a(j){const d={};return j.integrity&&(d.integrity=j.integrity),j.referrerPolicy&&(d.referrerPolicy=j.referrerPolicy),j.crossOrigin==="use-credentials"?d.credentials="include":j.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function c(j){if(j.ep)return;j.ep=!0;const d=a(j);fetch(j.href,d)}})();var buffer$1={},base64Js={};base64Js.byteLength=byteLength;base64Js.toByteArray=toByteArray;base64Js.fromByteArray=fromByteArray;var lookup=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;revLookup[45]=62;revLookup[95]=63;function getLens(o){var e=o.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var a=o.indexOf("=");a===-1&&(a=e);var c=a===e?0:4-a%4;return[a,c]}function byteLength(o){var e=getLens(o),a=e[0],c=e[1];return(a+c)*3/4-c}function _byteLength(o,e,a){return(e+a)*3/4-a}function toByteArray(o){var e,a=getLens(o),c=a[0],j=a[1],d=new Arr(_byteLength(o,c,j)),et=0,at=j>0?c-4:c,st;for(st=0;st<at;st+=4)e=revLookup[o.charCodeAt(st)]<<18|revLookup[o.charCodeAt(st+1)]<<12|revLookup[o.charCodeAt(st+2)]<<6|revLookup[o.charCodeAt(st+3)],d[et++]=e>>16&255,d[et++]=e>>8&255,d[et++]=e&255;return j===2&&(e=revLookup[o.charCodeAt(st)]<<2|revLookup[o.charCodeAt(st+1)]>>4,d[et++]=e&255),j===1&&(e=revLookup[o.charCodeAt(st)]<<10|revLookup[o.charCodeAt(st+1)]<<4|revLookup[o.charCodeAt(st+2)]>>2,d[et++]=e>>8&255,d[et++]=e&255),d}function tripletToBase64(o){return lookup[o>>18&63]+lookup[o>>12&63]+lookup[o>>6&63]+lookup[o&63]}function encodeChunk(o,e,a){for(var c,j=[],d=e;d<a;d+=3)c=(o[d]<<16&16711680)+(o[d+1]<<8&65280)+(o[d+2]&255),j.push(tripletToBase64(c));return j.join("")}function fromByteArray(o){for(var e,a=o.length,c=a%3,j=[],d=16383,et=0,at=a-c;et<at;et+=d)j.push(encodeChunk(o,et,et+d>at?at:et+d));return c===1?(e=o[a-1],j.push(lookup[e>>2]+lookup[e<<4&63]+"==")):c===2&&(e=(o[a-2]<<8)+o[a-1],j.push(lookup[e>>10]+lookup[e>>4&63]+lookup[e<<2&63]+"=")),j.join("")}var ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754.read=function(o,e,a,c,j){var d,et,at=j*8-c-1,st=(1<<at)-1,ct=st>>1,ot=-7,gt=a?j-1:0,ft=a?-1:1,yt=o[e+gt];for(gt+=ft,d=yt&(1<<-ot)-1,yt>>=-ot,ot+=at;ot>0;d=d*256+o[e+gt],gt+=ft,ot-=8);for(et=d&(1<<-ot)-1,d>>=-ot,ot+=c;ot>0;et=et*256+o[e+gt],gt+=ft,ot-=8);if(d===0)d=1-ct;else{if(d===st)return et?NaN:(yt?-1:1)*(1/0);et=et+Math.pow(2,c),d=d-ct}return(yt?-1:1)*et*Math.pow(2,d-c)};ieee754.write=function(o,e,a,c,j,d){var et,at,st,ct=d*8-j-1,ot=(1<<ct)-1,gt=ot>>1,ft=j===23?Math.pow(2,-24)-Math.pow(2,-77):0,yt=c?0:d-1,vt=c?1:-1,rt=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(at=isNaN(e)?1:0,et=ot):(et=Math.floor(Math.log(e)/Math.LN2),e*(st=Math.pow(2,-et))<1&&(et--,st*=2),et+gt>=1?e+=ft/st:e+=ft*Math.pow(2,1-gt),e*st>=2&&(et++,st/=2),et+gt>=ot?(at=0,et=ot):et+gt>=1?(at=(e*st-1)*Math.pow(2,j),et=et+gt):(at=e*Math.pow(2,gt-1)*Math.pow(2,j),et=0));j>=8;o[a+yt]=at&255,yt+=vt,at/=256,j-=8);for(et=et<<j|at,ct+=j;ct>0;o[a+yt]=et&255,yt+=vt,et/=256,ct-=8);o[a+yt-vt]|=rt*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(o){const e=base64Js,a=ieee754,c=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;o.Buffer=ot,o.SlowBuffer=dt,o.INSPECT_MAX_BYTES=50;const j=2147483647;o.kMaxLength=j;const{Uint8Array:d,ArrayBuffer:et,SharedArrayBuffer:at}=globalThis;ot.TYPED_ARRAY_SUPPORT=st(),!ot.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function st(){try{const Wt=new d(1),Lt={foo:function(){return 42}};return Object.setPrototypeOf(Lt,d.prototype),Object.setPrototypeOf(Wt,Lt),Wt.foo()===42}catch{return!1}}Object.defineProperty(ot.prototype,"parent",{enumerable:!0,get:function(){if(ot.isBuffer(this))return this.buffer}}),Object.defineProperty(ot.prototype,"offset",{enumerable:!0,get:function(){if(ot.isBuffer(this))return this.byteOffset}});function ct(Wt){if(Wt>j)throw new RangeError('The value "'+Wt+'" is invalid for option "size"');const Lt=new d(Wt);return Object.setPrototypeOf(Lt,ot.prototype),Lt}function ot(Wt,Lt,zt){if(typeof Wt=="number"){if(typeof Lt=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return vt(Wt)}return gt(Wt,Lt,zt)}ot.poolSize=8192;function gt(Wt,Lt,zt){if(typeof Wt=="string")return rt(Wt,Lt);if(et.isView(Wt))return ht(Wt);if(Wt==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Wt);if(Gr(Wt,et)||Wt&&Gr(Wt.buffer,et)||typeof at<"u"&&(Gr(Wt,at)||Wt&&Gr(Wt.buffer,at)))return wt(Wt,Lt,zt);if(typeof Wt=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const Zt=Wt.valueOf&&Wt.valueOf();if(Zt!=null&&Zt!==Wt)return ot.from(Zt,Lt,zt);const ar=At(Wt);if(ar)return ar;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Wt[Symbol.toPrimitive]=="function")return ot.from(Wt[Symbol.toPrimitive]("string"),Lt,zt);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Wt)}ot.from=function(Wt,Lt,zt){return gt(Wt,Lt,zt)},Object.setPrototypeOf(ot.prototype,d.prototype),Object.setPrototypeOf(ot,d);function ft(Wt){if(typeof Wt!="number")throw new TypeError('"size" argument must be of type number');if(Wt<0)throw new RangeError('The value "'+Wt+'" is invalid for option "size"')}function yt(Wt,Lt,zt){return ft(Wt),Wt<=0?ct(Wt):Lt!==void 0?typeof zt=="string"?ct(Wt).fill(Lt,zt):ct(Wt).fill(Lt):ct(Wt)}ot.alloc=function(Wt,Lt,zt){return yt(Wt,Lt,zt)};function vt(Wt){return ft(Wt),ct(Wt<0?0:Ct(Wt)|0)}ot.allocUnsafe=function(Wt){return vt(Wt)},ot.allocUnsafeSlow=function(Wt){return vt(Wt)};function rt(Wt,Lt){if((typeof Lt!="string"||Lt==="")&&(Lt="utf8"),!ot.isEncoding(Lt))throw new TypeError("Unknown encoding: "+Lt);const zt=Et(Wt,Lt)|0;let Zt=ct(zt);const ar=Zt.write(Wt,Lt);return ar!==zt&&(Zt=Zt.slice(0,ar)),Zt}function bt(Wt){const Lt=Wt.length<0?0:Ct(Wt.length)|0,zt=ct(Lt);for(let Zt=0;Zt<Lt;Zt+=1)zt[Zt]=Wt[Zt]&255;return zt}function ht(Wt){if(Gr(Wt,d)){const Lt=new d(Wt);return wt(Lt.buffer,Lt.byteOffset,Lt.byteLength)}return bt(Wt)}function wt(Wt,Lt,zt){if(Lt<0||Wt.byteLength<Lt)throw new RangeError('"offset" is outside of buffer bounds');if(Wt.byteLength<Lt+(zt||0))throw new RangeError('"length" is outside of buffer bounds');let Zt;return Lt===void 0&&zt===void 0?Zt=new d(Wt):zt===void 0?Zt=new d(Wt,Lt):Zt=new d(Wt,Lt,zt),Object.setPrototypeOf(Zt,ot.prototype),Zt}function At(Wt){if(ot.isBuffer(Wt)){const Lt=Ct(Wt.length)|0,zt=ct(Lt);return zt.length===0||Wt.copy(zt,0,0,Lt),zt}if(Wt.length!==void 0)return typeof Wt.length!="number"||Ln(Wt.length)?ct(0):bt(Wt);if(Wt.type==="Buffer"&&Array.isArray(Wt.data))return bt(Wt.data)}function Ct(Wt){if(Wt>=j)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+j.toString(16)+" bytes");return Wt|0}function dt(Wt){return+Wt!=Wt&&(Wt=0),ot.alloc(+Wt)}ot.isBuffer=function(Lt){return Lt!=null&&Lt._isBuffer===!0&&Lt!==ot.prototype},ot.compare=function(Lt,zt){if(Gr(Lt,d)&&(Lt=ot.from(Lt,Lt.offset,Lt.byteLength)),Gr(zt,d)&&(zt=ot.from(zt,zt.offset,zt.byteLength)),!ot.isBuffer(Lt)||!ot.isBuffer(zt))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(Lt===zt)return 0;let Zt=Lt.length,ar=zt.length;for(let Or=0,vr=Math.min(Zt,ar);Or<vr;++Or)if(Lt[Or]!==zt[Or]){Zt=Lt[Or],ar=zt[Or];break}return Zt<ar?-1:ar<Zt?1:0},ot.isEncoding=function(Lt){switch(String(Lt).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},ot.concat=function(Lt,zt){if(!Array.isArray(Lt))throw new TypeError('"list" argument must be an Array of Buffers');if(Lt.length===0)return ot.alloc(0);let Zt;if(zt===void 0)for(zt=0,Zt=0;Zt<Lt.length;++Zt)zt+=Lt[Zt].length;const ar=ot.allocUnsafe(zt);let Or=0;for(Zt=0;Zt<Lt.length;++Zt){let vr=Lt[Zt];if(Gr(vr,d))Or+vr.length>ar.length?(ot.isBuffer(vr)||(vr=ot.from(vr)),vr.copy(ar,Or)):d.prototype.set.call(ar,vr,Or);else if(ot.isBuffer(vr))vr.copy(ar,Or);else throw new TypeError('"list" argument must be an Array of Buffers');Or+=vr.length}return ar};function Et(Wt,Lt){if(ot.isBuffer(Wt))return Wt.length;if(et.isView(Wt)||Gr(Wt,et))return Wt.byteLength;if(typeof Wt!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Wt);const zt=Wt.length,Zt=arguments.length>2&&arguments[2]===!0;if(!Zt&&zt===0)return 0;let ar=!1;for(;;)switch(Lt){case"ascii":case"latin1":case"binary":return zt;case"utf8":case"utf-8":return En(Wt).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return zt*2;case"hex":return zt>>>1;case"base64":return Dn(Wt).length;default:if(ar)return Zt?-1:En(Wt).length;Lt=(""+Lt).toLowerCase(),ar=!0}}ot.byteLength=Et;function Rt(Wt,Lt,zt){let Zt=!1;if((Lt===void 0||Lt<0)&&(Lt=0),Lt>this.length||((zt===void 0||zt>this.length)&&(zt=this.length),zt<=0)||(zt>>>=0,Lt>>>=0,zt<=Lt))return"";for(Wt||(Wt="utf8");;)switch(Wt){case"hex":return Tt(this,Lt,zt);case"utf8":case"utf-8":return pt(this,Lt,zt);case"ascii":return _(this,Lt,zt);case"latin1":case"binary":return tt(this,Lt,zt);case"base64":return it(this,Lt,zt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return It(this,Lt,zt);default:if(Zt)throw new TypeError("Unknown encoding: "+Wt);Wt=(Wt+"").toLowerCase(),Zt=!0}}ot.prototype._isBuffer=!0;function Mt(Wt,Lt,zt){const Zt=Wt[Lt];Wt[Lt]=Wt[zt],Wt[zt]=Zt}ot.prototype.swap16=function(){const Lt=this.length;if(Lt%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let zt=0;zt<Lt;zt+=2)Mt(this,zt,zt+1);return this},ot.prototype.swap32=function(){const Lt=this.length;if(Lt%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let zt=0;zt<Lt;zt+=4)Mt(this,zt,zt+3),Mt(this,zt+1,zt+2);return this},ot.prototype.swap64=function(){const Lt=this.length;if(Lt%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let zt=0;zt<Lt;zt+=8)Mt(this,zt,zt+7),Mt(this,zt+1,zt+6),Mt(this,zt+2,zt+5),Mt(this,zt+3,zt+4);return this},ot.prototype.toString=function(){const Lt=this.length;return Lt===0?"":arguments.length===0?pt(this,0,Lt):Rt.apply(this,arguments)},ot.prototype.toLocaleString=ot.prototype.toString,ot.prototype.equals=function(Lt){if(!ot.isBuffer(Lt))throw new TypeError("Argument must be a Buffer");return this===Lt?!0:ot.compare(this,Lt)===0},ot.prototype.inspect=function(){let Lt="";const zt=o.INSPECT_MAX_BYTES;return Lt=this.toString("hex",0,zt).replace(/(.{2})/g,"$1 ").trim(),this.length>zt&&(Lt+=" ... "),"<Buffer "+Lt+">"},c&&(ot.prototype[c]=ot.prototype.inspect),ot.prototype.compare=function(Lt,zt,Zt,ar,Or){if(Gr(Lt,d)&&(Lt=ot.from(Lt,Lt.offset,Lt.byteLength)),!ot.isBuffer(Lt))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof Lt);if(zt===void 0&&(zt=0),Zt===void 0&&(Zt=Lt?Lt.length:0),ar===void 0&&(ar=0),Or===void 0&&(Or=this.length),zt<0||Zt>Lt.length||ar<0||Or>this.length)throw new RangeError("out of range index");if(ar>=Or&&zt>=Zt)return 0;if(ar>=Or)return-1;if(zt>=Zt)return 1;if(zt>>>=0,Zt>>>=0,ar>>>=0,Or>>>=0,this===Lt)return 0;let vr=Or-ar,Rr=Zt-zt;const fr=Math.min(vr,Rr),tr=this.slice(ar,Or),yr=Lt.slice(zt,Zt);for(let fn=0;fn<fr;++fn)if(tr[fn]!==yr[fn]){vr=tr[fn],Rr=yr[fn];break}return vr<Rr?-1:Rr<vr?1:0};function _t(Wt,Lt,zt,Zt,ar){if(Wt.length===0)return-1;if(typeof zt=="string"?(Zt=zt,zt=0):zt>2147483647?zt=2147483647:zt<-2147483648&&(zt=-2147483648),zt=+zt,Ln(zt)&&(zt=ar?0:Wt.length-1),zt<0&&(zt=Wt.length+zt),zt>=Wt.length){if(ar)return-1;zt=Wt.length-1}else if(zt<0)if(ar)zt=0;else return-1;if(typeof Lt=="string"&&(Lt=ot.from(Lt,Zt)),ot.isBuffer(Lt))return Lt.length===0?-1:kt(Wt,Lt,zt,Zt,ar);if(typeof Lt=="number")return Lt=Lt&255,typeof d.prototype.indexOf=="function"?ar?d.prototype.indexOf.call(Wt,Lt,zt):d.prototype.lastIndexOf.call(Wt,Lt,zt):kt(Wt,[Lt],zt,Zt,ar);throw new TypeError("val must be string, number or Buffer")}function kt(Wt,Lt,zt,Zt,ar){let Or=1,vr=Wt.length,Rr=Lt.length;if(Zt!==void 0&&(Zt=String(Zt).toLowerCase(),Zt==="ucs2"||Zt==="ucs-2"||Zt==="utf16le"||Zt==="utf-16le")){if(Wt.length<2||Lt.length<2)return-1;Or=2,vr/=2,Rr/=2,zt/=2}function fr(yr,fn){return Or===1?yr[fn]:yr.readUInt16BE(fn*Or)}let tr;if(ar){let yr=-1;for(tr=zt;tr<vr;tr++)if(fr(Wt,tr)===fr(Lt,yr===-1?0:tr-yr)){if(yr===-1&&(yr=tr),tr-yr+1===Rr)return yr*Or}else yr!==-1&&(tr-=tr-yr),yr=-1}else for(zt+Rr>vr&&(zt=vr-Rr),tr=zt;tr>=0;tr--){let yr=!0;for(let fn=0;fn<Rr;fn++)if(fr(Wt,tr+fn)!==fr(Lt,fn)){yr=!1;break}if(yr)return tr}return-1}ot.prototype.includes=function(Lt,zt,Zt){return this.indexOf(Lt,zt,Zt)!==-1},ot.prototype.indexOf=function(Lt,zt,Zt){return _t(this,Lt,zt,Zt,!0)},ot.prototype.lastIndexOf=function(Lt,zt,Zt){return _t(this,Lt,zt,Zt,!1)};function nt(Wt,Lt,zt,Zt){zt=Number(zt)||0;const ar=Wt.length-zt;Zt?(Zt=Number(Zt),Zt>ar&&(Zt=ar)):Zt=ar;const Or=Lt.length;Zt>Or/2&&(Zt=Or/2);let vr;for(vr=0;vr<Zt;++vr){const Rr=parseInt(Lt.substr(vr*2,2),16);if(Ln(Rr))return vr;Wt[zt+vr]=Rr}return vr}function s(Wt,Lt,zt,Zt){return Br(En(Lt,Wt.length-zt),Wt,zt,Zt)}function b(Wt,Lt,zt,Zt){return Br(Dr(Lt),Wt,zt,Zt)}function $(Wt,Lt,zt,Zt){return Br(Dn(Lt),Wt,zt,Zt)}function _e(Wt,Lt,zt,Zt){return Br(Qr(Lt,Wt.length-zt),Wt,zt,Zt)}ot.prototype.write=function(Lt,zt,Zt,ar){if(zt===void 0)ar="utf8",Zt=this.length,zt=0;else if(Zt===void 0&&typeof zt=="string")ar=zt,Zt=this.length,zt=0;else if(isFinite(zt))zt=zt>>>0,isFinite(Zt)?(Zt=Zt>>>0,ar===void 0&&(ar="utf8")):(ar=Zt,Zt=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Or=this.length-zt;if((Zt===void 0||Zt>Or)&&(Zt=Or),Lt.length>0&&(Zt<0||zt<0)||zt>this.length)throw new RangeError("Attempt to write outside buffer bounds");ar||(ar="utf8");let vr=!1;for(;;)switch(ar){case"hex":return nt(this,Lt,zt,Zt);case"utf8":case"utf-8":return s(this,Lt,zt,Zt);case"ascii":case"latin1":case"binary":return b(this,Lt,zt,Zt);case"base64":return $(this,Lt,zt,Zt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _e(this,Lt,zt,Zt);default:if(vr)throw new TypeError("Unknown encoding: "+ar);ar=(""+ar).toLowerCase(),vr=!0}},ot.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function it(Wt,Lt,zt){return Lt===0&&zt===Wt.length?e.fromByteArray(Wt):e.fromByteArray(Wt.slice(Lt,zt))}function pt(Wt,Lt,zt){zt=Math.min(Wt.length,zt);const Zt=[];let ar=Lt;for(;ar<zt;){const Or=Wt[ar];let vr=null,Rr=Or>239?4:Or>223?3:Or>191?2:1;if(ar+Rr<=zt){let fr,tr,yr,fn;switch(Rr){case 1:Or<128&&(vr=Or);break;case 2:fr=Wt[ar+1],(fr&192)===128&&(fn=(Or&31)<<6|fr&63,fn>127&&(vr=fn));break;case 3:fr=Wt[ar+1],tr=Wt[ar+2],(fr&192)===128&&(tr&192)===128&&(fn=(Or&15)<<12|(fr&63)<<6|tr&63,fn>2047&&(fn<55296||fn>57343)&&(vr=fn));break;case 4:fr=Wt[ar+1],tr=Wt[ar+2],yr=Wt[ar+3],(fr&192)===128&&(tr&192)===128&&(yr&192)===128&&(fn=(Or&15)<<18|(fr&63)<<12|(tr&63)<<6|yr&63,fn>65535&&fn<1114112&&(vr=fn))}}vr===null?(vr=65533,Rr=1):vr>65535&&(vr-=65536,Zt.push(vr>>>10&1023|55296),vr=56320|vr&1023),Zt.push(vr),ar+=Rr}return lt(Zt)}const mt=4096;function lt(Wt){const Lt=Wt.length;if(Lt<=mt)return String.fromCharCode.apply(String,Wt);let zt="",Zt=0;for(;Zt<Lt;)zt+=String.fromCharCode.apply(String,Wt.slice(Zt,Zt+=mt));return zt}function _(Wt,Lt,zt){let Zt="";zt=Math.min(Wt.length,zt);for(let ar=Lt;ar<zt;++ar)Zt+=String.fromCharCode(Wt[ar]&127);return Zt}function tt(Wt,Lt,zt){let Zt="";zt=Math.min(Wt.length,zt);for(let ar=Lt;ar<zt;++ar)Zt+=String.fromCharCode(Wt[ar]);return Zt}function Tt(Wt,Lt,zt){const Zt=Wt.length;(!Lt||Lt<0)&&(Lt=0),(!zt||zt<0||zt>Zt)&&(zt=Zt);let ar="";for(let Or=Lt;Or<zt;++Or)ar+=Fr[Wt[Or]];return ar}function It(Wt,Lt,zt){const Zt=Wt.slice(Lt,zt);let ar="";for(let Or=0;Or<Zt.length-1;Or+=2)ar+=String.fromCharCode(Zt[Or]+Zt[Or+1]*256);return ar}ot.prototype.slice=function(Lt,zt){const Zt=this.length;Lt=~~Lt,zt=zt===void 0?Zt:~~zt,Lt<0?(Lt+=Zt,Lt<0&&(Lt=0)):Lt>Zt&&(Lt=Zt),zt<0?(zt+=Zt,zt<0&&(zt=0)):zt>Zt&&(zt=Zt),zt<Lt&&(zt=Lt);const ar=this.subarray(Lt,zt);return Object.setPrototypeOf(ar,ot.prototype),ar};function Nt(Wt,Lt,zt){if(Wt%1!==0||Wt<0)throw new RangeError("offset is not uint");if(Wt+Lt>zt)throw new RangeError("Trying to access beyond buffer length")}ot.prototype.readUintLE=ot.prototype.readUIntLE=function(Lt,zt,Zt){Lt=Lt>>>0,zt=zt>>>0,Zt||Nt(Lt,zt,this.length);let ar=this[Lt],Or=1,vr=0;for(;++vr<zt&&(Or*=256);)ar+=this[Lt+vr]*Or;return ar},ot.prototype.readUintBE=ot.prototype.readUIntBE=function(Lt,zt,Zt){Lt=Lt>>>0,zt=zt>>>0,Zt||Nt(Lt,zt,this.length);let ar=this[Lt+--zt],Or=1;for(;zt>0&&(Or*=256);)ar+=this[Lt+--zt]*Or;return ar},ot.prototype.readUint8=ot.prototype.readUInt8=function(Lt,zt){return Lt=Lt>>>0,zt||Nt(Lt,1,this.length),this[Lt]},ot.prototype.readUint16LE=ot.prototype.readUInt16LE=function(Lt,zt){return Lt=Lt>>>0,zt||Nt(Lt,2,this.length),this[Lt]|this[Lt+1]<<8},ot.prototype.readUint16BE=ot.prototype.readUInt16BE=function(Lt,zt){return Lt=Lt>>>0,zt||Nt(Lt,2,this.length),this[Lt]<<8|this[Lt+1]},ot.prototype.readUint32LE=ot.prototype.readUInt32LE=function(Lt,zt){return Lt=Lt>>>0,zt||Nt(Lt,4,this.length),(this[Lt]|this[Lt+1]<<8|this[Lt+2]<<16)+this[Lt+3]*16777216},ot.prototype.readUint32BE=ot.prototype.readUInt32BE=function(Lt,zt){return Lt=Lt>>>0,zt||Nt(Lt,4,this.length),this[Lt]*16777216+(this[Lt+1]<<16|this[Lt+2]<<8|this[Lt+3])},ot.prototype.readBigUInt64LE=_i(function(Lt){Lt=Lt>>>0,Ar(Lt,"offset");const zt=this[Lt],Zt=this[Lt+7];(zt===void 0||Zt===void 0)&&gn(Lt,this.length-8);const ar=zt+this[++Lt]*2**8+this[++Lt]*2**16+this[++Lt]*2**24,Or=this[++Lt]+this[++Lt]*2**8+this[++Lt]*2**16+Zt*2**24;return BigInt(ar)+(BigInt(Or)<<BigInt(32))}),ot.prototype.readBigUInt64BE=_i(function(Lt){Lt=Lt>>>0,Ar(Lt,"offset");const zt=this[Lt],Zt=this[Lt+7];(zt===void 0||Zt===void 0)&&gn(Lt,this.length-8);const ar=zt*2**24+this[++Lt]*2**16+this[++Lt]*2**8+this[++Lt],Or=this[++Lt]*2**24+this[++Lt]*2**16+this[++Lt]*2**8+Zt;return(BigInt(ar)<<BigInt(32))+BigInt(Or)}),ot.prototype.readIntLE=function(Lt,zt,Zt){Lt=Lt>>>0,zt=zt>>>0,Zt||Nt(Lt,zt,this.length);let ar=this[Lt],Or=1,vr=0;for(;++vr<zt&&(Or*=256);)ar+=this[Lt+vr]*Or;return Or*=128,ar>=Or&&(ar-=Math.pow(2,8*zt)),ar},ot.prototype.readIntBE=function(Lt,zt,Zt){Lt=Lt>>>0,zt=zt>>>0,Zt||Nt(Lt,zt,this.length);let ar=zt,Or=1,vr=this[Lt+--ar];for(;ar>0&&(Or*=256);)vr+=this[Lt+--ar]*Or;return Or*=128,vr>=Or&&(vr-=Math.pow(2,8*zt)),vr},ot.prototype.readInt8=function(Lt,zt){return Lt=Lt>>>0,zt||Nt(Lt,1,this.length),this[Lt]&128?(255-this[Lt]+1)*-1:this[Lt]},ot.prototype.readInt16LE=function(Lt,zt){Lt=Lt>>>0,zt||Nt(Lt,2,this.length);const Zt=this[Lt]|this[Lt+1]<<8;return Zt&32768?Zt|4294901760:Zt},ot.prototype.readInt16BE=function(Lt,zt){Lt=Lt>>>0,zt||Nt(Lt,2,this.length);const Zt=this[Lt+1]|this[Lt]<<8;return Zt&32768?Zt|4294901760:Zt},ot.prototype.readInt32LE=function(Lt,zt){return Lt=Lt>>>0,zt||Nt(Lt,4,this.length),this[Lt]|this[Lt+1]<<8|this[Lt+2]<<16|this[Lt+3]<<24},ot.prototype.readInt32BE=function(Lt,zt){return Lt=Lt>>>0,zt||Nt(Lt,4,this.length),this[Lt]<<24|this[Lt+1]<<16|this[Lt+2]<<8|this[Lt+3]},ot.prototype.readBigInt64LE=_i(function(Lt){Lt=Lt>>>0,Ar(Lt,"offset");const zt=this[Lt],Zt=this[Lt+7];(zt===void 0||Zt===void 0)&&gn(Lt,this.length-8);const ar=this[Lt+4]+this[Lt+5]*2**8+this[Lt+6]*2**16+(Zt<<24);return(BigInt(ar)<<BigInt(32))+BigInt(zt+this[++Lt]*2**8+this[++Lt]*2**16+this[++Lt]*2**24)}),ot.prototype.readBigInt64BE=_i(function(Lt){Lt=Lt>>>0,Ar(Lt,"offset");const zt=this[Lt],Zt=this[Lt+7];(zt===void 0||Zt===void 0)&&gn(Lt,this.length-8);const ar=(zt<<24)+this[++Lt]*2**16+this[++Lt]*2**8+this[++Lt];return(BigInt(ar)<<BigInt(32))+BigInt(this[++Lt]*2**24+this[++Lt]*2**16+this[++Lt]*2**8+Zt)}),ot.prototype.readFloatLE=function(Lt,zt){return Lt=Lt>>>0,zt||Nt(Lt,4,this.length),a.read(this,Lt,!0,23,4)},ot.prototype.readFloatBE=function(Lt,zt){return Lt=Lt>>>0,zt||Nt(Lt,4,this.length),a.read(this,Lt,!1,23,4)},ot.prototype.readDoubleLE=function(Lt,zt){return Lt=Lt>>>0,zt||Nt(Lt,8,this.length),a.read(this,Lt,!0,52,8)},ot.prototype.readDoubleBE=function(Lt,zt){return Lt=Lt>>>0,zt||Nt(Lt,8,this.length),a.read(this,Lt,!1,52,8)};function Ut(Wt,Lt,zt,Zt,ar,Or){if(!ot.isBuffer(Wt))throw new TypeError('"buffer" argument must be a Buffer instance');if(Lt>ar||Lt<Or)throw new RangeError('"value" argument is out of bounds');if(zt+Zt>Wt.length)throw new RangeError("Index out of range")}ot.prototype.writeUintLE=ot.prototype.writeUIntLE=function(Lt,zt,Zt,ar){if(Lt=+Lt,zt=zt>>>0,Zt=Zt>>>0,!ar){const Rr=Math.pow(2,8*Zt)-1;Ut(this,Lt,zt,Zt,Rr,0)}let Or=1,vr=0;for(this[zt]=Lt&255;++vr<Zt&&(Or*=256);)this[zt+vr]=Lt/Or&255;return zt+Zt},ot.prototype.writeUintBE=ot.prototype.writeUIntBE=function(Lt,zt,Zt,ar){if(Lt=+Lt,zt=zt>>>0,Zt=Zt>>>0,!ar){const Rr=Math.pow(2,8*Zt)-1;Ut(this,Lt,zt,Zt,Rr,0)}let Or=Zt-1,vr=1;for(this[zt+Or]=Lt&255;--Or>=0&&(vr*=256);)this[zt+Or]=Lt/vr&255;return zt+Zt},ot.prototype.writeUint8=ot.prototype.writeUInt8=function(Lt,zt,Zt){return Lt=+Lt,zt=zt>>>0,Zt||Ut(this,Lt,zt,1,255,0),this[zt]=Lt&255,zt+1},ot.prototype.writeUint16LE=ot.prototype.writeUInt16LE=function(Lt,zt,Zt){return Lt=+Lt,zt=zt>>>0,Zt||Ut(this,Lt,zt,2,65535,0),this[zt]=Lt&255,this[zt+1]=Lt>>>8,zt+2},ot.prototype.writeUint16BE=ot.prototype.writeUInt16BE=function(Lt,zt,Zt){return Lt=+Lt,zt=zt>>>0,Zt||Ut(this,Lt,zt,2,65535,0),this[zt]=Lt>>>8,this[zt+1]=Lt&255,zt+2},ot.prototype.writeUint32LE=ot.prototype.writeUInt32LE=function(Lt,zt,Zt){return Lt=+Lt,zt=zt>>>0,Zt||Ut(this,Lt,zt,4,4294967295,0),this[zt+3]=Lt>>>24,this[zt+2]=Lt>>>16,this[zt+1]=Lt>>>8,this[zt]=Lt&255,zt+4},ot.prototype.writeUint32BE=ot.prototype.writeUInt32BE=function(Lt,zt,Zt){return Lt=+Lt,zt=zt>>>0,Zt||Ut(this,Lt,zt,4,4294967295,0),this[zt]=Lt>>>24,this[zt+1]=Lt>>>16,this[zt+2]=Lt>>>8,this[zt+3]=Lt&255,zt+4};function Gt(Wt,Lt,zt,Zt,ar){hr(Lt,Zt,ar,Wt,zt,7);let Or=Number(Lt&BigInt(4294967295));Wt[zt++]=Or,Or=Or>>8,Wt[zt++]=Or,Or=Or>>8,Wt[zt++]=Or,Or=Or>>8,Wt[zt++]=Or;let vr=Number(Lt>>BigInt(32)&BigInt(4294967295));return Wt[zt++]=vr,vr=vr>>8,Wt[zt++]=vr,vr=vr>>8,Wt[zt++]=vr,vr=vr>>8,Wt[zt++]=vr,zt}function Pt(Wt,Lt,zt,Zt,ar){hr(Lt,Zt,ar,Wt,zt,7);let Or=Number(Lt&BigInt(4294967295));Wt[zt+7]=Or,Or=Or>>8,Wt[zt+6]=Or,Or=Or>>8,Wt[zt+5]=Or,Or=Or>>8,Wt[zt+4]=Or;let vr=Number(Lt>>BigInt(32)&BigInt(4294967295));return Wt[zt+3]=vr,vr=vr>>8,Wt[zt+2]=vr,vr=vr>>8,Wt[zt+1]=vr,vr=vr>>8,Wt[zt]=vr,zt+8}ot.prototype.writeBigUInt64LE=_i(function(Lt,zt=0){return Gt(this,Lt,zt,BigInt(0),BigInt("0xffffffffffffffff"))}),ot.prototype.writeBigUInt64BE=_i(function(Lt,zt=0){return Pt(this,Lt,zt,BigInt(0),BigInt("0xffffffffffffffff"))}),ot.prototype.writeIntLE=function(Lt,zt,Zt,ar){if(Lt=+Lt,zt=zt>>>0,!ar){const fr=Math.pow(2,8*Zt-1);Ut(this,Lt,zt,Zt,fr-1,-fr)}let Or=0,vr=1,Rr=0;for(this[zt]=Lt&255;++Or<Zt&&(vr*=256);)Lt<0&&Rr===0&&this[zt+Or-1]!==0&&(Rr=1),this[zt+Or]=(Lt/vr>>0)-Rr&255;return zt+Zt},ot.prototype.writeIntBE=function(Lt,zt,Zt,ar){if(Lt=+Lt,zt=zt>>>0,!ar){const fr=Math.pow(2,8*Zt-1);Ut(this,Lt,zt,Zt,fr-1,-fr)}let Or=Zt-1,vr=1,Rr=0;for(this[zt+Or]=Lt&255;--Or>=0&&(vr*=256);)Lt<0&&Rr===0&&this[zt+Or+1]!==0&&(Rr=1),this[zt+Or]=(Lt/vr>>0)-Rr&255;return zt+Zt},ot.prototype.writeInt8=function(Lt,zt,Zt){return Lt=+Lt,zt=zt>>>0,Zt||Ut(this,Lt,zt,1,127,-128),Lt<0&&(Lt=255+Lt+1),this[zt]=Lt&255,zt+1},ot.prototype.writeInt16LE=function(Lt,zt,Zt){return Lt=+Lt,zt=zt>>>0,Zt||Ut(this,Lt,zt,2,32767,-32768),this[zt]=Lt&255,this[zt+1]=Lt>>>8,zt+2},ot.prototype.writeInt16BE=function(Lt,zt,Zt){return Lt=+Lt,zt=zt>>>0,Zt||Ut(this,Lt,zt,2,32767,-32768),this[zt]=Lt>>>8,this[zt+1]=Lt&255,zt+2},ot.prototype.writeInt32LE=function(Lt,zt,Zt){return Lt=+Lt,zt=zt>>>0,Zt||Ut(this,Lt,zt,4,2147483647,-2147483648),this[zt]=Lt&255,this[zt+1]=Lt>>>8,this[zt+2]=Lt>>>16,this[zt+3]=Lt>>>24,zt+4},ot.prototype.writeInt32BE=function(Lt,zt,Zt){return Lt=+Lt,zt=zt>>>0,Zt||Ut(this,Lt,zt,4,2147483647,-2147483648),Lt<0&&(Lt=4294967295+Lt+1),this[zt]=Lt>>>24,this[zt+1]=Lt>>>16,this[zt+2]=Lt>>>8,this[zt+3]=Lt&255,zt+4},ot.prototype.writeBigInt64LE=_i(function(Lt,zt=0){return Gt(this,Lt,zt,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),ot.prototype.writeBigInt64BE=_i(function(Lt,zt=0){return Pt(this,Lt,zt,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function qt(Wt,Lt,zt,Zt,ar,Or){if(zt+Zt>Wt.length)throw new RangeError("Index out of range");if(zt<0)throw new RangeError("Index out of range")}function Kt(Wt,Lt,zt,Zt,ar){return Lt=+Lt,zt=zt>>>0,ar||qt(Wt,Lt,zt,4),a.write(Wt,Lt,zt,Zt,23,4),zt+4}ot.prototype.writeFloatLE=function(Lt,zt,Zt){return Kt(this,Lt,zt,!0,Zt)},ot.prototype.writeFloatBE=function(Lt,zt,Zt){return Kt(this,Lt,zt,!1,Zt)};function jt(Wt,Lt,zt,Zt,ar){return Lt=+Lt,zt=zt>>>0,ar||qt(Wt,Lt,zt,8),a.write(Wt,Lt,zt,Zt,52,8),zt+8}ot.prototype.writeDoubleLE=function(Lt,zt,Zt){return jt(this,Lt,zt,!0,Zt)},ot.prototype.writeDoubleBE=function(Lt,zt,Zt){return jt(this,Lt,zt,!1,Zt)},ot.prototype.copy=function(Lt,zt,Zt,ar){if(!ot.isBuffer(Lt))throw new TypeError("argument should be a Buffer");if(Zt||(Zt=0),!ar&&ar!==0&&(ar=this.length),zt>=Lt.length&&(zt=Lt.length),zt||(zt=0),ar>0&&ar<Zt&&(ar=Zt),ar===Zt||Lt.length===0||this.length===0)return 0;if(zt<0)throw new RangeError("targetStart out of bounds");if(Zt<0||Zt>=this.length)throw new RangeError("Index out of range");if(ar<0)throw new RangeError("sourceEnd out of bounds");ar>this.length&&(ar=this.length),Lt.length-zt<ar-Zt&&(ar=Lt.length-zt+Zt);const Or=ar-Zt;return this===Lt&&typeof d.prototype.copyWithin=="function"?this.copyWithin(zt,Zt,ar):d.prototype.set.call(Lt,this.subarray(Zt,ar),zt),Or},ot.prototype.fill=function(Lt,zt,Zt,ar){if(typeof Lt=="string"){if(typeof zt=="string"?(ar=zt,zt=0,Zt=this.length):typeof Zt=="string"&&(ar=Zt,Zt=this.length),ar!==void 0&&typeof ar!="string")throw new TypeError("encoding must be a string");if(typeof ar=="string"&&!ot.isEncoding(ar))throw new TypeError("Unknown encoding: "+ar);if(Lt.length===1){const vr=Lt.charCodeAt(0);(ar==="utf8"&&vr<128||ar==="latin1")&&(Lt=vr)}}else typeof Lt=="number"?Lt=Lt&255:typeof Lt=="boolean"&&(Lt=Number(Lt));if(zt<0||this.length<zt||this.length<Zt)throw new RangeError("Out of range index");if(Zt<=zt)return this;zt=zt>>>0,Zt=Zt===void 0?this.length:Zt>>>0,Lt||(Lt=0);let Or;if(typeof Lt=="number")for(Or=zt;Or<Zt;++Or)this[Or]=Lt;else{const vr=ot.isBuffer(Lt)?Lt:ot.from(Lt,ar),Rr=vr.length;if(Rr===0)throw new TypeError('The value "'+Lt+'" is invalid for argument "value"');for(Or=0;Or<Zt-zt;++Or)this[Or+zt]=vr[Or%Rr]}return this};const Ht={};function Bt(Wt,Lt,zt){Ht[Wt]=class extends zt{constructor(){super(),Object.defineProperty(this,"message",{value:Lt.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${Wt}]`,this.stack,delete this.name}get code(){return Wt}set code(ar){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ar,writable:!0})}toString(){return`${this.name} [${Wt}]: ${this.message}`}}}Bt("ERR_BUFFER_OUT_OF_BOUNDS",function(Wt){return Wt?`${Wt} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Bt("ERR_INVALID_ARG_TYPE",function(Wt,Lt){return`The "${Wt}" argument must be of type number. Received type ${typeof Lt}`},TypeError),Bt("ERR_OUT_OF_RANGE",function(Wt,Lt,zt){let Zt=`The value of "${Wt}" is out of range.`,ar=zt;return Number.isInteger(zt)&&Math.abs(zt)>2**32?ar=Jt(String(zt)):typeof zt=="bigint"&&(ar=String(zt),(zt>BigInt(2)**BigInt(32)||zt<-(BigInt(2)**BigInt(32)))&&(ar=Jt(ar)),ar+="n"),Zt+=` It must be ${Lt}. Received ${ar}`,Zt},RangeError);function Jt(Wt){let Lt="",zt=Wt.length;const Zt=Wt[0]==="-"?1:0;for(;zt>=Zt+4;zt-=3)Lt=`_${Wt.slice(zt-3,zt)}${Lt}`;return`${Wt.slice(0,zt)}${Lt}`}function sr(Wt,Lt,zt){Ar(Lt,"offset"),(Wt[Lt]===void 0||Wt[Lt+zt]===void 0)&&gn(Lt,Wt.length-(zt+1))}function hr(Wt,Lt,zt,Zt,ar,Or){if(Wt>zt||Wt<Lt){const vr=typeof Lt=="bigint"?"n":"";let Rr;throw Lt===0||Lt===BigInt(0)?Rr=`>= 0${vr} and < 2${vr} ** ${(Or+1)*8}${vr}`:Rr=`>= -(2${vr} ** ${(Or+1)*8-1}${vr}) and < 2 ** ${(Or+1)*8-1}${vr}`,new Ht.ERR_OUT_OF_RANGE("value",Rr,Wt)}sr(Zt,ar,Or)}function Ar(Wt,Lt){if(typeof Wt!="number")throw new Ht.ERR_INVALID_ARG_TYPE(Lt,"number",Wt)}function gn(Wt,Lt,zt){throw Math.floor(Wt)!==Wt?(Ar(Wt,zt),new Ht.ERR_OUT_OF_RANGE("offset","an integer",Wt)):Lt<0?new Ht.ERR_BUFFER_OUT_OF_BOUNDS:new Ht.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${Lt}`,Wt)}const Lr=/[^+/0-9A-Za-z-_]/g;function wr(Wt){if(Wt=Wt.split("=")[0],Wt=Wt.trim().replace(Lr,""),Wt.length<2)return"";for(;Wt.length%4!==0;)Wt=Wt+"=";return Wt}function En(Wt,Lt){Lt=Lt||1/0;let zt;const Zt=Wt.length;let ar=null;const Or=[];for(let vr=0;vr<Zt;++vr){if(zt=Wt.charCodeAt(vr),zt>55295&&zt<57344){if(!ar){if(zt>56319){(Lt-=3)>-1&&Or.push(239,191,189);continue}else if(vr+1===Zt){(Lt-=3)>-1&&Or.push(239,191,189);continue}ar=zt;continue}if(zt<56320){(Lt-=3)>-1&&Or.push(239,191,189),ar=zt;continue}zt=(ar-55296<<10|zt-56320)+65536}else ar&&(Lt-=3)>-1&&Or.push(239,191,189);if(ar=null,zt<128){if((Lt-=1)<0)break;Or.push(zt)}else if(zt<2048){if((Lt-=2)<0)break;Or.push(zt>>6|192,zt&63|128)}else if(zt<65536){if((Lt-=3)<0)break;Or.push(zt>>12|224,zt>>6&63|128,zt&63|128)}else if(zt<1114112){if((Lt-=4)<0)break;Or.push(zt>>18|240,zt>>12&63|128,zt>>6&63|128,zt&63|128)}else throw new Error("Invalid code point")}return Or}function Dr(Wt){const Lt=[];for(let zt=0;zt<Wt.length;++zt)Lt.push(Wt.charCodeAt(zt)&255);return Lt}function Qr(Wt,Lt){let zt,Zt,ar;const Or=[];for(let vr=0;vr<Wt.length&&!((Lt-=2)<0);++vr)zt=Wt.charCodeAt(vr),Zt=zt>>8,ar=zt%256,Or.push(ar),Or.push(Zt);return Or}function Dn(Wt){return e.toByteArray(wr(Wt))}function Br(Wt,Lt,zt,Zt){let ar;for(ar=0;ar<Zt&&!(ar+zt>=Lt.length||ar>=Wt.length);++ar)Lt[ar+zt]=Wt[ar];return ar}function Gr(Wt,Lt){return Wt instanceof Lt||Wt!=null&&Wt.constructor!=null&&Wt.constructor.name!=null&&Wt.constructor.name===Lt.name}function Ln(Wt){return Wt!==Wt}const Fr=function(){const Wt="0123456789abcdef",Lt=new Array(256);for(let zt=0;zt<16;++zt){const Zt=zt*16;for(let ar=0;ar<16;++ar)Lt[Zt+ar]=Wt[zt]+Wt[ar]}return Lt}();function _i(Wt){return typeof BigInt>"u"?Kn:Wt}function Kn(){throw new Error("BigInt not supported")}})(buffer$1);const Buffer=buffer$1.Buffer,Blob$1=buffer$1.Blob,BlobOptions=buffer$1.BlobOptions,Buffer$1=buffer$1.Buffer,File=buffer$1.File,FileOptions=buffer$1.FileOptions,INSPECT_MAX_BYTES=buffer$1.INSPECT_MAX_BYTES,SlowBuffer=buffer$1.SlowBuffer,TranscodeEncoding=buffer$1.TranscodeEncoding,atob$1=buffer$1.atob,btoa$1=buffer$1.btoa,constants$2=buffer$1.constants,isAscii=buffer$1.isAscii,isUtf8=buffer$1.isUtf8,kMaxLength=buffer$1.kMaxLength,kStringMaxLength=buffer$1.kStringMaxLength,resolveObjectURL=buffer$1.resolveObjectURL,transcode=buffer$1.transcode,dist$1=Object.freeze(Object.defineProperty({__proto__:null,Blob:Blob$1,BlobOptions,Buffer:Buffer$1,File,FileOptions,INSPECT_MAX_BYTES,SlowBuffer,TranscodeEncoding,atob:atob$1,btoa:btoa$1,constants:constants$2,default:Buffer,isAscii,isUtf8,kMaxLength,kStringMaxLength,resolveObjectURL,transcode},Symbol.toStringTag,{value:"Module"}));window.Buffer=Buffer$1;var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs$1(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}function getAugmentedNamespace(o){if(o.__esModule)return o;var e=o.default;if(typeof e=="function"){var a=function c(){return this instanceof c?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};a.prototype=e.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(o).forEach(function(c){var j=Object.getOwnPropertyDescriptor(o,c);Object.defineProperty(a,c,j.get?j:{enumerable:!0,get:function(){return o[c]}})}),a}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$1=Symbol.for("react.element"),n$2=Symbol.for("react.portal"),p$3=Symbol.for("react.fragment"),q$2=Symbol.for("react.strict_mode"),r$1=Symbol.for("react.profiler"),t$1=Symbol.for("react.provider"),u$1=Symbol.for("react.context"),v$2=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),z$1=Symbol.iterator;function A$1(o){return o===null||typeof o!="object"?null:(o=z$1&&o[z$1]||o["@@iterator"],typeof o=="function"?o:null)}var B$1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$1=Object.assign,D$1={};function E$1(o,e,a){this.props=o,this.context=e,this.refs=D$1,this.updater=a||B$1}E$1.prototype.isReactComponent={};E$1.prototype.setState=function(o,e){if(typeof o!="object"&&typeof o!="function"&&o!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,o,e,"setState")};E$1.prototype.forceUpdate=function(o){this.updater.enqueueForceUpdate(this,o,"forceUpdate")};function F(){}F.prototype=E$1.prototype;function G$1(o,e,a){this.props=o,this.context=e,this.refs=D$1,this.updater=a||B$1}var H$1=G$1.prototype=new F;H$1.constructor=G$1;C$1(H$1,E$1.prototype);H$1.isPureReactComponent=!0;var I$1=Array.isArray,J=Object.prototype.hasOwnProperty,K$1={current:null},L$1={key:!0,ref:!0,__self:!0,__source:!0};function M$1(o,e,a){var c,j={},d=null,et=null;if(e!=null)for(c in e.ref!==void 0&&(et=e.ref),e.key!==void 0&&(d=""+e.key),e)J.call(e,c)&&!L$1.hasOwnProperty(c)&&(j[c]=e[c]);var at=arguments.length-2;if(at===1)j.children=a;else if(1<at){for(var st=Array(at),ct=0;ct<at;ct++)st[ct]=arguments[ct+2];j.children=st}if(o&&o.defaultProps)for(c in at=o.defaultProps,at)j[c]===void 0&&(j[c]=at[c]);return{$$typeof:l$1,type:o,key:d,ref:et,props:j,_owner:K$1.current}}function N$1(o,e){return{$$typeof:l$1,type:o.type,key:e,ref:o.ref,props:o.props,_owner:o._owner}}function O$1(o){return typeof o=="object"&&o!==null&&o.$$typeof===l$1}function escape$1(o){var e={"=":"=0",":":"=2"};return"$"+o.replace(/[=:]/g,function(a){return e[a]})}var P$1=/\/+/g;function Q$1(o,e){return typeof o=="object"&&o!==null&&o.key!=null?escape$1(""+o.key):e.toString(36)}function R$2(o,e,a,c,j){var d=typeof o;(d==="undefined"||d==="boolean")&&(o=null);var et=!1;if(o===null)et=!0;else switch(d){case"string":case"number":et=!0;break;case"object":switch(o.$$typeof){case l$1:case n$2:et=!0}}if(et)return et=o,j=j(et),o=c===""?"."+Q$1(et,0):c,I$1(j)?(a="",o!=null&&(a=o.replace(P$1,"$&/")+"/"),R$2(j,e,a,"",function(ct){return ct})):j!=null&&(O$1(j)&&(j=N$1(j,a+(!j.key||et&&et.key===j.key?"":(""+j.key).replace(P$1,"$&/")+"/")+o)),e.push(j)),1;if(et=0,c=c===""?".":c+":",I$1(o))for(var at=0;at<o.length;at++){d=o[at];var st=c+Q$1(d,at);et+=R$2(d,e,a,st,j)}else if(st=A$1(o),typeof st=="function")for(o=st.call(o),at=0;!(d=o.next()).done;)d=d.value,st=c+Q$1(d,at++),et+=R$2(d,e,a,st,j);else if(d==="object")throw e=String(o),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return et}function S$1(o,e,a){if(o==null)return o;var c=[],j=0;return R$2(o,c,"","",function(d){return e.call(a,d,j++)}),c}function T$1(o){if(o._status===-1){var e=o._result;e=e(),e.then(function(a){(o._status===0||o._status===-1)&&(o._status=1,o._result=a)},function(a){(o._status===0||o._status===-1)&&(o._status=2,o._result=a)}),o._status===-1&&(o._status=0,o._result=e)}if(o._status===1)return o._result.default;throw o._result}var U$1={current:null},V$1={transition:null},W$1={ReactCurrentDispatcher:U$1,ReactCurrentBatchConfig:V$1,ReactCurrentOwner:K$1};function X$1(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$1,forEach:function(o,e,a){S$1(o,function(){e.apply(this,arguments)},a)},count:function(o){var e=0;return S$1(o,function(){e++}),e},toArray:function(o){return S$1(o,function(e){return e})||[]},only:function(o){if(!O$1(o))throw Error("React.Children.only expected to receive a single React element child.");return o}};react_production_min.Component=E$1;react_production_min.Fragment=p$3;react_production_min.Profiler=r$1;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q$2;react_production_min.Suspense=w;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.act=X$1;react_production_min.cloneElement=function(o,e,a){if(o==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+o+".");var c=C$1({},o.props),j=o.key,d=o.ref,et=o._owner;if(e!=null){if(e.ref!==void 0&&(d=e.ref,et=K$1.current),e.key!==void 0&&(j=""+e.key),o.type&&o.type.defaultProps)var at=o.type.defaultProps;for(st in e)J.call(e,st)&&!L$1.hasOwnProperty(st)&&(c[st]=e[st]===void 0&&at!==void 0?at[st]:e[st])}var st=arguments.length-2;if(st===1)c.children=a;else if(1<st){at=Array(st);for(var ct=0;ct<st;ct++)at[ct]=arguments[ct+2];c.children=at}return{$$typeof:l$1,type:o.type,key:j,ref:d,props:c,_owner:et}};react_production_min.createContext=function(o){return o={$$typeof:u$1,_currentValue:o,_currentValue2:o,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},o.Provider={$$typeof:t$1,_context:o},o.Consumer=o};react_production_min.createElement=M$1;react_production_min.createFactory=function(o){var e=M$1.bind(null,o);return e.type=o,e};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(o){return{$$typeof:v$2,render:o}};react_production_min.isValidElement=O$1;react_production_min.lazy=function(o){return{$$typeof:y,_payload:{_status:-1,_result:o},_init:T$1}};react_production_min.memo=function(o,e){return{$$typeof:x,type:o,compare:e===void 0?null:e}};react_production_min.startTransition=function(o){var e=V$1.transition;V$1.transition={};try{o()}finally{V$1.transition=e}};react_production_min.unstable_act=X$1;react_production_min.useCallback=function(o,e){return U$1.current.useCallback(o,e)};react_production_min.useContext=function(o){return U$1.current.useContext(o)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(o){return U$1.current.useDeferredValue(o)};react_production_min.useEffect=function(o,e){return U$1.current.useEffect(o,e)};react_production_min.useId=function(){return U$1.current.useId()};react_production_min.useImperativeHandle=function(o,e,a){return U$1.current.useImperativeHandle(o,e,a)};react_production_min.useInsertionEffect=function(o,e){return U$1.current.useInsertionEffect(o,e)};react_production_min.useLayoutEffect=function(o,e){return U$1.current.useLayoutEffect(o,e)};react_production_min.useMemo=function(o,e){return U$1.current.useMemo(o,e)};react_production_min.useReducer=function(o,e,a){return U$1.current.useReducer(o,e,a)};react_production_min.useRef=function(o){return U$1.current.useRef(o)};react_production_min.useState=function(o){return U$1.current.useState(o)};react_production_min.useSyncExternalStore=function(o,e,a){return U$1.current.useSyncExternalStore(o,e,a)};react_production_min.useTransition=function(){return U$1.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;const React$1=getDefaultExportFromCjs$1(reactExports),ReactOriginal=_mergeNamespaces({__proto__:null,default:React$1},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=reactExports,k=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m$1=Object.prototype.hasOwnProperty,n$1=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$2={key:!0,ref:!0,__self:!0,__source:!0};function q$1(o,e,a){var c,j={},d=null,et=null;a!==void 0&&(d=""+a),e.key!==void 0&&(d=""+e.key),e.ref!==void 0&&(et=e.ref);for(c in e)m$1.call(e,c)&&!p$2.hasOwnProperty(c)&&(j[c]=e[c]);if(o&&o.defaultProps)for(c in e=o.defaultProps,e)j[c]===void 0&&(j[c]=e[c]);return{$$typeof:k,type:o,key:d,ref:et,props:j,_owner:n$1.current}}reactJsxRuntime_production_min.Fragment=l;reactJsxRuntime_production_min.jsx=q$1;reactJsxRuntime_production_min.jsxs=q$1;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(o){function e(mt,lt){var _=mt.length;mt.push(lt);e:for(;0<_;){var tt=_-1>>>1,Tt=mt[tt];if(0<j(Tt,lt))mt[tt]=lt,mt[_]=Tt,_=tt;else break e}}function a(mt){return mt.length===0?null:mt[0]}function c(mt){if(mt.length===0)return null;var lt=mt[0],_=mt.pop();if(_!==lt){mt[0]=_;e:for(var tt=0,Tt=mt.length,It=Tt>>>1;tt<It;){var Nt=2*(tt+1)-1,Ut=mt[Nt],Gt=Nt+1,Pt=mt[Gt];if(0>j(Ut,_))Gt<Tt&&0>j(Pt,Ut)?(mt[tt]=Pt,mt[Gt]=_,tt=Gt):(mt[tt]=Ut,mt[Nt]=_,tt=Nt);else if(Gt<Tt&&0>j(Pt,_))mt[tt]=Pt,mt[Gt]=_,tt=Gt;else break e}}return lt}function j(mt,lt){var _=mt.sortIndex-lt.sortIndex;return _!==0?_:mt.id-lt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;o.unstable_now=function(){return d.now()}}else{var et=Date,at=et.now();o.unstable_now=function(){return et.now()-at}}var st=[],ct=[],ot=1,gt=null,ft=3,yt=!1,vt=!1,rt=!1,bt=typeof setTimeout=="function"?setTimeout:null,ht=typeof clearTimeout=="function"?clearTimeout:null,wt=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function At(mt){for(var lt=a(ct);lt!==null;){if(lt.callback===null)c(ct);else if(lt.startTime<=mt)c(ct),lt.sortIndex=lt.expirationTime,e(st,lt);else break;lt=a(ct)}}function Ct(mt){if(rt=!1,At(mt),!vt)if(a(st)!==null)vt=!0,it(dt);else{var lt=a(ct);lt!==null&&pt(Ct,lt.startTime-mt)}}function dt(mt,lt){vt=!1,rt&&(rt=!1,ht(Mt),Mt=-1),yt=!0;var _=ft;try{for(At(lt),gt=a(st);gt!==null&&(!(gt.expirationTime>lt)||mt&&!nt());){var tt=gt.callback;if(typeof tt=="function"){gt.callback=null,ft=gt.priorityLevel;var Tt=tt(gt.expirationTime<=lt);lt=o.unstable_now(),typeof Tt=="function"?gt.callback=Tt:gt===a(st)&&c(st),At(lt)}else c(st);gt=a(st)}if(gt!==null)var It=!0;else{var Nt=a(ct);Nt!==null&&pt(Ct,Nt.startTime-lt),It=!1}return It}finally{gt=null,ft=_,yt=!1}}var Et=!1,Rt=null,Mt=-1,_t=5,kt=-1;function nt(){return!(o.unstable_now()-kt<_t)}function s(){if(Rt!==null){var mt=o.unstable_now();kt=mt;var lt=!0;try{lt=Rt(!0,mt)}finally{lt?b():(Et=!1,Rt=null)}}else Et=!1}var b;if(typeof wt=="function")b=function(){wt(s)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,_e=$.port2;$.port1.onmessage=s,b=function(){_e.postMessage(null)}}else b=function(){bt(s,0)};function it(mt){Rt=mt,Et||(Et=!0,b())}function pt(mt,lt){Mt=bt(function(){mt(o.unstable_now())},lt)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(mt){mt.callback=null},o.unstable_continueExecution=function(){vt||yt||(vt=!0,it(dt))},o.unstable_forceFrameRate=function(mt){0>mt||125<mt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_t=0<mt?Math.floor(1e3/mt):5},o.unstable_getCurrentPriorityLevel=function(){return ft},o.unstable_getFirstCallbackNode=function(){return a(st)},o.unstable_next=function(mt){switch(ft){case 1:case 2:case 3:var lt=3;break;default:lt=ft}var _=ft;ft=lt;try{return mt()}finally{ft=_}},o.unstable_pauseExecution=function(){},o.unstable_requestPaint=function(){},o.unstable_runWithPriority=function(mt,lt){switch(mt){case 1:case 2:case 3:case 4:case 5:break;default:mt=3}var _=ft;ft=mt;try{return lt()}finally{ft=_}},o.unstable_scheduleCallback=function(mt,lt,_){var tt=o.unstable_now();switch(typeof _=="object"&&_!==null?(_=_.delay,_=typeof _=="number"&&0<_?tt+_:tt):_=tt,mt){case 1:var Tt=-1;break;case 2:Tt=250;break;case 5:Tt=1073741823;break;case 4:Tt=1e4;break;default:Tt=5e3}return Tt=_+Tt,mt={id:ot++,callback:lt,priorityLevel:mt,startTime:_,expirationTime:Tt,sortIndex:-1},_>tt?(mt.sortIndex=_,e(ct,mt),a(st)===null&&mt===a(ct)&&(rt?(ht(Mt),Mt=-1):rt=!0,pt(Ct,_-tt))):(mt.sortIndex=Tt,e(st,mt),vt||yt||(vt=!0,it(dt))),mt},o.unstable_shouldYield=nt,o.unstable_wrapCallback=function(mt){var lt=ft;return function(){var _=ft;ft=lt;try{return mt.apply(this,arguments)}finally{ft=_}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p$1(o){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+o,a=1;a<arguments.length;a++)e+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+o+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(o,e){ha(o,e),ha(o+"Capture",e)}function ha(o,e){for(ea[o]=e,o=0;o<e.length;o++)da.add(e[o])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(o){return ja.call(ma,o)?!0:ja.call(la,o)?!1:ka.test(o)?ma[o]=!0:(la[o]=!0,!1)}function pa(o,e,a,c){if(a!==null&&a.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function qa(o,e,a,c){if(e===null||typeof e>"u"||pa(o,e,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function v$1(o,e,a,c,j,d,et){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=c,this.attributeNamespace=j,this.mustUseProperty=a,this.propertyName=o,this.type=e,this.sanitizeURL=d,this.removeEmptyString=et}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){z[o]=new v$1(o,0,!1,o,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var e=o[0];z[e]=new v$1(e,1,!1,o[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(o){z[o]=new v$1(o,2,!1,o.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){z[o]=new v$1(o,2,!1,o,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){z[o]=new v$1(o,3,!1,o.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(o){z[o]=new v$1(o,3,!0,o,null,!1,!1)});["capture","download"].forEach(function(o){z[o]=new v$1(o,4,!1,o,null,!1,!1)});["cols","rows","size","span"].forEach(function(o){z[o]=new v$1(o,6,!1,o,null,!1,!1)});["rowSpan","start"].forEach(function(o){z[o]=new v$1(o,5,!1,o.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var e=o.replace(ra,sa);z[e]=new v$1(e,1,!1,o,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var e=o.replace(ra,sa);z[e]=new v$1(e,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(o){var e=o.replace(ra,sa);z[e]=new v$1(e,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(o){z[o]=new v$1(o,1,!1,o.toLowerCase(),null,!1,!1)});z.xlinkHref=new v$1("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(o){z[o]=new v$1(o,1,!1,o.toLowerCase(),null,!0,!0)});function ta(o,e,a,c){var j=z.hasOwnProperty(e)?z[e]:null;(j!==null?j.type!==0:c||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(qa(e,a,j,c)&&(a=null),c||j===null?oa(e)&&(a===null?o.removeAttribute(e):o.setAttribute(e,""+a)):j.mustUseProperty?o[j.propertyName]=a===null?j.type===3?!1:"":a:(e=j.attributeName,c=j.attributeNamespace,a===null?o.removeAttribute(e):(j=j.type,a=j===3||j===4&&a===!0?"":""+a,c?o.setAttributeNS(c,e,a):o.setAttribute(e,a))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(o){return o===null||typeof o!="object"?null:(o=Ja&&o[Ja]||o["@@iterator"],typeof o=="function"?o:null)}var A=Object.assign,La;function Ma(o){if(La===void 0)try{throw Error()}catch(a){var e=a.stack.trim().match(/\n( *(at )?)/);La=e&&e[1]||""}return`
`+La+o}var Na=!1;function Oa(o,e){if(!o||Na)return"";Na=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(ct){var c=ct}Reflect.construct(o,[],e)}else{try{e.call()}catch(ct){c=ct}o.call(e.prototype)}else{try{throw Error()}catch(ct){c=ct}o()}}catch(ct){if(ct&&c&&typeof ct.stack=="string"){for(var j=ct.stack.split(`
`),d=c.stack.split(`
`),et=j.length-1,at=d.length-1;1<=et&&0<=at&&j[et]!==d[at];)at--;for(;1<=et&&0<=at;et--,at--)if(j[et]!==d[at]){if(et!==1||at!==1)do if(et--,at--,0>at||j[et]!==d[at]){var st=`
`+j[et].replace(" at new "," at ");return o.displayName&&st.includes("<anonymous>")&&(st=st.replace("<anonymous>",o.displayName)),st}while(1<=et&&0<=at);break}}}finally{Na=!1,Error.prepareStackTrace=a}return(o=o?o.displayName||o.name:"")?Ma(o):""}function Pa(o){switch(o.tag){case 5:return Ma(o.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return o=Oa(o.type,!1),o;case 11:return o=Oa(o.type.render,!1),o;case 1:return o=Oa(o.type,!0),o;default:return""}}function Qa(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case Ca:return(o.displayName||"Context")+".Consumer";case Ba:return(o._context.displayName||"Context")+".Provider";case Da:var e=o.render;return o=o.displayName,o||(o=e.displayName||e.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case Ga:return e=o.displayName||null,e!==null?e:Qa(o.type)||"Memo";case Ha:e=o._payload,o=o._init;try{return Qa(o(e))}catch{}}return null}function Ra(o){var e=o.type;switch(o.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=e.render,o=o.displayName||o.name||"",e.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(e);case 8:return e===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Sa(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Ta(o){var e=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ua(o){var e=Ta(o)?"checked":"value",a=Object.getOwnPropertyDescriptor(o.constructor.prototype,e),c=""+o[e];if(!o.hasOwnProperty(e)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var j=a.get,d=a.set;return Object.defineProperty(o,e,{configurable:!0,get:function(){return j.call(this)},set:function(et){c=""+et,d.call(this,et)}}),Object.defineProperty(o,e,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(et){c=""+et},stopTracking:function(){o._valueTracker=null,delete o[e]}}}}function Va(o){o._valueTracker||(o._valueTracker=Ua(o))}function Wa(o){if(!o)return!1;var e=o._valueTracker;if(!e)return!0;var a=e.getValue(),c="";return o&&(c=Ta(o)?o.checked?"true":"false":o.value),o=c,o!==a?(e.setValue(o),!0):!1}function Xa(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function Ya(o,e){var a=e.checked;return A({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??o._wrapperState.initialChecked})}function Za(o,e){var a=e.defaultValue==null?"":e.defaultValue,c=e.checked!=null?e.checked:e.defaultChecked;a=Sa(e.value!=null?e.value:a),o._wrapperState={initialChecked:c,initialValue:a,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ab(o,e){e=e.checked,e!=null&&ta(o,"checked",e,!1)}function bb(o,e){ab(o,e);var a=Sa(e.value),c=e.type;if(a!=null)c==="number"?(a===0&&o.value===""||o.value!=a)&&(o.value=""+a):o.value!==""+a&&(o.value=""+a);else if(c==="submit"||c==="reset"){o.removeAttribute("value");return}e.hasOwnProperty("value")?cb(o,e.type,a):e.hasOwnProperty("defaultValue")&&cb(o,e.type,Sa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(o.defaultChecked=!!e.defaultChecked)}function db(o,e,a){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var c=e.type;if(!(c!=="submit"&&c!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+o._wrapperState.initialValue,a||e===o.value||(o.value=e),o.defaultValue=e}a=o.name,a!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,a!==""&&(o.name=a)}function cb(o,e,a){(e!=="number"||Xa(o.ownerDocument)!==o)&&(a==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+a&&(o.defaultValue=""+a))}var eb=Array.isArray;function fb(o,e,a,c){if(o=o.options,e){e={};for(var j=0;j<a.length;j++)e["$"+a[j]]=!0;for(a=0;a<o.length;a++)j=e.hasOwnProperty("$"+o[a].value),o[a].selected!==j&&(o[a].selected=j),j&&c&&(o[a].defaultSelected=!0)}else{for(a=""+Sa(a),e=null,j=0;j<o.length;j++){if(o[j].value===a){o[j].selected=!0,c&&(o[j].defaultSelected=!0);return}e!==null||o[j].disabled||(e=o[j])}e!==null&&(e.selected=!0)}}function gb(o,e){if(e.dangerouslySetInnerHTML!=null)throw Error(p$1(91));return A({},e,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function hb(o,e){var a=e.value;if(a==null){if(a=e.children,e=e.defaultValue,a!=null){if(e!=null)throw Error(p$1(92));if(eb(a)){if(1<a.length)throw Error(p$1(93));a=a[0]}e=a}e==null&&(e=""),a=e}o._wrapperState={initialValue:Sa(a)}}function ib(o,e){var a=Sa(e.value),c=Sa(e.defaultValue);a!=null&&(a=""+a,a!==o.value&&(o.value=a),e.defaultValue==null&&o.defaultValue!==a&&(o.defaultValue=a)),c!=null&&(o.defaultValue=""+c)}function jb(o){var e=o.textContent;e===o._wrapperState.initialValue&&e!==""&&e!==null&&(o.value=e)}function kb(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(o,e){return o==null||o==="http://www.w3.org/1999/xhtml"?kb(e):o==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var mb,nb=function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,a,c,j){MSApp.execUnsafeLocalFunction(function(){return o(e,a,c,j)})}:o}(function(o,e){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=e;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mb.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;e.firstChild;)o.appendChild(e.firstChild)}});function ob(o,e){if(e){var a=o.firstChild;if(a&&a===o.lastChild&&a.nodeType===3){a.nodeValue=e;return}}o.textContent=e}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(o){qb.forEach(function(e){e=e+o.charAt(0).toUpperCase()+o.substring(1),pb[e]=pb[o]})});function rb(o,e,a){return e==null||typeof e=="boolean"||e===""?"":a||typeof e!="number"||e===0||pb.hasOwnProperty(o)&&pb[o]?(""+e).trim():e+"px"}function sb(o,e){o=o.style;for(var a in e)if(e.hasOwnProperty(a)){var c=a.indexOf("--")===0,j=rb(a,e[a],c);a==="float"&&(a="cssFloat"),c?o.setProperty(a,j):o[a]=j}}var tb=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(o,e){if(e){if(tb[o]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(p$1(137,o));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(p$1(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(p$1(61))}if(e.style!=null&&typeof e.style!="object")throw Error(p$1(62))}}function vb(o,e){if(o.indexOf("-")===-1)return typeof e.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var yb=null,zb=null,Ab=null;function Bb(o){if(o=Cb(o)){if(typeof yb!="function")throw Error(p$1(280));var e=o.stateNode;e&&(e=Db(e),yb(o.stateNode,o.type,e))}}function Eb(o){zb?Ab?Ab.push(o):Ab=[o]:zb=o}function Fb(){if(zb){var o=zb,e=Ab;if(Ab=zb=null,Bb(o),e)for(o=0;o<e.length;o++)Bb(e[o])}}function Gb(o,e){return o(e)}function Hb(){}var Ib=!1;function Jb(o,e,a){if(Ib)return o(e,a);Ib=!0;try{return Gb(o,e,a)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(o,e){var a=o.stateNode;if(a===null)return null;var c=Db(a);if(c===null)return null;a=c[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(o=o.type,c=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!c;break e;default:o=!1}if(o)return null;if(a&&typeof a!="function")throw Error(p$1(231,e,typeof a));return a}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(o,e,a,c,j,d,et,at,st){var ct=Array.prototype.slice.call(arguments,3);try{e.apply(a,ct)}catch(ot){this.onError(ot)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(o){Ob=!0,Pb=o}};function Tb(o,e,a,c,j,d,et,at,st){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(o,e,a,c,j,d,et,at,st){if(Tb.apply(this,arguments),Ob){if(Ob){var ct=Pb;Ob=!1,Pb=null}else throw Error(p$1(198));Qb||(Qb=!0,Rb=ct)}}function Vb(o){var e=o,a=o;if(o.alternate)for(;e.return;)e=e.return;else{o=e;do e=o,e.flags&4098&&(a=e.return),o=e.return;while(o)}return e.tag===3?a:null}function Wb(o){if(o.tag===13){var e=o.memoizedState;if(e===null&&(o=o.alternate,o!==null&&(e=o.memoizedState)),e!==null)return e.dehydrated}return null}function Xb(o){if(Vb(o)!==o)throw Error(p$1(188))}function Yb(o){var e=o.alternate;if(!e){if(e=Vb(o),e===null)throw Error(p$1(188));return e!==o?null:o}for(var a=o,c=e;;){var j=a.return;if(j===null)break;var d=j.alternate;if(d===null){if(c=j.return,c!==null){a=c;continue}break}if(j.child===d.child){for(d=j.child;d;){if(d===a)return Xb(j),o;if(d===c)return Xb(j),e;d=d.sibling}throw Error(p$1(188))}if(a.return!==c.return)a=j,c=d;else{for(var et=!1,at=j.child;at;){if(at===a){et=!0,a=j,c=d;break}if(at===c){et=!0,c=j,a=d;break}at=at.sibling}if(!et){for(at=d.child;at;){if(at===a){et=!0,a=d,c=j;break}if(at===c){et=!0,c=d,a=j;break}at=at.sibling}if(!et)throw Error(p$1(189))}}if(a.alternate!==c)throw Error(p$1(190))}if(a.tag!==3)throw Error(p$1(188));return a.stateNode.current===a?o:e}function Zb(o){return o=Yb(o),o!==null?$b(o):null}function $b(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var e=$b(o);if(e!==null)return e;o=o.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec$1=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(o){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,o,void 0,(o.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(o){return o>>>=0,o===0?32:31-(pc(o)/qc|0)|0}var rc=64,sc=4194304;function tc(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function uc(o,e){var a=o.pendingLanes;if(a===0)return 0;var c=0,j=o.suspendedLanes,d=o.pingedLanes,et=a&268435455;if(et!==0){var at=et&~j;at!==0?c=tc(at):(d&=et,d!==0&&(c=tc(d)))}else et=a&~j,et!==0?c=tc(et):d!==0&&(c=tc(d));if(c===0)return 0;if(e!==0&&e!==c&&!(e&j)&&(j=c&-c,d=e&-e,j>=d||j===16&&(d&4194240)!==0))return e;if(c&4&&(c|=a&16),e=o.entangledLanes,e!==0)for(o=o.entanglements,e&=c;0<e;)a=31-oc(e),j=1<<a,c|=o[a],e&=~j;return c}function vc(o,e){switch(o){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(o,e){for(var a=o.suspendedLanes,c=o.pingedLanes,j=o.expirationTimes,d=o.pendingLanes;0<d;){var et=31-oc(d),at=1<<et,st=j[et];st===-1?(!(at&a)||at&c)&&(j[et]=vc(at,e)):st<=e&&(o.expiredLanes|=at),d&=~at}}function xc(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function yc(){var o=rc;return rc<<=1,!(rc&4194240)&&(rc=64),o}function zc(o){for(var e=[],a=0;31>a;a++)e.push(o);return e}function Ac(o,e,a){o.pendingLanes|=e,e!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,e=31-oc(e),o[e]=a}function Bc(o,e){var a=o.pendingLanes&~e;o.pendingLanes=e,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=e,o.mutableReadLanes&=e,o.entangledLanes&=e,e=o.entanglements;var c=o.eventTimes;for(o=o.expirationTimes;0<a;){var j=31-oc(a),d=1<<j;e[j]=0,c[j]=-1,o[j]=-1,a&=~d}}function Cc(o,e){var a=o.entangledLanes|=e;for(o=o.entanglements;a;){var c=31-oc(a),j=1<<c;j&e|o[c]&e&&(o[c]|=e),a&=~j}}var C=0;function Dc(o){return o&=-o,1<o?4<o?o&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(o,e){switch(o){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(e.pointerId)}}function Tc(o,e,a,c,j,d){return o===null||o.nativeEvent!==d?(o={blockedOn:e,domEventName:a,eventSystemFlags:c,nativeEvent:d,targetContainers:[j]},e!==null&&(e=Cb(e),e!==null&&Fc(e)),o):(o.eventSystemFlags|=c,e=o.targetContainers,j!==null&&e.indexOf(j)===-1&&e.push(j),o)}function Uc(o,e,a,c,j){switch(e){case"focusin":return Lc=Tc(Lc,o,e,a,c,j),!0;case"dragenter":return Mc=Tc(Mc,o,e,a,c,j),!0;case"mouseover":return Nc=Tc(Nc,o,e,a,c,j),!0;case"pointerover":var d=j.pointerId;return Oc.set(d,Tc(Oc.get(d)||null,o,e,a,c,j)),!0;case"gotpointercapture":return d=j.pointerId,Pc.set(d,Tc(Pc.get(d)||null,o,e,a,c,j)),!0}return!1}function Vc(o){var e=Wc(o.target);if(e!==null){var a=Vb(e);if(a!==null){if(e=a.tag,e===13){if(e=Wb(a),e!==null){o.blockedOn=e,Ic(o.priority,function(){Gc(a)});return}}else if(e===3&&a.stateNode.current.memoizedState.isDehydrated){o.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Xc(o){if(o.blockedOn!==null)return!1;for(var e=o.targetContainers;0<e.length;){var a=Yc(o.domEventName,o.eventSystemFlags,e[0],o.nativeEvent);if(a===null){a=o.nativeEvent;var c=new a.constructor(a.type,a);wb=c,a.target.dispatchEvent(c),wb=null}else return e=Cb(a),e!==null&&Fc(e),o.blockedOn=a,!1;e.shift()}return!0}function Zc(o,e,a){Xc(o)&&a.delete(e)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(o,e){o.blockedOn===e&&(o.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(o){function e(j){return ad(j,o)}if(0<Kc.length){ad(Kc[0],o);for(var a=1;a<Kc.length;a++){var c=Kc[a];c.blockedOn===o&&(c.blockedOn=null)}}for(Lc!==null&&ad(Lc,o),Mc!==null&&ad(Mc,o),Nc!==null&&ad(Nc,o),Oc.forEach(e),Pc.forEach(e),a=0;a<Qc.length;a++)c=Qc[a],c.blockedOn===o&&(c.blockedOn=null);for(;0<Qc.length&&(a=Qc[0],a.blockedOn===null);)Vc(a),a.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(o,e,a,c){var j=C,d=cd.transition;cd.transition=null;try{C=1,fd(o,e,a,c)}finally{C=j,cd.transition=d}}function gd(o,e,a,c){var j=C,d=cd.transition;cd.transition=null;try{C=4,fd(o,e,a,c)}finally{C=j,cd.transition=d}}function fd(o,e,a,c){if(dd){var j=Yc(o,e,a,c);if(j===null)hd(o,e,c,id,a),Sc(o,c);else if(Uc(j,o,e,a,c))c.stopPropagation();else if(Sc(o,c),e&4&&-1<Rc.indexOf(o)){for(;j!==null;){var d=Cb(j);if(d!==null&&Ec(d),d=Yc(o,e,a,c),d===null&&hd(o,e,c,id,a),d===j)break;j=d}j!==null&&c.stopPropagation()}else hd(o,e,c,null,a)}}var id=null;function Yc(o,e,a,c){if(id=null,o=xb(c),o=Wc(o),o!==null)if(e=Vb(o),e===null)o=null;else if(a=e.tag,a===13){if(o=Wb(e),o!==null)return o;o=null}else if(a===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;o=null}else e!==o&&(o=null);return id=o,null}function jd(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec$1()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var o,e=ld,a=e.length,c,j="value"in kd?kd.value:kd.textContent,d=j.length;for(o=0;o<a&&e[o]===j[o];o++);var et=a-o;for(c=1;c<=et&&e[a-c]===j[d-c];c++);return md=j.slice(o,1<c?1-c:void 0)}function od(o){var e=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&e===13&&(o=13)):o=e,o===10&&(o=13),32<=o||o===13?o:0}function pd(){return!0}function qd(){return!1}function rd(o){function e(a,c,j,d,et){this._reactName=a,this._targetInst=j,this.type=c,this.nativeEvent=d,this.target=et,this.currentTarget=null;for(var at in o)o.hasOwnProperty(at)&&(a=o[at],this[at]=a?a(d):d[at]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),e}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==yd&&(yd&&o.type==="mousemove"?(wd=o.screenX-yd.screenX,xd=o.screenY-yd.screenY):xd=wd=0,yd=o),wd)},movementY:function(o){return"movementY"in o?o.movementY:xd}}),Bd=rd(Ad),Cd=A({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A({},sd,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(o){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(o):(o=Od[o])?!!e[o]:!1}function zd(){return Pd}var Qd=A({},ud,{key:function(o){if(o.key){var e=Md[o.key]||o.key;if(e!=="Unidentified")return e}return o.type==="keypress"?(o=od(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Nd[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(o){return o.type==="keypress"?od(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?od(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Rd=rd(Qd),Sd=A({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A({},Ad,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=" ",fe=!1;function ge(o,e){switch(o){case"keyup":return $d.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var ie=!1;function je(o,e){switch(o){case"compositionend":return he(e);case"keypress":return e.which!==32?null:(fe=!0,ee);case"textInput":return o=e.data,o===ee&&fe?null:o;default:return null}}function ke(o,e){if(ie)return o==="compositionend"||!ae&&ge(o,e)?(o=nd(),md=ld=kd=null,ie=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return de&&e.locale!=="ko"?null:e.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(o){var e=o&&o.nodeName&&o.nodeName.toLowerCase();return e==="input"?!!le[o.type]:e==="textarea"}function ne(o,e,a,c){Eb(c),e=oe(e,"onChange"),0<e.length&&(a=new td("onChange","change",null,a,c),o.push({event:a,listeners:e}))}var pe=null,qe=null;function re(o){se(o,0)}function te(o){var e=ue(o);if(Wa(e))return o}function ve(o,e){if(o==="change")return e}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(o){if(o.propertyName==="value"&&te(qe)){var e=[];ne(e,qe,o,xb(o)),Jb(re,e)}}function Ce(o,e,a){o==="focusin"?(Ae(),pe=e,qe=a,pe.attachEvent("onpropertychange",Be)):o==="focusout"&&Ae()}function De(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return te(qe)}function Ee(o,e){if(o==="click")return te(e)}function Fe(o,e){if(o==="input"||o==="change")return te(e)}function Ge(o,e){return o===e&&(o!==0||1/o===1/e)||o!==o&&e!==e}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(o,e){if(He(o,e))return!0;if(typeof o!="object"||o===null||typeof e!="object"||e===null)return!1;var a=Object.keys(o),c=Object.keys(e);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var j=a[c];if(!ja.call(e,j)||!He(o[j],e[j]))return!1}return!0}function Je(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Ke(o,e){var a=Je(o);o=0;for(var c;a;){if(a.nodeType===3){if(c=o+a.textContent.length,o<=e&&c>=e)return{node:a,offset:e-o};o=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Je(a)}}function Le(o,e){return o&&e?o===e?!0:o&&o.nodeType===3?!1:e&&e.nodeType===3?Le(o,e.parentNode):"contains"in o?o.contains(e):o.compareDocumentPosition?!!(o.compareDocumentPosition(e)&16):!1:!1}function Me(){for(var o=window,e=Xa();e instanceof o.HTMLIFrameElement;){try{var a=typeof e.contentWindow.location.href=="string"}catch{a=!1}if(a)o=e.contentWindow;else break;e=Xa(o.document)}return e}function Ne(o){var e=o&&o.nodeName&&o.nodeName.toLowerCase();return e&&(e==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||e==="textarea"||o.contentEditable==="true")}function Oe(o){var e=Me(),a=o.focusedElem,c=o.selectionRange;if(e!==a&&a&&a.ownerDocument&&Le(a.ownerDocument.documentElement,a)){if(c!==null&&Ne(a)){if(e=c.start,o=c.end,o===void 0&&(o=e),"selectionStart"in a)a.selectionStart=e,a.selectionEnd=Math.min(o,a.value.length);else if(o=(e=a.ownerDocument||document)&&e.defaultView||window,o.getSelection){o=o.getSelection();var j=a.textContent.length,d=Math.min(c.start,j);c=c.end===void 0?d:Math.min(c.end,j),!o.extend&&d>c&&(j=c,c=d,d=j),j=Ke(a,d);var et=Ke(a,c);j&&et&&(o.rangeCount!==1||o.anchorNode!==j.node||o.anchorOffset!==j.offset||o.focusNode!==et.node||o.focusOffset!==et.offset)&&(e=e.createRange(),e.setStart(j.node,j.offset),o.removeAllRanges(),d>c?(o.addRange(e),o.extend(et.node,et.offset)):(e.setEnd(et.node,et.offset),o.addRange(e)))}}for(e=[],o=a;o=o.parentNode;)o.nodeType===1&&e.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<e.length;a++)o=e[a],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(o,e,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Te||Qe==null||Qe!==Xa(c)||(c=Qe,"selectionStart"in c&&Ne(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Se&&Ie(Se,c)||(Se=c,c=oe(Re,"onSelect"),0<c.length&&(e=new td("onSelect","select",null,e,a),o.push({event:e,listeners:c}),e.target=Qe)))}function Ve(o,e){var a={};return a[o.toLowerCase()]=e.toLowerCase(),a["Webkit"+o]="webkit"+e,a["Moz"+o]="moz"+e,a}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(o){if(Xe[o])return Xe[o];if(!We[o])return o;var e=We[o],a;for(a in e)if(e.hasOwnProperty(a)&&a in Ye)return Xe[o]=e[a];return o}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(o,e){df.set(o,e),fa(e,[o])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(o,e,a){var c=o.type||"unknown-event";o.currentTarget=a,Ub(c,e,void 0,o),o.currentTarget=null}function se(o,e){e=(e&4)!==0;for(var a=0;a<o.length;a++){var c=o[a],j=c.event;c=c.listeners;e:{var d=void 0;if(e)for(var et=c.length-1;0<=et;et--){var at=c[et],st=at.instance,ct=at.currentTarget;if(at=at.listener,st!==d&&j.isPropagationStopped())break e;nf(j,at,ct),d=st}else for(et=0;et<c.length;et++){if(at=c[et],st=at.instance,ct=at.currentTarget,at=at.listener,st!==d&&j.isPropagationStopped())break e;nf(j,at,ct),d=st}}}if(Qb)throw o=Rb,Qb=!1,Rb=null,o}function D(o,e){var a=e[of];a===void 0&&(a=e[of]=new Set);var c=o+"__bubble";a.has(c)||(pf(e,o,2,!1),a.add(c))}function qf(o,e,a){var c=0;e&&(c|=4),pf(a,o,c,e)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(o){if(!o[rf]){o[rf]=!0,da.forEach(function(a){a!=="selectionchange"&&(mf.has(a)||qf(a,!1,o),qf(a,!0,o))});var e=o.nodeType===9?o:o.ownerDocument;e===null||e[rf]||(e[rf]=!0,qf("selectionchange",!1,e))}}function pf(o,e,a,c){switch(jd(e)){case 1:var j=ed;break;case 4:j=gd;break;default:j=fd}a=j.bind(null,e,a,o),j=void 0,!Lb||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(j=!0),c?j!==void 0?o.addEventListener(e,a,{capture:!0,passive:j}):o.addEventListener(e,a,!0):j!==void 0?o.addEventListener(e,a,{passive:j}):o.addEventListener(e,a,!1)}function hd(o,e,a,c,j){var d=c;if(!(e&1)&&!(e&2)&&c!==null)e:for(;;){if(c===null)return;var et=c.tag;if(et===3||et===4){var at=c.stateNode.containerInfo;if(at===j||at.nodeType===8&&at.parentNode===j)break;if(et===4)for(et=c.return;et!==null;){var st=et.tag;if((st===3||st===4)&&(st=et.stateNode.containerInfo,st===j||st.nodeType===8&&st.parentNode===j))return;et=et.return}for(;at!==null;){if(et=Wc(at),et===null)return;if(st=et.tag,st===5||st===6){c=d=et;continue e}at=at.parentNode}}c=c.return}Jb(function(){var ct=d,ot=xb(a),gt=[];e:{var ft=df.get(o);if(ft!==void 0){var yt=td,vt=o;switch(o){case"keypress":if(od(a)===0)break e;case"keydown":case"keyup":yt=Rd;break;case"focusin":vt="focus",yt=Fd;break;case"focusout":vt="blur",yt=Fd;break;case"beforeblur":case"afterblur":yt=Fd;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":yt=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":yt=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":yt=Vd;break;case $e:case af:case bf:yt=Hd;break;case cf:yt=Xd;break;case"scroll":yt=vd;break;case"wheel":yt=Zd;break;case"copy":case"cut":case"paste":yt=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":yt=Td}var rt=(e&4)!==0,bt=!rt&&o==="scroll",ht=rt?ft!==null?ft+"Capture":null:ft;rt=[];for(var wt=ct,At;wt!==null;){At=wt;var Ct=At.stateNode;if(At.tag===5&&Ct!==null&&(At=Ct,ht!==null&&(Ct=Kb(wt,ht),Ct!=null&&rt.push(tf(wt,Ct,At)))),bt)break;wt=wt.return}0<rt.length&&(ft=new yt(ft,vt,null,a,ot),gt.push({event:ft,listeners:rt}))}}if(!(e&7)){e:{if(ft=o==="mouseover"||o==="pointerover",yt=o==="mouseout"||o==="pointerout",ft&&a!==wb&&(vt=a.relatedTarget||a.fromElement)&&(Wc(vt)||vt[uf]))break e;if((yt||ft)&&(ft=ot.window===ot?ot:(ft=ot.ownerDocument)?ft.defaultView||ft.parentWindow:window,yt?(vt=a.relatedTarget||a.toElement,yt=ct,vt=vt?Wc(vt):null,vt!==null&&(bt=Vb(vt),vt!==bt||vt.tag!==5&&vt.tag!==6)&&(vt=null)):(yt=null,vt=ct),yt!==vt)){if(rt=Bd,Ct="onMouseLeave",ht="onMouseEnter",wt="mouse",(o==="pointerout"||o==="pointerover")&&(rt=Td,Ct="onPointerLeave",ht="onPointerEnter",wt="pointer"),bt=yt==null?ft:ue(yt),At=vt==null?ft:ue(vt),ft=new rt(Ct,wt+"leave",yt,a,ot),ft.target=bt,ft.relatedTarget=At,Ct=null,Wc(ot)===ct&&(rt=new rt(ht,wt+"enter",vt,a,ot),rt.target=At,rt.relatedTarget=bt,Ct=rt),bt=Ct,yt&&vt)t:{for(rt=yt,ht=vt,wt=0,At=rt;At;At=vf(At))wt++;for(At=0,Ct=ht;Ct;Ct=vf(Ct))At++;for(;0<wt-At;)rt=vf(rt),wt--;for(;0<At-wt;)ht=vf(ht),At--;for(;wt--;){if(rt===ht||ht!==null&&rt===ht.alternate)break t;rt=vf(rt),ht=vf(ht)}rt=null}else rt=null;yt!==null&&wf(gt,ft,yt,rt,!1),vt!==null&&bt!==null&&wf(gt,bt,vt,rt,!0)}}e:{if(ft=ct?ue(ct):window,yt=ft.nodeName&&ft.nodeName.toLowerCase(),yt==="select"||yt==="input"&&ft.type==="file")var dt=ve;else if(me(ft))if(we)dt=Fe;else{dt=De;var Et=Ce}else(yt=ft.nodeName)&&yt.toLowerCase()==="input"&&(ft.type==="checkbox"||ft.type==="radio")&&(dt=Ee);if(dt&&(dt=dt(o,ct))){ne(gt,dt,a,ot);break e}Et&&Et(o,ft,ct),o==="focusout"&&(Et=ft._wrapperState)&&Et.controlled&&ft.type==="number"&&cb(ft,"number",ft.value)}switch(Et=ct?ue(ct):window,o){case"focusin":(me(Et)||Et.contentEditable==="true")&&(Qe=Et,Re=ct,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(gt,a,ot);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(gt,a,ot)}var Rt;if(ae)e:{switch(o){case"compositionstart":var Mt="onCompositionStart";break e;case"compositionend":Mt="onCompositionEnd";break e;case"compositionupdate":Mt="onCompositionUpdate";break e}Mt=void 0}else ie?ge(o,a)&&(Mt="onCompositionEnd"):o==="keydown"&&a.keyCode===229&&(Mt="onCompositionStart");Mt&&(de&&a.locale!=="ko"&&(ie||Mt!=="onCompositionStart"?Mt==="onCompositionEnd"&&ie&&(Rt=nd()):(kd=ot,ld="value"in kd?kd.value:kd.textContent,ie=!0)),Et=oe(ct,Mt),0<Et.length&&(Mt=new Ld(Mt,o,null,a,ot),gt.push({event:Mt,listeners:Et}),Rt?Mt.data=Rt:(Rt=he(a),Rt!==null&&(Mt.data=Rt)))),(Rt=ce?je(o,a):ke(o,a))&&(ct=oe(ct,"onBeforeInput"),0<ct.length&&(ot=new Ld("onBeforeInput","beforeinput",null,a,ot),gt.push({event:ot,listeners:ct}),ot.data=Rt))}se(gt,e)})}function tf(o,e,a){return{instance:o,listener:e,currentTarget:a}}function oe(o,e){for(var a=e+"Capture",c=[];o!==null;){var j=o,d=j.stateNode;j.tag===5&&d!==null&&(j=d,d=Kb(o,a),d!=null&&c.unshift(tf(o,d,j)),d=Kb(o,e),d!=null&&c.push(tf(o,d,j))),o=o.return}return c}function vf(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function wf(o,e,a,c,j){for(var d=e._reactName,et=[];a!==null&&a!==c;){var at=a,st=at.alternate,ct=at.stateNode;if(st!==null&&st===c)break;at.tag===5&&ct!==null&&(at=ct,j?(st=Kb(a,d),st!=null&&et.unshift(tf(a,st,at))):j||(st=Kb(a,d),st!=null&&et.push(tf(a,st,at)))),a=a.return}et.length!==0&&o.push({event:e,listeners:et})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(o){return(typeof o=="string"?o:""+o).replace(xf,`
`).replace(yf,"")}function Af(o,e,a){if(e=zf(e),zf(o)!==e&&a)throw Error(p$1(425))}function Bf(){}var Cf=null,Df=null;function Ef(o,e){return o==="textarea"||o==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(o){return Hf.resolve(null).then(o).catch(If)}:Ff;function If(o){setTimeout(function(){throw o})}function Kf(o,e){var a=e,c=0;do{var j=a.nextSibling;if(o.removeChild(a),j&&j.nodeType===8)if(a=j.data,a==="/$"){if(c===0){o.removeChild(j),bd(e);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=j}while(a);bd(e)}function Lf(o){for(;o!=null;o=o.nextSibling){var e=o.nodeType;if(e===1||e===3)break;if(e===8){if(e=o.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return o}function Mf(o){o=o.previousSibling;for(var e=0;o;){if(o.nodeType===8){var a=o.data;if(a==="$"||a==="$!"||a==="$?"){if(e===0)return o;e--}else a==="/$"&&e++}o=o.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(o){var e=o[Of];if(e)return e;for(var a=o.parentNode;a;){if(e=a[uf]||a[Of]){if(a=e.alternate,e.child!==null||a!==null&&a.child!==null)for(o=Mf(o);o!==null;){if(a=o[Of])return a;o=Mf(o)}return e}o=a,a=o.parentNode}return null}function Cb(o){return o=o[Of]||o[uf],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function ue(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(p$1(33))}function Db(o){return o[Pf]||null}var Sf=[],Tf=-1;function Uf(o){return{current:o}}function E(o){0>Tf||(o.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(o,e){Tf++,Sf[Tf]=o.current,o.current=e}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(o,e){var a=o.type.contextTypes;if(!a)return Vf;var c=o.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===e)return c.__reactInternalMemoizedMaskedChildContext;var j={},d;for(d in a)j[d]=e[d];return c&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=e,o.__reactInternalMemoizedMaskedChildContext=j),j}function Zf(o){return o=o.childContextTypes,o!=null}function $f(){E(Wf),E(H)}function ag(o,e,a){if(H.current!==Vf)throw Error(p$1(168));G(H,e),G(Wf,a)}function bg(o,e,a){var c=o.stateNode;if(e=e.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var j in c)if(!(j in e))throw Error(p$1(108,Ra(o)||"Unknown",j));return A({},a,c)}function cg(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||Vf,Xf=H.current,G(H,o),G(Wf,Wf.current),!0}function dg(o,e,a){var c=o.stateNode;if(!c)throw Error(p$1(169));a?(o=bg(o,e,Xf),c.__reactInternalMemoizedMergedChildContext=o,E(Wf),E(H),G(H,o)):E(Wf),G(Wf,a)}var eg=null,fg=!1,gg=!1;function hg(o){eg===null?eg=[o]:eg.push(o)}function ig(o){fg=!0,hg(o)}function jg(){if(!gg&&eg!==null){gg=!0;var o=0,e=C;try{var a=eg;for(C=1;o<a.length;o++){var c=a[o];do c=c(!0);while(c!==null)}eg=null,fg=!1}catch(j){throw eg!==null&&(eg=eg.slice(o+1)),ac(fc,jg),j}finally{C=e,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(o,e){kg[lg++]=ng,kg[lg++]=mg,mg=o,ng=e}function ug(o,e,a){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=o;var c=rg;o=sg;var j=32-oc(c)-1;c&=~(1<<j),a+=1;var d=32-oc(e)+j;if(30<d){var et=j-j%5;d=(c&(1<<et)-1).toString(32),c>>=et,j-=et,rg=1<<32-oc(e)+j|a<<j|c,sg=d+o}else rg=1<<d|a<<j|c,sg=o}function vg(o){o.return!==null&&(tg(o,1),ug(o,1,0))}function wg(o){for(;o===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;o===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;function Ag(o,e){var a=Bg(5,null,null,0);a.elementType="DELETED",a.stateNode=e,a.return=o,e=o.deletions,e===null?(o.deletions=[a],o.flags|=16):e.push(a)}function Cg(o,e){switch(o.tag){case 5:var a=o.type;return e=e.nodeType!==1||a.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(o.stateNode=e,xg=o,yg=Lf(e.firstChild),!0):!1;case 6:return e=o.pendingProps===""||e.nodeType!==3?null:e,e!==null?(o.stateNode=e,xg=o,yg=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(a=qg!==null?{id:rg,overflow:sg}:null,o.memoizedState={dehydrated:e,treeContext:a,retryLane:1073741824},a=Bg(18,null,null,0),a.stateNode=e,a.return=o,o.child=a,xg=o,yg=null,!0):!1;default:return!1}}function Dg(o){return(o.mode&1)!==0&&(o.flags&128)===0}function Eg(o){if(I){var e=yg;if(e){var a=e;if(!Cg(o,e)){if(Dg(o))throw Error(p$1(418));e=Lf(a.nextSibling);var c=xg;e&&Cg(o,e)?Ag(c,a):(o.flags=o.flags&-4097|2,I=!1,xg=o)}}else{if(Dg(o))throw Error(p$1(418));o.flags=o.flags&-4097|2,I=!1,xg=o}}}function Fg(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;xg=o}function Gg(o){if(o!==xg)return!1;if(!I)return Fg(o),I=!0,!1;var e;if((e=o.tag!==3)&&!(e=o.tag!==5)&&(e=o.type,e=e!=="head"&&e!=="body"&&!Ef(o.type,o.memoizedProps)),e&&(e=yg)){if(Dg(o))throw Hg(),Error(p$1(418));for(;e;)Ag(o,e),e=Lf(e.nextSibling)}if(Fg(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(p$1(317));e:{for(o=o.nextSibling,e=0;o;){if(o.nodeType===8){var a=o.data;if(a==="/$"){if(e===0){yg=Lf(o.nextSibling);break e}e--}else a!=="$"&&a!=="$!"&&a!=="$?"||e++}o=o.nextSibling}yg=null}}else yg=xg?Lf(o.stateNode.nextSibling):null;return!0}function Hg(){for(var o=yg;o;)o=Lf(o.nextSibling)}function Ig(){yg=xg=null,I=!1}function Jg(o){zg===null?zg=[o]:zg.push(o)}var Kg=ua.ReactCurrentBatchConfig;function Lg(o,e,a){if(o=a.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(p$1(309));var c=a.stateNode}if(!c)throw Error(p$1(147,o));var j=c,d=""+o;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===d?e.ref:(e=function(et){var at=j.refs;et===null?delete at[d]:at[d]=et},e._stringRef=d,e)}if(typeof o!="string")throw Error(p$1(284));if(!a._owner)throw Error(p$1(290,o))}return o}function Mg(o,e){throw o=Object.prototype.toString.call(e),Error(p$1(31,o==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":o))}function Ng(o){var e=o._init;return e(o._payload)}function Og(o){function e(ht,wt){if(o){var At=ht.deletions;At===null?(ht.deletions=[wt],ht.flags|=16):At.push(wt)}}function a(ht,wt){if(!o)return null;for(;wt!==null;)e(ht,wt),wt=wt.sibling;return null}function c(ht,wt){for(ht=new Map;wt!==null;)wt.key!==null?ht.set(wt.key,wt):ht.set(wt.index,wt),wt=wt.sibling;return ht}function j(ht,wt){return ht=Pg(ht,wt),ht.index=0,ht.sibling=null,ht}function d(ht,wt,At){return ht.index=At,o?(At=ht.alternate,At!==null?(At=At.index,At<wt?(ht.flags|=2,wt):At):(ht.flags|=2,wt)):(ht.flags|=1048576,wt)}function et(ht){return o&&ht.alternate===null&&(ht.flags|=2),ht}function at(ht,wt,At,Ct){return wt===null||wt.tag!==6?(wt=Qg(At,ht.mode,Ct),wt.return=ht,wt):(wt=j(wt,At),wt.return=ht,wt)}function st(ht,wt,At,Ct){var dt=At.type;return dt===ya?ot(ht,wt,At.props.children,Ct,At.key):wt!==null&&(wt.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===Ha&&Ng(dt)===wt.type)?(Ct=j(wt,At.props),Ct.ref=Lg(ht,wt,At),Ct.return=ht,Ct):(Ct=Rg(At.type,At.key,At.props,null,ht.mode,Ct),Ct.ref=Lg(ht,wt,At),Ct.return=ht,Ct)}function ct(ht,wt,At,Ct){return wt===null||wt.tag!==4||wt.stateNode.containerInfo!==At.containerInfo||wt.stateNode.implementation!==At.implementation?(wt=Sg(At,ht.mode,Ct),wt.return=ht,wt):(wt=j(wt,At.children||[]),wt.return=ht,wt)}function ot(ht,wt,At,Ct,dt){return wt===null||wt.tag!==7?(wt=Tg(At,ht.mode,Ct,dt),wt.return=ht,wt):(wt=j(wt,At),wt.return=ht,wt)}function gt(ht,wt,At){if(typeof wt=="string"&&wt!==""||typeof wt=="number")return wt=Qg(""+wt,ht.mode,At),wt.return=ht,wt;if(typeof wt=="object"&&wt!==null){switch(wt.$$typeof){case va:return At=Rg(wt.type,wt.key,wt.props,null,ht.mode,At),At.ref=Lg(ht,null,wt),At.return=ht,At;case wa:return wt=Sg(wt,ht.mode,At),wt.return=ht,wt;case Ha:var Ct=wt._init;return gt(ht,Ct(wt._payload),At)}if(eb(wt)||Ka(wt))return wt=Tg(wt,ht.mode,At,null),wt.return=ht,wt;Mg(ht,wt)}return null}function ft(ht,wt,At,Ct){var dt=wt!==null?wt.key:null;if(typeof At=="string"&&At!==""||typeof At=="number")return dt!==null?null:at(ht,wt,""+At,Ct);if(typeof At=="object"&&At!==null){switch(At.$$typeof){case va:return At.key===dt?st(ht,wt,At,Ct):null;case wa:return At.key===dt?ct(ht,wt,At,Ct):null;case Ha:return dt=At._init,ft(ht,wt,dt(At._payload),Ct)}if(eb(At)||Ka(At))return dt!==null?null:ot(ht,wt,At,Ct,null);Mg(ht,At)}return null}function yt(ht,wt,At,Ct,dt){if(typeof Ct=="string"&&Ct!==""||typeof Ct=="number")return ht=ht.get(At)||null,at(wt,ht,""+Ct,dt);if(typeof Ct=="object"&&Ct!==null){switch(Ct.$$typeof){case va:return ht=ht.get(Ct.key===null?At:Ct.key)||null,st(wt,ht,Ct,dt);case wa:return ht=ht.get(Ct.key===null?At:Ct.key)||null,ct(wt,ht,Ct,dt);case Ha:var Et=Ct._init;return yt(ht,wt,At,Et(Ct._payload),dt)}if(eb(Ct)||Ka(Ct))return ht=ht.get(At)||null,ot(wt,ht,Ct,dt,null);Mg(wt,Ct)}return null}function vt(ht,wt,At,Ct){for(var dt=null,Et=null,Rt=wt,Mt=wt=0,_t=null;Rt!==null&&Mt<At.length;Mt++){Rt.index>Mt?(_t=Rt,Rt=null):_t=Rt.sibling;var kt=ft(ht,Rt,At[Mt],Ct);if(kt===null){Rt===null&&(Rt=_t);break}o&&Rt&&kt.alternate===null&&e(ht,Rt),wt=d(kt,wt,Mt),Et===null?dt=kt:Et.sibling=kt,Et=kt,Rt=_t}if(Mt===At.length)return a(ht,Rt),I&&tg(ht,Mt),dt;if(Rt===null){for(;Mt<At.length;Mt++)Rt=gt(ht,At[Mt],Ct),Rt!==null&&(wt=d(Rt,wt,Mt),Et===null?dt=Rt:Et.sibling=Rt,Et=Rt);return I&&tg(ht,Mt),dt}for(Rt=c(ht,Rt);Mt<At.length;Mt++)_t=yt(Rt,ht,Mt,At[Mt],Ct),_t!==null&&(o&&_t.alternate!==null&&Rt.delete(_t.key===null?Mt:_t.key),wt=d(_t,wt,Mt),Et===null?dt=_t:Et.sibling=_t,Et=_t);return o&&Rt.forEach(function(nt){return e(ht,nt)}),I&&tg(ht,Mt),dt}function rt(ht,wt,At,Ct){var dt=Ka(At);if(typeof dt!="function")throw Error(p$1(150));if(At=dt.call(At),At==null)throw Error(p$1(151));for(var Et=dt=null,Rt=wt,Mt=wt=0,_t=null,kt=At.next();Rt!==null&&!kt.done;Mt++,kt=At.next()){Rt.index>Mt?(_t=Rt,Rt=null):_t=Rt.sibling;var nt=ft(ht,Rt,kt.value,Ct);if(nt===null){Rt===null&&(Rt=_t);break}o&&Rt&&nt.alternate===null&&e(ht,Rt),wt=d(nt,wt,Mt),Et===null?dt=nt:Et.sibling=nt,Et=nt,Rt=_t}if(kt.done)return a(ht,Rt),I&&tg(ht,Mt),dt;if(Rt===null){for(;!kt.done;Mt++,kt=At.next())kt=gt(ht,kt.value,Ct),kt!==null&&(wt=d(kt,wt,Mt),Et===null?dt=kt:Et.sibling=kt,Et=kt);return I&&tg(ht,Mt),dt}for(Rt=c(ht,Rt);!kt.done;Mt++,kt=At.next())kt=yt(Rt,ht,Mt,kt.value,Ct),kt!==null&&(o&&kt.alternate!==null&&Rt.delete(kt.key===null?Mt:kt.key),wt=d(kt,wt,Mt),Et===null?dt=kt:Et.sibling=kt,Et=kt);return o&&Rt.forEach(function(s){return e(ht,s)}),I&&tg(ht,Mt),dt}function bt(ht,wt,At,Ct){if(typeof At=="object"&&At!==null&&At.type===ya&&At.key===null&&(At=At.props.children),typeof At=="object"&&At!==null){switch(At.$$typeof){case va:e:{for(var dt=At.key,Et=wt;Et!==null;){if(Et.key===dt){if(dt=At.type,dt===ya){if(Et.tag===7){a(ht,Et.sibling),wt=j(Et,At.props.children),wt.return=ht,ht=wt;break e}}else if(Et.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===Ha&&Ng(dt)===Et.type){a(ht,Et.sibling),wt=j(Et,At.props),wt.ref=Lg(ht,Et,At),wt.return=ht,ht=wt;break e}a(ht,Et);break}else e(ht,Et);Et=Et.sibling}At.type===ya?(wt=Tg(At.props.children,ht.mode,Ct,At.key),wt.return=ht,ht=wt):(Ct=Rg(At.type,At.key,At.props,null,ht.mode,Ct),Ct.ref=Lg(ht,wt,At),Ct.return=ht,ht=Ct)}return et(ht);case wa:e:{for(Et=At.key;wt!==null;){if(wt.key===Et)if(wt.tag===4&&wt.stateNode.containerInfo===At.containerInfo&&wt.stateNode.implementation===At.implementation){a(ht,wt.sibling),wt=j(wt,At.children||[]),wt.return=ht,ht=wt;break e}else{a(ht,wt);break}else e(ht,wt);wt=wt.sibling}wt=Sg(At,ht.mode,Ct),wt.return=ht,ht=wt}return et(ht);case Ha:return Et=At._init,bt(ht,wt,Et(At._payload),Ct)}if(eb(At))return vt(ht,wt,At,Ct);if(Ka(At))return rt(ht,wt,At,Ct);Mg(ht,At)}return typeof At=="string"&&At!==""||typeof At=="number"?(At=""+At,wt!==null&&wt.tag===6?(a(ht,wt.sibling),wt=j(wt,At),wt.return=ht,ht=wt):(a(ht,wt),wt=Qg(At,ht.mode,Ct),wt.return=ht,ht=wt),et(ht)):a(ht,wt)}return bt}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(o){var e=Wg.current;E(Wg),o._currentValue=e}function bh(o,e,a){for(;o!==null;){var c=o.alternate;if((o.childLanes&e)!==e?(o.childLanes|=e,c!==null&&(c.childLanes|=e)):c!==null&&(c.childLanes&e)!==e&&(c.childLanes|=e),o===a)break;o=o.return}}function ch(o,e){Xg=o,Zg=Yg=null,o=o.dependencies,o!==null&&o.firstContext!==null&&(o.lanes&e&&(dh$1=!0),o.firstContext=null)}function eh(o){var e=o._currentValue;if(Zg!==o)if(o={context:o,memoizedValue:e,next:null},Yg===null){if(Xg===null)throw Error(p$1(308));Yg=o,Xg.dependencies={lanes:0,firstContext:o}}else Yg=Yg.next=o;return e}var fh=null;function gh(o){fh===null?fh=[o]:fh.push(o)}function hh(o,e,a,c){var j=e.interleaved;return j===null?(a.next=a,gh(e)):(a.next=j.next,j.next=a),e.interleaved=a,ih(o,c)}function ih(o,e){o.lanes|=e;var a=o.alternate;for(a!==null&&(a.lanes|=e),a=o,o=o.return;o!==null;)o.childLanes|=e,a=o.alternate,a!==null&&(a.childLanes|=e),a=o,o=o.return;return a.tag===3?a.stateNode:null}var jh=!1;function kh(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(o,e){o=o.updateQueue,e.updateQueue===o&&(e.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function mh(o,e){return{eventTime:o,lane:e,tag:0,payload:null,callback:null,next:null}}function nh(o,e,a){var c=o.updateQueue;if(c===null)return null;if(c=c.shared,K&2){var j=c.pending;return j===null?e.next=e:(e.next=j.next,j.next=e),c.pending=e,ih(o,a)}return j=c.interleaved,j===null?(e.next=e,gh(c)):(e.next=j.next,j.next=e),c.interleaved=e,ih(o,a)}function oh(o,e,a){if(e=e.updateQueue,e!==null&&(e=e.shared,(a&4194240)!==0)){var c=e.lanes;c&=o.pendingLanes,a|=c,e.lanes=a,Cc(o,a)}}function ph(o,e){var a=o.updateQueue,c=o.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var j=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var et={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};d===null?j=d=et:d=d.next=et,a=a.next}while(a!==null);d===null?j=d=e:d=d.next=e}else j=d=e;a={baseState:c.baseState,firstBaseUpdate:j,lastBaseUpdate:d,shared:c.shared,effects:c.effects},o.updateQueue=a;return}o=a.lastBaseUpdate,o===null?a.firstBaseUpdate=e:o.next=e,a.lastBaseUpdate=e}function qh(o,e,a,c){var j=o.updateQueue;jh=!1;var d=j.firstBaseUpdate,et=j.lastBaseUpdate,at=j.shared.pending;if(at!==null){j.shared.pending=null;var st=at,ct=st.next;st.next=null,et===null?d=ct:et.next=ct,et=st;var ot=o.alternate;ot!==null&&(ot=ot.updateQueue,at=ot.lastBaseUpdate,at!==et&&(at===null?ot.firstBaseUpdate=ct:at.next=ct,ot.lastBaseUpdate=st))}if(d!==null){var gt=j.baseState;et=0,ot=ct=st=null,at=d;do{var ft=at.lane,yt=at.eventTime;if((c&ft)===ft){ot!==null&&(ot=ot.next={eventTime:yt,lane:0,tag:at.tag,payload:at.payload,callback:at.callback,next:null});e:{var vt=o,rt=at;switch(ft=e,yt=a,rt.tag){case 1:if(vt=rt.payload,typeof vt=="function"){gt=vt.call(yt,gt,ft);break e}gt=vt;break e;case 3:vt.flags=vt.flags&-65537|128;case 0:if(vt=rt.payload,ft=typeof vt=="function"?vt.call(yt,gt,ft):vt,ft==null)break e;gt=A({},gt,ft);break e;case 2:jh=!0}}at.callback!==null&&at.lane!==0&&(o.flags|=64,ft=j.effects,ft===null?j.effects=[at]:ft.push(at))}else yt={eventTime:yt,lane:ft,tag:at.tag,payload:at.payload,callback:at.callback,next:null},ot===null?(ct=ot=yt,st=gt):ot=ot.next=yt,et|=ft;if(at=at.next,at===null){if(at=j.shared.pending,at===null)break;ft=at,at=ft.next,ft.next=null,j.lastBaseUpdate=ft,j.shared.pending=null}}while(!0);if(ot===null&&(st=gt),j.baseState=st,j.firstBaseUpdate=ct,j.lastBaseUpdate=ot,e=j.shared.interleaved,e!==null){j=e;do et|=j.lane,j=j.next;while(j!==e)}else d===null&&(j.shared.lanes=0);rh|=et,o.lanes=et,o.memoizedState=gt}}function sh(o,e,a){if(o=e.effects,e.effects=null,o!==null)for(e=0;e<o.length;e++){var c=o[e],j=c.callback;if(j!==null){if(c.callback=null,c=a,typeof j!="function")throw Error(p$1(191,j));j.call(c)}}}var th={},uh=Uf(th),vh=Uf(th),wh=Uf(th);function xh(o){if(o===th)throw Error(p$1(174));return o}function yh(o,e){switch(G(wh,e),G(vh,o),G(uh,th),o=e.nodeType,o){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lb(null,"");break;default:o=o===8?e.parentNode:e,e=o.namespaceURI||null,o=o.tagName,e=lb(e,o)}E(uh),G(uh,e)}function zh(){E(uh),E(vh),E(wh)}function Ah(o){xh(wh.current);var e=xh(uh.current),a=lb(e,o.type);e!==a&&(G(vh,o),G(uh,a))}function Bh(o){vh.current===o&&(E(uh),E(vh))}var L=Uf(0);function Ch(o){for(var e=o;e!==null;){if(e.tag===13){var a=e.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===o)break;for(;e.sibling===null;){if(e.return===null||e.return===o)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Dh=[];function Eh(){for(var o=0;o<Dh.length;o++)Dh[o]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M=null,N=null,O=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P(){throw Error(p$1(321))}function Mh(o,e){if(e===null)return!1;for(var a=0;a<e.length&&a<o.length;a++)if(!He(o[a],e[a]))return!1;return!0}function Nh(o,e,a,c,j,d){if(Hh=d,M=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Fh.current=o===null||o.memoizedState===null?Oh:Ph,o=a(c,j),Jh){d=0;do{if(Jh=!1,Kh=0,25<=d)throw Error(p$1(301));d+=1,O=N=null,e.updateQueue=null,Fh.current=Qh,o=a(c,j)}while(Jh)}if(Fh.current=Rh,e=N!==null&&N.next!==null,Hh=0,O=N=M=null,Ih=!1,e)throw Error(p$1(300));return o}function Sh(){var o=Kh!==0;return Kh=0,o}function Th(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O===null?M.memoizedState=O=o:O=O.next=o,O}function Uh(){if(N===null){var o=M.alternate;o=o!==null?o.memoizedState:null}else o=N.next;var e=O===null?M.memoizedState:O.next;if(e!==null)O=e,N=o;else{if(o===null)throw Error(p$1(310));N=o,o={memoizedState:N.memoizedState,baseState:N.baseState,baseQueue:N.baseQueue,queue:N.queue,next:null},O===null?M.memoizedState=O=o:O=O.next=o}return O}function Vh(o,e){return typeof e=="function"?e(o):e}function Wh(o){var e=Uh(),a=e.queue;if(a===null)throw Error(p$1(311));a.lastRenderedReducer=o;var c=N,j=c.baseQueue,d=a.pending;if(d!==null){if(j!==null){var et=j.next;j.next=d.next,d.next=et}c.baseQueue=j=d,a.pending=null}if(j!==null){d=j.next,c=c.baseState;var at=et=null,st=null,ct=d;do{var ot=ct.lane;if((Hh&ot)===ot)st!==null&&(st=st.next={lane:0,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null}),c=ct.hasEagerState?ct.eagerState:o(c,ct.action);else{var gt={lane:ot,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null};st===null?(at=st=gt,et=c):st=st.next=gt,M.lanes|=ot,rh|=ot}ct=ct.next}while(ct!==null&&ct!==d);st===null?et=c:st.next=at,He(c,e.memoizedState)||(dh$1=!0),e.memoizedState=c,e.baseState=et,e.baseQueue=st,a.lastRenderedState=c}if(o=a.interleaved,o!==null){j=o;do d=j.lane,M.lanes|=d,rh|=d,j=j.next;while(j!==o)}else j===null&&(a.lanes=0);return[e.memoizedState,a.dispatch]}function Xh(o){var e=Uh(),a=e.queue;if(a===null)throw Error(p$1(311));a.lastRenderedReducer=o;var c=a.dispatch,j=a.pending,d=e.memoizedState;if(j!==null){a.pending=null;var et=j=j.next;do d=o(d,et.action),et=et.next;while(et!==j);He(d,e.memoizedState)||(dh$1=!0),e.memoizedState=d,e.baseQueue===null&&(e.baseState=d),a.lastRenderedState=d}return[d,c]}function Yh(){}function Zh(o,e){var a=M,c=Uh(),j=e(),d=!He(c.memoizedState,j);if(d&&(c.memoizedState=j,dh$1=!0),c=c.queue,$h(ai.bind(null,a,c,o),[o]),c.getSnapshot!==e||d||O!==null&&O.memoizedState.tag&1){if(a.flags|=2048,bi(9,ci.bind(null,a,c,j,e),void 0,null),Q===null)throw Error(p$1(349));Hh&30||di(a,e,j)}return j}function di(o,e,a){o.flags|=16384,o={getSnapshot:e,value:a},e=M.updateQueue,e===null?(e={lastEffect:null,stores:null},M.updateQueue=e,e.stores=[o]):(a=e.stores,a===null?e.stores=[o]:a.push(o))}function ci(o,e,a,c){e.value=a,e.getSnapshot=c,ei(e)&&fi(o)}function ai(o,e,a){return a(function(){ei(e)&&fi(o)})}function ei(o){var e=o.getSnapshot;o=o.value;try{var a=e();return!He(o,a)}catch{return!0}}function fi(o){var e=ih(o,1);e!==null&&gi(e,o,1,-1)}function hi(o){var e=Th();return typeof o=="function"&&(o=o()),e.memoizedState=e.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:o},e.queue=o,o=o.dispatch=ii.bind(null,M,o),[e.memoizedState,o]}function bi(o,e,a,c){return o={tag:o,create:e,destroy:a,deps:c,next:null},e=M.updateQueue,e===null?(e={lastEffect:null,stores:null},M.updateQueue=e,e.lastEffect=o.next=o):(a=e.lastEffect,a===null?e.lastEffect=o.next=o:(c=a.next,a.next=o,o.next=c,e.lastEffect=o)),o}function ji(){return Uh().memoizedState}function ki(o,e,a,c){var j=Th();M.flags|=o,j.memoizedState=bi(1|e,a,void 0,c===void 0?null:c)}function li(o,e,a,c){var j=Uh();c=c===void 0?null:c;var d=void 0;if(N!==null){var et=N.memoizedState;if(d=et.destroy,c!==null&&Mh(c,et.deps)){j.memoizedState=bi(e,a,d,c);return}}M.flags|=o,j.memoizedState=bi(1|e,a,d,c)}function mi(o,e){return ki(8390656,8,o,e)}function $h(o,e){return li(2048,8,o,e)}function ni(o,e){return li(4,2,o,e)}function oi(o,e){return li(4,4,o,e)}function pi(o,e){if(typeof e=="function")return o=o(),e(o),function(){e(null)};if(e!=null)return o=o(),e.current=o,function(){e.current=null}}function qi(o,e,a){return a=a!=null?a.concat([o]):null,li(4,4,pi.bind(null,e,o),a)}function ri(){}function si(o,e){var a=Uh();e=e===void 0?null:e;var c=a.memoizedState;return c!==null&&e!==null&&Mh(e,c[1])?c[0]:(a.memoizedState=[o,e],o)}function ti(o,e){var a=Uh();e=e===void 0?null:e;var c=a.memoizedState;return c!==null&&e!==null&&Mh(e,c[1])?c[0]:(o=o(),a.memoizedState=[o,e],o)}function ui(o,e,a){return Hh&21?(He(a,e)||(a=yc(),M.lanes|=a,rh|=a,o.baseState=!0),e):(o.baseState&&(o.baseState=!1,dh$1=!0),o.memoizedState=a)}function vi(o,e){var a=C;C=a!==0&&4>a?a:4,o(!0);var c=Gh.transition;Gh.transition={};try{o(!1),e()}finally{C=a,Gh.transition=c}}function wi(){return Uh().memoizedState}function xi(o,e,a){var c=yi(o);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},zi(o))Ai(e,a);else if(a=hh(o,e,a,c),a!==null){var j=R$1();gi(a,o,c,j),Bi(a,e,c)}}function ii(o,e,a){var c=yi(o),j={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(zi(o))Ai(e,j);else{var d=o.alternate;if(o.lanes===0&&(d===null||d.lanes===0)&&(d=e.lastRenderedReducer,d!==null))try{var et=e.lastRenderedState,at=d(et,a);if(j.hasEagerState=!0,j.eagerState=at,He(at,et)){var st=e.interleaved;st===null?(j.next=j,gh(e)):(j.next=st.next,st.next=j),e.interleaved=j;return}}catch{}finally{}a=hh(o,e,j,c),a!==null&&(j=R$1(),gi(a,o,c,j),Bi(a,e,c))}}function zi(o){var e=o.alternate;return o===M||e!==null&&e===M}function Ai(o,e){Jh=Ih=!0;var a=o.pending;a===null?e.next=e:(e.next=a.next,a.next=e),o.pending=e}function Bi(o,e,a){if(a&4194240){var c=e.lanes;c&=o.pendingLanes,a|=c,e.lanes=a,Cc(o,a)}}var Rh={readContext:eh,useCallback:P,useContext:P,useEffect:P,useImperativeHandle:P,useInsertionEffect:P,useLayoutEffect:P,useMemo:P,useReducer:P,useRef:P,useState:P,useDebugValue:P,useDeferredValue:P,useTransition:P,useMutableSource:P,useSyncExternalStore:P,useId:P,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(o,e){return Th().memoizedState=[o,e===void 0?null:e],o},useContext:eh,useEffect:mi,useImperativeHandle:function(o,e,a){return a=a!=null?a.concat([o]):null,ki(4194308,4,pi.bind(null,e,o),a)},useLayoutEffect:function(o,e){return ki(4194308,4,o,e)},useInsertionEffect:function(o,e){return ki(4,2,o,e)},useMemo:function(o,e){var a=Th();return e=e===void 0?null:e,o=o(),a.memoizedState=[o,e],o},useReducer:function(o,e,a){var c=Th();return e=a!==void 0?a(e):e,c.memoizedState=c.baseState=e,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:e},c.queue=o,o=o.dispatch=xi.bind(null,M,o),[c.memoizedState,o]},useRef:function(o){var e=Th();return o={current:o},e.memoizedState=o},useState:hi,useDebugValue:ri,useDeferredValue:function(o){return Th().memoizedState=o},useTransition:function(){var o=hi(!1),e=o[0];return o=vi.bind(null,o[1]),Th().memoizedState=o,[e,o]},useMutableSource:function(){},useSyncExternalStore:function(o,e,a){var c=M,j=Th();if(I){if(a===void 0)throw Error(p$1(407));a=a()}else{if(a=e(),Q===null)throw Error(p$1(349));Hh&30||di(c,e,a)}j.memoizedState=a;var d={value:a,getSnapshot:e};return j.queue=d,mi(ai.bind(null,c,d,o),[o]),c.flags|=2048,bi(9,ci.bind(null,c,d,a,e),void 0,null),a},useId:function(){var o=Th(),e=Q.identifierPrefix;if(I){var a=sg,c=rg;a=(c&~(1<<32-oc(c)-1)).toString(32)+a,e=":"+e+"R"+a,a=Kh++,0<a&&(e+="H"+a.toString(32)),e+=":"}else a=Lh++,e=":"+e+"r"+a.toString(32)+":";return o.memoizedState=e},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(o){var e=Uh();return ui(e,N.memoizedState,o)},useTransition:function(){var o=Wh(Vh)[0],e=Uh().memoizedState;return[o,e]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(o){var e=Uh();return N===null?e.memoizedState=o:ui(e,N.memoizedState,o)},useTransition:function(){var o=Xh(Vh)[0],e=Uh().memoizedState;return[o,e]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(o,e){if(o&&o.defaultProps){e=A({},e),o=o.defaultProps;for(var a in o)e[a]===void 0&&(e[a]=o[a]);return e}return e}function Di(o,e,a,c){e=o.memoizedState,a=a(c,e),a=a==null?e:A({},e,a),o.memoizedState=a,o.lanes===0&&(o.updateQueue.baseState=a)}var Ei={isMounted:function(o){return(o=o._reactInternals)?Vb(o)===o:!1},enqueueSetState:function(o,e,a){o=o._reactInternals;var c=R$1(),j=yi(o),d=mh(c,j);d.payload=e,a!=null&&(d.callback=a),e=nh(o,d,j),e!==null&&(gi(e,o,j,c),oh(e,o,j))},enqueueReplaceState:function(o,e,a){o=o._reactInternals;var c=R$1(),j=yi(o),d=mh(c,j);d.tag=1,d.payload=e,a!=null&&(d.callback=a),e=nh(o,d,j),e!==null&&(gi(e,o,j,c),oh(e,o,j))},enqueueForceUpdate:function(o,e){o=o._reactInternals;var a=R$1(),c=yi(o),j=mh(a,c);j.tag=2,e!=null&&(j.callback=e),e=nh(o,j,c),e!==null&&(gi(e,o,c,a),oh(e,o,c))}};function Fi(o,e,a,c,j,d,et){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(c,d,et):e.prototype&&e.prototype.isPureReactComponent?!Ie(a,c)||!Ie(j,d):!0}function Gi(o,e,a){var c=!1,j=Vf,d=e.contextType;return typeof d=="object"&&d!==null?d=eh(d):(j=Zf(e)?Xf:H.current,c=e.contextTypes,d=(c=c!=null)?Yf(o,j):Vf),e=new e(a,d),o.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ei,o.stateNode=e,e._reactInternals=o,c&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=j,o.__reactInternalMemoizedMaskedChildContext=d),e}function Hi(o,e,a,c){o=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(a,c),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(a,c),e.state!==o&&Ei.enqueueReplaceState(e,e.state,null)}function Ii(o,e,a,c){var j=o.stateNode;j.props=a,j.state=o.memoizedState,j.refs={},kh(o);var d=e.contextType;typeof d=="object"&&d!==null?j.context=eh(d):(d=Zf(e)?Xf:H.current,j.context=Yf(o,d)),j.state=o.memoizedState,d=e.getDerivedStateFromProps,typeof d=="function"&&(Di(o,e,d,a),j.state=o.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof j.getSnapshotBeforeUpdate=="function"||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(e=j.state,typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount(),e!==j.state&&Ei.enqueueReplaceState(j,j.state,null),qh(o,a,j,c),j.state=o.memoizedState),typeof j.componentDidMount=="function"&&(o.flags|=4194308)}function Ji(o,e){try{var a="",c=e;do a+=Pa(c),c=c.return;while(c);var j=a}catch(d){j=`
Error generating stack: `+d.message+`
`+d.stack}return{value:o,source:e,stack:j,digest:null}}function Ki(o,e,a){return{value:o,source:null,stack:a??null,digest:e??null}}function Li(o,e){try{console.error(e.value)}catch(a){setTimeout(function(){throw a})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(o,e,a){a=mh(-1,a),a.tag=3,a.payload={element:null};var c=e.value;return a.callback=function(){Oi||(Oi=!0,Pi=c),Li(o,e)},a}function Qi(o,e,a){a=mh(-1,a),a.tag=3;var c=o.type.getDerivedStateFromError;if(typeof c=="function"){var j=e.value;a.payload=function(){return c(j)},a.callback=function(){Li(o,e)}}var d=o.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(a.callback=function(){Li(o,e),typeof c!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var et=e.stack;this.componentDidCatch(e.value,{componentStack:et!==null?et:""})}),a}function Si(o,e,a){var c=o.pingCache;if(c===null){c=o.pingCache=new Mi;var j=new Set;c.set(e,j)}else j=c.get(e),j===void 0&&(j=new Set,c.set(e,j));j.has(a)||(j.add(a),o=Ti.bind(null,o,e,a),e.then(o,o))}function Ui(o){do{var e;if((e=o.tag===13)&&(e=o.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return o;o=o.return}while(o!==null);return null}function Vi(o,e,a,c,j){return o.mode&1?(o.flags|=65536,o.lanes=j,o):(o===e?o.flags|=65536:(o.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(e=mh(-1,1),e.tag=2,nh(a,e,1))),a.lanes|=1),o)}var Wi=ua.ReactCurrentOwner,dh$1=!1;function Xi(o,e,a,c){e.child=o===null?Vg(e,null,a,c):Ug(e,o.child,a,c)}function Yi(o,e,a,c,j){a=a.render;var d=e.ref;return ch(e,j),c=Nh(o,e,a,c,d,j),a=Sh(),o!==null&&!dh$1?(e.updateQueue=o.updateQueue,e.flags&=-2053,o.lanes&=~j,Zi(o,e,j)):(I&&a&&vg(e),e.flags|=1,Xi(o,e,c,j),e.child)}function $i(o,e,a,c,j){if(o===null){var d=a.type;return typeof d=="function"&&!aj(d)&&d.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(e.tag=15,e.type=d,bj(o,e,d,c,j)):(o=Rg(a.type,null,c,e,e.mode,j),o.ref=e.ref,o.return=e,e.child=o)}if(d=o.child,!(o.lanes&j)){var et=d.memoizedProps;if(a=a.compare,a=a!==null?a:Ie,a(et,c)&&o.ref===e.ref)return Zi(o,e,j)}return e.flags|=1,o=Pg(d,c),o.ref=e.ref,o.return=e,e.child=o}function bj(o,e,a,c,j){if(o!==null){var d=o.memoizedProps;if(Ie(d,c)&&o.ref===e.ref)if(dh$1=!1,e.pendingProps=c=d,(o.lanes&j)!==0)o.flags&131072&&(dh$1=!0);else return e.lanes=o.lanes,Zi(o,e,j)}return cj(o,e,a,c,j)}function dj(o,e,a){var c=e.pendingProps,j=c.children,d=o!==null?o.memoizedState:null;if(c.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(ej,fj),fj|=a;else{if(!(a&1073741824))return o=d!==null?d.baseLanes|a:a,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:o,cachePool:null,transitions:null},e.updateQueue=null,G(ej,fj),fj|=o,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=d!==null?d.baseLanes:a,G(ej,fj),fj|=c}else d!==null?(c=d.baseLanes|a,e.memoizedState=null):c=a,G(ej,fj),fj|=c;return Xi(o,e,j,a),e.child}function gj(o,e){var a=e.ref;(o===null&&a!==null||o!==null&&o.ref!==a)&&(e.flags|=512,e.flags|=2097152)}function cj(o,e,a,c,j){var d=Zf(a)?Xf:H.current;return d=Yf(e,d),ch(e,j),a=Nh(o,e,a,c,d,j),c=Sh(),o!==null&&!dh$1?(e.updateQueue=o.updateQueue,e.flags&=-2053,o.lanes&=~j,Zi(o,e,j)):(I&&c&&vg(e),e.flags|=1,Xi(o,e,a,j),e.child)}function hj(o,e,a,c,j){if(Zf(a)){var d=!0;cg(e)}else d=!1;if(ch(e,j),e.stateNode===null)ij(o,e),Gi(e,a,c),Ii(e,a,c,j),c=!0;else if(o===null){var et=e.stateNode,at=e.memoizedProps;et.props=at;var st=et.context,ct=a.contextType;typeof ct=="object"&&ct!==null?ct=eh(ct):(ct=Zf(a)?Xf:H.current,ct=Yf(e,ct));var ot=a.getDerivedStateFromProps,gt=typeof ot=="function"||typeof et.getSnapshotBeforeUpdate=="function";gt||typeof et.UNSAFE_componentWillReceiveProps!="function"&&typeof et.componentWillReceiveProps!="function"||(at!==c||st!==ct)&&Hi(e,et,c,ct),jh=!1;var ft=e.memoizedState;et.state=ft,qh(e,c,et,j),st=e.memoizedState,at!==c||ft!==st||Wf.current||jh?(typeof ot=="function"&&(Di(e,a,ot,c),st=e.memoizedState),(at=jh||Fi(e,a,at,c,ft,st,ct))?(gt||typeof et.UNSAFE_componentWillMount!="function"&&typeof et.componentWillMount!="function"||(typeof et.componentWillMount=="function"&&et.componentWillMount(),typeof et.UNSAFE_componentWillMount=="function"&&et.UNSAFE_componentWillMount()),typeof et.componentDidMount=="function"&&(e.flags|=4194308)):(typeof et.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=c,e.memoizedState=st),et.props=c,et.state=st,et.context=ct,c=at):(typeof et.componentDidMount=="function"&&(e.flags|=4194308),c=!1)}else{et=e.stateNode,lh(o,e),at=e.memoizedProps,ct=e.type===e.elementType?at:Ci(e.type,at),et.props=ct,gt=e.pendingProps,ft=et.context,st=a.contextType,typeof st=="object"&&st!==null?st=eh(st):(st=Zf(a)?Xf:H.current,st=Yf(e,st));var yt=a.getDerivedStateFromProps;(ot=typeof yt=="function"||typeof et.getSnapshotBeforeUpdate=="function")||typeof et.UNSAFE_componentWillReceiveProps!="function"&&typeof et.componentWillReceiveProps!="function"||(at!==gt||ft!==st)&&Hi(e,et,c,st),jh=!1,ft=e.memoizedState,et.state=ft,qh(e,c,et,j);var vt=e.memoizedState;at!==gt||ft!==vt||Wf.current||jh?(typeof yt=="function"&&(Di(e,a,yt,c),vt=e.memoizedState),(ct=jh||Fi(e,a,ct,c,ft,vt,st)||!1)?(ot||typeof et.UNSAFE_componentWillUpdate!="function"&&typeof et.componentWillUpdate!="function"||(typeof et.componentWillUpdate=="function"&&et.componentWillUpdate(c,vt,st),typeof et.UNSAFE_componentWillUpdate=="function"&&et.UNSAFE_componentWillUpdate(c,vt,st)),typeof et.componentDidUpdate=="function"&&(e.flags|=4),typeof et.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof et.componentDidUpdate!="function"||at===o.memoizedProps&&ft===o.memoizedState||(e.flags|=4),typeof et.getSnapshotBeforeUpdate!="function"||at===o.memoizedProps&&ft===o.memoizedState||(e.flags|=1024),e.memoizedProps=c,e.memoizedState=vt),et.props=c,et.state=vt,et.context=st,c=ct):(typeof et.componentDidUpdate!="function"||at===o.memoizedProps&&ft===o.memoizedState||(e.flags|=4),typeof et.getSnapshotBeforeUpdate!="function"||at===o.memoizedProps&&ft===o.memoizedState||(e.flags|=1024),c=!1)}return jj(o,e,a,c,d,j)}function jj(o,e,a,c,j,d){gj(o,e);var et=(e.flags&128)!==0;if(!c&&!et)return j&&dg(e,a,!1),Zi(o,e,d);c=e.stateNode,Wi.current=e;var at=et&&typeof a.getDerivedStateFromError!="function"?null:c.render();return e.flags|=1,o!==null&&et?(e.child=Ug(e,o.child,null,d),e.child=Ug(e,null,at,d)):Xi(o,e,at,d),e.memoizedState=c.state,j&&dg(e,a,!0),e.child}function kj(o){var e=o.stateNode;e.pendingContext?ag(o,e.pendingContext,e.pendingContext!==e.context):e.context&&ag(o,e.context,!1),yh(o,e.containerInfo)}function lj(o,e,a,c,j){return Ig(),Jg(j),e.flags|=256,Xi(o,e,a,c),e.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(o){return{baseLanes:o,cachePool:null,transitions:null}}function oj(o,e,a){var c=e.pendingProps,j=L.current,d=!1,et=(e.flags&128)!==0,at;if((at=et)||(at=o!==null&&o.memoizedState===null?!1:(j&2)!==0),at?(d=!0,e.flags&=-129):(o===null||o.memoizedState!==null)&&(j|=1),G(L,j&1),o===null)return Eg(e),o=e.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?(e.mode&1?o.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(et=c.children,o=c.fallback,d?(c=e.mode,d=e.child,et={mode:"hidden",children:et},!(c&1)&&d!==null?(d.childLanes=0,d.pendingProps=et):d=pj(et,c,0,null),o=Tg(o,c,a,null),d.return=e,o.return=e,d.sibling=o,e.child=d,e.child.memoizedState=nj(a),e.memoizedState=mj,o):qj(e,et));if(j=o.memoizedState,j!==null&&(at=j.dehydrated,at!==null))return rj(o,e,et,c,at,j,a);if(d){d=c.fallback,et=e.mode,j=o.child,at=j.sibling;var st={mode:"hidden",children:c.children};return!(et&1)&&e.child!==j?(c=e.child,c.childLanes=0,c.pendingProps=st,e.deletions=null):(c=Pg(j,st),c.subtreeFlags=j.subtreeFlags&14680064),at!==null?d=Pg(at,d):(d=Tg(d,et,a,null),d.flags|=2),d.return=e,c.return=e,c.sibling=d,e.child=c,c=d,d=e.child,et=o.child.memoizedState,et=et===null?nj(a):{baseLanes:et.baseLanes|a,cachePool:null,transitions:et.transitions},d.memoizedState=et,d.childLanes=o.childLanes&~a,e.memoizedState=mj,c}return d=o.child,o=d.sibling,c=Pg(d,{mode:"visible",children:c.children}),!(e.mode&1)&&(c.lanes=a),c.return=e,c.sibling=null,o!==null&&(a=e.deletions,a===null?(e.deletions=[o],e.flags|=16):a.push(o)),e.child=c,e.memoizedState=null,c}function qj(o,e){return e=pj({mode:"visible",children:e},o.mode,0,null),e.return=o,o.child=e}function sj(o,e,a,c){return c!==null&&Jg(c),Ug(e,o.child,null,a),o=qj(e,e.pendingProps.children),o.flags|=2,e.memoizedState=null,o}function rj(o,e,a,c,j,d,et){if(a)return e.flags&256?(e.flags&=-257,c=Ki(Error(p$1(422))),sj(o,e,et,c)):e.memoizedState!==null?(e.child=o.child,e.flags|=128,null):(d=c.fallback,j=e.mode,c=pj({mode:"visible",children:c.children},j,0,null),d=Tg(d,j,et,null),d.flags|=2,c.return=e,d.return=e,c.sibling=d,e.child=c,e.mode&1&&Ug(e,o.child,null,et),e.child.memoizedState=nj(et),e.memoizedState=mj,d);if(!(e.mode&1))return sj(o,e,et,null);if(j.data==="$!"){if(c=j.nextSibling&&j.nextSibling.dataset,c)var at=c.dgst;return c=at,d=Error(p$1(419)),c=Ki(d,c,void 0),sj(o,e,et,c)}if(at=(et&o.childLanes)!==0,dh$1||at){if(c=Q,c!==null){switch(et&-et){case 4:j=2;break;case 16:j=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:j=32;break;case 536870912:j=268435456;break;default:j=0}j=j&(c.suspendedLanes|et)?0:j,j!==0&&j!==d.retryLane&&(d.retryLane=j,ih(o,j),gi(c,o,j,-1))}return tj(),c=Ki(Error(p$1(421))),sj(o,e,et,c)}return j.data==="$?"?(e.flags|=128,e.child=o.child,e=uj.bind(null,o),j._reactRetry=e,null):(o=d.treeContext,yg=Lf(j.nextSibling),xg=e,I=!0,zg=null,o!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=o.id,sg=o.overflow,qg=e),e=qj(e,c.children),e.flags|=4096,e)}function vj(o,e,a){o.lanes|=e;var c=o.alternate;c!==null&&(c.lanes|=e),bh(o.return,e,a)}function wj(o,e,a,c,j){var d=o.memoizedState;d===null?o.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:j}:(d.isBackwards=e,d.rendering=null,d.renderingStartTime=0,d.last=c,d.tail=a,d.tailMode=j)}function xj(o,e,a){var c=e.pendingProps,j=c.revealOrder,d=c.tail;if(Xi(o,e,c.children,a),c=L.current,c&2)c=c&1|2,e.flags|=128;else{if(o!==null&&o.flags&128)e:for(o=e.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&vj(o,a,e);else if(o.tag===19)vj(o,a,e);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===e)break e;for(;o.sibling===null;){if(o.return===null||o.return===e)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}c&=1}if(G(L,c),!(e.mode&1))e.memoizedState=null;else switch(j){case"forwards":for(a=e.child,j=null;a!==null;)o=a.alternate,o!==null&&Ch(o)===null&&(j=a),a=a.sibling;a=j,a===null?(j=e.child,e.child=null):(j=a.sibling,a.sibling=null),wj(e,!1,j,a,d);break;case"backwards":for(a=null,j=e.child,e.child=null;j!==null;){if(o=j.alternate,o!==null&&Ch(o)===null){e.child=j;break}o=j.sibling,j.sibling=a,a=j,j=o}wj(e,!0,a,null,d);break;case"together":wj(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ij(o,e){!(e.mode&1)&&o!==null&&(o.alternate=null,e.alternate=null,e.flags|=2)}function Zi(o,e,a){if(o!==null&&(e.dependencies=o.dependencies),rh|=e.lanes,!(a&e.childLanes))return null;if(o!==null&&e.child!==o.child)throw Error(p$1(153));if(e.child!==null){for(o=e.child,a=Pg(o,o.pendingProps),e.child=a,a.return=e;o.sibling!==null;)o=o.sibling,a=a.sibling=Pg(o,o.pendingProps),a.return=e;a.sibling=null}return e.child}function yj(o,e,a){switch(e.tag){case 3:kj(e),Ig();break;case 5:Ah(e);break;case 1:Zf(e.type)&&cg(e);break;case 4:yh(e,e.stateNode.containerInfo);break;case 10:var c=e.type._context,j=e.memoizedProps.value;G(Wg,c._currentValue),c._currentValue=j;break;case 13:if(c=e.memoizedState,c!==null)return c.dehydrated!==null?(G(L,L.current&1),e.flags|=128,null):a&e.child.childLanes?oj(o,e,a):(G(L,L.current&1),o=Zi(o,e,a),o!==null?o.sibling:null);G(L,L.current&1);break;case 19:if(c=(a&e.childLanes)!==0,o.flags&128){if(c)return xj(o,e,a);e.flags|=128}if(j=e.memoizedState,j!==null&&(j.rendering=null,j.tail=null,j.lastEffect=null),G(L,L.current),c)break;return null;case 22:case 23:return e.lanes=0,dj(o,e,a)}return Zi(o,e,a)}var zj,Aj,Bj,Cj;zj=function(o,e){for(var a=e.child;a!==null;){if(a.tag===5||a.tag===6)o.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return;a=a.return}a.sibling.return=a.return,a=a.sibling}};Aj=function(){};Bj=function(o,e,a,c){var j=o.memoizedProps;if(j!==c){o=e.stateNode,xh(uh.current);var d=null;switch(a){case"input":j=Ya(o,j),c=Ya(o,c),d=[];break;case"select":j=A({},j,{value:void 0}),c=A({},c,{value:void 0}),d=[];break;case"textarea":j=gb(o,j),c=gb(o,c),d=[];break;default:typeof j.onClick!="function"&&typeof c.onClick=="function"&&(o.onclick=Bf)}ub(a,c);var et;a=null;for(ct in j)if(!c.hasOwnProperty(ct)&&j.hasOwnProperty(ct)&&j[ct]!=null)if(ct==="style"){var at=j[ct];for(et in at)at.hasOwnProperty(et)&&(a||(a={}),a[et]="")}else ct!=="dangerouslySetInnerHTML"&&ct!=="children"&&ct!=="suppressContentEditableWarning"&&ct!=="suppressHydrationWarning"&&ct!=="autoFocus"&&(ea.hasOwnProperty(ct)?d||(d=[]):(d=d||[]).push(ct,null));for(ct in c){var st=c[ct];if(at=j!=null?j[ct]:void 0,c.hasOwnProperty(ct)&&st!==at&&(st!=null||at!=null))if(ct==="style")if(at){for(et in at)!at.hasOwnProperty(et)||st&&st.hasOwnProperty(et)||(a||(a={}),a[et]="");for(et in st)st.hasOwnProperty(et)&&at[et]!==st[et]&&(a||(a={}),a[et]=st[et])}else a||(d||(d=[]),d.push(ct,a)),a=st;else ct==="dangerouslySetInnerHTML"?(st=st?st.__html:void 0,at=at?at.__html:void 0,st!=null&&at!==st&&(d=d||[]).push(ct,st)):ct==="children"?typeof st!="string"&&typeof st!="number"||(d=d||[]).push(ct,""+st):ct!=="suppressContentEditableWarning"&&ct!=="suppressHydrationWarning"&&(ea.hasOwnProperty(ct)?(st!=null&&ct==="onScroll"&&D("scroll",o),d||at===st||(d=[])):(d=d||[]).push(ct,st))}a&&(d=d||[]).push("style",a);var ct=d;(e.updateQueue=ct)&&(e.flags|=4)}};Cj=function(o,e,a,c){a!==c&&(e.flags|=4)};function Dj(o,e){if(!I)switch(o.tailMode){case"hidden":e=o.tail;for(var a=null;e!==null;)e.alternate!==null&&(a=e),e=e.sibling;a===null?o.tail=null:a.sibling=null;break;case"collapsed":a=o.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?e||o.tail===null?o.tail=null:o.tail.sibling=null:c.sibling=null}}function S(o){var e=o.alternate!==null&&o.alternate.child===o.child,a=0,c=0;if(e)for(var j=o.child;j!==null;)a|=j.lanes|j.childLanes,c|=j.subtreeFlags&14680064,c|=j.flags&14680064,j.return=o,j=j.sibling;else for(j=o.child;j!==null;)a|=j.lanes|j.childLanes,c|=j.subtreeFlags,c|=j.flags,j.return=o,j=j.sibling;return o.subtreeFlags|=c,o.childLanes=a,e}function Ej(o,e,a){var c=e.pendingProps;switch(wg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(e),null;case 1:return Zf(e.type)&&$f(),S(e),null;case 3:return c=e.stateNode,zh(),E(Wf),E(H),Eh(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(o===null||o.child===null)&&(Gg(e)?e.flags|=4:o===null||o.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(o,e),S(e),null;case 5:Bh(e);var j=xh(wh.current);if(a=e.type,o!==null&&e.stateNode!=null)Bj(o,e,a,c,j),o.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!c){if(e.stateNode===null)throw Error(p$1(166));return S(e),null}if(o=xh(uh.current),Gg(e)){c=e.stateNode,a=e.type;var d=e.memoizedProps;switch(c[Of]=e,c[Pf]=d,o=(e.mode&1)!==0,a){case"dialog":D("cancel",c),D("close",c);break;case"iframe":case"object":case"embed":D("load",c);break;case"video":case"audio":for(j=0;j<lf.length;j++)D(lf[j],c);break;case"source":D("error",c);break;case"img":case"image":case"link":D("error",c),D("load",c);break;case"details":D("toggle",c);break;case"input":Za(c,d),D("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!d.multiple},D("invalid",c);break;case"textarea":hb(c,d),D("invalid",c)}ub(a,d),j=null;for(var et in d)if(d.hasOwnProperty(et)){var at=d[et];et==="children"?typeof at=="string"?c.textContent!==at&&(d.suppressHydrationWarning!==!0&&Af(c.textContent,at,o),j=["children",at]):typeof at=="number"&&c.textContent!==""+at&&(d.suppressHydrationWarning!==!0&&Af(c.textContent,at,o),j=["children",""+at]):ea.hasOwnProperty(et)&&at!=null&&et==="onScroll"&&D("scroll",c)}switch(a){case"input":Va(c),db(c,d,!0);break;case"textarea":Va(c),jb(c);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(c.onclick=Bf)}c=j,e.updateQueue=c,c!==null&&(e.flags|=4)}else{et=j.nodeType===9?j:j.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=kb(a)),o==="http://www.w3.org/1999/xhtml"?a==="script"?(o=et.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof c.is=="string"?o=et.createElement(a,{is:c.is}):(o=et.createElement(a),a==="select"&&(et=o,c.multiple?et.multiple=!0:c.size&&(et.size=c.size))):o=et.createElementNS(o,a),o[Of]=e,o[Pf]=c,zj(o,e,!1,!1),e.stateNode=o;e:{switch(et=vb(a,c),a){case"dialog":D("cancel",o),D("close",o),j=c;break;case"iframe":case"object":case"embed":D("load",o),j=c;break;case"video":case"audio":for(j=0;j<lf.length;j++)D(lf[j],o);j=c;break;case"source":D("error",o),j=c;break;case"img":case"image":case"link":D("error",o),D("load",o),j=c;break;case"details":D("toggle",o),j=c;break;case"input":Za(o,c),j=Ya(o,c),D("invalid",o);break;case"option":j=c;break;case"select":o._wrapperState={wasMultiple:!!c.multiple},j=A({},c,{value:void 0}),D("invalid",o);break;case"textarea":hb(o,c),j=gb(o,c),D("invalid",o);break;default:j=c}ub(a,j),at=j;for(d in at)if(at.hasOwnProperty(d)){var st=at[d];d==="style"?sb(o,st):d==="dangerouslySetInnerHTML"?(st=st?st.__html:void 0,st!=null&&nb(o,st)):d==="children"?typeof st=="string"?(a!=="textarea"||st!=="")&&ob(o,st):typeof st=="number"&&ob(o,""+st):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ea.hasOwnProperty(d)?st!=null&&d==="onScroll"&&D("scroll",o):st!=null&&ta(o,d,st,et))}switch(a){case"input":Va(o),db(o,c,!1);break;case"textarea":Va(o),jb(o);break;case"option":c.value!=null&&o.setAttribute("value",""+Sa(c.value));break;case"select":o.multiple=!!c.multiple,d=c.value,d!=null?fb(o,!!c.multiple,d,!1):c.defaultValue!=null&&fb(o,!!c.multiple,c.defaultValue,!0);break;default:typeof j.onClick=="function"&&(o.onclick=Bf)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return S(e),null;case 6:if(o&&e.stateNode!=null)Cj(o,e,o.memoizedProps,c);else{if(typeof c!="string"&&e.stateNode===null)throw Error(p$1(166));if(a=xh(wh.current),xh(uh.current),Gg(e)){if(c=e.stateNode,a=e.memoizedProps,c[Of]=e,(d=c.nodeValue!==a)&&(o=xg,o!==null))switch(o.tag){case 3:Af(c.nodeValue,a,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&Af(c.nodeValue,a,(o.mode&1)!==0)}d&&(e.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[Of]=e,e.stateNode=c}return S(e),null;case 13:if(E(L),c=e.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(I&&yg!==null&&e.mode&1&&!(e.flags&128))Hg(),Ig(),e.flags|=98560,d=!1;else if(d=Gg(e),c!==null&&c.dehydrated!==null){if(o===null){if(!d)throw Error(p$1(318));if(d=e.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(p$1(317));d[Of]=e}else Ig(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;S(e),d=!1}else zg!==null&&(Fj(zg),zg=null),d=!0;if(!d)return e.flags&65536?e:null}return e.flags&128?(e.lanes=a,e):(c=c!==null,c!==(o!==null&&o.memoizedState!==null)&&c&&(e.child.flags|=8192,e.mode&1&&(o===null||L.current&1?T===0&&(T=3):tj())),e.updateQueue!==null&&(e.flags|=4),S(e),null);case 4:return zh(),Aj(o,e),o===null&&sf(e.stateNode.containerInfo),S(e),null;case 10:return ah(e.type._context),S(e),null;case 17:return Zf(e.type)&&$f(),S(e),null;case 19:if(E(L),d=e.memoizedState,d===null)return S(e),null;if(c=(e.flags&128)!==0,et=d.rendering,et===null)if(c)Dj(d,!1);else{if(T!==0||o!==null&&o.flags&128)for(o=e.child;o!==null;){if(et=Ch(o),et!==null){for(e.flags|=128,Dj(d,!1),c=et.updateQueue,c!==null&&(e.updateQueue=c,e.flags|=4),e.subtreeFlags=0,c=a,a=e.child;a!==null;)d=a,o=c,d.flags&=14680066,et=d.alternate,et===null?(d.childLanes=0,d.lanes=o,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=et.childLanes,d.lanes=et.lanes,d.child=et.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=et.memoizedProps,d.memoizedState=et.memoizedState,d.updateQueue=et.updateQueue,d.type=et.type,o=et.dependencies,d.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),a=a.sibling;return G(L,L.current&1|2),e.child}o=o.sibling}d.tail!==null&&B()>Gj&&(e.flags|=128,c=!0,Dj(d,!1),e.lanes=4194304)}else{if(!c)if(o=Ch(et),o!==null){if(e.flags|=128,c=!0,a=o.updateQueue,a!==null&&(e.updateQueue=a,e.flags|=4),Dj(d,!0),d.tail===null&&d.tailMode==="hidden"&&!et.alternate&&!I)return S(e),null}else 2*B()-d.renderingStartTime>Gj&&a!==1073741824&&(e.flags|=128,c=!0,Dj(d,!1),e.lanes=4194304);d.isBackwards?(et.sibling=e.child,e.child=et):(a=d.last,a!==null?a.sibling=et:e.child=et,d.last=et)}return d.tail!==null?(e=d.tail,d.rendering=e,d.tail=e.sibling,d.renderingStartTime=B(),e.sibling=null,a=L.current,G(L,c?a&1|2:a&1),e):(S(e),null);case 22:case 23:return Hj(),c=e.memoizedState!==null,o!==null&&o.memoizedState!==null!==c&&(e.flags|=8192),c&&e.mode&1?fj&1073741824&&(S(e),e.subtreeFlags&6&&(e.flags|=8192)):S(e),null;case 24:return null;case 25:return null}throw Error(p$1(156,e.tag))}function Ij(o,e){switch(wg(e),e.tag){case 1:return Zf(e.type)&&$f(),o=e.flags,o&65536?(e.flags=o&-65537|128,e):null;case 3:return zh(),E(Wf),E(H),Eh(),o=e.flags,o&65536&&!(o&128)?(e.flags=o&-65537|128,e):null;case 5:return Bh(e),null;case 13:if(E(L),o=e.memoizedState,o!==null&&o.dehydrated!==null){if(e.alternate===null)throw Error(p$1(340));Ig()}return o=e.flags,o&65536?(e.flags=o&-65537|128,e):null;case 19:return E(L),null;case 4:return zh(),null;case 10:return ah(e.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V=null;function Lj(o,e){var a=o.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){W(o,e,c)}else a.current=null}function Mj(o,e,a){try{a()}catch(c){W(o,e,c)}}var Nj=!1;function Oj(o,e){if(Cf=dd,o=Me(),Ne(o)){if("selectionStart"in o)var a={start:o.selectionStart,end:o.selectionEnd};else e:{a=(a=o.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var j=c.anchorOffset,d=c.focusNode;c=c.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var et=0,at=-1,st=-1,ct=0,ot=0,gt=o,ft=null;t:for(;;){for(var yt;gt!==a||j!==0&&gt.nodeType!==3||(at=et+j),gt!==d||c!==0&&gt.nodeType!==3||(st=et+c),gt.nodeType===3&&(et+=gt.nodeValue.length),(yt=gt.firstChild)!==null;)ft=gt,gt=yt;for(;;){if(gt===o)break t;if(ft===a&&++ct===j&&(at=et),ft===d&&++ot===c&&(st=et),(yt=gt.nextSibling)!==null)break;gt=ft,ft=gt.parentNode}gt=yt}a=at===-1||st===-1?null:{start:at,end:st}}else a=null}a=a||{start:0,end:0}}else a=null;for(Df={focusedElem:o,selectionRange:a},dd=!1,V=e;V!==null;)if(e=V,o=e.child,(e.subtreeFlags&1028)!==0&&o!==null)o.return=e,V=o;else for(;V!==null;){e=V;try{var vt=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(vt!==null){var rt=vt.memoizedProps,bt=vt.memoizedState,ht=e.stateNode,wt=ht.getSnapshotBeforeUpdate(e.elementType===e.type?rt:Ci(e.type,rt),bt);ht.__reactInternalSnapshotBeforeUpdate=wt}break;case 3:var At=e.stateNode.containerInfo;At.nodeType===1?At.textContent="":At.nodeType===9&&At.documentElement&&At.removeChild(At.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$1(163))}}catch(Ct){W(e,e.return,Ct)}if(o=e.sibling,o!==null){o.return=e.return,V=o;break}V=e.return}return vt=Nj,Nj=!1,vt}function Pj(o,e,a){var c=e.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var j=c=c.next;do{if((j.tag&o)===o){var d=j.destroy;j.destroy=void 0,d!==void 0&&Mj(e,a,d)}j=j.next}while(j!==c)}}function Qj(o,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var a=e=e.next;do{if((a.tag&o)===o){var c=a.create;a.destroy=c()}a=a.next}while(a!==e)}}function Rj(o){var e=o.ref;if(e!==null){var a=o.stateNode;switch(o.tag){case 5:o=a;break;default:o=a}typeof e=="function"?e(o):e.current=o}}function Sj(o){var e=o.alternate;e!==null&&(o.alternate=null,Sj(e)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(e=o.stateNode,e!==null&&(delete e[Of],delete e[Pf],delete e[of],delete e[Qf],delete e[Rf])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function Tj(o){return o.tag===5||o.tag===3||o.tag===4}function Uj(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Tj(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Vj(o,e,a){var c=o.tag;if(c===5||c===6)o=o.stateNode,e?a.nodeType===8?a.parentNode.insertBefore(o,e):a.insertBefore(o,e):(a.nodeType===8?(e=a.parentNode,e.insertBefore(o,a)):(e=a,e.appendChild(o)),a=a._reactRootContainer,a!=null||e.onclick!==null||(e.onclick=Bf));else if(c!==4&&(o=o.child,o!==null))for(Vj(o,e,a),o=o.sibling;o!==null;)Vj(o,e,a),o=o.sibling}function Wj(o,e,a){var c=o.tag;if(c===5||c===6)o=o.stateNode,e?a.insertBefore(o,e):a.appendChild(o);else if(c!==4&&(o=o.child,o!==null))for(Wj(o,e,a),o=o.sibling;o!==null;)Wj(o,e,a),o=o.sibling}var X=null,Xj=!1;function Yj(o,e,a){for(a=a.child;a!==null;)Zj(o,e,a),a=a.sibling}function Zj(o,e,a){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,a)}catch{}switch(a.tag){case 5:U||Lj(a,e);case 6:var c=X,j=Xj;X=null,Yj(o,e,a),X=c,Xj=j,X!==null&&(Xj?(o=X,a=a.stateNode,o.nodeType===8?o.parentNode.removeChild(a):o.removeChild(a)):X.removeChild(a.stateNode));break;case 18:X!==null&&(Xj?(o=X,a=a.stateNode,o.nodeType===8?Kf(o.parentNode,a):o.nodeType===1&&Kf(o,a),bd(o)):Kf(X,a.stateNode));break;case 4:c=X,j=Xj,X=a.stateNode.containerInfo,Xj=!0,Yj(o,e,a),X=c,Xj=j;break;case 0:case 11:case 14:case 15:if(!U&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){j=c=c.next;do{var d=j,et=d.destroy;d=d.tag,et!==void 0&&(d&2||d&4)&&Mj(a,e,et),j=j.next}while(j!==c)}Yj(o,e,a);break;case 1:if(!U&&(Lj(a,e),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(at){W(a,e,at)}Yj(o,e,a);break;case 21:Yj(o,e,a);break;case 22:a.mode&1?(U=(c=U)||a.memoizedState!==null,Yj(o,e,a),U=c):Yj(o,e,a);break;default:Yj(o,e,a)}}function ak(o){var e=o.updateQueue;if(e!==null){o.updateQueue=null;var a=o.stateNode;a===null&&(a=o.stateNode=new Kj),e.forEach(function(c){var j=bk.bind(null,o,c);a.has(c)||(a.add(c),c.then(j,j))})}}function ck(o,e){var a=e.deletions;if(a!==null)for(var c=0;c<a.length;c++){var j=a[c];try{var d=o,et=e,at=et;e:for(;at!==null;){switch(at.tag){case 5:X=at.stateNode,Xj=!1;break e;case 3:X=at.stateNode.containerInfo,Xj=!0;break e;case 4:X=at.stateNode.containerInfo,Xj=!0;break e}at=at.return}if(X===null)throw Error(p$1(160));Zj(d,et,j),X=null,Xj=!1;var st=j.alternate;st!==null&&(st.return=null),j.return=null}catch(ct){W(j,e,ct)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)dk(e,o),e=e.sibling}function dk(o,e){var a=o.alternate,c=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(ck(e,o),ek(o),c&4){try{Pj(3,o,o.return),Qj(3,o)}catch(rt){W(o,o.return,rt)}try{Pj(5,o,o.return)}catch(rt){W(o,o.return,rt)}}break;case 1:ck(e,o),ek(o),c&512&&a!==null&&Lj(a,a.return);break;case 5:if(ck(e,o),ek(o),c&512&&a!==null&&Lj(a,a.return),o.flags&32){var j=o.stateNode;try{ob(j,"")}catch(rt){W(o,o.return,rt)}}if(c&4&&(j=o.stateNode,j!=null)){var d=o.memoizedProps,et=a!==null?a.memoizedProps:d,at=o.type,st=o.updateQueue;if(o.updateQueue=null,st!==null)try{at==="input"&&d.type==="radio"&&d.name!=null&&ab(j,d),vb(at,et);var ct=vb(at,d);for(et=0;et<st.length;et+=2){var ot=st[et],gt=st[et+1];ot==="style"?sb(j,gt):ot==="dangerouslySetInnerHTML"?nb(j,gt):ot==="children"?ob(j,gt):ta(j,ot,gt,ct)}switch(at){case"input":bb(j,d);break;case"textarea":ib(j,d);break;case"select":var ft=j._wrapperState.wasMultiple;j._wrapperState.wasMultiple=!!d.multiple;var yt=d.value;yt!=null?fb(j,!!d.multiple,yt,!1):ft!==!!d.multiple&&(d.defaultValue!=null?fb(j,!!d.multiple,d.defaultValue,!0):fb(j,!!d.multiple,d.multiple?[]:"",!1))}j[Pf]=d}catch(rt){W(o,o.return,rt)}}break;case 6:if(ck(e,o),ek(o),c&4){if(o.stateNode===null)throw Error(p$1(162));j=o.stateNode,d=o.memoizedProps;try{j.nodeValue=d}catch(rt){W(o,o.return,rt)}}break;case 3:if(ck(e,o),ek(o),c&4&&a!==null&&a.memoizedState.isDehydrated)try{bd(e.containerInfo)}catch(rt){W(o,o.return,rt)}break;case 4:ck(e,o),ek(o);break;case 13:ck(e,o),ek(o),j=o.child,j.flags&8192&&(d=j.memoizedState!==null,j.stateNode.isHidden=d,!d||j.alternate!==null&&j.alternate.memoizedState!==null||(fk=B())),c&4&&ak(o);break;case 22:if(ot=a!==null&&a.memoizedState!==null,o.mode&1?(U=(ct=U)||ot,ck(e,o),U=ct):ck(e,o),ek(o),c&8192){if(ct=o.memoizedState!==null,(o.stateNode.isHidden=ct)&&!ot&&o.mode&1)for(V=o,ot=o.child;ot!==null;){for(gt=V=ot;V!==null;){switch(ft=V,yt=ft.child,ft.tag){case 0:case 11:case 14:case 15:Pj(4,ft,ft.return);break;case 1:Lj(ft,ft.return);var vt=ft.stateNode;if(typeof vt.componentWillUnmount=="function"){c=ft,a=ft.return;try{e=c,vt.props=e.memoizedProps,vt.state=e.memoizedState,vt.componentWillUnmount()}catch(rt){W(c,a,rt)}}break;case 5:Lj(ft,ft.return);break;case 22:if(ft.memoizedState!==null){gk(gt);continue}}yt!==null?(yt.return=ft,V=yt):gk(gt)}ot=ot.sibling}e:for(ot=null,gt=o;;){if(gt.tag===5){if(ot===null){ot=gt;try{j=gt.stateNode,ct?(d=j.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none"):(at=gt.stateNode,st=gt.memoizedProps.style,et=st!=null&&st.hasOwnProperty("display")?st.display:null,at.style.display=rb("display",et))}catch(rt){W(o,o.return,rt)}}}else if(gt.tag===6){if(ot===null)try{gt.stateNode.nodeValue=ct?"":gt.memoizedProps}catch(rt){W(o,o.return,rt)}}else if((gt.tag!==22&&gt.tag!==23||gt.memoizedState===null||gt===o)&&gt.child!==null){gt.child.return=gt,gt=gt.child;continue}if(gt===o)break e;for(;gt.sibling===null;){if(gt.return===null||gt.return===o)break e;ot===gt&&(ot=null),gt=gt.return}ot===gt&&(ot=null),gt.sibling.return=gt.return,gt=gt.sibling}}break;case 19:ck(e,o),ek(o),c&4&&ak(o);break;case 21:break;default:ck(e,o),ek(o)}}function ek(o){var e=o.flags;if(e&2){try{e:{for(var a=o.return;a!==null;){if(Tj(a)){var c=a;break e}a=a.return}throw Error(p$1(160))}switch(c.tag){case 5:var j=c.stateNode;c.flags&32&&(ob(j,""),c.flags&=-33);var d=Uj(o);Wj(o,d,j);break;case 3:case 4:var et=c.stateNode.containerInfo,at=Uj(o);Vj(o,at,et);break;default:throw Error(p$1(161))}}catch(st){W(o,o.return,st)}o.flags&=-3}e&4096&&(o.flags&=-4097)}function hk(o,e,a){V=o,ik(o)}function ik(o,e,a){for(var c=(o.mode&1)!==0;V!==null;){var j=V,d=j.child;if(j.tag===22&&c){var et=j.memoizedState!==null||Jj;if(!et){var at=j.alternate,st=at!==null&&at.memoizedState!==null||U;at=Jj;var ct=U;if(Jj=et,(U=st)&&!ct)for(V=j;V!==null;)et=V,st=et.child,et.tag===22&&et.memoizedState!==null?jk(j):st!==null?(st.return=et,V=st):jk(j);for(;d!==null;)V=d,ik(d),d=d.sibling;V=j,Jj=at,U=ct}kk(o)}else j.subtreeFlags&8772&&d!==null?(d.return=j,V=d):kk(o)}}function kk(o){for(;V!==null;){var e=V;if(e.flags&8772){var a=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:U||Qj(5,e);break;case 1:var c=e.stateNode;if(e.flags&4&&!U)if(a===null)c.componentDidMount();else{var j=e.elementType===e.type?a.memoizedProps:Ci(e.type,a.memoizedProps);c.componentDidUpdate(j,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var d=e.updateQueue;d!==null&&sh(e,d,c);break;case 3:var et=e.updateQueue;if(et!==null){if(a=null,e.child!==null)switch(e.child.tag){case 5:a=e.child.stateNode;break;case 1:a=e.child.stateNode}sh(e,et,a)}break;case 5:var at=e.stateNode;if(a===null&&e.flags&4){a=at;var st=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":st.autoFocus&&a.focus();break;case"img":st.src&&(a.src=st.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var ct=e.alternate;if(ct!==null){var ot=ct.memoizedState;if(ot!==null){var gt=ot.dehydrated;gt!==null&&bd(gt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$1(163))}U||e.flags&512&&Rj(e)}catch(ft){W(e,e.return,ft)}}if(e===o){V=null;break}if(a=e.sibling,a!==null){a.return=e.return,V=a;break}V=e.return}}function gk(o){for(;V!==null;){var e=V;if(e===o){V=null;break}var a=e.sibling;if(a!==null){a.return=e.return,V=a;break}V=e.return}}function jk(o){for(;V!==null;){var e=V;try{switch(e.tag){case 0:case 11:case 15:var a=e.return;try{Qj(4,e)}catch(st){W(e,a,st)}break;case 1:var c=e.stateNode;if(typeof c.componentDidMount=="function"){var j=e.return;try{c.componentDidMount()}catch(st){W(e,j,st)}}var d=e.return;try{Rj(e)}catch(st){W(e,d,st)}break;case 5:var et=e.return;try{Rj(e)}catch(st){W(e,et,st)}}}catch(st){W(e,e.return,st)}if(e===o){V=null;break}var at=e.sibling;if(at!==null){at.return=e.return,V=at;break}V=e.return}}var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K=0,Q=null,Y=null,Z=0,fj=0,ej=Uf(0),T=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R$1(){return K&6?B():Ak!==-1?Ak:Ak=B()}function yi(o){return o.mode&1?K&2&&Z!==0?Z&-Z:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(o=C,o!==0||(o=window.event,o=o===void 0?16:jd(o.type)),o):1}function gi(o,e,a,c){if(50<yk)throw yk=0,zk=null,Error(p$1(185));Ac(o,a,c),(!(K&2)||o!==Q)&&(o===Q&&(!(K&2)&&(qk|=a),T===4&&Ck(o,Z)),Dk(o,c),a===1&&K===0&&!(e.mode&1)&&(Gj=B()+500,fg&&jg()))}function Dk(o,e){var a=o.callbackNode;wc(o,e);var c=uc(o,o===Q?Z:0);if(c===0)a!==null&&bc(a),o.callbackNode=null,o.callbackPriority=0;else if(e=c&-c,o.callbackPriority!==e){if(a!=null&&bc(a),e===1)o.tag===0?ig(Ek.bind(null,o)):hg(Ek.bind(null,o)),Jf(function(){!(K&6)&&jg()}),a=null;else{switch(Dc(c)){case 1:a=fc;break;case 4:a=gc;break;case 16:a=hc;break;case 536870912:a=jc;break;default:a=hc}a=Fk(a,Gk.bind(null,o))}o.callbackPriority=e,o.callbackNode=a}}function Gk(o,e){if(Ak=-1,Bk=0,K&6)throw Error(p$1(327));var a=o.callbackNode;if(Hk()&&o.callbackNode!==a)return null;var c=uc(o,o===Q?Z:0);if(c===0)return null;if(c&30||c&o.expiredLanes||e)e=Ik(o,c);else{e=c;var j=K;K|=2;var d=Jk();(Q!==o||Z!==e)&&(uk=null,Gj=B()+500,Kk(o,e));do try{Lk();break}catch(at){Mk(o,at)}while(!0);$g(),mk.current=d,K=j,Y!==null?e=0:(Q=null,Z=0,e=T)}if(e!==0){if(e===2&&(j=xc(o),j!==0&&(c=j,e=Nk(o,j))),e===1)throw a=pk,Kk(o,0),Ck(o,c),Dk(o,B()),a;if(e===6)Ck(o,c);else{if(j=o.current.alternate,!(c&30)&&!Ok(j)&&(e=Ik(o,c),e===2&&(d=xc(o),d!==0&&(c=d,e=Nk(o,d))),e===1))throw a=pk,Kk(o,0),Ck(o,c),Dk(o,B()),a;switch(o.finishedWork=j,o.finishedLanes=c,e){case 0:case 1:throw Error(p$1(345));case 2:Pk(o,tk,uk);break;case 3:if(Ck(o,c),(c&130023424)===c&&(e=fk+500-B(),10<e)){if(uc(o,0)!==0)break;if(j=o.suspendedLanes,(j&c)!==c){R$1(),o.pingedLanes|=o.suspendedLanes&j;break}o.timeoutHandle=Ff(Pk.bind(null,o,tk,uk),e);break}Pk(o,tk,uk);break;case 4:if(Ck(o,c),(c&4194240)===c)break;for(e=o.eventTimes,j=-1;0<c;){var et=31-oc(c);d=1<<et,et=e[et],et>j&&(j=et),c&=~d}if(c=j,c=B()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*lk(c/1960))-c,10<c){o.timeoutHandle=Ff(Pk.bind(null,o,tk,uk),c);break}Pk(o,tk,uk);break;case 5:Pk(o,tk,uk);break;default:throw Error(p$1(329))}}}return Dk(o,B()),o.callbackNode===a?Gk.bind(null,o):null}function Nk(o,e){var a=sk;return o.current.memoizedState.isDehydrated&&(Kk(o,e).flags|=256),o=Ik(o,e),o!==2&&(e=tk,tk=a,e!==null&&Fj(e)),o}function Fj(o){tk===null?tk=o:tk.push.apply(tk,o)}function Ok(o){for(var e=o;;){if(e.flags&16384){var a=e.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var j=a[c],d=j.getSnapshot;j=j.value;try{if(!He(d(),j))return!1}catch{return!1}}}if(a=e.child,e.subtreeFlags&16384&&a!==null)a.return=e,e=a;else{if(e===o)break;for(;e.sibling===null;){if(e.return===null||e.return===o)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ck(o,e){for(e&=~rk,e&=~qk,o.suspendedLanes|=e,o.pingedLanes&=~e,o=o.expirationTimes;0<e;){var a=31-oc(e),c=1<<a;o[a]=-1,e&=~c}}function Ek(o){if(K&6)throw Error(p$1(327));Hk();var e=uc(o,0);if(!(e&1))return Dk(o,B()),null;var a=Ik(o,e);if(o.tag!==0&&a===2){var c=xc(o);c!==0&&(e=c,a=Nk(o,c))}if(a===1)throw a=pk,Kk(o,0),Ck(o,e),Dk(o,B()),a;if(a===6)throw Error(p$1(345));return o.finishedWork=o.current.alternate,o.finishedLanes=e,Pk(o,tk,uk),Dk(o,B()),null}function Qk(o,e){var a=K;K|=1;try{return o(e)}finally{K=a,K===0&&(Gj=B()+500,fg&&jg())}}function Rk(o){wk!==null&&wk.tag===0&&!(K&6)&&Hk();var e=K;K|=1;var a=ok.transition,c=C;try{if(ok.transition=null,C=1,o)return o()}finally{C=c,ok.transition=a,K=e,!(K&6)&&jg()}}function Hj(){fj=ej.current,E(ej)}function Kk(o,e){o.finishedWork=null,o.finishedLanes=0;var a=o.timeoutHandle;if(a!==-1&&(o.timeoutHandle=-1,Gf(a)),Y!==null)for(a=Y.return;a!==null;){var c=a;switch(wg(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&$f();break;case 3:zh(),E(Wf),E(H),Eh();break;case 5:Bh(c);break;case 4:zh();break;case 13:E(L);break;case 19:E(L);break;case 10:ah(c.type._context);break;case 22:case 23:Hj()}a=a.return}if(Q=o,Y=o=Pg(o.current,null),Z=fj=e,T=0,pk=null,rk=qk=rh=0,tk=sk=null,fh!==null){for(e=0;e<fh.length;e++)if(a=fh[e],c=a.interleaved,c!==null){a.interleaved=null;var j=c.next,d=a.pending;if(d!==null){var et=d.next;d.next=j,c.next=et}a.pending=c}fh=null}return o}function Mk(o,e){do{var a=Y;try{if($g(),Fh.current=Rh,Ih){for(var c=M.memoizedState;c!==null;){var j=c.queue;j!==null&&(j.pending=null),c=c.next}Ih=!1}if(Hh=0,O=N=M=null,Jh=!1,Kh=0,nk.current=null,a===null||a.return===null){T=1,pk=e,Y=null;break}e:{var d=o,et=a.return,at=a,st=e;if(e=Z,at.flags|=32768,st!==null&&typeof st=="object"&&typeof st.then=="function"){var ct=st,ot=at,gt=ot.tag;if(!(ot.mode&1)&&(gt===0||gt===11||gt===15)){var ft=ot.alternate;ft?(ot.updateQueue=ft.updateQueue,ot.memoizedState=ft.memoizedState,ot.lanes=ft.lanes):(ot.updateQueue=null,ot.memoizedState=null)}var yt=Ui(et);if(yt!==null){yt.flags&=-257,Vi(yt,et,at,d,e),yt.mode&1&&Si(d,ct,e),e=yt,st=ct;var vt=e.updateQueue;if(vt===null){var rt=new Set;rt.add(st),e.updateQueue=rt}else vt.add(st);break e}else{if(!(e&1)){Si(d,ct,e),tj();break e}st=Error(p$1(426))}}else if(I&&at.mode&1){var bt=Ui(et);if(bt!==null){!(bt.flags&65536)&&(bt.flags|=256),Vi(bt,et,at,d,e),Jg(Ji(st,at));break e}}d=st=Ji(st,at),T!==4&&(T=2),sk===null?sk=[d]:sk.push(d),d=et;do{switch(d.tag){case 3:d.flags|=65536,e&=-e,d.lanes|=e;var ht=Ni(d,st,e);ph(d,ht);break e;case 1:at=st;var wt=d.type,At=d.stateNode;if(!(d.flags&128)&&(typeof wt.getDerivedStateFromError=="function"||At!==null&&typeof At.componentDidCatch=="function"&&(Ri===null||!Ri.has(At)))){d.flags|=65536,e&=-e,d.lanes|=e;var Ct=Qi(d,at,e);ph(d,Ct);break e}}d=d.return}while(d!==null)}Sk(a)}catch(dt){e=dt,Y===a&&a!==null&&(Y=a=a.return);continue}break}while(!0)}function Jk(){var o=mk.current;return mk.current=Rh,o===null?Rh:o}function tj(){(T===0||T===3||T===2)&&(T=4),Q===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q,Z)}function Ik(o,e){var a=K;K|=2;var c=Jk();(Q!==o||Z!==e)&&(uk=null,Kk(o,e));do try{Tk();break}catch(j){Mk(o,j)}while(!0);if($g(),K=a,mk.current=c,Y!==null)throw Error(p$1(261));return Q=null,Z=0,T}function Tk(){for(;Y!==null;)Uk(Y)}function Lk(){for(;Y!==null&&!cc();)Uk(Y)}function Uk(o){var e=Vk(o.alternate,o,fj);o.memoizedProps=o.pendingProps,e===null?Sk(o):Y=e,nk.current=null}function Sk(o){var e=o;do{var a=e.alternate;if(o=e.return,e.flags&32768){if(a=Ij(a,e),a!==null){a.flags&=32767,Y=a;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{T=6,Y=null;return}}else if(a=Ej(a,e,fj),a!==null){Y=a;return}if(e=e.sibling,e!==null){Y=e;return}Y=e=o}while(e!==null);T===0&&(T=5)}function Pk(o,e,a){var c=C,j=ok.transition;try{ok.transition=null,C=1,Wk(o,e,a,c)}finally{ok.transition=j,C=c}return null}function Wk(o,e,a,c){do Hk();while(wk!==null);if(K&6)throw Error(p$1(327));a=o.finishedWork;var j=o.finishedLanes;if(a===null)return null;if(o.finishedWork=null,o.finishedLanes=0,a===o.current)throw Error(p$1(177));o.callbackNode=null,o.callbackPriority=0;var d=a.lanes|a.childLanes;if(Bc(o,d),o===Q&&(Y=Q=null,Z=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),d=(a.flags&15990)!==0,a.subtreeFlags&15990||d){d=ok.transition,ok.transition=null;var et=C;C=1;var at=K;K|=4,nk.current=null,Oj(o,a),dk(a,o),Oe(Df),dd=!!Cf,Df=Cf=null,o.current=a,hk(a),dc(),K=at,C=et,ok.transition=d}else o.current=a;if(vk&&(vk=!1,wk=o,xk=j),d=o.pendingLanes,d===0&&(Ri=null),mc(a.stateNode),Dk(o,B()),e!==null)for(c=o.onRecoverableError,a=0;a<e.length;a++)j=e[a],c(j.value,{componentStack:j.stack,digest:j.digest});if(Oi)throw Oi=!1,o=Pi,Pi=null,o;return xk&1&&o.tag!==0&&Hk(),d=o.pendingLanes,d&1?o===zk?yk++:(yk=0,zk=o):yk=0,jg(),null}function Hk(){if(wk!==null){var o=Dc(xk),e=ok.transition,a=C;try{if(ok.transition=null,C=16>o?16:o,wk===null)var c=!1;else{if(o=wk,wk=null,xk=0,K&6)throw Error(p$1(331));var j=K;for(K|=4,V=o.current;V!==null;){var d=V,et=d.child;if(V.flags&16){var at=d.deletions;if(at!==null){for(var st=0;st<at.length;st++){var ct=at[st];for(V=ct;V!==null;){var ot=V;switch(ot.tag){case 0:case 11:case 15:Pj(8,ot,d)}var gt=ot.child;if(gt!==null)gt.return=ot,V=gt;else for(;V!==null;){ot=V;var ft=ot.sibling,yt=ot.return;if(Sj(ot),ot===ct){V=null;break}if(ft!==null){ft.return=yt,V=ft;break}V=yt}}}var vt=d.alternate;if(vt!==null){var rt=vt.child;if(rt!==null){vt.child=null;do{var bt=rt.sibling;rt.sibling=null,rt=bt}while(rt!==null)}}V=d}}if(d.subtreeFlags&2064&&et!==null)et.return=d,V=et;else e:for(;V!==null;){if(d=V,d.flags&2048)switch(d.tag){case 0:case 11:case 15:Pj(9,d,d.return)}var ht=d.sibling;if(ht!==null){ht.return=d.return,V=ht;break e}V=d.return}}var wt=o.current;for(V=wt;V!==null;){et=V;var At=et.child;if(et.subtreeFlags&2064&&At!==null)At.return=et,V=At;else e:for(et=wt;V!==null;){if(at=V,at.flags&2048)try{switch(at.tag){case 0:case 11:case 15:Qj(9,at)}}catch(dt){W(at,at.return,dt)}if(at===et){V=null;break e}var Ct=at.sibling;if(Ct!==null){Ct.return=at.return,V=Ct;break e}V=at.return}}if(K=j,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,o)}catch{}c=!0}return c}finally{C=a,ok.transition=e}}return!1}function Xk(o,e,a){e=Ji(a,e),e=Ni(o,e,1),o=nh(o,e,1),e=R$1(),o!==null&&(Ac(o,1,e),Dk(o,e))}function W(o,e,a){if(o.tag===3)Xk(o,o,a);else for(;e!==null;){if(e.tag===3){Xk(e,o,a);break}else if(e.tag===1){var c=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ri===null||!Ri.has(c))){o=Ji(a,o),o=Qi(e,o,1),e=nh(e,o,1),o=R$1(),e!==null&&(Ac(e,1,o),Dk(e,o));break}}e=e.return}}function Ti(o,e,a){var c=o.pingCache;c!==null&&c.delete(e),e=R$1(),o.pingedLanes|=o.suspendedLanes&a,Q===o&&(Z&a)===a&&(T===4||T===3&&(Z&130023424)===Z&&500>B()-fk?Kk(o,0):rk|=a),Dk(o,e)}function Yk(o,e){e===0&&(o.mode&1?(e=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):e=1);var a=R$1();o=ih(o,e),o!==null&&(Ac(o,e,a),Dk(o,a))}function uj(o){var e=o.memoizedState,a=0;e!==null&&(a=e.retryLane),Yk(o,a)}function bk(o,e){var a=0;switch(o.tag){case 13:var c=o.stateNode,j=o.memoizedState;j!==null&&(a=j.retryLane);break;case 19:c=o.stateNode;break;default:throw Error(p$1(314))}c!==null&&c.delete(e),Yk(o,a)}var Vk;Vk=function(o,e,a){if(o!==null)if(o.memoizedProps!==e.pendingProps||Wf.current)dh$1=!0;else{if(!(o.lanes&a)&&!(e.flags&128))return dh$1=!1,yj(o,e,a);dh$1=!!(o.flags&131072)}else dh$1=!1,I&&e.flags&1048576&&ug(e,ng,e.index);switch(e.lanes=0,e.tag){case 2:var c=e.type;ij(o,e),o=e.pendingProps;var j=Yf(e,H.current);ch(e,a),j=Nh(null,e,c,o,j,a);var d=Sh();return e.flags|=1,typeof j=="object"&&j!==null&&typeof j.render=="function"&&j.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Zf(c)?(d=!0,cg(e)):d=!1,e.memoizedState=j.state!==null&&j.state!==void 0?j.state:null,kh(e),j.updater=Ei,e.stateNode=j,j._reactInternals=e,Ii(e,c,o,a),e=jj(null,e,c,!0,d,a)):(e.tag=0,I&&d&&vg(e),Xi(null,e,j,a),e=e.child),e;case 16:c=e.elementType;e:{switch(ij(o,e),o=e.pendingProps,j=c._init,c=j(c._payload),e.type=c,j=e.tag=Zk(c),o=Ci(c,o),j){case 0:e=cj(null,e,c,o,a);break e;case 1:e=hj(null,e,c,o,a);break e;case 11:e=Yi(null,e,c,o,a);break e;case 14:e=$i(null,e,c,Ci(c.type,o),a);break e}throw Error(p$1(306,c,""))}return e;case 0:return c=e.type,j=e.pendingProps,j=e.elementType===c?j:Ci(c,j),cj(o,e,c,j,a);case 1:return c=e.type,j=e.pendingProps,j=e.elementType===c?j:Ci(c,j),hj(o,e,c,j,a);case 3:e:{if(kj(e),o===null)throw Error(p$1(387));c=e.pendingProps,d=e.memoizedState,j=d.element,lh(o,e),qh(e,c,null,a);var et=e.memoizedState;if(c=et.element,d.isDehydrated)if(d={element:c,isDehydrated:!1,cache:et.cache,pendingSuspenseBoundaries:et.pendingSuspenseBoundaries,transitions:et.transitions},e.updateQueue.baseState=d,e.memoizedState=d,e.flags&256){j=Ji(Error(p$1(423)),e),e=lj(o,e,c,a,j);break e}else if(c!==j){j=Ji(Error(p$1(424)),e),e=lj(o,e,c,a,j);break e}else for(yg=Lf(e.stateNode.containerInfo.firstChild),xg=e,I=!0,zg=null,a=Vg(e,null,c,a),e.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Ig(),c===j){e=Zi(o,e,a);break e}Xi(o,e,c,a)}e=e.child}return e;case 5:return Ah(e),o===null&&Eg(e),c=e.type,j=e.pendingProps,d=o!==null?o.memoizedProps:null,et=j.children,Ef(c,j)?et=null:d!==null&&Ef(c,d)&&(e.flags|=32),gj(o,e),Xi(o,e,et,a),e.child;case 6:return o===null&&Eg(e),null;case 13:return oj(o,e,a);case 4:return yh(e,e.stateNode.containerInfo),c=e.pendingProps,o===null?e.child=Ug(e,null,c,a):Xi(o,e,c,a),e.child;case 11:return c=e.type,j=e.pendingProps,j=e.elementType===c?j:Ci(c,j),Yi(o,e,c,j,a);case 7:return Xi(o,e,e.pendingProps,a),e.child;case 8:return Xi(o,e,e.pendingProps.children,a),e.child;case 12:return Xi(o,e,e.pendingProps.children,a),e.child;case 10:e:{if(c=e.type._context,j=e.pendingProps,d=e.memoizedProps,et=j.value,G(Wg,c._currentValue),c._currentValue=et,d!==null)if(He(d.value,et)){if(d.children===j.children&&!Wf.current){e=Zi(o,e,a);break e}}else for(d=e.child,d!==null&&(d.return=e);d!==null;){var at=d.dependencies;if(at!==null){et=d.child;for(var st=at.firstContext;st!==null;){if(st.context===c){if(d.tag===1){st=mh(-1,a&-a),st.tag=2;var ct=d.updateQueue;if(ct!==null){ct=ct.shared;var ot=ct.pending;ot===null?st.next=st:(st.next=ot.next,ot.next=st),ct.pending=st}}d.lanes|=a,st=d.alternate,st!==null&&(st.lanes|=a),bh(d.return,a,e),at.lanes|=a;break}st=st.next}}else if(d.tag===10)et=d.type===e.type?null:d.child;else if(d.tag===18){if(et=d.return,et===null)throw Error(p$1(341));et.lanes|=a,at=et.alternate,at!==null&&(at.lanes|=a),bh(et,a,e),et=d.sibling}else et=d.child;if(et!==null)et.return=d;else for(et=d;et!==null;){if(et===e){et=null;break}if(d=et.sibling,d!==null){d.return=et.return,et=d;break}et=et.return}d=et}Xi(o,e,j.children,a),e=e.child}return e;case 9:return j=e.type,c=e.pendingProps.children,ch(e,a),j=eh(j),c=c(j),e.flags|=1,Xi(o,e,c,a),e.child;case 14:return c=e.type,j=Ci(c,e.pendingProps),j=Ci(c.type,j),$i(o,e,c,j,a);case 15:return bj(o,e,e.type,e.pendingProps,a);case 17:return c=e.type,j=e.pendingProps,j=e.elementType===c?j:Ci(c,j),ij(o,e),e.tag=1,Zf(c)?(o=!0,cg(e)):o=!1,ch(e,a),Gi(e,c,j),Ii(e,c,j,a),jj(null,e,c,!0,o,a);case 19:return xj(o,e,a);case 22:return dj(o,e,a)}throw Error(p$1(156,e.tag))};function Fk(o,e){return ac(o,e)}function $k(o,e,a,c){this.tag=o,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(o,e,a,c){return new $k(o,e,a,c)}function aj(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Zk(o){if(typeof o=="function")return aj(o)?1:0;if(o!=null){if(o=o.$$typeof,o===Da)return 11;if(o===Ga)return 14}return 2}function Pg(o,e){var a=o.alternate;return a===null?(a=Bg(o.tag,e,o.key,o.mode),a.elementType=o.elementType,a.type=o.type,a.stateNode=o.stateNode,a.alternate=o,o.alternate=a):(a.pendingProps=e,a.type=o.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=o.flags&14680064,a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,e=o.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},a.sibling=o.sibling,a.index=o.index,a.ref=o.ref,a}function Rg(o,e,a,c,j,d){var et=2;if(c=o,typeof o=="function")aj(o)&&(et=1);else if(typeof o=="string")et=5;else e:switch(o){case ya:return Tg(a.children,j,d,e);case za:et=8,j|=8;break;case Aa:return o=Bg(12,a,e,j|2),o.elementType=Aa,o.lanes=d,o;case Ea:return o=Bg(13,a,e,j),o.elementType=Ea,o.lanes=d,o;case Fa:return o=Bg(19,a,e,j),o.elementType=Fa,o.lanes=d,o;case Ia:return pj(a,j,d,e);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case Ba:et=10;break e;case Ca:et=9;break e;case Da:et=11;break e;case Ga:et=14;break e;case Ha:et=16,c=null;break e}throw Error(p$1(130,o==null?o:typeof o,""))}return e=Bg(et,a,e,j),e.elementType=o,e.type=c,e.lanes=d,e}function Tg(o,e,a,c){return o=Bg(7,o,c,e),o.lanes=a,o}function pj(o,e,a,c){return o=Bg(22,o,c,e),o.elementType=Ia,o.lanes=a,o.stateNode={isHidden:!1},o}function Qg(o,e,a){return o=Bg(6,o,null,e),o.lanes=a,o}function Sg(o,e,a){return e=Bg(4,o.children!==null?o.children:[],o.key,e),e.lanes=a,e.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},e}function al(o,e,a,c,j){this.tag=e,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=c,this.onRecoverableError=j,this.mutableSourceEagerHydrationData=null}function bl(o,e,a,c,j,d,et,at,st){return o=new al(o,e,a,at,st),e===1?(e=1,d===!0&&(e|=8)):e=0,d=Bg(3,null,null,e),o.current=d,d.stateNode=o,d.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(d),o}function cl(o,e,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:c==null?null:""+c,children:o,containerInfo:e,implementation:a}}function dl(o){if(!o)return Vf;o=o._reactInternals;e:{if(Vb(o)!==o||o.tag!==1)throw Error(p$1(170));var e=o;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Zf(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(p$1(171))}if(o.tag===1){var a=o.type;if(Zf(a))return bg(o,a,e)}return e}function el(o,e,a,c,j,d,et,at,st){return o=bl(a,c,!0,o,j,d,et,at,st),o.context=dl(null),a=o.current,c=R$1(),j=yi(a),d=mh(c,j),d.callback=e??null,nh(a,d,j),o.current.lanes=j,Ac(o,j,c),Dk(o,c),o}function fl(o,e,a,c){var j=e.current,d=R$1(),et=yi(j);return a=dl(a),e.context===null?e.context=a:e.pendingContext=a,e=mh(d,et),e.payload={element:o},c=c===void 0?null:c,c!==null&&(e.callback=c),o=nh(j,e,et),o!==null&&(gi(o,j,et,d),oh(o,j,et)),et}function gl(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function hl(o,e){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var a=o.retryLane;o.retryLane=a!==0&&a<e?a:e}}function il(o,e){hl(o,e),(o=o.alternate)&&hl(o,e)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(o){console.error(o)};function ll(o){this._internalRoot=o}ml.prototype.render=ll.prototype.render=function(o){var e=this._internalRoot;if(e===null)throw Error(p$1(409));fl(o,e,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var e=o.containerInfo;Rk(function(){fl(null,o,null,null)}),e[uf]=null}};function ml(o){this._internalRoot=o}ml.prototype.unstable_scheduleHydration=function(o){if(o){var e=Hc();o={blockedOn:null,target:o,priority:e};for(var a=0;a<Qc.length&&e!==0&&e<Qc[a].priority;a++);Qc.splice(a,0,o),a===0&&Vc(o)}};function nl(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function ol(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(o,e,a,c,j){if(j){if(typeof c=="function"){var d=c;c=function(){var ct=gl(et);d.call(ct)}}var et=el(e,c,o,0,null,!1,!1,"",pl);return o._reactRootContainer=et,o[uf]=et.current,sf(o.nodeType===8?o.parentNode:o),Rk(),et}for(;j=o.lastChild;)o.removeChild(j);if(typeof c=="function"){var at=c;c=function(){var ct=gl(st);at.call(ct)}}var st=bl(o,0,!1,null,null,!1,!1,"",pl);return o._reactRootContainer=st,o[uf]=st.current,sf(o.nodeType===8?o.parentNode:o),Rk(function(){fl(e,st,a,c)}),st}function rl(o,e,a,c,j){var d=a._reactRootContainer;if(d){var et=d;if(typeof j=="function"){var at=j;j=function(){var st=gl(et);at.call(st)}}fl(e,et,o,j)}else et=ql(a,e,o,j,c);return gl(et)}Ec=function(o){switch(o.tag){case 3:var e=o.stateNode;if(e.current.memoizedState.isDehydrated){var a=tc(e.pendingLanes);a!==0&&(Cc(e,a|1),Dk(e,B()),!(K&6)&&(Gj=B()+500,jg()))}break;case 13:Rk(function(){var c=ih(o,1);if(c!==null){var j=R$1();gi(c,o,1,j)}}),il(o,1)}};Fc=function(o){if(o.tag===13){var e=ih(o,134217728);if(e!==null){var a=R$1();gi(e,o,134217728,a)}il(o,134217728)}};Gc=function(o){if(o.tag===13){var e=yi(o),a=ih(o,e);if(a!==null){var c=R$1();gi(a,o,e,c)}il(o,e)}};Hc=function(){return C};Ic=function(o,e){var a=C;try{return C=o,e()}finally{C=a}};yb=function(o,e,a){switch(e){case"input":if(bb(o,a),e=a.name,a.type==="radio"&&e!=null){for(a=o;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<a.length;e++){var c=a[e];if(c!==o&&c.form===o.form){var j=Db(c);if(!j)throw Error(p$1(90));Wa(c),bb(c,j)}}}break;case"textarea":ib(o,a);break;case"select":e=a.value,e!=null&&fb(o,!!a.multiple,e,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=Zb(o),o===null?null:o.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(o,e){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(e))throw Error(p$1(200));return cl(o,e,null,a)};reactDom_production_min.createRoot=function(o,e){if(!nl(o))throw Error(p$1(299));var a=!1,c="",j=kl;return e!=null&&(e.unstable_strictMode===!0&&(a=!0),e.identifierPrefix!==void 0&&(c=e.identifierPrefix),e.onRecoverableError!==void 0&&(j=e.onRecoverableError)),e=bl(o,1,!1,null,null,a,!1,c,j),o[uf]=e.current,sf(o.nodeType===8?o.parentNode:o),new ll(e)};reactDom_production_min.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var e=o._reactInternals;if(e===void 0)throw typeof o.render=="function"?Error(p$1(188)):(o=Object.keys(o).join(","),Error(p$1(268,o)));return o=Zb(e),o=o===null?null:o.stateNode,o};reactDom_production_min.flushSync=function(o){return Rk(o)};reactDom_production_min.hydrate=function(o,e,a){if(!ol(e))throw Error(p$1(200));return rl(null,o,e,!0,a)};reactDom_production_min.hydrateRoot=function(o,e,a){if(!nl(o))throw Error(p$1(405));var c=a!=null&&a.hydratedSources||null,j=!1,d="",et=kl;if(a!=null&&(a.unstable_strictMode===!0&&(j=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onRecoverableError!==void 0&&(et=a.onRecoverableError)),e=el(e,null,o,1,a??null,j,!1,d,et),o[uf]=e.current,sf(o),c)for(o=0;o<c.length;o++)a=c[o],j=a._getVersion,j=j(a._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[a,j]:e.mutableSourceEagerHydrationData.push(a,j);return new ml(e)};reactDom_production_min.render=function(o,e,a){if(!ol(e))throw Error(p$1(200));return rl(null,o,e,!1,a)};reactDom_production_min.unmountComponentAtNode=function(o){if(!ol(o))throw Error(p$1(40));return o._reactRootContainer?(Rk(function(){rl(null,null,o,!1,function(){o._reactRootContainer=null,o[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(o,e,a,c){if(!ol(a))throw Error(p$1(200));if(o==null||o._reactInternals===void 0)throw Error(p$1(38));return rl(o,e,a,!1,c)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(o){console.error(o)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports;const ReactDOM=getDefaultExportFromCjs$1(reactDomExports);var m=reactDomExports;client.createRoot=m.createRoot,client.hydrateRoot=m.hydrateRoot;/*! @azure/msal-common v14.15.0 2024-09-20 */const Constants$1={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_RESPONSE_TYPE:"code",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",FRAGMENT_RESPONSE_MODE:"fragment",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],TOKEN_RESPONSE_TYPE:"token",ID_TOKEN_RESPONSE_TYPE:"id_token",SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},HttpStatus={SUCCESS:200,SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR:400,CLIENT_ERROR_RANGE_START:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,REQUEST_TIMEOUT:408,TOO_MANY_REQUESTS:429,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR:500,SERVER_ERROR_RANGE_START:500,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,SERVER_ERROR_RANGE_END:599,MULTI_SIDED_ERROR:600},OIDC_DEFAULT_SCOPES=[Constants$1.OPENID_SCOPE,Constants$1.PROFILE_SCOPE,Constants$1.OFFLINE_ACCESS_SCOPE],OIDC_SCOPES=[...OIDC_DEFAULT_SCOPES,Constants$1.EMAIL_SCOPE],HeaderNames={CONTENT_TYPE:"Content-Type",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},PersistentCacheKeys={ID_TOKEN:"idtoken",CLIENT_INFO:"client.info",ADAL_ID_TOKEN:"adal.idtoken",ERROR:"error",ERROR_DESC:"error.description",ACTIVE_ACCOUNT:"active-account",ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},AADAuthorityConstants={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},ClaimsRequestKeys={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},PromptValue={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},CodeChallengeMethodValues={PLAIN:"plain",S256:"S256"},ServerResponseType={QUERY:"query",FRAGMENT:"fragment"},ResponseMode={...ServerResponseType,FORM_POST:"form_post"},GrantType={IMPLICIT_GRANT:"implicit",AUTHORIZATION_CODE_GRANT:"authorization_code",CLIENT_CREDENTIALS_GRANT:"client_credentials",RESOURCE_OWNER_PASSWORD_GRANT:"password",REFRESH_TOKEN_GRANT:"refresh_token",DEVICE_CODE_GRANT:"device_code",JWT_BEARER:"urn:ietf:params:oauth:grant-type:jwt-bearer"},CacheAccountType={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",MSAV1_ACCOUNT_TYPE:"MSA",GENERIC_ACCOUNT_TYPE:"Generic"},Separators={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},CredentialType={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},APP_METADATA="appmetadata",CLIENT_INFO="client_info",THE_FAMILY_ID="1",AUTHORITY_METADATA_CONSTANTS={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},AuthorityMetadataSource={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},SERVER_TELEM_CONSTANTS={SCHEMA_VERSION:5,MAX_CUR_HEADER_BYTES:80,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},AuthenticationScheme={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},ThrottlingConstants={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},Errors={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},PasswordGrantConstants={username:"username",password:"password"},ResponseCodes={httpSuccess:200,httpBadRequest:400},RegionDiscoverySources={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},RegionDiscoveryOutcomes={CONFIGURED_MATCHES_DETECTED:"1",CONFIGURED_NO_AUTO_DETECTION:"2",CONFIGURED_NOT_DETECTED:"3",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},CacheOutcome={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},JsonWebTokenTypes={Jwt:"JWT",Jwk:"JWK",Pop:"pop"},DEFAULT_TOKEN_RENEWAL_OFFSET_SEC=300;/*! @azure/msal-common v14.15.0 2024-09-20 */const unexpectedError="unexpected_error",postRequestFailed$1="post_request_failed";/*! @azure/msal-common v14.15.0 2024-09-20 */const AuthErrorMessages={[unexpectedError]:"Unexpected error in authentication.",[postRequestFailed$1]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."};class AuthError extends Error{constructor(e,a,c){const j=a?`${e}: ${a}`:e;super(j),Object.setPrototypeOf(this,AuthError.prototype),this.errorCode=e||Constants$1.EMPTY_STRING,this.errorMessage=a||Constants$1.EMPTY_STRING,this.subError=c||Constants$1.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}function createAuthError(o,e){return new AuthError(o,e?`${AuthErrorMessages[o]} ${e}`:AuthErrorMessages[o])}/*! @azure/msal-common v14.15.0 2024-09-20 */const clientInfoDecodingError="client_info_decoding_error",clientInfoEmptyError="client_info_empty_error",tokenParsingError="token_parsing_error",nullOrEmptyToken="null_or_empty_token",endpointResolutionError="endpoints_resolution_error",networkError="network_error",openIdConfigError="openid_config_error",hashNotDeserialized="hash_not_deserialized",invalidState="invalid_state",stateMismatch="state_mismatch",stateNotFound="state_not_found",nonceMismatch="nonce_mismatch",authTimeNotFound="auth_time_not_found",maxAgeTranspired="max_age_transpired",multipleMatchingTokens="multiple_matching_tokens",multipleMatchingAccounts="multiple_matching_accounts",multipleMatchingAppMetadata="multiple_matching_appMetadata",requestCannotBeMade="request_cannot_be_made",cannotRemoveEmptyScope="cannot_remove_empty_scope",cannotAppendScopeSet="cannot_append_scopeset",emptyInputScopeSet="empty_input_scopeset",deviceCodePollingCancelled="device_code_polling_cancelled",deviceCodeExpired="device_code_expired",deviceCodeUnknownError="device_code_unknown_error",noAccountInSilentRequest="no_account_in_silent_request",invalidCacheRecord="invalid_cache_record",invalidCacheEnvironment="invalid_cache_environment",noAccountFound="no_account_found",noCryptoObject="no_crypto_object",unexpectedCredentialType="unexpected_credential_type",invalidAssertion="invalid_assertion",invalidClientCredential="invalid_client_credential",tokenRefreshRequired="token_refresh_required",userTimeoutReached="user_timeout_reached",tokenClaimsCnfRequiredForSignedJwt="token_claims_cnf_required_for_signedjwt",authorizationCodeMissingFromServerResponse="authorization_code_missing_from_server_response",bindingKeyNotRemoved="binding_key_not_removed",endSessionEndpointNotSupported="end_session_endpoint_not_supported",keyIdMissing="key_id_missing",noNetworkConnectivity$1="no_network_connectivity",userCanceled="user_canceled",missingTenantIdError="missing_tenant_id_error",methodNotImplemented="method_not_implemented",nestedAppAuthBridgeDisabled="nested_app_auth_bridge_disabled";/*! @azure/msal-common v14.15.0 2024-09-20 */const ClientAuthErrorMessages={[clientInfoDecodingError]:"The client info could not be parsed/decoded correctly",[clientInfoEmptyError]:"The client info was empty",[tokenParsingError]:"Token cannot be parsed",[nullOrEmptyToken]:"The token is null or empty",[endpointResolutionError]:"Endpoints cannot be resolved",[networkError]:"Network request failed",[openIdConfigError]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[hashNotDeserialized]:"The hash parameters could not be deserialized",[invalidState]:"State was not the expected format",[stateMismatch]:"State mismatch error",[stateNotFound]:"State not found",[nonceMismatch]:"Nonce mismatch error",[authTimeNotFound]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[maxAgeTranspired]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[multipleMatchingTokens]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[multipleMatchingAccounts]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[multipleMatchingAppMetadata]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[requestCannotBeMade]:"Token request cannot be made without authorization code or refresh token.",[cannotRemoveEmptyScope]:"Cannot remove null or empty scope from ScopeSet",[cannotAppendScopeSet]:"Cannot append ScopeSet",[emptyInputScopeSet]:"Empty input ScopeSet cannot be processed",[deviceCodePollingCancelled]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[deviceCodeExpired]:"Device code is expired.",[deviceCodeUnknownError]:"Device code stopped polling for unknown reasons.",[noAccountInSilentRequest]:"Please pass an account object, silent flow is not supported without account information",[invalidCacheRecord]:"Cache record object was null or undefined.",[invalidCacheEnvironment]:"Invalid environment when attempting to create cache entry",[noAccountFound]:"No account found in cache for given key.",[noCryptoObject]:"No crypto object detected.",[unexpectedCredentialType]:"Unexpected credential type.",[invalidAssertion]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[invalidClientCredential]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[tokenRefreshRequired]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[userTimeoutReached]:"User defined timeout for device code polling reached",[tokenClaimsCnfRequiredForSignedJwt]:"Cannot generate a POP jwt if the token_claims are not populated",[authorizationCodeMissingFromServerResponse]:"Server response does not contain an authorization code to proceed",[bindingKeyNotRemoved]:"Could not remove the credential's binding key from storage.",[endSessionEndpointNotSupported]:"The provided authority does not support logout",[keyIdMissing]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[noNetworkConnectivity$1]:"No network connectivity. Check your internet connection.",[userCanceled]:"User cancelled the flow.",[missingTenantIdError]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[methodNotImplemented]:"This method has not been implemented",[nestedAppAuthBridgeDisabled]:"The nested app auth bridge is disabled"};class ClientAuthError extends AuthError{constructor(e,a){super(e,a?`${ClientAuthErrorMessages[e]}: ${a}`:ClientAuthErrorMessages[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,ClientAuthError.prototype)}}function createClientAuthError(o,e){return new ClientAuthError(o,e)}/*! @azure/msal-common v14.15.0 2024-09-20 */const DEFAULT_CRYPTO_IMPLEMENTATION={createNewGuid:()=>{throw createClientAuthError(methodNotImplemented)},base64Decode:()=>{throw createClientAuthError(methodNotImplemented)},base64Encode:()=>{throw createClientAuthError(methodNotImplemented)},base64UrlEncode:()=>{throw createClientAuthError(methodNotImplemented)},encodeKid:()=>{throw createClientAuthError(methodNotImplemented)},async getPublicKeyThumbprint(){throw createClientAuthError(methodNotImplemented)},async removeTokenBindingKey(){throw createClientAuthError(methodNotImplemented)},async clearKeystore(){throw createClientAuthError(methodNotImplemented)},async signJwt(){throw createClientAuthError(methodNotImplemented)},async hashString(){throw createClientAuthError(methodNotImplemented)}};/*! @azure/msal-common v14.15.0 2024-09-20 */var LogLevel;(function(o){o[o.Error=0]="Error",o[o.Warning=1]="Warning",o[o.Info=2]="Info",o[o.Verbose=3]="Verbose",o[o.Trace=4]="Trace"})(LogLevel||(LogLevel={}));class Logger{constructor(e,a,c){this.level=LogLevel.Info;const j=()=>{},d=e||Logger.createDefaultLoggerOptions();this.localCallback=d.loggerCallback||j,this.piiLoggingEnabled=d.piiLoggingEnabled||!1,this.level=typeof d.logLevel=="number"?d.logLevel:LogLevel.Info,this.correlationId=d.correlationId||Constants$1.EMPTY_STRING,this.packageName=a||Constants$1.EMPTY_STRING,this.packageVersion=c||Constants$1.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:LogLevel.Info}}clone(e,a,c){return new Logger({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:c||this.correlationId},e,a)}logMessage(e,a){if(a.logLevel>this.level||!this.piiLoggingEnabled&&a.containsPii)return;const d=`${`[${new Date().toUTCString()}] : [${a.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${LogLevel[a.logLevel]} - ${e}`;this.executeCallback(a.logLevel,d,a.containsPii||!1)}executeCallback(e,a,c){this.localCallback&&this.localCallback(e,a,c)}error(e,a){this.logMessage(e,{logLevel:LogLevel.Error,containsPii:!1,correlationId:a||Constants$1.EMPTY_STRING})}errorPii(e,a){this.logMessage(e,{logLevel:LogLevel.Error,containsPii:!0,correlationId:a||Constants$1.EMPTY_STRING})}warning(e,a){this.logMessage(e,{logLevel:LogLevel.Warning,containsPii:!1,correlationId:a||Constants$1.EMPTY_STRING})}warningPii(e,a){this.logMessage(e,{logLevel:LogLevel.Warning,containsPii:!0,correlationId:a||Constants$1.EMPTY_STRING})}info(e,a){this.logMessage(e,{logLevel:LogLevel.Info,containsPii:!1,correlationId:a||Constants$1.EMPTY_STRING})}infoPii(e,a){this.logMessage(e,{logLevel:LogLevel.Info,containsPii:!0,correlationId:a||Constants$1.EMPTY_STRING})}verbose(e,a){this.logMessage(e,{logLevel:LogLevel.Verbose,containsPii:!1,correlationId:a||Constants$1.EMPTY_STRING})}verbosePii(e,a){this.logMessage(e,{logLevel:LogLevel.Verbose,containsPii:!0,correlationId:a||Constants$1.EMPTY_STRING})}trace(e,a){this.logMessage(e,{logLevel:LogLevel.Trace,containsPii:!1,correlationId:a||Constants$1.EMPTY_STRING})}tracePii(e,a){this.logMessage(e,{logLevel:LogLevel.Trace,containsPii:!0,correlationId:a||Constants$1.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}/*! @azure/msal-common v14.15.0 2024-09-20 */const name$3="@azure/msal-common",version$3="14.15.0";/*! @azure/msal-common v14.15.0 2024-09-20 */const AzureCloudInstance={None:"none",AzurePublic:"https://login.microsoftonline.com",AzurePpe:"https://login.windows-ppe.net",AzureChina:"https://login.chinacloudapi.cn",AzureGermany:"https://login.microsoftonline.de",AzureUsGovernment:"https://login.microsoftonline.us"};/*! @azure/msal-common v14.15.0 2024-09-20 */function extractTokenClaims(o,e){const a=getJWSPayload(o);try{const c=e(a);return JSON.parse(c)}catch{throw createClientAuthError(tokenParsingError)}}function getJWSPayload(o){if(!o)throw createClientAuthError(nullOrEmptyToken);const a=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(o);if(!a||a.length<4)throw createClientAuthError(tokenParsingError);return a[2]}function checkMaxAge(o,e){if(e===0||Date.now()-3e5>o+e)throw createClientAuthError(maxAgeTranspired)}/*! @azure/msal-common v14.15.0 2024-09-20 */function nowSeconds(){return Math.round(new Date().getTime()/1e3)}function isTokenExpired(o,e){const a=Number(o)||0;return nowSeconds()+e>a}function wasClockTurnedBack(o){return Number(o)>nowSeconds()}/*! @azure/msal-common v14.15.0 2024-09-20 */function generateCredentialKey(o){return[generateAccountId(o),generateCredentialId(o),generateTarget(o),generateClaimsHash(o),generateScheme(o)].join(Separators.CACHE_KEY_SEPARATOR).toLowerCase()}function createIdTokenEntity(o,e,a,c,j){return{credentialType:CredentialType.ID_TOKEN,homeAccountId:o,environment:e,clientId:c,secret:a,realm:j}}function createAccessTokenEntity(o,e,a,c,j,d,et,at,st,ct,ot,gt,ft,yt,vt){var bt,ht;const rt={homeAccountId:o,credentialType:CredentialType.ACCESS_TOKEN,secret:a,cachedAt:nowSeconds().toString(),expiresOn:et.toString(),extendedExpiresOn:at.toString(),environment:e,clientId:c,realm:j,target:d,tokenType:ot||AuthenticationScheme.BEARER};if(gt&&(rt.userAssertionHash=gt),ct&&(rt.refreshOn=ct.toString()),yt&&(rt.requestedClaims=yt,rt.requestedClaimsHash=vt),((bt=rt.tokenType)==null?void 0:bt.toLowerCase())!==AuthenticationScheme.BEARER.toLowerCase())switch(rt.credentialType=CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME,rt.tokenType){case AuthenticationScheme.POP:const wt=extractTokenClaims(a,st);if(!((ht=wt==null?void 0:wt.cnf)!=null&&ht.kid))throw createClientAuthError(tokenClaimsCnfRequiredForSignedJwt);rt.keyId=wt.cnf.kid;break;case AuthenticationScheme.SSH:rt.keyId=ft}return rt}function createRefreshTokenEntity(o,e,a,c,j,d,et){const at={credentialType:CredentialType.REFRESH_TOKEN,homeAccountId:o,environment:e,clientId:c,secret:a};return d&&(at.userAssertionHash=d),j&&(at.familyId=j),et&&(at.expiresOn=et.toString()),at}function isCredentialEntity(o){return o.hasOwnProperty("homeAccountId")&&o.hasOwnProperty("environment")&&o.hasOwnProperty("credentialType")&&o.hasOwnProperty("clientId")&&o.hasOwnProperty("secret")}function isAccessTokenEntity(o){return o?isCredentialEntity(o)&&o.hasOwnProperty("realm")&&o.hasOwnProperty("target")&&(o.credentialType===CredentialType.ACCESS_TOKEN||o.credentialType===CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}function isIdTokenEntity(o){return o?isCredentialEntity(o)&&o.hasOwnProperty("realm")&&o.credentialType===CredentialType.ID_TOKEN:!1}function isRefreshTokenEntity(o){return o?isCredentialEntity(o)&&o.credentialType===CredentialType.REFRESH_TOKEN:!1}function generateAccountId(o){return[o.homeAccountId,o.environment].join(Separators.CACHE_KEY_SEPARATOR).toLowerCase()}function generateCredentialId(o){const e=o.credentialType===CredentialType.REFRESH_TOKEN&&o.familyId||o.clientId;return[o.credentialType,e,o.realm||""].join(Separators.CACHE_KEY_SEPARATOR).toLowerCase()}function generateTarget(o){return(o.target||"").toLowerCase()}function generateClaimsHash(o){return(o.requestedClaimsHash||"").toLowerCase()}function generateScheme(o){return o.tokenType&&o.tokenType.toLowerCase()!==AuthenticationScheme.BEARER.toLowerCase()?o.tokenType.toLowerCase():""}function isServerTelemetryEntity(o,e){const a=o.indexOf(SERVER_TELEM_CONSTANTS.CACHE_KEY)===0;let c=!0;return e&&(c=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),a&&c}function isThrottlingEntity(o,e){let a=!1;o&&(a=o.indexOf(ThrottlingConstants.THROTTLING_PREFIX)===0);let c=!0;return e&&(c=e.hasOwnProperty("throttleTime")),a&&c}function generateAppMetadataKey({environment:o,clientId:e}){return[APP_METADATA,o,e].join(Separators.CACHE_KEY_SEPARATOR).toLowerCase()}function isAppMetadataEntity(o,e){return e?o.indexOf(APP_METADATA)===0&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment"):!1}function isAuthorityMetadataEntity(o,e){return e?o.indexOf(AUTHORITY_METADATA_CONSTANTS.CACHE_KEY)===0&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri"):!1}function generateAuthorityMetadataExpiresAt(){return nowSeconds()+AUTHORITY_METADATA_CONSTANTS.REFRESH_TIME_SECONDS}function updateAuthorityEndpointMetadata(o,e,a){o.authorization_endpoint=e.authorization_endpoint,o.token_endpoint=e.token_endpoint,o.end_session_endpoint=e.end_session_endpoint,o.issuer=e.issuer,o.endpointsFromNetwork=a,o.jwks_uri=e.jwks_uri}function updateCloudDiscoveryMetadata(o,e,a){o.aliases=e.aliases,o.preferred_cache=e.preferred_cache,o.preferred_network=e.preferred_network,o.aliasesFromNetwork=a}function isAuthorityMetadataExpired(o){return o.expiresAt<=nowSeconds()}/*! @azure/msal-common v14.15.0 2024-09-20 */const redirectUriEmpty="redirect_uri_empty",claimsRequestParsingError="claims_request_parsing_error",authorityUriInsecure="authority_uri_insecure",urlParseError="url_parse_error",urlEmptyError="empty_url_error",emptyInputScopesError="empty_input_scopes_error",invalidPromptValue="invalid_prompt_value",invalidClaims="invalid_claims",tokenRequestEmpty="token_request_empty",logoutRequestEmpty="logout_request_empty",invalidCodeChallengeMethod="invalid_code_challenge_method",pkceParamsMissing="pkce_params_missing",invalidCloudDiscoveryMetadata="invalid_cloud_discovery_metadata",invalidAuthorityMetadata="invalid_authority_metadata",untrustedAuthority="untrusted_authority",missingSshJwk="missing_ssh_jwk",missingSshKid="missing_ssh_kid",missingNonceAuthenticationHeader="missing_nonce_authentication_header",invalidAuthenticationHeader="invalid_authentication_header",cannotSetOIDCOptions="cannot_set_OIDCOptions",cannotAllowNativeBroker="cannot_allow_native_broker",authorityMismatch="authority_mismatch";/*! @azure/msal-common v14.15.0 2024-09-20 */const ClientConfigurationErrorMessages={[redirectUriEmpty]:"A redirect URI is required for all calls, and none has been set.",[claimsRequestParsingError]:"Could not parse the given claims request object.",[authorityUriInsecure]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[urlParseError]:"URL could not be parsed into appropriate segments.",[urlEmptyError]:"URL was empty or null.",[emptyInputScopesError]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[invalidPromptValue]:"Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest",[invalidClaims]:"Given claims parameter must be a stringified JSON object.",[tokenRequestEmpty]:"Token request was empty and not found in cache.",[logoutRequestEmpty]:"The logout request was null or undefined.",[invalidCodeChallengeMethod]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[pkceParamsMissing]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[invalidCloudDiscoveryMetadata]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[invalidAuthorityMetadata]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[untrustedAuthority]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[missingSshJwk]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[missingSshKid]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[missingNonceAuthenticationHeader]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[invalidAuthenticationHeader]:"Invalid authentication header provided",[cannotSetOIDCOptions]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[cannotAllowNativeBroker]:"Cannot set allowNativeBroker parameter to true when not in AAD protocol mode.",[authorityMismatch]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."};class ClientConfigurationError extends AuthError{constructor(e){super(e,ClientConfigurationErrorMessages[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,ClientConfigurationError.prototype)}}function createClientConfigurationError(o){return new ClientConfigurationError(o)}/*! @azure/msal-common v14.15.0 2024-09-20 */class StringUtils{static isEmptyObj(e){if(e)try{const a=JSON.parse(e);return Object.keys(a).length===0}catch{}return!0}static startsWith(e,a){return e.indexOf(a)===0}static endsWith(e,a){return e.length>=a.length&&e.lastIndexOf(a)===e.length-a.length}static queryStringToObject(e){const a={},c=e.split("&"),j=d=>decodeURIComponent(d.replace(/\+/g," "));return c.forEach(d=>{if(d.trim()){const[et,at]=d.split(/=(.+)/g,2);et&&at&&(a[j(et)]=j(at))}}),a}static trimArrayEntries(e){return e.map(a=>a.trim())}static removeEmptyStringsFromArray(e){return e.filter(a=>!!a)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,a){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(a)}}/*! @azure/msal-common v14.15.0 2024-09-20 */class ScopeSet{constructor(e){const a=e?StringUtils.trimArrayEntries([...e]):[],c=a?StringUtils.removeEmptyStringsFromArray(a):[];this.validateInputScopes(c),this.scopes=new Set,c.forEach(j=>this.scopes.add(j))}static fromString(e){const c=(e||Constants$1.EMPTY_STRING).split(" ");return new ScopeSet(c)}static createSearchScopes(e){const a=new ScopeSet(e);return a.containsOnlyOIDCScopes()?a.removeScope(Constants$1.OFFLINE_ACCESS_SCOPE):a.removeOIDCScopes(),a}validateInputScopes(e){if(!e||e.length<1)throw createClientConfigurationError(emptyInputScopesError)}containsScope(e){const a=this.printScopesLowerCase().split(" "),c=new ScopeSet(a);return e?c.scopes.has(e.toLowerCase()):!1}containsScopeSet(e){return!e||e.scopes.size<=0?!1:this.scopes.size>=e.scopes.size&&e.asArray().every(a=>this.containsScope(a))}containsOnlyOIDCScopes(){let e=0;return OIDC_SCOPES.forEach(a=>{this.containsScope(a)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(a=>this.appendScope(a))}catch{throw createClientAuthError(cannotAppendScopeSet)}}removeScope(e){if(!e)throw createClientAuthError(cannotRemoveEmptyScope);this.scopes.delete(e.trim())}removeOIDCScopes(){OIDC_SCOPES.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw createClientAuthError(emptyInputScopeSet);const a=new Set;return e.scopes.forEach(c=>a.add(c.toLowerCase())),this.scopes.forEach(c=>a.add(c.toLowerCase())),a}intersectingScopeSets(e){if(!e)throw createClientAuthError(emptyInputScopeSet);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();const a=this.unionScopeSets(e),c=e.getScopeCount(),j=this.getScopeCount();return a.size<j+c}getScopeCount(){return this.scopes.size}asArray(){const e=[];return this.scopes.forEach(a=>e.push(a)),e}printScopes(){return this.scopes?this.asArray().join(" "):Constants$1.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}/*! @azure/msal-common v14.15.0 2024-09-20 */function buildClientInfo(o,e){if(!o)throw createClientAuthError(clientInfoEmptyError);try{const a=e(o);return JSON.parse(a)}catch{throw createClientAuthError(clientInfoDecodingError)}}function buildClientInfoFromHomeAccountId(o){if(!o)throw createClientAuthError(clientInfoDecodingError);const e=o.split(Separators.CLIENT_INFO_SEPARATOR,2);return{uid:e[0],utid:e.length<2?Constants$1.EMPTY_STRING:e[1]}}/*! @azure/msal-common v14.15.0 2024-09-20 */function tenantIdMatchesHomeTenant(o,e){return!!o&&!!e&&o===e.split(".")[1]}function buildTenantProfile(o,e,a,c){if(c){const{oid:j,sub:d,tid:et,name:at,tfp:st,acr:ct}=c,ot=et||st||ct||"";return{tenantId:ot,localAccountId:j||d||"",name:at,isHomeTenant:tenantIdMatchesHomeTenant(ot,o)}}else return{tenantId:a,localAccountId:e,isHomeTenant:tenantIdMatchesHomeTenant(a,o)}}function updateAccountTenantProfileData(o,e,a,c){let j=o;if(e){const{isHomeTenant:d,...et}=e;j={...o,...et}}if(a){const{isHomeTenant:d,...et}=buildTenantProfile(o.homeAccountId,o.localAccountId,o.tenantId,a);return j={...j,...et,idTokenClaims:a,idToken:c},j}return j}/*! @azure/msal-common v14.15.0 2024-09-20 */const AuthorityType={Default:0,Adfs:1,Dsts:2,Ciam:3};/*! @azure/msal-common v14.15.0 2024-09-20 */function getTenantIdFromIdTokenClaims(o){return o&&(o.tid||o.tfp||o.acr)||null}/*! @azure/msal-common v14.15.0 2024-09-20 */const ProtocolMode={AAD:"AAD",OIDC:"OIDC"};/*! @azure/msal-common v14.15.0 2024-09-20 */class AccountEntity{generateAccountId(){return[this.homeAccountId,this.environment].join(Separators.CACHE_KEY_SEPARATOR).toLowerCase()}generateAccountKey(){return AccountEntity.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})}getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e]))}}isSingleTenant(){return!this.tenantProfiles}static generateAccountCacheKey(e){const a=e.homeAccountId.split(".")[1];return[e.homeAccountId,e.environment||"",a||e.tenantId||""].join(Separators.CACHE_KEY_SEPARATOR).toLowerCase()}static createAccount(e,a,c){var ct,ot,gt,ft,yt,vt;const j=new AccountEntity;a.authorityType===AuthorityType.Adfs?j.authorityType=CacheAccountType.ADFS_ACCOUNT_TYPE:a.protocolMode===ProtocolMode.AAD?j.authorityType=CacheAccountType.MSSTS_ACCOUNT_TYPE:j.authorityType=CacheAccountType.GENERIC_ACCOUNT_TYPE;let d;e.clientInfo&&c&&(d=buildClientInfo(e.clientInfo,c)),j.clientInfo=e.clientInfo,j.homeAccountId=e.homeAccountId,j.nativeAccountId=e.nativeAccountId;const et=e.environment||a&&a.getPreferredCache();if(!et)throw createClientAuthError(invalidCacheEnvironment);j.environment=et,j.realm=(d==null?void 0:d.utid)||getTenantIdFromIdTokenClaims(e.idTokenClaims)||"",j.localAccountId=(d==null?void 0:d.uid)||((ct=e.idTokenClaims)==null?void 0:ct.oid)||((ot=e.idTokenClaims)==null?void 0:ot.sub)||"";const at=((gt=e.idTokenClaims)==null?void 0:gt.preferred_username)||((ft=e.idTokenClaims)==null?void 0:ft.upn),st=(yt=e.idTokenClaims)!=null&&yt.emails?e.idTokenClaims.emails[0]:null;if(j.username=at||st||"",j.name=((vt=e.idTokenClaims)==null?void 0:vt.name)||"",j.cloudGraphHostName=e.cloudGraphHostName,j.msGraphHost=e.msGraphHost,e.tenantProfiles)j.tenantProfiles=e.tenantProfiles;else{const rt=buildTenantProfile(e.homeAccountId,j.localAccountId,j.realm,e.idTokenClaims);j.tenantProfiles=[rt]}return j}static createFromAccountInfo(e,a,c){var d;const j=new AccountEntity;return j.authorityType=e.authorityType||CacheAccountType.GENERIC_ACCOUNT_TYPE,j.homeAccountId=e.homeAccountId,j.localAccountId=e.localAccountId,j.nativeAccountId=e.nativeAccountId,j.realm=e.tenantId,j.environment=e.environment,j.username=e.username,j.name=e.name,j.cloudGraphHostName=a,j.msGraphHost=c,j.tenantProfiles=Array.from(((d=e.tenantProfiles)==null?void 0:d.values())||[]),j}static generateHomeAccountId(e,a,c,j,d){if(!(a===AuthorityType.Adfs||a===AuthorityType.Dsts)){if(e)try{const et=buildClientInfo(e,j.base64Decode);if(et.uid&&et.utid)return`${et.uid}.${et.utid}`}catch{}c.warning("No client info in response")}return(d==null?void 0:d.sub)||""}static isAccountEntity(e){return e?e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(e,a,c){if(!e||!a)return!1;let j=!0;if(c){const d=e.idTokenClaims||{},et=a.idTokenClaims||{};j=d.iat===et.iat&&d.nonce===et.nonce}return e.homeAccountId===a.homeAccountId&&e.localAccountId===a.localAccountId&&e.username===a.username&&e.tenantId===a.tenantId&&e.environment===a.environment&&e.nativeAccountId===a.nativeAccountId&&j}}/*! @azure/msal-common v14.15.0 2024-09-20 */function stripLeadingHashOrQuery(o){return o.startsWith("#/")?o.substring(2):o.startsWith("#")||o.startsWith("?")?o.substring(1):o}function getDeserializedResponse(o){if(!o||o.indexOf("=")<0)return null;try{const e=stripLeadingHashOrQuery(o),a=Object.fromEntries(new URLSearchParams(e));if(a.code||a.error||a.error_description||a.state)return a}catch{throw createClientAuthError(hashNotDeserialized)}return null}/*! @azure/msal-common v14.15.0 2024-09-20 */class UrlString{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw createClientConfigurationError(urlEmptyError);e.includes("#")||(this._urlString=UrlString.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let a=e.toLowerCase();return StringUtils.endsWith(a,"?")?a=a.slice(0,-1):StringUtils.endsWith(a,"?/")&&(a=a.slice(0,-2)),StringUtils.endsWith(a,"/")||(a+="/"),a}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw createClientConfigurationError(urlParseError)}if(!e.HostNameAndPort||!e.PathSegments)throw createClientConfigurationError(urlParseError);if(!e.Protocol||e.Protocol.toLowerCase()!=="https:")throw createClientConfigurationError(authorityUriInsecure)}static appendQueryString(e,a){return a?e.indexOf("?")<0?`${e}?${a}`:`${e}&${a}`:e}static removeHashFromUrl(e){return UrlString.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){const a=this.getUrlComponents(),c=a.PathSegments;return e&&c.length!==0&&(c[0]===AADAuthorityConstants.COMMON||c[0]===AADAuthorityConstants.ORGANIZATIONS)&&(c[0]=e),UrlString.constructAuthorityUriFromObject(a)}getUrlComponents(){const e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),a=this.urlString.match(e);if(!a)throw createClientConfigurationError(urlParseError);const c={Protocol:a[1],HostNameAndPort:a[4],AbsolutePath:a[5],QueryString:a[7]};let j=c.AbsolutePath.split("/");return j=j.filter(d=>d&&d.length>0),c.PathSegments=j,c.QueryString&&c.QueryString.endsWith("/")&&(c.QueryString=c.QueryString.substring(0,c.QueryString.length-1)),c}static getDomainFromUrl(e){const a=RegExp("^([^:/?#]+://)?([^/?#]*)"),c=e.match(a);if(!c)throw createClientConfigurationError(urlParseError);return c[2]}static getAbsoluteUrl(e,a){if(e[0]===Constants$1.FORWARD_SLASH){const j=new UrlString(a).getUrlComponents();return j.Protocol+"//"+j.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new UrlString(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!getDeserializedResponse(e)}}/*! @azure/msal-common v14.15.0 2024-09-20 */const rawMetdataJSON={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{tenant_discovery_endpoint:"https://{canonicalAuthority}/v2.0/.well-known/openid-configuration",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},EndpointMetadata=rawMetdataJSON.endpointMetadata,InstanceDiscoveryMetadata=rawMetdataJSON.instanceDiscoveryMetadata,InstanceDiscoveryMetadataAliases=new Set;InstanceDiscoveryMetadata.metadata.forEach(o=>{o.aliases.forEach(e=>{InstanceDiscoveryMetadataAliases.add(e)})});function getAliasesFromStaticSources(o,e){var j;let a;const c=o.canonicalAuthority;if(c){const d=new UrlString(c).getUrlComponents().HostNameAndPort;a=getAliasesFromMetadata(d,(j=o.cloudDiscoveryMetadata)==null?void 0:j.metadata,AuthorityMetadataSource.CONFIG,e)||getAliasesFromMetadata(d,InstanceDiscoveryMetadata.metadata,AuthorityMetadataSource.HARDCODED_VALUES,e)||o.knownAuthorities}return a||[]}function getAliasesFromMetadata(o,e,a,c){if(c==null||c.trace(`getAliasesFromMetadata called with source: ${a}`),o&&e){const j=getCloudDiscoveryMetadataFromNetworkResponse(e,o);if(j)return c==null||c.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${a}, returning aliases`),j.aliases;c==null||c.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${a}`)}return null}function getCloudDiscoveryMetadataFromHardcodedValues(o){return getCloudDiscoveryMetadataFromNetworkResponse(InstanceDiscoveryMetadata.metadata,o)}function getCloudDiscoveryMetadataFromNetworkResponse(o,e){for(let a=0;a<o.length;a++){const c=o[a];if(c.aliases.includes(e))return c}return null}/*! @azure/msal-common v14.15.0 2024-09-20 */const cacheQuotaExceededErrorCode="cache_quota_exceeded",cacheUnknownErrorCode="cache_error_unknown";/*! @azure/msal-common v14.15.0 2024-09-20 */const CacheErrorMessages={[cacheQuotaExceededErrorCode]:"Exceeded cache storage capacity.",[cacheUnknownErrorCode]:"Unexpected error occurred when using cache storage."};class CacheError extends Error{constructor(e,a){const c=a||(CacheErrorMessages[e]?CacheErrorMessages[e]:CacheErrorMessages[cacheUnknownErrorCode]);super(`${e}: ${c}`),Object.setPrototypeOf(this,CacheError.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=c}}/*! @azure/msal-common v14.15.0 2024-09-20 */class CacheManager{constructor(e,a,c,j){this.clientId=e,this.cryptoImpl=a,this.commonLogger=c.clone(name$3,version$3),this.staticAuthorityOptions=j}getAllAccounts(e){return this.buildTenantProfiles(this.getAccountsFilteredBy(e||{}),e)}getAccountInfoFilteredBy(e){const a=this.getAllAccounts(e);return a.length>1?a.sort(j=>j.idTokenClaims?-1:1)[0]:a.length===1?a[0]:null}getBaseAccountInfo(e){const a=this.getAccountsFilteredBy(e);return a.length>0?a[0].getAccountInfo():null}buildTenantProfiles(e,a){return e.flatMap(c=>this.getTenantProfilesFromAccountEntity(c,a==null?void 0:a.tenantId,a))}getTenantedAccountInfoByFilter(e,a,c,j){let d=null,et;if(j&&!this.tenantProfileMatchesFilter(c,j))return null;const at=this.getIdToken(e,a,c.tenantId);return at&&(et=extractTokenClaims(at.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(et,j))?null:(d=updateAccountTenantProfileData(e,c,et,at==null?void 0:at.secret),d)}getTenantProfilesFromAccountEntity(e,a,c){const j=e.getAccountInfo();let d=j.tenantProfiles||new Map;const et=this.getTokenKeys();if(a){const st=d.get(a);if(st)d=new Map([[a,st]]);else return[]}const at=[];return d.forEach(st=>{const ct=this.getTenantedAccountInfoByFilter(j,et,st,c);ct&&at.push(ct)}),at}tenantProfileMatchesFilter(e,a){return!(a.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,a.localAccountId)||a.name&&e.name!==a.name||a.isHomeTenant!==void 0&&e.isHomeTenant!==a.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,a){return!(a&&(a.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,a.localAccountId)||a.loginHint&&!this.matchLoginHintFromTokenClaims(e,a.loginHint)||a.username&&!this.matchUsername(e.preferred_username,a.username)||a.name&&!this.matchName(e,a.name)||a.sid&&!this.matchSid(e,a.sid)))}async saveCacheRecord(e,a,c){var j,d,et,at;if(!e)throw createClientAuthError(invalidCacheRecord);try{e.account&&this.setAccount(e.account),e.idToken&&(a==null?void 0:a.idToken)!==!1&&this.setIdTokenCredential(e.idToken),e.accessToken&&(a==null?void 0:a.accessToken)!==!1&&await this.saveAccessToken(e.accessToken),e.refreshToken&&(a==null?void 0:a.refreshToken)!==!1&&this.setRefreshTokenCredential(e.refreshToken),e.appMetadata&&this.setAppMetadata(e.appMetadata)}catch(st){throw(j=this.commonLogger)==null||j.error("CacheManager.saveCacheRecord: failed"),st instanceof Error?((d=this.commonLogger)==null||d.errorPii(`CacheManager.saveCacheRecord: ${st.message}`,c),st.name==="QuotaExceededError"||st.name==="NS_ERROR_DOM_QUOTA_REACHED"||st.message.includes("exceeded the quota")?((et=this.commonLogger)==null||et.error("CacheManager.saveCacheRecord: exceeded storage quota",c),new CacheError(cacheQuotaExceededErrorCode)):new CacheError(st.name,st.message)):((at=this.commonLogger)==null||at.errorPii(`CacheManager.saveCacheRecord: ${st}`,c),new CacheError(cacheUnknownErrorCode))}}async saveAccessToken(e){const a={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},c=this.getTokenKeys(),j=ScopeSet.fromString(e.target),d=[];c.accessToken.forEach(et=>{if(!this.accessTokenKeyMatchesFilter(et,a,!1))return;const at=this.getAccessTokenCredential(et);at&&this.credentialMatchesFilter(at,a)&&ScopeSet.fromString(at.target).intersectingScopeSets(j)&&d.push(this.removeAccessToken(et))}),await Promise.all(d),this.setAccessTokenCredential(e)}getAccountsFilteredBy(e){const a=this.getAccountKeys(),c=[];return a.forEach(j=>{var st;if(!this.isAccountKey(j,e.homeAccountId))return;const d=this.getAccount(j,this.commonLogger);if(!d||e.homeAccountId&&!this.matchHomeAccountId(d,e.homeAccountId)||e.username&&!this.matchUsername(d.username,e.username)||e.environment&&!this.matchEnvironment(d,e.environment)||e.realm&&!this.matchRealm(d,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(d,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(d,e.authorityType))return;const et={localAccountId:e==null?void 0:e.localAccountId,name:e==null?void 0:e.name},at=(st=d.tenantProfiles)==null?void 0:st.filter(ct=>this.tenantProfileMatchesFilter(ct,et));at&&at.length===0||c.push(d)}),c}isAccountKey(e,a,c){return!(e.split(Separators.CACHE_KEY_SEPARATOR).length<3||a&&!e.toLowerCase().includes(a.toLowerCase())||c&&!e.toLowerCase().includes(c.toLowerCase()))}isCredentialKey(e){if(e.split(Separators.CACHE_KEY_SEPARATOR).length<6)return!1;const a=e.toLowerCase();if(a.indexOf(CredentialType.ID_TOKEN.toLowerCase())===-1&&a.indexOf(CredentialType.ACCESS_TOKEN.toLowerCase())===-1&&a.indexOf(CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())===-1&&a.indexOf(CredentialType.REFRESH_TOKEN.toLowerCase())===-1)return!1;if(a.indexOf(CredentialType.REFRESH_TOKEN.toLowerCase())>-1){const c=`${CredentialType.REFRESH_TOKEN}${Separators.CACHE_KEY_SEPARATOR}${this.clientId}${Separators.CACHE_KEY_SEPARATOR}`,j=`${CredentialType.REFRESH_TOKEN}${Separators.CACHE_KEY_SEPARATOR}${THE_FAMILY_ID}${Separators.CACHE_KEY_SEPARATOR}`;if(a.indexOf(c.toLowerCase())===-1&&a.indexOf(j.toLowerCase())===-1)return!1}else if(a.indexOf(this.clientId.toLowerCase())===-1)return!1;return!0}credentialMatchesFilter(e,a){return!(a.clientId&&!this.matchClientId(e,a.clientId)||a.userAssertionHash&&!this.matchUserAssertionHash(e,a.userAssertionHash)||typeof a.homeAccountId=="string"&&!this.matchHomeAccountId(e,a.homeAccountId)||a.environment&&!this.matchEnvironment(e,a.environment)||a.realm&&!this.matchRealm(e,a.realm)||a.credentialType&&!this.matchCredentialType(e,a.credentialType)||a.familyId&&!this.matchFamilyId(e,a.familyId)||a.target&&!this.matchTarget(e,a.target)||(a.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==a.requestedClaimsHash||e.credentialType===CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(a.tokenType&&!this.matchTokenType(e,a.tokenType)||a.tokenType===AuthenticationScheme.SSH&&a.keyId&&!this.matchKeyId(e,a.keyId)))}getAppMetadataFilteredBy(e){const a=this.getKeys(),c={};return a.forEach(j=>{if(!this.isAppMetadata(j))return;const d=this.getAppMetadata(j);d&&(e.environment&&!this.matchEnvironment(d,e.environment)||e.clientId&&!this.matchClientId(d,e.clientId)||(c[j]=d))}),c}getAuthorityMetadataByAlias(e){const a=this.getAuthorityMetadataKeys();let c=null;return a.forEach(j=>{if(!this.isAuthorityMetadata(j)||j.indexOf(this.clientId)===-1)return;const d=this.getAuthorityMetadata(j);d&&d.aliases.indexOf(e)!==-1&&(c=d)}),c}async removeAllAccounts(){const e=this.getAccountKeys(),a=[];e.forEach(c=>{a.push(this.removeAccount(c))}),await Promise.all(a)}async removeAccount(e){const a=this.getAccount(e,this.commonLogger);a&&(await this.removeAccountContext(a),this.removeItem(e))}async removeAccountContext(e){const a=this.getTokenKeys(),c=e.generateAccountId(),j=[];a.idToken.forEach(d=>{d.indexOf(c)===0&&this.removeIdToken(d)}),a.accessToken.forEach(d=>{d.indexOf(c)===0&&j.push(this.removeAccessToken(d))}),a.refreshToken.forEach(d=>{d.indexOf(c)===0&&this.removeRefreshToken(d)}),await Promise.all(j)}updateOutdatedCachedAccount(e,a,c){var j;if(a&&a.isSingleTenant()){(j=this.commonLogger)==null||j.verbose("updateOutdatedCachedAccount: Found a single-tenant (outdated) account entity in the cache, migrating to multi-tenant account entity");const d=this.getAccountKeys().filter(ot=>ot.startsWith(a.homeAccountId)),et=[];d.forEach(ot=>{const gt=this.getCachedAccountEntity(ot);gt&&et.push(gt)});const at=et.find(ot=>tenantIdMatchesHomeTenant(ot.realm,ot.homeAccountId))||et[0];at.tenantProfiles=et.map(ot=>({tenantId:ot.realm,localAccountId:ot.localAccountId,name:ot.name,isHomeTenant:tenantIdMatchesHomeTenant(ot.realm,ot.homeAccountId)}));const st=CacheManager.toObject(new AccountEntity,{...at}),ct=st.generateAccountKey();return d.forEach(ot=>{ot!==ct&&this.removeOutdatedAccount(e)}),this.setAccount(st),c==null||c.verbose("Updated an outdated account entity in the cache"),st}return a}async removeAccessToken(e){const a=this.getAccessTokenCredential(e);if(a){if(a.credentialType.toLowerCase()===CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()&&a.tokenType===AuthenticationScheme.POP){const j=a.keyId;if(j)try{await this.cryptoImpl.removeTokenBindingKey(j)}catch{throw createClientAuthError(bindingKeyNotRemoved)}}return this.removeItem(e)}}removeAppMetadata(){return this.getKeys().forEach(a=>{this.isAppMetadata(a)&&this.removeItem(a)}),!0}readAccountFromCache(e){const a=AccountEntity.generateAccountCacheKey(e);return this.getAccount(a,this.commonLogger)}getIdToken(e,a,c,j,d){this.commonLogger.trace("CacheManager - getIdToken called");const et={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:CredentialType.ID_TOKEN,clientId:this.clientId,realm:c},at=this.getIdTokensByFilter(et,a),st=at.size;if(st<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(st>1){let ct=at;if(!c){const ot=new Map;at.forEach((ft,yt)=>{ft.realm===e.tenantId&&ot.set(yt,ft)});const gt=ot.size;if(gt<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),at.values().next().value;if(gt===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),ot.values().next().value;ct=ot}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),ct.forEach((ot,gt)=>{this.removeIdToken(gt)}),j&&d&&j.addFields({multiMatchedID:at.size},d),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),at.values().next().value}getIdTokensByFilter(e,a){const c=a&&a.idToken||this.getTokenKeys().idToken,j=new Map;return c.forEach(d=>{if(!this.idTokenKeyMatchesFilter(d,{clientId:this.clientId,...e}))return;const et=this.getIdTokenCredential(d);et&&this.credentialMatchesFilter(et,e)&&j.set(d,et)}),j}idTokenKeyMatchesFilter(e,a){const c=e.toLowerCase();return!(a.clientId&&c.indexOf(a.clientId.toLowerCase())===-1||a.homeAccountId&&c.indexOf(a.homeAccountId.toLowerCase())===-1)}removeIdToken(e){this.removeItem(e)}removeRefreshToken(e){this.removeItem(e)}getAccessToken(e,a,c,j,d,et){this.commonLogger.trace("CacheManager - getAccessToken called");const at=ScopeSet.createSearchScopes(a.scopes),st=a.authenticationScheme||AuthenticationScheme.BEARER,ct=st&&st.toLowerCase()!==AuthenticationScheme.BEARER.toLowerCase()?CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME:CredentialType.ACCESS_TOKEN,ot={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:ct,clientId:this.clientId,realm:j||e.tenantId,target:at,tokenType:st,keyId:a.sshKid,requestedClaimsHash:a.requestedClaimsHash},gt=c&&c.accessToken||this.getTokenKeys().accessToken,ft=[];gt.forEach(vt=>{if(this.accessTokenKeyMatchesFilter(vt,ot,!0)){const rt=this.getAccessTokenCredential(vt);rt&&this.credentialMatchesFilter(rt,ot)&&ft.push(rt)}});const yt=ft.length;return yt<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found"),null):yt>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them"),ft.forEach(vt=>{this.removeAccessToken(generateCredentialKey(vt))}),d&&et&&d.addFields({multiMatchedAT:ft.length},et),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token"),ft[0])}accessTokenKeyMatchesFilter(e,a,c){const j=e.toLowerCase();if(a.clientId&&j.indexOf(a.clientId.toLowerCase())===-1||a.homeAccountId&&j.indexOf(a.homeAccountId.toLowerCase())===-1||a.realm&&j.indexOf(a.realm.toLowerCase())===-1||a.requestedClaimsHash&&j.indexOf(a.requestedClaimsHash.toLowerCase())===-1)return!1;if(a.target){const d=a.target.asArray();for(let et=0;et<d.length;et++){if(c&&!j.includes(d[et].toLowerCase()))return!1;if(!c&&j.includes(d[et].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e){const a=this.getTokenKeys(),c=[];return a.accessToken.forEach(j=>{if(!this.accessTokenKeyMatchesFilter(j,e,!0))return;const d=this.getAccessTokenCredential(j);d&&this.credentialMatchesFilter(d,e)&&c.push(d)}),c}getRefreshToken(e,a,c,j,d){this.commonLogger.trace("CacheManager - getRefreshToken called");const et=a?THE_FAMILY_ID:void 0,at={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:CredentialType.REFRESH_TOKEN,clientId:this.clientId,familyId:et},st=c&&c.refreshToken||this.getTokenKeys().refreshToken,ct=[];st.forEach(gt=>{if(this.refreshTokenKeyMatchesFilter(gt,at)){const ft=this.getRefreshTokenCredential(gt);ft&&this.credentialMatchesFilter(ft,at)&&ct.push(ft)}});const ot=ct.length;return ot<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(ot>1&&j&&d&&j.addFields({multiMatchedRT:ot},d),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),ct[0])}refreshTokenKeyMatchesFilter(e,a){const c=e.toLowerCase();return!(a.familyId&&c.indexOf(a.familyId.toLowerCase())===-1||!a.familyId&&a.clientId&&c.indexOf(a.clientId.toLowerCase())===-1||a.homeAccountId&&c.indexOf(a.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(e){const a={environment:e,clientId:this.clientId},c=this.getAppMetadataFilteredBy(a),j=Object.keys(c).map(et=>c[et]),d=j.length;if(d<1)return null;if(d>1)throw createClientAuthError(multipleMatchingAppMetadata);return j[0]}isAppMetadataFOCI(e){const a=this.readAppMetadataFromCache(e);return!!(a&&a.familyId===THE_FAMILY_ID)}matchHomeAccountId(e,a){return typeof e.homeAccountId=="string"&&a===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,a){const c=e.oid||e.sub;return a===c}matchLocalAccountIdFromTenantProfile(e,a){return e.localAccountId===a}matchName(e,a){var c;return a.toLowerCase()===((c=e.name)==null?void 0:c.toLowerCase())}matchUsername(e,a){return!!(e&&typeof e=="string"&&(a==null?void 0:a.toLowerCase())===e.toLowerCase())}matchUserAssertionHash(e,a){return!!(e.userAssertionHash&&a===e.userAssertionHash)}matchEnvironment(e,a){if(this.staticAuthorityOptions){const j=getAliasesFromStaticSources(this.staticAuthorityOptions,this.commonLogger);if(j.includes(a)&&j.includes(e.environment))return!0}const c=this.getAuthorityMetadataByAlias(a);return!!(c&&c.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,a){return e.credentialType&&a.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,a){return!!(e.clientId&&a===e.clientId)}matchFamilyId(e,a){return!!(e.familyId&&a===e.familyId)}matchRealm(e,a){var c;return((c=e.realm)==null?void 0:c.toLowerCase())===a.toLowerCase()}matchNativeAccountId(e,a){return!!(e.nativeAccountId&&a===e.nativeAccountId)}matchLoginHintFromTokenClaims(e,a){return e.login_hint===a||e.preferred_username===a||e.upn===a}matchSid(e,a){return e.sid===a}matchAuthorityType(e,a){return!!(e.authorityType&&a.toLowerCase()===e.authorityType.toLowerCase())}matchTarget(e,a){return e.credentialType!==CredentialType.ACCESS_TOKEN&&e.credentialType!==CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target?!1:ScopeSet.fromString(e.target).containsScopeSet(a)}matchTokenType(e,a){return!!(e.tokenType&&e.tokenType===a)}matchKeyId(e,a){return!!(e.keyId&&e.keyId===a)}isAppMetadata(e){return e.indexOf(APP_METADATA)!==-1}isAuthorityMetadata(e){return e.indexOf(AUTHORITY_METADATA_CONSTANTS.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(e){return`${AUTHORITY_METADATA_CONSTANTS.CACHE_KEY}-${this.clientId}-${e}`}static toObject(e,a){for(const c in a)e[c]=a[c];return e}}class DefaultStorageClass extends CacheManager{setAccount(){throw createClientAuthError(methodNotImplemented)}getAccount(){throw createClientAuthError(methodNotImplemented)}getCachedAccountEntity(){throw createClientAuthError(methodNotImplemented)}setIdTokenCredential(){throw createClientAuthError(methodNotImplemented)}getIdTokenCredential(){throw createClientAuthError(methodNotImplemented)}setAccessTokenCredential(){throw createClientAuthError(methodNotImplemented)}getAccessTokenCredential(){throw createClientAuthError(methodNotImplemented)}setRefreshTokenCredential(){throw createClientAuthError(methodNotImplemented)}getRefreshTokenCredential(){throw createClientAuthError(methodNotImplemented)}setAppMetadata(){throw createClientAuthError(methodNotImplemented)}getAppMetadata(){throw createClientAuthError(methodNotImplemented)}setServerTelemetry(){throw createClientAuthError(methodNotImplemented)}getServerTelemetry(){throw createClientAuthError(methodNotImplemented)}setAuthorityMetadata(){throw createClientAuthError(methodNotImplemented)}getAuthorityMetadata(){throw createClientAuthError(methodNotImplemented)}getAuthorityMetadataKeys(){throw createClientAuthError(methodNotImplemented)}setThrottlingCache(){throw createClientAuthError(methodNotImplemented)}getThrottlingCache(){throw createClientAuthError(methodNotImplemented)}removeItem(){throw createClientAuthError(methodNotImplemented)}getKeys(){throw createClientAuthError(methodNotImplemented)}getAccountKeys(){throw createClientAuthError(methodNotImplemented)}getTokenKeys(){throw createClientAuthError(methodNotImplemented)}async clear(){throw createClientAuthError(methodNotImplemented)}updateCredentialCacheKey(){throw createClientAuthError(methodNotImplemented)}removeOutdatedAccount(){throw createClientAuthError(methodNotImplemented)}}/*! @azure/msal-common v14.15.0 2024-09-20 */const DEFAULT_SYSTEM_OPTIONS={tokenRenewalOffsetSeconds:DEFAULT_TOKEN_RENEWAL_OFFSET_SEC,preventCorsPreflight:!1},DEFAULT_LOGGER_IMPLEMENTATION={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:LogLevel.Info,correlationId:Constants$1.EMPTY_STRING},DEFAULT_CACHE_OPTIONS={claimsBasedCachingEnabled:!1},DEFAULT_NETWORK_IMPLEMENTATION={async sendGetRequestAsync(){throw createClientAuthError(methodNotImplemented)},async sendPostRequestAsync(){throw createClientAuthError(methodNotImplemented)}},DEFAULT_LIBRARY_INFO={sku:Constants$1.SKU,version:version$3,cpu:Constants$1.EMPTY_STRING,os:Constants$1.EMPTY_STRING},DEFAULT_CLIENT_CREDENTIALS={clientSecret:Constants$1.EMPTY_STRING,clientAssertion:void 0},DEFAULT_AZURE_CLOUD_OPTIONS={azureCloudInstance:AzureCloudInstance.None,tenant:`${Constants$1.DEFAULT_COMMON_TENANT}`},DEFAULT_TELEMETRY_OPTIONS={application:{appName:"",appVersion:""}};function buildClientConfiguration({authOptions:o,systemOptions:e,loggerOptions:a,cacheOptions:c,storageInterface:j,networkInterface:d,cryptoInterface:et,clientCredentials:at,libraryInfo:st,telemetry:ct,serverTelemetryManager:ot,persistencePlugin:gt,serializableCache:ft}){const yt={...DEFAULT_LOGGER_IMPLEMENTATION,...a};return{authOptions:buildAuthOptions(o),systemOptions:{...DEFAULT_SYSTEM_OPTIONS,...e},loggerOptions:yt,cacheOptions:{...DEFAULT_CACHE_OPTIONS,...c},storageInterface:j||new DefaultStorageClass(o.clientId,DEFAULT_CRYPTO_IMPLEMENTATION,new Logger(yt)),networkInterface:d||DEFAULT_NETWORK_IMPLEMENTATION,cryptoInterface:et||DEFAULT_CRYPTO_IMPLEMENTATION,clientCredentials:at||DEFAULT_CLIENT_CREDENTIALS,libraryInfo:{...DEFAULT_LIBRARY_INFO,...st},telemetry:{...DEFAULT_TELEMETRY_OPTIONS,...ct},serverTelemetryManager:ot||null,persistencePlugin:gt||null,serializableCache:ft||null}}function buildAuthOptions(o){return{clientCapabilities:[],azureCloudOptions:DEFAULT_AZURE_CLOUD_OPTIONS,skipAuthorityMetadataCache:!1,instanceAware:!1,...o}}function isOidcProtocolMode(o){return o.authOptions.authority.options.protocolMode===ProtocolMode.OIDC}/*! @azure/msal-common v14.15.0 2024-09-20 */class ServerError extends AuthError{constructor(e,a,c,j,d){super(e,a,c),this.name="ServerError",this.errorNo=j,this.status=d,Object.setPrototypeOf(this,ServerError.prototype)}}/*! @azure/msal-common v14.15.0 2024-09-20 */class ThrottlingUtils{static generateThrottlingStorageKey(e){return`${ThrottlingConstants.THROTTLING_PREFIX}.${JSON.stringify(e)}`}static preProcess(e,a){var d;const c=ThrottlingUtils.generateThrottlingStorageKey(a),j=e.getThrottlingCache(c);if(j){if(j.throttleTime<Date.now()){e.removeItem(c);return}throw new ServerError(((d=j.errorCodes)==null?void 0:d.join(" "))||Constants$1.EMPTY_STRING,j.errorMessage,j.subError)}}static postProcess(e,a,c){if(ThrottlingUtils.checkResponseStatus(c)||ThrottlingUtils.checkResponseForRetryAfter(c)){const j={throttleTime:ThrottlingUtils.calculateThrottleTime(parseInt(c.headers[HeaderNames.RETRY_AFTER])),error:c.body.error,errorCodes:c.body.error_codes,errorMessage:c.body.error_description,subError:c.body.suberror};e.setThrottlingCache(ThrottlingUtils.generateThrottlingStorageKey(a),j)}}static checkResponseStatus(e){return e.status===429||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return e.headers?e.headers.hasOwnProperty(HeaderNames.RETRY_AFTER)&&(e.status<200||e.status>=300):!1}static calculateThrottleTime(e){const a=e<=0?0:e,c=Date.now()/1e3;return Math.floor(Math.min(c+(a||ThrottlingConstants.DEFAULT_THROTTLE_TIME_SECONDS),c+ThrottlingConstants.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(e,a,c,j){const d={clientId:a,authority:c.authority,scopes:c.scopes,homeAccountIdentifier:j,claims:c.claims,authenticationScheme:c.authenticationScheme,resourceRequestMethod:c.resourceRequestMethod,resourceRequestUri:c.resourceRequestUri,shrClaims:c.shrClaims,sshKid:c.sshKid},et=this.generateThrottlingStorageKey(d);e.removeItem(et)}}/*! @azure/msal-common v14.15.0 2024-09-20 */class NetworkManager{constructor(e,a){this.networkClient=e,this.cacheManager=a}async sendPostRequest(e,a,c){ThrottlingUtils.preProcess(this.cacheManager,e);let j;try{j=await this.networkClient.sendPostRequestAsync(a,c)}catch(d){throw d instanceof AuthError?d:createClientAuthError(networkError)}return ThrottlingUtils.postProcess(this.cacheManager,e,j),j}}/*! @azure/msal-common v14.15.0 2024-09-20 */const CcsCredentialType={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};/*! @azure/msal-common v14.15.0 2024-09-20 */const CLIENT_ID="client_id",REDIRECT_URI="redirect_uri",RESPONSE_TYPE="response_type",RESPONSE_MODE="response_mode",GRANT_TYPE="grant_type",CLAIMS="claims",SCOPE="scope",REFRESH_TOKEN="refresh_token",STATE="state",NONCE="nonce",PROMPT="prompt",CODE="code",CODE_CHALLENGE="code_challenge",CODE_CHALLENGE_METHOD="code_challenge_method",CODE_VERIFIER="code_verifier",CLIENT_REQUEST_ID="client-request-id",X_CLIENT_SKU="x-client-SKU",X_CLIENT_VER="x-client-VER",X_CLIENT_OS="x-client-OS",X_CLIENT_CPU="x-client-CPU",X_CLIENT_CURR_TELEM="x-client-current-telemetry",X_CLIENT_LAST_TELEM="x-client-last-telemetry",X_MS_LIB_CAPABILITY="x-ms-lib-capability",X_APP_NAME="x-app-name",X_APP_VER="x-app-ver",POST_LOGOUT_URI="post_logout_redirect_uri",ID_TOKEN_HINT="id_token_hint",DEVICE_CODE="device_code",CLIENT_SECRET="client_secret",CLIENT_ASSERTION="client_assertion",CLIENT_ASSERTION_TYPE="client_assertion_type",TOKEN_TYPE="token_type",REQ_CNF="req_cnf",OBO_ASSERTION="assertion",REQUESTED_TOKEN_USE="requested_token_use",RETURN_SPA_CODE="return_spa_code",NATIVE_BROKER="nativebroker",LOGOUT_HINT="logout_hint",SID="sid",LOGIN_HINT="login_hint",DOMAIN_HINT="domain_hint",X_CLIENT_EXTRA_SKU="x-client-xtra-sku";/*! @azure/msal-common v14.15.0 2024-09-20 */class RequestValidator{static validateRedirectUri(e){if(!e)throw createClientConfigurationError(redirectUriEmpty)}static validatePrompt(e){const a=[];for(const c in PromptValue)a.push(PromptValue[c]);if(a.indexOf(e)<0)throw createClientConfigurationError(invalidPromptValue)}static validateClaims(e){try{JSON.parse(e)}catch{throw createClientConfigurationError(invalidClaims)}}static validateCodeChallengeParams(e,a){if(!e||!a)throw createClientConfigurationError(pkceParamsMissing);this.validateCodeChallengeMethod(a)}static validateCodeChallengeMethod(e){if([CodeChallengeMethodValues.PLAIN,CodeChallengeMethodValues.S256].indexOf(e)<0)throw createClientConfigurationError(invalidCodeChallengeMethod)}}/*! @azure/msal-common v14.15.0 2024-09-20 */class RequestParameterBuilder{constructor(){this.parameters=new Map}addResponseTypeCode(){this.parameters.set(RESPONSE_TYPE,encodeURIComponent(Constants$1.CODE_RESPONSE_TYPE))}addResponseTypeForTokenAndIdToken(){this.parameters.set(RESPONSE_TYPE,encodeURIComponent(`${Constants$1.TOKEN_RESPONSE_TYPE} ${Constants$1.ID_TOKEN_RESPONSE_TYPE}`))}addResponseMode(e){this.parameters.set(RESPONSE_MODE,encodeURIComponent(e||ResponseMode.QUERY))}addNativeBroker(){this.parameters.set(NATIVE_BROKER,encodeURIComponent("1"))}addScopes(e,a=!0,c=OIDC_DEFAULT_SCOPES){a&&!c.includes("openid")&&!e.includes("openid")&&c.push("openid");const j=a?[...e||[],...c]:e||[],d=new ScopeSet(j);this.parameters.set(SCOPE,encodeURIComponent(d.printScopes()))}addClientId(e){this.parameters.set(CLIENT_ID,encodeURIComponent(e))}addRedirectUri(e){RequestValidator.validateRedirectUri(e),this.parameters.set(REDIRECT_URI,encodeURIComponent(e))}addPostLogoutRedirectUri(e){RequestValidator.validateRedirectUri(e),this.parameters.set(POST_LOGOUT_URI,encodeURIComponent(e))}addIdTokenHint(e){this.parameters.set(ID_TOKEN_HINT,encodeURIComponent(e))}addDomainHint(e){this.parameters.set(DOMAIN_HINT,encodeURIComponent(e))}addLoginHint(e){this.parameters.set(LOGIN_HINT,encodeURIComponent(e))}addCcsUpn(e){this.parameters.set(HeaderNames.CCS_HEADER,encodeURIComponent(`UPN:${e}`))}addCcsOid(e){this.parameters.set(HeaderNames.CCS_HEADER,encodeURIComponent(`Oid:${e.uid}@${e.utid}`))}addSid(e){this.parameters.set(SID,encodeURIComponent(e))}addClaims(e,a){const c=this.addClientCapabilitiesToClaims(e,a);RequestValidator.validateClaims(c),this.parameters.set(CLAIMS,encodeURIComponent(c))}addCorrelationId(e){this.parameters.set(CLIENT_REQUEST_ID,encodeURIComponent(e))}addLibraryInfo(e){this.parameters.set(X_CLIENT_SKU,e.sku),this.parameters.set(X_CLIENT_VER,e.version),e.os&&this.parameters.set(X_CLIENT_OS,e.os),e.cpu&&this.parameters.set(X_CLIENT_CPU,e.cpu)}addApplicationTelemetry(e){e!=null&&e.appName&&this.parameters.set(X_APP_NAME,e.appName),e!=null&&e.appVersion&&this.parameters.set(X_APP_VER,e.appVersion)}addPrompt(e){RequestValidator.validatePrompt(e),this.parameters.set(`${PROMPT}`,encodeURIComponent(e))}addState(e){e&&this.parameters.set(STATE,encodeURIComponent(e))}addNonce(e){this.parameters.set(NONCE,encodeURIComponent(e))}addCodeChallengeParams(e,a){if(RequestValidator.validateCodeChallengeParams(e,a),e&&a)this.parameters.set(CODE_CHALLENGE,encodeURIComponent(e)),this.parameters.set(CODE_CHALLENGE_METHOD,encodeURIComponent(a));else throw createClientConfigurationError(pkceParamsMissing)}addAuthorizationCode(e){this.parameters.set(CODE,encodeURIComponent(e))}addDeviceCode(e){this.parameters.set(DEVICE_CODE,encodeURIComponent(e))}addRefreshToken(e){this.parameters.set(REFRESH_TOKEN,encodeURIComponent(e))}addCodeVerifier(e){this.parameters.set(CODE_VERIFIER,encodeURIComponent(e))}addClientSecret(e){this.parameters.set(CLIENT_SECRET,encodeURIComponent(e))}addClientAssertion(e){e&&this.parameters.set(CLIENT_ASSERTION,encodeURIComponent(e))}addClientAssertionType(e){e&&this.parameters.set(CLIENT_ASSERTION_TYPE,encodeURIComponent(e))}addOboAssertion(e){this.parameters.set(OBO_ASSERTION,encodeURIComponent(e))}addRequestTokenUse(e){this.parameters.set(REQUESTED_TOKEN_USE,encodeURIComponent(e))}addGrantType(e){this.parameters.set(GRANT_TYPE,encodeURIComponent(e))}addClientInfo(){this.parameters.set(CLIENT_INFO,"1")}addExtraQueryParameters(e){Object.entries(e).forEach(([a,c])=>{!this.parameters.has(a)&&c&&this.parameters.set(a,c)})}addClientCapabilitiesToClaims(e,a){let c;if(!e)c={};else try{c=JSON.parse(e)}catch{throw createClientConfigurationError(invalidClaims)}return a&&a.length>0&&(c.hasOwnProperty(ClaimsRequestKeys.ACCESS_TOKEN)||(c[ClaimsRequestKeys.ACCESS_TOKEN]={}),c[ClaimsRequestKeys.ACCESS_TOKEN][ClaimsRequestKeys.XMS_CC]={values:a}),JSON.stringify(c)}addUsername(e){this.parameters.set(PasswordGrantConstants.username,encodeURIComponent(e))}addPassword(e){this.parameters.set(PasswordGrantConstants.password,encodeURIComponent(e))}addPopToken(e){e&&(this.parameters.set(TOKEN_TYPE,AuthenticationScheme.POP),this.parameters.set(REQ_CNF,encodeURIComponent(e)))}addSshJwk(e){e&&(this.parameters.set(TOKEN_TYPE,AuthenticationScheme.SSH),this.parameters.set(REQ_CNF,encodeURIComponent(e)))}addServerTelemetry(e){this.parameters.set(X_CLIENT_CURR_TELEM,e.generateCurrentRequestHeaderValue()),this.parameters.set(X_CLIENT_LAST_TELEM,e.generateLastRequestHeaderValue())}addThrottling(){this.parameters.set(X_MS_LIB_CAPABILITY,ThrottlingConstants.X_MS_LIB_CAPABILITY_VALUE)}addLogoutHint(e){this.parameters.set(LOGOUT_HINT,encodeURIComponent(e))}createQueryString(){const e=new Array;return this.parameters.forEach((a,c)=>{e.push(`${c}=${a}`)}),e.join("&")}}/*! @azure/msal-common v14.15.0 2024-09-20 */function isOpenIdConfigResponse(o){return o.hasOwnProperty("authorization_endpoint")&&o.hasOwnProperty("token_endpoint")&&o.hasOwnProperty("issuer")&&o.hasOwnProperty("jwks_uri")}/*! @azure/msal-common v14.15.0 2024-09-20 */function isCloudInstanceDiscoveryResponse(o){return o.hasOwnProperty("tenant_discovery_endpoint")&&o.hasOwnProperty("metadata")}/*! @azure/msal-common v14.15.0 2024-09-20 */function isCloudInstanceDiscoveryErrorResponse(o){return o.hasOwnProperty("error")&&o.hasOwnProperty("error_description")}/*! @azure/msal-common v14.15.0 2024-09-20 */const PerformanceEvents={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",StandardInteractionClientInitializeAuthorizationCodeRequest:"standardInteractionClientInitializeAuthorizationCodeRequest",GetAuthCodeUrl:"getAuthCodeUrl",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",AuthClientCreateQueryString:"authClientCreateQueryString",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues"},PerformanceEventStatus={NotStarted:0,InProgress:1,Completed:2};/*! @azure/msal-common v14.15.0 2024-09-20 */const invoke=(o,e,a,c,j)=>(...d)=>{a.trace(`Executing function ${e}`);const et=c==null?void 0:c.startMeasurement(e,j);if(j){const at=e+"CallCount";c==null||c.incrementFields({[at]:1},j)}try{const at=o(...d);return et==null||et.end({success:!0}),a.trace(`Returning result from ${e}`),at}catch(at){a.trace(`Error occurred in ${e}`);try{a.trace(JSON.stringify(at))}catch{a.trace("Unable to print error message.")}throw et==null||et.end({success:!1},at),at}},invokeAsync=(o,e,a,c,j)=>(...d)=>{a.trace(`Executing function ${e}`);const et=c==null?void 0:c.startMeasurement(e,j);if(j){const at=e+"CallCount";c==null||c.incrementFields({[at]:1},j)}return c==null||c.setPreQueueTime(e,j),o(...d).then(at=>(a.trace(`Returning result from ${e}`),et==null||et.end({success:!0}),at)).catch(at=>{a.trace(`Error occurred in ${e}`);try{a.trace(JSON.stringify(at))}catch{a.trace("Unable to print error message.")}throw et==null||et.end({success:!1},at),at})};/*! @azure/msal-common v14.15.0 2024-09-20 */class RegionDiscovery{constructor(e,a,c,j){this.networkInterface=e,this.logger=a,this.performanceClient=c,this.correlationId=j}async detectRegion(e,a){var j;(j=this.performanceClient)==null||j.addQueueMeasurement(PerformanceEvents.RegionDiscoveryDetectRegion,this.correlationId);let c=e;if(c)a.region_source=RegionDiscoverySources.ENVIRONMENT_VARIABLE;else{const d=RegionDiscovery.IMDS_OPTIONS;try{const et=await invokeAsync(this.getRegionFromIMDS.bind(this),PerformanceEvents.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(Constants$1.IMDS_VERSION,d);if(et.status===ResponseCodes.httpSuccess&&(c=et.body,a.region_source=RegionDiscoverySources.IMDS),et.status===ResponseCodes.httpBadRequest){const at=await invokeAsync(this.getCurrentVersion.bind(this),PerformanceEvents.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(d);if(!at)return a.region_source=RegionDiscoverySources.FAILED_AUTO_DETECTION,null;const st=await invokeAsync(this.getRegionFromIMDS.bind(this),PerformanceEvents.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(at,d);st.status===ResponseCodes.httpSuccess&&(c=st.body,a.region_source=RegionDiscoverySources.IMDS)}}catch{return a.region_source=RegionDiscoverySources.FAILED_AUTO_DETECTION,null}}return c||(a.region_source=RegionDiscoverySources.FAILED_AUTO_DETECTION),c||null}async getRegionFromIMDS(e,a){var c;return(c=this.performanceClient)==null||c.addQueueMeasurement(PerformanceEvents.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${Constants$1.IMDS_ENDPOINT}?api-version=${e}&format=text`,a,Constants$1.IMDS_TIMEOUT)}async getCurrentVersion(e){var a;(a=this.performanceClient)==null||a.addQueueMeasurement(PerformanceEvents.RegionDiscoveryGetCurrentVersion,this.correlationId);try{const c=await this.networkInterface.sendGetRequestAsync(`${Constants$1.IMDS_ENDPOINT}?format=json`,e);return c.status===ResponseCodes.httpBadRequest&&c.body&&c.body["newest-versions"]&&c.body["newest-versions"].length>0?c.body["newest-versions"][0]:null}catch{return null}}}RegionDiscovery.IMDS_OPTIONS={headers:{Metadata:"true"}};/*! @azure/msal-common v14.15.0 2024-09-20 */class Authority{constructor(e,a,c,j,d,et,at,st){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=a,this.cacheManager=c,this.authorityOptions=j,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=d,this.performanceClient=at,this.correlationId=et,this.managedIdentity=st||!1,this.regionDiscovery=new RegionDiscovery(a,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(Constants$1.CIAM_AUTH_URL))return AuthorityType.Ciam;const a=e.PathSegments;if(a.length)switch(a[0].toLowerCase()){case Constants$1.ADFS:return AuthorityType.Adfs;case Constants$1.DSTS:return AuthorityType.Dsts}return AuthorityType.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new UrlString(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw createClientAuthError(endpointResolutionError)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw createClientAuthError(endpointResolutionError)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw createClientAuthError(endpointResolutionError)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw createClientAuthError(endSessionEndpointNotSupported);return this.replacePath(this.metadata.end_session_endpoint)}else throw createClientAuthError(endpointResolutionError)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw createClientAuthError(endpointResolutionError)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw createClientAuthError(endpointResolutionError)}canReplaceTenant(e){return e.PathSegments.length===1&&!Authority.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===AuthorityType.Default&&this.protocolMode===ProtocolMode.AAD}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let a=e;const j=new UrlString(this.metadata.canonical_authority).getUrlComponents(),d=j.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((at,st)=>{let ct=d[st];if(st===0&&this.canReplaceTenant(j)){const ot=new UrlString(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];ct!==ot&&(this.logger.verbose(`Replacing tenant domain name ${ct} with id ${ot}`),ct=ot)}at!==ct&&(a=a.replace(`/${ct}/`,`/${at}/`))}),this.replaceTenant(a)}get defaultOpenIdConfigurationEndpoint(){const e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===AuthorityType.Adfs||this.protocolMode!==ProtocolMode.AAD&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){var j,d;(j=this.performanceClient)==null||j.addQueueMeasurement(PerformanceEvents.AuthorityResolveEndpointsAsync,this.correlationId);const e=this.getCurrentMetadataEntity(),a=await invokeAsync(this.updateCloudDiscoveryMetadata.bind(this),PerformanceEvents.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);const c=await invokeAsync(this.updateEndpointMetadata.bind(this),PerformanceEvents.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,a,{source:c}),(d=this.performanceClient)==null||d.addFields({cloudDiscoverySource:a,authorityEndpointSource:c},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:generateAuthorityMetadataExpiresAt(),jwks_uri:""}),e}updateCachedMetadata(e,a,c){a!==AuthorityMetadataSource.CACHE&&(c==null?void 0:c.source)!==AuthorityMetadataSource.CACHE&&(e.expiresAt=generateAuthorityMetadataExpiresAt(),e.canonical_authority=this.canonicalAuthority);const j=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(j,e),this.metadata=e}async updateEndpointMetadata(e){var j,d,et;(j=this.performanceClient)==null||j.addQueueMeasurement(PerformanceEvents.AuthorityUpdateEndpointMetadata,this.correlationId);const a=this.updateEndpointMetadataFromLocalSources(e);if(a){if(a.source===AuthorityMetadataSource.HARDCODED_VALUES&&(d=this.authorityOptions.azureRegionConfiguration)!=null&&d.azureRegion&&a.metadata){const at=await invokeAsync(this.updateMetadataWithRegionalInformation.bind(this),PerformanceEvents.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(a.metadata);updateAuthorityEndpointMetadata(e,at,!1),e.canonical_authority=this.canonicalAuthority}return a.source}let c=await invokeAsync(this.getEndpointMetadataFromNetwork.bind(this),PerformanceEvents.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(c)return(et=this.authorityOptions.azureRegionConfiguration)!=null&&et.azureRegion&&(c=await invokeAsync(this.updateMetadataWithRegionalInformation.bind(this),PerformanceEvents.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(c)),updateAuthorityEndpointMetadata(e,c,!0),AuthorityMetadataSource.NETWORK;throw createClientAuthError(openIdConfigError,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const a=this.getEndpointMetadataFromConfig();if(a)return this.logger.verbose("Found endpoint metadata in authority configuration"),updateAuthorityEndpointMetadata(e,a,!1),{source:AuthorityMetadataSource.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const j=this.getEndpointMetadataFromHardcodedValues();if(j)return updateAuthorityEndpointMetadata(e,j,!1),{source:AuthorityMetadataSource.HARDCODED_VALUES,metadata:j};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const c=isAuthorityMetadataExpired(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!c?(this.logger.verbose("Found endpoint metadata in the cache."),{source:AuthorityMetadataSource.CACHE}):(c&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new UrlString(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw createClientConfigurationError(invalidAuthorityMetadata)}return null}async getEndpointMetadataFromNetwork(){var c;(c=this.performanceClient)==null||c.addQueueMeasurement(PerformanceEvents.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);const e={},a=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${a}`);try{const j=await this.networkInterface.sendGetRequestAsync(a,e);return isOpenIdConfigResponse(j.body)?j.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(j){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${j}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in EndpointMetadata?EndpointMetadata[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){var c,j,d;(c=this.performanceClient)==null||c.addQueueMeasurement(PerformanceEvents.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);const a=(j=this.authorityOptions.azureRegionConfiguration)==null?void 0:j.azureRegion;if(a){if(a!==Constants$1.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=RegionDiscoveryOutcomes.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=a,Authority.replaceWithRegionalInformation(e,a);const et=await invokeAsync(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),PerformanceEvents.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)((d=this.authorityOptions.azureRegionConfiguration)==null?void 0:d.environmentRegion,this.regionDiscoveryMetadata);if(et)return this.regionDiscoveryMetadata.region_outcome=RegionDiscoveryOutcomes.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=et,Authority.replaceWithRegionalInformation(e,et);this.regionDiscoveryMetadata.region_outcome=RegionDiscoveryOutcomes.AUTO_DETECTION_REQUESTED_FAILED}return e}async updateCloudDiscoveryMetadata(e){var j;(j=this.performanceClient)==null||j.addQueueMeasurement(PerformanceEvents.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);const a=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(a)return a;const c=await invokeAsync(this.getCloudDiscoveryMetadataFromNetwork.bind(this),PerformanceEvents.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(c)return updateCloudDiscoveryMetadata(e,c,!0),AuthorityMetadataSource.NETWORK;throw createClientConfigurationError(untrustedAuthority)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||Constants$1.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||Constants$1.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||Constants$1.NOT_APPLICABLE}`);const a=this.getCloudDiscoveryMetadataFromConfig();if(a)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),updateCloudDiscoveryMetadata(e,a,!1),AuthorityMetadataSource.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const j=getCloudDiscoveryMetadataFromHardcodedValues(this.hostnameAndPort);if(j)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),updateCloudDiscoveryMetadata(e,j,!1),AuthorityMetadataSource.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}const c=isAuthorityMetadataExpired(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!c?(this.logger.verbose("Found cloud discovery metadata in the cache."),AuthorityMetadataSource.CACHE):(c&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===AuthorityType.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),Authority.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const e=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),a=getCloudDiscoveryMetadataFromNetworkResponse(e.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),a)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),a;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),createClientConfigurationError(invalidCloudDiscoveryMetadata)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),Authority.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){var j;(j=this.performanceClient)==null||j.addQueueMeasurement(PerformanceEvents.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);const e=`${Constants$1.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,a={};let c=null;try{const d=await this.networkInterface.sendGetRequestAsync(e,a);let et,at;if(isCloudInstanceDiscoveryResponse(d.body))et=d.body,at=et.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${et.tenant_discovery_endpoint}`);else if(isCloudInstanceDiscoveryErrorResponse(d.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${d.status}`),et=d.body,et.error===Constants$1.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${et.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${et.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),at=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),c=getCloudDiscoveryMetadataFromNetworkResponse(at,this.hostnameAndPort)}catch(d){if(d instanceof AuthError)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${d.errorCode}
Error Description: ${d.errorMessage}`);else{const et=d;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${et.name}
Error Description: ${et.message}`)}return null}return c||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),c=Authority.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),c}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(a=>a&&UrlString.getDomainFromUrl(a).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,a){let c;if(a&&a.azureCloudInstance!==AzureCloudInstance.None){const j=a.tenant?a.tenant:Constants$1.DEFAULT_COMMON_TENANT;c=`${a.azureCloudInstance}/${j}/`}return c||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return Constants$1.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw createClientAuthError(endpointResolutionError)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return InstanceDiscoveryMetadataAliases.has(e)}static isPublicCloudAuthority(e){return Constants$1.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,a,c){const j=new UrlString(e);j.validateAsUri();const d=j.getUrlComponents();let et=`${a}.${d.HostNameAndPort}`;this.isPublicCloudAuthority(d.HostNameAndPort)&&(et=`${a}.${Constants$1.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);const at=UrlString.constructAuthorityUriFromObject({...j.getUrlComponents(),HostNameAndPort:et}).urlString;return c?`${at}?${c}`:at}static replaceWithRegionalInformation(e,a){const c={...e};return c.authorization_endpoint=Authority.buildRegionalAuthorityString(c.authorization_endpoint,a),c.token_endpoint=Authority.buildRegionalAuthorityString(c.token_endpoint,a),c.end_session_endpoint&&(c.end_session_endpoint=Authority.buildRegionalAuthorityString(c.end_session_endpoint,a)),c}static transformCIAMAuthority(e){let a=e;const j=new UrlString(e).getUrlComponents();if(j.PathSegments.length===0&&j.HostNameAndPort.endsWith(Constants$1.CIAM_AUTH_URL)){const d=j.HostNameAndPort.split(".")[0];a=`${a}${d}${Constants$1.AAD_TENANT_DOMAIN_SUFFIX}`}return a}}Authority.reservedTenantDomains=new Set(["{tenant}","{tenantid}",AADAuthorityConstants.COMMON,AADAuthorityConstants.CONSUMERS,AADAuthorityConstants.ORGANIZATIONS]);function getTenantFromAuthorityString(o){var j;const c=(j=new UrlString(o).getUrlComponents().PathSegments.slice(-1)[0])==null?void 0:j.toLowerCase();switch(c){case AADAuthorityConstants.COMMON:case AADAuthorityConstants.ORGANIZATIONS:case AADAuthorityConstants.CONSUMERS:return;default:return c}}function formatAuthorityUri(o){return o.endsWith(Constants$1.FORWARD_SLASH)?o:`${o}${Constants$1.FORWARD_SLASH}`}function buildStaticAuthorityOptions(o){const e=o.cloudDiscoveryMetadata;let a;if(e)try{a=JSON.parse(e)}catch{throw createClientConfigurationError(invalidCloudDiscoveryMetadata)}return{canonicalAuthority:o.authority?formatAuthorityUri(o.authority):void 0,knownAuthorities:o.knownAuthorities,cloudDiscoveryMetadata:a}}/*! @azure/msal-common v14.15.0 2024-09-20 */async function createDiscoveredInstance(o,e,a,c,j,d,et){et==null||et.addQueueMeasurement(PerformanceEvents.AuthorityFactoryCreateDiscoveredInstance,d);const at=Authority.transformCIAMAuthority(formatAuthorityUri(o)),st=new Authority(at,e,a,c,j,d,et);try{return await invokeAsync(st.resolveEndpointsAsync.bind(st),PerformanceEvents.AuthorityResolveEndpointsAsync,j,et,d)(),st}catch{throw createClientAuthError(endpointResolutionError)}}/*! @azure/msal-common v14.15.0 2024-09-20 */class BaseClient{constructor(e,a){this.config=buildClientConfiguration(e),this.logger=new Logger(this.config.loggerOptions,name$3,version$3),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.networkManager=new NetworkManager(this.networkClient,this.cacheManager),this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=a}createTokenRequestHeaders(e){const a={};if(a[HeaderNames.CONTENT_TYPE]=Constants$1.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case CcsCredentialType.HOME_ACCOUNT_ID:try{const c=buildClientInfoFromHomeAccountId(e.credential);a[HeaderNames.CCS_HEADER]=`Oid:${c.uid}@${c.utid}`}catch(c){this.logger.verbose("Could not parse home account ID for CCS Header: "+c)}break;case CcsCredentialType.UPN:a[HeaderNames.CCS_HEADER]=`UPN: ${e.credential}`;break}return a}async executePostToTokenEndpoint(e,a,c,j,d,et){var st,ct,ot,gt;et&&((st=this.performanceClient)==null||st.addQueueMeasurement(et,d));const at=await this.networkManager.sendPostRequest(j,e,{body:a,headers:c});return(gt=this.performanceClient)==null||gt.addFields({refreshTokenSize:((ct=at.body.refresh_token)==null?void 0:ct.length)||0,httpVerToken:((ot=at.headers)==null?void 0:ot[HeaderNames.X_MS_HTTP_VERSION])||""},d),this.config.serverTelemetryManager&&at.status<500&&at.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),at}async updateAuthority(e,a){var d;(d=this.performanceClient)==null||d.addQueueMeasurement(PerformanceEvents.UpdateTokenEndpointAuthority,a);const c=`https://${e}/${this.authority.tenant}/`,j=await createDiscoveredInstance(c,this.networkClient,this.cacheManager,this.authority.options,this.logger,a,this.performanceClient);this.authority=j}createTokenQueryParameters(e){const a=new RequestParameterBuilder;return e.tokenQueryParameters&&a.addExtraQueryParameters(e.tokenQueryParameters),a.createQueryString()}}/*! @azure/msal-common v14.15.0 2024-09-20 */const noTokensFound="no_tokens_found",nativeAccountUnavailable="native_account_unavailable",refreshTokenExpired="refresh_token_expired",interactionRequired="interaction_required",consentRequired="consent_required",loginRequired="login_required",badToken="bad_token";/*! @azure/msal-common v14.15.0 2024-09-20 */const InteractionRequiredServerErrorMessage=[interactionRequired,consentRequired,loginRequired,badToken],InteractionRequiredAuthSubErrorMessage=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],InteractionRequiredAuthErrorMessages={[noTokensFound]:"No refresh token found in the cache. Please sign-in.",[nativeAccountUnavailable]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[refreshTokenExpired]:"Refresh token has expired.",[badToken]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve."};class InteractionRequiredAuthError extends AuthError{constructor(e,a,c,j,d,et,at,st){super(e,a,c),Object.setPrototypeOf(this,InteractionRequiredAuthError.prototype),this.timestamp=j||Constants$1.EMPTY_STRING,this.traceId=d||Constants$1.EMPTY_STRING,this.correlationId=et||Constants$1.EMPTY_STRING,this.claims=at||Constants$1.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=st}}function isInteractionRequiredError(o,e,a){const c=!!o&&InteractionRequiredServerErrorMessage.indexOf(o)>-1,j=!!a&&InteractionRequiredAuthSubErrorMessage.indexOf(a)>-1,d=!!e&&InteractionRequiredServerErrorMessage.some(et=>e.indexOf(et)>-1);return c||d||j}function createInteractionRequiredAuthError(o){return new InteractionRequiredAuthError(o,InteractionRequiredAuthErrorMessages[o])}/*! @azure/msal-common v14.15.0 2024-09-20 */class ProtocolUtils{static setRequestState(e,a,c){const j=ProtocolUtils.generateLibraryState(e,c);return a?`${j}${Constants$1.RESOURCE_DELIM}${a}`:j}static generateLibraryState(e,a){if(!e)throw createClientAuthError(noCryptoObject);const c={id:e.createNewGuid()};a&&(c.meta=a);const j=JSON.stringify(c);return e.base64Encode(j)}static parseRequestState(e,a){if(!e)throw createClientAuthError(noCryptoObject);if(!a)throw createClientAuthError(invalidState);try{const c=a.split(Constants$1.RESOURCE_DELIM),j=c[0],d=c.length>1?c.slice(1).join(Constants$1.RESOURCE_DELIM):Constants$1.EMPTY_STRING,et=e.base64Decode(j),at=JSON.parse(et);return{userRequestState:d||Constants$1.EMPTY_STRING,libraryState:at}}catch{throw createClientAuthError(invalidState)}}}/*! @azure/msal-common v14.15.0 2024-09-20 */const KeyLocation={SW:"sw",UHW:"uhw"};class PopTokenGenerator{constructor(e,a){this.cryptoUtils=e,this.performanceClient=a}async generateCnf(e,a){var d;(d=this.performanceClient)==null||d.addQueueMeasurement(PerformanceEvents.PopTokenGenerateCnf,e.correlationId);const c=await invokeAsync(this.generateKid.bind(this),PerformanceEvents.PopTokenGenerateCnf,a,this.performanceClient,e.correlationId)(e),j=this.cryptoUtils.base64UrlEncode(JSON.stringify(c));return{kid:c.kid,reqCnfString:j}}async generateKid(e){var c;return(c=this.performanceClient)==null||c.addQueueMeasurement(PerformanceEvents.PopTokenGenerateKid,e.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:KeyLocation.SW}}async signPopToken(e,a,c){return this.signPayload(e,a,c)}async signPayload(e,a,c,j){const{resourceRequestMethod:d,resourceRequestUri:et,shrClaims:at,shrNonce:st,shrOptions:ct}=c,ot=et?new UrlString(et):void 0,gt=ot==null?void 0:ot.getUrlComponents();return this.cryptoUtils.signJwt({at:e,ts:nowSeconds(),m:d==null?void 0:d.toUpperCase(),u:gt==null?void 0:gt.HostNameAndPort,nonce:st||this.cryptoUtils.createNewGuid(),p:gt==null?void 0:gt.AbsolutePath,q:gt!=null&&gt.QueryString?[[],gt.QueryString]:void 0,client_claims:at||void 0,...j},a,ct,c.correlationId)}}/*! @azure/msal-common v14.15.0 2024-09-20 */class TokenCacheContext{constructor(e,a){this.cache=e,this.hasChanged=a}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}/*! @azure/msal-common v14.15.0 2024-09-20 */function parseServerErrorNo(o){var c,j;const e="code=",a=(c=o.error_uri)==null?void 0:c.lastIndexOf(e);return a&&a>=0?(j=o.error_uri)==null?void 0:j.substring(a+e.length):void 0}class ResponseHandler{constructor(e,a,c,j,d,et,at){this.clientId=e,this.cacheStorage=a,this.cryptoObj=c,this.logger=j,this.serializableCache=d,this.persistencePlugin=et,this.performanceClient=at}validateServerAuthorizationCodeResponse(e,a){if(!e.state||!a)throw e.state?createClientAuthError(stateNotFound,"Cached State"):createClientAuthError(stateNotFound,"Server State");let c,j;try{c=decodeURIComponent(e.state)}catch{throw createClientAuthError(invalidState,e.state)}try{j=decodeURIComponent(a)}catch{throw createClientAuthError(invalidState,e.state)}if(c!==j)throw createClientAuthError(stateMismatch);if(e.error||e.error_description||e.suberror){const d=parseServerErrorNo(e);throw isInteractionRequiredError(e.error,e.error_description,e.suberror)?new InteractionRequiredAuthError(e.error||"",e.error_description,e.suberror,e.timestamp||"",e.trace_id||"",e.correlation_id||"",e.claims||"",d):new ServerError(e.error||"",e.error_description,e.suberror,d)}}validateTokenResponse(e,a){var c;if(e.error||e.error_description||e.suberror){const j=`Error(s): ${e.error_codes||Constants$1.NOT_AVAILABLE} - Timestamp: ${e.timestamp||Constants$1.NOT_AVAILABLE} - Description: ${e.error_description||Constants$1.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||Constants$1.NOT_AVAILABLE} - Trace ID: ${e.trace_id||Constants$1.NOT_AVAILABLE}`,d=(c=e.error_codes)!=null&&c.length?e.error_codes[0]:void 0,et=new ServerError(e.error,j,e.suberror,d,e.status);if(a&&e.status&&e.status>=HttpStatus.SERVER_ERROR_RANGE_START&&e.status<=HttpStatus.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${et}`);return}else if(a&&e.status&&e.status>=HttpStatus.CLIENT_ERROR_RANGE_START&&e.status<=HttpStatus.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${et}`);return}throw isInteractionRequiredError(e.error,e.error_description,e.suberror)?new InteractionRequiredAuthError(e.error,e.error_description,e.suberror,e.timestamp||Constants$1.EMPTY_STRING,e.trace_id||Constants$1.EMPTY_STRING,e.correlation_id||Constants$1.EMPTY_STRING,e.claims||Constants$1.EMPTY_STRING,d):et}}async handleServerTokenResponse(e,a,c,j,d,et,at,st,ct){var vt;(vt=this.performanceClient)==null||vt.addQueueMeasurement(PerformanceEvents.HandleServerTokenResponse,e.correlation_id);let ot;if(e.id_token){if(ot=extractTokenClaims(e.id_token||Constants$1.EMPTY_STRING,this.cryptoObj.base64Decode),d&&d.nonce&&ot.nonce!==d.nonce)throw createClientAuthError(nonceMismatch);if(j.maxAge||j.maxAge===0){const rt=ot.auth_time;if(!rt)throw createClientAuthError(authTimeNotFound);checkMaxAge(rt,j.maxAge)}}this.homeAccountIdentifier=AccountEntity.generateHomeAccountId(e.client_info||Constants$1.EMPTY_STRING,a.authorityType,this.logger,this.cryptoObj,ot);let gt;d&&d.state&&(gt=ProtocolUtils.parseRequestState(this.cryptoObj,d.state)),e.key_id=e.key_id||j.sshKid||void 0;const ft=this.generateCacheRecord(e,a,c,j,ot,et,d);let yt;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),yt=new TokenCacheContext(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(yt)),at&&!st&&ft.account){const rt=ft.account.generateAccountKey();if(!this.cacheStorage.getAccount(rt,this.logger))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await ResponseHandler.generateAuthenticationResult(this.cryptoObj,a,ft,!1,j,ot,gt,void 0,ct)}await this.cacheStorage.saveCacheRecord(ft,j.storeInCache,j.correlationId)}finally{this.persistencePlugin&&this.serializableCache&&yt&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(yt))}return ResponseHandler.generateAuthenticationResult(this.cryptoObj,a,ft,!1,j,ot,gt,e,ct)}generateCacheRecord(e,a,c,j,d,et,at){const st=a.getPreferredCache();if(!st)throw createClientAuthError(invalidCacheEnvironment);const ct=getTenantIdFromIdTokenClaims(d);let ot,gt;e.id_token&&d&&(ot=createIdTokenEntity(this.homeAccountIdentifier,st,e.id_token,this.clientId,ct||""),gt=buildAccountToCache(this.cacheStorage,a,this.homeAccountIdentifier,this.cryptoObj.base64Decode,d,e.client_info,st,ct,at,void 0,this.logger));let ft=null;if(e.access_token){const rt=e.scope?ScopeSet.fromString(e.scope):new ScopeSet(j.scopes||[]),bt=(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,ht=(typeof e.ext_expires_in=="string"?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,wt=(typeof e.refresh_in=="string"?parseInt(e.refresh_in,10):e.refresh_in)||void 0,At=c+bt,Ct=At+ht,dt=wt&&wt>0?c+wt:void 0;ft=createAccessTokenEntity(this.homeAccountIdentifier,st,e.access_token,this.clientId,ct||a.tenant||"",rt.printScopes(),At,Ct,this.cryptoObj.base64Decode,dt,e.token_type,et,e.key_id,j.claims,j.requestedClaimsHash)}let yt=null;if(e.refresh_token){let rt;if(e.refresh_token_expires_in){const bt=typeof e.refresh_token_expires_in=="string"?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in;rt=c+bt}yt=createRefreshTokenEntity(this.homeAccountIdentifier,st,e.refresh_token,this.clientId,e.foci,et,rt)}let vt=null;return e.foci&&(vt={clientId:this.clientId,environment:st,familyId:e.foci}),{account:gt,idToken:ot,accessToken:ft,refreshToken:yt,appMetadata:vt}}static async generateAuthenticationResult(e,a,c,j,d,et,at,st,ct){var At,Ct,dt,Et,Rt;let ot=Constants$1.EMPTY_STRING,gt=[],ft=null,yt,vt,rt=Constants$1.EMPTY_STRING;if(c.accessToken){if(c.accessToken.tokenType===AuthenticationScheme.POP&&!d.popKid){const Mt=new PopTokenGenerator(e),{secret:_t,keyId:kt}=c.accessToken;if(!kt)throw createClientAuthError(keyIdMissing);ot=await Mt.signPopToken(_t,kt,d)}else ot=c.accessToken.secret;gt=ScopeSet.fromString(c.accessToken.target).asArray(),ft=new Date(Number(c.accessToken.expiresOn)*1e3),yt=new Date(Number(c.accessToken.extendedExpiresOn)*1e3),c.accessToken.refreshOn&&(vt=new Date(Number(c.accessToken.refreshOn)*1e3))}c.appMetadata&&(rt=c.appMetadata.familyId===THE_FAMILY_ID?THE_FAMILY_ID:"");const bt=(et==null?void 0:et.oid)||(et==null?void 0:et.sub)||"",ht=(et==null?void 0:et.tid)||"";st!=null&&st.spa_accountid&&c.account&&(c.account.nativeAccountId=st==null?void 0:st.spa_accountid);const wt=c.account?updateAccountTenantProfileData(c.account.getAccountInfo(),void 0,et,(At=c.idToken)==null?void 0:At.secret):null;return{authority:a.canonicalAuthority,uniqueId:bt,tenantId:ht,scopes:gt,account:wt,idToken:((Ct=c==null?void 0:c.idToken)==null?void 0:Ct.secret)||"",idTokenClaims:et||{},accessToken:ot,fromCache:j,expiresOn:ft,extExpiresOn:yt,refreshOn:vt,correlationId:d.correlationId,requestId:ct||Constants$1.EMPTY_STRING,familyId:rt,tokenType:((dt=c.accessToken)==null?void 0:dt.tokenType)||Constants$1.EMPTY_STRING,state:at?at.userRequestState:Constants$1.EMPTY_STRING,cloudGraphHostName:((Et=c.account)==null?void 0:Et.cloudGraphHostName)||Constants$1.EMPTY_STRING,msGraphHost:((Rt=c.account)==null?void 0:Rt.msGraphHost)||Constants$1.EMPTY_STRING,code:st==null?void 0:st.spa_code,fromNativeBroker:!1}}}function buildAccountToCache(o,e,a,c,j,d,et,at,st,ct,ot){ot==null||ot.verbose("setCachedAccount called");const ft=o.getAccountKeys().find(ht=>ht.startsWith(a));let yt=null;ft&&(yt=o.getAccount(ft,ot));const vt=yt||AccountEntity.createAccount({homeAccountId:a,idTokenClaims:j,clientInfo:d,environment:et,cloudGraphHostName:st==null?void 0:st.cloud_graph_host_name,msGraphHost:st==null?void 0:st.msgraph_host,nativeAccountId:ct},e,c),rt=vt.tenantProfiles||[],bt=at||vt.realm;if(bt&&!rt.find(ht=>ht.tenantId===bt)){const ht=buildTenantProfile(a,vt.localAccountId,bt,j);rt.push(ht)}return vt.tenantProfiles=rt,vt}/*! @azure/msal-common v14.15.0 2024-09-20 */async function getClientAssertion(o,e,a){return typeof o=="string"?o:o({clientId:e,tokenEndpoint:a})}/*! @azure/msal-common v14.15.0 2024-09-20 */class AuthorizationCodeClient extends BaseClient{constructor(e,a){var c;super(e,a),this.includeRedirectUri=!0,this.oidcDefaultScopes=(c=this.config.authOptions.authority.options.OIDCOptions)==null?void 0:c.defaultScopes}async getAuthCodeUrl(e){var c;(c=this.performanceClient)==null||c.addQueueMeasurement(PerformanceEvents.GetAuthCodeUrl,e.correlationId);const a=await invokeAsync(this.createAuthCodeUrlQueryString.bind(this),PerformanceEvents.AuthClientCreateQueryString,this.logger,this.performanceClient,e.correlationId)(e);return UrlString.appendQueryString(this.authority.authorizationEndpoint,a)}async acquireToken(e,a){var at,st;if((at=this.performanceClient)==null||at.addQueueMeasurement(PerformanceEvents.AuthClientAcquireToken,e.correlationId),!e.code)throw createClientAuthError(requestCannotBeMade);const c=nowSeconds(),j=await invokeAsync(this.executeTokenRequest.bind(this),PerformanceEvents.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(this.authority,e),d=(st=j.headers)==null?void 0:st[HeaderNames.X_MS_REQUEST_ID],et=new ResponseHandler(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return et.validateTokenResponse(j.body),invokeAsync(et.handleServerTokenResponse.bind(et),PerformanceEvents.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(j.body,this.authority,c,e,a,void 0,void 0,void 0,d)}handleFragmentResponse(e,a){if(new ResponseHandler(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,null,null).validateServerAuthorizationCodeResponse(e,a),!e.code)throw createClientAuthError(authorizationCodeMissingFromServerResponse);return e}getLogoutUri(e){if(!e)throw createClientConfigurationError(logoutRequestEmpty);const a=this.createLogoutUrlQueryString(e);return UrlString.appendQueryString(this.authority.endSessionEndpoint,a)}async executeTokenRequest(e,a){var ct,ot;(ct=this.performanceClient)==null||ct.addQueueMeasurement(PerformanceEvents.AuthClientExecuteTokenRequest,a.correlationId);const c=this.createTokenQueryParameters(a),j=UrlString.appendQueryString(e.tokenEndpoint,c),d=await invokeAsync(this.createTokenRequestBody.bind(this),PerformanceEvents.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,a.correlationId)(a);let et;if(a.clientInfo)try{const gt=buildClientInfo(a.clientInfo,this.cryptoUtils.base64Decode);et={credential:`${gt.uid}${Separators.CLIENT_INFO_SEPARATOR}${gt.utid}`,type:CcsCredentialType.HOME_ACCOUNT_ID}}catch(gt){this.logger.verbose("Could not parse client info for CCS Header: "+gt)}const at=this.createTokenRequestHeaders(et||a.ccsCredential),st={clientId:((ot=a.tokenBodyParameters)==null?void 0:ot.clientId)||this.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:a.scopes,claims:a.claims,authenticationScheme:a.authenticationScheme,resourceRequestMethod:a.resourceRequestMethod,resourceRequestUri:a.resourceRequestUri,shrClaims:a.shrClaims,sshKid:a.sshKid};return invokeAsync(this.executePostToTokenEndpoint.bind(this),PerformanceEvents.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,a.correlationId)(j,d,at,st,a.correlationId,PerformanceEvents.AuthorizationCodeClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){var d,et;(d=this.performanceClient)==null||d.addQueueMeasurement(PerformanceEvents.AuthClientCreateTokenRequestBody,e.correlationId);const a=new RequestParameterBuilder;if(a.addClientId(((et=e.tokenBodyParameters)==null?void 0:et[CLIENT_ID])||this.config.authOptions.clientId),this.includeRedirectUri?a.addRedirectUri(e.redirectUri):RequestValidator.validateRedirectUri(e.redirectUri),a.addScopes(e.scopes,!0,this.oidcDefaultScopes),a.addAuthorizationCode(e.code),a.addLibraryInfo(this.config.libraryInfo),a.addApplicationTelemetry(this.config.telemetry.application),a.addThrottling(),this.serverTelemetryManager&&!isOidcProtocolMode(this.config)&&a.addServerTelemetry(this.serverTelemetryManager),e.codeVerifier&&a.addCodeVerifier(e.codeVerifier),this.config.clientCredentials.clientSecret&&a.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const at=this.config.clientCredentials.clientAssertion;a.addClientAssertion(await getClientAssertion(at.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),a.addClientAssertionType(at.assertionType)}if(a.addGrantType(GrantType.AUTHORIZATION_CODE_GRANT),a.addClientInfo(),e.authenticationScheme===AuthenticationScheme.POP){const at=new PopTokenGenerator(this.cryptoUtils,this.performanceClient);let st;e.popKid?st=this.cryptoUtils.encodeKid(e.popKid):st=(await invokeAsync(at.generateCnf.bind(at),PerformanceEvents.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,a.addPopToken(st)}else if(e.authenticationScheme===AuthenticationScheme.SSH)if(e.sshJwk)a.addSshJwk(e.sshJwk);else throw createClientConfigurationError(missingSshJwk);const c=e.correlationId||this.config.cryptoInterface.createNewGuid();a.addCorrelationId(c),(!StringUtils.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&a.addClaims(e.claims,this.config.authOptions.clientCapabilities);let j;if(e.clientInfo)try{const at=buildClientInfo(e.clientInfo,this.cryptoUtils.base64Decode);j={credential:`${at.uid}${Separators.CLIENT_INFO_SEPARATOR}${at.utid}`,type:CcsCredentialType.HOME_ACCOUNT_ID}}catch(at){this.logger.verbose("Could not parse client info for CCS Header: "+at)}else j=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&j)switch(j.type){case CcsCredentialType.HOME_ACCOUNT_ID:try{const at=buildClientInfoFromHomeAccountId(j.credential);a.addCcsOid(at)}catch(at){this.logger.verbose("Could not parse home account ID for CCS Header: "+at)}break;case CcsCredentialType.UPN:a.addCcsUpn(j.credential);break}return e.tokenBodyParameters&&a.addExtraQueryParameters(e.tokenBodyParameters),e.enableSpaAuthorizationCode&&(!e.tokenBodyParameters||!e.tokenBodyParameters[RETURN_SPA_CODE])&&a.addExtraQueryParameters({[RETURN_SPA_CODE]:"1"}),a.createQueryString()}async createAuthCodeUrlQueryString(e){var d,et;(d=this.performanceClient)==null||d.addQueueMeasurement(PerformanceEvents.AuthClientCreateQueryString,e.correlationId);const a=new RequestParameterBuilder;a.addClientId(((et=e.extraQueryParameters)==null?void 0:et[CLIENT_ID])||this.config.authOptions.clientId);const c=[...e.scopes||[],...e.extraScopesToConsent||[]];a.addScopes(c,!0,this.oidcDefaultScopes),a.addRedirectUri(e.redirectUri);const j=e.correlationId||this.config.cryptoInterface.createNewGuid();if(a.addCorrelationId(j),a.addResponseMode(e.responseMode),a.addResponseTypeCode(),a.addLibraryInfo(this.config.libraryInfo),isOidcProtocolMode(this.config)||a.addApplicationTelemetry(this.config.telemetry.application),a.addClientInfo(),e.codeChallenge&&e.codeChallengeMethod&&a.addCodeChallengeParams(e.codeChallenge,e.codeChallengeMethod),e.prompt&&a.addPrompt(e.prompt),e.domainHint&&a.addDomainHint(e.domainHint),e.prompt!==PromptValue.SELECT_ACCOUNT)if(e.sid&&e.prompt===PromptValue.NONE)this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),a.addSid(e.sid);else if(e.account){const at=this.extractAccountSid(e.account);let st=this.extractLoginHint(e.account);if(st&&e.domainHint&&(this.logger.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),st=null),st){this.logger.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),a.addLoginHint(st);try{const ct=buildClientInfoFromHomeAccountId(e.account.homeAccountId);a.addCcsOid(ct)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(at&&e.prompt===PromptValue.NONE){this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),a.addSid(at);try{const ct=buildClientInfoFromHomeAccountId(e.account.homeAccountId);a.addCcsOid(ct)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),a.addLoginHint(e.loginHint),a.addCcsUpn(e.loginHint);else if(e.account.username){this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),a.addLoginHint(e.account.username);try{const ct=buildClientInfoFromHomeAccountId(e.account.homeAccountId);a.addCcsOid(ct)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(this.logger.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),a.addLoginHint(e.loginHint),a.addCcsUpn(e.loginHint));else this.logger.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");if(e.nonce&&a.addNonce(e.nonce),e.state&&a.addState(e.state),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&a.addClaims(e.claims,this.config.authOptions.clientCapabilities),this.addExtraQueryParams(e,a),e.nativeBroker&&(a.addNativeBroker(),e.authenticationScheme===AuthenticationScheme.POP)){const at=new PopTokenGenerator(this.cryptoUtils);let st;e.popKid?st=this.cryptoUtils.encodeKid(e.popKid):st=(await invokeAsync(at.generateCnf.bind(at),PerformanceEvents.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,a.addPopToken(st)}return a.createQueryString()}createLogoutUrlQueryString(e){const a=new RequestParameterBuilder;return e.postLogoutRedirectUri&&a.addPostLogoutRedirectUri(e.postLogoutRedirectUri),e.correlationId&&a.addCorrelationId(e.correlationId),e.idTokenHint&&a.addIdTokenHint(e.idTokenHint),e.state&&a.addState(e.state),e.logoutHint&&a.addLogoutHint(e.logoutHint),this.addExtraQueryParams(e,a),a.createQueryString()}addExtraQueryParams(e,a){!(e.extraQueryParameters&&e.extraQueryParameters.hasOwnProperty("instance_aware"))&&this.config.authOptions.instanceAware&&(e.extraQueryParameters=e.extraQueryParameters||{},e.extraQueryParameters.instance_aware="true"),e.extraQueryParameters&&a.addExtraQueryParameters(e.extraQueryParameters)}extractAccountSid(e){var a;return((a=e.idTokenClaims)==null?void 0:a.sid)||null}extractLoginHint(e){var a;return((a=e.idTokenClaims)==null?void 0:a.login_hint)||null}}/*! @azure/msal-common v14.15.0 2024-09-20 */const DEFAULT_REFRESH_TOKEN_EXPIRATION_OFFSET_SECONDS=300;class RefreshTokenClient extends BaseClient{constructor(e,a){super(e,a)}async acquireToken(e){var et,at;(et=this.performanceClient)==null||et.addQueueMeasurement(PerformanceEvents.RefreshTokenClientAcquireToken,e.correlationId);const a=nowSeconds(),c=await invokeAsync(this.executeTokenRequest.bind(this),PerformanceEvents.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(e,this.authority),j=(at=c.headers)==null?void 0:at[HeaderNames.X_MS_REQUEST_ID],d=new ResponseHandler(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return d.validateTokenResponse(c.body),invokeAsync(d.handleServerTokenResponse.bind(d),PerformanceEvents.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(c.body,this.authority,a,e,void 0,void 0,!0,e.forceCache,j)}async acquireTokenByRefreshToken(e){var c;if(!e)throw createClientConfigurationError(tokenRequestEmpty);if((c=this.performanceClient)==null||c.addQueueMeasurement(PerformanceEvents.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw createClientAuthError(noAccountInSilentRequest);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await invokeAsync(this.acquireTokenWithCachedRefreshToken.bind(this),PerformanceEvents.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(j){const d=j instanceof InteractionRequiredAuthError&&j.errorCode===noTokensFound,et=j instanceof ServerError&&j.errorCode===Errors.INVALID_GRANT_ERROR&&j.subError===Errors.CLIENT_MISMATCH_ERROR;if(d||et)return invokeAsync(this.acquireTokenWithCachedRefreshToken.bind(this),PerformanceEvents.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1);throw j}return invokeAsync(this.acquireTokenWithCachedRefreshToken.bind(this),PerformanceEvents.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,a){var d;(d=this.performanceClient)==null||d.addQueueMeasurement(PerformanceEvents.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);const c=invoke(this.cacheManager.getRefreshToken.bind(this.cacheManager),PerformanceEvents.CacheManagerGetRefreshToken,this.logger,this.performanceClient,e.correlationId)(e.account,a,void 0,this.performanceClient,e.correlationId);if(!c)throw createInteractionRequiredAuthError(noTokensFound);if(c.expiresOn&&isTokenExpired(c.expiresOn,e.refreshTokenExpirationOffsetSeconds||DEFAULT_REFRESH_TOKEN_EXPIRATION_OFFSET_SECONDS))throw createInteractionRequiredAuthError(refreshTokenExpired);const j={...e,refreshToken:c.secret,authenticationScheme:e.authenticationScheme||AuthenticationScheme.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:CcsCredentialType.HOME_ACCOUNT_ID}};try{return await invokeAsync(this.acquireToken.bind(this),PerformanceEvents.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(j)}catch(et){if(et instanceof InteractionRequiredAuthError&&et.subError===badToken){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");const at=generateCredentialKey(c);this.cacheManager.removeRefreshToken(at)}throw et}}async executeTokenRequest(e,a){var st,ct;(st=this.performanceClient)==null||st.addQueueMeasurement(PerformanceEvents.RefreshTokenClientExecuteTokenRequest,e.correlationId);const c=this.createTokenQueryParameters(e),j=UrlString.appendQueryString(a.tokenEndpoint,c),d=await invokeAsync(this.createTokenRequestBody.bind(this),PerformanceEvents.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,e.correlationId)(e),et=this.createTokenRequestHeaders(e.ccsCredential),at={clientId:((ct=e.tokenBodyParameters)==null?void 0:ct.clientId)||this.config.authOptions.clientId,authority:a.canonicalAuthority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};return invokeAsync(this.executePostToTokenEndpoint.bind(this),PerformanceEvents.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,e.correlationId)(j,d,et,at,e.correlationId,PerformanceEvents.RefreshTokenClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){var j,d,et;(j=this.performanceClient)==null||j.addQueueMeasurement(PerformanceEvents.RefreshTokenClientCreateTokenRequestBody,e.correlationId);const a=e.correlationId,c=new RequestParameterBuilder;if(c.addClientId(((d=e.tokenBodyParameters)==null?void 0:d[CLIENT_ID])||this.config.authOptions.clientId),e.redirectUri&&c.addRedirectUri(e.redirectUri),c.addScopes(e.scopes,!0,(et=this.config.authOptions.authority.options.OIDCOptions)==null?void 0:et.defaultScopes),c.addGrantType(GrantType.REFRESH_TOKEN_GRANT),c.addClientInfo(),c.addLibraryInfo(this.config.libraryInfo),c.addApplicationTelemetry(this.config.telemetry.application),c.addThrottling(),this.serverTelemetryManager&&!isOidcProtocolMode(this.config)&&c.addServerTelemetry(this.serverTelemetryManager),c.addCorrelationId(a),c.addRefreshToken(e.refreshToken),this.config.clientCredentials.clientSecret&&c.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const at=this.config.clientCredentials.clientAssertion;c.addClientAssertion(await getClientAssertion(at.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),c.addClientAssertionType(at.assertionType)}if(e.authenticationScheme===AuthenticationScheme.POP){const at=new PopTokenGenerator(this.cryptoUtils,this.performanceClient);let st;e.popKid?st=this.cryptoUtils.encodeKid(e.popKid):st=(await invokeAsync(at.generateCnf.bind(at),PerformanceEvents.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,c.addPopToken(st)}else if(e.authenticationScheme===AuthenticationScheme.SSH)if(e.sshJwk)c.addSshJwk(e.sshJwk);else throw createClientConfigurationError(missingSshJwk);if((!StringUtils.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&c.addClaims(e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case CcsCredentialType.HOME_ACCOUNT_ID:try{const at=buildClientInfoFromHomeAccountId(e.ccsCredential.credential);c.addCcsOid(at)}catch(at){this.logger.verbose("Could not parse home account ID for CCS Header: "+at)}break;case CcsCredentialType.UPN:c.addCcsUpn(e.ccsCredential.credential);break}return e.tokenBodyParameters&&c.addExtraQueryParameters(e.tokenBodyParameters),c.createQueryString()}}/*! @azure/msal-common v14.15.0 2024-09-20 */class SilentFlowClient extends BaseClient{constructor(e,a){super(e,a)}async acquireToken(e){var a;try{const[c,j]=await this.acquireCachedToken({...e,scopes:(a=e.scopes)!=null&&a.length?e.scopes:[...OIDC_DEFAULT_SCOPES]});return j===CacheOutcome.PROACTIVELY_REFRESHED&&(this.logger.info("SilentFlowClient:acquireCachedToken - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),new RefreshTokenClient(this.config,this.performanceClient).acquireTokenByRefreshToken(e).catch(()=>{})),c}catch(c){if(c instanceof ClientAuthError&&c.errorCode===tokenRefreshRequired)return new RefreshTokenClient(this.config,this.performanceClient).acquireTokenByRefreshToken(e);throw c}}async acquireCachedToken(e){var st;(st=this.performanceClient)==null||st.addQueueMeasurement(PerformanceEvents.SilentFlowClientAcquireCachedToken,e.correlationId);let a=CacheOutcome.NOT_APPLICABLE;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!StringUtils.isEmptyObj(e.claims))throw this.setCacheOutcome(CacheOutcome.FORCE_REFRESH_OR_CLAIMS,e.correlationId),createClientAuthError(tokenRefreshRequired);if(!e.account)throw createClientAuthError(noAccountInSilentRequest);const c=e.account.tenantId||getTenantFromAuthorityString(e.authority),j=this.cacheManager.getTokenKeys(),d=this.cacheManager.getAccessToken(e.account,e,j,c,this.performanceClient,e.correlationId);if(d){if(wasClockTurnedBack(d.cachedAt)||isTokenExpired(d.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(CacheOutcome.CACHED_ACCESS_TOKEN_EXPIRED,e.correlationId),createClientAuthError(tokenRefreshRequired);d.refreshOn&&isTokenExpired(d.refreshOn,0)&&(a=CacheOutcome.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(CacheOutcome.NO_CACHED_ACCESS_TOKEN,e.correlationId),createClientAuthError(tokenRefreshRequired);const et=e.authority||this.authority.getPreferredCache(),at={account:this.cacheManager.readAccountFromCache(e.account),accessToken:d,idToken:this.cacheManager.getIdToken(e.account,j,c,this.performanceClient,e.correlationId),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(et)};return this.setCacheOutcome(a,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await invokeAsync(this.generateResultFromCacheRecord.bind(this),PerformanceEvents.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,e.correlationId)(at,e),a]}setCacheOutcome(e,a){var c,j;(c=this.serverTelemetryManager)==null||c.setCacheOutcome(e),(j=this.performanceClient)==null||j.addFields({cacheOutcome:e},a),e!==CacheOutcome.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}async generateResultFromCacheRecord(e,a){var j;(j=this.performanceClient)==null||j.addQueueMeasurement(PerformanceEvents.SilentFlowClientGenerateResultFromCacheRecord,a.correlationId);let c;if(e.idToken&&(c=extractTokenClaims(e.idToken.secret,this.config.cryptoInterface.base64Decode)),a.maxAge||a.maxAge===0){const d=c==null?void 0:c.auth_time;if(!d)throw createClientAuthError(authTimeNotFound);checkMaxAge(d,a.maxAge)}return ResponseHandler.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,a,c)}}/*! @azure/msal-common v14.15.0 2024-09-20 */const StubbedNetworkModule={sendGetRequestAsync:()=>Promise.reject(createClientAuthError(methodNotImplemented)),sendPostRequestAsync:()=>Promise.reject(createClientAuthError(methodNotImplemented))};/*! @azure/msal-common v14.15.0 2024-09-20 */const skuGroupSeparator=",",skuValueSeparator="|";function makeExtraSkuString(o){const{skus:e,libraryName:a,libraryVersion:c,extensionName:j,extensionVersion:d}=o,et=new Map([[0,[a,c]],[2,[j,d]]]);let at=[];if(e!=null&&e.length){if(at=e.split(skuGroupSeparator),at.length<4)return e}else at=Array.from({length:4},()=>skuValueSeparator);return et.forEach((st,ct)=>{var ot,gt;st.length===2&&((ot=st[0])!=null&&ot.length)&&((gt=st[1])!=null&&gt.length)&&setSku({skuArr:at,index:ct,skuName:st[0],skuVersion:st[1]})}),at.join(skuGroupSeparator)}function setSku(o){const{skuArr:e,index:a,skuName:c,skuVersion:j}=o;a>=e.length||(e[a]=[c,j].join(skuValueSeparator))}class ServerTelemetryManager{constructor(e,a){this.cacheOutcome=CacheOutcome.NOT_APPLICABLE,this.cacheManager=a,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||Constants$1.EMPTY_STRING,this.wrapperVer=e.wrapperVer||Constants$1.EMPTY_STRING,this.telemetryCacheKey=SERVER_TELEM_CONSTANTS.CACHE_KEY+Separators.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){const e=`${this.apiId}${SERVER_TELEM_CONSTANTS.VALUE_SEPARATOR}${this.cacheOutcome}`,a=[this.wrapperSKU,this.wrapperVer],c=this.getNativeBrokerErrorCode();c!=null&&c.length&&a.push(`broker_error=${c}`);const j=a.join(SERVER_TELEM_CONSTANTS.VALUE_SEPARATOR),d=this.getRegionDiscoveryFields(),et=[e,d].join(SERVER_TELEM_CONSTANTS.VALUE_SEPARATOR);return[SERVER_TELEM_CONSTANTS.SCHEMA_VERSION,et,j].join(SERVER_TELEM_CONSTANTS.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const e=this.getLastRequests(),a=ServerTelemetryManager.maxErrorsToSend(e),c=e.failedRequests.slice(0,2*a).join(SERVER_TELEM_CONSTANTS.VALUE_SEPARATOR),j=e.errors.slice(0,a).join(SERVER_TELEM_CONSTANTS.VALUE_SEPARATOR),d=e.errors.length,et=a<d?SERVER_TELEM_CONSTANTS.OVERFLOW_TRUE:SERVER_TELEM_CONSTANTS.OVERFLOW_FALSE,at=[d,et].join(SERVER_TELEM_CONSTANTS.VALUE_SEPARATOR);return[SERVER_TELEM_CONSTANTS.SCHEMA_VERSION,e.cacheHits,c,j,at].join(SERVER_TELEM_CONSTANTS.CATEGORY_SEPARATOR)}cacheFailedRequest(e){const a=this.getLastRequests();a.errors.length>=SERVER_TELEM_CONSTANTS.MAX_CACHED_ERRORS&&(a.failedRequests.shift(),a.failedRequests.shift(),a.errors.shift()),a.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof AuthError?e.subError?a.errors.push(e.subError):e.errorCode?a.errors.push(e.errorCode):a.errors.push(e.toString()):a.errors.push(e.toString()):a.errors.push(SERVER_TELEM_CONSTANTS.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,a)}incrementCacheHits(){const e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e),e.cacheHits}getLastRequests(){const e={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||e}clearTelemetryCache(){const e=this.getLastRequests(),a=ServerTelemetryManager.maxErrorsToSend(e),c=e.errors.length;if(a===c)this.cacheManager.removeItem(this.telemetryCacheKey);else{const j={failedRequests:e.failedRequests.slice(a*2),errors:e.errors.slice(a),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,j)}}static maxErrorsToSend(e){let a,c=0,j=0;const d=e.errors.length;for(a=0;a<d;a++){const et=e.failedRequests[2*a]||Constants$1.EMPTY_STRING,at=e.failedRequests[2*a+1]||Constants$1.EMPTY_STRING,st=e.errors[a]||Constants$1.EMPTY_STRING;if(j+=et.toString().length+at.toString().length+st.length+3,j<SERVER_TELEM_CONSTANTS.MAX_LAST_HEADER_BYTES)c+=1;else break}return c}getRegionDiscoveryFields(){const e=[];return e.push(this.regionUsed||Constants$1.EMPTY_STRING),e.push(this.regionSource||Constants$1.EMPTY_STRING),e.push(this.regionOutcome||Constants$1.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){const a=this.getLastRequests();a.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,a)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e)}static makeExtraSkuString(e){return makeExtraSkuString(e)}}/*! @azure/msal-common v14.15.0 2024-09-20 */const missingKidError="missing_kid_error",missingAlgError="missing_alg_error";/*! @azure/msal-common v14.15.0 2024-09-20 */const JoseHeaderErrorMessages={[missingKidError]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[missingAlgError]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class JoseHeaderError extends AuthError{constructor(e,a){super(e,a),this.name="JoseHeaderError",Object.setPrototypeOf(this,JoseHeaderError.prototype)}}function createJoseHeaderError(o){return new JoseHeaderError(o,JoseHeaderErrorMessages[o])}/*! @azure/msal-common v14.15.0 2024-09-20 */class JoseHeader{constructor(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}static getShrHeaderString(e){if(!e.kid)throw createJoseHeaderError(missingKidError);if(!e.alg)throw createJoseHeaderError(missingAlgError);const a=new JoseHeader({typ:e.typ||JsonWebTokenTypes.Pop,kid:e.kid,alg:e.alg});return JSON.stringify(a)}}/*! @azure/msal-common v14.15.0 2024-09-20 */class StubPerformanceMeasurement{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class StubPerformanceClient{generateId(){return"callback-id"}startMeasurement(e,a){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:PerformanceEventStatus.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:a||""},measurement:new StubPerformanceMeasurement}}startPerformanceMeasurement(){return new StubPerformanceMeasurement}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}/*! @azure/msal-browser v3.26.1 2024-10-08 */const pkceNotCreated="pkce_not_created",cryptoNonExistent="crypto_nonexistent",emptyNavigateUri="empty_navigate_uri",hashEmptyError="hash_empty_error",noStateInHash="no_state_in_hash",hashDoesNotContainKnownProperties="hash_does_not_contain_known_properties",unableToParseState="unable_to_parse_state",stateInteractionTypeMismatch="state_interaction_type_mismatch",interactionInProgress="interaction_in_progress",popupWindowError="popup_window_error",emptyWindowError="empty_window_error",userCancelled="user_cancelled",monitorPopupTimeout="monitor_popup_timeout",monitorWindowTimeout="monitor_window_timeout",redirectInIframe="redirect_in_iframe",blockIframeReload="block_iframe_reload",blockNestedPopups="block_nested_popups",iframeClosedPrematurely="iframe_closed_prematurely",silentLogoutUnsupported="silent_logout_unsupported",noAccountError="no_account_error",silentPromptValueError="silent_prompt_value_error",noTokenRequestCacheError="no_token_request_cache_error",unableToParseTokenRequestCacheError="unable_to_parse_token_request_cache_error",noCachedAuthorityError="no_cached_authority_error",authRequestNotSetError="auth_request_not_set_error",invalidCacheType="invalid_cache_type",nonBrowserEnvironment="non_browser_environment",databaseNotOpen="database_not_open",noNetworkConnectivity="no_network_connectivity",postRequestFailed="post_request_failed",getRequestFailed="get_request_failed",failedToParseResponse="failed_to_parse_response",unableToLoadToken="unable_to_load_token",cryptoKeyNotFound="crypto_key_not_found",authCodeRequired="auth_code_required",authCodeOrNativeAccountIdRequired="auth_code_or_nativeAccountId_required",spaCodeAndNativeAccountIdPresent="spa_code_and_nativeAccountId_present",databaseUnavailable="database_unavailable",unableToAcquireTokenFromNativePlatform="unable_to_acquire_token_from_native_platform",nativeHandshakeTimeout="native_handshake_timeout",nativeExtensionNotInstalled="native_extension_not_installed",nativeConnectionNotEstablished="native_connection_not_established",uninitializedPublicClientApplication="uninitialized_public_client_application",nativePromptNotSupported="native_prompt_not_supported",invalidBase64String="invalid_base64_string",invalidPopTokenRequest="invalid_pop_token_request";/*! @azure/msal-browser v3.26.1 2024-10-08 */const ErrorLink="For more visit: aka.ms/msaljs/browser-errors",BrowserAuthErrorMessages={[pkceNotCreated]:"The PKCE code challenge and verifier could not be generated.",[cryptoNonExistent]:"The crypto object or function is not available.",[emptyNavigateUri]:"Navigation URI is empty. Please check stack trace for more info.",[hashEmptyError]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${ErrorLink}`,[noStateInHash]:"Hash does not contain state. Please verify that the request originated from msal.",[hashDoesNotContainKnownProperties]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${ErrorLink}`,[unableToParseState]:"Unable to parse state. Please verify that the request originated from msal.",[stateInteractionTypeMismatch]:"Hash contains state but the interaction type does not match the caller.",[interactionInProgress]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${ErrorLink}`,[popupWindowError]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[emptyWindowError]:"window.open returned null or undefined window object.",[userCancelled]:"User cancelled the flow.",[monitorPopupTimeout]:`Token acquisition in popup failed due to timeout.  ${ErrorLink}`,[monitorWindowTimeout]:`Token acquisition in iframe failed due to timeout.  ${ErrorLink}`,[redirectInIframe]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[blockIframeReload]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${ErrorLink}`,[blockNestedPopups]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[iframeClosedPrematurely]:"The iframe being monitored was closed prematurely.",[silentLogoutUnsupported]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[noAccountError]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[silentPromptValueError]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[noTokenRequestCacheError]:"No token request found in cache.",[unableToParseTokenRequestCacheError]:"The cached token request could not be parsed.",[noCachedAuthorityError]:"No cached authority found.",[authRequestNotSetError]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[invalidCacheType]:"Invalid cache type",[nonBrowserEnvironment]:"Login and token requests are not supported in non-browser environments.",[databaseNotOpen]:"Database is not open!",[noNetworkConnectivity]:"No network connectivity. Check your internet connection.",[postRequestFailed]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[getRequestFailed]:"Network request failed. Please check the network trace to determine root cause.",[failedToParseResponse]:"Failed to parse network response. Check network trace.",[unableToLoadToken]:"Error loading token to cache.",[cryptoKeyNotFound]:"Cryptographic Key or Keypair not found in browser storage.",[authCodeRequired]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[authCodeOrNativeAccountIdRequired]:"An authorization code or nativeAccountId must be provided to this flow.",[spaCodeAndNativeAccountIdPresent]:"Request cannot contain both spa code and native account id.",[databaseUnavailable]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[unableToAcquireTokenFromNativePlatform]:`Unable to acquire token from native platform.  ${ErrorLink}`,[nativeHandshakeTimeout]:"Timed out while attempting to establish connection to browser extension",[nativeExtensionNotInstalled]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[nativeConnectionNotEstablished]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${ErrorLink}`,[uninitializedPublicClientApplication]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${ErrorLink}`,[nativePromptNotSupported]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[invalidBase64String]:"Invalid base64 encoded string.",[invalidPopTokenRequest]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true."};class BrowserAuthError extends AuthError{constructor(e){super(e,BrowserAuthErrorMessages[e]),Object.setPrototypeOf(this,BrowserAuthError.prototype),this.name="BrowserAuthError"}}function createBrowserAuthError(o){return new BrowserAuthError(o)}/*! @azure/msal-browser v3.26.1 2024-10-08 */const BrowserConstants={INTERACTION_IN_PROGRESS_VALUE:"interaction_in_progress",INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",DEFAULT_POLL_INTERVAL_MS:30,MSAL_SKU:"msal.js.browser"},NativeConstants={CHANNEL_ID:"53ee284d-920a-4b59-9d30-a60315b26836",PREFERRED_EXTENSION_ID:"ppnbnpeolgkicgegkbkbjmhlideopiji",MATS_TELEMETRY:"MATS"},NativeExtensionMethod={HandshakeRequest:"Handshake",HandshakeResponse:"HandshakeResponse",GetToken:"GetToken",Response:"Response"},BrowserCacheLocation={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"},HTTP_REQUEST_TYPE={GET:"GET",POST:"POST"},TemporaryCacheKeys={AUTHORITY:"authority",ACQUIRE_TOKEN_ACCOUNT:"acquireToken.account",SESSION_STATE:"session.state",REQUEST_STATE:"request.state",NONCE_IDTOKEN:"nonce.id_token",ORIGIN_URI:"request.origin",RENEW_STATUS:"token.renew.status",URL_HASH:"urlHash",REQUEST_PARAMS:"request.params",SCOPES:"scopes",INTERACTION_STATUS_KEY:"interaction.status",CCS_CREDENTIAL:"ccs.credential",CORRELATION_ID:"request.correlationId",NATIVE_REQUEST:"request.native",REDIRECT_CONTEXT:"request.redirect.context"},StaticCacheKeys={ACCOUNT_KEYS:"msal.account.keys",TOKEN_KEYS:"msal.token.keys"},InMemoryCacheKeys={WRAPPER_SKU:"wrapper.sku",WRAPPER_VER:"wrapper.version"},ApiId={acquireTokenRedirect:861,acquireTokenPopup:862,ssoSilent:863,acquireTokenSilent_authCode:864,handleRedirectPromise:865,acquireTokenByCode:866,acquireTokenSilent_silentFlow:61,logout:961,logoutPopup:962};var InteractionType;(function(o){o.Redirect="redirect",o.Popup="popup",o.Silent="silent",o.None="none"})(InteractionType||(InteractionType={}));const InteractionStatus={Startup:"startup",Login:"login",Logout:"logout",AcquireToken:"acquireToken",SsoSilent:"ssoSilent",HandleRedirect:"handleRedirect",None:"none"},DEFAULT_REQUEST={scopes:OIDC_DEFAULT_SCOPES},KEY_FORMAT_JWK="jwk",WrapperSKU={React:"@azure/msal-react",Angular:"@azure/msal-angular"},DB_NAME="msal.db",DB_VERSION=1,DB_TABLE_NAME=`${DB_NAME}.keys`,CacheLookupPolicy={Default:0,AccessToken:1,AccessTokenAndRefreshToken:2,RefreshToken:3,RefreshTokenAndNetwork:4,Skip:5},iFrameRenewalPolicies=[CacheLookupPolicy.Default,CacheLookupPolicy.Skip,CacheLookupPolicy.RefreshTokenAndNetwork],LOG_LEVEL_CACHE_KEY="msal.browser.log.level",LOG_PII_CACHE_KEY="msal.browser.log.pii";/*! @azure/msal-browser v3.26.1 2024-10-08 */function urlEncode(o){return encodeURIComponent(base64Encode(o).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function urlEncodeArr(o){return base64EncArr(o).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function base64Encode(o){return base64EncArr(new TextEncoder().encode(o))}function base64EncArr(o){const e=Array.from(o,a=>String.fromCodePoint(a)).join("");return btoa(e)}/*! @azure/msal-browser v3.26.1 2024-10-08 */const PKCS1_V15_KEYGEN_ALG="RSASSA-PKCS1-v1_5",S256_HASH_ALG="SHA-256",MODULUS_LENGTH=2048,PUBLIC_EXPONENT=new Uint8Array([1,0,1]),UUID_CHARS="0123456789abcdef",UINT32_ARR=new Uint32Array(1),keygenAlgorithmOptions={name:PKCS1_V15_KEYGEN_ALG,hash:S256_HASH_ALG,modulusLength:MODULUS_LENGTH,publicExponent:PUBLIC_EXPONENT};function validateCryptoAvailable(o){if("crypto"in window)o.verbose("BrowserCrypto: modern crypto interface available");else throw o.error("BrowserCrypto: crypto interface is unavailable"),createBrowserAuthError(cryptoNonExistent)}async function sha256Digest(o,e,a){e==null||e.addQueueMeasurement(PerformanceEvents.Sha256Digest,a);const j=new TextEncoder().encode(o);return window.crypto.subtle.digest(S256_HASH_ALG,j)}function getRandomValues(o){return window.crypto.getRandomValues(o)}function getRandomUint32(){return window.crypto.getRandomValues(UINT32_ARR),UINT32_ARR[0]}function createNewGuid(){const o=Date.now(),e=getRandomUint32()*1024+(getRandomUint32()&1023),a=new Uint8Array(16),c=Math.trunc(e/2**30),j=e&2**30-1,d=getRandomUint32();a[0]=o/2**40,a[1]=o/2**32,a[2]=o/2**24,a[3]=o/2**16,a[4]=o/2**8,a[5]=o,a[6]=112|c>>>8,a[7]=c,a[8]=128|j>>>24,a[9]=j>>>16,a[10]=j>>>8,a[11]=j,a[12]=d>>>24,a[13]=d>>>16,a[14]=d>>>8,a[15]=d;let et="";for(let at=0;at<a.length;at++)et+=UUID_CHARS.charAt(a[at]>>>4),et+=UUID_CHARS.charAt(a[at]&15),(at===3||at===5||at===7||at===9)&&(et+="-");return et}async function generateKeyPair(o,e){return window.crypto.subtle.generateKey(keygenAlgorithmOptions,o,e)}async function exportJwk(o){return window.crypto.subtle.exportKey(KEY_FORMAT_JWK,o)}async function importJwk(o,e,a){return window.crypto.subtle.importKey(KEY_FORMAT_JWK,o,keygenAlgorithmOptions,e,a)}async function sign$1(o,e){return window.crypto.subtle.sign(keygenAlgorithmOptions,o,e)}async function hashString(o){const e=await sha256Digest(o),a=new Uint8Array(e);return urlEncodeArr(a)}/*! @azure/msal-browser v3.26.1 2024-10-08 */const storageNotSupported="storage_not_supported",stubbedPublicClientApplicationCalled="stubbed_public_client_application_called",inMemRedirectUnavailable="in_mem_redirect_unavailable";/*! @azure/msal-browser v3.26.1 2024-10-08 */const BrowserConfigurationAuthErrorMessages={[storageNotSupported]:"Given storage configuration option was not supported.",[stubbedPublicClientApplicationCalled]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[inMemRedirectUnavailable]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."};BrowserConfigurationAuthErrorMessages[storageNotSupported],BrowserConfigurationAuthErrorMessages[stubbedPublicClientApplicationCalled],BrowserConfigurationAuthErrorMessages[inMemRedirectUnavailable];class BrowserConfigurationAuthError extends AuthError{constructor(e,a){super(e,a),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,BrowserConfigurationAuthError.prototype)}}function createBrowserConfigurationAuthError(o){return new BrowserConfigurationAuthError(o,BrowserConfigurationAuthErrorMessages[o])}/*! @azure/msal-browser v3.26.1 2024-10-08 */function clearHash(o){o.location.hash="",typeof o.history.replaceState=="function"&&o.history.replaceState(null,"",`${o.location.origin}${o.location.pathname}${o.location.search}`)}function replaceHash(o){const e=o.split("#");e.shift(),window.location.hash=e.length>0?e.join("#"):""}function isInIframe(){return window.parent!==window}function isInPopup(){return typeof window<"u"&&!!window.opener&&window.opener!==window&&typeof window.name=="string"&&window.name.indexOf(`${BrowserConstants.POPUP_NAME_PREFIX}.`)===0}function getCurrentUri(){return window.location.href.split("?")[0].split("#")[0]}function getHomepage(){const e=new UrlString(window.location.href).getUrlComponents();return`${e.Protocol}//${e.HostNameAndPort}/`}function blockReloadInHiddenIframes(){if(UrlString.hashContainsKnownProperties(window.location.hash)&&isInIframe())throw createBrowserAuthError(blockIframeReload)}function blockRedirectInIframe(o){if(isInIframe()&&!o)throw createBrowserAuthError(redirectInIframe)}function blockAcquireTokenInPopups(){if(isInPopup())throw createBrowserAuthError(blockNestedPopups)}function blockNonBrowserEnvironment(){if(typeof window>"u")throw createBrowserAuthError(nonBrowserEnvironment)}function blockAPICallsBeforeInitialize(o){if(!o)throw createBrowserAuthError(uninitializedPublicClientApplication)}function preflightCheck$1(o){blockNonBrowserEnvironment(),blockReloadInHiddenIframes(),blockAcquireTokenInPopups(),blockAPICallsBeforeInitialize(o)}function redirectPreflightCheck(o,e){if(preflightCheck$1(o),blockRedirectInIframe(e.system.allowRedirectInIframe),e.cache.cacheLocation===BrowserCacheLocation.MemoryStorage&&!e.cache.storeAuthStateInCookie)throw createBrowserConfigurationAuthError(inMemRedirectUnavailable)}function preconnect(o){const e=document.createElement("link");e.rel="preconnect",e.href=new URL(o).origin,e.crossOrigin="anonymous",document.head.appendChild(e),window.setTimeout(()=>{try{document.head.removeChild(e)}catch{}},1e4)}function createGuid(){return createNewGuid()}/*! @azure/msal-browser v3.26.1 2024-10-08 */class NavigationClient{navigateInternal(e,a){return NavigationClient.defaultNavigateWindow(e,a)}navigateExternal(e,a){return NavigationClient.defaultNavigateWindow(e,a)}static defaultNavigateWindow(e,a){return a.noHistory?window.location.replace(e):window.location.assign(e),new Promise(c=>{setTimeout(()=>{c(!0)},a.timeout)})}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class FetchClient{async sendGetRequestAsync(e,a){let c;try{c=await fetch(e,{method:HTTP_REQUEST_TYPE.GET,headers:this.getFetchHeaders(a)})}catch{throw window.navigator.onLine?createBrowserAuthError(getRequestFailed):createBrowserAuthError(noNetworkConnectivity)}try{return{headers:this.getHeaderDict(c.headers),body:await c.json(),status:c.status}}catch{throw createBrowserAuthError(failedToParseResponse)}}async sendPostRequestAsync(e,a){const c=a&&a.body||Constants$1.EMPTY_STRING;let j;try{j=await fetch(e,{method:HTTP_REQUEST_TYPE.POST,headers:this.getFetchHeaders(a),body:c})}catch{throw window.navigator.onLine?createBrowserAuthError(postRequestFailed):createBrowserAuthError(noNetworkConnectivity)}try{return{headers:this.getHeaderDict(j.headers),body:await j.json(),status:j.status}}catch{throw createBrowserAuthError(failedToParseResponse)}}getFetchHeaders(e){const a=new Headers;if(!(e&&e.headers))return a;const c=e.headers;return Object.keys(c).forEach(j=>{a.append(j,c[j])}),a}getHeaderDict(e){const a={};return e.forEach((c,j)=>{a[j]=c}),a}}/*! @azure/msal-browser v3.26.1 2024-10-08 */const DEFAULT_POPUP_TIMEOUT_MS=6e4,DEFAULT_IFRAME_TIMEOUT_MS=1e4,DEFAULT_REDIRECT_TIMEOUT_MS=3e4,DEFAULT_NATIVE_BROKER_HANDSHAKE_TIMEOUT_MS=2e3;function buildConfiguration({auth:o,cache:e,system:a,telemetry:c},j){const d={clientId:Constants$1.EMPTY_STRING,authority:`${Constants$1.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:Constants$1.EMPTY_STRING,authorityMetadata:Constants$1.EMPTY_STRING,redirectUri:Constants$1.EMPTY_STRING,postLogoutRedirectUri:Constants$1.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:ProtocolMode.AAD,OIDCOptions:{serverResponseType:ServerResponseType.FRAGMENT,defaultScopes:[Constants$1.OPENID_SCOPE,Constants$1.PROFILE_SCOPE,Constants$1.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:AzureCloudInstance.None,tenant:Constants$1.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1},et={cacheLocation:BrowserCacheLocation.SessionStorage,temporaryCacheLocation:BrowserCacheLocation.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!!(e&&e.cacheLocation===BrowserCacheLocation.LocalStorage),claimsBasedCachingEnabled:!1},at={loggerCallback:()=>{},logLevel:LogLevel.Info,piiLoggingEnabled:!1},ct={...{...DEFAULT_SYSTEM_OPTIONS,loggerOptions:at,networkClient:j?new FetchClient:StubbedNetworkModule,navigationClient:new NavigationClient,loadFrameTimeout:0,windowHashTimeout:(a==null?void 0:a.loadFrameTimeout)||DEFAULT_POPUP_TIMEOUT_MS,iframeHashTimeout:(a==null?void 0:a.loadFrameTimeout)||DEFAULT_IFRAME_TIMEOUT_MS,navigateFrameWait:0,redirectNavigationTimeout:DEFAULT_REDIRECT_TIMEOUT_MS,asyncPopups:!1,allowRedirectInIframe:!1,allowNativeBroker:!1,nativeBrokerHandshakeTimeout:(a==null?void 0:a.nativeBrokerHandshakeTimeout)||DEFAULT_NATIVE_BROKER_HANDSHAKE_TIMEOUT_MS,pollIntervalMilliseconds:BrowserConstants.DEFAULT_POLL_INTERVAL_MS},...a,loggerOptions:(a==null?void 0:a.loggerOptions)||at},ot={application:{appName:Constants$1.EMPTY_STRING,appVersion:Constants$1.EMPTY_STRING},client:new StubPerformanceClient};if((o==null?void 0:o.protocolMode)!==ProtocolMode.OIDC&&(o!=null&&o.OIDCOptions)&&new Logger(ct.loggerOptions).warning(JSON.stringify(createClientConfigurationError(cannotSetOIDCOptions))),o!=null&&o.protocolMode&&o.protocolMode!==ProtocolMode.AAD&&(ct!=null&&ct.allowNativeBroker))throw createClientConfigurationError(cannotAllowNativeBroker);return{auth:{...d,...o,OIDCOptions:{...d.OIDCOptions,...o==null?void 0:o.OIDCOptions}},cache:{...et,...e},system:ct,telemetry:{...ot,...c}}}/*! @azure/msal-browser v3.26.1 2024-10-08 */const name$2="@azure/msal-browser",version$2="3.26.1";/*! @azure/msal-browser v3.26.1 2024-10-08 */class BaseOperatingContext{static loggerCallback(e,a){switch(e){case LogLevel.Error:console.error(a);return;case LogLevel.Info:console.info(a);return;case LogLevel.Verbose:console.debug(a);return;case LogLevel.Warning:console.warn(a);return;default:console.log(a);return}}constructor(e){var st;this.browserEnvironment=typeof window<"u",this.config=buildConfiguration(e,this.browserEnvironment);let a;try{a=window[BrowserCacheLocation.SessionStorage]}catch{}const c=a==null?void 0:a.getItem(LOG_LEVEL_CACHE_KEY),j=(st=a==null?void 0:a.getItem(LOG_PII_CACHE_KEY))==null?void 0:st.toLowerCase(),d=j==="true"?!0:j==="false"?!1:void 0,et={...this.config.system.loggerOptions},at=c&&Object.keys(LogLevel).includes(c)?LogLevel[c]:void 0;at&&(et.loggerCallback=BaseOperatingContext.loggerCallback,et.logLevel=at),d!==void 0&&(et.piiLoggingEnabled=d),this.logger=new Logger(et,name$2,version$2),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class StandardOperatingContext extends BaseOperatingContext{getModuleName(){return StandardOperatingContext.MODULE_NAME}getId(){return StandardOperatingContext.ID}async initialize(){return this.available=typeof window<"u",this.available}}StandardOperatingContext.MODULE_NAME="";StandardOperatingContext.ID="StandardOperatingContext";/*! @azure/msal-browser v3.26.1 2024-10-08 */function base64Decode(o){return new TextDecoder().decode(base64DecToArr(o))}function base64DecToArr(o){let e=o.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw createBrowserAuthError(invalidBase64String)}const a=atob(e);return Uint8Array.from(a,c=>c.codePointAt(0)||0)}/*! @azure/msal-browser v3.26.1 2024-10-08 */class DatabaseStorage{constructor(){this.dbName=DB_NAME,this.version=DB_VERSION,this.tableName=DB_TABLE_NAME,this.dbOpen=!1}async open(){return new Promise((e,a)=>{const c=window.indexedDB.open(this.dbName,this.version);c.addEventListener("upgradeneeded",j=>{j.target.result.createObjectStore(this.tableName)}),c.addEventListener("success",j=>{const d=j;this.db=d.target.result,this.dbOpen=!0,e()}),c.addEventListener("error",()=>a(createBrowserAuthError(databaseUnavailable)))})}closeConnection(){const e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)}async validateDbIsOpen(){if(!this.dbOpen)return this.open()}async getItem(e){return await this.validateDbIsOpen(),new Promise((a,c)=>{if(!this.db)return c(createBrowserAuthError(databaseNotOpen));const et=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(e);et.addEventListener("success",at=>{const st=at;this.closeConnection(),a(st.target.result)}),et.addEventListener("error",at=>{this.closeConnection(),c(at)})})}async setItem(e,a){return await this.validateDbIsOpen(),new Promise((c,j)=>{if(!this.db)return j(createBrowserAuthError(databaseNotOpen));const at=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(a,e);at.addEventListener("success",()=>{this.closeConnection(),c()}),at.addEventListener("error",st=>{this.closeConnection(),j(st)})})}async removeItem(e){return await this.validateDbIsOpen(),new Promise((a,c)=>{if(!this.db)return c(createBrowserAuthError(databaseNotOpen));const et=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(e);et.addEventListener("success",()=>{this.closeConnection(),a()}),et.addEventListener("error",at=>{this.closeConnection(),c(at)})})}async getKeys(){return await this.validateDbIsOpen(),new Promise((e,a)=>{if(!this.db)return a(createBrowserAuthError(databaseNotOpen));const d=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();d.addEventListener("success",et=>{const at=et;this.closeConnection(),e(at.target.result)}),d.addEventListener("error",et=>{this.closeConnection(),a(et)})})}async containsKey(e){return await this.validateDbIsOpen(),new Promise((a,c)=>{if(!this.db)return c(createBrowserAuthError(databaseNotOpen));const et=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(e);et.addEventListener("success",at=>{const st=at;this.closeConnection(),a(st.target.result===1)}),et.addEventListener("error",at=>{this.closeConnection(),c(at)})})}async deleteDatabase(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise((e,a)=>{const c=window.indexedDB.deleteDatabase(DB_NAME),j=setTimeout(()=>a(!1),200);c.addEventListener("success",()=>(clearTimeout(j),e(!0))),c.addEventListener("blocked",()=>(clearTimeout(j),e(!0))),c.addEventListener("error",()=>(clearTimeout(j),a(!1)))})}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class MemoryStorage{constructor(){this.cache=new Map}getItem(e){return this.cache.get(e)||null}setItem(e,a){this.cache.set(e,a)}removeItem(e){this.cache.delete(e)}getKeys(){const e=[];return this.cache.forEach((a,c)=>{e.push(c)}),e}containsKey(e){return this.cache.has(e)}clear(){this.cache.clear()}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class AsyncMemoryStorage{constructor(e){this.inMemoryCache=new MemoryStorage,this.indexedDBCache=new DatabaseStorage,this.logger=e}handleDatabaseAccessError(e){if(e instanceof BrowserAuthError&&e.errorCode===databaseUnavailable)this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.");else throw e}async getItem(e){const a=this.inMemoryCache.getItem(e);if(!a)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.getItem(e)}catch(c){this.handleDatabaseAccessError(c)}return a}async setItem(e,a){this.inMemoryCache.setItem(e,a);try{await this.indexedDBCache.setItem(e,a)}catch(c){this.handleDatabaseAccessError(c)}}async removeItem(e){this.inMemoryCache.removeItem(e);try{await this.indexedDBCache.removeItem(e)}catch(a){this.handleDatabaseAccessError(a)}}async getKeys(){const e=this.inMemoryCache.getKeys();if(e.length===0)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),await this.indexedDBCache.getKeys()}catch(a){this.handleDatabaseAccessError(a)}return e}async containsKey(e){const a=this.inMemoryCache.containsKey(e);if(!a)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.containsKey(e)}catch(c){this.handleDatabaseAccessError(c)}return a}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}async clearPersistent(){try{this.logger.verbose("Deleting persistent keystore");const e=await this.indexedDBCache.deleteDatabase();return e&&this.logger.verbose("Persistent keystore deleted"),e}catch(e){return this.handleDatabaseAccessError(e),!1}}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class CryptoOps{constructor(e,a){this.logger=e,validateCryptoAvailable(e),this.cache=new AsyncMemoryStorage(this.logger),this.performanceClient=a}createNewGuid(){return createNewGuid()}base64Encode(e){return base64Encode(e)}base64Decode(e){return base64Decode(e)}base64UrlEncode(e){return urlEncode(e)}encodeKid(e){return this.base64UrlEncode(JSON.stringify({kid:e}))}async getPublicKeyThumbprint(e){var ot;const a=(ot=this.performanceClient)==null?void 0:ot.startMeasurement(PerformanceEvents.CryptoOptsGetPublicKeyThumbprint,e.correlationId),c=await generateKeyPair(CryptoOps.EXTRACTABLE,CryptoOps.POP_KEY_USAGES),j=await exportJwk(c.publicKey),d={e:j.e,kty:j.kty,n:j.n},et=getSortedObjectString(d),at=await this.hashString(et),st=await exportJwk(c.privateKey),ct=await importJwk(st,!1,["sign"]);return await this.cache.setItem(at,{privateKey:ct,publicKey:c.publicKey,requestMethod:e.resourceRequestMethod,requestUri:e.resourceRequestUri}),a&&a.end({success:!0}),at}async removeTokenBindingKey(e){return await this.cache.removeItem(e),!await this.cache.containsKey(e)}async clearKeystore(){this.cache.clearInMemory();try{return await this.cache.clearPersistent(),!0}catch(e){return e instanceof Error?this.logger.error(`Clearing keystore failed with error: ${e.message}`):this.logger.error("Clearing keystore failed with unknown error"),!1}}async signJwt(e,a,c,j){var At;const d=(At=this.performanceClient)==null?void 0:At.startMeasurement(PerformanceEvents.CryptoOptsSignJwt,j),et=await this.cache.getItem(a);if(!et)throw createBrowserAuthError(cryptoKeyNotFound);const at=await exportJwk(et.publicKey),st=getSortedObjectString(at),ct=urlEncode(JSON.stringify({kid:a})),ot=JoseHeader.getShrHeaderString({...c==null?void 0:c.header,alg:at.alg,kid:ct}),gt=urlEncode(ot);e.cnf={jwk:JSON.parse(st)};const ft=urlEncode(JSON.stringify(e)),yt=`${gt}.${ft}`,rt=new TextEncoder().encode(yt),bt=await sign$1(et.privateKey,rt),ht=urlEncodeArr(new Uint8Array(bt)),wt=`${yt}.${ht}`;return d&&d.end({success:!0}),wt}async hashString(e){return hashString(e)}}CryptoOps.POP_KEY_USAGES=["sign","verify"];CryptoOps.EXTRACTABLE=!0;function getSortedObjectString(o){return JSON.stringify(o,Object.keys(o).sort())}/*! @azure/msal-browser v3.26.1 2024-10-08 */class BrowserStorage{constructor(e){this.validateWindowStorage(e),this.windowStorage=window[e]}validateWindowStorage(e){if(e!==BrowserCacheLocation.LocalStorage&&e!==BrowserCacheLocation.SessionStorage||!window[e])throw createBrowserConfigurationAuthError(storageNotSupported)}getItem(e){return this.windowStorage.getItem(e)}setItem(e,a){this.windowStorage.setItem(e,a)}removeItem(e){this.windowStorage.removeItem(e)}getKeys(){return Object.keys(this.windowStorage)}containsKey(e){return this.windowStorage.hasOwnProperty(e)}}/*! @azure/msal-browser v3.26.1 2024-10-08 */function extractBrowserRequestState(o,e){if(!e)return null;try{return ProtocolUtils.parseRequestState(o,e).libraryState.meta}catch{throw createClientAuthError(invalidState)}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class BrowserCacheManager extends CacheManager{constructor(e,a,c,j,d,et){super(e,c,j,d),this.COOKIE_LIFE_MULTIPLIER=24*60*60*1e3,this.cacheConfig=a,this.logger=j,this.internalStorage=new MemoryStorage,this.browserStorage=this.setupBrowserStorage(this.cacheConfig.cacheLocation),this.temporaryCacheStorage=this.setupTemporaryCacheStorage(this.cacheConfig.temporaryCacheLocation,this.cacheConfig.cacheLocation),a.cacheMigrationEnabled&&(this.migrateCacheEntries(),this.createKeyMaps()),this.performanceClient=et}setupBrowserStorage(e){switch(e){case BrowserCacheLocation.LocalStorage:case BrowserCacheLocation.SessionStorage:try{return new BrowserStorage(e)}catch(a){this.logger.verbose(a);break}}return this.cacheConfig.cacheLocation=BrowserCacheLocation.MemoryStorage,new MemoryStorage}setupTemporaryCacheStorage(e,a){switch(a){case BrowserCacheLocation.LocalStorage:case BrowserCacheLocation.SessionStorage:try{return new BrowserStorage(e||BrowserCacheLocation.SessionStorage)}catch(c){return this.logger.verbose(c),this.internalStorage}case BrowserCacheLocation.MemoryStorage:default:return this.internalStorage}}migrateCacheEntries(){const e=`${Constants$1.CACHE_PREFIX}.${PersistentCacheKeys.ID_TOKEN}`,a=`${Constants$1.CACHE_PREFIX}.${PersistentCacheKeys.CLIENT_INFO}`,c=`${Constants$1.CACHE_PREFIX}.${PersistentCacheKeys.ERROR}`,j=`${Constants$1.CACHE_PREFIX}.${PersistentCacheKeys.ERROR_DESC}`,d=this.browserStorage.getItem(e),et=this.browserStorage.getItem(a),at=this.browserStorage.getItem(c),st=this.browserStorage.getItem(j),ct=[d,et,at,st];[PersistentCacheKeys.ID_TOKEN,PersistentCacheKeys.CLIENT_INFO,PersistentCacheKeys.ERROR,PersistentCacheKeys.ERROR_DESC].forEach((gt,ft)=>{const yt=ct[ft];yt&&this.setTemporaryCache(gt,yt,!0)})}createKeyMaps(){this.logger.trace("BrowserCacheManager - createKeyMaps called.");const e=this.getItem(StaticCacheKeys.ACCOUNT_KEYS),a=this.getItem(`${StaticCacheKeys.TOKEN_KEYS}.${this.clientId}`);if(e&&a){this.logger.verbose("BrowserCacheManager:createKeyMaps - account and token key maps already exist, skipping migration.");return}this.browserStorage.getKeys().forEach(j=>{if(this.isCredentialKey(j)){const d=this.getItem(j);if(d){const et=this.validateAndParseJson(d);if(et&&et.hasOwnProperty("credentialType"))switch(et.credentialType){case CredentialType.ID_TOKEN:if(isIdTokenEntity(et)){this.logger.trace("BrowserCacheManager:createKeyMaps - idToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - idToken with key: ${j} found, saving key to token key map`);const at=et,st=this.updateCredentialCacheKey(j,at);this.addTokenKey(st,CredentialType.ID_TOKEN);return}else this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching idToken schema with value containing idToken credentialType field but value failed IdTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed idToken validation on key: ${j}`);break;case CredentialType.ACCESS_TOKEN:case CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME:if(isAccessTokenEntity(et)){this.logger.trace("BrowserCacheManager:createKeyMaps - accessToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - accessToken with key: ${j} found, saving key to token key map`);const at=et,st=this.updateCredentialCacheKey(j,at);this.addTokenKey(st,CredentialType.ACCESS_TOKEN);return}else this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching accessToken schema with value containing accessToken credentialType field but value failed AccessTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed accessToken validation on key: ${j}`);break;case CredentialType.REFRESH_TOKEN:if(isRefreshTokenEntity(et)){this.logger.trace("BrowserCacheManager:createKeyMaps - refreshToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - refreshToken with key: ${j} found, saving key to token key map`);const at=et,st=this.updateCredentialCacheKey(j,at);this.addTokenKey(st,CredentialType.REFRESH_TOKEN);return}else this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching refreshToken schema with value containing refreshToken credentialType field but value failed RefreshTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed refreshToken validation on key: ${j}`);break}}}if(this.isAccountKey(j)){const d=this.getItem(j);if(d){const et=this.validateAndParseJson(d);et&&AccountEntity.isAccountEntity(et)&&(this.logger.trace("BrowserCacheManager:createKeyMaps - account found, saving key to account key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - account with key: ${j} found, saving key to account key map`),this.addAccountKeyToMap(j))}}})}validateAndParseJson(e){try{const a=JSON.parse(e);return a&&typeof a=="object"?a:null}catch{return null}}getItem(e){return this.browserStorage.getItem(e)}setItem(e,a){this.browserStorage.setItem(e,a)}getAccount(e,a){this.logger.trace("BrowserCacheManager.getAccount called");const c=this.getCachedAccountEntity(e);return this.updateOutdatedCachedAccount(e,c,a)}getCachedAccountEntity(e){const a=this.getItem(e);if(!a)return this.removeAccountKeyFromMap(e),null;const c=this.validateAndParseJson(a);return!c||!AccountEntity.isAccountEntity(c)?(this.removeAccountKeyFromMap(e),null):CacheManager.toObject(new AccountEntity,c)}setAccount(e){this.logger.trace("BrowserCacheManager.setAccount called");const a=e.generateAccountKey();this.setItem(a,JSON.stringify(e)),this.addAccountKeyToMap(a)}getAccountKeys(){this.logger.trace("BrowserCacheManager.getAccountKeys called");const e=this.getItem(StaticCacheKeys.ACCOUNT_KEYS);return e?JSON.parse(e):(this.logger.verbose("BrowserCacheManager.getAccountKeys - No account keys found"),[])}addAccountKeyToMap(e){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${e}`);const a=this.getAccountKeys();a.indexOf(e)===-1?(a.push(e),this.setItem(StaticCacheKeys.ACCOUNT_KEYS,JSON.stringify(a)),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added")):this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map")}removeAccountKeyFromMap(e){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${e}`);const a=this.getAccountKeys(),c=a.indexOf(e);c>-1?(a.splice(c,1),this.setItem(StaticCacheKeys.ACCOUNT_KEYS,JSON.stringify(a)),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")):this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}async removeAccount(e){super.removeAccount(e),this.removeAccountKeyFromMap(e)}removeOutdatedAccount(e){this.removeItem(e),this.removeAccountKeyFromMap(e)}removeIdToken(e){super.removeIdToken(e),this.removeTokenKey(e,CredentialType.ID_TOKEN)}async removeAccessToken(e){super.removeAccessToken(e),this.removeTokenKey(e,CredentialType.ACCESS_TOKEN)}removeRefreshToken(e){super.removeRefreshToken(e),this.removeTokenKey(e,CredentialType.REFRESH_TOKEN)}getTokenKeys(){this.logger.trace("BrowserCacheManager.getTokenKeys called");const e=this.getItem(`${StaticCacheKeys.TOKEN_KEYS}.${this.clientId}`);if(e){const a=this.validateAndParseJson(e);if(a&&a.hasOwnProperty("idToken")&&a.hasOwnProperty("accessToken")&&a.hasOwnProperty("refreshToken"))return a;this.logger.error("BrowserCacheManager.getTokenKeys - Token keys found but in an unknown format. Returning empty key map.")}else this.logger.verbose("BrowserCacheManager.getTokenKeys - No token keys found");return{idToken:[],accessToken:[],refreshToken:[]}}addTokenKey(e,a){this.logger.trace("BrowserCacheManager addTokenKey called");const c=this.getTokenKeys();switch(a){case CredentialType.ID_TOKEN:c.idToken.indexOf(e)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),c.idToken.push(e));break;case CredentialType.ACCESS_TOKEN:c.accessToken.indexOf(e)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - accessToken added to map"),c.accessToken.push(e));break;case CredentialType.REFRESH_TOKEN:c.refreshToken.indexOf(e)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),c.refreshToken.push(e));break;default:throw this.logger.error(`BrowserCacheManager:addTokenKey - CredentialType provided invalid. CredentialType: ${a}`),createClientAuthError(unexpectedCredentialType)}this.setItem(`${StaticCacheKeys.TOKEN_KEYS}.${this.clientId}`,JSON.stringify(c))}removeTokenKey(e,a){this.logger.trace("BrowserCacheManager removeTokenKey called");const c=this.getTokenKeys();switch(a){case CredentialType.ID_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove idToken with key: ${e} from map`);const j=c.idToken.indexOf(e);j>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - idToken removed from map"),c.idToken.splice(j,1)):this.logger.info("BrowserCacheManager: removeTokenKey - idToken does not exist in map. Either it was previously removed or it was never added.");break;case CredentialType.ACCESS_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove accessToken with key: ${e} from map`);const d=c.accessToken.indexOf(e);d>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - accessToken removed from map"),c.accessToken.splice(d,1)):this.logger.info("BrowserCacheManager: removeTokenKey - accessToken does not exist in map. Either it was previously removed or it was never added.");break;case CredentialType.REFRESH_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove refreshToken with key: ${e} from map`);const et=c.refreshToken.indexOf(e);et>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken removed from map"),c.refreshToken.splice(et,1)):this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken does not exist in map. Either it was previously removed or it was never added.");break;default:throw this.logger.error(`BrowserCacheManager:removeTokenKey - CredentialType provided invalid. CredentialType: ${a}`),createClientAuthError(unexpectedCredentialType)}this.setItem(`${StaticCacheKeys.TOKEN_KEYS}.${this.clientId}`,JSON.stringify(c))}getIdTokenCredential(e){const a=this.getItem(e);if(!a)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,CredentialType.ID_TOKEN),null;const c=this.validateAndParseJson(a);return!c||!isIdTokenEntity(c)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,CredentialType.ID_TOKEN),null):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),c)}setIdTokenCredential(e){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");const a=generateCredentialKey(e);this.setItem(a,JSON.stringify(e)),this.addTokenKey(a,CredentialType.ID_TOKEN)}getAccessTokenCredential(e){const a=this.getItem(e);if(!a)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,CredentialType.ACCESS_TOKEN),null;const c=this.validateAndParseJson(a);return!c||!isAccessTokenEntity(c)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,CredentialType.ACCESS_TOKEN),null):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),c)}setAccessTokenCredential(e){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");const a=generateCredentialKey(e);this.setItem(a,JSON.stringify(e)),this.addTokenKey(a,CredentialType.ACCESS_TOKEN)}getRefreshTokenCredential(e){const a=this.getItem(e);if(!a)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,CredentialType.REFRESH_TOKEN),null;const c=this.validateAndParseJson(a);return!c||!isRefreshTokenEntity(c)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,CredentialType.REFRESH_TOKEN),null):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),c)}setRefreshTokenCredential(e){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");const a=generateCredentialKey(e);this.setItem(a,JSON.stringify(e)),this.addTokenKey(a,CredentialType.REFRESH_TOKEN)}getAppMetadata(e){const a=this.getItem(e);if(!a)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;const c=this.validateAndParseJson(a);return!c||!isAppMetadataEntity(e,c)?(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),c)}setAppMetadata(e){this.logger.trace("BrowserCacheManager.setAppMetadata called");const a=generateAppMetadataKey(e);this.setItem(a,JSON.stringify(e))}getServerTelemetry(e){const a=this.getItem(e);if(!a)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;const c=this.validateAndParseJson(a);return!c||!isServerTelemetryEntity(e,c)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),c)}setServerTelemetry(e,a){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(e,JSON.stringify(a))}getAuthorityMetadata(e){const a=this.internalStorage.getItem(e);if(!a)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;const c=this.validateAndParseJson(a);return c&&isAuthorityMetadataEntity(e,c)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),c):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(a=>this.isAuthorityMetadata(a))}setWrapperMetadata(e,a){this.internalStorage.setItem(InMemoryCacheKeys.WRAPPER_SKU,e),this.internalStorage.setItem(InMemoryCacheKeys.WRAPPER_VER,a)}getWrapperMetadata(){const e=this.internalStorage.getItem(InMemoryCacheKeys.WRAPPER_SKU)||Constants$1.EMPTY_STRING,a=this.internalStorage.getItem(InMemoryCacheKeys.WRAPPER_VER)||Constants$1.EMPTY_STRING;return[e,a]}setAuthorityMetadata(e,a){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(a))}getActiveAccount(){const e=this.generateCacheKey(PersistentCacheKeys.ACTIVE_ACCOUNT_FILTERS),a=this.getItem(e);if(!a){this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters cache schema found, looking for legacy schema");const j=this.generateCacheKey(PersistentCacheKeys.ACTIVE_ACCOUNT),d=this.getItem(j);if(!d)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null;const et=this.getAccountInfoFilteredBy({localAccountId:d});return et?(this.logger.trace("BrowserCacheManager.getActiveAccount: Legacy active account cache schema found"),this.logger.trace("BrowserCacheManager.getActiveAccount: Adding active account filters cache schema"),this.setActiveAccount(et),et):null}const c=this.validateAndParseJson(a);return c?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:c.homeAccountId,localAccountId:c.localAccountId,tenantId:c.tenantId})):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(e){const a=this.generateCacheKey(PersistentCacheKeys.ACTIVE_ACCOUNT_FILTERS),c=this.generateCacheKey(PersistentCacheKeys.ACTIVE_ACCOUNT);if(e){this.logger.verbose("setActiveAccount: Active account set");const j={homeAccountId:e.homeAccountId,localAccountId:e.localAccountId,tenantId:e.tenantId};this.browserStorage.setItem(a,JSON.stringify(j)),this.browserStorage.setItem(c,e.localAccountId)}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(a),this.browserStorage.removeItem(c)}getThrottlingCache(e){const a=this.getItem(e);if(!a)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;const c=this.validateAndParseJson(a);return!c||!isThrottlingEntity(e,c)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),c)}setThrottlingCache(e,a){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(e,JSON.stringify(a))}getTemporaryCache(e,a){const c=a?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){const d=this.getItemCookie(c);if(d)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),d}const j=this.temporaryCacheStorage.getItem(c);if(!j){if(this.cacheConfig.cacheLocation===BrowserCacheLocation.LocalStorage){const d=this.browserStorage.getItem(c);if(d)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),d}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),j}setTemporaryCache(e,a,c){const j=c?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(j,a),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.setItemCookie(j,a))}removeItem(e){this.browserStorage.removeItem(e)}removeTemporaryItem(e){this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.clearItemCookie(e))}getKeys(){return this.browserStorage.getKeys()}async clear(){await this.removeAllAccounts(),this.removeAppMetadata(),this.temporaryCacheStorage.getKeys().forEach(e=>{(e.indexOf(Constants$1.CACHE_PREFIX)!==-1||e.indexOf(this.clientId)!==-1)&&this.removeTemporaryItem(e)}),this.browserStorage.getKeys().forEach(e=>{(e.indexOf(Constants$1.CACHE_PREFIX)!==-1||e.indexOf(this.clientId)!==-1)&&this.browserStorage.removeItem(e)}),this.internalStorage.clear()}async clearTokensAndKeysWithClaims(e,a){e.addQueueMeasurement(PerformanceEvents.ClearTokensAndKeysWithClaims,a);const c=this.getTokenKeys(),j=[];c.accessToken.forEach(d=>{const et=this.getAccessTokenCredential(d);et!=null&&et.requestedClaimsHash&&d.includes(et.requestedClaimsHash.toLowerCase())&&j.push(this.removeAccessToken(d))}),await Promise.all(j),j.length>0&&this.logger.warning(`${j.length} access tokens with claims in the cache keys have been removed from the cache.`)}setItemCookie(e,a,c){let j=`${encodeURIComponent(e)}=${encodeURIComponent(a)};path=/;SameSite=Lax;`;if(c){const d=this.getCookieExpirationTime(c);j+=`expires=${d};`}this.cacheConfig.secureCookies&&(j+="Secure;"),document.cookie=j}getItemCookie(e){const a=`${encodeURIComponent(e)}=`,c=document.cookie.split(";");for(let j=0;j<c.length;j++){let d=c[j];for(;d.charAt(0)===" ";)d=d.substring(1);if(d.indexOf(a)===0)return decodeURIComponent(d.substring(a.length,d.length))}return Constants$1.EMPTY_STRING}clearMsalCookies(){const e=`${Constants$1.CACHE_PREFIX}.${this.clientId}`;document.cookie.split(";").forEach(c=>{for(;c.charAt(0)===" ";)c=c.substring(1);if(c.indexOf(e)===0){const j=c.split("=")[0];this.clearItemCookie(j)}})}clearItemCookie(e){this.setItemCookie(e,Constants$1.EMPTY_STRING,-1)}getCookieExpirationTime(e){const a=new Date;return new Date(a.getTime()+e*this.COOKIE_LIFE_MULTIPLIER).toUTCString()}generateCacheKey(e){return this.validateAndParseJson(e)?JSON.stringify(e):StringUtils.startsWith(e,Constants$1.CACHE_PREFIX)||StringUtils.startsWith(e,PersistentCacheKeys.ADAL_ID_TOKEN)?e:`${Constants$1.CACHE_PREFIX}.${this.clientId}.${e}`}generateAuthorityKey(e){const{libraryState:{id:a}}=ProtocolUtils.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`${TemporaryCacheKeys.AUTHORITY}.${a}`)}generateNonceKey(e){const{libraryState:{id:a}}=ProtocolUtils.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`${TemporaryCacheKeys.NONCE_IDTOKEN}.${a}`)}generateStateKey(e){const{libraryState:{id:a}}=ProtocolUtils.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`${TemporaryCacheKeys.REQUEST_STATE}.${a}`)}getCachedAuthority(e){const a=this.generateStateKey(e),c=this.getTemporaryCache(a);if(!c)return null;const j=this.generateAuthorityKey(c);return this.getTemporaryCache(j)}updateCacheEntries(e,a,c,j,d){this.logger.trace("BrowserCacheManager.updateCacheEntries called");const et=this.generateStateKey(e);this.setTemporaryCache(et,e,!1);const at=this.generateNonceKey(e);this.setTemporaryCache(at,a,!1);const st=this.generateAuthorityKey(e);if(this.setTemporaryCache(st,c,!1),d){const ct={credential:d.homeAccountId,type:CcsCredentialType.HOME_ACCOUNT_ID};this.setTemporaryCache(TemporaryCacheKeys.CCS_CREDENTIAL,JSON.stringify(ct),!0)}else if(j){const ct={credential:j,type:CcsCredentialType.UPN};this.setTemporaryCache(TemporaryCacheKeys.CCS_CREDENTIAL,JSON.stringify(ct),!0)}}resetRequestCache(e){this.logger.trace("BrowserCacheManager.resetRequestCache called"),e&&(this.temporaryCacheStorage.getKeys().forEach(a=>{a.indexOf(e)!==-1&&this.removeTemporaryItem(a)}),this.removeTemporaryItem(this.generateStateKey(e)),this.removeTemporaryItem(this.generateNonceKey(e)),this.removeTemporaryItem(this.generateAuthorityKey(e))),this.removeTemporaryItem(this.generateCacheKey(TemporaryCacheKeys.REQUEST_PARAMS)),this.removeTemporaryItem(this.generateCacheKey(TemporaryCacheKeys.ORIGIN_URI)),this.removeTemporaryItem(this.generateCacheKey(TemporaryCacheKeys.URL_HASH)),this.removeTemporaryItem(this.generateCacheKey(TemporaryCacheKeys.CORRELATION_ID)),this.removeTemporaryItem(this.generateCacheKey(TemporaryCacheKeys.CCS_CREDENTIAL)),this.removeTemporaryItem(this.generateCacheKey(TemporaryCacheKeys.NATIVE_REQUEST)),this.setInteractionInProgress(!1)}cleanRequestByState(e){if(this.logger.trace("BrowserCacheManager.cleanRequestByState called"),e){const a=this.generateStateKey(e),c=this.temporaryCacheStorage.getItem(a);this.logger.infoPii(`BrowserCacheManager.cleanRequestByState: Removing temporary cache items for state: ${c}`),this.resetRequestCache(c||Constants$1.EMPTY_STRING)}this.clearMsalCookies()}cleanRequestByInteractionType(e){this.logger.trace("BrowserCacheManager.cleanRequestByInteractionType called"),this.temporaryCacheStorage.getKeys().forEach(a=>{if(a.indexOf(TemporaryCacheKeys.REQUEST_STATE)===-1)return;const c=this.temporaryCacheStorage.getItem(a);if(!c)return;const j=extractBrowserRequestState(this.cryptoImpl,c);j&&j.interactionType===e&&(this.logger.infoPii(`BrowserCacheManager.cleanRequestByInteractionType: Removing temporary cache items for state: ${c}`),this.resetRequestCache(c))}),this.clearMsalCookies(),this.setInteractionInProgress(!1)}cacheCodeRequest(e){this.logger.trace("BrowserCacheManager.cacheCodeRequest called");const a=base64Encode(JSON.stringify(e));this.setTemporaryCache(TemporaryCacheKeys.REQUEST_PARAMS,a,!0)}getCachedRequest(e){this.logger.trace("BrowserCacheManager.getCachedRequest called");const a=this.getTemporaryCache(TemporaryCacheKeys.REQUEST_PARAMS,!0);if(!a)throw createBrowserAuthError(noTokenRequestCacheError);let c;try{c=JSON.parse(base64Decode(a))}catch(j){throw this.logger.errorPii(`Attempted to parse: ${a}`),this.logger.error(`Parsing cached token request threw with error: ${j}`),createBrowserAuthError(unableToParseTokenRequestCacheError)}if(this.removeTemporaryItem(this.generateCacheKey(TemporaryCacheKeys.REQUEST_PARAMS)),!c.authority){const j=this.generateAuthorityKey(e),d=this.getTemporaryCache(j);if(!d)throw createBrowserAuthError(noCachedAuthorityError);c.authority=d}return c}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");const e=this.getTemporaryCache(TemporaryCacheKeys.NATIVE_REQUEST,!0);if(!e)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;const a=this.validateAndParseJson(e);return a||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)}isInteractionInProgress(e){const a=this.getInteractionInProgress();return e?a===this.clientId:!!a}getInteractionInProgress(){const e=`${Constants$1.CACHE_PREFIX}.${TemporaryCacheKeys.INTERACTION_STATUS_KEY}`;return this.getTemporaryCache(e,!1)}setInteractionInProgress(e){const a=`${Constants$1.CACHE_PREFIX}.${TemporaryCacheKeys.INTERACTION_STATUS_KEY}`;if(e){if(this.getInteractionInProgress())throw createBrowserAuthError(interactionInProgress);this.setTemporaryCache(a,this.clientId,!1)}else!e&&this.getInteractionInProgress()===this.clientId&&this.removeTemporaryItem(a)}getLegacyLoginHint(){const e=this.getTemporaryCache(PersistentCacheKeys.ADAL_ID_TOKEN);e&&(this.browserStorage.removeItem(PersistentCacheKeys.ADAL_ID_TOKEN),this.logger.verbose("Cached ADAL id token retrieved."));const a=this.getTemporaryCache(PersistentCacheKeys.ID_TOKEN,!0);a&&(this.browserStorage.removeItem(this.generateCacheKey(PersistentCacheKeys.ID_TOKEN)),this.logger.verbose("Cached MSAL.js v1 id token retrieved"));const c=a||e;if(c){const j=extractTokenClaims(c,base64Decode);if(j.preferred_username)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 preferred_username as loginHint"),j.preferred_username;if(j.upn)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 upn as loginHint"),j.upn;this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, however, no account hint claim found. Enable preferred_username or upn id token claim to get SSO.")}return null}updateCredentialCacheKey(e,a){const c=generateCredentialKey(a);if(e!==c){const j=this.getItem(e);if(j)return this.browserStorage.removeItem(e),this.setItem(c,j),this.logger.verbose(`Updated an outdated ${a.credentialType} cache key`),c;this.logger.error(`Attempted to update an outdated ${a.credentialType} cache key but no item matching the outdated key was found in storage`)}return e}async hydrateCache(e,a){var at,st,ct;const c=createIdTokenEntity((at=e.account)==null?void 0:at.homeAccountId,(st=e.account)==null?void 0:st.environment,e.idToken,this.clientId,e.tenantId);let j;a.claims&&(j=await this.cryptoImpl.hashString(a.claims));const d=createAccessTokenEntity((ct=e.account)==null?void 0:ct.homeAccountId,e.account.environment,e.accessToken,this.clientId,e.tenantId,e.scopes.join(" "),e.expiresOn?e.expiresOn.getTime()/1e3:0,e.extExpiresOn?e.extExpiresOn.getTime()/1e3:0,base64Decode,void 0,e.tokenType,void 0,a.sshKid,a.claims,j),et={idToken:c,accessToken:d};return this.saveCacheRecord(et)}async saveCacheRecord(e,a,c){try{await super.saveCacheRecord(e,a,c)}catch(j){if(j instanceof CacheError&&this.performanceClient&&c)try{const d=this.getTokenKeys();this.performanceClient.addFields({cacheRtCount:d.refreshToken.length,cacheIdCount:d.idToken.length,cacheAtCount:d.accessToken.length},c)}catch{}throw j}}}const DEFAULT_BROWSER_CACHE_MANAGER=(o,e)=>{const a={cacheLocation:BrowserCacheLocation.MemoryStorage,temporaryCacheLocation:BrowserCacheLocation.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};return new BrowserCacheManager(o,a,DEFAULT_CRYPTO_IMPLEMENTATION,e)};/*! @azure/msal-browser v3.26.1 2024-10-08 */function getAllAccounts(o,e,a,c){return o.verbose("getAllAccounts called"),a?e.getAllAccounts(c):[]}function getAccount(o,e,a){if(e.trace("getAccount called"),Object.keys(o).length===0)return e.warning("getAccount: No accountFilter provided"),null;const c=a.getAccountInfoFilteredBy(o);return c?(e.verbose("getAccount: Account matching provided filter found, returning"),c):(e.verbose("getAccount: No matching account found, returning null"),null)}function getAccountByUsername(o,e,a){if(e.trace("getAccountByUsername called"),!o)return e.warning("getAccountByUsername: No username provided"),null;const c=a.getAccountInfoFilteredBy({username:o});return c?(e.verbose("getAccountByUsername: Account matching username found, returning"),e.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${o}`),c):(e.verbose("getAccountByUsername: No matching account found, returning null"),null)}function getAccountByHomeId(o,e,a){if(e.trace("getAccountByHomeId called"),!o)return e.warning("getAccountByHomeId: No homeAccountId provided"),null;const c=a.getAccountInfoFilteredBy({homeAccountId:o});return c?(e.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),e.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${o}`),c):(e.verbose("getAccountByHomeId: No matching account found, returning null"),null)}function getAccountByLocalId(o,e,a){if(e.trace("getAccountByLocalId called"),!o)return e.warning("getAccountByLocalId: No localAccountId provided"),null;const c=a.getAccountInfoFilteredBy({localAccountId:o});return c?(e.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),e.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${o}`),c):(e.verbose("getAccountByLocalId: No matching account found, returning null"),null)}function setActiveAccount(o,e){e.setActiveAccount(o)}function getActiveAccount(o){return o.getActiveAccount()}/*! @azure/msal-browser v3.26.1 2024-10-08 */const EventType={INITIALIZE_START:"msal:initializeStart",INITIALIZE_END:"msal:initializeEnd",ACCOUNT_ADDED:"msal:accountAdded",ACCOUNT_REMOVED:"msal:accountRemoved",ACTIVE_ACCOUNT_CHANGED:"msal:activeAccountChanged",LOGIN_START:"msal:loginStart",LOGIN_SUCCESS:"msal:loginSuccess",LOGIN_FAILURE:"msal:loginFailure",ACQUIRE_TOKEN_START:"msal:acquireTokenStart",ACQUIRE_TOKEN_SUCCESS:"msal:acquireTokenSuccess",ACQUIRE_TOKEN_FAILURE:"msal:acquireTokenFailure",ACQUIRE_TOKEN_NETWORK_START:"msal:acquireTokenFromNetworkStart",SSO_SILENT_START:"msal:ssoSilentStart",SSO_SILENT_SUCCESS:"msal:ssoSilentSuccess",SSO_SILENT_FAILURE:"msal:ssoSilentFailure",ACQUIRE_TOKEN_BY_CODE_START:"msal:acquireTokenByCodeStart",ACQUIRE_TOKEN_BY_CODE_SUCCESS:"msal:acquireTokenByCodeSuccess",ACQUIRE_TOKEN_BY_CODE_FAILURE:"msal:acquireTokenByCodeFailure",HANDLE_REDIRECT_START:"msal:handleRedirectStart",HANDLE_REDIRECT_END:"msal:handleRedirectEnd",POPUP_OPENED:"msal:popupOpened",LOGOUT_START:"msal:logoutStart",LOGOUT_SUCCESS:"msal:logoutSuccess",LOGOUT_FAILURE:"msal:logoutFailure",LOGOUT_END:"msal:logoutEnd",RESTORE_FROM_BFCACHE:"msal:restoreFromBFCache"};/*! @azure/msal-browser v3.26.1 2024-10-08 */class EventHandler{constructor(e){this.eventCallbacks=new Map,this.logger=e||new Logger({})}addEventCallback(e,a,c){if(typeof window<"u"){const j=c||createGuid();return this.eventCallbacks.has(j)?(this.logger.error(`Event callback with id: ${j} is already registered. Please provide a unique id or remove the existing callback and try again.`),null):(this.eventCallbacks.set(j,[e,a||[]]),this.logger.verbose(`Event callback registered with id: ${j}`),j)}return null}removeEventCallback(e){this.eventCallbacks.delete(e),this.logger.verbose(`Event callback ${e} removed.`)}emitEvent(e,a,c,j){if(typeof window<"u"){const d={eventType:e,interactionType:a||null,payload:c||null,error:j||null,timestamp:Date.now()};this.eventCallbacks.forEach(([et,at],st)=>{(at.length===0||at.includes(e))&&(this.logger.verbose(`Emitting event to callback ${st}: ${e}`),et.apply(null,[d]))})}}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class BaseInteractionClient{constructor(e,a,c,j,d,et,at,st,ct){this.config=e,this.browserStorage=a,this.browserCrypto=c,this.networkClient=this.config.system.networkClient,this.eventHandler=d,this.navigationClient=et,this.nativeMessageHandler=st,this.correlationId=ct||createNewGuid(),this.logger=j.clone(BrowserConstants.MSAL_SKU,version$2,this.correlationId),this.performanceClient=at}async clearCacheOnLogout(e){if(e){AccountEntity.accountInfoIsEqual(e,this.browserStorage.getActiveAccount(),!1)&&(this.logger.verbose("Setting active account to null"),this.browserStorage.setActiveAccount(null));try{await this.browserStorage.removeAccount(AccountEntity.generateAccountCacheKey(e)),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch{this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),await this.browserStorage.clear(),await this.browserCrypto.clearKeystore()}catch{this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}}getRedirectUri(e){this.logger.verbose("getRedirectUri called");const a=e||this.config.auth.redirectUri||getCurrentUri();return UrlString.getAbsoluteUrl(a,getCurrentUri())}initializeServerTelemetryManager(e,a){this.logger.verbose("initializeServerTelemetryManager called");const c={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:e,forceRefresh:a||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new ServerTelemetryManager(c,this.browserStorage)}async getDiscoveredAuthority(e){const{account:a}=e,c=e.requestExtraQueryParameters&&e.requestExtraQueryParameters.hasOwnProperty("instance_aware")?e.requestExtraQueryParameters.instance_aware:void 0;this.performanceClient.addQueueMeasurement(PerformanceEvents.StandardInteractionClientGetDiscoveredAuthority,this.correlationId);const j={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},d=e.requestAuthority||this.config.auth.authority,et=c!=null&&c.length?c==="true":this.config.auth.instanceAware,at=a&&et?this.config.auth.authority.replace(UrlString.getDomainFromUrl(d),a.environment):d,st=Authority.generateAuthority(at,e.requestAzureCloudOptions||this.config.auth.azureCloudOptions),ct=await invokeAsync(createDiscoveredInstance,PerformanceEvents.AuthorityFactoryCreateDiscoveredInstance,this.logger,this.performanceClient,this.correlationId)(st,this.config.system.networkClient,this.browserStorage,j,this.logger,this.correlationId,this.performanceClient);if(a&&!ct.isAlias(a.environment))throw createClientConfigurationError(authorityMismatch);return ct}}/*! @azure/msal-browser v3.26.1 2024-10-08 */const RANDOM_BYTE_ARR_LENGTH=32;async function generatePkceCodes(o,e,a){o.addQueueMeasurement(PerformanceEvents.GeneratePkceCodes,a);const c=invoke(generateCodeVerifier,PerformanceEvents.GenerateCodeVerifier,e,o,a)(o,e,a),j=await invokeAsync(generateCodeChallengeFromVerifier,PerformanceEvents.GenerateCodeChallengeFromVerifier,e,o,a)(c,o,e,a);return{verifier:c,challenge:j}}function generateCodeVerifier(o,e,a){try{const c=new Uint8Array(RANDOM_BYTE_ARR_LENGTH);return invoke(getRandomValues,PerformanceEvents.GetRandomValues,e,o,a)(c),urlEncodeArr(c)}catch{throw createBrowserAuthError(pkceNotCreated)}}async function generateCodeChallengeFromVerifier(o,e,a,c){e.addQueueMeasurement(PerformanceEvents.GenerateCodeChallengeFromVerifier,c);try{const j=await invokeAsync(sha256Digest,PerformanceEvents.Sha256Digest,a,e,c)(o,e,c);return urlEncodeArr(new Uint8Array(j))}catch{throw createBrowserAuthError(pkceNotCreated)}}/*! @azure/msal-browser v3.26.1 2024-10-08 */async function initializeBaseRequest(o,e,a,c){a.addQueueMeasurement(PerformanceEvents.InitializeBaseRequest,o.correlationId);const j=o.authority||e.auth.authority,d=[...o&&o.scopes||[]],et={...o,correlationId:o.correlationId,authority:j,scopes:d};if(!et.authenticationScheme)et.authenticationScheme=AuthenticationScheme.BEARER,c.verbose(`Authentication Scheme wasn't explicitly set in request, defaulting to "Bearer" request`);else{if(et.authenticationScheme===AuthenticationScheme.SSH){if(!o.sshJwk)throw createClientConfigurationError(missingSshJwk);if(!o.sshKid)throw createClientConfigurationError(missingSshKid)}c.verbose(`Authentication Scheme set to "${et.authenticationScheme}" as configured in Auth request`)}return e.cache.claimsBasedCachingEnabled&&o.claims&&!StringUtils.isEmptyObj(o.claims)&&(et.requestedClaimsHash=await hashString(o.claims)),et}async function initializeSilentRequest(o,e,a,c,j){c.addQueueMeasurement(PerformanceEvents.InitializeSilentRequest,o.correlationId);const d=await invokeAsync(initializeBaseRequest,PerformanceEvents.InitializeBaseRequest,j,c,o.correlationId)(o,a,c,j);return{...o,...d,account:e,forceRefresh:o.forceRefresh||!1}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class StandardInteractionClient extends BaseInteractionClient{async initializeAuthorizationCodeRequest(e){this.performanceClient.addQueueMeasurement(PerformanceEvents.StandardInteractionClientInitializeAuthorizationCodeRequest,this.correlationId);const a=await invokeAsync(generatePkceCodes,PerformanceEvents.GeneratePkceCodes,this.logger,this.performanceClient,this.correlationId)(this.performanceClient,this.logger,this.correlationId),c={...e,redirectUri:e.redirectUri,code:Constants$1.EMPTY_STRING,codeVerifier:a.verifier};return e.codeChallenge=a.challenge,e.codeChallengeMethod=Constants$1.S256_CODE_CHALLENGE_METHOD,c}initializeLogoutRequest(e){this.logger.verbose("initializeLogoutRequest called",e==null?void 0:e.correlationId);const a={correlationId:this.correlationId||createNewGuid(),...e};if(e)if(e.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(e.account){const c=this.getLogoutHintFromIdTokenClaims(e.account);c&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),a.logoutHint=c)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return!e||e.postLogoutRedirectUri!==null?e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",a.correlationId),a.postLogoutRedirectUri=UrlString.getAbsoluteUrl(e.postLogoutRedirectUri,getCurrentUri())):this.config.auth.postLogoutRedirectUri===null?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",a.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",a.correlationId),a.postLogoutRedirectUri=UrlString.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,getCurrentUri())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",a.correlationId),a.postLogoutRedirectUri=UrlString.getAbsoluteUrl(getCurrentUri(),getCurrentUri())):this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",a.correlationId),a}getLogoutHintFromIdTokenClaims(e){const a=e.idTokenClaims;if(a){if(a.login_hint)return a.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}async createAuthCodeClient(e){this.performanceClient.addQueueMeasurement(PerformanceEvents.StandardInteractionClientCreateAuthCodeClient,this.correlationId);const a=await invokeAsync(this.getClientConfiguration.bind(this),PerformanceEvents.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(e);return new AuthorizationCodeClient(a,this.performanceClient)}async getClientConfiguration(e){const{serverTelemetryManager:a,requestAuthority:c,requestAzureCloudOptions:j,requestExtraQueryParameters:d,account:et}=e;this.performanceClient.addQueueMeasurement(PerformanceEvents.StandardInteractionClientGetClientConfiguration,this.correlationId);const at=await invokeAsync(this.getDiscoveredAuthority.bind(this),PerformanceEvents.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,this.correlationId)({requestAuthority:c,requestAzureCloudOptions:j,requestExtraQueryParameters:d,account:et}),st=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:at,clientCapabilities:this.config.auth.clientCapabilities},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:st.loggerCallback,piiLoggingEnabled:st.piiLoggingEnabled,logLevel:st.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:a,libraryInfo:{sku:BrowserConstants.MSAL_SKU,version:version$2,cpu:Constants$1.EMPTY_STRING,os:Constants$1.EMPTY_STRING},telemetry:this.config.telemetry}}async initializeAuthorizationRequest(e,a){this.performanceClient.addQueueMeasurement(PerformanceEvents.StandardInteractionClientInitializeAuthorizationRequest,this.correlationId);const c=this.getRedirectUri(e.redirectUri),j={interactionType:a},d=ProtocolUtils.setRequestState(this.browserCrypto,e&&e.state||Constants$1.EMPTY_STRING,j),at={...await invokeAsync(initializeBaseRequest,PerformanceEvents.InitializeBaseRequest,this.logger,this.performanceClient,this.correlationId)({...e,correlationId:this.correlationId},this.config,this.performanceClient,this.logger),redirectUri:c,state:d,nonce:e.nonce||createNewGuid(),responseMode:this.config.auth.OIDCOptions.serverResponseType},st=e.account||this.browserStorage.getActiveAccount();if(st&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii(`Setting validated request account: ${st.homeAccountId}`,this.correlationId),at.account=st),!at.loginHint&&!st){const ct=this.browserStorage.getLegacyLoginHint();ct&&(at.loginHint=ct)}return at}}/*! @azure/msal-browser v3.26.1 2024-10-08 */const contentError="ContentError",userSwitch="user_switch";/*! @azure/msal-browser v3.26.1 2024-10-08 */const USER_INTERACTION_REQUIRED="USER_INTERACTION_REQUIRED",USER_CANCEL="USER_CANCEL",NO_NETWORK="NO_NETWORK",PERSISTENT_ERROR="PERSISTENT_ERROR",DISABLED="DISABLED",ACCOUNT_UNAVAILABLE="ACCOUNT_UNAVAILABLE";/*! @azure/msal-browser v3.26.1 2024-10-08 */const INVALID_METHOD_ERROR=-2147186943,NativeAuthErrorMessages={[userSwitch]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."};class NativeAuthError extends AuthError{constructor(e,a,c){super(e,a),Object.setPrototypeOf(this,NativeAuthError.prototype),this.name="NativeAuthError",this.ext=c}}function isFatalNativeAuthError(o){if(o.ext&&o.ext.status&&(o.ext.status===PERSISTENT_ERROR||o.ext.status===DISABLED)||o.ext&&o.ext.error&&o.ext.error===INVALID_METHOD_ERROR)return!0;switch(o.errorCode){case contentError:return!0;default:return!1}}function createNativeAuthError(o,e,a){if(a&&a.status)switch(a.status){case ACCOUNT_UNAVAILABLE:return createInteractionRequiredAuthError(nativeAccountUnavailable);case USER_INTERACTION_REQUIRED:return new InteractionRequiredAuthError(o,e);case USER_CANCEL:return createBrowserAuthError(userCancelled);case NO_NETWORK:return createBrowserAuthError(noNetworkConnectivity)}return new NativeAuthError(o,NativeAuthErrorMessages[o]||e,a)}/*! @azure/msal-browser v3.26.1 2024-10-08 */class SilentCacheClient extends StandardInteractionClient{async acquireToken(e){this.performanceClient.addQueueMeasurement(PerformanceEvents.SilentCacheClientAcquireToken,e.correlationId);const a=this.initializeServerTelemetryManager(ApiId.acquireTokenSilent_silentFlow),c=await invokeAsync(this.getClientConfiguration.bind(this),PerformanceEvents.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:a,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}),j=new SilentFlowClient(c,this.performanceClient);this.logger.verbose("Silent auth client created");try{const et=(await invokeAsync(j.acquireCachedToken.bind(j),PerformanceEvents.SilentFlowClientAcquireCachedToken,this.logger,this.performanceClient,e.correlationId)(e))[0];return this.performanceClient.addFields({fromCache:!0},e.correlationId),et}catch(d){throw d instanceof BrowserAuthError&&d.errorCode===cryptoKeyNotFound&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),d}}logout(e){this.logger.verbose("logoutRedirect called");const a=this.initializeLogoutRequest(e);return this.clearCacheOnLogout(a==null?void 0:a.account)}}/*! @azure/msal-browser v3.26.1 2024-10-08 */const BrokerServerParamKeys={BROKER_CLIENT_ID:"brk_client_id",BROKER_REDIRECT_URI:"brk_redirect_uri"};class NativeInteractionClient extends BaseInteractionClient{constructor(e,a,c,j,d,et,at,st,ct,ot,gt,ft){var vt;super(e,a,c,j,d,et,st,ct,ft),this.apiId=at,this.accountId=ot,this.nativeMessageHandler=ct,this.nativeStorageManager=gt,this.silentCacheClient=new SilentCacheClient(e,this.nativeStorageManager,c,j,d,et,st,ct,ft),this.serverTelemetryManager=this.initializeServerTelemetryManager(this.apiId);const yt=this.nativeMessageHandler.getExtensionId()===NativeConstants.PREFERRED_EXTENSION_ID?"chrome":(vt=this.nativeMessageHandler.getExtensionId())!=null&&vt.length?"unknown":void 0;this.skus=ServerTelemetryManager.makeExtraSkuString({libraryName:BrowserConstants.MSAL_SKU,libraryVersion:version$2,extensionName:yt,extensionVersion:this.nativeMessageHandler.getExtensionVersion()})}addRequestSKUs(e){e.extraParameters={...e.extraParameters,[X_CLIENT_EXTRA_SKU]:this.skus}}async acquireToken(e){this.performanceClient.addQueueMeasurement(PerformanceEvents.NativeInteractionClientAcquireToken,e.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");const a=this.performanceClient.startMeasurement(PerformanceEvents.NativeInteractionClientAcquireToken,e.correlationId),c=nowSeconds();try{const j=await this.initializeNativeRequest(e);try{const ct=await this.acquireTokensFromCache(this.accountId,j);return a.end({success:!0,isNativeBroker:!1,fromCache:!0}),ct}catch{this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}const{...d}=j,et={method:NativeExtensionMethod.GetToken,request:d},at=await this.nativeMessageHandler.sendMessage(et),st=this.validateNativeResponse(at);return await this.handleNativeResponse(st,j,c).then(ct=>(a.end({success:!0,isNativeBroker:!0,requestId:ct.requestId}),this.serverTelemetryManager.clearNativeBrokerErrorCode(),ct)).catch(ct=>{throw a.end({success:!1,errorCode:ct.errorCode,subErrorCode:ct.subError,isNativeBroker:!0}),ct})}catch(j){throw j instanceof NativeAuthError&&this.serverTelemetryManager.setNativeBrokerErrorCode(j.errorCode),j}}createSilentCacheRequest(e,a){return{authority:e.authority,correlationId:this.correlationId,scopes:ScopeSet.fromString(e.scope).asArray(),account:a,forceRefresh:!1}}async acquireTokensFromCache(e,a){if(!e)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),createClientAuthError(noAccountFound);const c=this.browserStorage.getBaseAccountInfo({nativeAccountId:e});if(!c)throw createClientAuthError(noAccountFound);try{const j=this.createSilentCacheRequest(a,c),d=await this.silentCacheClient.acquireToken(j),et={...c,idTokenClaims:d==null?void 0:d.idTokenClaims,idToken:d==null?void 0:d.idToken};return{...d,account:et}}catch(j){throw j}}async acquireTokenRedirect(e,a){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");const{...c}=e;delete c.onRedirectNavigate;const j=await this.initializeNativeRequest(c),d={method:NativeExtensionMethod.GetToken,request:j};try{const st=await this.nativeMessageHandler.sendMessage(d);this.validateNativeResponse(st)}catch(st){if(st instanceof NativeAuthError&&(this.serverTelemetryManager.setNativeBrokerErrorCode(st.errorCode),isFatalNativeAuthError(st)))throw st}this.browserStorage.setTemporaryCache(TemporaryCacheKeys.NATIVE_REQUEST,JSON.stringify(j),!0);const et={apiId:ApiId.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},at=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(e.redirectUri);a.end({success:!0}),await this.navigationClient.navigateExternal(at,et)}async handleRedirectPromise(e,a){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const c=this.browserStorage.getCachedNativeRequest();if(!c)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),e&&a&&(e==null||e.addFields({errorCode:"no_cached_request"},a)),null;const{prompt:j,...d}=c;j&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(TemporaryCacheKeys.NATIVE_REQUEST));const et={method:NativeExtensionMethod.GetToken,request:d},at=nowSeconds();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");const st=await this.nativeMessageHandler.sendMessage(et);this.validateNativeResponse(st);const ct=this.handleNativeResponse(st,d,at);this.browserStorage.setInteractionInProgress(!1);const ot=await ct;return this.serverTelemetryManager.clearNativeBrokerErrorCode(),ot}catch(st){throw this.browserStorage.setInteractionInProgress(!1),st}}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}async handleNativeResponse(e,a,c){var ot;this.logger.trace("NativeInteractionClient - handleNativeResponse called.");const j=extractTokenClaims(e.id_token,base64Decode),d=this.createHomeAccountIdentifier(e,j),et=(ot=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:a.accountId}))==null?void 0:ot.homeAccountId;if(d!==et&&e.account.id!==a.accountId)throw createNativeAuthError(userSwitch);const at=await this.getDiscoveredAuthority({requestAuthority:a.authority}),st=buildAccountToCache(this.browserStorage,at,d,base64Decode,j,e.client_info,void 0,j.tid,void 0,e.account.id,this.logger),ct=await this.generateAuthenticationResult(e,a,j,st,at.canonicalAuthority,c);return this.cacheAccount(st),this.cacheNativeTokens(e,a,d,j,e.access_token,ct.tenantId,c),ct}createHomeAccountIdentifier(e,a){return AccountEntity.generateHomeAccountId(e.client_info||Constants$1.EMPTY_STRING,AuthorityType.Default,this.logger,this.browserCrypto,a)}generateScopes(e,a){return e.scope?ScopeSet.fromString(e.scope):ScopeSet.fromString(a.scope)}async generatePopAccessToken(e,a){if(a.tokenType===AuthenticationScheme.POP&&a.signPopToken){if(e.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),e.shr;const c=new PopTokenGenerator(this.browserCrypto),j={resourceRequestMethod:a.resourceRequestMethod,resourceRequestUri:a.resourceRequestUri,shrClaims:a.shrClaims,shrNonce:a.shrNonce};if(!a.keyId)throw createClientAuthError(keyIdMissing);return c.signPopToken(e.access_token,a.keyId,j)}else return e.access_token}async generateAuthenticationResult(e,a,c,j,d,et){const at=this.addTelemetryFromNativeResponse(e),st=e.scope?ScopeSet.fromString(e.scope):ScopeSet.fromString(a.scope),ct=e.account.properties||{},ot=ct.UID||c.oid||c.sub||Constants$1.EMPTY_STRING,gt=ct.TenantId||c.tid||Constants$1.EMPTY_STRING,ft=updateAccountTenantProfileData(j.getAccountInfo(),void 0,c,e.id_token);ft.nativeAccountId!==e.account.id&&(ft.nativeAccountId=e.account.id);const yt=await this.generatePopAccessToken(e,a),vt=a.tokenType===AuthenticationScheme.POP?AuthenticationScheme.POP:AuthenticationScheme.BEARER;return{authority:d,uniqueId:ot,tenantId:gt,scopes:st.asArray(),account:ft,idToken:e.id_token,idTokenClaims:c,accessToken:yt,fromCache:at?this.isResponseFromCache(at):!1,expiresOn:new Date(Number(et+e.expires_in)*1e3),tokenType:vt,correlationId:this.correlationId,state:e.state,fromNativeBroker:!0}}cacheAccount(e){this.browserStorage.setAccount(e),this.browserStorage.removeAccountContext(e).catch(a=>{this.logger.error(`Error occurred while removing account context from browser storage. ${a}`)})}cacheNativeTokens(e,a,c,j,d,et,at){const st=createIdTokenEntity(c,a.authority,e.id_token||"",a.clientId,j.tid||""),ct=a.tokenType===AuthenticationScheme.POP?Constants$1.SHR_NONCE_VALIDITY:(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,ot=at+ct,gt=this.generateScopes(e,a),ft=createAccessTokenEntity(c,a.authority,d,a.clientId,j.tid||et,gt.printScopes(),ot,0,base64Decode,void 0,a.tokenType,void 0,a.keyId),yt={idToken:st,accessToken:ft};this.nativeStorageManager.saveCacheRecord(yt,a.storeInCache)}addTelemetryFromNativeResponse(e){const a=this.getMATSFromResponse(e);return a?(this.performanceClient.addFields({extensionId:this.nativeMessageHandler.getExtensionId(),extensionVersion:this.nativeMessageHandler.getExtensionVersion(),matsBrokerVersion:a.broker_version,matsAccountJoinOnStart:a.account_join_on_start,matsAccountJoinOnEnd:a.account_join_on_end,matsDeviceJoin:a.device_join,matsPromptBehavior:a.prompt_behavior,matsApiErrorCode:a.api_error_code,matsUiVisible:a.ui_visible,matsSilentCode:a.silent_code,matsSilentBiSubCode:a.silent_bi_sub_code,matsSilentMessage:a.silent_message,matsSilentStatus:a.silent_status,matsHttpStatus:a.http_status,matsHttpEventCount:a.http_event_count},this.correlationId),a):null}validateNativeResponse(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw createAuthError(unexpectedError,"Response missing expected properties.")}getMATSFromResponse(e){if(e.properties.MATS)try{return JSON.parse(e.properties.MATS)}catch{this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(e){return typeof e.is_cached>"u"?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached}async initializeNativeRequest(e){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");const a=e.authority||this.config.auth.authority;e.account&&await this.getDiscoveredAuthority({requestAuthority:a,requestAzureCloudOptions:e.azureCloudOptions,account:e.account});const c=new UrlString(a);c.validateAsUri();const{scopes:j,...d}=e,et=new ScopeSet(j||[]);et.appendScopes(OIDC_DEFAULT_SCOPES);const at=()=>{switch(this.apiId){case ApiId.ssoSilent:case ApiId.acquireTokenSilent_silentFlow:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),PromptValue.NONE}if(!e.prompt){this.logger.trace("initializeNativeRequest: prompt was not provided");return}switch(e.prompt){case PromptValue.NONE:case PromptValue.CONSENT:case PromptValue.LOGIN:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),e.prompt;default:throw this.logger.trace(`initializeNativeRequest: prompt = ${e.prompt} is not compatible with native flow`),createBrowserAuthError(nativePromptNotSupported)}},st={...d,accountId:this.accountId,clientId:this.config.auth.clientId,authority:c.urlString,scope:et.printScopes(),redirectUri:this.getRedirectUri(e.redirectUri),prompt:at(),correlationId:this.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:{...e.extraQueryParameters,...e.tokenQueryParameters},extendedExpiryToken:!1,keyId:e.popKid};if(st.signPopToken&&e.popKid)throw createBrowserAuthError(invalidPopTokenRequest);if(this.handleExtraBrokerParams(st),st.extraParameters=st.extraParameters||{},st.extraParameters.telemetry=NativeConstants.MATS_TELEMETRY,e.authenticationScheme===AuthenticationScheme.POP){const ct={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},ot=new PopTokenGenerator(this.browserCrypto);let gt;if(st.keyId)gt=this.browserCrypto.base64UrlEncode(JSON.stringify({kid:st.keyId})),st.signPopToken=!1;else{const ft=await invokeAsync(ot.generateCnf.bind(ot),PerformanceEvents.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(ct,this.logger);gt=ft.reqCnfString,st.keyId=ft.kid,st.signPopToken=!0}st.reqCnf=gt}return this.addRequestSKUs(st),st}handleExtraBrokerParams(e){if(e.extraParameters&&e.extraParameters.hasOwnProperty(BrokerServerParamKeys.BROKER_CLIENT_ID)&&e.extraParameters.hasOwnProperty(BrokerServerParamKeys.BROKER_REDIRECT_URI)&&e.extraParameters.hasOwnProperty(CLIENT_ID)){const a=e.extraParameters[CLIENT_ID],c=e.redirectUri,j=e.extraParameters[BrokerServerParamKeys.BROKER_REDIRECT_URI];e.extraParameters={child_client_id:a,child_redirect_uri:c},e.redirectUri=j}}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class NativeMessageHandler{constructor(e,a,c,j){this.logger=e,this.handshakeTimeoutMs=a,this.extensionId=j,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=c,this.handshakeEvent=c.startMeasurement(PerformanceEvents.NativeMessageHandlerHandshake)}async sendMessage(e){this.logger.trace("NativeMessageHandler - sendMessage called.");const a={channel:NativeConstants.CHANNEL_ID,extensionId:this.extensionId,responseId:createNewGuid(),body:e};return this.logger.trace("NativeMessageHandler - Sending request to browser extension"),this.logger.tracePii(`NativeMessageHandler - Sending request to browser extension: ${JSON.stringify(a)}`),this.messageChannel.port1.postMessage(a),new Promise((c,j)=>{this.resolvers.set(a.responseId,{resolve:c,reject:j})})}static async createProvider(e,a,c){e.trace("NativeMessageHandler - createProvider called.");try{const j=new NativeMessageHandler(e,a,c,NativeConstants.PREFERRED_EXTENSION_ID);return await j.sendHandshakeRequest(),j}catch{const d=new NativeMessageHandler(e,a,c);return await d.sendHandshakeRequest(),d}}async sendHandshakeRequest(){this.logger.trace("NativeMessageHandler - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);const e={channel:NativeConstants.CHANNEL_ID,extensionId:this.extensionId,responseId:createNewGuid(),body:{method:NativeExtensionMethod.HandshakeRequest}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=a=>{this.onChannelMessage(a)},window.postMessage(e,window.origin,[this.messageChannel.port2]),new Promise((a,c)=>{this.handshakeResolvers.set(e.responseId,{resolve:a,reject:c}),this.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),c(createBrowserAuthError(nativeHandshakeTimeout)),this.handshakeResolvers.delete(e.responseId)},this.handshakeTimeoutMs)})}onWindowMessage(e){if(this.logger.trace("NativeMessageHandler - onWindowMessage called"),e.source!==window)return;const a=e.data;if(!(!a.channel||a.channel!==NativeConstants.CHANNEL_ID)&&!(a.extensionId&&a.extensionId!==this.extensionId)&&a.body.method===NativeExtensionMethod.HandshakeRequest){const c=this.handshakeResolvers.get(a.responseId);if(!c){this.logger.trace(`NativeMessageHandler.onWindowMessage - resolver can't be found for request ${a.responseId}`);return}this.logger.verbose(a.extensionId?`Extension with id: ${a.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),c.reject(createBrowserAuthError(nativeExtensionNotInstalled))}}onChannelMessage(e){this.logger.trace("NativeMessageHandler - onChannelMessage called.");const a=e.data,c=this.resolvers.get(a.responseId),j=this.handshakeResolvers.get(a.responseId);try{const d=a.body.method;if(d===NativeExtensionMethod.Response){if(!c)return;const et=a.body.response;if(this.logger.trace("NativeMessageHandler - Received response from browser extension"),this.logger.tracePii(`NativeMessageHandler - Received response from browser extension: ${JSON.stringify(et)}`),et.status!=="Success")c.reject(createNativeAuthError(et.code,et.description,et.ext));else if(et.result)et.result.code&&et.result.description?c.reject(createNativeAuthError(et.result.code,et.result.description,et.result.ext)):c.resolve(et.result);else throw createAuthError(unexpectedError,"Event does not contain result.");this.resolvers.delete(a.responseId)}else if(d===NativeExtensionMethod.HandshakeResponse){if(!j){this.logger.trace(`NativeMessageHandler.onChannelMessage - resolver can't be found for request ${a.responseId}`);return}clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=a.extensionId,this.extensionVersion=a.body.version,this.logger.verbose(`NativeMessageHandler - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),j.resolve(),this.handshakeResolvers.delete(a.responseId)}}catch(d){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${d}`),this.logger.errorPii(`Unable to parse ${e}`),c?c.reject(d):j&&j.reject(d)}}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}static isNativeAvailable(e,a,c,j){if(a.trace("isNativeAvailable called"),!e.system.allowNativeBroker)return a.trace("isNativeAvailable: allowNativeBroker is not enabled, returning false"),!1;if(!c)return a.trace("isNativeAvailable: WAM extension provider is not initialized, returning false"),!1;if(j)switch(j){case AuthenticationScheme.BEARER:case AuthenticationScheme.POP:return a.trace("isNativeAvailable: authenticationScheme is supported, returning true"),!0;default:return a.trace("isNativeAvailable: authenticationScheme is not supported, returning false"),!1}return!0}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class InteractionHandler{constructor(e,a,c,j,d){this.authModule=e,this.browserStorage=a,this.authCodeRequest=c,this.logger=j,this.performanceClient=d}async handleCodeResponse(e,a){this.performanceClient.addQueueMeasurement(PerformanceEvents.HandleCodeResponse,a.correlationId);let c;try{c=this.authModule.handleFragmentResponse(e,a.state)}catch(j){throw j instanceof ServerError&&j.subError===userCancelled?createBrowserAuthError(userCancelled):j}return invokeAsync(this.handleCodeResponseFromServer.bind(this),PerformanceEvents.HandleCodeResponseFromServer,this.logger,this.performanceClient,a.correlationId)(c,a)}async handleCodeResponseFromServer(e,a,c=!0){if(this.performanceClient.addQueueMeasurement(PerformanceEvents.HandleCodeResponseFromServer,a.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),this.authCodeRequest.code=e.code,e.cloud_instance_host_name&&await invokeAsync(this.authModule.updateAuthority.bind(this.authModule),PerformanceEvents.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,a.correlationId)(e.cloud_instance_host_name,a.correlationId),c&&(e.nonce=a.nonce||void 0),e.state=a.state,e.client_info)this.authCodeRequest.clientInfo=e.client_info;else{const d=this.createCcsCredentials(a);d&&(this.authCodeRequest.ccsCredential=d)}return await invokeAsync(this.authModule.acquireToken.bind(this.authModule),PerformanceEvents.AuthClientAcquireToken,this.logger,this.performanceClient,a.correlationId)(this.authCodeRequest,e)}createCcsCredentials(e){return e.account?{credential:e.account.homeAccountId,type:CcsCredentialType.HOME_ACCOUNT_ID}:e.loginHint?{credential:e.loginHint,type:CcsCredentialType.UPN}:null}}/*! @azure/msal-browser v3.26.1 2024-10-08 */function deserializeResponse(o,e,a){const c=getDeserializedResponse(o);if(!c)throw stripLeadingHashOrQuery(o)?(a.error(`A ${e} is present in the iframe but it does not contain known properties. It's likely that the ${e} has been replaced by code running on the redirectUri page.`),a.errorPii(`The ${e} detected is: ${o}`),createBrowserAuthError(hashDoesNotContainKnownProperties)):(a.error(`The request has returned to the redirectUri but a ${e} is not present. It's likely that the ${e} has been removed or the page has been redirected by code running on the redirectUri page.`),createBrowserAuthError(hashEmptyError));return c}function validateInteractionType(o,e,a){if(!o.state)throw createBrowserAuthError(noStateInHash);const c=extractBrowserRequestState(e,o.state);if(!c)throw createBrowserAuthError(unableToParseState);if(c.interactionType!==a)throw createBrowserAuthError(stateInteractionTypeMismatch)}/*! @azure/msal-browser v3.26.1 2024-10-08 */class PopupClient extends StandardInteractionClient{constructor(e,a,c,j,d,et,at,st,ct,ot){super(e,a,c,j,d,et,at,ct,ot),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=st}acquireToken(e){try{const c={popupName:this.generatePopupName(e.scopes||OIDC_DEFAULT_SCOPES,e.authority||this.config.auth.authority),popupWindowAttributes:e.popupWindowAttributes||{},popupWindowParent:e.popupWindowParent??window};return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,c)):(this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),c.popup=this.openSizedPopup("about:blank",c),this.acquireTokenPopupAsync(e,c))}catch(a){return Promise.reject(a)}}logout(e){try{this.logger.verbose("logoutPopup called");const a=this.initializeLogoutRequest(e),c={popupName:this.generateLogoutPopupName(a),popupWindowAttributes:(e==null?void 0:e.popupWindowAttributes)||{},popupWindowParent:(e==null?void 0:e.popupWindowParent)??window},j=e&&e.authority,d=e&&e.mainWindowRedirectUri;return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(a,c,j,d)):(this.logger.verbose("asyncPopup set to false, opening popup"),c.popup=this.openSizedPopup("about:blank",c),this.logoutPopupAsync(a,c,j,d))}catch(a){return Promise.reject(a)}}async acquireTokenPopupAsync(e,a){var d;this.logger.verbose("acquireTokenPopupAsync called");const c=this.initializeServerTelemetryManager(ApiId.acquireTokenPopup),j=await invokeAsync(this.initializeAuthorizationRequest.bind(this),PerformanceEvents.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,InteractionType.Popup);preconnect(j.authority);try{const et=await invokeAsync(this.initializeAuthorizationCodeRequest.bind(this),PerformanceEvents.StandardInteractionClientInitializeAuthorizationCodeRequest,this.logger,this.performanceClient,this.correlationId)(j),at=await invokeAsync(this.createAuthCodeClient.bind(this),PerformanceEvents.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:c,requestAuthority:j.authority,requestAzureCloudOptions:j.azureCloudOptions,requestExtraQueryParameters:j.extraQueryParameters,account:j.account}),st=NativeMessageHandler.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme);let ct;st&&(ct=this.performanceClient.startMeasurement(PerformanceEvents.FetchAccountIdWithNativeBroker,e.correlationId));const ot=await at.getAuthCodeUrl({...j,nativeBroker:st}),gt=new InteractionHandler(at,this.browserStorage,et,this.logger,this.performanceClient),ft=this.initiateAuthRequest(ot,a);this.eventHandler.emitEvent(EventType.POPUP_OPENED,InteractionType.Popup,{popupWindow:ft},null);const yt=await this.monitorPopupForHash(ft,a.popupWindowParent),vt=invoke(deserializeResponse,PerformanceEvents.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(yt,this.config.auth.OIDCOptions.serverResponseType,this.logger);if(ThrottlingUtils.removeThrottle(this.browserStorage,this.config.auth.clientId,et),vt.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),ct&&ct.end({success:!0,isNativeBroker:!0}),!this.nativeMessageHandler)throw createBrowserAuthError(nativeConnectionNotEstablished);const bt=new NativeInteractionClient(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ApiId.acquireTokenPopup,this.performanceClient,this.nativeMessageHandler,vt.accountId,this.nativeStorage,j.correlationId),{userRequestState:ht}=ProtocolUtils.parseRequestState(this.browserCrypto,j.state);return await bt.acquireToken({...j,state:ht,prompt:void 0})}return await gt.handleCodeResponse(vt,j)}catch(et){throw(d=a.popup)==null||d.close(),et instanceof AuthError&&(et.setCorrelationId(this.correlationId),c.cacheFailedRequest(et)),et}}async logoutPopupAsync(e,a,c,j){var et,at,st,ct;this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(EventType.LOGOUT_START,InteractionType.Popup,e);const d=this.initializeServerTelemetryManager(ApiId.logoutPopup);try{await this.clearCacheOnLogout(e.account);const ot=await invokeAsync(this.createAuthCodeClient.bind(this),PerformanceEvents.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:d,requestAuthority:c,account:e.account||void 0});try{ot.authority.endSessionEndpoint}catch{if((et=e.account)!=null&&et.homeAccountId&&e.postLogoutRedirectUri&&ot.authority.protocolMode===ProtocolMode.OIDC){if(this.browserStorage.removeAccount((at=e.account)==null?void 0:at.homeAccountId),this.eventHandler.emitEvent(EventType.LOGOUT_SUCCESS,InteractionType.Popup,e),j){const yt={apiId:ApiId.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},vt=UrlString.getAbsoluteUrl(j,getCurrentUri());await this.navigationClient.navigateInternal(vt,yt)}(st=a.popup)==null||st.close();return}}const gt=ot.getLogoutUri(e);this.eventHandler.emitEvent(EventType.LOGOUT_SUCCESS,InteractionType.Popup,e);const ft=this.openPopup(gt,a);if(this.eventHandler.emitEvent(EventType.POPUP_OPENED,InteractionType.Popup,{popupWindow:ft},null),await this.monitorPopupForHash(ft,a.popupWindowParent).catch(()=>{}),j){const yt={apiId:ApiId.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},vt=UrlString.getAbsoluteUrl(j,getCurrentUri());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii(`Redirecting main window to: ${vt}`),await this.navigationClient.navigateInternal(vt,yt)}else this.logger.verbose("No main window navigation requested")}catch(ot){throw(ct=a.popup)==null||ct.close(),ot instanceof AuthError&&(ot.setCorrelationId(this.correlationId),d.cacheFailedRequest(ot)),this.browserStorage.setInteractionInProgress(!1),this.eventHandler.emitEvent(EventType.LOGOUT_FAILURE,InteractionType.Popup,null,ot),this.eventHandler.emitEvent(EventType.LOGOUT_END,InteractionType.Popup),ot}this.eventHandler.emitEvent(EventType.LOGOUT_END,InteractionType.Popup)}initiateAuthRequest(e,a){if(e)return this.logger.infoPii(`Navigate to: ${e}`),this.openPopup(e,a);throw this.logger.error("Navigate url is empty"),createBrowserAuthError(emptyNavigateUri)}monitorPopupForHash(e,a){return new Promise((c,j)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");const d=setInterval(()=>{if(e.closed){this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(d),j(createBrowserAuthError(userCancelled));return}let et="";try{et=e.location.href}catch{}if(!et||et==="about:blank")return;clearInterval(d);let at="";const st=this.config.auth.OIDCOptions.serverResponseType;e&&(st===ServerResponseType.QUERY?at=e.location.search:at=e.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),c(at)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(e,a)})}openPopup(e,a){try{let c;if(a.popup?(c=a.popup,this.logger.verbosePii(`Navigating popup window to: ${e}`),c.location.assign(e)):typeof a.popup>"u"&&(this.logger.verbosePii(`Opening popup window to: ${e}`),c=this.openSizedPopup(e,a)),!c)throw createBrowserAuthError(emptyWindowError);return c.focus&&c.focus(),this.currentWindow=c,a.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),c}catch(c){throw this.logger.error("error opening popup "+c.message),this.browserStorage.setInteractionInProgress(!1),createBrowserAuthError(popupWindowError)}}openSizedPopup(e,{popupName:a,popupWindowAttributes:c,popupWindowParent:j}){var yt,vt,rt,bt;const d=j.screenLeft?j.screenLeft:j.screenX,et=j.screenTop?j.screenTop:j.screenY,at=j.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,st=j.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let ct=(yt=c.popupSize)==null?void 0:yt.width,ot=(vt=c.popupSize)==null?void 0:vt.height,gt=(rt=c.popupPosition)==null?void 0:rt.top,ft=(bt=c.popupPosition)==null?void 0:bt.left;return(!ct||ct<0||ct>at)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),ct=BrowserConstants.POPUP_WIDTH),(!ot||ot<0||ot>st)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),ot=BrowserConstants.POPUP_HEIGHT),(!gt||gt<0||gt>st)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),gt=Math.max(0,st/2-BrowserConstants.POPUP_HEIGHT/2+et)),(!ft||ft<0||ft>at)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),ft=Math.max(0,at/2-BrowserConstants.POPUP_WIDTH/2+d)),j.open(e,a,`width=${ct}, height=${ot}, top=${gt}, left=${ft}, scrollbars=yes`)}unloadWindow(e){this.browserStorage.cleanRequestByInteractionType(InteractionType.Popup),this.currentWindow&&this.currentWindow.close(),e.preventDefault()}cleanPopup(e,a){e.close(),a.removeEventListener("beforeunload",this.unloadWindow),this.browserStorage.setInteractionInProgress(!1)}generatePopupName(e,a){return`${BrowserConstants.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${e.join("-")}.${a}.${this.correlationId}`}generateLogoutPopupName(e){const a=e.account&&e.account.homeAccountId;return`${BrowserConstants.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${a}.${this.correlationId}`}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class RedirectHandler{constructor(e,a,c,j,d){this.authModule=e,this.browserStorage=a,this.authCodeRequest=c,this.logger=j,this.performanceClient=d}async initiateAuthRequest(e,a){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),e){a.redirectStartPage&&(this.logger.verbose("RedirectHandler.initiateAuthRequest: redirectStartPage set, caching start page"),this.browserStorage.setTemporaryCache(TemporaryCacheKeys.ORIGIN_URI,a.redirectStartPage,!0)),this.browserStorage.setTemporaryCache(TemporaryCacheKeys.CORRELATION_ID,this.authCodeRequest.correlationId,!0),this.browserStorage.cacheCodeRequest(this.authCodeRequest),this.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${e}`);const c={apiId:ApiId.acquireTokenRedirect,timeout:a.redirectTimeout,noHistory:!1};if(typeof a.onRedirectNavigate=="function")if(this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),a.onRedirectNavigate(e)!==!1){this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),await a.navigationClient.navigateExternal(e,c);return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation");return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),await a.navigationClient.navigateExternal(e,c);return}}else throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),createBrowserAuthError(emptyNavigateUri)}async handleCodeResponse(e,a){this.logger.verbose("RedirectHandler.handleCodeResponse called"),this.browserStorage.setInteractionInProgress(!1);const c=this.browserStorage.generateStateKey(a),j=this.browserStorage.getTemporaryCache(c);if(!j)throw createClientAuthError(stateNotFound,"Cached State");let d;try{d=this.authModule.handleFragmentResponse(e,j)}catch(ct){throw ct instanceof ServerError&&ct.subError===userCancelled?createBrowserAuthError(userCancelled):ct}const et=this.browserStorage.generateNonceKey(j),at=this.browserStorage.getTemporaryCache(et);if(this.authCodeRequest.code=d.code,d.cloud_instance_host_name&&await invokeAsync(this.authModule.updateAuthority.bind(this.authModule),PerformanceEvents.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,this.authCodeRequest.correlationId)(d.cloud_instance_host_name,this.authCodeRequest.correlationId),d.nonce=at||void 0,d.state=j,d.client_info)this.authCodeRequest.clientInfo=d.client_info;else{const ct=this.checkCcsCredentials();ct&&(this.authCodeRequest.ccsCredential=ct)}const st=await this.authModule.acquireToken(this.authCodeRequest,d);return this.browserStorage.cleanRequestByState(a),st}checkCcsCredentials(){const e=this.browserStorage.getTemporaryCache(TemporaryCacheKeys.CCS_CREDENTIAL,!0);if(e)try{return JSON.parse(e)}catch{this.authModule.logger.error("Cache credential could not be parsed"),this.authModule.logger.errorPii(`Cache credential could not be parsed: ${e}`)}return null}}/*! @azure/msal-browser v3.26.1 2024-10-08 */function getNavigationType(){if(typeof window>"u"||typeof window.performance>"u"||typeof window.performance.getEntriesByType!="function")return;const o=window.performance.getEntriesByType("navigation"),e=o.length?o[0]:void 0;return e==null?void 0:e.type}class RedirectClient extends StandardInteractionClient{constructor(e,a,c,j,d,et,at,st,ct,ot){super(e,a,c,j,d,et,at,ct,ot),this.nativeStorage=st}async acquireToken(e){const a=await invokeAsync(this.initializeAuthorizationRequest.bind(this),PerformanceEvents.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,InteractionType.Redirect);this.browserStorage.updateCacheEntries(a.state,a.nonce,a.authority,a.loginHint||"",a.account||null);const c=this.initializeServerTelemetryManager(ApiId.acquireTokenRedirect),j=d=>{d.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.cleanRequestByState(a.state),this.eventHandler.emitEvent(EventType.RESTORE_FROM_BFCACHE,InteractionType.Redirect))};try{const d=await invokeAsync(this.initializeAuthorizationCodeRequest.bind(this),PerformanceEvents.StandardInteractionClientInitializeAuthorizationCodeRequest,this.logger,this.performanceClient,this.correlationId)(a),et=await invokeAsync(this.createAuthCodeClient.bind(this),PerformanceEvents.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:c,requestAuthority:a.authority,requestAzureCloudOptions:a.azureCloudOptions,requestExtraQueryParameters:a.extraQueryParameters,account:a.account}),at=new RedirectHandler(et,this.browserStorage,d,this.logger,this.performanceClient),st=await et.getAuthCodeUrl({...a,nativeBroker:NativeMessageHandler.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme)}),ct=this.getRedirectStartPage(e.redirectStartPage);return this.logger.verbosePii(`Redirect start page: ${ct}`),window.addEventListener("pageshow",j),await at.initiateAuthRequest(st,{navigationClient:this.navigationClient,redirectTimeout:this.config.system.redirectNavigationTimeout,redirectStartPage:ct,onRedirectNavigate:e.onRedirectNavigate||this.config.auth.onRedirectNavigate})}catch(d){throw d instanceof AuthError&&(d.setCorrelationId(this.correlationId),c.cacheFailedRequest(d)),window.removeEventListener("pageshow",j),this.browserStorage.cleanRequestByState(a.state),d}}async handleRedirectPromise(e="",a){const c=this.initializeServerTelemetryManager(ApiId.handleRedirectPromise);try{if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const[j,d]=this.getRedirectResponse(e||"");if(!j)return this.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),this.browserStorage.cleanRequestByInteractionType(InteractionType.Redirect),getNavigationType()!=="back_forward"?a.event.errorCode="no_server_response":this.logger.verbose("Back navigation event detected. Muting no_server_response error"),null;const et=this.browserStorage.getTemporaryCache(TemporaryCacheKeys.ORIGIN_URI,!0)||Constants$1.EMPTY_STRING,at=UrlString.removeHashFromUrl(et),st=UrlString.removeHashFromUrl(window.location.href);if(at===st&&this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("Current page is loginRequestUrl, handling response"),et.indexOf("#")>-1&&replaceHash(et),await this.handleResponse(j,c);if(this.config.auth.navigateToLoginRequestUrl){if(!isInIframe()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(TemporaryCacheKeys.URL_HASH,d,!0);const ct={apiId:ApiId.handleRedirectPromise,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0};let ot=!0;if(!et||et==="null"){const gt=getHomepage();this.browserStorage.setTemporaryCache(TemporaryCacheKeys.ORIGIN_URI,gt,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),ot=await this.navigationClient.navigateInternal(gt,ct)}else this.logger.verbose(`Navigating to loginRequestUrl: ${et}`),ot=await this.navigationClient.navigateInternal(et,ct);if(!ot)return await this.handleResponse(j,c)}}else return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),await this.handleResponse(j,c);return null}catch(j){throw j instanceof AuthError&&(j.setCorrelationId(this.correlationId),c.cacheFailedRequest(j)),this.browserStorage.cleanRequestByInteractionType(InteractionType.Redirect),j}}getRedirectResponse(e){this.logger.verbose("getRedirectResponseHash called");let a=e;a||(this.config.auth.OIDCOptions.serverResponseType===ServerResponseType.QUERY?a=window.location.search:a=window.location.hash);let c=getDeserializedResponse(a);if(c){try{validateInteractionType(c,this.browserCrypto,InteractionType.Redirect)}catch(d){return d instanceof AuthError&&this.logger.error(`Interaction type validation failed due to ${d.errorCode}: ${d.errorMessage}`),[null,""]}return clearHash(window),this.logger.verbose("Hash contains known properties, returning response hash"),[c,a]}const j=this.browserStorage.getTemporaryCache(TemporaryCacheKeys.URL_HASH,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(TemporaryCacheKeys.URL_HASH)),j&&(c=getDeserializedResponse(j),c)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[c,j]):[null,""]}async handleResponse(e,a){const c=e.state;if(!c)throw createBrowserAuthError(noStateInHash);const j=this.browserStorage.getCachedRequest(c);if(this.logger.verbose("handleResponse called, retrieved cached request"),e.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),!this.nativeMessageHandler)throw createBrowserAuthError(nativeConnectionNotEstablished);const st=new NativeInteractionClient(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ApiId.acquireTokenPopup,this.performanceClient,this.nativeMessageHandler,e.accountId,this.nativeStorage,j.correlationId),{userRequestState:ct}=ProtocolUtils.parseRequestState(this.browserCrypto,c);return st.acquireToken({...j,state:ct,prompt:void 0}).finally(()=>{this.browserStorage.cleanRequestByState(c)})}const d=this.browserStorage.getCachedAuthority(c);if(!d)throw createBrowserAuthError(noCachedAuthorityError);const et=await invokeAsync(this.createAuthCodeClient.bind(this),PerformanceEvents.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:a,requestAuthority:d});return ThrottlingUtils.removeThrottle(this.browserStorage,this.config.auth.clientId,j),new RedirectHandler(et,this.browserStorage,j,this.logger,this.performanceClient).handleCodeResponse(e,c)}async logout(e){var j,d;this.logger.verbose("logoutRedirect called");const a=this.initializeLogoutRequest(e),c=this.initializeServerTelemetryManager(ApiId.logout);try{this.eventHandler.emitEvent(EventType.LOGOUT_START,InteractionType.Redirect,e),await this.clearCacheOnLogout(a.account);const et={apiId:ApiId.logout,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},at=await invokeAsync(this.createAuthCodeClient.bind(this),PerformanceEvents.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:c,requestAuthority:e&&e.authority,requestExtraQueryParameters:e==null?void 0:e.extraQueryParameters,account:e&&e.account||void 0});if(at.authority.protocolMode===ProtocolMode.OIDC)try{at.authority.endSessionEndpoint}catch{if((j=a.account)!=null&&j.homeAccountId){this.browserStorage.removeAccount((d=a.account)==null?void 0:d.homeAccountId),this.eventHandler.emitEvent(EventType.LOGOUT_SUCCESS,InteractionType.Redirect,a);return}}const st=at.getLogoutUri(a);if(this.eventHandler.emitEvent(EventType.LOGOUT_SUCCESS,InteractionType.Redirect,a),e&&typeof e.onRedirectNavigate=="function")if(e.onRedirectNavigate(st)!==!1){this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),await this.navigationClient.navigateExternal(st,et);return}else this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation");else{this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),await this.navigationClient.navigateExternal(st,et);return}}catch(et){throw et instanceof AuthError&&(et.setCorrelationId(this.correlationId),c.cacheFailedRequest(et)),this.eventHandler.emitEvent(EventType.LOGOUT_FAILURE,InteractionType.Redirect,null,et),this.eventHandler.emitEvent(EventType.LOGOUT_END,InteractionType.Redirect),et}this.eventHandler.emitEvent(EventType.LOGOUT_END,InteractionType.Redirect)}getRedirectStartPage(e){const a=e||window.location.href;return UrlString.getAbsoluteUrl(a,getCurrentUri())}}/*! @azure/msal-browser v3.26.1 2024-10-08 */async function initiateAuthRequest(o,e,a,c,j){if(e.addQueueMeasurement(PerformanceEvents.SilentHandlerInitiateAuthRequest,c),!o)throw a.info("Navigate url is empty"),createBrowserAuthError(emptyNavigateUri);return j?invokeAsync(loadFrame,PerformanceEvents.SilentHandlerLoadFrame,a,e,c)(o,j,e,c):invoke(loadFrameSync,PerformanceEvents.SilentHandlerLoadFrameSync,a,e,c)(o)}async function monitorIframeForHash(o,e,a,c,j,d,et){return c.addQueueMeasurement(PerformanceEvents.SilentHandlerMonitorIframeForHash,d),new Promise((at,st)=>{e<DEFAULT_IFRAME_TIMEOUT_MS&&j.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${e}ms) than the default (${DEFAULT_IFRAME_TIMEOUT_MS}ms). This may result in timeouts.`);const ct=window.setTimeout(()=>{window.clearInterval(ot),st(createBrowserAuthError(monitorWindowTimeout))},e),ot=window.setInterval(()=>{let gt="";const ft=o.contentWindow;try{gt=ft?ft.location.href:""}catch{}if(!gt||gt==="about:blank")return;let yt="";ft&&(et===ServerResponseType.QUERY?yt=ft.location.search:yt=ft.location.hash),window.clearTimeout(ct),window.clearInterval(ot),at(yt)},a)}).finally(()=>{invoke(removeHiddenIframe,PerformanceEvents.RemoveHiddenIframe,j,c,d)(o)})}function loadFrame(o,e,a,c){return a.addQueueMeasurement(PerformanceEvents.SilentHandlerLoadFrame,c),new Promise((j,d)=>{const et=createHiddenIframe();window.setTimeout(()=>{if(!et){d("Unable to load iframe");return}et.src=o,j(et)},e)})}function loadFrameSync(o){const e=createHiddenIframe();return e.src=o,e}function createHiddenIframe(){const o=document.createElement("iframe");return o.className="msalSilentIframe",o.style.visibility="hidden",o.style.position="absolute",o.style.width=o.style.height="0",o.style.border="0",o.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.body.appendChild(o),o}function removeHiddenIframe(o){document.body===o.parentNode&&document.body.removeChild(o)}/*! @azure/msal-browser v3.26.1 2024-10-08 */class SilentIframeClient extends StandardInteractionClient{constructor(e,a,c,j,d,et,at,st,ct,ot,gt){super(e,a,c,j,d,et,st,ot,gt),this.apiId=at,this.nativeStorage=ct}async acquireToken(e){this.performanceClient.addQueueMeasurement(PerformanceEvents.SilentIframeClientAcquireToken,e.correlationId),!e.loginHint&&!e.sid&&(!e.account||!e.account.username)&&this.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");const a={...e};a.prompt?a.prompt!==PromptValue.NONE&&a.prompt!==PromptValue.NO_SESSION&&(this.logger.warning(`SilentIframeClient. Replacing invalid prompt ${a.prompt} with ${PromptValue.NONE}`),a.prompt=PromptValue.NONE):a.prompt=PromptValue.NONE;const c=await invokeAsync(this.initializeAuthorizationRequest.bind(this),PerformanceEvents.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(a,InteractionType.Silent);preconnect(c.authority);const j=this.initializeServerTelemetryManager(this.apiId);let d;try{return d=await invokeAsync(this.createAuthCodeClient.bind(this),PerformanceEvents.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:j,requestAuthority:c.authority,requestAzureCloudOptions:c.azureCloudOptions,requestExtraQueryParameters:c.extraQueryParameters,account:c.account}),await invokeAsync(this.silentTokenHelper.bind(this),PerformanceEvents.SilentIframeClientTokenHelper,this.logger,this.performanceClient,e.correlationId)(d,c)}catch(et){if(et instanceof AuthError&&(et.setCorrelationId(this.correlationId),j.cacheFailedRequest(et)),!d||!(et instanceof AuthError)||et.errorCode!==BrowserConstants.INVALID_GRANT_ERROR)throw et;this.performanceClient.addFields({retryError:et.errorCode},this.correlationId);const at=await invokeAsync(this.initializeAuthorizationRequest.bind(this),PerformanceEvents.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(a,InteractionType.Silent);return await invokeAsync(this.silentTokenHelper.bind(this),PerformanceEvents.SilentIframeClientTokenHelper,this.logger,this.performanceClient,this.correlationId)(d,at)}}logout(){return Promise.reject(createBrowserAuthError(silentLogoutUnsupported))}async silentTokenHelper(e,a){const c=a.correlationId;this.performanceClient.addQueueMeasurement(PerformanceEvents.SilentIframeClientTokenHelper,c);const j=await invokeAsync(this.initializeAuthorizationCodeRequest.bind(this),PerformanceEvents.StandardInteractionClientInitializeAuthorizationCodeRequest,this.logger,this.performanceClient,c)(a),d=await invokeAsync(e.getAuthCodeUrl.bind(e),PerformanceEvents.GetAuthCodeUrl,this.logger,this.performanceClient,c)({...a,nativeBroker:NativeMessageHandler.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,a.authenticationScheme)}),et=new InteractionHandler(e,this.browserStorage,j,this.logger,this.performanceClient),at=await invokeAsync(initiateAuthRequest,PerformanceEvents.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,c)(d,this.performanceClient,this.logger,c,this.config.system.navigateFrameWait),st=this.config.auth.OIDCOptions.serverResponseType,ct=await invokeAsync(monitorIframeForHash,PerformanceEvents.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,c)(at,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,c,st),ot=invoke(deserializeResponse,PerformanceEvents.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(ct,st,this.logger);if(ot.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),!this.nativeMessageHandler)throw createBrowserAuthError(nativeConnectionNotEstablished);const gt=new NativeInteractionClient(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.apiId,this.performanceClient,this.nativeMessageHandler,ot.accountId,this.browserStorage,c),{userRequestState:ft}=ProtocolUtils.parseRequestState(this.browserCrypto,a.state);return invokeAsync(gt.acquireToken.bind(gt),PerformanceEvents.NativeInteractionClientAcquireToken,this.logger,this.performanceClient,c)({...a,state:ft,prompt:a.prompt||PromptValue.NONE})}return invokeAsync(et.handleCodeResponse.bind(et),PerformanceEvents.HandleCodeResponse,this.logger,this.performanceClient,c)(ot,a)}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class SilentRefreshClient extends StandardInteractionClient{async acquireToken(e){this.performanceClient.addQueueMeasurement(PerformanceEvents.SilentRefreshClientAcquireToken,e.correlationId);const a=await invokeAsync(initializeBaseRequest,PerformanceEvents.InitializeBaseRequest,this.logger,this.performanceClient,e.correlationId)(e,this.config,this.performanceClient,this.logger),c={...e,...a};e.redirectUri&&(c.redirectUri=this.getRedirectUri(e.redirectUri));const j=this.initializeServerTelemetryManager(ApiId.acquireTokenSilent_silentFlow),d=await this.createRefreshTokenClient({serverTelemetryManager:j,authorityUrl:c.authority,azureCloudOptions:c.azureCloudOptions,account:c.account});return invokeAsync(d.acquireTokenByRefreshToken.bind(d),PerformanceEvents.RefreshTokenClientAcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(c).catch(et=>{throw et.setCorrelationId(this.correlationId),j.cacheFailedRequest(et),et})}logout(){return Promise.reject(createBrowserAuthError(silentLogoutUnsupported))}async createRefreshTokenClient(e){const a=await invokeAsync(this.getClientConfiguration.bind(this),PerformanceEvents.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:e.serverTelemetryManager,requestAuthority:e.authorityUrl,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return new RefreshTokenClient(a,this.performanceClient)}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class TokenCache{constructor(e,a,c,j){this.isBrowserEnvironment=typeof window<"u",this.config=e,this.storage=a,this.logger=c,this.cryptoObj=j}loadExternalTokens(e,a,c){if(!this.isBrowserEnvironment)throw createBrowserAuthError(nonBrowserEnvironment);const j=a.id_token?extractTokenClaims(a.id_token,base64Decode):void 0,d={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},et=e.authority?new Authority(Authority.generateAuthority(e.authority,e.azureCloudOptions),this.config.system.networkClient,this.storage,d,this.logger,e.correlationId||createNewGuid()):void 0,at=this.loadAccount(e,c.clientInfo||a.client_info||"",j,et),st=this.loadIdToken(a,at.homeAccountId,at.environment,at.realm),ct=this.loadAccessToken(e,a,at.homeAccountId,at.environment,at.realm,c),ot=this.loadRefreshToken(a,at.homeAccountId,at.environment);return this.generateAuthenticationResult(e,{account:at,idToken:st,accessToken:ct,refreshToken:ot},j,et)}loadAccount(e,a,c,j){if(this.logger.verbose("TokenCache - loading account"),e.account){const st=AccountEntity.createFromAccountInfo(e.account);return this.storage.setAccount(st),st}else if(!j||!a&&!c)throw this.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),createBrowserAuthError(unableToLoadToken);const d=AccountEntity.generateHomeAccountId(a,j.authorityType,this.logger,this.cryptoObj,c),et=c==null?void 0:c.tid,at=buildAccountToCache(this.storage,j,d,base64Decode,c,a,j.hostnameAndPort,et,void 0,void 0,this.logger);return this.storage.setAccount(at),at}loadIdToken(e,a,c,j){if(!e.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");const d=createIdTokenEntity(a,c,e.id_token,this.config.auth.clientId,j);return this.storage.setIdTokenCredential(d),d}loadAccessToken(e,a,c,j,d,et){if(a.access_token)if(a.expires_in){if(!a.scope&&(!e.scopes||!e.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null}else return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;else return this.logger.verbose("TokenCache - no access token found in response"),null;this.logger.verbose("TokenCache - loading access token");const at=a.scope?ScopeSet.fromString(a.scope):new ScopeSet(e.scopes),st=et.expiresOn||a.expires_in+new Date().getTime()/1e3,ct=et.extendedExpiresOn||(a.ext_expires_in||a.expires_in)+new Date().getTime()/1e3,ot=createAccessTokenEntity(c,j,a.access_token,this.config.auth.clientId,d,at.printScopes(),st,ct,base64Decode);return this.storage.setAccessTokenCredential(ot),ot}loadRefreshToken(e,a,c){if(!e.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;this.logger.verbose("TokenCache - loading refresh token");const j=createRefreshTokenEntity(a,c,e.refresh_token,this.config.auth.clientId,e.foci,void 0,e.refresh_token_expires_in);return this.storage.setRefreshTokenCredential(j),j}generateAuthenticationResult(e,a,c,j){var ot,gt,ft;let d="",et=[],at=null,st;a!=null&&a.accessToken&&(d=a.accessToken.secret,et=ScopeSet.fromString(a.accessToken.target).asArray(),at=new Date(Number(a.accessToken.expiresOn)*1e3),st=new Date(Number(a.accessToken.extendedExpiresOn)*1e3));const ct=a.account;return{authority:j?j.canonicalAuthority:"",uniqueId:a.account.localAccountId,tenantId:a.account.realm,scopes:et,account:ct.getAccountInfo(),idToken:((ot=a.idToken)==null?void 0:ot.secret)||"",idTokenClaims:c||{},accessToken:d,fromCache:!0,expiresOn:at,correlationId:e.correlationId||"",requestId:"",extExpiresOn:st,familyId:((gt=a.refreshToken)==null?void 0:gt.familyId)||"",tokenType:((ft=a==null?void 0:a.accessToken)==null?void 0:ft.tokenType)||"",state:e.state||"",cloudGraphHostName:ct.cloudGraphHostName||"",msGraphHost:ct.msGraphHost||"",fromNativeBroker:!1}}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class HybridSpaAuthorizationCodeClient extends AuthorizationCodeClient{constructor(e){super(e),this.includeRedirectUri=!1}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class SilentAuthCodeClient extends StandardInteractionClient{constructor(e,a,c,j,d,et,at,st,ct,ot){super(e,a,c,j,d,et,st,ct,ot),this.apiId=at}async acquireToken(e){if(!e.code)throw createBrowserAuthError(authCodeRequired);const a=await invokeAsync(this.initializeAuthorizationRequest.bind(this),PerformanceEvents.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(e,InteractionType.Silent),c=this.initializeServerTelemetryManager(this.apiId);try{const j={...a,code:e.code},d=await invokeAsync(this.getClientConfiguration.bind(this),PerformanceEvents.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:c,requestAuthority:a.authority,requestAzureCloudOptions:a.azureCloudOptions,requestExtraQueryParameters:a.extraQueryParameters,account:a.account}),et=new HybridSpaAuthorizationCodeClient(d);this.logger.verbose("Auth code client created");const at=new InteractionHandler(et,this.browserStorage,j,this.logger,this.performanceClient);return await invokeAsync(at.handleCodeResponseFromServer.bind(at),PerformanceEvents.HandleCodeResponseFromServer,this.logger,this.performanceClient,e.correlationId)({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},a,!1)}catch(j){throw j instanceof AuthError&&(j.setCorrelationId(this.correlationId),c.cacheFailedRequest(j)),j}}logout(){return Promise.reject(createBrowserAuthError(silentLogoutUnsupported))}}/*! @azure/msal-browser v3.26.1 2024-10-08 */function getAccountType(o){const e=o==null?void 0:o.idTokenClaims;if(e!=null&&e.tfp||e!=null&&e.acr)return"B2C";if(e!=null&&e.tid){if((e==null?void 0:e.tid)==="9188040d-6c67-4c5b-b112-36a304b66dad")return"MSA"}else return;return"AAD"}function preflightCheck(o,e){try{preflightCheck$1(o)}catch(a){throw e.end({success:!1},a),a}}class StandardController{constructor(e){this.operatingContext=e,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=e.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new CryptoOps(this.logger,this.performanceClient):DEFAULT_CRYPTO_IMPLEMENTATION,this.eventHandler=new EventHandler(this.logger),this.browserStorage=this.isBrowserEnvironment?new BrowserCacheManager(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,buildStaticAuthorityOptions(this.config.auth),this.performanceClient):DEFAULT_BROWSER_CACHE_MANAGER(this.config.auth.clientId,this.logger);const a={cacheLocation:BrowserCacheLocation.MemoryStorage,temporaryCacheLocation:BrowserCacheLocation.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new BrowserCacheManager(this.config.auth.clientId,a,this.browserCrypto,this.logger,void 0,this.performanceClient),this.tokenCache=new TokenCache(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this),this.listeningToStorageEvents=!1,this.handleAccountCacheChange=this.handleAccountCacheChange.bind(this)}static async createController(e,a){const c=new StandardController(e);return await c.initialize(a),c}trackPageVisibility(e){e&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},e))}async initialize(e){if(this.logger.trace("initialize called"),this.initialized){this.logger.info("initialize has already been called, exiting early.");return}if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, exiting early."),this.initialized=!0,this.eventHandler.emitEvent(EventType.INITIALIZE_END);return}const a=(e==null?void 0:e.correlationId)||this.getRequestCorrelationId(),c=this.config.system.allowNativeBroker,j=this.performanceClient.startMeasurement(PerformanceEvents.InitializeClientApplication,a);if(this.eventHandler.emitEvent(EventType.INITIALIZE_START),c)try{this.nativeExtensionProvider=await NativeMessageHandler.createProvider(this.logger,this.config.system.nativeBrokerHandshakeTimeout,this.performanceClient)}catch(d){this.logger.verbose(d)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),await invokeAsync(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),PerformanceEvents.ClearTokensAndKeysWithClaims,this.logger,this.performanceClient,a)(this.performanceClient,a)),this.initialized=!0,this.eventHandler.emitEvent(EventType.INITIALIZE_END),j.end({allowNativeBroker:c,success:!0})}async handleRedirectPromise(e){if(this.logger.verbose("handleRedirectPromise called"),blockAPICallsBeforeInitialize(this.initialized),this.isBrowserEnvironment){const a=e||"";let c=this.redirectResponse.get(a);return typeof c>"u"?(c=this.handleRedirectPromiseInternal(e),this.redirectResponse.set(a,c),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),c}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null}async handleRedirectPromiseInternal(e){const a=this.getAllAccounts(),c=this.browserStorage.getCachedNativeRequest(),j=c&&NativeMessageHandler.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider)&&this.nativeExtensionProvider&&!e,d=j?c==null?void 0:c.correlationId:this.browserStorage.getTemporaryCache(TemporaryCacheKeys.CORRELATION_ID,!0)||"",et=this.performanceClient.startMeasurement(PerformanceEvents.AcquireTokenRedirect,d);this.eventHandler.emitEvent(EventType.HANDLE_REDIRECT_START,InteractionType.Redirect);let at;if(j&&this.nativeExtensionProvider){this.logger.trace("handleRedirectPromise - acquiring token from native platform");const st=new NativeInteractionClient(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ApiId.handleRedirectPromise,this.performanceClient,this.nativeExtensionProvider,c.accountId,this.nativeInternalStorage,c.correlationId);at=invokeAsync(st.handleRedirectPromise.bind(st),PerformanceEvents.HandleNativeRedirectPromiseMeasurement,this.logger,this.performanceClient,et.event.correlationId)(this.performanceClient,et.event.correlationId)}else{this.logger.trace("handleRedirectPromise - acquiring token from web flow");const st=this.createRedirectClient(d);at=invokeAsync(st.handleRedirectPromise.bind(st),PerformanceEvents.HandleRedirectPromiseMeasurement,this.logger,this.performanceClient,et.event.correlationId)(e,et)}return at.then(st=>(st?(a.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(EventType.LOGIN_SUCCESS,InteractionType.Redirect,st),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_SUCCESS,InteractionType.Redirect,st),this.logger.verbose("handleRedirectResponse returned result, acquire token success")),et.end({success:!0,accountType:getAccountType(st.account)})):et.event.errorCode?et.end({success:!1}):et.discard(),this.eventHandler.emitEvent(EventType.HANDLE_REDIRECT_END,InteractionType.Redirect),st)).catch(st=>{const ct=st;throw a.length>0?this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_FAILURE,InteractionType.Redirect,null,ct):this.eventHandler.emitEvent(EventType.LOGIN_FAILURE,InteractionType.Redirect,null,ct),this.eventHandler.emitEvent(EventType.HANDLE_REDIRECT_END,InteractionType.Redirect),et.end({success:!1},ct),st})}async acquireTokenRedirect(e){const a=this.getRequestCorrelationId(e);this.logger.verbose("acquireTokenRedirect called",a);const c=this.performanceClient.startMeasurement(PerformanceEvents.AcquireTokenPreRedirect,a);c.add({accountType:getAccountType(e.account),scenarioId:e.scenarioId});const j=e.onRedirectNavigate;if(j)e.onRedirectNavigate=et=>{const at=typeof j=="function"?j(et):void 0;return at!==!1?c.end({success:!0}):c.discard(),at};else{const et=this.config.auth.onRedirectNavigate;this.config.auth.onRedirectNavigate=at=>{const st=typeof et=="function"?et(at):void 0;return st!==!1?c.end({success:!0}):c.discard(),st}}const d=this.getAllAccounts().length>0;try{redirectPreflightCheck(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0),d?this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_START,InteractionType.Redirect,e):this.eventHandler.emitEvent(EventType.LOGIN_START,InteractionType.Redirect,e);let et;return this.nativeExtensionProvider&&this.canUseNative(e)?et=new NativeInteractionClient(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ApiId.acquireTokenRedirect,this.performanceClient,this.nativeExtensionProvider,this.getNativeAccountId(e),this.nativeInternalStorage,a).acquireTokenRedirect(e,c).catch(st=>{if(st instanceof NativeAuthError&&isFatalNativeAuthError(st))return this.nativeExtensionProvider=void 0,this.createRedirectClient(a).acquireToken(e);if(st instanceof InteractionRequiredAuthError)return this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createRedirectClient(a).acquireToken(e);throw this.browserStorage.setInteractionInProgress(!1),st}):et=this.createRedirectClient(a).acquireToken(e),await et}catch(et){throw c.end({success:!1},et),d?this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_FAILURE,InteractionType.Redirect,null,et):this.eventHandler.emitEvent(EventType.LOGIN_FAILURE,InteractionType.Redirect,null,et),et}}acquireTokenPopup(e){const a=this.getRequestCorrelationId(e),c=this.performanceClient.startMeasurement(PerformanceEvents.AcquireTokenPopup,a);c.add({scenarioId:e.scenarioId,accountType:getAccountType(e.account)});try{this.logger.verbose("acquireTokenPopup called",a),preflightCheck(this.initialized,c),this.browserStorage.setInteractionInProgress(!0)}catch(et){return Promise.reject(et)}const j=this.getAllAccounts();j.length>0?this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_START,InteractionType.Popup,e):this.eventHandler.emitEvent(EventType.LOGIN_START,InteractionType.Popup,e);let d;return this.canUseNative(e)?d=this.acquireTokenNative({...e,correlationId:a},ApiId.acquireTokenPopup).then(et=>(this.browserStorage.setInteractionInProgress(!1),c.end({success:!0,isNativeBroker:!0,requestId:et.requestId,accountType:getAccountType(et.account)}),et)).catch(et=>{if(et instanceof NativeAuthError&&isFatalNativeAuthError(et))return this.nativeExtensionProvider=void 0,this.createPopupClient(a).acquireToken(e);if(et instanceof InteractionRequiredAuthError)return this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createPopupClient(a).acquireToken(e);throw this.browserStorage.setInteractionInProgress(!1),et}):d=this.createPopupClient(a).acquireToken(e),d.then(et=>(j.length<this.getAllAccounts().length?this.eventHandler.emitEvent(EventType.LOGIN_SUCCESS,InteractionType.Popup,et):this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_SUCCESS,InteractionType.Popup,et),c.end({success:!0,requestId:et.requestId,accessTokenSize:et.accessToken.length,idTokenSize:et.idToken.length,accountType:getAccountType(et.account)}),et)).catch(et=>(j.length>0?this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_FAILURE,InteractionType.Popup,null,et):this.eventHandler.emitEvent(EventType.LOGIN_FAILURE,InteractionType.Popup,null,et),c.end({success:!1},et),Promise.reject(et)))}trackPageVisibilityWithMeasurement(){const e=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;e&&(this.logger.info("Perf: Visibility change detected in ",e.event.name),e.increment({visibilityChangeCount:1}))}async ssoSilent(e){var d,et;const a=this.getRequestCorrelationId(e),c={...e,prompt:e.prompt,correlationId:a};this.ssoSilentMeasurement=this.performanceClient.startMeasurement(PerformanceEvents.SsoSilent,a),(d=this.ssoSilentMeasurement)==null||d.add({scenarioId:e.scenarioId,accountType:getAccountType(e.account)}),preflightCheck(this.initialized,this.ssoSilentMeasurement),(et=this.ssoSilentMeasurement)==null||et.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",a),this.eventHandler.emitEvent(EventType.SSO_SILENT_START,InteractionType.Silent,c);let j;return this.canUseNative(c)?j=this.acquireTokenNative(c,ApiId.ssoSilent).catch(at=>{if(at instanceof NativeAuthError&&isFatalNativeAuthError(at))return this.nativeExtensionProvider=void 0,this.createSilentIframeClient(c.correlationId).acquireToken(c);throw at}):j=this.createSilentIframeClient(c.correlationId).acquireToken(c),j.then(at=>{var st;return this.eventHandler.emitEvent(EventType.SSO_SILENT_SUCCESS,InteractionType.Silent,at),(st=this.ssoSilentMeasurement)==null||st.end({success:!0,isNativeBroker:at.fromNativeBroker,requestId:at.requestId,accessTokenSize:at.accessToken.length,idTokenSize:at.idToken.length,accountType:getAccountType(at.account)}),at}).catch(at=>{var st;throw this.eventHandler.emitEvent(EventType.SSO_SILENT_FAILURE,InteractionType.Silent,null,at),(st=this.ssoSilentMeasurement)==null||st.end({success:!1},at),at}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenByCode(e){const a=this.getRequestCorrelationId(e);this.logger.trace("acquireTokenByCode called",a);const c=this.performanceClient.startMeasurement(PerformanceEvents.AcquireTokenByCode,a);preflightCheck(this.initialized,c),this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_BY_CODE_START,InteractionType.Silent,e),c.add({scenarioId:e.scenarioId});try{if(e.code&&e.nativeAccountId)throw createBrowserAuthError(spaCodeAndNativeAccountIdPresent);if(e.code){const j=e.code;let d=this.hybridAuthCodeResponses.get(j);return d?(this.logger.verbose("Existing acquireTokenByCode request found",a),c.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",a),d=this.acquireTokenByCodeAsync({...e,correlationId:a}).then(et=>(this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_BY_CODE_SUCCESS,InteractionType.Silent,et),this.hybridAuthCodeResponses.delete(j),c.end({success:!0,isNativeBroker:et.fromNativeBroker,requestId:et.requestId,accessTokenSize:et.accessToken.length,idTokenSize:et.idToken.length,accountType:getAccountType(et.account)}),et)).catch(et=>{throw this.hybridAuthCodeResponses.delete(j),this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_BY_CODE_FAILURE,InteractionType.Silent,null,et),c.end({success:!1},et),et}),this.hybridAuthCodeResponses.set(j,d)),await d}else if(e.nativeAccountId)if(this.canUseNative(e,e.nativeAccountId)){const j=await this.acquireTokenNative({...e,correlationId:a},ApiId.acquireTokenByCode,e.nativeAccountId).catch(d=>{throw d instanceof NativeAuthError&&isFatalNativeAuthError(d)&&(this.nativeExtensionProvider=void 0),d});return c.end({accountType:getAccountType(j.account),success:!0}),j}else throw createBrowserAuthError(unableToAcquireTokenFromNativePlatform);else throw createBrowserAuthError(authCodeOrNativeAccountIdRequired)}catch(j){throw this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_BY_CODE_FAILURE,InteractionType.Silent,null,j),c.end({success:!1},j),j}}async acquireTokenByCodeAsync(e){var j;return this.logger.trace("acquireTokenByCodeAsync called",e.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(PerformanceEvents.AcquireTokenByCodeAsync,e.correlationId),(j=this.acquireTokenByCodeAsyncMeasurement)==null||j.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),await this.createSilentAuthCodeClient(e.correlationId).acquireToken(e).then(d=>{var et;return(et=this.acquireTokenByCodeAsyncMeasurement)==null||et.end({success:!0,fromCache:d.fromCache,isNativeBroker:d.fromNativeBroker,requestId:d.requestId}),d}).catch(d=>{var et;throw(et=this.acquireTokenByCodeAsyncMeasurement)==null||et.end({success:!1},d),d}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenFromCache(e,a){switch(this.performanceClient.addQueueMeasurement(PerformanceEvents.AcquireTokenFromCache,e.correlationId),a){case CacheLookupPolicy.Default:case CacheLookupPolicy.AccessToken:case CacheLookupPolicy.AccessTokenAndRefreshToken:const c=this.createSilentCacheClient(e.correlationId);return invokeAsync(c.acquireToken.bind(c),PerformanceEvents.SilentCacheClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw createClientAuthError(tokenRefreshRequired)}}async acquireTokenByRefreshToken(e,a){switch(this.performanceClient.addQueueMeasurement(PerformanceEvents.AcquireTokenByRefreshToken,e.correlationId),a){case CacheLookupPolicy.Default:case CacheLookupPolicy.AccessTokenAndRefreshToken:case CacheLookupPolicy.RefreshToken:case CacheLookupPolicy.RefreshTokenAndNetwork:const c=this.createSilentRefreshClient(e.correlationId);return invokeAsync(c.acquireToken.bind(c),PerformanceEvents.SilentRefreshClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw createClientAuthError(tokenRefreshRequired)}}async acquireTokenBySilentIframe(e){this.performanceClient.addQueueMeasurement(PerformanceEvents.AcquireTokenBySilentIframe,e.correlationId);const a=this.createSilentIframeClient(e.correlationId);return invokeAsync(a.acquireToken.bind(a),PerformanceEvents.SilentIframeClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e)}async logout(e){const a=this.getRequestCorrelationId(e);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",a),this.logoutRedirect({correlationId:a,...e})}async logoutRedirect(e){const a=this.getRequestCorrelationId(e);return redirectPreflightCheck(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0),this.createRedirectClient(a).logout(e)}logoutPopup(e){try{const a=this.getRequestCorrelationId(e);return preflightCheck$1(this.initialized),this.browserStorage.setInteractionInProgress(!0),this.createPopupClient(a).logout(e)}catch(a){return Promise.reject(a)}}async clearCache(e){if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, returning early.");return}const a=this.getRequestCorrelationId(e);return this.createSilentCacheClient(a).logout(e)}getAllAccounts(e){return getAllAccounts(this.logger,this.browserStorage,this.isBrowserEnvironment,e)}getAccount(e){return getAccount(e,this.logger,this.browserStorage)}getAccountByUsername(e){return getAccountByUsername(e,this.logger,this.browserStorage)}getAccountByHomeId(e){return getAccountByHomeId(e,this.logger,this.browserStorage)}getAccountByLocalId(e){return getAccountByLocalId(e,this.logger,this.browserStorage)}setActiveAccount(e){setActiveAccount(e,this.browserStorage)}getActiveAccount(){return getActiveAccount(this.browserStorage)}async hydrateCache(e,a){this.logger.verbose("hydrateCache called");const c=AccountEntity.createFromAccountInfo(e.account,e.cloudGraphHostName,e.msGraphHost);return this.browserStorage.setAccount(c),e.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(e,a)):this.browserStorage.hydrateCache(e,a)}async acquireTokenNative(e,a,c){if(this.logger.trace("acquireTokenNative called"),!this.nativeExtensionProvider)throw createBrowserAuthError(nativeConnectionNotEstablished);return new NativeInteractionClient(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,a,this.performanceClient,this.nativeExtensionProvider,c||this.getNativeAccountId(e),this.nativeInternalStorage,e.correlationId).acquireToken(e)}canUseNative(e,a){if(this.logger.trace("canUseNative called"),!NativeMessageHandler.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme))return this.logger.trace("canUseNative: isNativeAvailable returned false, returning false"),!1;if(e.prompt)switch(e.prompt){case PromptValue.NONE:case PromptValue.CONSENT:case PromptValue.LOGIN:this.logger.trace("canUseNative: prompt is compatible with native flow");break;default:return this.logger.trace(`canUseNative: prompt = ${e.prompt} is not compatible with native flow, returning false`),!1}return!a&&!this.getNativeAccountId(e)?(this.logger.trace("canUseNative: nativeAccountId is not available, returning false"),!1):!0}getNativeAccountId(e){const a=e.account||this.getAccount({loginHint:e.loginHint,sid:e.sid})||this.getActiveAccount();return a&&a.nativeAccountId||""}createPopupClient(e){return new PopupClient(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createRedirectClient(e){return new RedirectClient(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentIframeClient(e){return new SilentIframeClient(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ApiId.ssoSilent,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentCacheClient(e){return new SilentCacheClient(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentRefreshClient(e){return new SilentRefreshClient(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentAuthCodeClient(e){return new SilentAuthCodeClient(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ApiId.acquireTokenByCode,this.performanceClient,this.nativeExtensionProvider,e)}addEventCallback(e,a){return this.eventHandler.addEventCallback(e,a)}removeEventCallback(e){this.eventHandler.removeEventCallback(e)}addPerformanceCallback(e){return blockNonBrowserEnvironment(),this.performanceClient.addPerformanceCallback(e)}removePerformanceCallback(e){return this.performanceClient.removePerformanceCallback(e)}enableAccountStorageEvents(){typeof window>"u"||(this.listeningToStorageEvents?this.logger.verbose("Account storage listener already registered."):(this.logger.verbose("Adding account storage listener."),this.listeningToStorageEvents=!0,window.addEventListener("storage",this.handleAccountCacheChange)))}disableAccountStorageEvents(){typeof window>"u"||(this.listeningToStorageEvents?(this.logger.verbose("Removing account storage listener."),window.removeEventListener("storage",this.handleAccountCacheChange),this.listeningToStorageEvents=!1):this.logger.verbose("No account storage listener registered."))}handleAccountCacheChange(e){var a;try{(a=e.key)!=null&&a.includes(PersistentCacheKeys.ACTIVE_ACCOUNT_FILTERS)&&this.eventHandler.emitEvent(EventType.ACTIVE_ACCOUNT_CHANGED);const c=e.newValue||e.oldValue;if(!c)return;const j=JSON.parse(c);if(typeof j!="object"||!AccountEntity.isAccountEntity(j))return;const et=CacheManager.toObject(new AccountEntity,j).getAccountInfo();!e.oldValue&&e.newValue?(this.logger.info("Account was added to cache in a different window"),this.eventHandler.emitEvent(EventType.ACCOUNT_ADDED,void 0,et)):!e.newValue&&e.oldValue&&(this.logger.info("Account was removed from cache in a different window"),this.eventHandler.emitEvent(EventType.ACCOUNT_REMOVED,void 0,et))}catch{return}}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(e){this.logger=e}initializeWrapperLibrary(e,a){this.browserStorage.setWrapperMetadata(e,a)}setNavigationClient(e){this.navigationClient=e}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(e){return e!=null&&e.correlationId?e.correlationId:this.isBrowserEnvironment?createNewGuid():Constants$1.EMPTY_STRING}async loginRedirect(e){const a=this.getRequestCorrelationId(e);return this.logger.verbose("loginRedirect called",a),this.acquireTokenRedirect({correlationId:a,...e||DEFAULT_REQUEST})}loginPopup(e){const a=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",a),this.acquireTokenPopup({correlationId:a,...e||DEFAULT_REQUEST})}async acquireTokenSilent(e){const a=this.getRequestCorrelationId(e),c=this.performanceClient.startMeasurement(PerformanceEvents.AcquireTokenSilent,a);c.add({cacheLookupPolicy:e.cacheLookupPolicy,scenarioId:e.scenarioId}),preflightCheck(this.initialized,c),this.logger.verbose("acquireTokenSilent called",a);const j=e.account||this.getActiveAccount();if(!j)throw createBrowserAuthError(noAccountError);c.add({accountType:getAccountType(j)});const d={clientId:this.config.auth.clientId,authority:e.authority||Constants$1.EMPTY_STRING,scopes:e.scopes,homeAccountIdentifier:j.homeAccountId,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,shrOptions:e.shrOptions},et=JSON.stringify(d),at=this.activeSilentTokenRequests.get(et);if(typeof at>"u"){this.logger.verbose("acquireTokenSilent called for the first time, storing active request",a);const st=invokeAsync(this.acquireTokenSilentAsync.bind(this),PerformanceEvents.AcquireTokenSilentAsync,this.logger,this.performanceClient,a)({...e,correlationId:a},j).then(ct=>(this.activeSilentTokenRequests.delete(et),c.end({success:!0,fromCache:ct.fromCache,isNativeBroker:ct.fromNativeBroker,cacheLookupPolicy:e.cacheLookupPolicy,requestId:ct.requestId,accessTokenSize:ct.accessToken.length,idTokenSize:ct.idToken.length}),ct)).catch(ct=>{throw this.activeSilentTokenRequests.delete(et),c.end({success:!1},ct),ct});return this.activeSilentTokenRequests.set(et,st),{...await st,state:e.state}}else return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",a),c.discard(),{...await at,state:e.state}}async acquireTokenSilentAsync(e,a){const c=()=>this.trackPageVisibility(e.correlationId);this.performanceClient.addQueueMeasurement(PerformanceEvents.AcquireTokenSilentAsync,e.correlationId),this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_START,InteractionType.Silent,e),e.correlationId&&this.performanceClient.incrementFields({visibilityChangeCount:0},e.correlationId),document.addEventListener("visibilitychange",c);const j=await invokeAsync(initializeSilentRequest,PerformanceEvents.InitializeSilentRequest,this.logger,this.performanceClient,e.correlationId)(e,a,this.config,this.performanceClient,this.logger),d=e.cacheLookupPolicy||CacheLookupPolicy.Default;return this.acquireTokenSilentNoIframe(j,d).catch(async at=>{if(checkIfRefreshTokenErrorCanBeResolvedSilently(at,d))if(this.activeIframeRequest)if(d!==CacheLookupPolicy.Skip){const[ct,ot]=this.activeIframeRequest;this.logger.verbose(`Iframe request is already in progress, awaiting resolution for request with correlationId: ${ot}`,j.correlationId);const gt=this.performanceClient.startMeasurement(PerformanceEvents.AwaitConcurrentIframe,j.correlationId);gt.add({awaitIframeCorrelationId:ot});const ft=await ct;if(gt.end({success:ft}),ft)return this.logger.verbose(`Parallel iframe request with correlationId: ${ot} succeeded. Retrying cache and/or RT redemption`,j.correlationId),this.acquireTokenSilentNoIframe(j,d);throw this.logger.info(`Iframe request with correlationId: ${ot} failed. Interaction is required.`),at}else return this.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",j.correlationId),invokeAsync(this.acquireTokenBySilentIframe.bind(this),PerformanceEvents.AcquireTokenBySilentIframe,this.logger,this.performanceClient,j.correlationId)(j);else{let ct;return this.activeIframeRequest=[new Promise(ot=>{ct=ot}),j.correlationId],this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",j.correlationId),invokeAsync(this.acquireTokenBySilentIframe.bind(this),PerformanceEvents.AcquireTokenBySilentIframe,this.logger,this.performanceClient,j.correlationId)(j).then(ot=>(ct(!0),ot)).catch(ot=>{throw ct(!1),ot}).finally(()=>{this.activeIframeRequest=void 0})}else throw at}).then(at=>(this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_SUCCESS,InteractionType.Silent,at),e.correlationId&&this.performanceClient.addFields({fromCache:at.fromCache,isNativeBroker:at.fromNativeBroker,requestId:at.requestId},e.correlationId),at)).catch(at=>{throw this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_FAILURE,InteractionType.Silent,null,at),at}).finally(()=>{document.removeEventListener("visibilitychange",c)})}async acquireTokenSilentNoIframe(e,a){return NativeMessageHandler.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme)&&e.account.nativeAccountId?(this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),this.acquireTokenNative(e,ApiId.acquireTokenSilent_silentFlow).catch(async c=>{throw c instanceof NativeAuthError&&isFatalNativeAuthError(c)?(this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.nativeExtensionProvider=void 0,createClientAuthError(tokenRefreshRequired)):c})):(this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),invokeAsync(this.acquireTokenFromCache.bind(this),PerformanceEvents.AcquireTokenFromCache,this.logger,this.performanceClient,e.correlationId)(e,a).catch(c=>{if(a===CacheLookupPolicy.AccessToken)throw c;return this.eventHandler.emitEvent(EventType.ACQUIRE_TOKEN_NETWORK_START,InteractionType.Silent,e),invokeAsync(this.acquireTokenByRefreshToken.bind(this),PerformanceEvents.AcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,a)}))}}function checkIfRefreshTokenErrorCanBeResolvedSilently(o,e){const a=!(o instanceof InteractionRequiredAuthError&&o.subError!==badToken),c=o.errorCode===BrowserConstants.INVALID_GRANT_ERROR||o.errorCode===tokenRefreshRequired,j=a&&c||o.errorCode===noTokensFound||o.errorCode===refreshTokenExpired,d=iFrameRenewalPolicies.includes(e);return j&&d}/*! @azure/msal-browser v3.26.1 2024-10-08 */async function createV3Controller(o,e){const a=new StandardOperatingContext(o);return await a.initialize(),StandardController.createController(a,e)}/*! @azure/msal-browser v3.26.1 2024-10-08 */class PublicClientApplication{static async createPublicClientApplication(e){const a=await createV3Controller(e);return new PublicClientApplication(e,a)}constructor(e,a){this.controller=a||new StandardController(new StandardOperatingContext(e))}async initialize(e){return this.controller.initialize(e)}async acquireTokenPopup(e){return this.controller.acquireTokenPopup(e)}acquireTokenRedirect(e){return this.controller.acquireTokenRedirect(e)}acquireTokenSilent(e){return this.controller.acquireTokenSilent(e)}acquireTokenByCode(e){return this.controller.acquireTokenByCode(e)}addEventCallback(e,a){return this.controller.addEventCallback(e,a)}removeEventCallback(e){return this.controller.removeEventCallback(e)}addPerformanceCallback(e){return this.controller.addPerformanceCallback(e)}removePerformanceCallback(e){return this.controller.removePerformanceCallback(e)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(e){return this.controller.getAccount(e)}getAccountByHomeId(e){return this.controller.getAccountByHomeId(e)}getAccountByLocalId(e){return this.controller.getAccountByLocalId(e)}getAccountByUsername(e){return this.controller.getAccountByUsername(e)}getAllAccounts(e){return this.controller.getAllAccounts(e)}handleRedirectPromise(e){return this.controller.handleRedirectPromise(e)}loginPopup(e){return this.controller.loginPopup(e)}loginRedirect(e){return this.controller.loginRedirect(e)}logout(e){return this.controller.logout(e)}logoutRedirect(e){return this.controller.logoutRedirect(e)}logoutPopup(e){return this.controller.logoutPopup(e)}ssoSilent(e){return this.controller.ssoSilent(e)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(e){this.controller.setLogger(e)}setActiveAccount(e){this.controller.setActiveAccount(e)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(e,a){return this.controller.initializeWrapperLibrary(e,a)}setNavigationClient(e){this.controller.setNavigationClient(e)}getConfiguration(){return this.controller.getConfiguration()}async hydrateCache(e,a){return this.controller.hydrateCache(e,a)}clearCache(e){return this.controller.clearCache(e)}}/*! @azure/msal-browser v3.26.1 2024-10-08 */const stubbedPublicClientApplication={initialize:()=>Promise.reject(createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)),acquireTokenPopup:()=>Promise.reject(createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)),acquireTokenRedirect:()=>Promise.reject(createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)),acquireTokenSilent:()=>Promise.reject(createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)),acquireTokenByCode:()=>Promise.reject(createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)),getAllAccounts:()=>[],getAccount:()=>null,getAccountByHomeId:()=>null,getAccountByUsername:()=>null,getAccountByLocalId:()=>null,handleRedirectPromise:()=>Promise.reject(createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)),loginPopup:()=>Promise.reject(createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)),loginRedirect:()=>Promise.reject(createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)),logout:()=>Promise.reject(createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)),logoutRedirect:()=>Promise.reject(createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)),logoutPopup:()=>Promise.reject(createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)),ssoSilent:()=>Promise.reject(createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)),addEventCallback:()=>null,removeEventCallback:()=>{},addPerformanceCallback:()=>"",removePerformanceCallback:()=>!1,enableAccountStorageEvents:()=>{},disableAccountStorageEvents:()=>{},getTokenCache:()=>{throw createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)},getLogger:()=>{throw createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)},setLogger:()=>{},setActiveAccount:()=>{},getActiveAccount:()=>null,initializeWrapperLibrary:()=>{},setNavigationClient:()=>{},getConfiguration:()=>{throw createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)},hydrateCache:()=>Promise.reject(createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled)),clearCache:()=>Promise.reject(createBrowserConfigurationAuthError(stubbedPublicClientApplicationCalled))};/*! @azure/msal-browser v3.26.1 2024-10-08 */class EventMessageUtils{static getInteractionStatusFromEvent(e,a){switch(e.eventType){case EventType.LOGIN_START:return InteractionStatus.Login;case EventType.SSO_SILENT_START:return InteractionStatus.SsoSilent;case EventType.ACQUIRE_TOKEN_START:if(e.interactionType===InteractionType.Redirect||e.interactionType===InteractionType.Popup)return InteractionStatus.AcquireToken;break;case EventType.HANDLE_REDIRECT_START:return InteractionStatus.HandleRedirect;case EventType.LOGOUT_START:return InteractionStatus.Logout;case EventType.SSO_SILENT_SUCCESS:case EventType.SSO_SILENT_FAILURE:if(a&&a!==InteractionStatus.SsoSilent)break;return InteractionStatus.None;case EventType.LOGOUT_END:if(a&&a!==InteractionStatus.Logout)break;return InteractionStatus.None;case EventType.HANDLE_REDIRECT_END:if(a&&a!==InteractionStatus.HandleRedirect)break;return InteractionStatus.None;case EventType.LOGIN_SUCCESS:case EventType.LOGIN_FAILURE:case EventType.ACQUIRE_TOKEN_SUCCESS:case EventType.ACQUIRE_TOKEN_FAILURE:case EventType.RESTORE_FROM_BFCACHE:if(e.interactionType===InteractionType.Redirect||e.interactionType===InteractionType.Popup){if(a&&a!==InteractionStatus.Login&&a!==InteractionStatus.AcquireToken)break;return InteractionStatus.None}break}return null}}/*! @azure/msal-react v2.1.1 2024-10-03 */const defaultMsalContext={instance:stubbedPublicClientApplication,inProgress:InteractionStatus.None,accounts:[],logger:new Logger({})},MsalContext=reactExports.createContext(defaultMsalContext);MsalContext.Consumer;/*! @azure/msal-react v2.1.1 2024-10-03 */function getChildrenOrFunction(o,e){return typeof o=="function"?o(e):o}function accountArraysAreEqual(o,e){if(o.length!==e.length)return!1;const a=[...e];return o.every(c=>{const j=a.shift();return!c||!j?!1:c.homeAccountId===j.homeAccountId&&c.localAccountId===j.localAccountId&&c.username===j.username})}function getAccountByIdentifiers(o,e){return o.length>0&&(e.homeAccountId||e.localAccountId||e.username)&&o.filter(c=>!(e.username&&e.username.toLowerCase()!==c.username.toLowerCase()||e.homeAccountId&&e.homeAccountId.toLowerCase()!==c.homeAccountId.toLowerCase()||e.localAccountId&&e.localAccountId.toLowerCase()!==c.localAccountId.toLowerCase()))[0]||null}/*! @azure/msal-react v2.1.1 2024-10-03 */const name$1="@azure/msal-react",version$1="2.1.1";/*! @azure/msal-react v2.1.1 2024-10-03 */const MsalProviderActionType={UNBLOCK_INPROGRESS:"UNBLOCK_INPROGRESS",EVENT:"EVENT"},reducer=(o,e)=>{const{type:a,payload:c}=e;let j=o.inProgress;switch(a){case MsalProviderActionType.UNBLOCK_INPROGRESS:o.inProgress===InteractionStatus.Startup&&(j=InteractionStatus.None,c.logger.info("MsalProvider - handleRedirectPromise resolved, setting inProgress to 'none'"));break;case MsalProviderActionType.EVENT:const et=c.message,at=EventMessageUtils.getInteractionStatusFromEvent(et,o.inProgress);at&&(c.logger.info(`MsalProvider - ${et.eventType} results in setting inProgress from ${o.inProgress} to ${at}`),j=at);break;default:throw new Error(`Unknown action type: ${a}`)}const d=c.instance.getAllAccounts();return j!==o.inProgress&&!accountArraysAreEqual(d,o.accounts)?{...o,inProgress:j,accounts:d}:j!==o.inProgress?{...o,inProgress:j}:accountArraysAreEqual(d,o.accounts)?o:{...o,accounts:d}};function MsalProvider({instance:o,children:e}){reactExports.useEffect(()=>{o.initializeWrapperLibrary(WrapperSKU.React,version$1)},[o]);const a=reactExports.useMemo(()=>o.getLogger().clone(name$1,version$1),[o]),[c,j]=reactExports.useReducer(reducer,void 0,()=>({inProgress:InteractionStatus.Startup,accounts:o.getAllAccounts()}));reactExports.useEffect(()=>{const et=o.addEventCallback(at=>{j({payload:{instance:o,logger:a,message:at},type:MsalProviderActionType.EVENT})});return a.verbose(`MsalProvider - Registered event callback with id: ${et}`),o.initialize().then(()=>{o.handleRedirectPromise().catch(()=>{}).finally(()=>{j({payload:{instance:o,logger:a},type:MsalProviderActionType.UNBLOCK_INPROGRESS})})}).catch(()=>{}),()=>{et&&(a.verbose(`MsalProvider - Removing event callback ${et}`),o.removeEventCallback(et))}},[o,a]);const d={instance:o,inProgress:c.inProgress,accounts:c.accounts,logger:a};return React$1.createElement(MsalContext.Provider,{value:d},e)}/*! @azure/msal-react v2.1.1 2024-10-03 */const useMsal=()=>reactExports.useContext(MsalContext);/*! @azure/msal-react v2.1.1 2024-10-03 */function isAuthenticated(o,e){return e&&(e.username||e.homeAccountId||e.localAccountId)?!!getAccountByIdentifiers(o,e):o.length>0}function useIsAuthenticated(o){const{accounts:e,inProgress:a}=useMsal();return reactExports.useMemo(()=>a===InteractionStatus.Startup?!1:isAuthenticated(e,o),[e,a,o])}/*! @azure/msal-react v2.1.1 2024-10-03 */function AuthenticatedTemplate({username:o,homeAccountId:e,localAccountId:a,children:c}){const j=useMsal(),d=reactExports.useMemo(()=>({username:o,homeAccountId:e,localAccountId:a}),[o,e,a]);return useIsAuthenticated(d)&&j.inProgress!==InteractionStatus.Startup?React$1.createElement(React$1.Fragment,null,getChildrenOrFunction(c,j)):null}/*! @azure/msal-react v2.1.1 2024-10-03 */function UnauthenticatedTemplate({username:o,homeAccountId:e,localAccountId:a,children:c}){const j=useMsal(),d=reactExports.useMemo(()=>({username:o,homeAccountId:e,localAccountId:a}),[o,e,a]);return!useIsAuthenticated(d)&&j.inProgress!==InteractionStatus.Startup&&j.inProgress!==InteractionStatus.HandleRedirect?React$1.createElement(React$1.Fragment,null,getChildrenOrFunction(c,j)):null}var classnames={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(o){(function(){var e={}.hasOwnProperty;function a(){for(var d="",et=0;et<arguments.length;et++){var at=arguments[et];at&&(d=j(d,c(at)))}return d}function c(d){if(typeof d=="string"||typeof d=="number")return d;if(typeof d!="object")return"";if(Array.isArray(d))return a.apply(null,d);if(d.toString!==Object.prototype.toString&&!d.toString.toString().includes("[native code]"))return d.toString();var et="";for(var at in d)e.call(d,at)&&d[at]&&(et=j(et,at));return et}function j(d,et){return et?d?d+" "+et:d+et:d}o.exports?(a.default=a,o.exports=a):window.classNames=a})()})(classnames);var classnamesExports=classnames.exports;const classNames=getDefaultExportFromCjs$1(classnamesExports);function _extends(){return _extends=Object.assign?Object.assign.bind():function(o){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var c in a)({}).hasOwnProperty.call(a,c)&&(o[c]=a[c])}return o},_extends.apply(null,arguments)}function _objectWithoutPropertiesLoose$4(o,e){if(o==null)return{};var a={};for(var c in o)if({}.hasOwnProperty.call(o,c)){if(e.includes(c))continue;a[c]=o[c]}return a}function defaultKey(o){return"default"+o.charAt(0).toUpperCase()+o.substr(1)}function _toPropertyKey(o){var e=_toPrimitive(o,"string");return typeof e=="symbol"?e:String(e)}function _toPrimitive(o,e){if(typeof o!="object"||o===null)return o;var a=o[Symbol.toPrimitive];if(a!==void 0){var c=a.call(o,e);if(typeof c!="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(o)}function useUncontrolledProp(o,e,a){var c=reactExports.useRef(o!==void 0),j=reactExports.useState(e),d=j[0],et=j[1],at=o!==void 0,st=c.current;return c.current=at,!at&&st&&d!==e&&et(e),[at?o:d,reactExports.useCallback(function(ct){for(var ot=arguments.length,gt=new Array(ot>1?ot-1:0),ft=1;ft<ot;ft++)gt[ft-1]=arguments[ft];a&&a.apply(void 0,[ct].concat(gt)),et(ct)},[a])]}function useUncontrolled(o,e){return Object.keys(e).reduce(function(a,c){var j,d=a,et=d[defaultKey(c)],at=d[c],st=_objectWithoutPropertiesLoose$4(d,[defaultKey(c),c].map(_toPropertyKey)),ct=e[c],ot=useUncontrolledProp(at,et,o[ct]),gt=ot[0],ft=ot[1];return _extends({},st,(j={},j[c]=gt,j[ct]=ft,j))},o)}function _setPrototypeOf(o,e){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,c){return a.__proto__=c,a},_setPrototypeOf(o,e)}function _inheritsLoose(o,e){o.prototype=Object.create(e.prototype),o.prototype.constructor=o,_setPrototypeOf(o,e)}const DEFAULT_BREAKPOINTS=["xxl","xl","lg","md","sm","xs"],DEFAULT_MIN_BREAKPOINT="xs",ThemeContext=reactExports.createContext({prefixes:{},breakpoints:DEFAULT_BREAKPOINTS,minBreakpoint:DEFAULT_MIN_BREAKPOINT});function useBootstrapPrefix(o,e){const{prefixes:a}=reactExports.useContext(ThemeContext);return o||a[e]||e}function ownerDocument(o){return o&&o.ownerDocument||document}function ownerWindow(o){var e=ownerDocument(o);return e&&e.defaultView||window}function getComputedStyle$1(o,e){return ownerWindow(o).getComputedStyle(o,e)}var rUpper=/([A-Z])/g;function hyphenate(o){return o.replace(rUpper,"-$1").toLowerCase()}var msPattern=/^ms-/;function hyphenateStyleName(o){return hyphenate(o).replace(msPattern,"-ms-")}var supportedTransforms=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function isTransform(o){return!!(o&&supportedTransforms.test(o))}function style(o,e){var a="",c="";if(typeof e=="string")return o.style.getPropertyValue(hyphenateStyleName(e))||getComputedStyle$1(o).getPropertyValue(hyphenateStyleName(e));Object.keys(e).forEach(function(j){var d=e[j];!d&&d!==0?o.style.removeProperty(hyphenateStyleName(j)):isTransform(j)?c+=j+"("+d+") ":a+=hyphenateStyleName(j)+": "+d+";"}),c&&(a+="transform: "+c+";"),o.style.cssText+=";"+a}var propTypes$1={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function o(c,j,d,et,at,st){if(st!==ReactPropTypesSecret){var ct=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw ct.name="Invariant Violation",ct}}o.isRequired=o;function e(){return o}var a={array:o,bigint:o,bool:o,func:o,number:o,object:o,string:o,symbol:o,any:o,arrayOf:e,element:o,elementType:o,instanceOf:e,node:o,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return a.PropTypes=a,a};propTypes$1.exports=factoryWithThrowingShims();var propTypesExports=propTypes$1.exports;const PropTypes=getDefaultExportFromCjs$1(propTypesExports),config={disabled:!1},TransitionGroupContext=React$1.createContext(null);var forceReflow=function(e){return e.scrollTop},UNMOUNTED="unmounted",EXITED="exited",ENTERING="entering",ENTERED="entered",EXITING="exiting",Transition=function(o){_inheritsLoose(e,o);function e(c,j){var d;d=o.call(this,c,j)||this;var et=j,at=et&&!et.isMounting?c.enter:c.appear,st;return d.appearStatus=null,c.in?at?(st=EXITED,d.appearStatus=ENTERING):st=ENTERED:c.unmountOnExit||c.mountOnEnter?st=UNMOUNTED:st=EXITED,d.state={status:st},d.nextCallback=null,d}e.getDerivedStateFromProps=function(j,d){var et=j.in;return et&&d.status===UNMOUNTED?{status:EXITED}:null};var a=e.prototype;return a.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},a.componentDidUpdate=function(j){var d=null;if(j!==this.props){var et=this.state.status;this.props.in?et!==ENTERING&&et!==ENTERED&&(d=ENTERING):(et===ENTERING||et===ENTERED)&&(d=EXITING)}this.updateStatus(!1,d)},a.componentWillUnmount=function(){this.cancelNextCallback()},a.getTimeouts=function(){var j=this.props.timeout,d,et,at;return d=et=at=j,j!=null&&typeof j!="number"&&(d=j.exit,et=j.enter,at=j.appear!==void 0?j.appear:et),{exit:d,enter:et,appear:at}},a.updateStatus=function(j,d){if(j===void 0&&(j=!1),d!==null)if(this.cancelNextCallback(),d===ENTERING){if(this.props.unmountOnExit||this.props.mountOnEnter){var et=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this);et&&forceReflow(et)}this.performEnter(j)}else this.performExit();else this.props.unmountOnExit&&this.state.status===EXITED&&this.setState({status:UNMOUNTED})},a.performEnter=function(j){var d=this,et=this.props.enter,at=this.context?this.context.isMounting:j,st=this.props.nodeRef?[at]:[ReactDOM.findDOMNode(this),at],ct=st[0],ot=st[1],gt=this.getTimeouts(),ft=at?gt.appear:gt.enter;if(!j&&!et||config.disabled){this.safeSetState({status:ENTERED},function(){d.props.onEntered(ct)});return}this.props.onEnter(ct,ot),this.safeSetState({status:ENTERING},function(){d.props.onEntering(ct,ot),d.onTransitionEnd(ft,function(){d.safeSetState({status:ENTERED},function(){d.props.onEntered(ct,ot)})})})},a.performExit=function(){var j=this,d=this.props.exit,et=this.getTimeouts(),at=this.props.nodeRef?void 0:ReactDOM.findDOMNode(this);if(!d||config.disabled){this.safeSetState({status:EXITED},function(){j.props.onExited(at)});return}this.props.onExit(at),this.safeSetState({status:EXITING},function(){j.props.onExiting(at),j.onTransitionEnd(et.exit,function(){j.safeSetState({status:EXITED},function(){j.props.onExited(at)})})})},a.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},a.safeSetState=function(j,d){d=this.setNextCallback(d),this.setState(j,d)},a.setNextCallback=function(j){var d=this,et=!0;return this.nextCallback=function(at){et&&(et=!1,d.nextCallback=null,j(at))},this.nextCallback.cancel=function(){et=!1},this.nextCallback},a.onTransitionEnd=function(j,d){this.setNextCallback(d);var et=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this),at=j==null&&!this.props.addEndListener;if(!et||at){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var st=this.props.nodeRef?[this.nextCallback]:[et,this.nextCallback],ct=st[0],ot=st[1];this.props.addEndListener(ct,ot)}j!=null&&setTimeout(this.nextCallback,j)},a.render=function(){var j=this.state.status;if(j===UNMOUNTED)return null;var d=this.props,et=d.children;d.in,d.mountOnEnter,d.unmountOnExit,d.appear,d.enter,d.exit,d.timeout,d.addEndListener,d.onEnter,d.onEntering,d.onEntered,d.onExit,d.onExiting,d.onExited,d.nodeRef;var at=_objectWithoutPropertiesLoose$4(d,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return React$1.createElement(TransitionGroupContext.Provider,{value:null},typeof et=="function"?et(j,at):React$1.cloneElement(React$1.Children.only(et),at))},e}(React$1.Component);Transition.contextType=TransitionGroupContext;Transition.propTypes={};function noop$2(){}Transition.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:noop$2,onEntering:noop$2,onEntered:noop$2,onExit:noop$2,onExiting:noop$2,onExited:noop$2};Transition.UNMOUNTED=UNMOUNTED;Transition.EXITED=EXITED;Transition.ENTERING=ENTERING;Transition.ENTERED=ENTERED;Transition.EXITING=EXITING;const canUseDOM$1=!!(typeof window<"u"&&window.document&&window.document.createElement);var optionsSupported=!1,onceSupported=!1;try{var options={get passive(){return optionsSupported=!0},get once(){return onceSupported=optionsSupported=!0}};canUseDOM$1&&(window.addEventListener("test",options,options),window.removeEventListener("test",options,!0))}catch{}function addEventListener(o,e,a,c){if(c&&typeof c!="boolean"&&!onceSupported){var j=c.once,d=c.capture,et=a;!onceSupported&&j&&(et=a.__once||function at(st){this.removeEventListener(e,at,d),a.call(this,st)},a.__once=et),o.addEventListener(e,et,optionsSupported?c:d)}o.addEventListener(e,a,c)}function removeEventListener(o,e,a,c){var j=c&&typeof c!="boolean"?c.capture:c;o.removeEventListener(e,a,j),a.__once&&o.removeEventListener(e,a.__once,j)}function listen(o,e,a,c){return addEventListener(o,e,a,c),function(){removeEventListener(o,e,a,c)}}function triggerEvent(o,e,a,c){if(c===void 0&&(c=!0),o){var j=document.createEvent("HTMLEvents");j.initEvent(e,a,c),o.dispatchEvent(j)}}function parseDuration$1(o){var e=style(o,"transitionDuration")||"",a=e.indexOf("ms")===-1?1e3:1;return parseFloat(e)*a}function emulateTransitionEnd(o,e,a){a===void 0&&(a=5);var c=!1,j=setTimeout(function(){c||triggerEvent(o,"transitionend",!0)},e+a),d=listen(o,"transitionend",function(){c=!0},{once:!0});return function(){clearTimeout(j),d()}}function transitionEnd(o,e,a,c){a==null&&(a=parseDuration$1(o)||0);var j=emulateTransitionEnd(o,a,c),d=listen(o,"transitionend",e);return function(){j(),d()}}function parseDuration(o,e){const a=style(o,e)||"",c=a.indexOf("ms")===-1?1e3:1;return parseFloat(a)*c}function transitionEndListener(o,e){const a=parseDuration(o,"transitionDuration"),c=parseDuration(o,"transitionDelay"),j=transitionEnd(o,d=>{d.target===o&&(j(),e(d))},a+c)}function createChainedFunction(...o){return o.filter(e=>e!=null).reduce((e,a)=>{if(typeof a!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return e===null?a:function(...j){e.apply(this,j),a.apply(this,j)}},null)}function triggerBrowserReflow(o){o.offsetHeight}const toFnRef=o=>!o||typeof o=="function"?o:e=>{o.current=e};function mergeRefs(o,e){const a=toFnRef(o),c=toFnRef(e);return j=>{a&&a(j),c&&c(j)}}function useMergedRefs(o,e){return reactExports.useMemo(()=>mergeRefs(o,e),[o,e])}function safeFindDOMNode(o){return o&&"setState"in o?ReactDOM.findDOMNode(o):o??null}const TransitionWrapper=React$1.forwardRef(({onEnter:o,onEntering:e,onEntered:a,onExit:c,onExiting:j,onExited:d,addEndListener:et,children:at,childRef:st,...ct},ot)=>{const gt=reactExports.useRef(null),ft=useMergedRefs(gt,st),yt=Et=>{ft(safeFindDOMNode(Et))},vt=Et=>Rt=>{Et&&gt.current&&Et(gt.current,Rt)},rt=reactExports.useCallback(vt(o),[o]),bt=reactExports.useCallback(vt(e),[e]),ht=reactExports.useCallback(vt(a),[a]),wt=reactExports.useCallback(vt(c),[c]),At=reactExports.useCallback(vt(j),[j]),Ct=reactExports.useCallback(vt(d),[d]),dt=reactExports.useCallback(vt(et),[et]);return jsxRuntimeExports.jsx(Transition,{ref:ot,...ct,onEnter:rt,onEntered:ht,onEntering:bt,onExit:wt,onExited:Ct,onExiting:At,addEndListener:dt,nodeRef:gt,children:typeof at=="function"?(Et,Rt)=>at(Et,{...Rt,ref:yt}):React$1.cloneElement(at,{ref:yt})})}),MARGINS={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function getDefaultDimensionValue(o,e){const a=`offset${o[0].toUpperCase()}${o.slice(1)}`,c=e[a],j=MARGINS[o];return c+parseInt(style(e,j[0]),10)+parseInt(style(e,j[1]),10)}const collapseStyles={[EXITED]:"collapse",[EXITING]:"collapsing",[ENTERING]:"collapsing",[ENTERED]:"collapse show"},Collapse=React$1.forwardRef(({onEnter:o,onEntering:e,onEntered:a,onExit:c,onExiting:j,className:d,children:et,dimension:at="height",in:st=!1,timeout:ct=300,mountOnEnter:ot=!1,unmountOnExit:gt=!1,appear:ft=!1,getDimensionValue:yt=getDefaultDimensionValue,...vt},rt)=>{const bt=typeof at=="function"?at():at,ht=reactExports.useMemo(()=>createChainedFunction(Et=>{Et.style[bt]="0"},o),[bt,o]),wt=reactExports.useMemo(()=>createChainedFunction(Et=>{const Rt=`scroll${bt[0].toUpperCase()}${bt.slice(1)}`;Et.style[bt]=`${Et[Rt]}px`},e),[bt,e]),At=reactExports.useMemo(()=>createChainedFunction(Et=>{Et.style[bt]=null},a),[bt,a]),Ct=reactExports.useMemo(()=>createChainedFunction(Et=>{Et.style[bt]=`${yt(bt,Et)}px`,triggerBrowserReflow(Et)},c),[c,yt,bt]),dt=reactExports.useMemo(()=>createChainedFunction(Et=>{Et.style[bt]=null},j),[bt,j]);return jsxRuntimeExports.jsx(TransitionWrapper,{ref:rt,addEndListener:transitionEndListener,...vt,"aria-expanded":vt.role?st:null,onEnter:ht,onEntering:wt,onEntered:At,onExit:Ct,onExiting:dt,childRef:et.ref,in:st,timeout:ct,mountOnEnter:ot,unmountOnExit:gt,appear:ft,children:(Et,Rt)=>React$1.cloneElement(et,{...Rt,className:classNames(d,et.props.className,collapseStyles[Et],bt==="width"&&"collapse-horizontal")})})});function useCommittedRef(o){const e=reactExports.useRef(o);return reactExports.useEffect(()=>{e.current=o},[o]),e}function useEventCallback(o){const e=useCommittedRef(o);return reactExports.useCallback(function(...a){return e.current&&e.current(...a)},[e])}const divWithClassName=o=>reactExports.forwardRef((e,a)=>jsxRuntimeExports.jsx("div",{...e,ref:a,className:classNames(e.className,o)}));function useMounted(){const o=reactExports.useRef(!0),e=reactExports.useRef(()=>o.current);return reactExports.useEffect(()=>(o.current=!0,()=>{o.current=!1}),[]),e.current}function usePrevious(o){const e=reactExports.useRef(null);return reactExports.useEffect(()=>{e.current=o}),e.current}const global$1=globalThis||void 0||self,isReactNative$1=typeof global$1<"u"&&global$1.navigator&&global$1.navigator.product==="ReactNative",isDOM=typeof document<"u",useIsomorphicEffect=isDOM||isReactNative$1?reactExports.useLayoutEffect:reactExports.useEffect,_excluded$3=["as","disabled"];function _objectWithoutPropertiesLoose$3(o,e){if(o==null)return{};var a={};for(var c in o)if({}.hasOwnProperty.call(o,c)){if(e.indexOf(c)>=0)continue;a[c]=o[c]}return a}function isTrivialHref(o){return!o||o.trim()==="#"}function useButtonProps({tagName:o,disabled:e,href:a,target:c,rel:j,role:d,onClick:et,tabIndex:at=0,type:st}){o||(a!=null||c!=null||j!=null?o="a":o="button");const ct={tagName:o};if(o==="button")return[{type:st||"button",disabled:e},ct];const ot=ft=>{if((e||o==="a"&&isTrivialHref(a))&&ft.preventDefault(),e){ft.stopPropagation();return}et==null||et(ft)},gt=ft=>{ft.key===" "&&(ft.preventDefault(),ot(ft))};return o==="a"&&(a||(a="#"),e&&(a=void 0)),[{role:d??"button",disabled:void 0,tabIndex:e?void 0:at,href:a,target:o==="a"?c:void 0,"aria-disabled":e||void 0,rel:o==="a"?j:void 0,onClick:ot,onKeyDown:gt},ct]}const Button$1=reactExports.forwardRef((o,e)=>{let{as:a,disabled:c}=o,j=_objectWithoutPropertiesLoose$3(o,_excluded$3);const[d,{tagName:et}]=useButtonProps(Object.assign({tagName:a,disabled:c},j));return jsxRuntimeExports.jsx(et,Object.assign({},j,d,{ref:e}))});Button$1.displayName="Button";function isEscKey(o){return o.code==="Escape"||o.keyCode===27}function getReactVersion(){const o=reactExports.version.split(".");return{major:+o[0],minor:+o[1],patch:+o[2]}}const fadeStyles={[ENTERING]:"show",[ENTERED]:"show"},Fade=reactExports.forwardRef(({className:o,children:e,transitionClasses:a={},onEnter:c,...j},d)=>{const et={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...j},at=reactExports.useCallback((ot,gt)=>{triggerBrowserReflow(ot),c==null||c(ot,gt)},[c]),{major:st}=getReactVersion(),ct=st>=19?e.props.ref:e.ref;return jsxRuntimeExports.jsx(TransitionWrapper,{ref:d,addEndListener:transitionEndListener,...et,onEnter:at,childRef:ct,children:(ot,gt)=>reactExports.cloneElement(e,{...gt,className:classNames("fade",o,e.props.className,fadeStyles[ot],a[ot])})})});Fade.displayName="Fade";const propTypes={"aria-label":PropTypes.string,onClick:PropTypes.func,variant:PropTypes.oneOf(["white"])},CloseButton=reactExports.forwardRef(({className:o,variant:e,"aria-label":a="Close",...c},j)=>jsxRuntimeExports.jsx("button",{ref:j,type:"button",className:classNames("btn-close",e&&`btn-close-${e}`,o),"aria-label":a,...c}));CloseButton.displayName="CloseButton";CloseButton.propTypes=propTypes;const Button=reactExports.forwardRef(({as:o,bsPrefix:e,variant:a="primary",size:c,active:j=!1,disabled:d=!1,className:et,...at},st)=>{const ct=useBootstrapPrefix(e,"btn"),[ot,{tagName:gt}]=useButtonProps({tagName:o,disabled:d,...at}),ft=gt;return jsxRuntimeExports.jsx(ft,{...ot,...at,ref:st,disabled:d,className:classNames(et,ct,j&&"active",a&&`${ct}-${a}`,c&&`${ct}-${c}`,at.href&&d&&"disabled")})});Button.displayName="Button";function useUpdatedRef(o){const e=reactExports.useRef(o);return e.current=o,e}function useWillUnmount(o){const e=useUpdatedRef(o);reactExports.useEffect(()=>()=>e.current(),[])}var toArray=Function.prototype.bind.call(Function.prototype.call,[].slice);function qsa(o,e){return toArray(o.querySelectorAll(e))}function contains(o,e){if(o.contains)return o.contains(e);if(o.compareDocumentPosition)return o===e||!!(o.compareDocumentPosition(e)&16)}const SelectableContext=reactExports.createContext(null),ATTRIBUTE_PREFIX="data-rr-ui-";function dataAttr(o){return`${ATTRIBUTE_PREFIX}${o}`}const Context=reactExports.createContext(canUseDOM$1?window:void 0);Context.Provider;function useWindow(){return reactExports.useContext(Context)}const context=reactExports.createContext(null);context.displayName="NavbarContext";function activeElement(o){o===void 0&&(o=ownerDocument());try{var e=o.activeElement;return!e||!e.nodeName?null:e}catch{return o.body}}function getBodyScrollbarWidth(o=document){const e=o.defaultView;return Math.abs(e.innerWidth-o.documentElement.clientWidth)}const OPEN_DATA_ATTRIBUTE=dataAttr("modal-open");class ModalManager{constructor({ownerDocument:e,handleContainerOverflow:a=!0,isRTL:c=!1}={}){this.handleContainerOverflow=a,this.isRTL=c,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return getBodyScrollbarWidth(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const a={overflow:"hidden"},c=this.isRTL?"paddingLeft":"paddingRight",j=this.getElement();e.style={overflow:j.style.overflow,[c]:j.style[c]},e.scrollBarWidth&&(a[c]=`${parseInt(style(j,c)||"0",10)+e.scrollBarWidth}px`),j.setAttribute(OPEN_DATA_ATTRIBUTE,""),style(j,a)}reset(){[...this.modals].forEach(e=>this.remove(e))}removeContainerStyle(e){const a=this.getElement();a.removeAttribute(OPEN_DATA_ATTRIBUTE),Object.assign(a.style,e.style)}add(e){let a=this.modals.indexOf(e);return a!==-1||(a=this.modals.length,this.modals.push(e),this.setModalAttributes(e),a!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),a}remove(e){const a=this.modals.indexOf(e);a!==-1&&(this.modals.splice(a,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}const resolveContainerRef=(o,e)=>canUseDOM$1?o==null?(e||ownerDocument()).body:(typeof o=="function"&&(o=o()),o&&"current"in o&&(o=o.current),o&&("nodeType"in o||o.getBoundingClientRect)?o:null):null;function useWaitForDOMRef(o,e){const a=useWindow(),[c,j]=reactExports.useState(()=>resolveContainerRef(o,a==null?void 0:a.document));if(!c){const d=resolveContainerRef(o);d&&j(d)}return reactExports.useEffect(()=>{},[e,c]),reactExports.useEffect(()=>{const d=resolveContainerRef(o);d!==c&&j(d)},[o,c]),c}function NoopTransition({children:o,in:e,onExited:a,mountOnEnter:c,unmountOnExit:j}){const d=reactExports.useRef(null),et=reactExports.useRef(e),at=useEventCallback(a);reactExports.useEffect(()=>{e?et.current=!0:at(d.current)},[e,at]);const st=useMergedRefs(d,o.ref),ct=reactExports.cloneElement(o,{ref:st});return e?ct:j||!et.current&&c?null:ct}const _excluded$2=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function _objectWithoutPropertiesLoose$2(o,e){if(o==null)return{};var a={};for(var c in o)if({}.hasOwnProperty.call(o,c)){if(e.indexOf(c)>=0)continue;a[c]=o[c]}return a}function useRTGTransitionProps(o){let{onEnter:e,onEntering:a,onEntered:c,onExit:j,onExiting:d,onExited:et,addEndListener:at,children:st}=o,ct=_objectWithoutPropertiesLoose$2(o,_excluded$2);const{major:ot}=getReactVersion(),gt=ot>=19?st.props.ref:st.ref,ft=reactExports.useRef(null),yt=useMergedRefs(ft,typeof st=="function"?null:gt),vt=Et=>Rt=>{Et&&ft.current&&Et(ft.current,Rt)},rt=reactExports.useCallback(vt(e),[e]),bt=reactExports.useCallback(vt(a),[a]),ht=reactExports.useCallback(vt(c),[c]),wt=reactExports.useCallback(vt(j),[j]),At=reactExports.useCallback(vt(d),[d]),Ct=reactExports.useCallback(vt(et),[et]),dt=reactExports.useCallback(vt(at),[at]);return Object.assign({},ct,{nodeRef:ft},e&&{onEnter:rt},a&&{onEntering:bt},c&&{onEntered:ht},j&&{onExit:wt},d&&{onExiting:At},et&&{onExited:Ct},at&&{addEndListener:dt},{children:typeof st=="function"?(Et,Rt)=>st(Et,Object.assign({},Rt,{ref:yt})):reactExports.cloneElement(st,{ref:yt})})}const _excluded$1=["component"];function _objectWithoutPropertiesLoose$1(o,e){if(o==null)return{};var a={};for(var c in o)if({}.hasOwnProperty.call(o,c)){if(e.indexOf(c)>=0)continue;a[c]=o[c]}return a}const RTGTransition=reactExports.forwardRef((o,e)=>{let{component:a}=o,c=_objectWithoutPropertiesLoose$1(o,_excluded$1);const j=useRTGTransitionProps(c);return jsxRuntimeExports.jsx(a,Object.assign({ref:e},j))});function useTransition({in:o,onTransition:e}){const a=reactExports.useRef(null),c=reactExports.useRef(!0),j=useEventCallback(e);return useIsomorphicEffect(()=>{if(!a.current)return;let d=!1;return j({in:o,element:a.current,initial:c.current,isStale:()=>d}),()=>{d=!0}},[o,j]),useIsomorphicEffect(()=>(c.current=!1,()=>{c.current=!0}),[]),a}function ImperativeTransition({children:o,in:e,onExited:a,onEntered:c,transition:j}){const[d,et]=reactExports.useState(!e);e&&d&&et(!1);const at=useTransition({in:!!e,onTransition:ct=>{const ot=()=>{ct.isStale()||(ct.in?c==null||c(ct.element,ct.initial):(et(!0),a==null||a(ct.element)))};Promise.resolve(j(ct)).then(ot,gt=>{throw ct.in||et(!0),gt})}}),st=useMergedRefs(at,o.ref);return d&&!e?null:reactExports.cloneElement(o,{ref:st})}function renderTransition(o,e,a){return o?jsxRuntimeExports.jsx(RTGTransition,Object.assign({},a,{component:o})):e?jsxRuntimeExports.jsx(ImperativeTransition,Object.assign({},a,{transition:e})):jsxRuntimeExports.jsx(NoopTransition,Object.assign({},a))}const _excluded=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function _objectWithoutPropertiesLoose(o,e){if(o==null)return{};var a={};for(var c in o)if({}.hasOwnProperty.call(o,c)){if(e.indexOf(c)>=0)continue;a[c]=o[c]}return a}let manager;function getManager(o){return manager||(manager=new ModalManager({ownerDocument:o==null?void 0:o.document})),manager}function useModalManager(o){const e=useWindow(),a=o||getManager(e),c=reactExports.useRef({dialog:null,backdrop:null});return Object.assign(c.current,{add:()=>a.add(c.current),remove:()=>a.remove(c.current),isTopModal:()=>a.isTopModal(c.current),setDialogRef:reactExports.useCallback(j=>{c.current.dialog=j},[]),setBackdropRef:reactExports.useCallback(j=>{c.current.backdrop=j},[])})}const Modal=reactExports.forwardRef((o,e)=>{let{show:a=!1,role:c="dialog",className:j,style:d,children:et,backdrop:at=!0,keyboard:st=!0,onBackdropClick:ct,onEscapeKeyDown:ot,transition:gt,runTransition:ft,backdropTransition:yt,runBackdropTransition:vt,autoFocus:rt=!0,enforceFocus:bt=!0,restoreFocus:ht=!0,restoreFocusOptions:wt,renderDialog:At,renderBackdrop:Ct=hr=>jsxRuntimeExports.jsx("div",Object.assign({},hr)),manager:dt,container:Et,onShow:Rt,onHide:Mt=()=>{},onExit:_t,onExited:kt,onExiting:nt,onEnter:s,onEntering:b,onEntered:$}=o,_e=_objectWithoutPropertiesLoose(o,_excluded);const it=useWindow(),pt=useWaitForDOMRef(Et),mt=useModalManager(dt),lt=useMounted(),_=usePrevious(a),[tt,Tt]=reactExports.useState(!a),It=reactExports.useRef(null);reactExports.useImperativeHandle(e,()=>mt,[mt]),canUseDOM$1&&!_&&a&&(It.current=activeElement(it==null?void 0:it.document)),a&&tt&&Tt(!1);const Nt=useEventCallback(()=>{if(mt.add(),jt.current=listen(document,"keydown",qt),Kt.current=listen(document,"focus",()=>setTimeout(Gt),!0),Rt&&Rt(),rt){var hr,Ar;const gn=activeElement((hr=(Ar=mt.dialog)==null?void 0:Ar.ownerDocument)!=null?hr:it==null?void 0:it.document);mt.dialog&&gn&&!contains(mt.dialog,gn)&&(It.current=gn,mt.dialog.focus())}}),Ut=useEventCallback(()=>{if(mt.remove(),jt.current==null||jt.current(),Kt.current==null||Kt.current(),ht){var hr;(hr=It.current)==null||hr.focus==null||hr.focus(wt),It.current=null}});reactExports.useEffect(()=>{!a||!pt||Nt()},[a,pt,Nt]),reactExports.useEffect(()=>{tt&&Ut()},[tt,Ut]),useWillUnmount(()=>{Ut()});const Gt=useEventCallback(()=>{if(!bt||!lt()||!mt.isTopModal())return;const hr=activeElement(it==null?void 0:it.document);mt.dialog&&hr&&!contains(mt.dialog,hr)&&mt.dialog.focus()}),Pt=useEventCallback(hr=>{hr.target===hr.currentTarget&&(ct==null||ct(hr),at===!0&&Mt())}),qt=useEventCallback(hr=>{st&&isEscKey(hr)&&mt.isTopModal()&&(ot==null||ot(hr),hr.defaultPrevented||Mt())}),Kt=reactExports.useRef(),jt=reactExports.useRef(),Ht=(...hr)=>{Tt(!0),kt==null||kt(...hr)};if(!pt)return null;const Bt=Object.assign({role:c,ref:mt.setDialogRef,"aria-modal":c==="dialog"?!0:void 0},_e,{style:d,className:j,tabIndex:-1});let Jt=At?At(Bt):jsxRuntimeExports.jsx("div",Object.assign({},Bt,{children:reactExports.cloneElement(et,{role:"document"})}));Jt=renderTransition(gt,ft,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!a,onExit:_t,onExiting:nt,onExited:Ht,onEnter:s,onEntering:b,onEntered:$,children:Jt});let sr=null;return at&&(sr=Ct({ref:mt.setBackdropRef,onClick:Pt}),sr=renderTransition(yt,vt,{in:!!a,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:sr})),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:ReactDOM.createPortal(jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[sr,Jt]}),pt)})});Modal.displayName="Modal";const BaseModal=Object.assign(Modal,{Manager:ModalManager});function hasClass(o,e){return o.classList?o.classList.contains(e):(" "+(o.className.baseVal||o.className)+" ").indexOf(" "+e+" ")!==-1}function addClass(o,e){o.classList?o.classList.add(e):hasClass(o,e)||(typeof o.className=="string"?o.className=o.className+" "+e:o.setAttribute("class",(o.className&&o.className.baseVal||"")+" "+e))}function replaceClassName(o,e){return o.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function removeClass(o,e){o.classList?o.classList.remove(e):typeof o.className=="string"?o.className=replaceClassName(o.className,e):o.setAttribute("class",replaceClassName(o.className&&o.className.baseVal||"",e))}const Selector={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class BootstrapModalManager extends ModalManager{adjustAndStore(e,a,c){const j=a.style[e];a.dataset[e]=j,style(a,{[e]:`${parseFloat(style(a,e))+c}px`})}restore(e,a){const c=a.dataset[e];c!==void 0&&(delete a.dataset[e],style(a,{[e]:c}))}setContainerStyle(e){super.setContainerStyle(e);const a=this.getElement();if(addClass(a,"modal-open"),!e.scrollBarWidth)return;const c=this.isRTL?"paddingLeft":"paddingRight",j=this.isRTL?"marginLeft":"marginRight";qsa(a,Selector.FIXED_CONTENT).forEach(d=>this.adjustAndStore(c,d,e.scrollBarWidth)),qsa(a,Selector.STICKY_CONTENT).forEach(d=>this.adjustAndStore(j,d,-e.scrollBarWidth)),qsa(a,Selector.NAVBAR_TOGGLER).forEach(d=>this.adjustAndStore(j,d,e.scrollBarWidth))}removeContainerStyle(e){super.removeContainerStyle(e);const a=this.getElement();removeClass(a,"modal-open");const c=this.isRTL?"paddingLeft":"paddingRight",j=this.isRTL?"marginLeft":"marginRight";qsa(a,Selector.FIXED_CONTENT).forEach(d=>this.restore(c,d)),qsa(a,Selector.STICKY_CONTENT).forEach(d=>this.restore(j,d)),qsa(a,Selector.NAVBAR_TOGGLER).forEach(d=>this.restore(j,d))}}let sharedManager;function getSharedManager(o){return sharedManager||(sharedManager=new BootstrapModalManager(o)),sharedManager}const ModalContext=reactExports.createContext({onHide(){}}),AbstractModalHeader=reactExports.forwardRef(({closeLabel:o="Close",closeVariant:e,closeButton:a=!1,onHide:c,children:j,...d},et)=>{const at=reactExports.useContext(ModalContext),st=useEventCallback(()=>{at==null||at.onHide(),c==null||c()});return jsxRuntimeExports.jsxs("div",{ref:et,...d,children:[j,a&&jsxRuntimeExports.jsx(CloseButton,{"aria-label":o,variant:e,onClick:st})]})}),NavbarBrand=reactExports.forwardRef(({bsPrefix:o,className:e,as:a,...c},j)=>{o=useBootstrapPrefix(o,"navbar-brand");const d=a||(c.href?"a":"span");return jsxRuntimeExports.jsx(d,{...c,ref:j,className:classNames(e,o)})});NavbarBrand.displayName="NavbarBrand";const NavbarCollapse=reactExports.forwardRef(({children:o,bsPrefix:e,...a},c)=>{e=useBootstrapPrefix(e,"navbar-collapse");const j=reactExports.useContext(context);return jsxRuntimeExports.jsx(Collapse,{in:!!(j&&j.expanded),...a,children:jsxRuntimeExports.jsx("div",{ref:c,className:e,children:o})})});NavbarCollapse.displayName="NavbarCollapse";const NavbarToggle=reactExports.forwardRef(({bsPrefix:o,className:e,children:a,label:c="Toggle navigation",as:j="button",onClick:d,...et},at)=>{o=useBootstrapPrefix(o,"navbar-toggler");const{onToggle:st,expanded:ct}=reactExports.useContext(context)||{},ot=useEventCallback(gt=>{d&&d(gt),st&&st()});return j==="button"&&(et.type="button"),jsxRuntimeExports.jsx(j,{...et,ref:at,onClick:ot,"aria-label":c,className:classNames(e,o,!ct&&"collapsed"),children:a||jsxRuntimeExports.jsx("span",{className:`${o}-icon`})})});NavbarToggle.displayName="NavbarToggle";const matchersByWindow=new WeakMap,getMatcher=(o,e)=>{if(!o||!e)return;const a=matchersByWindow.get(e)||new Map;matchersByWindow.set(e,a);let c=a.get(o);return c||(c=e.matchMedia(o),c.refCount=0,a.set(c.media,c)),c};function useMediaQuery(o,e=typeof window>"u"?void 0:window){const a=getMatcher(o,e),[c,j]=reactExports.useState(()=>a?a.matches:!1);return useIsomorphicEffect(()=>{let d=getMatcher(o,e);if(!d)return j(!1);let et=matchersByWindow.get(e);const at=()=>{j(d.matches)};return d.refCount++,d.addListener(at),at(),()=>{d.removeListener(at),d.refCount--,d.refCount<=0&&(et==null||et.delete(d.media)),d=void 0}},[o]),c}function createBreakpointHook(o){const e=Object.keys(o);function a(at,st){return at===st?st:at?`${at} and ${st}`:st}function c(at){return e[Math.min(e.indexOf(at)+1,e.length-1)]}function j(at){const st=c(at);let ct=o[st];return typeof ct=="number"?ct=`${ct-.2}px`:ct=`calc(${ct} - 0.2px)`,`(max-width: ${ct})`}function d(at){let st=o[at];return typeof st=="number"&&(st=`${st}px`),`(min-width: ${st})`}function et(at,st,ct){let ot;typeof at=="object"?(ot=at,ct=st,st=!0):(st=st||!0,ot={[at]:st});let gt=reactExports.useMemo(()=>Object.entries(ot).reduce((ft,[yt,vt])=>((vt==="up"||vt===!0)&&(ft=a(ft,d(yt))),(vt==="down"||vt===!0)&&(ft=a(ft,j(yt))),ft),""),[JSON.stringify(ot)]);return useMediaQuery(gt,ct)}return et}const useBreakpoint=createBreakpointHook({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400}),OffcanvasBody=reactExports.forwardRef(({className:o,bsPrefix:e,as:a="div",...c},j)=>(e=useBootstrapPrefix(e,"offcanvas-body"),jsxRuntimeExports.jsx(a,{ref:j,className:classNames(o,e),...c})));OffcanvasBody.displayName="OffcanvasBody";const transitionStyles={[ENTERING]:"show",[ENTERED]:"show"},OffcanvasToggling=reactExports.forwardRef(({bsPrefix:o,className:e,children:a,in:c=!1,mountOnEnter:j=!1,unmountOnExit:d=!1,appear:et=!1,...at},st)=>(o=useBootstrapPrefix(o,"offcanvas"),jsxRuntimeExports.jsx(TransitionWrapper,{ref:st,addEndListener:transitionEndListener,in:c,mountOnEnter:j,unmountOnExit:d,appear:et,...at,childRef:a.ref,children:(ct,ot)=>reactExports.cloneElement(a,{...ot,className:classNames(e,a.props.className,(ct===ENTERING||ct===EXITING)&&`${o}-toggling`,transitionStyles[ct])})})));OffcanvasToggling.displayName="OffcanvasToggling";const OffcanvasHeader=reactExports.forwardRef(({bsPrefix:o,className:e,closeLabel:a="Close",closeButton:c=!1,...j},d)=>(o=useBootstrapPrefix(o,"offcanvas-header"),jsxRuntimeExports.jsx(AbstractModalHeader,{ref:d,...j,className:classNames(e,o),closeLabel:a,closeButton:c})));OffcanvasHeader.displayName="OffcanvasHeader";const DivStyledAsH5=divWithClassName("h5"),OffcanvasTitle=reactExports.forwardRef(({className:o,bsPrefix:e,as:a=DivStyledAsH5,...c},j)=>(e=useBootstrapPrefix(e,"offcanvas-title"),jsxRuntimeExports.jsx(a,{ref:j,className:classNames(o,e),...c})));OffcanvasTitle.displayName="OffcanvasTitle";function DialogTransition(o){return jsxRuntimeExports.jsx(OffcanvasToggling,{...o})}function BackdropTransition(o){return jsxRuntimeExports.jsx(Fade,{...o})}const Offcanvas=reactExports.forwardRef(({bsPrefix:o,className:e,children:a,"aria-labelledby":c,placement:j="start",responsive:d,show:et=!1,backdrop:at=!0,keyboard:st=!0,scroll:ct=!1,onEscapeKeyDown:ot,onShow:gt,onHide:ft,container:yt,autoFocus:vt=!0,enforceFocus:rt=!0,restoreFocus:bt=!0,restoreFocusOptions:ht,onEntered:wt,onExit:At,onExiting:Ct,onEnter:dt,onEntering:Et,onExited:Rt,backdropClassName:Mt,manager:_t,renderStaticNode:kt=!1,...nt},s)=>{const b=reactExports.useRef();o=useBootstrapPrefix(o,"offcanvas");const[$,_e]=reactExports.useState(!1),it=useEventCallback(ft),pt=useBreakpoint(d||"xs","up");reactExports.useEffect(()=>{_e(d?et&&!pt:et)},[et,d,pt]);const mt=reactExports.useMemo(()=>({onHide:it}),[it]);function lt(){return _t||(ct?(b.current||(b.current=new BootstrapModalManager({handleContainerOverflow:!1})),b.current):getSharedManager())}const _=(Nt,...Ut)=>{Nt&&(Nt.style.visibility="visible"),dt==null||dt(Nt,...Ut)},tt=(Nt,...Ut)=>{Nt&&(Nt.style.visibility=""),Rt==null||Rt(...Ut)},Tt=reactExports.useCallback(Nt=>jsxRuntimeExports.jsx("div",{...Nt,className:classNames(`${o}-backdrop`,Mt)}),[Mt,o]),It=Nt=>jsxRuntimeExports.jsx("div",{...Nt,...nt,className:classNames(e,d?`${o}-${d}`:o,`${o}-${j}`),"aria-labelledby":c,children:a});return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[!$&&(d||kt)&&It({}),jsxRuntimeExports.jsx(ModalContext.Provider,{value:mt,children:jsxRuntimeExports.jsx(BaseModal,{show:$,ref:s,backdrop:at,container:yt,keyboard:st,autoFocus:vt,enforceFocus:rt&&!ct,restoreFocus:bt,restoreFocusOptions:ht,onEscapeKeyDown:ot,onShow:gt,onHide:it,onEnter:_,onEntering:Et,onEntered:wt,onExit:At,onExiting:Ct,onExited:tt,manager:lt(),transition:DialogTransition,backdropTransition:BackdropTransition,renderBackdrop:Tt,renderDialog:It})})]})});Offcanvas.displayName="Offcanvas";const Offcanvas$1=Object.assign(Offcanvas,{Body:OffcanvasBody,Header:OffcanvasHeader,Title:OffcanvasTitle}),NavbarOffcanvas=reactExports.forwardRef(({onHide:o,...e},a)=>{const c=reactExports.useContext(context),j=useEventCallback(()=>{c==null||c.onToggle==null||c.onToggle(),o==null||o()});return jsxRuntimeExports.jsx(Offcanvas$1,{ref:a,show:!!(c!=null&&c.expanded),...e,renderStaticNode:!0,onHide:j})});NavbarOffcanvas.displayName="NavbarOffcanvas";const NavbarText=reactExports.forwardRef(({className:o,bsPrefix:e,as:a="span",...c},j)=>(e=useBootstrapPrefix(e,"navbar-text"),jsxRuntimeExports.jsx(a,{ref:j,className:classNames(o,e),...c})));NavbarText.displayName="NavbarText";const Navbar=reactExports.forwardRef((o,e)=>{const{bsPrefix:a,expand:c=!0,variant:j="light",bg:d,fixed:et,sticky:at,className:st,as:ct="nav",expanded:ot,onToggle:gt,onSelect:ft,collapseOnSelect:yt=!1,...vt}=useUncontrolled(o,{expanded:"onToggle"}),rt=useBootstrapPrefix(a,"navbar"),bt=reactExports.useCallback((...At)=>{ft==null||ft(...At),yt&&ot&&(gt==null||gt(!1))},[ft,yt,ot,gt]);vt.role===void 0&&ct!=="nav"&&(vt.role="navigation");let ht=`${rt}-expand`;typeof c=="string"&&(ht=`${ht}-${c}`);const wt=reactExports.useMemo(()=>({onToggle:()=>gt==null?void 0:gt(!ot),bsPrefix:rt,expanded:!!ot,expand:c}),[rt,ot,c,gt]);return jsxRuntimeExports.jsx(context.Provider,{value:wt,children:jsxRuntimeExports.jsx(SelectableContext.Provider,{value:bt,children:jsxRuntimeExports.jsx(ct,{ref:e,...vt,className:classNames(st,rt,c&&ht,j&&`${rt}-${j}`,d&&`bg-${d}`,at&&`sticky-${at}`,et&&`fixed-${et}`)})})})});Navbar.displayName="Navbar";const Navbar$1=Object.assign(Navbar,{Brand:NavbarBrand,Collapse:NavbarCollapse,Offcanvas:NavbarOffcanvas,Text:NavbarText,Toggle:NavbarToggle}),msalConfig={auth:{clientId:"a0d5d07d-7447-464b-9551-71704635c8b7",authority:"https://login.microsoftonline.com/d2e5ac16-7068-4b2d-995b-3924af59cc7a/",redirectUri:window.location.origin,postLogoutRedirectUri:"/",navigateToLoginRequestUrl:!1},cache:{cacheLocation:"sessionStorage",storeAuthStateInCookie:!1},system:{loggerOptions:{loggerCallback:(o,e,a)=>{if(!a)switch(o){case LogLevel.Error:console.error(e);return;case LogLevel.Info:console.info(e);return;case LogLevel.Verbose:console.debug(e);return;case LogLevel.Warning:console.warn(e);return;default:return}}}}},loginRequest={scopes:[]},logo="/assets/contoso_logo-CsyjEv3q.png",jumpstart_logo="/assets/jumpstart_logo-Br3NNX8K.png",NavigationBar=()=>{const{instance:o}=useMsal(),e=()=>{o.loginRedirect(loginRequest).catch(c=>console.log(c))},a=()=>{o.logoutRedirect().catch(c=>console.log(c))};return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs(Navbar$1,{className:"navbarStyle",children:[jsxRuntimeExports.jsx("a",{className:"navbar-brand",href:"/",children:jsxRuntimeExports.jsx("img",{src:logo})}),jsxRuntimeExports.jsx(AuthenticatedTemplate,{children:jsxRuntimeExports.jsxs("div",{className:"collapse navbar-collapse justify-content-end",children:[jsxRuntimeExports.jsx("a",{className:"navbar-jumpstart",href:"/",children:jsxRuntimeExports.jsx("img",{src:jumpstart_logo})}),jsxRuntimeExports.jsx(Button,{variant:"warning",onClick:a,children:"Sign out"})]})}),jsxRuntimeExports.jsx(UnauthenticatedTemplate,{children:jsxRuntimeExports.jsxs("div",{className:"collapse navbar-collapse justify-content-end",children:[jsxRuntimeExports.jsx("a",{className:"navbar-jumpstart",href:"/",children:jsxRuntimeExports.jsx("img",{src:jumpstart_logo})}),jsxRuntimeExports.jsx(Button,{onClick:e,children:"Sign in"})]})})]})})};var withSelector={exports:{}},useSyncExternalStoreWithSelector_production_min={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g$2=reactExports;function n(o,e){return o===e&&(o!==0||1/o===1/e)||o!==o&&e!==e}var p=typeof Object.is=="function"?Object.is:n,q=g$2.useSyncExternalStore,r=g$2.useRef,t=g$2.useEffect,u=g$2.useMemo,v=g$2.useDebugValue;useSyncExternalStoreWithSelector_production_min.useSyncExternalStoreWithSelector=function(o,e,a,c,j){var d=r(null);if(d.current===null){var et={hasValue:!1,value:null};d.current=et}else et=d.current;d=u(function(){function st(yt){if(!ct){if(ct=!0,ot=yt,yt=c(yt),j!==void 0&&et.hasValue){var vt=et.value;if(j(vt,yt))return gt=vt}return gt=yt}if(vt=gt,p(ot,yt))return vt;var rt=c(yt);return j!==void 0&&j(vt,rt)?vt:(ot=yt,gt=rt)}var ct=!1,ot,gt,ft=a===void 0?null:a;return[function(){return st(e())},ft===null?void 0:function(){return st(ft())}]},[e,a,c,j]);var at=q(o,d[0],d[1]);return t(function(){et.hasValue=!0,et.value=at},[at]),v(at),at};withSelector.exports=useSyncExternalStoreWithSelector_production_min;var withSelectorExports=withSelector.exports,React="default"in ReactOriginal?React$1:ReactOriginal,ContextKey=Symbol.for("react-redux-context"),gT=typeof globalThis<"u"?globalThis:{};function getContext(){if(!React.createContext)return{};const o=gT[ContextKey]??(gT[ContextKey]=new Map);let e=o.get(React.createContext);return e||(e=React.createContext(null),o.set(React.createContext,e)),e}var ReactReduxContext=getContext(),notInitialized=()=>{throw new Error("uSES not initialized!")};function createReduxContextHook(o=ReactReduxContext){return function(){return React.useContext(o)}}var useReduxContext=createReduxContextHook(),useSyncExternalStoreWithSelector=notInitialized,initializeUseSelector=o=>{useSyncExternalStoreWithSelector=o},refEquality=(o,e)=>o===e;function createSelectorHook(o=ReactReduxContext){const e=o===ReactReduxContext?useReduxContext:createReduxContextHook(o),a=(c,j={})=>{const{equalityFn:d=refEquality,devModeChecks:et={}}=typeof j=="function"?{equalityFn:j}:j,{store:at,subscription:st,getServerState:ct,stabilityCheck:ot,identityFunctionCheck:gt}=e();React.useRef(!0);const ft=React.useCallback({[c.name](vt){return c(vt)}}[c.name],[c,ot,et.stabilityCheck]),yt=useSyncExternalStoreWithSelector(st.addNestedSub,at.getState,ct||at.getState,ft,d);return React.useDebugValue(yt),yt};return Object.assign(a,{withTypes:()=>a}),a}var useSelector=createSelectorHook();function defaultNoopBatch(o){o()}function createListenerCollection(){let o=null,e=null;return{clear(){o=null,e=null},notify(){defaultNoopBatch(()=>{let a=o;for(;a;)a.callback(),a=a.next})},get(){const a=[];let c=o;for(;c;)a.push(c),c=c.next;return a},subscribe(a){let c=!0;const j=e={callback:a,next:null,prev:e};return j.prev?j.prev.next=j:o=j,function(){!c||o===null||(c=!1,j.next?j.next.prev=j.prev:e=j.prev,j.prev?j.prev.next=j.next:o=j.next)}}}}var nullListeners={notify(){},get:()=>[]};function createSubscription(o,e){let a,c=nullListeners,j=0,d=!1;function et(rt){ot();const bt=c.subscribe(rt);let ht=!1;return()=>{ht||(ht=!0,bt(),gt())}}function at(){c.notify()}function st(){vt.onStateChange&&vt.onStateChange()}function ct(){return d}function ot(){j++,a||(a=o.subscribe(st),c=createListenerCollection())}function gt(){j--,a&&j===0&&(a(),a=void 0,c.clear(),c=nullListeners)}function ft(){d||(d=!0,ot())}function yt(){d&&(d=!1,gt())}const vt={addNestedSub:et,notifyNestedSubs:at,handleChangeWrapper:st,isSubscribed:ct,trySubscribe:ft,tryUnsubscribe:yt,getListeners:()=>c};return vt}var canUseDOM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",isReactNative=typeof navigator<"u"&&navigator.product==="ReactNative",useIsomorphicLayoutEffect=canUseDOM||isReactNative?React.useLayoutEffect:React.useEffect;function Provider({store:o,context:e,children:a,serverState:c,stabilityCheck:j="once",identityFunctionCheck:d="once"}){const et=React.useMemo(()=>{const ct=createSubscription(o);return{store:o,subscription:ct,getServerState:c?()=>c:void 0,stabilityCheck:j,identityFunctionCheck:d}},[o,c,j,d]),at=React.useMemo(()=>o.getState(),[o]);useIsomorphicLayoutEffect(()=>{const{subscription:ct}=et;return ct.onStateChange=ct.notifyNestedSubs,ct.trySubscribe(),at!==o.getState()&&ct.notifyNestedSubs(),()=>{ct.tryUnsubscribe(),ct.onStateChange=void 0}},[et,at]);const st=e||ReactReduxContext;return React.createElement(st.Provider,{value:et},a)}var Provider_default=Provider;function createStoreHook(o=ReactReduxContext){const e=o===ReactReduxContext?useReduxContext:createReduxContextHook(o),a=()=>{const{store:c}=e();return c};return Object.assign(a,{withTypes:()=>a}),a}var useStore=createStoreHook();function createDispatchHook(o=ReactReduxContext){const e=o===ReactReduxContext?useStore:createStoreHook(o),a=()=>e().dispatch;return Object.assign(a,{withTypes:()=>a}),a}var useDispatch=createDispatchHook();initializeUseSelector(withSelectorExports.useSyncExternalStoreWithSelector);function getDefaultExportFromCjs(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var browser$e={exports:{}},process=browser$e.exports={},cachedSetTimeout,cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?cachedSetTimeout=setTimeout:cachedSetTimeout=defaultSetTimout}catch{cachedSetTimeout=defaultSetTimout}try{typeof clearTimeout=="function"?cachedClearTimeout=clearTimeout:cachedClearTimeout=defaultClearTimeout}catch{cachedClearTimeout=defaultClearTimeout}})();function runTimeout(o){if(cachedSetTimeout===setTimeout)return setTimeout(o,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(o,0);try{return cachedSetTimeout(o,0)}catch{try{return cachedSetTimeout.call(null,o,0)}catch{return cachedSetTimeout.call(this,o,0)}}}function runClearTimeout(o){if(cachedClearTimeout===clearTimeout)return clearTimeout(o);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(o);try{return cachedClearTimeout(o)}catch{try{return cachedClearTimeout.call(null,o)}catch{return cachedClearTimeout.call(this,o)}}}var queue=[],draining=!1,currentQueue,queueIndex=-1;function cleanUpNextTick(){!draining||!currentQueue||(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var o=runTimeout(cleanUpNextTick);draining=!0;for(var e=queue.length;e;){for(currentQueue=queue,queue=[];++queueIndex<e;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,e=queue.length}currentQueue=null,draining=!1,runClearTimeout(o)}}process.nextTick=function(o){var e=new Array(arguments.length-1);if(arguments.length>1)for(var a=1;a<arguments.length;a++)e[a-1]=arguments[a];queue.push(new Item(o,e)),queue.length===1&&!draining&&runTimeout(drainQueue)};function Item(o,e){this.fun=o,this.array=e}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=!0;process.env={};process.argv=[];process.version="";process.versions={};function noop$1(){}process.on=noop$1;process.addListener=noop$1;process.once=noop$1;process.off=noop$1;process.removeListener=noop$1;process.removeAllListeners=noop$1;process.emit=noop$1;process.prependListener=noop$1;process.prependOnceListener=noop$1;process.listeners=function(o){return[]};process.binding=function(o){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(o){throw new Error("process.chdir is not supported")};process.umask=function(){return 0};var browserExports$1=browser$e.exports;const process$1=getDefaultExportFromCjs(browserExports$1);function formatProdErrorMessage$1(o){return`Minified Redux error #${o}; visit https://redux.js.org/Errors?code=${o} for the full message or use the non-minified dev environment for full errors. `}var $$observable=typeof Symbol=="function"&&Symbol.observable||"@@observable",symbol_observable_default=$$observable,randomString=()=>Math.random().toString(36).substring(7).split("").join("."),ActionTypes={INIT:`@@redux/INIT${randomString()}`,REPLACE:`@@redux/REPLACE${randomString()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${randomString()}`},actionTypes_default=ActionTypes;function isPlainObject$1(o){if(typeof o!="object"||o===null)return!1;let e=o;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(o)===e||Object.getPrototypeOf(o)===null}function createStore(o,e,a){if(typeof o!="function")throw new Error(formatProdErrorMessage$1(2));if(typeof e=="function"&&typeof a=="function"||typeof a=="function"&&typeof arguments[3]=="function")throw new Error(formatProdErrorMessage$1(0));if(typeof e=="function"&&typeof a>"u"&&(a=e,e=void 0),typeof a<"u"){if(typeof a!="function")throw new Error(formatProdErrorMessage$1(1));return a(createStore)(o,e)}let c=o,j=e,d=new Map,et=d,at=0,st=!1;function ct(){et===d&&(et=new Map,d.forEach((bt,ht)=>{et.set(ht,bt)}))}function ot(){if(st)throw new Error(formatProdErrorMessage$1(3));return j}function gt(bt){if(typeof bt!="function")throw new Error(formatProdErrorMessage$1(4));if(st)throw new Error(formatProdErrorMessage$1(5));let ht=!0;ct();const wt=at++;return et.set(wt,bt),function(){if(ht){if(st)throw new Error(formatProdErrorMessage$1(6));ht=!1,ct(),et.delete(wt),d=null}}}function ft(bt){if(!isPlainObject$1(bt))throw new Error(formatProdErrorMessage$1(7));if(typeof bt.type>"u")throw new Error(formatProdErrorMessage$1(8));if(typeof bt.type!="string")throw new Error(formatProdErrorMessage$1(17));if(st)throw new Error(formatProdErrorMessage$1(9));try{st=!0,j=c(j,bt)}finally{st=!1}return(d=et).forEach(wt=>{wt()}),bt}function yt(bt){if(typeof bt!="function")throw new Error(formatProdErrorMessage$1(10));c=bt,ft({type:actionTypes_default.REPLACE})}function vt(){const bt=gt;return{subscribe(ht){if(typeof ht!="object"||ht===null)throw new Error(formatProdErrorMessage$1(11));function wt(){const Ct=ht;Ct.next&&Ct.next(ot())}return wt(),{unsubscribe:bt(wt)}},[symbol_observable_default](){return this}}}return ft({type:actionTypes_default.INIT}),{dispatch:ft,subscribe:gt,getState:ot,replaceReducer:yt,[symbol_observable_default]:vt}}function assertReducerShape(o){Object.keys(o).forEach(e=>{const a=o[e];if(typeof a(void 0,{type:actionTypes_default.INIT})>"u")throw new Error(formatProdErrorMessage$1(12));if(typeof a(void 0,{type:actionTypes_default.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(formatProdErrorMessage$1(13))})}function combineReducers(o){const e=Object.keys(o),a={};for(let d=0;d<e.length;d++){const et=e[d];typeof o[et]=="function"&&(a[et]=o[et])}const c=Object.keys(a);let j;try{assertReducerShape(a)}catch(d){j=d}return function(et={},at){if(j)throw j;let st=!1;const ct={};for(let ot=0;ot<c.length;ot++){const gt=c[ot],ft=a[gt],yt=et[gt],vt=ft(yt,at);if(typeof vt>"u")throw at&&at.type,new Error(formatProdErrorMessage$1(14));ct[gt]=vt,st=st||vt!==yt}return st=st||c.length!==Object.keys(et).length,st?ct:et}}function compose(...o){return o.length===0?e=>e:o.length===1?o[0]:o.reduce((e,a)=>(...c)=>e(a(...c)))}function applyMiddleware(...o){return e=>(a,c)=>{const j=e(a,c);let d=()=>{throw new Error(formatProdErrorMessage$1(15))};const et={getState:j.getState,dispatch:(st,...ct)=>d(st,...ct)},at=o.map(st=>st(et));return d=compose(...at)(j.dispatch),{...j,dispatch:d}}}function isAction(o){return isPlainObject$1(o)&&"type"in o&&typeof o.type=="string"}var NOTHING=Symbol.for("immer-nothing"),DRAFTABLE=Symbol.for("immer-draftable"),DRAFT_STATE=Symbol.for("immer-state");function die(o,...e){throw new Error(`[Immer] minified error nr: ${o}. Full error at: https://bit.ly/3cXEKWf`)}var getPrototypeOf$1=Object.getPrototypeOf;function isDraft(o){return!!o&&!!o[DRAFT_STATE]}function isDraftable(o){var e;return o?isPlainObject(o)||Array.isArray(o)||!!o[DRAFTABLE]||!!((e=o.constructor)!=null&&e[DRAFTABLE])||isMap(o)||isSet(o):!1}var objectCtorString=Object.prototype.constructor.toString();function isPlainObject(o){if(!o||typeof o!="object")return!1;const e=getPrototypeOf$1(o);if(e===null)return!0;const a=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return a===Object?!0:typeof a=="function"&&Function.toString.call(a)===objectCtorString}function each(o,e){getArchtype(o)===0?Reflect.ownKeys(o).forEach(a=>{e(a,o[a],o)}):o.forEach((a,c)=>e(c,a,o))}function getArchtype(o){const e=o[DRAFT_STATE];return e?e.type_:Array.isArray(o)?1:isMap(o)?2:isSet(o)?3:0}function has(o,e){return getArchtype(o)===2?o.has(e):Object.prototype.hasOwnProperty.call(o,e)}function set(o,e,a){const c=getArchtype(o);c===2?o.set(e,a):c===3?o.add(a):o[e]=a}function is(o,e){return o===e?o!==0||1/o===1/e:o!==o&&e!==e}function isMap(o){return o instanceof Map}function isSet(o){return o instanceof Set}function latest(o){return o.copy_||o.base_}function shallowCopy(o,e){if(isMap(o))return new Map(o);if(isSet(o))return new Set(o);if(Array.isArray(o))return Array.prototype.slice.call(o);const a=isPlainObject(o);if(e===!0||e==="class_only"&&!a){const c=Object.getOwnPropertyDescriptors(o);delete c[DRAFT_STATE];let j=Reflect.ownKeys(c);for(let d=0;d<j.length;d++){const et=j[d],at=c[et];at.writable===!1&&(at.writable=!0,at.configurable=!0),(at.get||at.set)&&(c[et]={configurable:!0,writable:!0,enumerable:at.enumerable,value:o[et]})}return Object.create(getPrototypeOf$1(o),c)}else{const c=getPrototypeOf$1(o);if(c!==null&&a)return{...o};const j=Object.create(c);return Object.assign(j,o)}}function freeze(o,e=!1){return isFrozen(o)||isDraft(o)||!isDraftable(o)||(getArchtype(o)>1&&(o.set=o.add=o.clear=o.delete=dontMutateFrozenCollections),Object.freeze(o),e&&Object.entries(o).forEach(([a,c])=>freeze(c,!0))),o}function dontMutateFrozenCollections(){die(2)}function isFrozen(o){return Object.isFrozen(o)}var plugins={};function getPlugin(o){const e=plugins[o];return e||die(0,o),e}var currentScope;function getCurrentScope(){return currentScope}function createScope(o,e){return{drafts_:[],parent_:o,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function usePatchesInScope(o,e){e&&(getPlugin("Patches"),o.patches_=[],o.inversePatches_=[],o.patchListener_=e)}function revokeScope(o){leaveScope(o),o.drafts_.forEach(revokeDraft),o.drafts_=null}function leaveScope(o){o===currentScope&&(currentScope=o.parent_)}function enterScope(o){return currentScope=createScope(currentScope,o)}function revokeDraft(o){const e=o[DRAFT_STATE];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function processResult(o,e){e.unfinalizedDrafts_=e.drafts_.length;const a=e.drafts_[0];return o!==void 0&&o!==a?(a[DRAFT_STATE].modified_&&(revokeScope(e),die(4)),isDraftable(o)&&(o=finalize(e,o),e.parent_||maybeFreeze(e,o)),e.patches_&&getPlugin("Patches").generateReplacementPatches_(a[DRAFT_STATE].base_,o,e.patches_,e.inversePatches_)):o=finalize(e,a,[]),revokeScope(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),o!==NOTHING?o:void 0}function finalize(o,e,a){if(isFrozen(e))return e;const c=e[DRAFT_STATE];if(!c)return each(e,(j,d)=>finalizeProperty(o,c,e,j,d,a)),e;if(c.scope_!==o)return e;if(!c.modified_)return maybeFreeze(o,c.base_,!0),c.base_;if(!c.finalized_){c.finalized_=!0,c.scope_.unfinalizedDrafts_--;const j=c.copy_;let d=j,et=!1;c.type_===3&&(d=new Set(j),j.clear(),et=!0),each(d,(at,st)=>finalizeProperty(o,c,j,at,st,a,et)),maybeFreeze(o,j,!1),a&&o.patches_&&getPlugin("Patches").generatePatches_(c,a,o.patches_,o.inversePatches_)}return c.copy_}function finalizeProperty(o,e,a,c,j,d,et){if(isDraft(j)){const at=d&&e&&e.type_!==3&&!has(e.assigned_,c)?d.concat(c):void 0,st=finalize(o,j,at);if(set(a,c,st),isDraft(st))o.canAutoFreeze_=!1;else return}else et&&a.add(j);if(isDraftable(j)&&!isFrozen(j)){if(!o.immer_.autoFreeze_&&o.unfinalizedDrafts_<1)return;finalize(o,j),(!e||!e.scope_.parent_)&&typeof c!="symbol"&&Object.prototype.propertyIsEnumerable.call(a,c)&&maybeFreeze(o,j)}}function maybeFreeze(o,e,a=!1){!o.parent_&&o.immer_.autoFreeze_&&o.canAutoFreeze_&&freeze(e,a)}function createProxyProxy(o,e){const a=Array.isArray(o),c={type_:a?1:0,scope_:e?e.scope_:getCurrentScope(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:o,draft_:null,copy_:null,revoke_:null,isManual_:!1};let j=c,d=objectTraps;a&&(j=[c],d=arrayTraps);const{revoke:et,proxy:at}=Proxy.revocable(j,d);return c.draft_=at,c.revoke_=et,at}var objectTraps={get(o,e){if(e===DRAFT_STATE)return o;const a=latest(o);if(!has(a,e))return readPropFromProto(o,a,e);const c=a[e];return o.finalized_||!isDraftable(c)?c:c===peek(o.base_,e)?(prepareCopy(o),o.copy_[e]=createProxy(c,o)):c},has(o,e){return e in latest(o)},ownKeys(o){return Reflect.ownKeys(latest(o))},set(o,e,a){const c=getDescriptorFromProto(latest(o),e);if(c!=null&&c.set)return c.set.call(o.draft_,a),!0;if(!o.modified_){const j=peek(latest(o),e),d=j==null?void 0:j[DRAFT_STATE];if(d&&d.base_===a)return o.copy_[e]=a,o.assigned_[e]=!1,!0;if(is(a,j)&&(a!==void 0||has(o.base_,e)))return!0;prepareCopy(o),markChanged(o)}return o.copy_[e]===a&&(a!==void 0||e in o.copy_)||Number.isNaN(a)&&Number.isNaN(o.copy_[e])||(o.copy_[e]=a,o.assigned_[e]=!0),!0},deleteProperty(o,e){return peek(o.base_,e)!==void 0||e in o.base_?(o.assigned_[e]=!1,prepareCopy(o),markChanged(o)):delete o.assigned_[e],o.copy_&&delete o.copy_[e],!0},getOwnPropertyDescriptor(o,e){const a=latest(o),c=Reflect.getOwnPropertyDescriptor(a,e);return c&&{writable:!0,configurable:o.type_!==1||e!=="length",enumerable:c.enumerable,value:a[e]}},defineProperty(){die(11)},getPrototypeOf(o){return getPrototypeOf$1(o.base_)},setPrototypeOf(){die(12)}},arrayTraps={};each(objectTraps,(o,e)=>{arrayTraps[o]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});arrayTraps.deleteProperty=function(o,e){return arrayTraps.set.call(this,o,e,void 0)};arrayTraps.set=function(o,e,a){return objectTraps.set.call(this,o[0],e,a,o[0])};function peek(o,e){const a=o[DRAFT_STATE];return(a?latest(a):o)[e]}function readPropFromProto(o,e,a){var j;const c=getDescriptorFromProto(e,a);return c?"value"in c?c.value:(j=c.get)==null?void 0:j.call(o.draft_):void 0}function getDescriptorFromProto(o,e){if(!(e in o))return;let a=getPrototypeOf$1(o);for(;a;){const c=Object.getOwnPropertyDescriptor(a,e);if(c)return c;a=getPrototypeOf$1(a)}}function markChanged(o){o.modified_||(o.modified_=!0,o.parent_&&markChanged(o.parent_))}function prepareCopy(o){o.copy_||(o.copy_=shallowCopy(o.base_,o.scope_.immer_.useStrictShallowCopy_))}var Immer2=class{constructor(o){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,a,c)=>{if(typeof e=="function"&&typeof a!="function"){const d=a;a=e;const et=this;return function(st=d,...ct){return et.produce(st,ot=>a.call(this,ot,...ct))}}typeof a!="function"&&die(6),c!==void 0&&typeof c!="function"&&die(7);let j;if(isDraftable(e)){const d=enterScope(this),et=createProxy(e,void 0);let at=!0;try{j=a(et),at=!1}finally{at?revokeScope(d):leaveScope(d)}return usePatchesInScope(d,c),processResult(j,d)}else if(!e||typeof e!="object"){if(j=a(e),j===void 0&&(j=e),j===NOTHING&&(j=void 0),this.autoFreeze_&&freeze(j,!0),c){const d=[],et=[];getPlugin("Patches").generateReplacementPatches_(e,j,d,et),c(d,et)}return j}else die(1,e)},this.produceWithPatches=(e,a)=>{if(typeof e=="function")return(et,...at)=>this.produceWithPatches(et,st=>e(st,...at));let c,j;return[this.produce(e,a,(et,at)=>{c=et,j=at}),c,j]},typeof(o==null?void 0:o.autoFreeze)=="boolean"&&this.setAutoFreeze(o.autoFreeze),typeof(o==null?void 0:o.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(o.useStrictShallowCopy)}createDraft(o){isDraftable(o)||die(8),isDraft(o)&&(o=current(o));const e=enterScope(this),a=createProxy(o,void 0);return a[DRAFT_STATE].isManual_=!0,leaveScope(e),a}finishDraft(o,e){const a=o&&o[DRAFT_STATE];(!a||!a.isManual_)&&die(9);const{scope_:c}=a;return usePatchesInScope(c,e),processResult(void 0,c)}setAutoFreeze(o){this.autoFreeze_=o}setUseStrictShallowCopy(o){this.useStrictShallowCopy_=o}applyPatches(o,e){let a;for(a=e.length-1;a>=0;a--){const j=e[a];if(j.path.length===0&&j.op==="replace"){o=j.value;break}}a>-1&&(e=e.slice(a+1));const c=getPlugin("Patches").applyPatches_;return isDraft(o)?c(o,e):this.produce(o,j=>c(j,e))}};function createProxy(o,e){const a=isMap(o)?getPlugin("MapSet").proxyMap_(o,e):isSet(o)?getPlugin("MapSet").proxySet_(o,e):createProxyProxy(o,e);return(e?e.scope_:getCurrentScope()).drafts_.push(a),a}function current(o){return isDraft(o)||die(10,o),currentImpl(o)}function currentImpl(o){if(!isDraftable(o)||isFrozen(o))return o;const e=o[DRAFT_STATE];let a;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,a=shallowCopy(o,e.scope_.immer_.useStrictShallowCopy_)}else a=shallowCopy(o,!0);return each(a,(c,j)=>{set(a,c,currentImpl(j))}),e&&(e.finalized_=!1),a}var immer=new Immer2,produce=immer.produce;immer.produceWithPatches.bind(immer);immer.setAutoFreeze.bind(immer);immer.setUseStrictShallowCopy.bind(immer);immer.applyPatches.bind(immer);immer.createDraft.bind(immer);immer.finishDraft.bind(immer);function createThunkMiddleware(o){return({dispatch:a,getState:c})=>j=>d=>typeof d=="function"?d(a,c,o):j(d)}var thunk=createThunkMiddleware(),withExtraArgument=createThunkMiddleware,composeWithDevTools=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?compose:compose.apply(null,arguments)};function createAction(o,e){function a(...c){if(e){let j=e(...c);if(!j)throw new Error(formatProdErrorMessage(0));return{type:o,payload:j.payload,..."meta"in j&&{meta:j.meta},..."error"in j&&{error:j.error}}}return{type:o,payload:c[0]}}return a.toString=()=>`${o}`,a.type=o,a.match=c=>isAction(c)&&c.type===o,a}var Tuple=class uu extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,uu.prototype)}static get[Symbol.species](){return uu}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new uu(...e[0].concat(this)):new uu(...e.concat(this))}};function freezeDraftable(o){return isDraftable(o)?produce(o,()=>{}):o}function emplace(o,e,a){if(o.has(e)){let j=o.get(e);return a.update&&(j=a.update(j,e,o),o.set(e,j)),j}if(!a.insert)throw new Error(formatProdErrorMessage(10));const c=a.insert(e,o);return o.set(e,c),c}function isBoolean(o){return typeof o=="boolean"}var buildGetDefaultMiddleware=()=>function(e){const{thunk:a=!0,immutableCheck:c=!0,serializableCheck:j=!0,actionCreatorCheck:d=!0}=e??{};let et=new Tuple;return a&&(isBoolean(a)?et.push(thunk):et.push(withExtraArgument(a.extraArgument))),et},SHOULD_AUTOBATCH="RTK_autoBatch",createQueueWithTimer=o=>e=>{setTimeout(e,o)},rAF=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:createQueueWithTimer(10),autoBatchEnhancer=(o={type:"raf"})=>e=>(...a)=>{const c=e(...a);let j=!0,d=!1,et=!1;const at=new Set,st=o.type==="tick"?queueMicrotask:o.type==="raf"?rAF:o.type==="callback"?o.queueNotification:createQueueWithTimer(o.timeout),ct=()=>{et=!1,d&&(d=!1,at.forEach(ot=>ot()))};return Object.assign({},c,{subscribe(ot){const gt=()=>j&&ot(),ft=c.subscribe(gt);return at.add(ot),()=>{ft(),at.delete(ot)}},dispatch(ot){var gt;try{return j=!((gt=ot==null?void 0:ot.meta)!=null&&gt[SHOULD_AUTOBATCH]),d=!j,d&&(et||(et=!0,st(ct))),c.dispatch(ot)}finally{j=!0}}})},buildGetDefaultEnhancers=o=>function(a){const{autoBatch:c=!0}=a??{};let j=new Tuple(o);return c&&j.push(autoBatchEnhancer(typeof c=="object"?c:void 0)),j};function configureStore(o){const e=buildGetDefaultMiddleware(),{reducer:a=void 0,middleware:c,devTools:j=!0,preloadedState:d=void 0,enhancers:et=void 0}=o||{};let at;if(typeof a=="function")at=a;else if(isPlainObject$1(a))at=combineReducers(a);else throw new Error(formatProdErrorMessage(1));let st;typeof c=="function"?st=c(e):st=e();let ct=compose;j&&(ct=composeWithDevTools({trace:!1,...typeof j=="object"&&j}));const ot=applyMiddleware(...st),gt=buildGetDefaultEnhancers(ot);let ft=typeof et=="function"?et(gt):gt();const yt=ct(...ft);return createStore(at,d,yt)}function executeReducerBuilderCallback(o){const e={},a=[];let c;const j={addCase(d,et){const at=typeof d=="string"?d:d.type;if(!at)throw new Error(formatProdErrorMessage(28));if(at in e)throw new Error(formatProdErrorMessage(29));return e[at]=et,j},addMatcher(d,et){return a.push({matcher:d,reducer:et}),j},addDefaultCase(d){return c=d,j}};return o(j),[e,a,c]}function isStateFunction(o){return typeof o=="function"}function createReducer(o,e){let[a,c,j]=executeReducerBuilderCallback(e),d;if(isStateFunction(o))d=()=>freezeDraftable(o());else{const at=freezeDraftable(o);d=()=>at}function et(at=d(),st){let ct=[a[st.type],...c.filter(({matcher:ot})=>ot(st)).map(({reducer:ot})=>ot)];return ct.filter(ot=>!!ot).length===0&&(ct=[j]),ct.reduce((ot,gt)=>{if(gt)if(isDraft(ot)){const yt=gt(ot,st);return yt===void 0?ot:yt}else{if(isDraftable(ot))return produce(ot,ft=>gt(ft,st));{const ft=gt(ot,st);if(ft===void 0){if(ot===null)return ot;throw Error("A case reducer on a non-draftable value must not return undefined")}return ft}}return ot},at)}return et.getInitialState=d,et}var asyncThunkSymbol=Symbol.for("rtk-slice-createasyncthunk");function getType(o,e){return`${o}/${e}`}function buildCreateSlice({creators:o}={}){var a;const e=(a=o==null?void 0:o.asyncThunk)==null?void 0:a[asyncThunkSymbol];return function(j){const{name:d,reducerPath:et=d}=j;if(!d)throw new Error(formatProdErrorMessage(11));typeof process$1<"u";const at=(typeof j.reducers=="function"?j.reducers(buildReducerCreators()):j.reducers)||{},st=Object.keys(at),ct={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},ot={addCase(At,Ct){const dt=typeof At=="string"?At:At.type;if(!dt)throw new Error(formatProdErrorMessage(12));if(dt in ct.sliceCaseReducersByType)throw new Error(formatProdErrorMessage(13));return ct.sliceCaseReducersByType[dt]=Ct,ot},addMatcher(At,Ct){return ct.sliceMatchers.push({matcher:At,reducer:Ct}),ot},exposeAction(At,Ct){return ct.actionCreators[At]=Ct,ot},exposeCaseReducer(At,Ct){return ct.sliceCaseReducersByName[At]=Ct,ot}};st.forEach(At=>{const Ct=at[At],dt={reducerName:At,type:getType(d,At),createNotation:typeof j.reducers=="function"};isAsyncThunkSliceReducerDefinition(Ct)?handleThunkCaseReducerDefinition(dt,Ct,ot,e):handleNormalReducerDefinition(dt,Ct,ot)});function gt(){const[At={},Ct=[],dt=void 0]=typeof j.extraReducers=="function"?executeReducerBuilderCallback(j.extraReducers):[j.extraReducers],Et={...At,...ct.sliceCaseReducersByType};return createReducer(j.initialState,Rt=>{for(let Mt in Et)Rt.addCase(Mt,Et[Mt]);for(let Mt of ct.sliceMatchers)Rt.addMatcher(Mt.matcher,Mt.reducer);for(let Mt of Ct)Rt.addMatcher(Mt.matcher,Mt.reducer);dt&&Rt.addDefaultCase(dt)})}const ft=At=>At,yt=new Map;let vt;function rt(At,Ct){return vt||(vt=gt()),vt(At,Ct)}function bt(){return vt||(vt=gt()),vt.getInitialState()}function ht(At,Ct=!1){function dt(Rt){let Mt=Rt[At];return typeof Mt>"u"&&Ct&&(Mt=bt()),Mt}function Et(Rt=ft){const Mt=emplace(yt,Ct,{insert:()=>new WeakMap});return emplace(Mt,Rt,{insert:()=>{const _t={};for(const[kt,nt]of Object.entries(j.selectors??{}))_t[kt]=wrapSelector(nt,Rt,bt,Ct);return _t}})}return{reducerPath:At,getSelectors:Et,get selectors(){return Et(dt)},selectSlice:dt}}const wt={name:d,reducer:rt,actions:ct.actionCreators,caseReducers:ct.sliceCaseReducersByName,getInitialState:bt,...ht(et),injectInto(At,{reducerPath:Ct,...dt}={}){const Et=Ct??et;return At.inject({reducerPath:Et,reducer:rt},dt),{...wt,...ht(Et,!0)}}};return wt}}function wrapSelector(o,e,a,c){function j(d,...et){let at=e(d);return typeof at>"u"&&c&&(at=a()),o(at,...et)}return j.unwrapped=o,j}var createSlice=buildCreateSlice();function buildReducerCreators(){function o(e,a){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...a}}return o.withTypes=()=>o,{reducer(e){return Object.assign({[e.name](...a){return e(...a)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,a){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:a}},asyncThunk:o}}function handleNormalReducerDefinition({type:o,reducerName:e,createNotation:a},c,j){let d,et;if("reducer"in c){if(a&&!isCaseReducerWithPrepareDefinition(c))throw new Error(formatProdErrorMessage(17));d=c.reducer,et=c.prepare}else d=c;j.addCase(o,d).exposeCaseReducer(e,d).exposeAction(e,et?createAction(o,et):createAction(o))}function isAsyncThunkSliceReducerDefinition(o){return o._reducerDefinitionType==="asyncThunk"}function isCaseReducerWithPrepareDefinition(o){return o._reducerDefinitionType==="reducerWithPrepare"}function handleThunkCaseReducerDefinition({type:o,reducerName:e},a,c,j){if(!j)throw new Error(formatProdErrorMessage(18));const{payloadCreator:d,fulfilled:et,pending:at,rejected:st,settled:ct,options:ot}=a,gt=j(o,d,ot);c.exposeAction(e,gt),et&&c.addCase(gt.fulfilled,et),at&&c.addCase(gt.pending,at),st&&c.addCase(gt.rejected,st),ct&&c.addMatcher(gt.settled,ct),c.exposeCaseReducer(e,{fulfilled:et||noop,pending:at||noop,rejected:st||noop,settled:ct||noop})}function noop(){}function formatProdErrorMessage(o){return`Minified Redux Toolkit error #${o}; visit https://redux-toolkit.js.org/Errors?code=${o} for the full message or use the non-minified dev environment for full errors. `}const initialState$4={jwt:"",sessionService:{address:"",desiredState:"connected"},appId:"usd-viewer-msft",version:"106.1.0",profile:"azurelb-wss",sessionId:"",status:0},serviceSlice=createSlice({name:"service",initialState:initialState$4,reducers:{setJWT:(o,e)=>{o.jwt=e.payload},setService:(o,e)=>{o.sessionService={address:e.payload.address,desiredState:e.payload.desiredState}},setSessionId:(o,e)=>{o.sessionId=e.payload},setStatus:(o,e)=>{o.status=e.payload}}}),{setService}=serviceSlice.actions,{setSessionId}=serviceSlice.actions,{setStatus:setStatus$1}=serviceSlice.actions,serviceReducer=serviceSlice.reducer,initialState$3={server:"",remoteStream:{signalingserver:"",signalingport:0,mediaserver:"",mediaport:0,accessToken:"",sessionid:""},kitState:"unknown"},appStreamSlice=createSlice({name:"appstream",initialState:initialState$3,reducers:{setServer:(o,e)=>{o.server=e.payload},setRemoteStream:(o,e)=>{o.remoteStream={signalingserver:e.payload.signalingserver,signalingport:e.payload.signalingport,mediaserver:e.payload.mediaserver,mediaport:e.payload.mediaport,accessToken:e.payload.accessToken,sessionid:e.payload.sessionid}},setKitState:(o,e)=>{o.kitState=e.payload}}}),{setServer}=appStreamSlice.actions,{setRemoteStream}=appStreamSlice.actions,{setKitState}=appStreamSlice.actions,appStreamReducer=appStreamSlice.reducer,initialState$2={url:"",loadingState:"idle",loadedUrl:""},usdStorageSlice=createSlice({name:"usdStorage",initialState:initialState$2,reducers:{setURL:(o,e)=>{o.url=e.payload},setLoadingState:(o,e)=>{o.loadingState=e.payload},setLoadedURL:(o,e)=>{o.loadedUrl=e.payload}}}),{setURL}=usdStorageSlice.actions,{setLoadingState}=usdStorageSlice.actions,{setLoadedURL}=usdStorageSlice.actions,usdStorageReducer=usdStorageSlice.reducer;var sha256$2={exports:{}},cryptoBrowserify={},browser$d={exports:{}},safeBuffer$1={exports:{}};const require$$1$2=getAugmentedNamespace(dist$1);/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var hasRequiredSafeBuffer$1;function requireSafeBuffer$1(){return hasRequiredSafeBuffer$1||(hasRequiredSafeBuffer$1=1,function(o,e){var a=require$$1$2,c=a.Buffer;function j(et,at){for(var st in et)at[st]=et[st]}c.from&&c.alloc&&c.allocUnsafe&&c.allocUnsafeSlow?o.exports=a:(j(a,e),e.Buffer=d);function d(et,at,st){return c(et,at,st)}d.prototype=Object.create(c.prototype),j(c,d),d.from=function(et,at,st){if(typeof et=="number")throw new TypeError("Argument must not be a number");return c(et,at,st)},d.alloc=function(et,at,st){if(typeof et!="number")throw new TypeError("Argument must be a number");var ct=c(et);return at!==void 0?typeof st=="string"?ct.fill(at,st):ct.fill(at):ct.fill(0),ct},d.allocUnsafe=function(et){if(typeof et!="number")throw new TypeError("Argument must be a number");return c(et)},d.allocUnsafeSlow=function(et){if(typeof et!="number")throw new TypeError("Argument must be a number");return a.SlowBuffer(et)}}(safeBuffer$1,safeBuffer$1.exports)),safeBuffer$1.exports}var hasRequiredBrowser$b;function requireBrowser$b(){if(hasRequiredBrowser$b)return browser$d.exports;hasRequiredBrowser$b=1;var o=65536,e=4294967295;function a(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var c=requireSafeBuffer$1().Buffer,j=commonjsGlobal.crypto||commonjsGlobal.msCrypto;j&&j.getRandomValues?browser$d.exports=d:browser$d.exports=a;function d(et,at){if(et>e)throw new RangeError("requested too many random bytes");var st=c.allocUnsafe(et);if(et>0)if(et>o)for(var ct=0;ct<et;ct+=o)j.getRandomValues(st.slice(ct,ct+o));else j.getRandomValues(st);return typeof at=="function"?process$1.nextTick(function(){at(null,st)}):st}return browser$d.exports}var inherits_browser={exports:{}},hasRequiredInherits_browser;function requireInherits_browser(){return hasRequiredInherits_browser||(hasRequiredInherits_browser=1,typeof Object.create=="function"?inherits_browser.exports=function(e,a){a&&(e.super_=a,e.prototype=Object.create(a.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser.exports=function(e,a){if(a){e.super_=a;var c=function(){};c.prototype=a.prototype,e.prototype=new c,e.prototype.constructor=e}}),inherits_browser.exports}var events={exports:{}},R=typeof Reflect=="object"?Reflect:null,ReflectApply=R&&typeof R.apply=="function"?R.apply:function(e,a,c){return Function.prototype.apply.call(e,a,c)},ReflectOwnKeys;R&&typeof R.ownKeys=="function"?ReflectOwnKeys=R.ownKeys:Object.getOwnPropertySymbols?ReflectOwnKeys=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:ReflectOwnKeys=function(e){return Object.getOwnPropertyNames(e)};function ProcessEmitWarning(o){console&&console.warn&&console.warn(o)}var NumberIsNaN=Number.isNaN||function(e){return e!==e};function EventEmitter$4(){EventEmitter$4.init.call(this)}events.exports=EventEmitter$4;events.exports.once=once;EventEmitter$4.EventEmitter=EventEmitter$4;EventEmitter$4.prototype._events=void 0;EventEmitter$4.prototype._eventsCount=0;EventEmitter$4.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(o){if(typeof o!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof o)}Object.defineProperty(EventEmitter$4,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(o){if(typeof o!="number"||o<0||NumberIsNaN(o))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+o+".");defaultMaxListeners=o}});EventEmitter$4.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};EventEmitter$4.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||NumberIsNaN(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function _getMaxListeners(o){return o._maxListeners===void 0?EventEmitter$4.defaultMaxListeners:o._maxListeners}EventEmitter$4.prototype.getMaxListeners=function(){return _getMaxListeners(this)};EventEmitter$4.prototype.emit=function(e){for(var a=[],c=1;c<arguments.length;c++)a.push(arguments[c]);var j=e==="error",d=this._events;if(d!==void 0)j=j&&d.error===void 0;else if(!j)return!1;if(j){var et;if(a.length>0&&(et=a[0]),et instanceof Error)throw et;var at=new Error("Unhandled error."+(et?" ("+et.message+")":""));throw at.context=et,at}var st=d[e];if(st===void 0)return!1;if(typeof st=="function")ReflectApply(st,this,a);else for(var ct=st.length,ot=arrayClone(st,ct),c=0;c<ct;++c)ReflectApply(ot[c],this,a);return!0};function _addListener(o,e,a,c){var j,d,et;if(checkListener(a),d=o._events,d===void 0?(d=o._events=Object.create(null),o._eventsCount=0):(d.newListener!==void 0&&(o.emit("newListener",e,a.listener?a.listener:a),d=o._events),et=d[e]),et===void 0)et=d[e]=a,++o._eventsCount;else if(typeof et=="function"?et=d[e]=c?[a,et]:[et,a]:c?et.unshift(a):et.push(a),j=_getMaxListeners(o),j>0&&et.length>j&&!et.warned){et.warned=!0;var at=new Error("Possible EventEmitter memory leak detected. "+et.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");at.name="MaxListenersExceededWarning",at.emitter=o,at.type=e,at.count=et.length,ProcessEmitWarning(at)}return o}EventEmitter$4.prototype.addListener=function(e,a){return _addListener(this,e,a,!1)};EventEmitter$4.prototype.on=EventEmitter$4.prototype.addListener;EventEmitter$4.prototype.prependListener=function(e,a){return _addListener(this,e,a,!0)};function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(o,e,a){var c={fired:!1,wrapFn:void 0,target:o,type:e,listener:a},j=onceWrapper.bind(c);return j.listener=a,c.wrapFn=j,j}EventEmitter$4.prototype.once=function(e,a){return checkListener(a),this.on(e,_onceWrap(this,e,a)),this};EventEmitter$4.prototype.prependOnceListener=function(e,a){return checkListener(a),this.prependListener(e,_onceWrap(this,e,a)),this};EventEmitter$4.prototype.removeListener=function(e,a){var c,j,d,et,at;if(checkListener(a),j=this._events,j===void 0)return this;if(c=j[e],c===void 0)return this;if(c===a||c.listener===a)--this._eventsCount===0?this._events=Object.create(null):(delete j[e],j.removeListener&&this.emit("removeListener",e,c.listener||a));else if(typeof c!="function"){for(d=-1,et=c.length-1;et>=0;et--)if(c[et]===a||c[et].listener===a){at=c[et].listener,d=et;break}if(d<0)return this;d===0?c.shift():spliceOne(c,d),c.length===1&&(j[e]=c[0]),j.removeListener!==void 0&&this.emit("removeListener",e,at||a)}return this};EventEmitter$4.prototype.off=EventEmitter$4.prototype.removeListener;EventEmitter$4.prototype.removeAllListeners=function(e){var a,c,j;if(c=this._events,c===void 0)return this;if(c.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):c[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete c[e]),this;if(arguments.length===0){var d=Object.keys(c),et;for(j=0;j<d.length;++j)et=d[j],et!=="removeListener"&&this.removeAllListeners(et);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(a=c[e],typeof a=="function")this.removeListener(e,a);else if(a!==void 0)for(j=a.length-1;j>=0;j--)this.removeListener(e,a[j]);return this};function _listeners(o,e,a){var c=o._events;if(c===void 0)return[];var j=c[e];return j===void 0?[]:typeof j=="function"?a?[j.listener||j]:[j]:a?unwrapListeners(j):arrayClone(j,j.length)}EventEmitter$4.prototype.listeners=function(e){return _listeners(this,e,!0)};EventEmitter$4.prototype.rawListeners=function(e){return _listeners(this,e,!1)};EventEmitter$4.listenerCount=function(o,e){return typeof o.listenerCount=="function"?o.listenerCount(e):listenerCount.call(o,e)};EventEmitter$4.prototype.listenerCount=listenerCount;function listenerCount(o){var e=this._events;if(e!==void 0){var a=e[o];if(typeof a=="function")return 1;if(a!==void 0)return a.length}return 0}EventEmitter$4.prototype.eventNames=function(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(o,e){for(var a=new Array(e),c=0;c<e;++c)a[c]=o[c];return a}function spliceOne(o,e){for(;e+1<o.length;e++)o[e]=o[e+1];o.pop()}function unwrapListeners(o){for(var e=new Array(o.length),a=0;a<e.length;++a)e[a]=o[a].listener||o[a];return e}function once(o,e){return new Promise(function(a,c){function j(et){o.removeListener(e,d),c(et)}function d(){typeof o.removeListener=="function"&&o.removeListener("error",j),a([].slice.call(arguments))}eventTargetAgnosticAddListener(o,e,d,{once:!0}),e!=="error"&&addErrorHandlerIfEventEmitter(o,j,{once:!0})})}function addErrorHandlerIfEventEmitter(o,e,a){typeof o.on=="function"&&eventTargetAgnosticAddListener(o,"error",e,a)}function eventTargetAgnosticAddListener(o,e,a,c){if(typeof o.on=="function")c.once?o.once(e,a):o.on(e,a);else if(typeof o.addEventListener=="function")o.addEventListener(e,function j(d){c.once&&o.removeEventListener(e,j),a(d)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof o)}var eventsExports=events.exports,streamBrowser$1,hasRequiredStreamBrowser$1;function requireStreamBrowser$1(){return hasRequiredStreamBrowser$1||(hasRequiredStreamBrowser$1=1,streamBrowser$1=eventsExports.EventEmitter),streamBrowser$1}var util$8={},types$3={},shams$1=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},a=Symbol("test"),c=Object(a);if(typeof a=="string"||Object.prototype.toString.call(a)!=="[object Symbol]"||Object.prototype.toString.call(c)!=="[object Symbol]")return!1;var j=42;e[a]=j;for(a in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var d=Object.getOwnPropertySymbols(e);if(d.length!==1||d[0]!==a||!Object.prototype.propertyIsEnumerable.call(e,a))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var et=Object.getOwnPropertyDescriptor(e,a);if(et.value!==j||et.enumerable!==!0)return!1}return!0},hasSymbols$2=shams$1,shams=function(){return hasSymbols$2()&&!!Symbol.toStringTag},esErrors=Error,_eval=EvalError,range=RangeError,ref=ReferenceError,syntax=SyntaxError,type=TypeError,uri=URIError,origSymbol=typeof Symbol<"u"&&Symbol,hasSymbolSham=shams$1,hasSymbols$1=function(){return typeof origSymbol!="function"||typeof Symbol!="function"||typeof origSymbol("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:hasSymbolSham()},test={__proto__:null,foo:{}},$Object=Object,hasProto$1=function(){return{__proto__:test}.foo===test.foo&&!(test instanceof $Object)},ERROR_MESSAGE="Function.prototype.bind called on incompatible ",toStr$3=Object.prototype.toString,max=Math.max,funcType="[object Function]",concatty=function(e,a){for(var c=[],j=0;j<e.length;j+=1)c[j]=e[j];for(var d=0;d<a.length;d+=1)c[d+e.length]=a[d];return c},slicy=function(e,a){for(var c=[],j=a,d=0;j<e.length;j+=1,d+=1)c[d]=e[j];return c},joiny=function(o,e){for(var a="",c=0;c<o.length;c+=1)a+=o[c],c+1<o.length&&(a+=e);return a},implementation$1=function(e){var a=this;if(typeof a!="function"||toStr$3.apply(a)!==funcType)throw new TypeError(ERROR_MESSAGE+a);for(var c=slicy(arguments,1),j,d=function(){if(this instanceof j){var ot=a.apply(this,concatty(c,arguments));return Object(ot)===ot?ot:this}return a.apply(e,concatty(c,arguments))},et=max(0,a.length-c.length),at=[],st=0;st<et;st++)at[st]="$"+st;if(j=Function("binder","return function ("+joiny(at,",")+"){ return binder.apply(this,arguments); }")(d),a.prototype){var ct=function(){};ct.prototype=a.prototype,j.prototype=new ct,ct.prototype=null}return j},implementation=implementation$1,functionBind=Function.prototype.bind||implementation,call=Function.prototype.call,$hasOwn=Object.prototype.hasOwnProperty,bind$1=functionBind,hasown=bind$1.call(call,$hasOwn),undefined$1,$Error=esErrors,$EvalError=_eval,$RangeError=range,$ReferenceError=ref,$SyntaxError$1=syntax,$TypeError$2=type,$URIError=uri,$Function=Function,getEvalledConstructor=function(o){try{return $Function('"use strict"; return ('+o+").constructor;")()}catch{}},$gOPD$1=Object.getOwnPropertyDescriptor;if($gOPD$1)try{$gOPD$1({},"")}catch{$gOPD$1=null}var throwTypeError=function(){throw new $TypeError$2},ThrowTypeError=$gOPD$1?function(){try{return arguments.callee,throwTypeError}catch{try{return $gOPD$1(arguments,"callee").get}catch{return throwTypeError}}}():throwTypeError,hasSymbols=hasSymbols$1(),hasProto=hasProto$1(),getProto$1=Object.getPrototypeOf||(hasProto?function(o){return o.__proto__}:null),needsEval={},TypedArray=typeof Uint8Array>"u"||!getProto$1?undefined$1:getProto$1(Uint8Array),INTRINSICS={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?undefined$1:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?undefined$1:ArrayBuffer,"%ArrayIteratorPrototype%":hasSymbols&&getProto$1?getProto$1([][Symbol.iterator]()):undefined$1,"%AsyncFromSyncIteratorPrototype%":undefined$1,"%AsyncFunction%":needsEval,"%AsyncGenerator%":needsEval,"%AsyncGeneratorFunction%":needsEval,"%AsyncIteratorPrototype%":needsEval,"%Atomics%":typeof Atomics>"u"?undefined$1:Atomics,"%BigInt%":typeof BigInt>"u"?undefined$1:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?undefined$1:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?undefined$1:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?undefined$1:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":$Error,"%eval%":eval,"%EvalError%":$EvalError,"%Float32Array%":typeof Float32Array>"u"?undefined$1:Float32Array,"%Float64Array%":typeof Float64Array>"u"?undefined$1:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?undefined$1:FinalizationRegistry,"%Function%":$Function,"%GeneratorFunction%":needsEval,"%Int8Array%":typeof Int8Array>"u"?undefined$1:Int8Array,"%Int16Array%":typeof Int16Array>"u"?undefined$1:Int16Array,"%Int32Array%":typeof Int32Array>"u"?undefined$1:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":hasSymbols&&getProto$1?getProto$1(getProto$1([][Symbol.iterator]())):undefined$1,"%JSON%":typeof JSON=="object"?JSON:undefined$1,"%Map%":typeof Map>"u"?undefined$1:Map,"%MapIteratorPrototype%":typeof Map>"u"||!hasSymbols||!getProto$1?undefined$1:getProto$1(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?undefined$1:Promise,"%Proxy%":typeof Proxy>"u"?undefined$1:Proxy,"%RangeError%":$RangeError,"%ReferenceError%":$ReferenceError,"%Reflect%":typeof Reflect>"u"?undefined$1:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?undefined$1:Set,"%SetIteratorPrototype%":typeof Set>"u"||!hasSymbols||!getProto$1?undefined$1:getProto$1(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?undefined$1:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":hasSymbols&&getProto$1?getProto$1(""[Symbol.iterator]()):undefined$1,"%Symbol%":hasSymbols?Symbol:undefined$1,"%SyntaxError%":$SyntaxError$1,"%ThrowTypeError%":ThrowTypeError,"%TypedArray%":TypedArray,"%TypeError%":$TypeError$2,"%Uint8Array%":typeof Uint8Array>"u"?undefined$1:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?undefined$1:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?undefined$1:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?undefined$1:Uint32Array,"%URIError%":$URIError,"%WeakMap%":typeof WeakMap>"u"?undefined$1:WeakMap,"%WeakRef%":typeof WeakRef>"u"?undefined$1:WeakRef,"%WeakSet%":typeof WeakSet>"u"?undefined$1:WeakSet};if(getProto$1)try{null.error}catch(o){var errorProto=getProto$1(getProto$1(o));INTRINSICS["%Error.prototype%"]=errorProto}var doEval=function o(e){var a;if(e==="%AsyncFunction%")a=getEvalledConstructor("async function () {}");else if(e==="%GeneratorFunction%")a=getEvalledConstructor("function* () {}");else if(e==="%AsyncGeneratorFunction%")a=getEvalledConstructor("async function* () {}");else if(e==="%AsyncGenerator%"){var c=o("%AsyncGeneratorFunction%");c&&(a=c.prototype)}else if(e==="%AsyncIteratorPrototype%"){var j=o("%AsyncGenerator%");j&&getProto$1&&(a=getProto$1(j.prototype))}return INTRINSICS[e]=a,a},LEGACY_ALIASES={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},bind=functionBind,hasOwn=hasown,$concat=bind.call(Function.call,Array.prototype.concat),$spliceApply=bind.call(Function.apply,Array.prototype.splice),$replace=bind.call(Function.call,String.prototype.replace),$strSlice=bind.call(Function.call,String.prototype.slice),$exec=bind.call(Function.call,RegExp.prototype.exec),rePropName=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=function(e){var a=$strSlice(e,0,1),c=$strSlice(e,-1);if(a==="%"&&c!=="%")throw new $SyntaxError$1("invalid intrinsic syntax, expected closing `%`");if(c==="%"&&a!=="%")throw new $SyntaxError$1("invalid intrinsic syntax, expected opening `%`");var j=[];return $replace(e,rePropName,function(d,et,at,st){j[j.length]=at?$replace(st,reEscapeChar,"$1"):et||d}),j},getBaseIntrinsic=function(e,a){var c=e,j;if(hasOwn(LEGACY_ALIASES,c)&&(j=LEGACY_ALIASES[c],c="%"+j[0]+"%"),hasOwn(INTRINSICS,c)){var d=INTRINSICS[c];if(d===needsEval&&(d=doEval(c)),typeof d>"u"&&!a)throw new $TypeError$2("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:j,name:c,value:d}}throw new $SyntaxError$1("intrinsic "+e+" does not exist!")},getIntrinsic=function(e,a){if(typeof e!="string"||e.length===0)throw new $TypeError$2("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof a!="boolean")throw new $TypeError$2('"allowMissing" argument must be a boolean');if($exec(/^%?[^%]*%?$/,e)===null)throw new $SyntaxError$1("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var c=stringToPath(e),j=c.length>0?c[0]:"",d=getBaseIntrinsic("%"+j+"%",a),et=d.name,at=d.value,st=!1,ct=d.alias;ct&&(j=ct[0],$spliceApply(c,$concat([0,1],ct)));for(var ot=1,gt=!0;ot<c.length;ot+=1){var ft=c[ot],yt=$strSlice(ft,0,1),vt=$strSlice(ft,-1);if((yt==='"'||yt==="'"||yt==="`"||vt==='"'||vt==="'"||vt==="`")&&yt!==vt)throw new $SyntaxError$1("property names with quotes must have matching quotes");if((ft==="constructor"||!gt)&&(st=!0),j+="."+ft,et="%"+j+"%",hasOwn(INTRINSICS,et))at=INTRINSICS[et];else if(at!=null){if(!(ft in at)){if(!a)throw new $TypeError$2("base intrinsic for "+e+" exists, but the property is not available.");return}if($gOPD$1&&ot+1>=c.length){var rt=$gOPD$1(at,ft);gt=!!rt,gt&&"get"in rt&&!("originalValue"in rt.get)?at=rt.get:at=at[ft]}else gt=hasOwn(at,ft),at=at[ft];gt&&!st&&(INTRINSICS[et]=at)}}return at},callBind$2={exports:{}},esDefineProperty,hasRequiredEsDefineProperty;function requireEsDefineProperty(){if(hasRequiredEsDefineProperty)return esDefineProperty;hasRequiredEsDefineProperty=1;var o=getIntrinsic,e=o("%Object.defineProperty%",!0)||!1;if(e)try{e({},"a",{value:1})}catch{e=!1}return esDefineProperty=e,esDefineProperty}var GetIntrinsic$2=getIntrinsic,$gOPD=GetIntrinsic$2("%Object.getOwnPropertyDescriptor%",!0);if($gOPD)try{$gOPD([],"length")}catch{$gOPD=null}var gopd$1=$gOPD,$defineProperty$1=requireEsDefineProperty(),$SyntaxError=syntax,$TypeError$1=type,gopd=gopd$1,defineDataProperty=function(e,a,c){if(!e||typeof e!="object"&&typeof e!="function")throw new $TypeError$1("`obj` must be an object or a function`");if(typeof a!="string"&&typeof a!="symbol")throw new $TypeError$1("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new $TypeError$1("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new $TypeError$1("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new $TypeError$1("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new $TypeError$1("`loose`, if provided, must be a boolean");var j=arguments.length>3?arguments[3]:null,d=arguments.length>4?arguments[4]:null,et=arguments.length>5?arguments[5]:null,at=arguments.length>6?arguments[6]:!1,st=!!gopd&&gopd(e,a);if($defineProperty$1)$defineProperty$1(e,a,{configurable:et===null&&st?st.configurable:!et,enumerable:j===null&&st?st.enumerable:!j,value:c,writable:d===null&&st?st.writable:!d});else if(at||!j&&!d&&!et)e[a]=c;else throw new $SyntaxError("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},$defineProperty=requireEsDefineProperty(),hasPropertyDescriptors=function(){return!!$defineProperty};hasPropertyDescriptors.hasArrayLengthDefineBug=function(){if(!$defineProperty)return null;try{return $defineProperty([],"length",{value:1}).length!==1}catch{return!0}};var hasPropertyDescriptors_1=hasPropertyDescriptors,GetIntrinsic$1=getIntrinsic,define=defineDataProperty,hasDescriptors=hasPropertyDescriptors_1(),gOPD$1=gopd$1,$TypeError=type,$floor=GetIntrinsic$1("%Math.floor%"),setFunctionLength=function(e,a){if(typeof e!="function")throw new $TypeError("`fn` is not a function");if(typeof a!="number"||a<0||a>4294967295||$floor(a)!==a)throw new $TypeError("`length` must be a positive 32-bit integer");var c=arguments.length>2&&!!arguments[2],j=!0,d=!0;if("length"in e&&gOPD$1){var et=gOPD$1(e,"length");et&&!et.configurable&&(j=!1),et&&!et.writable&&(d=!1)}return(j||d||!c)&&(hasDescriptors?define(e,"length",a,!0,!0):define(e,"length",a)),e};(function(o){var e=functionBind,a=getIntrinsic,c=setFunctionLength,j=type,d=a("%Function.prototype.apply%"),et=a("%Function.prototype.call%"),at=a("%Reflect.apply%",!0)||e.call(et,d),st=requireEsDefineProperty(),ct=a("%Math.max%");o.exports=function(ft){if(typeof ft!="function")throw new j("a function is required");var yt=at(e,et,arguments);return c(yt,1+ct(0,ft.length-(arguments.length-1)),!0)};var ot=function(){return at(e,d,arguments)};st?st(o.exports,"apply",{value:ot}):o.exports.apply=ot})(callBind$2);var callBindExports=callBind$2.exports,GetIntrinsic=getIntrinsic,callBind$1=callBindExports,$indexOf$1=callBind$1(GetIntrinsic("String.prototype.indexOf")),callBound$2=function(e,a){var c=GetIntrinsic(e,!!a);return typeof c=="function"&&$indexOf$1(e,".prototype.")>-1?callBind$1(c):c},hasToStringTag$3=shams(),callBound$1=callBound$2,$toString$1=callBound$1("Object.prototype.toString"),isStandardArguments=function(e){return hasToStringTag$3&&e&&typeof e=="object"&&Symbol.toStringTag in e?!1:$toString$1(e)==="[object Arguments]"},isLegacyArguments=function(e){return isStandardArguments(e)?!0:e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&$toString$1(e)!=="[object Array]"&&$toString$1(e.callee)==="[object Function]"},supportsStandardArguments=function(){return isStandardArguments(arguments)}();isStandardArguments.isLegacyArguments=isLegacyArguments;var isArguments=supportsStandardArguments?isStandardArguments:isLegacyArguments,toStr$2=Object.prototype.toString,fnToStr$1=Function.prototype.toString,isFnRegex=/^\s*(?:function)?\*/,hasToStringTag$2=shams(),getProto=Object.getPrototypeOf,getGeneratorFunc=function(){if(!hasToStringTag$2)return!1;try{return Function("return function*() {}")()}catch{}},GeneratorFunction,isGeneratorFunction=function(e){if(typeof e!="function")return!1;if(isFnRegex.test(fnToStr$1.call(e)))return!0;if(!hasToStringTag$2){var a=toStr$2.call(e);return a==="[object GeneratorFunction]"}if(!getProto)return!1;if(typeof GeneratorFunction>"u"){var c=getGeneratorFunc();GeneratorFunction=c?getProto(c):!1}return getProto(e)===GeneratorFunction},fnToStr=Function.prototype.toString,reflectApply=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,badArrayLike,isCallableMarker;if(typeof reflectApply=="function"&&typeof Object.defineProperty=="function")try{badArrayLike=Object.defineProperty({},"length",{get:function(){throw isCallableMarker}}),isCallableMarker={},reflectApply(function(){throw 42},null,badArrayLike)}catch(o){o!==isCallableMarker&&(reflectApply=null)}else reflectApply=null;var constructorRegex=/^\s*class\b/,isES6ClassFn=function(e){try{var a=fnToStr.call(e);return constructorRegex.test(a)}catch{return!1}},tryFunctionObject=function(e){try{return isES6ClassFn(e)?!1:(fnToStr.call(e),!0)}catch{return!1}},toStr$1=Object.prototype.toString,objectClass="[object Object]",fnClass="[object Function]",genClass="[object GeneratorFunction]",ddaClass="[object HTMLAllCollection]",ddaClass2="[object HTML document.all class]",ddaClass3="[object HTMLCollection]",hasToStringTag$1=typeof Symbol=="function"&&!!Symbol.toStringTag,isIE68=!(0 in[,]),isDDA=function(){return!1};if(typeof document=="object"){var all=document.all;toStr$1.call(all)===toStr$1.call(document.all)&&(isDDA=function(e){if((isIE68||!e)&&(typeof e>"u"||typeof e=="object"))try{var a=toStr$1.call(e);return(a===ddaClass||a===ddaClass2||a===ddaClass3||a===objectClass)&&e("")==null}catch{}return!1})}var isCallable$1=reflectApply?function(e){if(isDDA(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;try{reflectApply(e,null,badArrayLike)}catch(a){if(a!==isCallableMarker)return!1}return!isES6ClassFn(e)&&tryFunctionObject(e)}:function(e){if(isDDA(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(hasToStringTag$1)return tryFunctionObject(e);if(isES6ClassFn(e))return!1;var a=toStr$1.call(e);return a!==fnClass&&a!==genClass&&!/^\[object HTML/.test(a)?!1:tryFunctionObject(e)},isCallable=isCallable$1,toStr=Object.prototype.toString,hasOwnProperty=Object.prototype.hasOwnProperty,forEachArray=function(e,a,c){for(var j=0,d=e.length;j<d;j++)hasOwnProperty.call(e,j)&&(c==null?a(e[j],j,e):a.call(c,e[j],j,e))},forEachString=function(e,a,c){for(var j=0,d=e.length;j<d;j++)c==null?a(e.charAt(j),j,e):a.call(c,e.charAt(j),j,e)},forEachObject=function(e,a,c){for(var j in e)hasOwnProperty.call(e,j)&&(c==null?a(e[j],j,e):a.call(c,e[j],j,e))},forEach$1=function(e,a,c){if(!isCallable(a))throw new TypeError("iterator must be a function");var j;arguments.length>=3&&(j=c),toStr.call(e)==="[object Array]"?forEachArray(e,a,j):typeof e=="string"?forEachString(e,a,j):forEachObject(e,a,j)},forEach_1=forEach$1,possibleTypedArrayNames=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"],possibleNames=possibleTypedArrayNames,g$1=typeof globalThis>"u"?commonjsGlobal:globalThis,availableTypedArrays$1=function(){for(var e=[],a=0;a<possibleNames.length;a++)typeof g$1[possibleNames[a]]=="function"&&(e[e.length]=possibleNames[a]);return e},forEach=forEach_1,availableTypedArrays=availableTypedArrays$1,callBind=callBindExports,callBound=callBound$2,gOPD=gopd$1,$toString=callBound("Object.prototype.toString"),hasToStringTag=shams(),g=typeof globalThis>"u"?commonjsGlobal:globalThis,typedArrays=availableTypedArrays(),$slice=callBound("String.prototype.slice"),getPrototypeOf=Object.getPrototypeOf,$indexOf=callBound("Array.prototype.indexOf",!0)||function(e,a){for(var c=0;c<e.length;c+=1)if(e[c]===a)return c;return-1},cache={__proto__:null};hasToStringTag&&gOPD&&getPrototypeOf?forEach(typedArrays,function(o){var e=new g[o];if(Symbol.toStringTag in e){var a=getPrototypeOf(e),c=gOPD(a,Symbol.toStringTag);if(!c){var j=getPrototypeOf(a);c=gOPD(j,Symbol.toStringTag)}cache["$"+o]=callBind(c.get)}}):forEach(typedArrays,function(o){var e=new g[o],a=e.slice||e.set;a&&(cache["$"+o]=callBind(a))});var tryTypedArrays=function(e){var a=!1;return forEach(cache,function(c,j){if(!a)try{"$"+c(e)===j&&(a=$slice(j,1))}catch{}}),a},trySlices=function(e){var a=!1;return forEach(cache,function(c,j){if(!a)try{c(e),a=$slice(j,1)}catch{}}),a},whichTypedArray$1=function(e){if(!e||typeof e!="object")return!1;if(!hasToStringTag){var a=$slice($toString(e),8,-1);return $indexOf(typedArrays,a)>-1?a:a!=="Object"?!1:trySlices(e)}return gOPD?tryTypedArrays(e):null},whichTypedArray=whichTypedArray$1,isTypedArray=function(e){return!!whichTypedArray(e)};(function(o){var e=isArguments,a=isGeneratorFunction,c=whichTypedArray$1,j=isTypedArray;function d(wr){return wr.call.bind(wr)}var et=typeof BigInt<"u",at=typeof Symbol<"u",st=d(Object.prototype.toString),ct=d(Number.prototype.valueOf),ot=d(String.prototype.valueOf),gt=d(Boolean.prototype.valueOf);if(et)var ft=d(BigInt.prototype.valueOf);if(at)var yt=d(Symbol.prototype.valueOf);function vt(wr,En){if(typeof wr!="object")return!1;try{return En(wr),!0}catch{return!1}}o.isArgumentsObject=e,o.isGeneratorFunction=a,o.isTypedArray=j;function rt(wr){return typeof Promise<"u"&&wr instanceof Promise||wr!==null&&typeof wr=="object"&&typeof wr.then=="function"&&typeof wr.catch=="function"}o.isPromise=rt;function bt(wr){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(wr):j(wr)||It(wr)}o.isArrayBufferView=bt;function ht(wr){return c(wr)==="Uint8Array"}o.isUint8Array=ht;function wt(wr){return c(wr)==="Uint8ClampedArray"}o.isUint8ClampedArray=wt;function At(wr){return c(wr)==="Uint16Array"}o.isUint16Array=At;function Ct(wr){return c(wr)==="Uint32Array"}o.isUint32Array=Ct;function dt(wr){return c(wr)==="Int8Array"}o.isInt8Array=dt;function Et(wr){return c(wr)==="Int16Array"}o.isInt16Array=Et;function Rt(wr){return c(wr)==="Int32Array"}o.isInt32Array=Rt;function Mt(wr){return c(wr)==="Float32Array"}o.isFloat32Array=Mt;function _t(wr){return c(wr)==="Float64Array"}o.isFloat64Array=_t;function kt(wr){return c(wr)==="BigInt64Array"}o.isBigInt64Array=kt;function nt(wr){return c(wr)==="BigUint64Array"}o.isBigUint64Array=nt;function s(wr){return st(wr)==="[object Map]"}s.working=typeof Map<"u"&&s(new Map);function b(wr){return typeof Map>"u"?!1:s.working?s(wr):wr instanceof Map}o.isMap=b;function $(wr){return st(wr)==="[object Set]"}$.working=typeof Set<"u"&&$(new Set);function _e(wr){return typeof Set>"u"?!1:$.working?$(wr):wr instanceof Set}o.isSet=_e;function it(wr){return st(wr)==="[object WeakMap]"}it.working=typeof WeakMap<"u"&&it(new WeakMap);function pt(wr){return typeof WeakMap>"u"?!1:it.working?it(wr):wr instanceof WeakMap}o.isWeakMap=pt;function mt(wr){return st(wr)==="[object WeakSet]"}mt.working=typeof WeakSet<"u"&&mt(new WeakSet);function lt(wr){return mt(wr)}o.isWeakSet=lt;function _(wr){return st(wr)==="[object ArrayBuffer]"}_.working=typeof ArrayBuffer<"u"&&_(new ArrayBuffer);function tt(wr){return typeof ArrayBuffer>"u"?!1:_.working?_(wr):wr instanceof ArrayBuffer}o.isArrayBuffer=tt;function Tt(wr){return st(wr)==="[object DataView]"}Tt.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&Tt(new DataView(new ArrayBuffer(1),0,1));function It(wr){return typeof DataView>"u"?!1:Tt.working?Tt(wr):wr instanceof DataView}o.isDataView=It;var Nt=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function Ut(wr){return st(wr)==="[object SharedArrayBuffer]"}function Gt(wr){return typeof Nt>"u"?!1:(typeof Ut.working>"u"&&(Ut.working=Ut(new Nt)),Ut.working?Ut(wr):wr instanceof Nt)}o.isSharedArrayBuffer=Gt;function Pt(wr){return st(wr)==="[object AsyncFunction]"}o.isAsyncFunction=Pt;function qt(wr){return st(wr)==="[object Map Iterator]"}o.isMapIterator=qt;function Kt(wr){return st(wr)==="[object Set Iterator]"}o.isSetIterator=Kt;function jt(wr){return st(wr)==="[object Generator]"}o.isGeneratorObject=jt;function Ht(wr){return st(wr)==="[object WebAssembly.Module]"}o.isWebAssemblyCompiledModule=Ht;function Bt(wr){return vt(wr,ct)}o.isNumberObject=Bt;function Jt(wr){return vt(wr,ot)}o.isStringObject=Jt;function sr(wr){return vt(wr,gt)}o.isBooleanObject=sr;function hr(wr){return et&&vt(wr,ft)}o.isBigIntObject=hr;function Ar(wr){return at&&vt(wr,yt)}o.isSymbolObject=Ar;function gn(wr){return Bt(wr)||Jt(wr)||sr(wr)||hr(wr)||Ar(wr)}o.isBoxedPrimitive=gn;function Lr(wr){return typeof Uint8Array<"u"&&(tt(wr)||Gt(wr))}o.isAnyArrayBuffer=Lr,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(wr){Object.defineProperty(o,wr,{enumerable:!1,value:function(){throw new Error(wr+" is not supported in userland")}})})})(types$3);var isBufferBrowser=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"};(function(o){var e={},a=Object.getOwnPropertyDescriptors||function(Nt){for(var Ut=Object.keys(Nt),Gt={},Pt=0;Pt<Ut.length;Pt++)Gt[Ut[Pt]]=Object.getOwnPropertyDescriptor(Nt,Ut[Pt]);return Gt},c=/%[sdj%]/g;o.format=function(It){if(!Et(It)){for(var Nt=[],Ut=0;Ut<arguments.length;Ut++)Nt.push(at(arguments[Ut]));return Nt.join(" ")}for(var Ut=1,Gt=arguments,Pt=Gt.length,qt=String(It).replace(c,function(jt){if(jt==="%%")return"%";if(Ut>=Pt)return jt;switch(jt){case"%s":return String(Gt[Ut++]);case"%d":return Number(Gt[Ut++]);case"%j":try{return JSON.stringify(Gt[Ut++])}catch{return"[Circular]"}default:return jt}}),Kt=Gt[Ut];Ut<Pt;Kt=Gt[++Ut])At(Kt)||!kt(Kt)?qt+=" "+Kt:qt+=" "+at(Kt);return qt},o.deprecate=function(It,Nt){if(typeof process$1<"u"&&process$1.noDeprecation===!0)return It;if(typeof process$1>"u")return function(){return o.deprecate(It,Nt).apply(this,arguments)};var Ut=!1;function Gt(){if(!Ut){if(process$1.throwDeprecation)throw new Error(Nt);process$1.traceDeprecation?console.trace(Nt):console.error(Nt),Ut=!0}return It.apply(this,arguments)}return Gt};var j={},d=/^$/;if(e.NODE_DEBUG){var et=e.NODE_DEBUG;et=et.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),d=new RegExp("^"+et+"$","i")}o.debuglog=function(It){if(It=It.toUpperCase(),!j[It])if(d.test(It)){var Nt=process$1.pid;j[It]=function(){var Ut=o.format.apply(o,arguments);console.error("%s %d: %s",It,Nt,Ut)}}else j[It]=function(){};return j[It]};function at(It,Nt){var Ut={seen:[],stylize:ct};return arguments.length>=3&&(Ut.depth=arguments[2]),arguments.length>=4&&(Ut.colors=arguments[3]),wt(Nt)?Ut.showHidden=Nt:Nt&&o._extend(Ut,Nt),Mt(Ut.showHidden)&&(Ut.showHidden=!1),Mt(Ut.depth)&&(Ut.depth=2),Mt(Ut.colors)&&(Ut.colors=!1),Mt(Ut.customInspect)&&(Ut.customInspect=!0),Ut.colors&&(Ut.stylize=st),gt(Ut,It,Ut.depth)}o.inspect=at,at.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},at.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function st(It,Nt){var Ut=at.styles[Nt];return Ut?"\x1B["+at.colors[Ut][0]+"m"+It+"\x1B["+at.colors[Ut][1]+"m":It}function ct(It,Nt){return It}function ot(It){var Nt={};return It.forEach(function(Ut,Gt){Nt[Ut]=!0}),Nt}function gt(It,Nt,Ut){if(It.customInspect&&Nt&&b(Nt.inspect)&&Nt.inspect!==o.inspect&&!(Nt.constructor&&Nt.constructor.prototype===Nt)){var Gt=Nt.inspect(Ut,It);return Et(Gt)||(Gt=gt(It,Gt,Ut)),Gt}var Pt=ft(It,Nt);if(Pt)return Pt;var qt=Object.keys(Nt),Kt=ot(qt);if(It.showHidden&&(qt=Object.getOwnPropertyNames(Nt)),s(Nt)&&(qt.indexOf("message")>=0||qt.indexOf("description")>=0))return yt(Nt);if(qt.length===0){if(b(Nt)){var jt=Nt.name?": "+Nt.name:"";return It.stylize("[Function"+jt+"]","special")}if(_t(Nt))return It.stylize(RegExp.prototype.toString.call(Nt),"regexp");if(nt(Nt))return It.stylize(Date.prototype.toString.call(Nt),"date");if(s(Nt))return yt(Nt)}var Ht="",Bt=!1,Jt=["{","}"];if(ht(Nt)&&(Bt=!0,Jt=["[","]"]),b(Nt)){var sr=Nt.name?": "+Nt.name:"";Ht=" [Function"+sr+"]"}if(_t(Nt)&&(Ht=" "+RegExp.prototype.toString.call(Nt)),nt(Nt)&&(Ht=" "+Date.prototype.toUTCString.call(Nt)),s(Nt)&&(Ht=" "+yt(Nt)),qt.length===0&&(!Bt||Nt.length==0))return Jt[0]+Ht+Jt[1];if(Ut<0)return _t(Nt)?It.stylize(RegExp.prototype.toString.call(Nt),"regexp"):It.stylize("[Object]","special");It.seen.push(Nt);var hr;return Bt?hr=vt(It,Nt,Ut,Kt,qt):hr=qt.map(function(Ar){return rt(It,Nt,Ut,Kt,Ar,Bt)}),It.seen.pop(),bt(hr,Ht,Jt)}function ft(It,Nt){if(Mt(Nt))return It.stylize("undefined","undefined");if(Et(Nt)){var Ut="'"+JSON.stringify(Nt).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return It.stylize(Ut,"string")}if(dt(Nt))return It.stylize(""+Nt,"number");if(wt(Nt))return It.stylize(""+Nt,"boolean");if(At(Nt))return It.stylize("null","null")}function yt(It){return"["+Error.prototype.toString.call(It)+"]"}function vt(It,Nt,Ut,Gt,Pt){for(var qt=[],Kt=0,jt=Nt.length;Kt<jt;++Kt)lt(Nt,String(Kt))?qt.push(rt(It,Nt,Ut,Gt,String(Kt),!0)):qt.push("");return Pt.forEach(function(Ht){Ht.match(/^\d+$/)||qt.push(rt(It,Nt,Ut,Gt,Ht,!0))}),qt}function rt(It,Nt,Ut,Gt,Pt,qt){var Kt,jt,Ht;if(Ht=Object.getOwnPropertyDescriptor(Nt,Pt)||{value:Nt[Pt]},Ht.get?Ht.set?jt=It.stylize("[Getter/Setter]","special"):jt=It.stylize("[Getter]","special"):Ht.set&&(jt=It.stylize("[Setter]","special")),lt(Gt,Pt)||(Kt="["+Pt+"]"),jt||(It.seen.indexOf(Ht.value)<0?(At(Ut)?jt=gt(It,Ht.value,null):jt=gt(It,Ht.value,Ut-1),jt.indexOf(`
`)>-1&&(qt?jt=jt.split(`
`).map(function(Bt){return"  "+Bt}).join(`
`).slice(2):jt=`
`+jt.split(`
`).map(function(Bt){return"   "+Bt}).join(`
`))):jt=It.stylize("[Circular]","special")),Mt(Kt)){if(qt&&Pt.match(/^\d+$/))return jt;Kt=JSON.stringify(""+Pt),Kt.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Kt=Kt.slice(1,-1),Kt=It.stylize(Kt,"name")):(Kt=Kt.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),Kt=It.stylize(Kt,"string"))}return Kt+": "+jt}function bt(It,Nt,Ut){var Gt=It.reduce(function(Pt,qt){return qt.indexOf(`
`)>=0,Pt+qt.replace(/\u001b\[\d\d?m/g,"").length+1},0);return Gt>60?Ut[0]+(Nt===""?"":Nt+`
 `)+" "+It.join(`,
  `)+" "+Ut[1]:Ut[0]+Nt+" "+It.join(", ")+" "+Ut[1]}o.types=types$3;function ht(It){return Array.isArray(It)}o.isArray=ht;function wt(It){return typeof It=="boolean"}o.isBoolean=wt;function At(It){return It===null}o.isNull=At;function Ct(It){return It==null}o.isNullOrUndefined=Ct;function dt(It){return typeof It=="number"}o.isNumber=dt;function Et(It){return typeof It=="string"}o.isString=Et;function Rt(It){return typeof It=="symbol"}o.isSymbol=Rt;function Mt(It){return It===void 0}o.isUndefined=Mt;function _t(It){return kt(It)&&_e(It)==="[object RegExp]"}o.isRegExp=_t,o.types.isRegExp=_t;function kt(It){return typeof It=="object"&&It!==null}o.isObject=kt;function nt(It){return kt(It)&&_e(It)==="[object Date]"}o.isDate=nt,o.types.isDate=nt;function s(It){return kt(It)&&(_e(It)==="[object Error]"||It instanceof Error)}o.isError=s,o.types.isNativeError=s;function b(It){return typeof It=="function"}o.isFunction=b;function $(It){return It===null||typeof It=="boolean"||typeof It=="number"||typeof It=="string"||typeof It=="symbol"||typeof It>"u"}o.isPrimitive=$,o.isBuffer=isBufferBrowser;function _e(It){return Object.prototype.toString.call(It)}function it(It){return It<10?"0"+It.toString(10):It.toString(10)}var pt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function mt(){var It=new Date,Nt=[it(It.getHours()),it(It.getMinutes()),it(It.getSeconds())].join(":");return[It.getDate(),pt[It.getMonth()],Nt].join(" ")}o.log=function(){console.log("%s - %s",mt(),o.format.apply(o,arguments))},o.inherits=requireInherits_browser(),o._extend=function(It,Nt){if(!Nt||!kt(Nt))return It;for(var Ut=Object.keys(Nt),Gt=Ut.length;Gt--;)It[Ut[Gt]]=Nt[Ut[Gt]];return It};function lt(It,Nt){return Object.prototype.hasOwnProperty.call(It,Nt)}var _=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;o.promisify=function(Nt){if(typeof Nt!="function")throw new TypeError('The "original" argument must be of type Function');if(_&&Nt[_]){var Ut=Nt[_];if(typeof Ut!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(Ut,_,{value:Ut,enumerable:!1,writable:!1,configurable:!0}),Ut}function Ut(){for(var Gt,Pt,qt=new Promise(function(Ht,Bt){Gt=Ht,Pt=Bt}),Kt=[],jt=0;jt<arguments.length;jt++)Kt.push(arguments[jt]);Kt.push(function(Ht,Bt){Ht?Pt(Ht):Gt(Bt)});try{Nt.apply(this,Kt)}catch(Ht){Pt(Ht)}return qt}return Object.setPrototypeOf(Ut,Object.getPrototypeOf(Nt)),_&&Object.defineProperty(Ut,_,{value:Ut,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(Ut,a(Nt))},o.promisify.custom=_;function tt(It,Nt){if(!It){var Ut=new Error("Promise was rejected with a falsy value");Ut.reason=It,It=Ut}return Nt(It)}function Tt(It){if(typeof It!="function")throw new TypeError('The "original" argument must be of type Function');function Nt(){for(var Ut=[],Gt=0;Gt<arguments.length;Gt++)Ut.push(arguments[Gt]);var Pt=Ut.pop();if(typeof Pt!="function")throw new TypeError("The last argument must be of type Function");var qt=this,Kt=function(){return Pt.apply(qt,arguments)};It.apply(this,Ut).then(function(jt){process$1.nextTick(Kt.bind(null,null,jt))},function(jt){process$1.nextTick(tt.bind(null,jt,Kt))})}return Object.setPrototypeOf(Nt,Object.getPrototypeOf(It)),Object.defineProperties(Nt,a(It)),Nt}o.callbackify=Tt})(util$8);var buffer_list,hasRequiredBuffer_list;function requireBuffer_list(){if(hasRequiredBuffer_list)return buffer_list;hasRequiredBuffer_list=1;function o(vt,rt){var bt=Object.keys(vt);if(Object.getOwnPropertySymbols){var ht=Object.getOwnPropertySymbols(vt);rt&&(ht=ht.filter(function(wt){return Object.getOwnPropertyDescriptor(vt,wt).enumerable})),bt.push.apply(bt,ht)}return bt}function e(vt){for(var rt=1;rt<arguments.length;rt++){var bt=arguments[rt]!=null?arguments[rt]:{};rt%2?o(Object(bt),!0).forEach(function(ht){a(vt,ht,bt[ht])}):Object.getOwnPropertyDescriptors?Object.defineProperties(vt,Object.getOwnPropertyDescriptors(bt)):o(Object(bt)).forEach(function(ht){Object.defineProperty(vt,ht,Object.getOwnPropertyDescriptor(bt,ht))})}return vt}function a(vt,rt,bt){return rt=et(rt),rt in vt?Object.defineProperty(vt,rt,{value:bt,enumerable:!0,configurable:!0,writable:!0}):vt[rt]=bt,vt}function c(vt,rt){if(!(vt instanceof rt))throw new TypeError("Cannot call a class as a function")}function j(vt,rt){for(var bt=0;bt<rt.length;bt++){var ht=rt[bt];ht.enumerable=ht.enumerable||!1,ht.configurable=!0,"value"in ht&&(ht.writable=!0),Object.defineProperty(vt,et(ht.key),ht)}}function d(vt,rt,bt){return rt&&j(vt.prototype,rt),Object.defineProperty(vt,"prototype",{writable:!1}),vt}function et(vt){var rt=at(vt,"string");return typeof rt=="symbol"?rt:String(rt)}function at(vt,rt){if(typeof vt!="object"||vt===null)return vt;var bt=vt[Symbol.toPrimitive];if(bt!==void 0){var ht=bt.call(vt,rt||"default");if(typeof ht!="object")return ht;throw new TypeError("@@toPrimitive must return a primitive value.")}return(rt==="string"?String:Number)(vt)}var st=require$$1$2,ct=st.Buffer,ot=util$8,gt=ot.inspect,ft=gt&&gt.custom||"inspect";function yt(vt,rt,bt){ct.prototype.copy.call(vt,rt,bt)}return buffer_list=function(){function vt(){c(this,vt),this.head=null,this.tail=null,this.length=0}return d(vt,[{key:"push",value:function(bt){var ht={data:bt,next:null};this.length>0?this.tail.next=ht:this.head=ht,this.tail=ht,++this.length}},{key:"unshift",value:function(bt){var ht={data:bt,next:this.head};this.length===0&&(this.tail=ht),this.head=ht,++this.length}},{key:"shift",value:function(){if(this.length!==0){var bt=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,bt}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(bt){if(this.length===0)return"";for(var ht=this.head,wt=""+ht.data;ht=ht.next;)wt+=bt+ht.data;return wt}},{key:"concat",value:function(bt){if(this.length===0)return ct.alloc(0);for(var ht=ct.allocUnsafe(bt>>>0),wt=this.head,At=0;wt;)yt(wt.data,ht,At),At+=wt.data.length,wt=wt.next;return ht}},{key:"consume",value:function(bt,ht){var wt;return bt<this.head.data.length?(wt=this.head.data.slice(0,bt),this.head.data=this.head.data.slice(bt)):bt===this.head.data.length?wt=this.shift():wt=ht?this._getString(bt):this._getBuffer(bt),wt}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(bt){var ht=this.head,wt=1,At=ht.data;for(bt-=At.length;ht=ht.next;){var Ct=ht.data,dt=bt>Ct.length?Ct.length:bt;if(dt===Ct.length?At+=Ct:At+=Ct.slice(0,bt),bt-=dt,bt===0){dt===Ct.length?(++wt,ht.next?this.head=ht.next:this.head=this.tail=null):(this.head=ht,ht.data=Ct.slice(dt));break}++wt}return this.length-=wt,At}},{key:"_getBuffer",value:function(bt){var ht=ct.allocUnsafe(bt),wt=this.head,At=1;for(wt.data.copy(ht),bt-=wt.data.length;wt=wt.next;){var Ct=wt.data,dt=bt>Ct.length?Ct.length:bt;if(Ct.copy(ht,ht.length-bt,0,dt),bt-=dt,bt===0){dt===Ct.length?(++At,wt.next?this.head=wt.next:this.head=this.tail=null):(this.head=wt,wt.data=Ct.slice(dt));break}++At}return this.length-=At,ht}},{key:ft,value:function(bt,ht){return gt(this,e(e({},ht),{},{depth:0,customInspect:!1}))}}]),vt}(),buffer_list}var destroy_1$1,hasRequiredDestroy$1;function requireDestroy$1(){if(hasRequiredDestroy$1)return destroy_1$1;hasRequiredDestroy$1=1;function o(et,at){var st=this,ct=this._readableState&&this._readableState.destroyed,ot=this._writableState&&this._writableState.destroyed;return ct||ot?(at?at(et):et&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process$1.nextTick(j,this,et)):process$1.nextTick(j,this,et)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(et||null,function(gt){!at&&gt?st._writableState?st._writableState.errorEmitted?process$1.nextTick(a,st):(st._writableState.errorEmitted=!0,process$1.nextTick(e,st,gt)):process$1.nextTick(e,st,gt):at?(process$1.nextTick(a,st),at(gt)):process$1.nextTick(a,st)}),this)}function e(et,at){j(et,at),a(et)}function a(et){et._writableState&&!et._writableState.emitClose||et._readableState&&!et._readableState.emitClose||et.emit("close")}function c(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function j(et,at){et.emit("error",at)}function d(et,at){var st=et._readableState,ct=et._writableState;st&&st.autoDestroy||ct&&ct.autoDestroy?et.destroy(at):et.emit("error",at)}return destroy_1$1={destroy:o,undestroy:c,errorOrDestroy:d},destroy_1$1}var errorsBrowser={},hasRequiredErrorsBrowser;function requireErrorsBrowser(){if(hasRequiredErrorsBrowser)return errorsBrowser;hasRequiredErrorsBrowser=1;function o(at,st){at.prototype=Object.create(st.prototype),at.prototype.constructor=at,at.__proto__=st}var e={};function a(at,st,ct){ct||(ct=Error);function ot(ft,yt,vt){return typeof st=="string"?st:st(ft,yt,vt)}var gt=function(ft){o(yt,ft);function yt(vt,rt,bt){return ft.call(this,ot(vt,rt,bt))||this}return yt}(ct);gt.prototype.name=ct.name,gt.prototype.code=at,e[at]=gt}function c(at,st){if(Array.isArray(at)){var ct=at.length;return at=at.map(function(ot){return String(ot)}),ct>2?"one of ".concat(st," ").concat(at.slice(0,ct-1).join(", "),", or ")+at[ct-1]:ct===2?"one of ".concat(st," ").concat(at[0]," or ").concat(at[1]):"of ".concat(st," ").concat(at[0])}else return"of ".concat(st," ").concat(String(at))}function j(at,st,ct){return at.substr(0,st.length)===st}function d(at,st,ct){return(ct===void 0||ct>at.length)&&(ct=at.length),at.substring(ct-st.length,ct)===st}function et(at,st,ct){return typeof ct!="number"&&(ct=0),ct+st.length>at.length?!1:at.indexOf(st,ct)!==-1}return a("ERR_INVALID_OPT_VALUE",function(at,st){return'The value "'+st+'" is invalid for option "'+at+'"'},TypeError),a("ERR_INVALID_ARG_TYPE",function(at,st,ct){var ot;typeof st=="string"&&j(st,"not ")?(ot="must not be",st=st.replace(/^not /,"")):ot="must be";var gt;if(d(at," argument"))gt="The ".concat(at," ").concat(ot," ").concat(c(st,"type"));else{var ft=et(at,".")?"property":"argument";gt='The "'.concat(at,'" ').concat(ft," ").concat(ot," ").concat(c(st,"type"))}return gt+=". Received type ".concat(typeof ct),gt},TypeError),a("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),a("ERR_METHOD_NOT_IMPLEMENTED",function(at){return"The "+at+" method is not implemented"}),a("ERR_STREAM_PREMATURE_CLOSE","Premature close"),a("ERR_STREAM_DESTROYED",function(at){return"Cannot call "+at+" after a stream was destroyed"}),a("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),a("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),a("ERR_STREAM_WRITE_AFTER_END","write after end"),a("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),a("ERR_UNKNOWN_ENCODING",function(at){return"Unknown encoding: "+at},TypeError),a("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),errorsBrowser.codes=e,errorsBrowser}var state$1,hasRequiredState;function requireState(){if(hasRequiredState)return state$1;hasRequiredState=1;var o=requireErrorsBrowser().codes.ERR_INVALID_OPT_VALUE;function e(c,j,d){return c.highWaterMark!=null?c.highWaterMark:j?c[d]:null}function a(c,j,d,et){var at=e(j,et,d);if(at!=null){if(!(isFinite(at)&&Math.floor(at)===at)||at<0){var st=et?d:"highWaterMark";throw new o(st,at)}return Math.floor(at)}return c.objectMode?16:16*1024}return state$1={getHighWaterMark:a},state$1}var browser$c,hasRequiredBrowser$a;function requireBrowser$a(){if(hasRequiredBrowser$a)return browser$c;hasRequiredBrowser$a=1,browser$c=o;function o(a,c){if(e("noDeprecation"))return a;var j=!1;function d(){if(!j){if(e("throwDeprecation"))throw new Error(c);e("traceDeprecation")?console.trace(c):console.warn(c),j=!0}return a.apply(this,arguments)}return d}function e(a){try{if(!commonjsGlobal.localStorage)return!1}catch{return!1}var c=commonjsGlobal.localStorage[a];return c==null?!1:String(c).toLowerCase()==="true"}return browser$c}var _stream_writable$1,hasRequired_stream_writable$1;function require_stream_writable$1(){if(hasRequired_stream_writable$1)return _stream_writable$1;hasRequired_stream_writable$1=1,_stream_writable$1=Mt;function o(Gt){var Pt=this;this.next=null,this.entry=null,this.finish=function(){Ut(Pt,Gt)}}var e;Mt.WritableState=Et;var a={deprecate:requireBrowser$a()},c=requireStreamBrowser$1(),j=require$$1$2.Buffer,d=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function et(Gt){return j.from(Gt)}function at(Gt){return j.isBuffer(Gt)||Gt instanceof d}var st=requireDestroy$1(),ct=requireState(),ot=ct.getHighWaterMark,gt=requireErrorsBrowser().codes,ft=gt.ERR_INVALID_ARG_TYPE,yt=gt.ERR_METHOD_NOT_IMPLEMENTED,vt=gt.ERR_MULTIPLE_CALLBACK,rt=gt.ERR_STREAM_CANNOT_PIPE,bt=gt.ERR_STREAM_DESTROYED,ht=gt.ERR_STREAM_NULL_VALUES,wt=gt.ERR_STREAM_WRITE_AFTER_END,At=gt.ERR_UNKNOWN_ENCODING,Ct=st.errorOrDestroy;requireInherits_browser()(Mt,c);function dt(){}function Et(Gt,Pt,qt){e=e||require_stream_duplex$1(),Gt=Gt||{},typeof qt!="boolean"&&(qt=Pt instanceof e),this.objectMode=!!Gt.objectMode,qt&&(this.objectMode=this.objectMode||!!Gt.writableObjectMode),this.highWaterMark=ot(this,Gt,"writableHighWaterMark",qt),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Kt=Gt.decodeStrings===!1;this.decodeStrings=!Kt,this.defaultEncoding=Gt.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(jt){it(Pt,jt)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=Gt.emitClose!==!1,this.autoDestroy=!!Gt.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}Et.prototype.getBuffer=function(){for(var Pt=this.bufferedRequest,qt=[];Pt;)qt.push(Pt),Pt=Pt.next;return qt},function(){try{Object.defineProperty(Et.prototype,"buffer",{get:a.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var Rt;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Rt=Function.prototype[Symbol.hasInstance],Object.defineProperty(Mt,Symbol.hasInstance,{value:function(Pt){return Rt.call(this,Pt)?!0:this!==Mt?!1:Pt&&Pt._writableState instanceof Et}})):Rt=function(Pt){return Pt instanceof this};function Mt(Gt){e=e||require_stream_duplex$1();var Pt=this instanceof e;if(!Pt&&!Rt.call(Mt,this))return new Mt(Gt);this._writableState=new Et(Gt,this,Pt),this.writable=!0,Gt&&(typeof Gt.write=="function"&&(this._write=Gt.write),typeof Gt.writev=="function"&&(this._writev=Gt.writev),typeof Gt.destroy=="function"&&(this._destroy=Gt.destroy),typeof Gt.final=="function"&&(this._final=Gt.final)),c.call(this)}Mt.prototype.pipe=function(){Ct(this,new rt)};function _t(Gt,Pt){var qt=new wt;Ct(Gt,qt),process$1.nextTick(Pt,qt)}function kt(Gt,Pt,qt,Kt){var jt;return qt===null?jt=new ht:typeof qt!="string"&&!Pt.objectMode&&(jt=new ft("chunk",["string","Buffer"],qt)),jt?(Ct(Gt,jt),process$1.nextTick(Kt,jt),!1):!0}Mt.prototype.write=function(Gt,Pt,qt){var Kt=this._writableState,jt=!1,Ht=!Kt.objectMode&&at(Gt);return Ht&&!j.isBuffer(Gt)&&(Gt=et(Gt)),typeof Pt=="function"&&(qt=Pt,Pt=null),Ht?Pt="buffer":Pt||(Pt=Kt.defaultEncoding),typeof qt!="function"&&(qt=dt),Kt.ending?_t(this,qt):(Ht||kt(this,Kt,Gt,qt))&&(Kt.pendingcb++,jt=s(this,Kt,Ht,Gt,Pt,qt)),jt},Mt.prototype.cork=function(){this._writableState.corked++},Mt.prototype.uncork=function(){var Gt=this._writableState;Gt.corked&&(Gt.corked--,!Gt.writing&&!Gt.corked&&!Gt.bufferProcessing&&Gt.bufferedRequest&&lt(this,Gt))},Mt.prototype.setDefaultEncoding=function(Pt){if(typeof Pt=="string"&&(Pt=Pt.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((Pt+"").toLowerCase())>-1))throw new At(Pt);return this._writableState.defaultEncoding=Pt,this},Object.defineProperty(Mt.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function nt(Gt,Pt,qt){return!Gt.objectMode&&Gt.decodeStrings!==!1&&typeof Pt=="string"&&(Pt=j.from(Pt,qt)),Pt}Object.defineProperty(Mt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function s(Gt,Pt,qt,Kt,jt,Ht){if(!qt){var Bt=nt(Pt,Kt,jt);Kt!==Bt&&(qt=!0,jt="buffer",Kt=Bt)}var Jt=Pt.objectMode?1:Kt.length;Pt.length+=Jt;var sr=Pt.length<Pt.highWaterMark;if(sr||(Pt.needDrain=!0),Pt.writing||Pt.corked){var hr=Pt.lastBufferedRequest;Pt.lastBufferedRequest={chunk:Kt,encoding:jt,isBuf:qt,callback:Ht,next:null},hr?hr.next=Pt.lastBufferedRequest:Pt.bufferedRequest=Pt.lastBufferedRequest,Pt.bufferedRequestCount+=1}else b(Gt,Pt,!1,Jt,Kt,jt,Ht);return sr}function b(Gt,Pt,qt,Kt,jt,Ht,Bt){Pt.writelen=Kt,Pt.writecb=Bt,Pt.writing=!0,Pt.sync=!0,Pt.destroyed?Pt.onwrite(new bt("write")):qt?Gt._writev(jt,Pt.onwrite):Gt._write(jt,Ht,Pt.onwrite),Pt.sync=!1}function $(Gt,Pt,qt,Kt,jt){--Pt.pendingcb,qt?(process$1.nextTick(jt,Kt),process$1.nextTick(It,Gt,Pt),Gt._writableState.errorEmitted=!0,Ct(Gt,Kt)):(jt(Kt),Gt._writableState.errorEmitted=!0,Ct(Gt,Kt),It(Gt,Pt))}function _e(Gt){Gt.writing=!1,Gt.writecb=null,Gt.length-=Gt.writelen,Gt.writelen=0}function it(Gt,Pt){var qt=Gt._writableState,Kt=qt.sync,jt=qt.writecb;if(typeof jt!="function")throw new vt;if(_e(qt),Pt)$(Gt,qt,Kt,Pt,jt);else{var Ht=_(qt)||Gt.destroyed;!Ht&&!qt.corked&&!qt.bufferProcessing&&qt.bufferedRequest&&lt(Gt,qt),Kt?process$1.nextTick(pt,Gt,qt,Ht,jt):pt(Gt,qt,Ht,jt)}}function pt(Gt,Pt,qt,Kt){qt||mt(Gt,Pt),Pt.pendingcb--,Kt(),It(Gt,Pt)}function mt(Gt,Pt){Pt.length===0&&Pt.needDrain&&(Pt.needDrain=!1,Gt.emit("drain"))}function lt(Gt,Pt){Pt.bufferProcessing=!0;var qt=Pt.bufferedRequest;if(Gt._writev&&qt&&qt.next){var Kt=Pt.bufferedRequestCount,jt=new Array(Kt),Ht=Pt.corkedRequestsFree;Ht.entry=qt;for(var Bt=0,Jt=!0;qt;)jt[Bt]=qt,qt.isBuf||(Jt=!1),qt=qt.next,Bt+=1;jt.allBuffers=Jt,b(Gt,Pt,!0,Pt.length,jt,"",Ht.finish),Pt.pendingcb++,Pt.lastBufferedRequest=null,Ht.next?(Pt.corkedRequestsFree=Ht.next,Ht.next=null):Pt.corkedRequestsFree=new o(Pt),Pt.bufferedRequestCount=0}else{for(;qt;){var sr=qt.chunk,hr=qt.encoding,Ar=qt.callback,gn=Pt.objectMode?1:sr.length;if(b(Gt,Pt,!1,gn,sr,hr,Ar),qt=qt.next,Pt.bufferedRequestCount--,Pt.writing)break}qt===null&&(Pt.lastBufferedRequest=null)}Pt.bufferedRequest=qt,Pt.bufferProcessing=!1}Mt.prototype._write=function(Gt,Pt,qt){qt(new yt("_write()"))},Mt.prototype._writev=null,Mt.prototype.end=function(Gt,Pt,qt){var Kt=this._writableState;return typeof Gt=="function"?(qt=Gt,Gt=null,Pt=null):typeof Pt=="function"&&(qt=Pt,Pt=null),Gt!=null&&this.write(Gt,Pt),Kt.corked&&(Kt.corked=1,this.uncork()),Kt.ending||Nt(this,Kt,qt),this},Object.defineProperty(Mt.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function _(Gt){return Gt.ending&&Gt.length===0&&Gt.bufferedRequest===null&&!Gt.finished&&!Gt.writing}function tt(Gt,Pt){Gt._final(function(qt){Pt.pendingcb--,qt&&Ct(Gt,qt),Pt.prefinished=!0,Gt.emit("prefinish"),It(Gt,Pt)})}function Tt(Gt,Pt){!Pt.prefinished&&!Pt.finalCalled&&(typeof Gt._final=="function"&&!Pt.destroyed?(Pt.pendingcb++,Pt.finalCalled=!0,process$1.nextTick(tt,Gt,Pt)):(Pt.prefinished=!0,Gt.emit("prefinish")))}function It(Gt,Pt){var qt=_(Pt);if(qt&&(Tt(Gt,Pt),Pt.pendingcb===0&&(Pt.finished=!0,Gt.emit("finish"),Pt.autoDestroy))){var Kt=Gt._readableState;(!Kt||Kt.autoDestroy&&Kt.endEmitted)&&Gt.destroy()}return qt}function Nt(Gt,Pt,qt){Pt.ending=!0,It(Gt,Pt),qt&&(Pt.finished?process$1.nextTick(qt):Gt.once("finish",qt)),Pt.ended=!0,Gt.writable=!1}function Ut(Gt,Pt,qt){var Kt=Gt.entry;for(Gt.entry=null;Kt;){var jt=Kt.callback;Pt.pendingcb--,jt(qt),Kt=Kt.next}Pt.corkedRequestsFree.next=Gt}return Object.defineProperty(Mt.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(Pt){this._writableState&&(this._writableState.destroyed=Pt)}}),Mt.prototype.destroy=st.destroy,Mt.prototype._undestroy=st.undestroy,Mt.prototype._destroy=function(Gt,Pt){Pt(Gt)},_stream_writable$1}var _stream_duplex$1,hasRequired_stream_duplex$1;function require_stream_duplex$1(){if(hasRequired_stream_duplex$1)return _stream_duplex$1;hasRequired_stream_duplex$1=1;var o=Object.keys||function(ct){var ot=[];for(var gt in ct)ot.push(gt);return ot};_stream_duplex$1=et;var e=require_stream_readable$1(),a=require_stream_writable$1();requireInherits_browser()(et,e);for(var c=o(a.prototype),j=0;j<c.length;j++){var d=c[j];et.prototype[d]||(et.prototype[d]=a.prototype[d])}function et(ct){if(!(this instanceof et))return new et(ct);e.call(this,ct),a.call(this,ct),this.allowHalfOpen=!0,ct&&(ct.readable===!1&&(this.readable=!1),ct.writable===!1&&(this.writable=!1),ct.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",at)))}Object.defineProperty(et.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(et.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(et.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function at(){this._writableState.ended||process$1.nextTick(st,this)}function st(ct){ct.end()}return Object.defineProperty(et.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(ot){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=ot,this._writableState.destroyed=ot)}}),_stream_duplex$1}var string_decoder={},hasRequiredString_decoder;function requireString_decoder(){if(hasRequiredString_decoder)return string_decoder;hasRequiredString_decoder=1;var o=requireSafeBuffer$1().Buffer,e=o.isEncoding||function(ht){switch(ht=""+ht,ht&&ht.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(ht){if(!ht)return"utf8";for(var wt;;)switch(ht){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return ht;default:if(wt)return;ht=(""+ht).toLowerCase(),wt=!0}}function c(ht){var wt=a(ht);if(typeof wt!="string"&&(o.isEncoding===e||!e(ht)))throw new Error("Unknown encoding: "+ht);return wt||ht}string_decoder.StringDecoder=j;function j(ht){this.encoding=c(ht);var wt;switch(this.encoding){case"utf16le":this.text=gt,this.end=ft,wt=4;break;case"utf8":this.fillLast=st,wt=4;break;case"base64":this.text=yt,this.end=vt,wt=3;break;default:this.write=rt,this.end=bt;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=o.allocUnsafe(wt)}j.prototype.write=function(ht){if(ht.length===0)return"";var wt,At;if(this.lastNeed){if(wt=this.fillLast(ht),wt===void 0)return"";At=this.lastNeed,this.lastNeed=0}else At=0;return At<ht.length?wt?wt+this.text(ht,At):this.text(ht,At):wt||""},j.prototype.end=ot,j.prototype.text=ct,j.prototype.fillLast=function(ht){if(this.lastNeed<=ht.length)return ht.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);ht.copy(this.lastChar,this.lastTotal-this.lastNeed,0,ht.length),this.lastNeed-=ht.length};function d(ht){return ht<=127?0:ht>>5===6?2:ht>>4===14?3:ht>>3===30?4:ht>>6===2?-1:-2}function et(ht,wt,At){var Ct=wt.length-1;if(Ct<At)return 0;var dt=d(wt[Ct]);return dt>=0?(dt>0&&(ht.lastNeed=dt-1),dt):--Ct<At||dt===-2?0:(dt=d(wt[Ct]),dt>=0?(dt>0&&(ht.lastNeed=dt-2),dt):--Ct<At||dt===-2?0:(dt=d(wt[Ct]),dt>=0?(dt>0&&(dt===2?dt=0:ht.lastNeed=dt-3),dt):0))}function at(ht,wt,At){if((wt[0]&192)!==128)return ht.lastNeed=0,"";if(ht.lastNeed>1&&wt.length>1){if((wt[1]&192)!==128)return ht.lastNeed=1,"";if(ht.lastNeed>2&&wt.length>2&&(wt[2]&192)!==128)return ht.lastNeed=2,""}}function st(ht){var wt=this.lastTotal-this.lastNeed,At=at(this,ht);if(At!==void 0)return At;if(this.lastNeed<=ht.length)return ht.copy(this.lastChar,wt,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);ht.copy(this.lastChar,wt,0,ht.length),this.lastNeed-=ht.length}function ct(ht,wt){var At=et(this,ht,wt);if(!this.lastNeed)return ht.toString("utf8",wt);this.lastTotal=At;var Ct=ht.length-(At-this.lastNeed);return ht.copy(this.lastChar,0,Ct),ht.toString("utf8",wt,Ct)}function ot(ht){var wt=ht&&ht.length?this.write(ht):"";return this.lastNeed?wt+"":wt}function gt(ht,wt){if((ht.length-wt)%2===0){var At=ht.toString("utf16le",wt);if(At){var Ct=At.charCodeAt(At.length-1);if(Ct>=55296&&Ct<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=ht[ht.length-2],this.lastChar[1]=ht[ht.length-1],At.slice(0,-1)}return At}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=ht[ht.length-1],ht.toString("utf16le",wt,ht.length-1)}function ft(ht){var wt=ht&&ht.length?this.write(ht):"";if(this.lastNeed){var At=this.lastTotal-this.lastNeed;return wt+this.lastChar.toString("utf16le",0,At)}return wt}function yt(ht,wt){var At=(ht.length-wt)%3;return At===0?ht.toString("base64",wt):(this.lastNeed=3-At,this.lastTotal=3,At===1?this.lastChar[0]=ht[ht.length-1]:(this.lastChar[0]=ht[ht.length-2],this.lastChar[1]=ht[ht.length-1]),ht.toString("base64",wt,ht.length-At))}function vt(ht){var wt=ht&&ht.length?this.write(ht):"";return this.lastNeed?wt+this.lastChar.toString("base64",0,3-this.lastNeed):wt}function rt(ht){return ht.toString(this.encoding)}function bt(ht){return ht&&ht.length?this.write(ht):""}return string_decoder}var endOfStream,hasRequiredEndOfStream;function requireEndOfStream(){if(hasRequiredEndOfStream)return endOfStream;hasRequiredEndOfStream=1;var o=requireErrorsBrowser().codes.ERR_STREAM_PREMATURE_CLOSE;function e(d){var et=!1;return function(){if(!et){et=!0;for(var at=arguments.length,st=new Array(at),ct=0;ct<at;ct++)st[ct]=arguments[ct];d.apply(this,st)}}}function a(){}function c(d){return d.setHeader&&typeof d.abort=="function"}function j(d,et,at){if(typeof et=="function")return j(d,null,et);et||(et={}),at=e(at||a);var st=et.readable||et.readable!==!1&&d.readable,ct=et.writable||et.writable!==!1&&d.writable,ot=function(){d.writable||ft()},gt=d._writableState&&d._writableState.finished,ft=function(){ct=!1,gt=!0,st||at.call(d)},yt=d._readableState&&d._readableState.endEmitted,vt=function(){st=!1,yt=!0,ct||at.call(d)},rt=function(At){at.call(d,At)},bt=function(){var At;if(st&&!yt)return(!d._readableState||!d._readableState.ended)&&(At=new o),at.call(d,At);if(ct&&!gt)return(!d._writableState||!d._writableState.ended)&&(At=new o),at.call(d,At)},ht=function(){d.req.on("finish",ft)};return c(d)?(d.on("complete",ft),d.on("abort",bt),d.req?ht():d.on("request",ht)):ct&&!d._writableState&&(d.on("end",ot),d.on("close",ot)),d.on("end",vt),d.on("finish",ft),et.error!==!1&&d.on("error",rt),d.on("close",bt),function(){d.removeListener("complete",ft),d.removeListener("abort",bt),d.removeListener("request",ht),d.req&&d.req.removeListener("finish",ft),d.removeListener("end",ot),d.removeListener("close",ot),d.removeListener("finish",ft),d.removeListener("end",vt),d.removeListener("error",rt),d.removeListener("close",bt)}}return endOfStream=j,endOfStream}var async_iterator,hasRequiredAsync_iterator;function requireAsync_iterator(){if(hasRequiredAsync_iterator)return async_iterator;hasRequiredAsync_iterator=1;var o;function e(At,Ct,dt){return Ct=a(Ct),Ct in At?Object.defineProperty(At,Ct,{value:dt,enumerable:!0,configurable:!0,writable:!0}):At[Ct]=dt,At}function a(At){var Ct=c(At,"string");return typeof Ct=="symbol"?Ct:String(Ct)}function c(At,Ct){if(typeof At!="object"||At===null)return At;var dt=At[Symbol.toPrimitive];if(dt!==void 0){var Et=dt.call(At,Ct||"default");if(typeof Et!="object")return Et;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Ct==="string"?String:Number)(At)}var j=requireEndOfStream(),d=Symbol("lastResolve"),et=Symbol("lastReject"),at=Symbol("error"),st=Symbol("ended"),ct=Symbol("lastPromise"),ot=Symbol("handlePromise"),gt=Symbol("stream");function ft(At,Ct){return{value:At,done:Ct}}function yt(At){var Ct=At[d];if(Ct!==null){var dt=At[gt].read();dt!==null&&(At[ct]=null,At[d]=null,At[et]=null,Ct(ft(dt,!1)))}}function vt(At){process$1.nextTick(yt,At)}function rt(At,Ct){return function(dt,Et){At.then(function(){if(Ct[st]){dt(ft(void 0,!0));return}Ct[ot](dt,Et)},Et)}}var bt=Object.getPrototypeOf(function(){}),ht=Object.setPrototypeOf((o={get stream(){return this[gt]},next:function(){var Ct=this,dt=this[at];if(dt!==null)return Promise.reject(dt);if(this[st])return Promise.resolve(ft(void 0,!0));if(this[gt].destroyed)return new Promise(function(_t,kt){process$1.nextTick(function(){Ct[at]?kt(Ct[at]):_t(ft(void 0,!0))})});var Et=this[ct],Rt;if(Et)Rt=new Promise(rt(Et,this));else{var Mt=this[gt].read();if(Mt!==null)return Promise.resolve(ft(Mt,!1));Rt=new Promise(this[ot])}return this[ct]=Rt,Rt}},e(o,Symbol.asyncIterator,function(){return this}),e(o,"return",function(){var Ct=this;return new Promise(function(dt,Et){Ct[gt].destroy(null,function(Rt){if(Rt){Et(Rt);return}dt(ft(void 0,!0))})})}),o),bt),wt=function(Ct){var dt,Et=Object.create(ht,(dt={},e(dt,gt,{value:Ct,writable:!0}),e(dt,d,{value:null,writable:!0}),e(dt,et,{value:null,writable:!0}),e(dt,at,{value:null,writable:!0}),e(dt,st,{value:Ct._readableState.endEmitted,writable:!0}),e(dt,ot,{value:function(Mt,_t){var kt=Et[gt].read();kt?(Et[ct]=null,Et[d]=null,Et[et]=null,Mt(ft(kt,!1))):(Et[d]=Mt,Et[et]=_t)},writable:!0}),dt));return Et[ct]=null,j(Ct,function(Rt){if(Rt&&Rt.code!=="ERR_STREAM_PREMATURE_CLOSE"){var Mt=Et[et];Mt!==null&&(Et[ct]=null,Et[d]=null,Et[et]=null,Mt(Rt)),Et[at]=Rt;return}var _t=Et[d];_t!==null&&(Et[ct]=null,Et[d]=null,Et[et]=null,_t(ft(void 0,!0))),Et[st]=!0}),Ct.on("readable",vt.bind(null,Et)),Et};return async_iterator=wt,async_iterator}var fromBrowser,hasRequiredFromBrowser;function requireFromBrowser(){return hasRequiredFromBrowser||(hasRequiredFromBrowser=1,fromBrowser=function(){throw new Error("Readable.from is not available in the browser")}),fromBrowser}var _stream_readable$1,hasRequired_stream_readable$1;function require_stream_readable$1(){if(hasRequired_stream_readable$1)return _stream_readable$1;hasRequired_stream_readable$1=1,_stream_readable$1=_t;var o;_t.ReadableState=Mt,eventsExports.EventEmitter;var e=function(Bt,Jt){return Bt.listeners(Jt).length},a=requireStreamBrowser$1(),c=require$$1$2.Buffer,j=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function d(Ht){return c.from(Ht)}function et(Ht){return c.isBuffer(Ht)||Ht instanceof j}var at=util$8,st;at&&at.debuglog?st=at.debuglog("stream"):st=function(){};var ct=requireBuffer_list(),ot=requireDestroy$1(),gt=requireState(),ft=gt.getHighWaterMark,yt=requireErrorsBrowser().codes,vt=yt.ERR_INVALID_ARG_TYPE,rt=yt.ERR_STREAM_PUSH_AFTER_EOF,bt=yt.ERR_METHOD_NOT_IMPLEMENTED,ht=yt.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,wt,At,Ct;requireInherits_browser()(_t,a);var dt=ot.errorOrDestroy,Et=["error","close","destroy","pause","resume"];function Rt(Ht,Bt,Jt){if(typeof Ht.prependListener=="function")return Ht.prependListener(Bt,Jt);!Ht._events||!Ht._events[Bt]?Ht.on(Bt,Jt):Array.isArray(Ht._events[Bt])?Ht._events[Bt].unshift(Jt):Ht._events[Bt]=[Jt,Ht._events[Bt]]}function Mt(Ht,Bt,Jt){o=o||require_stream_duplex$1(),Ht=Ht||{},typeof Jt!="boolean"&&(Jt=Bt instanceof o),this.objectMode=!!Ht.objectMode,Jt&&(this.objectMode=this.objectMode||!!Ht.readableObjectMode),this.highWaterMark=ft(this,Ht,"readableHighWaterMark",Jt),this.buffer=new ct,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=Ht.emitClose!==!1,this.autoDestroy=!!Ht.autoDestroy,this.destroyed=!1,this.defaultEncoding=Ht.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Ht.encoding&&(wt||(wt=requireString_decoder().StringDecoder),this.decoder=new wt(Ht.encoding),this.encoding=Ht.encoding)}function _t(Ht){if(o=o||require_stream_duplex$1(),!(this instanceof _t))return new _t(Ht);var Bt=this instanceof o;this._readableState=new Mt(Ht,this,Bt),this.readable=!0,Ht&&(typeof Ht.read=="function"&&(this._read=Ht.read),typeof Ht.destroy=="function"&&(this._destroy=Ht.destroy)),a.call(this)}Object.defineProperty(_t.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(Bt){this._readableState&&(this._readableState.destroyed=Bt)}}),_t.prototype.destroy=ot.destroy,_t.prototype._undestroy=ot.undestroy,_t.prototype._destroy=function(Ht,Bt){Bt(Ht)},_t.prototype.push=function(Ht,Bt){var Jt=this._readableState,sr;return Jt.objectMode?sr=!0:typeof Ht=="string"&&(Bt=Bt||Jt.defaultEncoding,Bt!==Jt.encoding&&(Ht=c.from(Ht,Bt),Bt=""),sr=!0),kt(this,Ht,Bt,!1,sr)},_t.prototype.unshift=function(Ht){return kt(this,Ht,null,!0,!1)};function kt(Ht,Bt,Jt,sr,hr){st("readableAddChunk",Bt);var Ar=Ht._readableState;if(Bt===null)Ar.reading=!1,it(Ht,Ar);else{var gn;if(hr||(gn=s(Ar,Bt)),gn)dt(Ht,gn);else if(Ar.objectMode||Bt&&Bt.length>0)if(typeof Bt!="string"&&!Ar.objectMode&&Object.getPrototypeOf(Bt)!==c.prototype&&(Bt=d(Bt)),sr)Ar.endEmitted?dt(Ht,new ht):nt(Ht,Ar,Bt,!0);else if(Ar.ended)dt(Ht,new rt);else{if(Ar.destroyed)return!1;Ar.reading=!1,Ar.decoder&&!Jt?(Bt=Ar.decoder.write(Bt),Ar.objectMode||Bt.length!==0?nt(Ht,Ar,Bt,!1):lt(Ht,Ar)):nt(Ht,Ar,Bt,!1)}else sr||(Ar.reading=!1,lt(Ht,Ar))}return!Ar.ended&&(Ar.length<Ar.highWaterMark||Ar.length===0)}function nt(Ht,Bt,Jt,sr){Bt.flowing&&Bt.length===0&&!Bt.sync?(Bt.awaitDrain=0,Ht.emit("data",Jt)):(Bt.length+=Bt.objectMode?1:Jt.length,sr?Bt.buffer.unshift(Jt):Bt.buffer.push(Jt),Bt.needReadable&&pt(Ht)),lt(Ht,Bt)}function s(Ht,Bt){var Jt;return!et(Bt)&&typeof Bt!="string"&&Bt!==void 0&&!Ht.objectMode&&(Jt=new vt("chunk",["string","Buffer","Uint8Array"],Bt)),Jt}_t.prototype.isPaused=function(){return this._readableState.flowing===!1},_t.prototype.setEncoding=function(Ht){wt||(wt=requireString_decoder().StringDecoder);var Bt=new wt(Ht);this._readableState.decoder=Bt,this._readableState.encoding=this._readableState.decoder.encoding;for(var Jt=this._readableState.buffer.head,sr="";Jt!==null;)sr+=Bt.write(Jt.data),Jt=Jt.next;return this._readableState.buffer.clear(),sr!==""&&this._readableState.buffer.push(sr),this._readableState.length=sr.length,this};var b=1073741824;function $(Ht){return Ht>=b?Ht=b:(Ht--,Ht|=Ht>>>1,Ht|=Ht>>>2,Ht|=Ht>>>4,Ht|=Ht>>>8,Ht|=Ht>>>16,Ht++),Ht}function _e(Ht,Bt){return Ht<=0||Bt.length===0&&Bt.ended?0:Bt.objectMode?1:Ht!==Ht?Bt.flowing&&Bt.length?Bt.buffer.head.data.length:Bt.length:(Ht>Bt.highWaterMark&&(Bt.highWaterMark=$(Ht)),Ht<=Bt.length?Ht:Bt.ended?Bt.length:(Bt.needReadable=!0,0))}_t.prototype.read=function(Ht){st("read",Ht),Ht=parseInt(Ht,10);var Bt=this._readableState,Jt=Ht;if(Ht!==0&&(Bt.emittedReadable=!1),Ht===0&&Bt.needReadable&&((Bt.highWaterMark!==0?Bt.length>=Bt.highWaterMark:Bt.length>0)||Bt.ended))return st("read: emitReadable",Bt.length,Bt.ended),Bt.length===0&&Bt.ended?qt(this):pt(this),null;if(Ht=_e(Ht,Bt),Ht===0&&Bt.ended)return Bt.length===0&&qt(this),null;var sr=Bt.needReadable;st("need readable",sr),(Bt.length===0||Bt.length-Ht<Bt.highWaterMark)&&(sr=!0,st("length less than watermark",sr)),Bt.ended||Bt.reading?(sr=!1,st("reading or ended",sr)):sr&&(st("do read"),Bt.reading=!0,Bt.sync=!0,Bt.length===0&&(Bt.needReadable=!0),this._read(Bt.highWaterMark),Bt.sync=!1,Bt.reading||(Ht=_e(Jt,Bt)));var hr;return Ht>0?hr=Pt(Ht,Bt):hr=null,hr===null?(Bt.needReadable=Bt.length<=Bt.highWaterMark,Ht=0):(Bt.length-=Ht,Bt.awaitDrain=0),Bt.length===0&&(Bt.ended||(Bt.needReadable=!0),Jt!==Ht&&Bt.ended&&qt(this)),hr!==null&&this.emit("data",hr),hr};function it(Ht,Bt){if(st("onEofChunk"),!Bt.ended){if(Bt.decoder){var Jt=Bt.decoder.end();Jt&&Jt.length&&(Bt.buffer.push(Jt),Bt.length+=Bt.objectMode?1:Jt.length)}Bt.ended=!0,Bt.sync?pt(Ht):(Bt.needReadable=!1,Bt.emittedReadable||(Bt.emittedReadable=!0,mt(Ht)))}}function pt(Ht){var Bt=Ht._readableState;st("emitReadable",Bt.needReadable,Bt.emittedReadable),Bt.needReadable=!1,Bt.emittedReadable||(st("emitReadable",Bt.flowing),Bt.emittedReadable=!0,process$1.nextTick(mt,Ht))}function mt(Ht){var Bt=Ht._readableState;st("emitReadable_",Bt.destroyed,Bt.length,Bt.ended),!Bt.destroyed&&(Bt.length||Bt.ended)&&(Ht.emit("readable"),Bt.emittedReadable=!1),Bt.needReadable=!Bt.flowing&&!Bt.ended&&Bt.length<=Bt.highWaterMark,Gt(Ht)}function lt(Ht,Bt){Bt.readingMore||(Bt.readingMore=!0,process$1.nextTick(_,Ht,Bt))}function _(Ht,Bt){for(;!Bt.reading&&!Bt.ended&&(Bt.length<Bt.highWaterMark||Bt.flowing&&Bt.length===0);){var Jt=Bt.length;if(st("maybeReadMore read 0"),Ht.read(0),Jt===Bt.length)break}Bt.readingMore=!1}_t.prototype._read=function(Ht){dt(this,new bt("_read()"))},_t.prototype.pipe=function(Ht,Bt){var Jt=this,sr=this._readableState;switch(sr.pipesCount){case 0:sr.pipes=Ht;break;case 1:sr.pipes=[sr.pipes,Ht];break;default:sr.pipes.push(Ht);break}sr.pipesCount+=1,st("pipe count=%d opts=%j",sr.pipesCount,Bt);var hr=(!Bt||Bt.end!==!1)&&Ht!==process$1.stdout&&Ht!==process$1.stderr,Ar=hr?Lr:Ln;sr.endEmitted?process$1.nextTick(Ar):Jt.once("end",Ar),Ht.on("unpipe",gn);function gn(Fr,_i){st("onunpipe"),Fr===Jt&&_i&&_i.hasUnpiped===!1&&(_i.hasUnpiped=!0,Dr())}function Lr(){st("onend"),Ht.end()}var wr=tt(Jt);Ht.on("drain",wr);var En=!1;function Dr(){st("cleanup"),Ht.removeListener("close",Br),Ht.removeListener("finish",Gr),Ht.removeListener("drain",wr),Ht.removeListener("error",Dn),Ht.removeListener("unpipe",gn),Jt.removeListener("end",Lr),Jt.removeListener("end",Ln),Jt.removeListener("data",Qr),En=!0,sr.awaitDrain&&(!Ht._writableState||Ht._writableState.needDrain)&&wr()}Jt.on("data",Qr);function Qr(Fr){st("ondata");var _i=Ht.write(Fr);st("dest.write",_i),_i===!1&&((sr.pipesCount===1&&sr.pipes===Ht||sr.pipesCount>1&&jt(sr.pipes,Ht)!==-1)&&!En&&(st("false write response, pause",sr.awaitDrain),sr.awaitDrain++),Jt.pause())}function Dn(Fr){st("onerror",Fr),Ln(),Ht.removeListener("error",Dn),e(Ht,"error")===0&&dt(Ht,Fr)}Rt(Ht,"error",Dn);function Br(){Ht.removeListener("finish",Gr),Ln()}Ht.once("close",Br);function Gr(){st("onfinish"),Ht.removeListener("close",Br),Ln()}Ht.once("finish",Gr);function Ln(){st("unpipe"),Jt.unpipe(Ht)}return Ht.emit("pipe",Jt),sr.flowing||(st("pipe resume"),Jt.resume()),Ht};function tt(Ht){return function(){var Jt=Ht._readableState;st("pipeOnDrain",Jt.awaitDrain),Jt.awaitDrain&&Jt.awaitDrain--,Jt.awaitDrain===0&&e(Ht,"data")&&(Jt.flowing=!0,Gt(Ht))}}_t.prototype.unpipe=function(Ht){var Bt=this._readableState,Jt={hasUnpiped:!1};if(Bt.pipesCount===0)return this;if(Bt.pipesCount===1)return Ht&&Ht!==Bt.pipes?this:(Ht||(Ht=Bt.pipes),Bt.pipes=null,Bt.pipesCount=0,Bt.flowing=!1,Ht&&Ht.emit("unpipe",this,Jt),this);if(!Ht){var sr=Bt.pipes,hr=Bt.pipesCount;Bt.pipes=null,Bt.pipesCount=0,Bt.flowing=!1;for(var Ar=0;Ar<hr;Ar++)sr[Ar].emit("unpipe",this,{hasUnpiped:!1});return this}var gn=jt(Bt.pipes,Ht);return gn===-1?this:(Bt.pipes.splice(gn,1),Bt.pipesCount-=1,Bt.pipesCount===1&&(Bt.pipes=Bt.pipes[0]),Ht.emit("unpipe",this,Jt),this)},_t.prototype.on=function(Ht,Bt){var Jt=a.prototype.on.call(this,Ht,Bt),sr=this._readableState;return Ht==="data"?(sr.readableListening=this.listenerCount("readable")>0,sr.flowing!==!1&&this.resume()):Ht==="readable"&&!sr.endEmitted&&!sr.readableListening&&(sr.readableListening=sr.needReadable=!0,sr.flowing=!1,sr.emittedReadable=!1,st("on readable",sr.length,sr.reading),sr.length?pt(this):sr.reading||process$1.nextTick(It,this)),Jt},_t.prototype.addListener=_t.prototype.on,_t.prototype.removeListener=function(Ht,Bt){var Jt=a.prototype.removeListener.call(this,Ht,Bt);return Ht==="readable"&&process$1.nextTick(Tt,this),Jt},_t.prototype.removeAllListeners=function(Ht){var Bt=a.prototype.removeAllListeners.apply(this,arguments);return(Ht==="readable"||Ht===void 0)&&process$1.nextTick(Tt,this),Bt};function Tt(Ht){var Bt=Ht._readableState;Bt.readableListening=Ht.listenerCount("readable")>0,Bt.resumeScheduled&&!Bt.paused?Bt.flowing=!0:Ht.listenerCount("data")>0&&Ht.resume()}function It(Ht){st("readable nexttick read 0"),Ht.read(0)}_t.prototype.resume=function(){var Ht=this._readableState;return Ht.flowing||(st("resume"),Ht.flowing=!Ht.readableListening,Nt(this,Ht)),Ht.paused=!1,this};function Nt(Ht,Bt){Bt.resumeScheduled||(Bt.resumeScheduled=!0,process$1.nextTick(Ut,Ht,Bt))}function Ut(Ht,Bt){st("resume",Bt.reading),Bt.reading||Ht.read(0),Bt.resumeScheduled=!1,Ht.emit("resume"),Gt(Ht),Bt.flowing&&!Bt.reading&&Ht.read(0)}_t.prototype.pause=function(){return st("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(st("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function Gt(Ht){var Bt=Ht._readableState;for(st("flow",Bt.flowing);Bt.flowing&&Ht.read()!==null;);}_t.prototype.wrap=function(Ht){var Bt=this,Jt=this._readableState,sr=!1;Ht.on("end",function(){if(st("wrapped end"),Jt.decoder&&!Jt.ended){var gn=Jt.decoder.end();gn&&gn.length&&Bt.push(gn)}Bt.push(null)}),Ht.on("data",function(gn){if(st("wrapped data"),Jt.decoder&&(gn=Jt.decoder.write(gn)),!(Jt.objectMode&&gn==null)&&!(!Jt.objectMode&&(!gn||!gn.length))){var Lr=Bt.push(gn);Lr||(sr=!0,Ht.pause())}});for(var hr in Ht)this[hr]===void 0&&typeof Ht[hr]=="function"&&(this[hr]=function(Lr){return function(){return Ht[Lr].apply(Ht,arguments)}}(hr));for(var Ar=0;Ar<Et.length;Ar++)Ht.on(Et[Ar],this.emit.bind(this,Et[Ar]));return this._read=function(gn){st("wrapped _read",gn),sr&&(sr=!1,Ht.resume())},this},typeof Symbol=="function"&&(_t.prototype[Symbol.asyncIterator]=function(){return At===void 0&&(At=requireAsync_iterator()),At(this)}),Object.defineProperty(_t.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(_t.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(_t.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(Bt){this._readableState&&(this._readableState.flowing=Bt)}}),_t._fromList=Pt,Object.defineProperty(_t.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function Pt(Ht,Bt){if(Bt.length===0)return null;var Jt;return Bt.objectMode?Jt=Bt.buffer.shift():!Ht||Ht>=Bt.length?(Bt.decoder?Jt=Bt.buffer.join(""):Bt.buffer.length===1?Jt=Bt.buffer.first():Jt=Bt.buffer.concat(Bt.length),Bt.buffer.clear()):Jt=Bt.buffer.consume(Ht,Bt.decoder),Jt}function qt(Ht){var Bt=Ht._readableState;st("endReadable",Bt.endEmitted),Bt.endEmitted||(Bt.ended=!0,process$1.nextTick(Kt,Bt,Ht))}function Kt(Ht,Bt){if(st("endReadableNT",Ht.endEmitted,Ht.length),!Ht.endEmitted&&Ht.length===0&&(Ht.endEmitted=!0,Bt.readable=!1,Bt.emit("end"),Ht.autoDestroy)){var Jt=Bt._writableState;(!Jt||Jt.autoDestroy&&Jt.finished)&&Bt.destroy()}}typeof Symbol=="function"&&(_t.from=function(Ht,Bt){return Ct===void 0&&(Ct=requireFromBrowser()),Ct(_t,Ht,Bt)});function jt(Ht,Bt){for(var Jt=0,sr=Ht.length;Jt<sr;Jt++)if(Ht[Jt]===Bt)return Jt;return-1}return _stream_readable$1}var _stream_transform$1,hasRequired_stream_transform$1;function require_stream_transform$1(){if(hasRequired_stream_transform$1)return _stream_transform$1;hasRequired_stream_transform$1=1,_stream_transform$1=at;var o=requireErrorsBrowser().codes,e=o.ERR_METHOD_NOT_IMPLEMENTED,a=o.ERR_MULTIPLE_CALLBACK,c=o.ERR_TRANSFORM_ALREADY_TRANSFORMING,j=o.ERR_TRANSFORM_WITH_LENGTH_0,d=require_stream_duplex$1();requireInherits_browser()(at,d);function et(ot,gt){var ft=this._transformState;ft.transforming=!1;var yt=ft.writecb;if(yt===null)return this.emit("error",new a);ft.writechunk=null,ft.writecb=null,gt!=null&&this.push(gt),yt(ot);var vt=this._readableState;vt.reading=!1,(vt.needReadable||vt.length<vt.highWaterMark)&&this._read(vt.highWaterMark)}function at(ot){if(!(this instanceof at))return new at(ot);d.call(this,ot),this._transformState={afterTransform:et.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,ot&&(typeof ot.transform=="function"&&(this._transform=ot.transform),typeof ot.flush=="function"&&(this._flush=ot.flush)),this.on("prefinish",st)}function st(){var ot=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(gt,ft){ct(ot,gt,ft)}):ct(this,null,null)}at.prototype.push=function(ot,gt){return this._transformState.needTransform=!1,d.prototype.push.call(this,ot,gt)},at.prototype._transform=function(ot,gt,ft){ft(new e("_transform()"))},at.prototype._write=function(ot,gt,ft){var yt=this._transformState;if(yt.writecb=ft,yt.writechunk=ot,yt.writeencoding=gt,!yt.transforming){var vt=this._readableState;(yt.needTransform||vt.needReadable||vt.length<vt.highWaterMark)&&this._read(vt.highWaterMark)}},at.prototype._read=function(ot){var gt=this._transformState;gt.writechunk!==null&&!gt.transforming?(gt.transforming=!0,this._transform(gt.writechunk,gt.writeencoding,gt.afterTransform)):gt.needTransform=!0},at.prototype._destroy=function(ot,gt){d.prototype._destroy.call(this,ot,function(ft){gt(ft)})};function ct(ot,gt,ft){if(gt)return ot.emit("error",gt);if(ft!=null&&ot.push(ft),ot._writableState.length)throw new j;if(ot._transformState.transforming)throw new c;return ot.push(null)}return _stream_transform$1}var _stream_passthrough$1,hasRequired_stream_passthrough$1;function require_stream_passthrough$1(){if(hasRequired_stream_passthrough$1)return _stream_passthrough$1;hasRequired_stream_passthrough$1=1,_stream_passthrough$1=e;var o=require_stream_transform$1();requireInherits_browser()(e,o);function e(a){if(!(this instanceof e))return new e(a);o.call(this,a)}return e.prototype._transform=function(a,c,j){j(null,a)},_stream_passthrough$1}var pipeline_1,hasRequiredPipeline;function requirePipeline(){if(hasRequiredPipeline)return pipeline_1;hasRequiredPipeline=1;var o;function e(ft){var yt=!1;return function(){yt||(yt=!0,ft.apply(void 0,arguments))}}var a=requireErrorsBrowser().codes,c=a.ERR_MISSING_ARGS,j=a.ERR_STREAM_DESTROYED;function d(ft){if(ft)throw ft}function et(ft){return ft.setHeader&&typeof ft.abort=="function"}function at(ft,yt,vt,rt){rt=e(rt);var bt=!1;ft.on("close",function(){bt=!0}),o===void 0&&(o=requireEndOfStream()),o(ft,{readable:yt,writable:vt},function(wt){if(wt)return rt(wt);bt=!0,rt()});var ht=!1;return function(wt){if(!bt&&!ht){if(ht=!0,et(ft))return ft.abort();if(typeof ft.destroy=="function")return ft.destroy();rt(wt||new j("pipe"))}}}function st(ft){ft()}function ct(ft,yt){return ft.pipe(yt)}function ot(ft){return!ft.length||typeof ft[ft.length-1]!="function"?d:ft.pop()}function gt(){for(var ft=arguments.length,yt=new Array(ft),vt=0;vt<ft;vt++)yt[vt]=arguments[vt];var rt=ot(yt);if(Array.isArray(yt[0])&&(yt=yt[0]),yt.length<2)throw new c("streams");var bt,ht=yt.map(function(wt,At){var Ct=At<yt.length-1,dt=At>0;return at(wt,Ct,dt,function(Et){bt||(bt=Et),Et&&ht.forEach(st),!Ct&&(ht.forEach(st),rt(bt))})});return yt.reduce(ct)}return pipeline_1=gt,pipeline_1}var streamBrowserify,hasRequiredStreamBrowserify;function requireStreamBrowserify(){if(hasRequiredStreamBrowserify)return streamBrowserify;hasRequiredStreamBrowserify=1,streamBrowserify=a;var o=eventsExports.EventEmitter,e=requireInherits_browser();e(a,o),a.Readable=require_stream_readable$1(),a.Writable=require_stream_writable$1(),a.Duplex=require_stream_duplex$1(),a.Transform=require_stream_transform$1(),a.PassThrough=require_stream_passthrough$1(),a.finished=requireEndOfStream(),a.pipeline=requirePipeline(),a.Stream=a;function a(){o.call(this)}return a.prototype.pipe=function(c,j){var d=this;function et(yt){c.writable&&c.write(yt)===!1&&d.pause&&d.pause()}d.on("data",et);function at(){d.readable&&d.resume&&d.resume()}c.on("drain",at),!c._isStdio&&(!j||j.end!==!1)&&(d.on("end",ct),d.on("close",ot));var st=!1;function ct(){st||(st=!0,c.end())}function ot(){st||(st=!0,typeof c.destroy=="function"&&c.destroy())}function gt(yt){if(ft(),o.listenerCount(this,"error")===0)throw yt}d.on("error",gt),c.on("error",gt);function ft(){d.removeListener("data",et),c.removeListener("drain",at),d.removeListener("end",ct),d.removeListener("close",ot),d.removeListener("error",gt),c.removeListener("error",gt),d.removeListener("end",ft),d.removeListener("close",ft),c.removeListener("close",ft)}return d.on("end",ft),d.on("close",ft),c.on("close",ft),c.emit("pipe",d),c},streamBrowserify}var hashBase,hasRequiredHashBase;function requireHashBase(){if(hasRequiredHashBase)return hashBase;hasRequiredHashBase=1;var o=requireSafeBuffer$1().Buffer,e=requireStreamBrowserify().Transform,a=requireInherits_browser();function c(d,et){if(!o.isBuffer(d)&&typeof d!="string")throw new TypeError(et+" must be a string or a buffer")}function j(d){e.call(this),this._block=o.allocUnsafe(d),this._blockSize=d,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}return a(j,e),j.prototype._transform=function(d,et,at){var st=null;try{this.update(d,et)}catch(ct){st=ct}at(st)},j.prototype._flush=function(d){var et=null;try{this.push(this.digest())}catch(at){et=at}d(et)},j.prototype.update=function(d,et){if(c(d,"Data"),this._finalized)throw new Error("Digest already called");o.isBuffer(d)||(d=o.from(d,et));for(var at=this._block,st=0;this._blockOffset+d.length-st>=this._blockSize;){for(var ct=this._blockOffset;ct<this._blockSize;)at[ct++]=d[st++];this._update(),this._blockOffset=0}for(;st<d.length;)at[this._blockOffset++]=d[st++];for(var ot=0,gt=d.length*8;gt>0;++ot)this._length[ot]+=gt,gt=this._length[ot]/4294967296|0,gt>0&&(this._length[ot]-=4294967296*gt);return this},j.prototype._update=function(){throw new Error("_update is not implemented")},j.prototype.digest=function(d){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var et=this._digest();d!==void 0&&(et=et.toString(d)),this._block.fill(0),this._blockOffset=0;for(var at=0;at<4;++at)this._length[at]=0;return et},j.prototype._digest=function(){throw new Error("_digest is not implemented")},hashBase=j,hashBase}var md5_js,hasRequiredMd5_js;function requireMd5_js(){if(hasRequiredMd5_js)return md5_js;hasRequiredMd5_js=1;var o=requireInherits_browser(),e=requireHashBase(),a=requireSafeBuffer$1().Buffer,c=new Array(16);function j(){e.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}o(j,e),j.prototype._update=function(){for(var ot=c,gt=0;gt<16;++gt)ot[gt]=this._block.readInt32LE(gt*4);var ft=this._a,yt=this._b,vt=this._c,rt=this._d;ft=et(ft,yt,vt,rt,ot[0],3614090360,7),rt=et(rt,ft,yt,vt,ot[1],3905402710,12),vt=et(vt,rt,ft,yt,ot[2],606105819,17),yt=et(yt,vt,rt,ft,ot[3],3250441966,22),ft=et(ft,yt,vt,rt,ot[4],4118548399,7),rt=et(rt,ft,yt,vt,ot[5],1200080426,12),vt=et(vt,rt,ft,yt,ot[6],2821735955,17),yt=et(yt,vt,rt,ft,ot[7],4249261313,22),ft=et(ft,yt,vt,rt,ot[8],1770035416,7),rt=et(rt,ft,yt,vt,ot[9],2336552879,12),vt=et(vt,rt,ft,yt,ot[10],4294925233,17),yt=et(yt,vt,rt,ft,ot[11],2304563134,22),ft=et(ft,yt,vt,rt,ot[12],1804603682,7),rt=et(rt,ft,yt,vt,ot[13],4254626195,12),vt=et(vt,rt,ft,yt,ot[14],2792965006,17),yt=et(yt,vt,rt,ft,ot[15],1236535329,22),ft=at(ft,yt,vt,rt,ot[1],4129170786,5),rt=at(rt,ft,yt,vt,ot[6],3225465664,9),vt=at(vt,rt,ft,yt,ot[11],643717713,14),yt=at(yt,vt,rt,ft,ot[0],3921069994,20),ft=at(ft,yt,vt,rt,ot[5],3593408605,5),rt=at(rt,ft,yt,vt,ot[10],38016083,9),vt=at(vt,rt,ft,yt,ot[15],3634488961,14),yt=at(yt,vt,rt,ft,ot[4],3889429448,20),ft=at(ft,yt,vt,rt,ot[9],568446438,5),rt=at(rt,ft,yt,vt,ot[14],3275163606,9),vt=at(vt,rt,ft,yt,ot[3],4107603335,14),yt=at(yt,vt,rt,ft,ot[8],1163531501,20),ft=at(ft,yt,vt,rt,ot[13],2850285829,5),rt=at(rt,ft,yt,vt,ot[2],4243563512,9),vt=at(vt,rt,ft,yt,ot[7],1735328473,14),yt=at(yt,vt,rt,ft,ot[12],2368359562,20),ft=st(ft,yt,vt,rt,ot[5],4294588738,4),rt=st(rt,ft,yt,vt,ot[8],2272392833,11),vt=st(vt,rt,ft,yt,ot[11],1839030562,16),yt=st(yt,vt,rt,ft,ot[14],4259657740,23),ft=st(ft,yt,vt,rt,ot[1],2763975236,4),rt=st(rt,ft,yt,vt,ot[4],1272893353,11),vt=st(vt,rt,ft,yt,ot[7],4139469664,16),yt=st(yt,vt,rt,ft,ot[10],3200236656,23),ft=st(ft,yt,vt,rt,ot[13],681279174,4),rt=st(rt,ft,yt,vt,ot[0],3936430074,11),vt=st(vt,rt,ft,yt,ot[3],3572445317,16),yt=st(yt,vt,rt,ft,ot[6],76029189,23),ft=st(ft,yt,vt,rt,ot[9],3654602809,4),rt=st(rt,ft,yt,vt,ot[12],3873151461,11),vt=st(vt,rt,ft,yt,ot[15],530742520,16),yt=st(yt,vt,rt,ft,ot[2],3299628645,23),ft=ct(ft,yt,vt,rt,ot[0],4096336452,6),rt=ct(rt,ft,yt,vt,ot[7],1126891415,10),vt=ct(vt,rt,ft,yt,ot[14],2878612391,15),yt=ct(yt,vt,rt,ft,ot[5],4237533241,21),ft=ct(ft,yt,vt,rt,ot[12],1700485571,6),rt=ct(rt,ft,yt,vt,ot[3],2399980690,10),vt=ct(vt,rt,ft,yt,ot[10],4293915773,15),yt=ct(yt,vt,rt,ft,ot[1],2240044497,21),ft=ct(ft,yt,vt,rt,ot[8],1873313359,6),rt=ct(rt,ft,yt,vt,ot[15],4264355552,10),vt=ct(vt,rt,ft,yt,ot[6],2734768916,15),yt=ct(yt,vt,rt,ft,ot[13],1309151649,21),ft=ct(ft,yt,vt,rt,ot[4],4149444226,6),rt=ct(rt,ft,yt,vt,ot[11],3174756917,10),vt=ct(vt,rt,ft,yt,ot[2],718787259,15),yt=ct(yt,vt,rt,ft,ot[9],3951481745,21),this._a=this._a+ft|0,this._b=this._b+yt|0,this._c=this._c+vt|0,this._d=this._d+rt|0},j.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var ot=a.allocUnsafe(16);return ot.writeInt32LE(this._a,0),ot.writeInt32LE(this._b,4),ot.writeInt32LE(this._c,8),ot.writeInt32LE(this._d,12),ot};function d(ot,gt){return ot<<gt|ot>>>32-gt}function et(ot,gt,ft,yt,vt,rt,bt){return d(ot+(gt&ft|~gt&yt)+vt+rt|0,bt)+gt|0}function at(ot,gt,ft,yt,vt,rt,bt){return d(ot+(gt&yt|ft&~yt)+vt+rt|0,bt)+gt|0}function st(ot,gt,ft,yt,vt,rt,bt){return d(ot+(gt^ft^yt)+vt+rt|0,bt)+gt|0}function ct(ot,gt,ft,yt,vt,rt,bt){return d(ot+(ft^(gt|~yt))+vt+rt|0,bt)+gt|0}return md5_js=j,md5_js}var ripemd160,hasRequiredRipemd160;function requireRipemd160(){if(hasRequiredRipemd160)return ripemd160;hasRequiredRipemd160=1;var o=require$$1$2.Buffer,e=requireInherits_browser(),a=requireHashBase(),c=new Array(16),j=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],d=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],et=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],at=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],st=[0,1518500249,1859775393,2400959708,2840853838],ct=[1352829926,1548603684,1836072691,2053994217,0];function ot(){a.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}e(ot,a),ot.prototype._update=function(){for(var ht=c,wt=0;wt<16;++wt)ht[wt]=this._block.readInt32LE(wt*4);for(var At=this._a|0,Ct=this._b|0,dt=this._c|0,Et=this._d|0,Rt=this._e|0,Mt=this._a|0,_t=this._b|0,kt=this._c|0,nt=this._d|0,s=this._e|0,b=0;b<80;b+=1){var $,_e;b<16?($=ft(At,Ct,dt,Et,Rt,ht[j[b]],st[0],et[b]),_e=bt(Mt,_t,kt,nt,s,ht[d[b]],ct[0],at[b])):b<32?($=yt(At,Ct,dt,Et,Rt,ht[j[b]],st[1],et[b]),_e=rt(Mt,_t,kt,nt,s,ht[d[b]],ct[1],at[b])):b<48?($=vt(At,Ct,dt,Et,Rt,ht[j[b]],st[2],et[b]),_e=vt(Mt,_t,kt,nt,s,ht[d[b]],ct[2],at[b])):b<64?($=rt(At,Ct,dt,Et,Rt,ht[j[b]],st[3],et[b]),_e=yt(Mt,_t,kt,nt,s,ht[d[b]],ct[3],at[b])):($=bt(At,Ct,dt,Et,Rt,ht[j[b]],st[4],et[b]),_e=ft(Mt,_t,kt,nt,s,ht[d[b]],ct[4],at[b])),At=Rt,Rt=Et,Et=gt(dt,10),dt=Ct,Ct=$,Mt=s,s=nt,nt=gt(kt,10),kt=_t,_t=_e}var it=this._b+dt+nt|0;this._b=this._c+Et+s|0,this._c=this._d+Rt+Mt|0,this._d=this._e+At+_t|0,this._e=this._a+Ct+kt|0,this._a=it},ot.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var ht=o.alloc?o.alloc(20):new o(20);return ht.writeInt32LE(this._a,0),ht.writeInt32LE(this._b,4),ht.writeInt32LE(this._c,8),ht.writeInt32LE(this._d,12),ht.writeInt32LE(this._e,16),ht};function gt(ht,wt){return ht<<wt|ht>>>32-wt}function ft(ht,wt,At,Ct,dt,Et,Rt,Mt){return gt(ht+(wt^At^Ct)+Et+Rt|0,Mt)+dt|0}function yt(ht,wt,At,Ct,dt,Et,Rt,Mt){return gt(ht+(wt&At|~wt&Ct)+Et+Rt|0,Mt)+dt|0}function vt(ht,wt,At,Ct,dt,Et,Rt,Mt){return gt(ht+((wt|~At)^Ct)+Et+Rt|0,Mt)+dt|0}function rt(ht,wt,At,Ct,dt,Et,Rt,Mt){return gt(ht+(wt&Ct|At&~Ct)+Et+Rt|0,Mt)+dt|0}function bt(ht,wt,At,Ct,dt,Et,Rt,Mt){return gt(ht+(wt^(At|~Ct))+Et+Rt|0,Mt)+dt|0}return ripemd160=ot,ripemd160}var sha_js={exports:{}},hash$1,hasRequiredHash$1;function requireHash$1(){if(hasRequiredHash$1)return hash$1;hasRequiredHash$1=1;var o=requireSafeBuffer$1().Buffer;function e(a,c){this._block=o.alloc(a),this._finalSize=c,this._blockSize=a,this._len=0}return e.prototype.update=function(a,c){typeof a=="string"&&(c=c||"utf8",a=o.from(a,c));for(var j=this._block,d=this._blockSize,et=a.length,at=this._len,st=0;st<et;){for(var ct=at%d,ot=Math.min(et-st,d-ct),gt=0;gt<ot;gt++)j[ct+gt]=a[st+gt];at+=ot,st+=ot,at%d===0&&this._update(j)}return this._len+=et,this},e.prototype.digest=function(a){var c=this._len%this._blockSize;this._block[c]=128,this._block.fill(0,c+1),c>=this._finalSize&&(this._update(this._block),this._block.fill(0));var j=this._len*8;if(j<=4294967295)this._block.writeUInt32BE(j,this._blockSize-4);else{var d=(j&4294967295)>>>0,et=(j-d)/4294967296;this._block.writeUInt32BE(et,this._blockSize-8),this._block.writeUInt32BE(d,this._blockSize-4)}this._update(this._block);var at=this._hash();return a?at.toString(a):at},e.prototype._update=function(){throw new Error("_update must be implemented by subclass")},hash$1=e,hash$1}var sha$1,hasRequiredSha$1;function requireSha$1(){if(hasRequiredSha$1)return sha$1;hasRequiredSha$1=1;var o=requireInherits_browser(),e=requireHash$1(),a=requireSafeBuffer$1().Buffer,c=[1518500249,1859775393,-1894007588,-899497514],j=new Array(80);function d(){this.init(),this._w=j,e.call(this,64,56)}o(d,e),d.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function et(ct){return ct<<5|ct>>>27}function at(ct){return ct<<30|ct>>>2}function st(ct,ot,gt,ft){return ct===0?ot&gt|~ot&ft:ct===2?ot&gt|ot&ft|gt&ft:ot^gt^ft}return d.prototype._update=function(ct){for(var ot=this._w,gt=this._a|0,ft=this._b|0,yt=this._c|0,vt=this._d|0,rt=this._e|0,bt=0;bt<16;++bt)ot[bt]=ct.readInt32BE(bt*4);for(;bt<80;++bt)ot[bt]=ot[bt-3]^ot[bt-8]^ot[bt-14]^ot[bt-16];for(var ht=0;ht<80;++ht){var wt=~~(ht/20),At=et(gt)+st(wt,ft,yt,vt)+rt+ot[ht]+c[wt]|0;rt=vt,vt=yt,yt=at(ft),ft=gt,gt=At}this._a=gt+this._a|0,this._b=ft+this._b|0,this._c=yt+this._c|0,this._d=vt+this._d|0,this._e=rt+this._e|0},d.prototype._hash=function(){var ct=a.allocUnsafe(20);return ct.writeInt32BE(this._a|0,0),ct.writeInt32BE(this._b|0,4),ct.writeInt32BE(this._c|0,8),ct.writeInt32BE(this._d|0,12),ct.writeInt32BE(this._e|0,16),ct},sha$1=d,sha$1}var sha1,hasRequiredSha1;function requireSha1(){if(hasRequiredSha1)return sha1;hasRequiredSha1=1;var o=requireInherits_browser(),e=requireHash$1(),a=requireSafeBuffer$1().Buffer,c=[1518500249,1859775393,-1894007588,-899497514],j=new Array(80);function d(){this.init(),this._w=j,e.call(this,64,56)}o(d,e),d.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function et(ot){return ot<<1|ot>>>31}function at(ot){return ot<<5|ot>>>27}function st(ot){return ot<<30|ot>>>2}function ct(ot,gt,ft,yt){return ot===0?gt&ft|~gt&yt:ot===2?gt&ft|gt&yt|ft&yt:gt^ft^yt}return d.prototype._update=function(ot){for(var gt=this._w,ft=this._a|0,yt=this._b|0,vt=this._c|0,rt=this._d|0,bt=this._e|0,ht=0;ht<16;++ht)gt[ht]=ot.readInt32BE(ht*4);for(;ht<80;++ht)gt[ht]=et(gt[ht-3]^gt[ht-8]^gt[ht-14]^gt[ht-16]);for(var wt=0;wt<80;++wt){var At=~~(wt/20),Ct=at(ft)+ct(At,yt,vt,rt)+bt+gt[wt]+c[At]|0;bt=rt,rt=vt,vt=st(yt),yt=ft,ft=Ct}this._a=ft+this._a|0,this._b=yt+this._b|0,this._c=vt+this._c|0,this._d=rt+this._d|0,this._e=bt+this._e|0},d.prototype._hash=function(){var ot=a.allocUnsafe(20);return ot.writeInt32BE(this._a|0,0),ot.writeInt32BE(this._b|0,4),ot.writeInt32BE(this._c|0,8),ot.writeInt32BE(this._d|0,12),ot.writeInt32BE(this._e|0,16),ot},sha1=d,sha1}var sha256$1,hasRequiredSha256;function requireSha256(){if(hasRequiredSha256)return sha256$1;hasRequiredSha256=1;var o=requireInherits_browser(),e=requireHash$1(),a=requireSafeBuffer$1().Buffer,c=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],j=new Array(64);function d(){this.init(),this._w=j,e.call(this,64,56)}o(d,e),d.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function et(ft,yt,vt){return vt^ft&(yt^vt)}function at(ft,yt,vt){return ft&yt|vt&(ft|yt)}function st(ft){return(ft>>>2|ft<<30)^(ft>>>13|ft<<19)^(ft>>>22|ft<<10)}function ct(ft){return(ft>>>6|ft<<26)^(ft>>>11|ft<<21)^(ft>>>25|ft<<7)}function ot(ft){return(ft>>>7|ft<<25)^(ft>>>18|ft<<14)^ft>>>3}function gt(ft){return(ft>>>17|ft<<15)^(ft>>>19|ft<<13)^ft>>>10}return d.prototype._update=function(ft){for(var yt=this._w,vt=this._a|0,rt=this._b|0,bt=this._c|0,ht=this._d|0,wt=this._e|0,At=this._f|0,Ct=this._g|0,dt=this._h|0,Et=0;Et<16;++Et)yt[Et]=ft.readInt32BE(Et*4);for(;Et<64;++Et)yt[Et]=gt(yt[Et-2])+yt[Et-7]+ot(yt[Et-15])+yt[Et-16]|0;for(var Rt=0;Rt<64;++Rt){var Mt=dt+ct(wt)+et(wt,At,Ct)+c[Rt]+yt[Rt]|0,_t=st(vt)+at(vt,rt,bt)|0;dt=Ct,Ct=At,At=wt,wt=ht+Mt|0,ht=bt,bt=rt,rt=vt,vt=Mt+_t|0}this._a=vt+this._a|0,this._b=rt+this._b|0,this._c=bt+this._c|0,this._d=ht+this._d|0,this._e=wt+this._e|0,this._f=At+this._f|0,this._g=Ct+this._g|0,this._h=dt+this._h|0},d.prototype._hash=function(){var ft=a.allocUnsafe(32);return ft.writeInt32BE(this._a,0),ft.writeInt32BE(this._b,4),ft.writeInt32BE(this._c,8),ft.writeInt32BE(this._d,12),ft.writeInt32BE(this._e,16),ft.writeInt32BE(this._f,20),ft.writeInt32BE(this._g,24),ft.writeInt32BE(this._h,28),ft},sha256$1=d,sha256$1}var sha224$1,hasRequiredSha224;function requireSha224(){if(hasRequiredSha224)return sha224$1;hasRequiredSha224=1;var o=requireInherits_browser(),e=requireSha256(),a=requireHash$1(),c=requireSafeBuffer$1().Buffer,j=new Array(64);function d(){this.init(),this._w=j,a.call(this,64,56)}return o(d,e),d.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},d.prototype._hash=function(){var et=c.allocUnsafe(28);return et.writeInt32BE(this._a,0),et.writeInt32BE(this._b,4),et.writeInt32BE(this._c,8),et.writeInt32BE(this._d,12),et.writeInt32BE(this._e,16),et.writeInt32BE(this._f,20),et.writeInt32BE(this._g,24),et},sha224$1=d,sha224$1}var sha512$1,hasRequiredSha512;function requireSha512(){if(hasRequiredSha512)return sha512$1;hasRequiredSha512=1;var o=requireInherits_browser(),e=requireHash$1(),a=requireSafeBuffer$1().Buffer,c=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],j=new Array(160);function d(){this.init(),this._w=j,e.call(this,128,112)}o(d,e),d.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function et(rt,bt,ht){return ht^rt&(bt^ht)}function at(rt,bt,ht){return rt&bt|ht&(rt|bt)}function st(rt,bt){return(rt>>>28|bt<<4)^(bt>>>2|rt<<30)^(bt>>>7|rt<<25)}function ct(rt,bt){return(rt>>>14|bt<<18)^(rt>>>18|bt<<14)^(bt>>>9|rt<<23)}function ot(rt,bt){return(rt>>>1|bt<<31)^(rt>>>8|bt<<24)^rt>>>7}function gt(rt,bt){return(rt>>>1|bt<<31)^(rt>>>8|bt<<24)^(rt>>>7|bt<<25)}function ft(rt,bt){return(rt>>>19|bt<<13)^(bt>>>29|rt<<3)^rt>>>6}function yt(rt,bt){return(rt>>>19|bt<<13)^(bt>>>29|rt<<3)^(rt>>>6|bt<<26)}function vt(rt,bt){return rt>>>0<bt>>>0?1:0}return d.prototype._update=function(rt){for(var bt=this._w,ht=this._ah|0,wt=this._bh|0,At=this._ch|0,Ct=this._dh|0,dt=this._eh|0,Et=this._fh|0,Rt=this._gh|0,Mt=this._hh|0,_t=this._al|0,kt=this._bl|0,nt=this._cl|0,s=this._dl|0,b=this._el|0,$=this._fl|0,_e=this._gl|0,it=this._hl|0,pt=0;pt<32;pt+=2)bt[pt]=rt.readInt32BE(pt*4),bt[pt+1]=rt.readInt32BE(pt*4+4);for(;pt<160;pt+=2){var mt=bt[pt-30],lt=bt[pt-15*2+1],_=ot(mt,lt),tt=gt(lt,mt);mt=bt[pt-2*2],lt=bt[pt-2*2+1];var Tt=ft(mt,lt),It=yt(lt,mt),Nt=bt[pt-7*2],Ut=bt[pt-7*2+1],Gt=bt[pt-16*2],Pt=bt[pt-16*2+1],qt=tt+Ut|0,Kt=_+Nt+vt(qt,tt)|0;qt=qt+It|0,Kt=Kt+Tt+vt(qt,It)|0,qt=qt+Pt|0,Kt=Kt+Gt+vt(qt,Pt)|0,bt[pt]=Kt,bt[pt+1]=qt}for(var jt=0;jt<160;jt+=2){Kt=bt[jt],qt=bt[jt+1];var Ht=at(ht,wt,At),Bt=at(_t,kt,nt),Jt=st(ht,_t),sr=st(_t,ht),hr=ct(dt,b),Ar=ct(b,dt),gn=c[jt],Lr=c[jt+1],wr=et(dt,Et,Rt),En=et(b,$,_e),Dr=it+Ar|0,Qr=Mt+hr+vt(Dr,it)|0;Dr=Dr+En|0,Qr=Qr+wr+vt(Dr,En)|0,Dr=Dr+Lr|0,Qr=Qr+gn+vt(Dr,Lr)|0,Dr=Dr+qt|0,Qr=Qr+Kt+vt(Dr,qt)|0;var Dn=sr+Bt|0,Br=Jt+Ht+vt(Dn,sr)|0;Mt=Rt,it=_e,Rt=Et,_e=$,Et=dt,$=b,b=s+Dr|0,dt=Ct+Qr+vt(b,s)|0,Ct=At,s=nt,At=wt,nt=kt,wt=ht,kt=_t,_t=Dr+Dn|0,ht=Qr+Br+vt(_t,Dr)|0}this._al=this._al+_t|0,this._bl=this._bl+kt|0,this._cl=this._cl+nt|0,this._dl=this._dl+s|0,this._el=this._el+b|0,this._fl=this._fl+$|0,this._gl=this._gl+_e|0,this._hl=this._hl+it|0,this._ah=this._ah+ht+vt(this._al,_t)|0,this._bh=this._bh+wt+vt(this._bl,kt)|0,this._ch=this._ch+At+vt(this._cl,nt)|0,this._dh=this._dh+Ct+vt(this._dl,s)|0,this._eh=this._eh+dt+vt(this._el,b)|0,this._fh=this._fh+Et+vt(this._fl,$)|0,this._gh=this._gh+Rt+vt(this._gl,_e)|0,this._hh=this._hh+Mt+vt(this._hl,it)|0},d.prototype._hash=function(){var rt=a.allocUnsafe(64);function bt(ht,wt,At){rt.writeInt32BE(ht,At),rt.writeInt32BE(wt,At+4)}return bt(this._ah,this._al,0),bt(this._bh,this._bl,8),bt(this._ch,this._cl,16),bt(this._dh,this._dl,24),bt(this._eh,this._el,32),bt(this._fh,this._fl,40),bt(this._gh,this._gl,48),bt(this._hh,this._hl,56),rt},sha512$1=d,sha512$1}var sha384$1,hasRequiredSha384;function requireSha384(){if(hasRequiredSha384)return sha384$1;hasRequiredSha384=1;var o=requireInherits_browser(),e=requireSha512(),a=requireHash$1(),c=requireSafeBuffer$1().Buffer,j=new Array(160);function d(){this.init(),this._w=j,a.call(this,128,112)}return o(d,e),d.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},d.prototype._hash=function(){var et=c.allocUnsafe(48);function at(st,ct,ot){et.writeInt32BE(st,ot),et.writeInt32BE(ct,ot+4)}return at(this._ah,this._al,0),at(this._bh,this._bl,8),at(this._ch,this._cl,16),at(this._dh,this._dl,24),at(this._eh,this._el,32),at(this._fh,this._fl,40),et},sha384$1=d,sha384$1}var hasRequiredSha_js;function requireSha_js(){if(hasRequiredSha_js)return sha_js.exports;hasRequiredSha_js=1;var o=sha_js.exports=function(a){a=a.toLowerCase();var c=o[a];if(!c)throw new Error(a+" is not supported (we accept pull requests)");return new c};return o.sha=requireSha$1(),o.sha1=requireSha1(),o.sha224=requireSha224(),o.sha256=requireSha256(),o.sha384=requireSha384(),o.sha512=requireSha512(),sha_js.exports}var cipherBase,hasRequiredCipherBase;function requireCipherBase(){if(hasRequiredCipherBase)return cipherBase;hasRequiredCipherBase=1;var o=requireSafeBuffer$1().Buffer,e=requireStreamBrowserify().Transform,a=requireString_decoder().StringDecoder,c=requireInherits_browser();function j(d){e.call(this),this.hashMode=typeof d=="string",this.hashMode?this[d]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}return c(j,e),j.prototype.update=function(d,et,at){typeof d=="string"&&(d=o.from(d,et));var st=this._update(d);return this.hashMode?this:(at&&(st=this._toString(st,at)),st)},j.prototype.setAutoPadding=function(){},j.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},j.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},j.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},j.prototype._transform=function(d,et,at){var st;try{this.hashMode?this._update(d):this.push(this._update(d))}catch(ct){st=ct}finally{at(st)}},j.prototype._flush=function(d){var et;try{this.push(this.__final())}catch(at){et=at}d(et)},j.prototype._finalOrDigest=function(d){var et=this.__final()||o.alloc(0);return d&&(et=this._toString(et,d,!0)),et},j.prototype._toString=function(d,et,at){if(this._decoder||(this._decoder=new a(et),this._encoding=et),this._encoding!==et)throw new Error("can't switch encodings");var st=this._decoder.write(d);return at&&(st+=this._decoder.end()),st},cipherBase=j,cipherBase}var browser$b,hasRequiredBrowser$9;function requireBrowser$9(){if(hasRequiredBrowser$9)return browser$b;hasRequiredBrowser$9=1;var o=requireInherits_browser(),e=requireMd5_js(),a=requireRipemd160(),c=requireSha_js(),j=requireCipherBase();function d(et){j.call(this,"digest"),this._hash=et}return o(d,j),d.prototype._update=function(et){this._hash.update(et)},d.prototype._final=function(){return this._hash.digest()},browser$b=function(at){return at=at.toLowerCase(),at==="md5"?new e:at==="rmd160"||at==="ripemd160"?new a:new d(c(at))},browser$b}var legacy,hasRequiredLegacy;function requireLegacy(){if(hasRequiredLegacy)return legacy;hasRequiredLegacy=1;var o=requireInherits_browser(),e=requireSafeBuffer$1().Buffer,a=requireCipherBase(),c=e.alloc(128),j=64;function d(et,at){a.call(this,"digest"),typeof at=="string"&&(at=e.from(at)),this._alg=et,this._key=at,at.length>j?at=et(at):at.length<j&&(at=e.concat([at,c],j));for(var st=this._ipad=e.allocUnsafe(j),ct=this._opad=e.allocUnsafe(j),ot=0;ot<j;ot++)st[ot]=at[ot]^54,ct[ot]=at[ot]^92;this._hash=[st]}return o(d,a),d.prototype._update=function(et){this._hash.push(et)},d.prototype._final=function(){var et=this._alg(e.concat(this._hash));return this._alg(e.concat([this._opad,et]))},legacy=d,legacy}var md5,hasRequiredMd5;function requireMd5(){if(hasRequiredMd5)return md5;hasRequiredMd5=1;var o=requireMd5_js();return md5=function(e){return new o().update(e).digest()},md5}var browser$a,hasRequiredBrowser$8;function requireBrowser$8(){if(hasRequiredBrowser$8)return browser$a;hasRequiredBrowser$8=1;var o=requireInherits_browser(),e=requireLegacy(),a=requireCipherBase(),c=requireSafeBuffer$1().Buffer,j=requireMd5(),d=requireRipemd160(),et=requireSha_js(),at=c.alloc(128);function st(ct,ot){a.call(this,"digest"),typeof ot=="string"&&(ot=c.from(ot));var gt=ct==="sha512"||ct==="sha384"?128:64;if(this._alg=ct,this._key=ot,ot.length>gt){var ft=ct==="rmd160"?new d:et(ct);ot=ft.update(ot).digest()}else ot.length<gt&&(ot=c.concat([ot,at],gt));for(var yt=this._ipad=c.allocUnsafe(gt),vt=this._opad=c.allocUnsafe(gt),rt=0;rt<gt;rt++)yt[rt]=ot[rt]^54,vt[rt]=ot[rt]^92;this._hash=ct==="rmd160"?new d:et(ct),this._hash.update(yt)}return o(st,a),st.prototype._update=function(ct){this._hash.update(ct)},st.prototype._final=function(){var ct=this._hash.digest(),ot=this._alg==="rmd160"?new d:et(this._alg);return ot.update(this._opad).update(ct).digest()},browser$a=function(ot,gt){return ot=ot.toLowerCase(),ot==="rmd160"||ot==="ripemd160"?new st("rmd160",gt):ot==="md5"?new e(j,gt):new st(ot,gt)},browser$a}const sha224WithRSAEncryption={sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption={sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption={sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption={sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},sha256={sign:"ecdsa",hash:"sha256",id:""},sha224={sign:"ecdsa",hash:"sha224",id:""},sha384={sign:"ecdsa",hash:"sha384",id:""},sha512={sign:"ecdsa",hash:"sha512",id:""},DSA={sign:"dsa",hash:"sha1",id:""},ripemd160WithRSA={sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption={sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},require$$6$1={sha224WithRSAEncryption,"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption,"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption,"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption,"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256,sha224,sha384,sha512,"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA,"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA,"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption,"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}};var algos,hasRequiredAlgos;function requireAlgos(){return hasRequiredAlgos||(hasRequiredAlgos=1,algos=require$$6$1),algos}var browser$9={},precondition,hasRequiredPrecondition;function requirePrecondition(){if(hasRequiredPrecondition)return precondition;hasRequiredPrecondition=1;var o=Math.pow(2,30)-1;return precondition=function(e,a){if(typeof e!="number")throw new TypeError("Iterations not a number");if(e<0)throw new TypeError("Bad iterations");if(typeof a!="number")throw new TypeError("Key length not a number");if(a<0||a>o||a!==a)throw new TypeError("Bad key length")},precondition}var defaultEncoding_1,hasRequiredDefaultEncoding;function requireDefaultEncoding(){if(hasRequiredDefaultEncoding)return defaultEncoding_1;hasRequiredDefaultEncoding=1;var o;if(commonjsGlobal.process&&commonjsGlobal.process.browser)o="utf-8";else if(commonjsGlobal.process&&commonjsGlobal.process.version){var e=parseInt(process$1.version.split(".")[0].slice(1),10);o=e>=6?"utf-8":"binary"}else o="utf-8";return defaultEncoding_1=o,defaultEncoding_1}var toBuffer,hasRequiredToBuffer;function requireToBuffer(){if(hasRequiredToBuffer)return toBuffer;hasRequiredToBuffer=1;var o=requireSafeBuffer$1().Buffer;return toBuffer=function(e,a,c){if(o.isBuffer(e))return e;if(typeof e=="string")return o.from(e,a);if(ArrayBuffer.isView(e))return o.from(e.buffer);throw new TypeError(c+" must be a string, a Buffer, a typed array or a DataView")},toBuffer}var syncBrowser,hasRequiredSyncBrowser;function requireSyncBrowser(){if(hasRequiredSyncBrowser)return syncBrowser;hasRequiredSyncBrowser=1;var o=requireMd5(),e=requireRipemd160(),a=requireSha_js(),c=requireSafeBuffer$1().Buffer,j=requirePrecondition(),d=requireDefaultEncoding(),et=requireToBuffer(),at=c.alloc(128),st={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function ct(ft,yt,vt){var rt=ot(ft),bt=ft==="sha512"||ft==="sha384"?128:64;yt.length>bt?yt=rt(yt):yt.length<bt&&(yt=c.concat([yt,at],bt));for(var ht=c.allocUnsafe(bt+st[ft]),wt=c.allocUnsafe(bt+st[ft]),At=0;At<bt;At++)ht[At]=yt[At]^54,wt[At]=yt[At]^92;var Ct=c.allocUnsafe(bt+vt+4);ht.copy(Ct,0,0,bt),this.ipad1=Ct,this.ipad2=ht,this.opad=wt,this.alg=ft,this.blocksize=bt,this.hash=rt,this.size=st[ft]}ct.prototype.run=function(ft,yt){ft.copy(yt,this.blocksize);var vt=this.hash(yt);return vt.copy(this.opad,this.blocksize),this.hash(this.opad)};function ot(ft){function yt(rt){return a(ft).update(rt).digest()}function vt(rt){return new e().update(rt).digest()}return ft==="rmd160"||ft==="ripemd160"?vt:ft==="md5"?o:yt}function gt(ft,yt,vt,rt,bt){j(vt,rt),ft=et(ft,d,"Password"),yt=et(yt,d,"Salt"),bt=bt||"sha1";var ht=new ct(bt,ft,yt.length),wt=c.allocUnsafe(rt),At=c.allocUnsafe(yt.length+4);yt.copy(At,0,0,yt.length);for(var Ct=0,dt=st[bt],Et=Math.ceil(rt/dt),Rt=1;Rt<=Et;Rt++){At.writeUInt32BE(Rt,yt.length);for(var Mt=ht.run(At,ht.ipad1),_t=Mt,kt=1;kt<vt;kt++){_t=ht.run(_t,ht.ipad2);for(var nt=0;nt<dt;nt++)Mt[nt]^=_t[nt]}Mt.copy(wt,Ct),Ct+=dt}return wt}return syncBrowser=gt,syncBrowser}var async,hasRequiredAsync;function requireAsync(){if(hasRequiredAsync)return async;hasRequiredAsync=1;var o=requireSafeBuffer$1().Buffer,e=requirePrecondition(),a=requireDefaultEncoding(),c=requireSyncBrowser(),j=requireToBuffer(),d,et=commonjsGlobal.crypto&&commonjsGlobal.crypto.subtle,at={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},st=[];function ct(vt){if(commonjsGlobal.process&&!commonjsGlobal.process.browser||!et||!et.importKey||!et.deriveBits)return Promise.resolve(!1);if(st[vt]!==void 0)return st[vt];d=d||o.alloc(8);var rt=ft(d,d,10,128,vt).then(function(){return!0}).catch(function(){return!1});return st[vt]=rt,rt}var ot;function gt(){return ot||(commonjsGlobal.process&&commonjsGlobal.process.nextTick?ot=commonjsGlobal.process.nextTick:commonjsGlobal.queueMicrotask?ot=commonjsGlobal.queueMicrotask:commonjsGlobal.setImmediate?ot=commonjsGlobal.setImmediate:ot=commonjsGlobal.setTimeout,ot)}function ft(vt,rt,bt,ht,wt){return et.importKey("raw",vt,{name:"PBKDF2"},!1,["deriveBits"]).then(function(At){return et.deriveBits({name:"PBKDF2",salt:rt,iterations:bt,hash:{name:wt}},At,ht<<3)}).then(function(At){return o.from(At)})}function yt(vt,rt){vt.then(function(bt){gt()(function(){rt(null,bt)})},function(bt){gt()(function(){rt(bt)})})}return async=function(vt,rt,bt,ht,wt,At){typeof wt=="function"&&(At=wt,wt=void 0),wt=wt||"sha1";var Ct=at[wt.toLowerCase()];if(!Ct||typeof commonjsGlobal.Promise!="function"){gt()(function(){var dt;try{dt=c(vt,rt,bt,ht,wt)}catch(Et){return At(Et)}At(null,dt)});return}if(e(bt,ht),vt=j(vt,a,"Password"),rt=j(rt,a,"Salt"),typeof At!="function")throw new Error("No callback provided to pbkdf2");yt(ct(Ct).then(function(dt){return dt?ft(vt,rt,bt,ht,Ct):c(vt,rt,bt,ht,wt)}),At)},async}var hasRequiredBrowser$7;function requireBrowser$7(){return hasRequiredBrowser$7||(hasRequiredBrowser$7=1,browser$9.pbkdf2=requireAsync(),browser$9.pbkdf2Sync=requireSyncBrowser()),browser$9}var browser$8={},des$1={},utils$4={},hasRequiredUtils$4;function requireUtils$4(){if(hasRequiredUtils$4)return utils$4;hasRequiredUtils$4=1,utils$4.readUInt32BE=function(j,d){var et=j[0+d]<<24|j[1+d]<<16|j[2+d]<<8|j[3+d];return et>>>0},utils$4.writeUInt32BE=function(j,d,et){j[0+et]=d>>>24,j[1+et]=d>>>16&255,j[2+et]=d>>>8&255,j[3+et]=d&255},utils$4.ip=function(j,d,et,at){for(var st=0,ct=0,ot=6;ot>=0;ot-=2){for(var gt=0;gt<=24;gt+=8)st<<=1,st|=d>>>gt+ot&1;for(var gt=0;gt<=24;gt+=8)st<<=1,st|=j>>>gt+ot&1}for(var ot=6;ot>=0;ot-=2){for(var gt=1;gt<=25;gt+=8)ct<<=1,ct|=d>>>gt+ot&1;for(var gt=1;gt<=25;gt+=8)ct<<=1,ct|=j>>>gt+ot&1}et[at+0]=st>>>0,et[at+1]=ct>>>0},utils$4.rip=function(j,d,et,at){for(var st=0,ct=0,ot=0;ot<4;ot++)for(var gt=24;gt>=0;gt-=8)st<<=1,st|=d>>>gt+ot&1,st<<=1,st|=j>>>gt+ot&1;for(var ot=4;ot<8;ot++)for(var gt=24;gt>=0;gt-=8)ct<<=1,ct|=d>>>gt+ot&1,ct<<=1,ct|=j>>>gt+ot&1;et[at+0]=st>>>0,et[at+1]=ct>>>0},utils$4.pc1=function(j,d,et,at){for(var st=0,ct=0,ot=7;ot>=5;ot--){for(var gt=0;gt<=24;gt+=8)st<<=1,st|=d>>gt+ot&1;for(var gt=0;gt<=24;gt+=8)st<<=1,st|=j>>gt+ot&1}for(var gt=0;gt<=24;gt+=8)st<<=1,st|=d>>gt+ot&1;for(var ot=1;ot<=3;ot++){for(var gt=0;gt<=24;gt+=8)ct<<=1,ct|=d>>gt+ot&1;for(var gt=0;gt<=24;gt+=8)ct<<=1,ct|=j>>gt+ot&1}for(var gt=0;gt<=24;gt+=8)ct<<=1,ct|=j>>gt+ot&1;et[at+0]=st>>>0,et[at+1]=ct>>>0},utils$4.r28shl=function(j,d){return j<<d&268435455|j>>>28-d};var o=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];utils$4.pc2=function(j,d,et,at){for(var st=0,ct=0,ot=o.length>>>1,gt=0;gt<ot;gt++)st<<=1,st|=j>>>o[gt]&1;for(var gt=ot;gt<o.length;gt++)ct<<=1,ct|=d>>>o[gt]&1;et[at+0]=st>>>0,et[at+1]=ct>>>0},utils$4.expand=function(j,d,et){var at=0,st=0;at=(j&1)<<5|j>>>27;for(var ct=23;ct>=15;ct-=4)at<<=6,at|=j>>>ct&63;for(var ct=11;ct>=3;ct-=4)st|=j>>>ct&63,st<<=6;st|=(j&31)<<1|j>>>31,d[et+0]=at>>>0,d[et+1]=st>>>0};var e=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];utils$4.substitute=function(j,d){for(var et=0,at=0;at<4;at++){var st=j>>>18-at*6&63,ct=e[at*64+st];et<<=4,et|=ct}for(var at=0;at<4;at++){var st=d>>>18-at*6&63,ct=e[4*64+at*64+st];et<<=4,et|=ct}return et>>>0};var a=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];return utils$4.permute=function(j){for(var d=0,et=0;et<a.length;et++)d<<=1,d|=j>>>a[et]&1;return d>>>0},utils$4.padSplit=function(j,d,et){for(var at=j.toString(2);at.length<d;)at="0"+at;for(var st=[],ct=0;ct<d;ct+=et)st.push(at.slice(ct,ct+et));return st.join(" ")},utils$4}var minimalisticAssert,hasRequiredMinimalisticAssert;function requireMinimalisticAssert(){if(hasRequiredMinimalisticAssert)return minimalisticAssert;hasRequiredMinimalisticAssert=1,minimalisticAssert=o;function o(e,a){if(!e)throw new Error(a||"Assertion failed")}return o.equal=function(a,c,j){if(a!=c)throw new Error(j||"Assertion failed: "+a+" != "+c)},minimalisticAssert}var cipher,hasRequiredCipher;function requireCipher(){if(hasRequiredCipher)return cipher;hasRequiredCipher=1;var o=requireMinimalisticAssert();function e(a){this.options=a,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0,this.padding=a.padding!==!1}return cipher=e,e.prototype._init=function(){},e.prototype.update=function(c){return c.length===0?[]:this.type==="decrypt"?this._updateDecrypt(c):this._updateEncrypt(c)},e.prototype._buffer=function(c,j){for(var d=Math.min(this.buffer.length-this.bufferOff,c.length-j),et=0;et<d;et++)this.buffer[this.bufferOff+et]=c[j+et];return this.bufferOff+=d,d},e.prototype._flushBuffer=function(c,j){return this._update(this.buffer,0,c,j),this.bufferOff=0,this.blockSize},e.prototype._updateEncrypt=function(c){var j=0,d=0,et=(this.bufferOff+c.length)/this.blockSize|0,at=new Array(et*this.blockSize);this.bufferOff!==0&&(j+=this._buffer(c,j),this.bufferOff===this.buffer.length&&(d+=this._flushBuffer(at,d)));for(var st=c.length-(c.length-j)%this.blockSize;j<st;j+=this.blockSize)this._update(c,j,at,d),d+=this.blockSize;for(;j<c.length;j++,this.bufferOff++)this.buffer[this.bufferOff]=c[j];return at},e.prototype._updateDecrypt=function(c){for(var j=0,d=0,et=Math.ceil((this.bufferOff+c.length)/this.blockSize)-1,at=new Array(et*this.blockSize);et>0;et--)j+=this._buffer(c,j),d+=this._flushBuffer(at,d);return j+=this._buffer(c,j),at},e.prototype.final=function(c){var j;c&&(j=this.update(c));var d;return this.type==="encrypt"?d=this._finalEncrypt():d=this._finalDecrypt(),j?j.concat(d):d},e.prototype._pad=function(c,j){if(j===0)return!1;for(;j<c.length;)c[j++]=0;return!0},e.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var c=new Array(this.blockSize);return this._update(this.buffer,0,c,0),c},e.prototype._unpad=function(c){return c},e.prototype._finalDecrypt=function(){o.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var c=new Array(this.blockSize);return this._flushBuffer(c,0),this._unpad(c)},cipher}var des,hasRequiredDes$1;function requireDes$1(){if(hasRequiredDes$1)return des;hasRequiredDes$1=1;var o=requireMinimalisticAssert(),e=requireInherits_browser(),a=requireUtils$4(),c=requireCipher();function j(){this.tmp=new Array(2),this.keys=null}function d(at){c.call(this,at);var st=new j;this._desState=st,this.deriveKeys(st,at.key)}e(d,c),des=d,d.create=function(st){return new d(st)};var et=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];return d.prototype.deriveKeys=function(st,ct){st.keys=new Array(16*2),o.equal(ct.length,this.blockSize,"Invalid key length");var ot=a.readUInt32BE(ct,0),gt=a.readUInt32BE(ct,4);a.pc1(ot,gt,st.tmp,0),ot=st.tmp[0],gt=st.tmp[1];for(var ft=0;ft<st.keys.length;ft+=2){var yt=et[ft>>>1];ot=a.r28shl(ot,yt),gt=a.r28shl(gt,yt),a.pc2(ot,gt,st.keys,ft)}},d.prototype._update=function(st,ct,ot,gt){var ft=this._desState,yt=a.readUInt32BE(st,ct),vt=a.readUInt32BE(st,ct+4);a.ip(yt,vt,ft.tmp,0),yt=ft.tmp[0],vt=ft.tmp[1],this.type==="encrypt"?this._encrypt(ft,yt,vt,ft.tmp,0):this._decrypt(ft,yt,vt,ft.tmp,0),yt=ft.tmp[0],vt=ft.tmp[1],a.writeUInt32BE(ot,yt,gt),a.writeUInt32BE(ot,vt,gt+4)},d.prototype._pad=function(st,ct){if(this.padding===!1)return!1;for(var ot=st.length-ct,gt=ct;gt<st.length;gt++)st[gt]=ot;return!0},d.prototype._unpad=function(st){if(this.padding===!1)return st;for(var ct=st[st.length-1],ot=st.length-ct;ot<st.length;ot++)o.equal(st[ot],ct);return st.slice(0,st.length-ct)},d.prototype._encrypt=function(st,ct,ot,gt,ft){for(var yt=ct,vt=ot,rt=0;rt<st.keys.length;rt+=2){var bt=st.keys[rt],ht=st.keys[rt+1];a.expand(vt,st.tmp,0),bt^=st.tmp[0],ht^=st.tmp[1];var wt=a.substitute(bt,ht),At=a.permute(wt),Ct=vt;vt=(yt^At)>>>0,yt=Ct}a.rip(vt,yt,gt,ft)},d.prototype._decrypt=function(st,ct,ot,gt,ft){for(var yt=ot,vt=ct,rt=st.keys.length-2;rt>=0;rt-=2){var bt=st.keys[rt],ht=st.keys[rt+1];a.expand(yt,st.tmp,0),bt^=st.tmp[0],ht^=st.tmp[1];var wt=a.substitute(bt,ht),At=a.permute(wt),Ct=yt;yt=(vt^At)>>>0,vt=Ct}a.rip(yt,vt,gt,ft)},des}var cbc$1={},hasRequiredCbc$1;function requireCbc$1(){if(hasRequiredCbc$1)return cbc$1;hasRequiredCbc$1=1;var o=requireMinimalisticAssert(),e=requireInherits_browser(),a={};function c(d){o.equal(d.length,8,"Invalid IV length"),this.iv=new Array(8);for(var et=0;et<this.iv.length;et++)this.iv[et]=d[et]}function j(d){function et(ot){d.call(this,ot),this._cbcInit()}e(et,d);for(var at=Object.keys(a),st=0;st<at.length;st++){var ct=at[st];et.prototype[ct]=a[ct]}return et.create=function(gt){return new et(gt)},et}return cbc$1.instantiate=j,a._cbcInit=function(){var et=new c(this.options.iv);this._cbcState=et},a._update=function(et,at,st,ct){var ot=this._cbcState,gt=this.constructor.super_.prototype,ft=ot.iv;if(this.type==="encrypt"){for(var yt=0;yt<this.blockSize;yt++)ft[yt]^=et[at+yt];gt._update.call(this,ft,0,st,ct);for(var yt=0;yt<this.blockSize;yt++)ft[yt]=st[ct+yt]}else{gt._update.call(this,et,at,st,ct);for(var yt=0;yt<this.blockSize;yt++)st[ct+yt]^=ft[yt];for(var yt=0;yt<this.blockSize;yt++)ft[yt]=et[at+yt]}},cbc$1}var ede,hasRequiredEde;function requireEde(){if(hasRequiredEde)return ede;hasRequiredEde=1;var o=requireMinimalisticAssert(),e=requireInherits_browser(),a=requireCipher(),c=requireDes$1();function j(et,at){o.equal(at.length,24,"Invalid key length");var st=at.slice(0,8),ct=at.slice(8,16),ot=at.slice(16,24);et==="encrypt"?this.ciphers=[c.create({type:"encrypt",key:st}),c.create({type:"decrypt",key:ct}),c.create({type:"encrypt",key:ot})]:this.ciphers=[c.create({type:"decrypt",key:ot}),c.create({type:"encrypt",key:ct}),c.create({type:"decrypt",key:st})]}function d(et){a.call(this,et);var at=new j(this.type,this.options.key);this._edeState=at}return e(d,a),ede=d,d.create=function(at){return new d(at)},d.prototype._update=function(at,st,ct,ot){var gt=this._edeState;gt.ciphers[0]._update(at,st,ct,ot),gt.ciphers[1]._update(ct,ot,ct,ot),gt.ciphers[2]._update(ct,ot,ct,ot)},d.prototype._pad=c.prototype._pad,d.prototype._unpad=c.prototype._unpad,ede}var hasRequiredDes;function requireDes(){return hasRequiredDes||(hasRequiredDes=1,des$1.utils=requireUtils$4(),des$1.Cipher=requireCipher(),des$1.DES=requireDes$1(),des$1.CBC=requireCbc$1(),des$1.EDE=requireEde()),des$1}var browserifyDes,hasRequiredBrowserifyDes;function requireBrowserifyDes(){if(hasRequiredBrowserifyDes)return browserifyDes;hasRequiredBrowserifyDes=1;var o=requireCipherBase(),e=requireDes(),a=requireInherits_browser(),c=requireSafeBuffer$1().Buffer,j={"des-ede3-cbc":e.CBC.instantiate(e.EDE),"des-ede3":e.EDE,"des-ede-cbc":e.CBC.instantiate(e.EDE),"des-ede":e.EDE,"des-cbc":e.CBC.instantiate(e.DES),"des-ecb":e.DES};j.des=j["des-cbc"],j.des3=j["des-ede3-cbc"],browserifyDes=d,a(d,o);function d(et){o.call(this);var at=et.mode.toLowerCase(),st=j[at],ct;et.decrypt?ct="decrypt":ct="encrypt";var ot=et.key;c.isBuffer(ot)||(ot=c.from(ot)),(at==="des-ede"||at==="des-ede-cbc")&&(ot=c.concat([ot,ot.slice(0,8)]));var gt=et.iv;c.isBuffer(gt)||(gt=c.from(gt)),this._des=st.create({key:ot,iv:gt,type:ct})}return d.prototype._update=function(et){return c.from(this._des.update(et))},d.prototype._final=function(){return c.from(this._des.final())},browserifyDes}var browser$7={},encrypter={},ecb={},hasRequiredEcb;function requireEcb(){return hasRequiredEcb||(hasRequiredEcb=1,ecb.encrypt=function(o,e){return o._cipher.encryptBlock(e)},ecb.decrypt=function(o,e){return o._cipher.decryptBlock(e)}),ecb}var cbc={},bufferXor,hasRequiredBufferXor;function requireBufferXor(){return hasRequiredBufferXor||(hasRequiredBufferXor=1,bufferXor=function(e,a){for(var c=Math.min(e.length,a.length),j=new Buffer(c),d=0;d<c;++d)j[d]=e[d]^a[d];return j}),bufferXor}var hasRequiredCbc;function requireCbc(){if(hasRequiredCbc)return cbc;hasRequiredCbc=1;var o=requireBufferXor();return cbc.encrypt=function(e,a){var c=o(a,e._prev);return e._prev=e._cipher.encryptBlock(c),e._prev},cbc.decrypt=function(e,a){var c=e._prev;e._prev=a;var j=e._cipher.decryptBlock(a);return o(j,c)},cbc}var cfb={},hasRequiredCfb;function requireCfb(){if(hasRequiredCfb)return cfb;hasRequiredCfb=1;var o=requireSafeBuffer$1().Buffer,e=requireBufferXor();function a(c,j,d){var et=j.length,at=e(j,c._cache);return c._cache=c._cache.slice(et),c._prev=o.concat([c._prev,d?j:at]),at}return cfb.encrypt=function(c,j,d){for(var et=o.allocUnsafe(0),at;j.length;)if(c._cache.length===0&&(c._cache=c._cipher.encryptBlock(c._prev),c._prev=o.allocUnsafe(0)),c._cache.length<=j.length)at=c._cache.length,et=o.concat([et,a(c,j.slice(0,at),d)]),j=j.slice(at);else{et=o.concat([et,a(c,j,d)]);break}return et},cfb}var cfb8={},hasRequiredCfb8;function requireCfb8(){if(hasRequiredCfb8)return cfb8;hasRequiredCfb8=1;var o=requireSafeBuffer$1().Buffer;function e(a,c,j){var d=a._cipher.encryptBlock(a._prev),et=d[0]^c;return a._prev=o.concat([a._prev.slice(1),o.from([j?c:et])]),et}return cfb8.encrypt=function(a,c,j){for(var d=c.length,et=o.allocUnsafe(d),at=-1;++at<d;)et[at]=e(a,c[at],j);return et},cfb8}var cfb1={},hasRequiredCfb1;function requireCfb1(){if(hasRequiredCfb1)return cfb1;hasRequiredCfb1=1;var o=requireSafeBuffer$1().Buffer;function e(c,j,d){for(var et,at=-1,st=8,ct=0,ot,gt;++at<st;)et=c._cipher.encryptBlock(c._prev),ot=j&1<<7-at?128:0,gt=et[0]^ot,ct+=(gt&128)>>at%8,c._prev=a(c._prev,d?ot:gt);return ct}function a(c,j){var d=c.length,et=-1,at=o.allocUnsafe(c.length);for(c=o.concat([c,o.from([j])]);++et<d;)at[et]=c[et]<<1|c[et+1]>>7;return at}return cfb1.encrypt=function(c,j,d){for(var et=j.length,at=o.allocUnsafe(et),st=-1;++st<et;)at[st]=e(c,j[st],d);return at},cfb1}var ofb={},hasRequiredOfb;function requireOfb(){if(hasRequiredOfb)return ofb;hasRequiredOfb=1;var o=requireBufferXor();function e(a){return a._prev=a._cipher.encryptBlock(a._prev),a._prev}return ofb.encrypt=function(a,c){for(;a._cache.length<c.length;)a._cache=Buffer.concat([a._cache,e(a)]);var j=a._cache.slice(0,c.length);return a._cache=a._cache.slice(c.length),o(c,j)},ofb}var ctr={},incr32_1,hasRequiredIncr32;function requireIncr32(){if(hasRequiredIncr32)return incr32_1;hasRequiredIncr32=1;function o(e){for(var a=e.length,c;a--;)if(c=e.readUInt8(a),c===255)e.writeUInt8(0,a);else{c++,e.writeUInt8(c,a);break}}return incr32_1=o,incr32_1}var hasRequiredCtr;function requireCtr(){if(hasRequiredCtr)return ctr;hasRequiredCtr=1;var o=requireBufferXor(),e=requireSafeBuffer$1().Buffer,a=requireIncr32();function c(d){var et=d._cipher.encryptBlockRaw(d._prev);return a(d._prev),et}var j=16;return ctr.encrypt=function(d,et){var at=Math.ceil(et.length/j),st=d._cache.length;d._cache=e.concat([d._cache,e.allocUnsafe(at*j)]);for(var ct=0;ct<at;ct++){var ot=c(d),gt=st+ct*j;d._cache.writeUInt32BE(ot[0],gt+0),d._cache.writeUInt32BE(ot[1],gt+4),d._cache.writeUInt32BE(ot[2],gt+8),d._cache.writeUInt32BE(ot[3],gt+12)}var ft=d._cache.slice(0,et.length);return d._cache=d._cache.slice(et.length),o(et,ft)},ctr}const aes128={cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192={cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256={cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},require$$2={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128,aes192,aes256,"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}};var modes_1,hasRequiredModes$1;function requireModes$1(){if(hasRequiredModes$1)return modes_1;hasRequiredModes$1=1;var o={ECB:requireEcb(),CBC:requireCbc(),CFB:requireCfb(),CFB8:requireCfb8(),CFB1:requireCfb1(),OFB:requireOfb(),CTR:requireCtr(),GCM:requireCtr()},e=require$$2;for(var a in e)e[a].module=o[e[a].mode];return modes_1=e,modes_1}var aes={},hasRequiredAes;function requireAes(){if(hasRequiredAes)return aes;hasRequiredAes=1;var o=requireSafeBuffer$1().Buffer;function e(at){o.isBuffer(at)||(at=o.from(at));for(var st=at.length/4|0,ct=new Array(st),ot=0;ot<st;ot++)ct[ot]=at.readUInt32BE(ot*4);return ct}function a(at){for(var st=0;st<at.length;at++)at[st]=0}function c(at,st,ct,ot,gt){for(var ft=ct[0],yt=ct[1],vt=ct[2],rt=ct[3],bt=at[0]^st[0],ht=at[1]^st[1],wt=at[2]^st[2],At=at[3]^st[3],Ct,dt,Et,Rt,Mt=4,_t=1;_t<gt;_t++)Ct=ft[bt>>>24]^yt[ht>>>16&255]^vt[wt>>>8&255]^rt[At&255]^st[Mt++],dt=ft[ht>>>24]^yt[wt>>>16&255]^vt[At>>>8&255]^rt[bt&255]^st[Mt++],Et=ft[wt>>>24]^yt[At>>>16&255]^vt[bt>>>8&255]^rt[ht&255]^st[Mt++],Rt=ft[At>>>24]^yt[bt>>>16&255]^vt[ht>>>8&255]^rt[wt&255]^st[Mt++],bt=Ct,ht=dt,wt=Et,At=Rt;return Ct=(ot[bt>>>24]<<24|ot[ht>>>16&255]<<16|ot[wt>>>8&255]<<8|ot[At&255])^st[Mt++],dt=(ot[ht>>>24]<<24|ot[wt>>>16&255]<<16|ot[At>>>8&255]<<8|ot[bt&255])^st[Mt++],Et=(ot[wt>>>24]<<24|ot[At>>>16&255]<<16|ot[bt>>>8&255]<<8|ot[ht&255])^st[Mt++],Rt=(ot[At>>>24]<<24|ot[bt>>>16&255]<<16|ot[ht>>>8&255]<<8|ot[wt&255])^st[Mt++],Ct=Ct>>>0,dt=dt>>>0,Et=Et>>>0,Rt=Rt>>>0,[Ct,dt,Et,Rt]}var j=[0,1,2,4,8,16,32,64,128,27,54],d=function(){for(var at=new Array(256),st=0;st<256;st++)st<128?at[st]=st<<1:at[st]=st<<1^283;for(var ct=[],ot=[],gt=[[],[],[],[]],ft=[[],[],[],[]],yt=0,vt=0,rt=0;rt<256;++rt){var bt=vt^vt<<1^vt<<2^vt<<3^vt<<4;bt=bt>>>8^bt&255^99,ct[yt]=bt,ot[bt]=yt;var ht=at[yt],wt=at[ht],At=at[wt],Ct=at[bt]*257^bt*16843008;gt[0][yt]=Ct<<24|Ct>>>8,gt[1][yt]=Ct<<16|Ct>>>16,gt[2][yt]=Ct<<8|Ct>>>24,gt[3][yt]=Ct,Ct=At*16843009^wt*65537^ht*257^yt*16843008,ft[0][bt]=Ct<<24|Ct>>>8,ft[1][bt]=Ct<<16|Ct>>>16,ft[2][bt]=Ct<<8|Ct>>>24,ft[3][bt]=Ct,yt===0?yt=vt=1:(yt=ht^at[at[at[At^ht]]],vt^=at[at[vt]])}return{SBOX:ct,INV_SBOX:ot,SUB_MIX:gt,INV_SUB_MIX:ft}}();function et(at){this._key=e(at),this._reset()}return et.blockSize=4*4,et.keySize=256/8,et.prototype.blockSize=et.blockSize,et.prototype.keySize=et.keySize,et.prototype._reset=function(){for(var at=this._key,st=at.length,ct=st+6,ot=(ct+1)*4,gt=[],ft=0;ft<st;ft++)gt[ft]=at[ft];for(ft=st;ft<ot;ft++){var yt=gt[ft-1];ft%st===0?(yt=yt<<8|yt>>>24,yt=d.SBOX[yt>>>24]<<24|d.SBOX[yt>>>16&255]<<16|d.SBOX[yt>>>8&255]<<8|d.SBOX[yt&255],yt^=j[ft/st|0]<<24):st>6&&ft%st===4&&(yt=d.SBOX[yt>>>24]<<24|d.SBOX[yt>>>16&255]<<16|d.SBOX[yt>>>8&255]<<8|d.SBOX[yt&255]),gt[ft]=gt[ft-st]^yt}for(var vt=[],rt=0;rt<ot;rt++){var bt=ot-rt,ht=gt[bt-(rt%4?0:4)];rt<4||bt<=4?vt[rt]=ht:vt[rt]=d.INV_SUB_MIX[0][d.SBOX[ht>>>24]]^d.INV_SUB_MIX[1][d.SBOX[ht>>>16&255]]^d.INV_SUB_MIX[2][d.SBOX[ht>>>8&255]]^d.INV_SUB_MIX[3][d.SBOX[ht&255]]}this._nRounds=ct,this._keySchedule=gt,this._invKeySchedule=vt},et.prototype.encryptBlockRaw=function(at){return at=e(at),c(at,this._keySchedule,d.SUB_MIX,d.SBOX,this._nRounds)},et.prototype.encryptBlock=function(at){var st=this.encryptBlockRaw(at),ct=o.allocUnsafe(16);return ct.writeUInt32BE(st[0],0),ct.writeUInt32BE(st[1],4),ct.writeUInt32BE(st[2],8),ct.writeUInt32BE(st[3],12),ct},et.prototype.decryptBlock=function(at){at=e(at);var st=at[1];at[1]=at[3],at[3]=st;var ct=c(at,this._invKeySchedule,d.INV_SUB_MIX,d.INV_SBOX,this._nRounds),ot=o.allocUnsafe(16);return ot.writeUInt32BE(ct[0],0),ot.writeUInt32BE(ct[3],4),ot.writeUInt32BE(ct[2],8),ot.writeUInt32BE(ct[1],12),ot},et.prototype.scrub=function(){a(this._keySchedule),a(this._invKeySchedule),a(this._key)},aes.AES=et,aes}var ghash,hasRequiredGhash;function requireGhash(){if(hasRequiredGhash)return ghash;hasRequiredGhash=1;var o=requireSafeBuffer$1().Buffer,e=o.alloc(16,0);function a(d){return[d.readUInt32BE(0),d.readUInt32BE(4),d.readUInt32BE(8),d.readUInt32BE(12)]}function c(d){var et=o.allocUnsafe(16);return et.writeUInt32BE(d[0]>>>0,0),et.writeUInt32BE(d[1]>>>0,4),et.writeUInt32BE(d[2]>>>0,8),et.writeUInt32BE(d[3]>>>0,12),et}function j(d){this.h=d,this.state=o.alloc(16,0),this.cache=o.allocUnsafe(0)}return j.prototype.ghash=function(d){for(var et=-1;++et<d.length;)this.state[et]^=d[et];this._multiply()},j.prototype._multiply=function(){for(var d=a(this.h),et=[0,0,0,0],at,st,ct,ot=-1;++ot<128;){for(st=(this.state[~~(ot/8)]&1<<7-ot%8)!==0,st&&(et[0]^=d[0],et[1]^=d[1],et[2]^=d[2],et[3]^=d[3]),ct=(d[3]&1)!==0,at=3;at>0;at--)d[at]=d[at]>>>1|(d[at-1]&1)<<31;d[0]=d[0]>>>1,ct&&(d[0]=d[0]^225<<24)}this.state=c(et)},j.prototype.update=function(d){this.cache=o.concat([this.cache,d]);for(var et;this.cache.length>=16;)et=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(et)},j.prototype.final=function(d,et){return this.cache.length&&this.ghash(o.concat([this.cache,e],16)),this.ghash(c([0,d,0,et])),this.state},ghash=j,ghash}var authCipher,hasRequiredAuthCipher;function requireAuthCipher(){if(hasRequiredAuthCipher)return authCipher;hasRequiredAuthCipher=1;var o=requireAes(),e=requireSafeBuffer$1().Buffer,a=requireCipherBase(),c=requireInherits_browser(),j=requireGhash(),d=requireBufferXor(),et=requireIncr32();function at(ot,gt){var ft=0;ot.length!==gt.length&&ft++;for(var yt=Math.min(ot.length,gt.length),vt=0;vt<yt;++vt)ft+=ot[vt]^gt[vt];return ft}function st(ot,gt,ft){if(gt.length===12)return ot._finID=e.concat([gt,e.from([0,0,0,1])]),e.concat([gt,e.from([0,0,0,2])]);var yt=new j(ft),vt=gt.length,rt=vt%16;yt.update(gt),rt&&(rt=16-rt,yt.update(e.alloc(rt,0))),yt.update(e.alloc(8,0));var bt=vt*8,ht=e.alloc(8);ht.writeUIntBE(bt,0,8),yt.update(ht),ot._finID=yt.state;var wt=e.from(ot._finID);return et(wt),wt}function ct(ot,gt,ft,yt){a.call(this);var vt=e.alloc(4,0);this._cipher=new o.AES(gt);var rt=this._cipher.encryptBlock(vt);this._ghash=new j(rt),ft=st(this,ft,rt),this._prev=e.from(ft),this._cache=e.allocUnsafe(0),this._secCache=e.allocUnsafe(0),this._decrypt=yt,this._alen=0,this._len=0,this._mode=ot,this._authTag=null,this._called=!1}return c(ct,a),ct.prototype._update=function(ot){if(!this._called&&this._alen){var gt=16-this._alen%16;gt<16&&(gt=e.alloc(gt,0),this._ghash.update(gt))}this._called=!0;var ft=this._mode.encrypt(this,ot);return this._decrypt?this._ghash.update(ot):this._ghash.update(ft),this._len+=ot.length,ft},ct.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var ot=d(this._ghash.final(this._alen*8,this._len*8),this._cipher.encryptBlock(this._finID));if(this._decrypt&&at(ot,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=ot,this._cipher.scrub()},ct.prototype.getAuthTag=function(){if(this._decrypt||!e.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},ct.prototype.setAuthTag=function(gt){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=gt},ct.prototype.setAAD=function(gt){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(gt),this._alen+=gt.length},authCipher=ct,authCipher}var streamCipher,hasRequiredStreamCipher;function requireStreamCipher(){if(hasRequiredStreamCipher)return streamCipher;hasRequiredStreamCipher=1;var o=requireAes(),e=requireSafeBuffer$1().Buffer,a=requireCipherBase(),c=requireInherits_browser();function j(d,et,at,st){a.call(this),this._cipher=new o.AES(et),this._prev=e.from(at),this._cache=e.allocUnsafe(0),this._secCache=e.allocUnsafe(0),this._decrypt=st,this._mode=d}return c(j,a),j.prototype._update=function(d){return this._mode.encrypt(this,d,this._decrypt)},j.prototype._final=function(){this._cipher.scrub()},streamCipher=j,streamCipher}var evp_bytestokey,hasRequiredEvp_bytestokey;function requireEvp_bytestokey(){if(hasRequiredEvp_bytestokey)return evp_bytestokey;hasRequiredEvp_bytestokey=1;var o=requireSafeBuffer$1().Buffer,e=requireMd5_js();function a(c,j,d,et){if(o.isBuffer(c)||(c=o.from(c,"binary")),j&&(o.isBuffer(j)||(j=o.from(j,"binary")),j.length!==8))throw new RangeError("salt should be Buffer with 8 byte length");for(var at=d/8,st=o.alloc(at),ct=o.alloc(et||0),ot=o.alloc(0);at>0||et>0;){var gt=new e;gt.update(ot),gt.update(c),j&&gt.update(j),ot=gt.digest();var ft=0;if(at>0){var yt=st.length-at;ft=Math.min(at,ot.length),ot.copy(st,yt,0,ft),at-=ft}if(ft<ot.length&&et>0){var vt=ct.length-et,rt=Math.min(et,ot.length-ft);ot.copy(ct,vt,ft,ft+rt),et-=rt}}return ot.fill(0),{key:st,iv:ct}}return evp_bytestokey=a,evp_bytestokey}var hasRequiredEncrypter;function requireEncrypter(){if(hasRequiredEncrypter)return encrypter;hasRequiredEncrypter=1;var o=requireModes$1(),e=requireAuthCipher(),a=requireSafeBuffer$1().Buffer,c=requireStreamCipher(),j=requireCipherBase(),d=requireAes(),et=requireEvp_bytestokey(),at=requireInherits_browser();function st(yt,vt,rt){j.call(this),this._cache=new ot,this._cipher=new d.AES(vt),this._prev=a.from(rt),this._mode=yt,this._autopadding=!0}at(st,j),st.prototype._update=function(yt){this._cache.add(yt);for(var vt,rt,bt=[];vt=this._cache.get();)rt=this._mode.encrypt(this,vt),bt.push(rt);return a.concat(bt)};var ct=a.alloc(16,16);st.prototype._final=function(){var yt=this._cache.flush();if(this._autopadding)return yt=this._mode.encrypt(this,yt),this._cipher.scrub(),yt;if(!yt.equals(ct))throw this._cipher.scrub(),new Error("data not multiple of block length")},st.prototype.setAutoPadding=function(yt){return this._autopadding=!!yt,this};function ot(){this.cache=a.allocUnsafe(0)}ot.prototype.add=function(yt){this.cache=a.concat([this.cache,yt])},ot.prototype.get=function(){if(this.cache.length>15){var yt=this.cache.slice(0,16);return this.cache=this.cache.slice(16),yt}return null},ot.prototype.flush=function(){for(var yt=16-this.cache.length,vt=a.allocUnsafe(yt),rt=-1;++rt<yt;)vt.writeUInt8(yt,rt);return a.concat([this.cache,vt])};function gt(yt,vt,rt){var bt=o[yt.toLowerCase()];if(!bt)throw new TypeError("invalid suite type");if(typeof vt=="string"&&(vt=a.from(vt)),vt.length!==bt.key/8)throw new TypeError("invalid key length "+vt.length);if(typeof rt=="string"&&(rt=a.from(rt)),bt.mode!=="GCM"&&rt.length!==bt.iv)throw new TypeError("invalid iv length "+rt.length);return bt.type==="stream"?new c(bt.module,vt,rt):bt.type==="auth"?new e(bt.module,vt,rt):new st(bt.module,vt,rt)}function ft(yt,vt){var rt=o[yt.toLowerCase()];if(!rt)throw new TypeError("invalid suite type");var bt=et(vt,!1,rt.key,rt.iv);return gt(yt,bt.key,bt.iv)}return encrypter.createCipheriv=gt,encrypter.createCipher=ft,encrypter}var decrypter={},hasRequiredDecrypter;function requireDecrypter(){if(hasRequiredDecrypter)return decrypter;hasRequiredDecrypter=1;var o=requireAuthCipher(),e=requireSafeBuffer$1().Buffer,a=requireModes$1(),c=requireStreamCipher(),j=requireCipherBase(),d=requireAes(),et=requireEvp_bytestokey(),at=requireInherits_browser();function st(yt,vt,rt){j.call(this),this._cache=new ct,this._last=void 0,this._cipher=new d.AES(vt),this._prev=e.from(rt),this._mode=yt,this._autopadding=!0}at(st,j),st.prototype._update=function(yt){this._cache.add(yt);for(var vt,rt,bt=[];vt=this._cache.get(this._autopadding);)rt=this._mode.decrypt(this,vt),bt.push(rt);return e.concat(bt)},st.prototype._final=function(){var yt=this._cache.flush();if(this._autopadding)return ot(this._mode.decrypt(this,yt));if(yt)throw new Error("data not multiple of block length")},st.prototype.setAutoPadding=function(yt){return this._autopadding=!!yt,this};function ct(){this.cache=e.allocUnsafe(0)}ct.prototype.add=function(yt){this.cache=e.concat([this.cache,yt])},ct.prototype.get=function(yt){var vt;if(yt){if(this.cache.length>16)return vt=this.cache.slice(0,16),this.cache=this.cache.slice(16),vt}else if(this.cache.length>=16)return vt=this.cache.slice(0,16),this.cache=this.cache.slice(16),vt;return null},ct.prototype.flush=function(){if(this.cache.length)return this.cache};function ot(yt){var vt=yt[15];if(vt<1||vt>16)throw new Error("unable to decrypt data");for(var rt=-1;++rt<vt;)if(yt[rt+(16-vt)]!==vt)throw new Error("unable to decrypt data");if(vt!==16)return yt.slice(0,16-vt)}function gt(yt,vt,rt){var bt=a[yt.toLowerCase()];if(!bt)throw new TypeError("invalid suite type");if(typeof rt=="string"&&(rt=e.from(rt)),bt.mode!=="GCM"&&rt.length!==bt.iv)throw new TypeError("invalid iv length "+rt.length);if(typeof vt=="string"&&(vt=e.from(vt)),vt.length!==bt.key/8)throw new TypeError("invalid key length "+vt.length);return bt.type==="stream"?new c(bt.module,vt,rt,!0):bt.type==="auth"?new o(bt.module,vt,rt,!0):new st(bt.module,vt,rt)}function ft(yt,vt){var rt=a[yt.toLowerCase()];if(!rt)throw new TypeError("invalid suite type");var bt=et(vt,!1,rt.key,rt.iv);return gt(yt,bt.key,bt.iv)}return decrypter.createDecipher=ft,decrypter.createDecipheriv=gt,decrypter}var hasRequiredBrowser$6;function requireBrowser$6(){if(hasRequiredBrowser$6)return browser$7;hasRequiredBrowser$6=1;var o=requireEncrypter(),e=requireDecrypter(),a=require$$2;function c(){return Object.keys(a)}return browser$7.createCipher=browser$7.Cipher=o.createCipher,browser$7.createCipheriv=browser$7.Cipheriv=o.createCipheriv,browser$7.createDecipher=browser$7.Decipher=e.createDecipher,browser$7.createDecipheriv=browser$7.Decipheriv=e.createDecipheriv,browser$7.listCiphers=browser$7.getCiphers=c,browser$7}var modes={},hasRequiredModes;function requireModes(){return hasRequiredModes||(hasRequiredModes=1,function(o){o["des-ecb"]={key:8,iv:0},o["des-cbc"]=o.des={key:8,iv:8},o["des-ede3-cbc"]=o.des3={key:24,iv:8},o["des-ede3"]={key:24,iv:0},o["des-ede-cbc"]={key:16,iv:8},o["des-ede"]={key:16,iv:0}}(modes)),modes}var hasRequiredBrowser$5;function requireBrowser$5(){if(hasRequiredBrowser$5)return browser$8;hasRequiredBrowser$5=1;var o=requireBrowserifyDes(),e=requireBrowser$6(),a=requireModes$1(),c=requireModes(),j=requireEvp_bytestokey();function d(ot,gt){ot=ot.toLowerCase();var ft,yt;if(a[ot])ft=a[ot].key,yt=a[ot].iv;else if(c[ot])ft=c[ot].key*8,yt=c[ot].iv;else throw new TypeError("invalid suite type");var vt=j(gt,!1,ft,yt);return at(ot,vt.key,vt.iv)}function et(ot,gt){ot=ot.toLowerCase();var ft,yt;if(a[ot])ft=a[ot].key,yt=a[ot].iv;else if(c[ot])ft=c[ot].key*8,yt=c[ot].iv;else throw new TypeError("invalid suite type");var vt=j(gt,!1,ft,yt);return st(ot,vt.key,vt.iv)}function at(ot,gt,ft){if(ot=ot.toLowerCase(),a[ot])return e.createCipheriv(ot,gt,ft);if(c[ot])return new o({key:gt,iv:ft,mode:ot});throw new TypeError("invalid suite type")}function st(ot,gt,ft){if(ot=ot.toLowerCase(),a[ot])return e.createDecipheriv(ot,gt,ft);if(c[ot])return new o({key:gt,iv:ft,mode:ot,decrypt:!0});throw new TypeError("invalid suite type")}function ct(){return Object.keys(c).concat(e.getCiphers())}return browser$8.createCipher=browser$8.Cipher=d,browser$8.createCipheriv=browser$8.Cipheriv=at,browser$8.createDecipher=browser$8.Decipher=et,browser$8.createDecipheriv=browser$8.Decipheriv=st,browser$8.listCiphers=browser$8.getCiphers=ct,browser$8}var browser$6={},bn$6={exports:{}};bn$6.exports;var hasRequiredBn$6;function requireBn$6(){return hasRequiredBn$6||(hasRequiredBn$6=1,function(o){(function(e,a){function c(nt,s){if(!nt)throw new Error(s||"Assertion failed")}function j(nt,s){nt.super_=s;var b=function(){};b.prototype=s.prototype,nt.prototype=new b,nt.prototype.constructor=nt}function d(nt,s,b){if(d.isBN(nt))return nt;this.negative=0,this.words=null,this.length=0,this.red=null,nt!==null&&((s==="le"||s==="be")&&(b=s,s=10),this._init(nt||0,s||10,b||"be"))}typeof e=="object"?e.exports=d:a.BN=d,d.BN=d,d.wordSize=26;var et;try{typeof window<"u"&&typeof window.Buffer<"u"?et=window.Buffer:et=require$$1$2.Buffer}catch{}d.isBN=function(s){return s instanceof d?!0:s!==null&&typeof s=="object"&&s.constructor.wordSize===d.wordSize&&Array.isArray(s.words)},d.max=function(s,b){return s.cmp(b)>0?s:b},d.min=function(s,b){return s.cmp(b)<0?s:b},d.prototype._init=function(s,b,$){if(typeof s=="number")return this._initNumber(s,b,$);if(typeof s=="object")return this._initArray(s,b,$);b==="hex"&&(b=16),c(b===(b|0)&&b>=2&&b<=36),s=s.toString().replace(/\s+/g,"");var _e=0;s[0]==="-"&&(_e++,this.negative=1),_e<s.length&&(b===16?this._parseHex(s,_e,$):(this._parseBase(s,b,_e),$==="le"&&this._initArray(this.toArray(),b,$)))},d.prototype._initNumber=function(s,b,$){s<0&&(this.negative=1,s=-s),s<67108864?(this.words=[s&67108863],this.length=1):s<4503599627370496?(this.words=[s&67108863,s/67108864&67108863],this.length=2):(c(s<9007199254740992),this.words=[s&67108863,s/67108864&67108863,1],this.length=3),$==="le"&&this._initArray(this.toArray(),b,$)},d.prototype._initArray=function(s,b,$){if(c(typeof s.length=="number"),s.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(s.length/3),this.words=new Array(this.length);for(var _e=0;_e<this.length;_e++)this.words[_e]=0;var it,pt,mt=0;if($==="be")for(_e=s.length-1,it=0;_e>=0;_e-=3)pt=s[_e]|s[_e-1]<<8|s[_e-2]<<16,this.words[it]|=pt<<mt&67108863,this.words[it+1]=pt>>>26-mt&67108863,mt+=24,mt>=26&&(mt-=26,it++);else if($==="le")for(_e=0,it=0;_e<s.length;_e+=3)pt=s[_e]|s[_e+1]<<8|s[_e+2]<<16,this.words[it]|=pt<<mt&67108863,this.words[it+1]=pt>>>26-mt&67108863,mt+=24,mt>=26&&(mt-=26,it++);return this.strip()};function at(nt,s){var b=nt.charCodeAt(s);return b>=65&&b<=70?b-55:b>=97&&b<=102?b-87:b-48&15}function st(nt,s,b){var $=at(nt,b);return b-1>=s&&($|=at(nt,b-1)<<4),$}d.prototype._parseHex=function(s,b,$){this.length=Math.ceil((s.length-b)/6),this.words=new Array(this.length);for(var _e=0;_e<this.length;_e++)this.words[_e]=0;var it=0,pt=0,mt;if($==="be")for(_e=s.length-1;_e>=b;_e-=2)mt=st(s,b,_e)<<it,this.words[pt]|=mt&67108863,it>=18?(it-=18,pt+=1,this.words[pt]|=mt>>>26):it+=8;else{var lt=s.length-b;for(_e=lt%2===0?b+1:b;_e<s.length;_e+=2)mt=st(s,b,_e)<<it,this.words[pt]|=mt&67108863,it>=18?(it-=18,pt+=1,this.words[pt]|=mt>>>26):it+=8}this.strip()};function ct(nt,s,b,$){for(var _e=0,it=Math.min(nt.length,b),pt=s;pt<it;pt++){var mt=nt.charCodeAt(pt)-48;_e*=$,mt>=49?_e+=mt-49+10:mt>=17?_e+=mt-17+10:_e+=mt}return _e}d.prototype._parseBase=function(s,b,$){this.words=[0],this.length=1;for(var _e=0,it=1;it<=67108863;it*=b)_e++;_e--,it=it/b|0;for(var pt=s.length-$,mt=pt%_e,lt=Math.min(pt,pt-mt)+$,_=0,tt=$;tt<lt;tt+=_e)_=ct(s,tt,tt+_e,b),this.imuln(it),this.words[0]+_<67108864?this.words[0]+=_:this._iaddn(_);if(mt!==0){var Tt=1;for(_=ct(s,tt,s.length,b),tt=0;tt<mt;tt++)Tt*=b;this.imuln(Tt),this.words[0]+_<67108864?this.words[0]+=_:this._iaddn(_)}this.strip()},d.prototype.copy=function(s){s.words=new Array(this.length);for(var b=0;b<this.length;b++)s.words[b]=this.words[b];s.length=this.length,s.negative=this.negative,s.red=this.red},d.prototype.clone=function(){var s=new d(null);return this.copy(s),s},d.prototype._expand=function(s){for(;this.length<s;)this.words[this.length++]=0;return this},d.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},d.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},d.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var ot=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],gt=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],ft=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];d.prototype.toString=function(s,b){s=s||10,b=b|0||1;var $;if(s===16||s==="hex"){$="";for(var _e=0,it=0,pt=0;pt<this.length;pt++){var mt=this.words[pt],lt=((mt<<_e|it)&16777215).toString(16);it=mt>>>24-_e&16777215,it!==0||pt!==this.length-1?$=ot[6-lt.length]+lt+$:$=lt+$,_e+=2,_e>=26&&(_e-=26,pt--)}for(it!==0&&($=it.toString(16)+$);$.length%b!==0;)$="0"+$;return this.negative!==0&&($="-"+$),$}if(s===(s|0)&&s>=2&&s<=36){var _=gt[s],tt=ft[s];$="";var Tt=this.clone();for(Tt.negative=0;!Tt.isZero();){var It=Tt.modn(tt).toString(s);Tt=Tt.idivn(tt),Tt.isZero()?$=It+$:$=ot[_-It.length]+It+$}for(this.isZero()&&($="0"+$);$.length%b!==0;)$="0"+$;return this.negative!==0&&($="-"+$),$}c(!1,"Base should be between 2 and 36")},d.prototype.toNumber=function(){var s=this.words[0];return this.length===2?s+=this.words[1]*67108864:this.length===3&&this.words[2]===1?s+=4503599627370496+this.words[1]*67108864:this.length>2&&c(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-s:s},d.prototype.toJSON=function(){return this.toString(16)},d.prototype.toBuffer=function(s,b){return c(typeof et<"u"),this.toArrayLike(et,s,b)},d.prototype.toArray=function(s,b){return this.toArrayLike(Array,s,b)},d.prototype.toArrayLike=function(s,b,$){var _e=this.byteLength(),it=$||Math.max(1,_e);c(_e<=it,"byte array longer than desired length"),c(it>0,"Requested array length <= 0"),this.strip();var pt=b==="le",mt=new s(it),lt,_,tt=this.clone();if(pt){for(_=0;!tt.isZero();_++)lt=tt.andln(255),tt.iushrn(8),mt[_]=lt;for(;_<it;_++)mt[_]=0}else{for(_=0;_<it-_e;_++)mt[_]=0;for(_=0;!tt.isZero();_++)lt=tt.andln(255),tt.iushrn(8),mt[it-_-1]=lt}return mt},Math.clz32?d.prototype._countBits=function(s){return 32-Math.clz32(s)}:d.prototype._countBits=function(s){var b=s,$=0;return b>=4096&&($+=13,b>>>=13),b>=64&&($+=7,b>>>=7),b>=8&&($+=4,b>>>=4),b>=2&&($+=2,b>>>=2),$+b},d.prototype._zeroBits=function(s){if(s===0)return 26;var b=s,$=0;return b&8191||($+=13,b>>>=13),b&127||($+=7,b>>>=7),b&15||($+=4,b>>>=4),b&3||($+=2,b>>>=2),b&1||$++,$},d.prototype.bitLength=function(){var s=this.words[this.length-1],b=this._countBits(s);return(this.length-1)*26+b};function yt(nt){for(var s=new Array(nt.bitLength()),b=0;b<s.length;b++){var $=b/26|0,_e=b%26;s[b]=(nt.words[$]&1<<_e)>>>_e}return s}d.prototype.zeroBits=function(){if(this.isZero())return 0;for(var s=0,b=0;b<this.length;b++){var $=this._zeroBits(this.words[b]);if(s+=$,$!==26)break}return s},d.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},d.prototype.toTwos=function(s){return this.negative!==0?this.abs().inotn(s).iaddn(1):this.clone()},d.prototype.fromTwos=function(s){return this.testn(s-1)?this.notn(s).iaddn(1).ineg():this.clone()},d.prototype.isNeg=function(){return this.negative!==0},d.prototype.neg=function(){return this.clone().ineg()},d.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},d.prototype.iuor=function(s){for(;this.length<s.length;)this.words[this.length++]=0;for(var b=0;b<s.length;b++)this.words[b]=this.words[b]|s.words[b];return this.strip()},d.prototype.ior=function(s){return c((this.negative|s.negative)===0),this.iuor(s)},d.prototype.or=function(s){return this.length>s.length?this.clone().ior(s):s.clone().ior(this)},d.prototype.uor=function(s){return this.length>s.length?this.clone().iuor(s):s.clone().iuor(this)},d.prototype.iuand=function(s){var b;this.length>s.length?b=s:b=this;for(var $=0;$<b.length;$++)this.words[$]=this.words[$]&s.words[$];return this.length=b.length,this.strip()},d.prototype.iand=function(s){return c((this.negative|s.negative)===0),this.iuand(s)},d.prototype.and=function(s){return this.length>s.length?this.clone().iand(s):s.clone().iand(this)},d.prototype.uand=function(s){return this.length>s.length?this.clone().iuand(s):s.clone().iuand(this)},d.prototype.iuxor=function(s){var b,$;this.length>s.length?(b=this,$=s):(b=s,$=this);for(var _e=0;_e<$.length;_e++)this.words[_e]=b.words[_e]^$.words[_e];if(this!==b)for(;_e<b.length;_e++)this.words[_e]=b.words[_e];return this.length=b.length,this.strip()},d.prototype.ixor=function(s){return c((this.negative|s.negative)===0),this.iuxor(s)},d.prototype.xor=function(s){return this.length>s.length?this.clone().ixor(s):s.clone().ixor(this)},d.prototype.uxor=function(s){return this.length>s.length?this.clone().iuxor(s):s.clone().iuxor(this)},d.prototype.inotn=function(s){c(typeof s=="number"&&s>=0);var b=Math.ceil(s/26)|0,$=s%26;this._expand(b),$>0&&b--;for(var _e=0;_e<b;_e++)this.words[_e]=~this.words[_e]&67108863;return $>0&&(this.words[_e]=~this.words[_e]&67108863>>26-$),this.strip()},d.prototype.notn=function(s){return this.clone().inotn(s)},d.prototype.setn=function(s,b){c(typeof s=="number"&&s>=0);var $=s/26|0,_e=s%26;return this._expand($+1),b?this.words[$]=this.words[$]|1<<_e:this.words[$]=this.words[$]&~(1<<_e),this.strip()},d.prototype.iadd=function(s){var b;if(this.negative!==0&&s.negative===0)return this.negative=0,b=this.isub(s),this.negative^=1,this._normSign();if(this.negative===0&&s.negative!==0)return s.negative=0,b=this.isub(s),s.negative=1,b._normSign();var $,_e;this.length>s.length?($=this,_e=s):($=s,_e=this);for(var it=0,pt=0;pt<_e.length;pt++)b=($.words[pt]|0)+(_e.words[pt]|0)+it,this.words[pt]=b&67108863,it=b>>>26;for(;it!==0&&pt<$.length;pt++)b=($.words[pt]|0)+it,this.words[pt]=b&67108863,it=b>>>26;if(this.length=$.length,it!==0)this.words[this.length]=it,this.length++;else if($!==this)for(;pt<$.length;pt++)this.words[pt]=$.words[pt];return this},d.prototype.add=function(s){var b;return s.negative!==0&&this.negative===0?(s.negative=0,b=this.sub(s),s.negative^=1,b):s.negative===0&&this.negative!==0?(this.negative=0,b=s.sub(this),this.negative=1,b):this.length>s.length?this.clone().iadd(s):s.clone().iadd(this)},d.prototype.isub=function(s){if(s.negative!==0){s.negative=0;var b=this.iadd(s);return s.negative=1,b._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(s),this.negative=1,this._normSign();var $=this.cmp(s);if($===0)return this.negative=0,this.length=1,this.words[0]=0,this;var _e,it;$>0?(_e=this,it=s):(_e=s,it=this);for(var pt=0,mt=0;mt<it.length;mt++)b=(_e.words[mt]|0)-(it.words[mt]|0)+pt,pt=b>>26,this.words[mt]=b&67108863;for(;pt!==0&&mt<_e.length;mt++)b=(_e.words[mt]|0)+pt,pt=b>>26,this.words[mt]=b&67108863;if(pt===0&&mt<_e.length&&_e!==this)for(;mt<_e.length;mt++)this.words[mt]=_e.words[mt];return this.length=Math.max(this.length,mt),_e!==this&&(this.negative=1),this.strip()},d.prototype.sub=function(s){return this.clone().isub(s)};function vt(nt,s,b){b.negative=s.negative^nt.negative;var $=nt.length+s.length|0;b.length=$,$=$-1|0;var _e=nt.words[0]|0,it=s.words[0]|0,pt=_e*it,mt=pt&67108863,lt=pt/67108864|0;b.words[0]=mt;for(var _=1;_<$;_++){for(var tt=lt>>>26,Tt=lt&67108863,It=Math.min(_,s.length-1),Nt=Math.max(0,_-nt.length+1);Nt<=It;Nt++){var Ut=_-Nt|0;_e=nt.words[Ut]|0,it=s.words[Nt]|0,pt=_e*it+Tt,tt+=pt/67108864|0,Tt=pt&67108863}b.words[_]=Tt|0,lt=tt|0}return lt!==0?b.words[_]=lt|0:b.length--,b.strip()}var rt=function(s,b,$){var _e=s.words,it=b.words,pt=$.words,mt=0,lt,_,tt,Tt=_e[0]|0,It=Tt&8191,Nt=Tt>>>13,Ut=_e[1]|0,Gt=Ut&8191,Pt=Ut>>>13,qt=_e[2]|0,Kt=qt&8191,jt=qt>>>13,Ht=_e[3]|0,Bt=Ht&8191,Jt=Ht>>>13,sr=_e[4]|0,hr=sr&8191,Ar=sr>>>13,gn=_e[5]|0,Lr=gn&8191,wr=gn>>>13,En=_e[6]|0,Dr=En&8191,Qr=En>>>13,Dn=_e[7]|0,Br=Dn&8191,Gr=Dn>>>13,Ln=_e[8]|0,Fr=Ln&8191,_i=Ln>>>13,Kn=_e[9]|0,Wt=Kn&8191,Lt=Kn>>>13,zt=it[0]|0,Zt=zt&8191,ar=zt>>>13,Or=it[1]|0,vr=Or&8191,Rr=Or>>>13,fr=it[2]|0,tr=fr&8191,yr=fr>>>13,fn=it[3]|0,Nr=fn&8191,zr=fn>>>13,xn=it[4]|0,Kr=xn&8191,nn=xn>>>13,Wn=it[5]|0,Zr=Wn&8191,on=Wn>>>13,Xn=it[6]|0,en=Xn&8191,ln=Xn>>>13,Zn=it[7]|0,$t=Zn&8191,or=Zn>>>13,Yr=it[8]|0,Vr=Yr&8191,Hr=Yr>>>13,Mn=it[9]|0,Ur=Mn&8191,tn=Mn>>>13;$.negative=s.negative^b.negative,$.length=19,lt=Math.imul(It,Zt),_=Math.imul(It,ar),_=_+Math.imul(Nt,Zt)|0,tt=Math.imul(Nt,ar);var jn=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(jn>>>26)|0,jn&=67108863,lt=Math.imul(Gt,Zt),_=Math.imul(Gt,ar),_=_+Math.imul(Pt,Zt)|0,tt=Math.imul(Pt,ar),lt=lt+Math.imul(It,vr)|0,_=_+Math.imul(It,Rr)|0,_=_+Math.imul(Nt,vr)|0,tt=tt+Math.imul(Nt,Rr)|0;var Un=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(Un>>>26)|0,Un&=67108863,lt=Math.imul(Kt,Zt),_=Math.imul(Kt,ar),_=_+Math.imul(jt,Zt)|0,tt=Math.imul(jt,ar),lt=lt+Math.imul(Gt,vr)|0,_=_+Math.imul(Gt,Rr)|0,_=_+Math.imul(Pt,vr)|0,tt=tt+Math.imul(Pt,Rr)|0,lt=lt+Math.imul(It,tr)|0,_=_+Math.imul(It,yr)|0,_=_+Math.imul(Nt,tr)|0,tt=tt+Math.imul(Nt,yr)|0;var ao=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(ao>>>26)|0,ao&=67108863,lt=Math.imul(Bt,Zt),_=Math.imul(Bt,ar),_=_+Math.imul(Jt,Zt)|0,tt=Math.imul(Jt,ar),lt=lt+Math.imul(Kt,vr)|0,_=_+Math.imul(Kt,Rr)|0,_=_+Math.imul(jt,vr)|0,tt=tt+Math.imul(jt,Rr)|0,lt=lt+Math.imul(Gt,tr)|0,_=_+Math.imul(Gt,yr)|0,_=_+Math.imul(Pt,tr)|0,tt=tt+Math.imul(Pt,yr)|0,lt=lt+Math.imul(It,Nr)|0,_=_+Math.imul(It,zr)|0,_=_+Math.imul(Nt,Nr)|0,tt=tt+Math.imul(Nt,zr)|0;var co=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(co>>>26)|0,co&=67108863,lt=Math.imul(hr,Zt),_=Math.imul(hr,ar),_=_+Math.imul(Ar,Zt)|0,tt=Math.imul(Ar,ar),lt=lt+Math.imul(Bt,vr)|0,_=_+Math.imul(Bt,Rr)|0,_=_+Math.imul(Jt,vr)|0,tt=tt+Math.imul(Jt,Rr)|0,lt=lt+Math.imul(Kt,tr)|0,_=_+Math.imul(Kt,yr)|0,_=_+Math.imul(jt,tr)|0,tt=tt+Math.imul(jt,yr)|0,lt=lt+Math.imul(Gt,Nr)|0,_=_+Math.imul(Gt,zr)|0,_=_+Math.imul(Pt,Nr)|0,tt=tt+Math.imul(Pt,zr)|0,lt=lt+Math.imul(It,Kr)|0,_=_+Math.imul(It,nn)|0,_=_+Math.imul(Nt,Kr)|0,tt=tt+Math.imul(Nt,nn)|0;var ro=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(ro>>>26)|0,ro&=67108863,lt=Math.imul(Lr,Zt),_=Math.imul(Lr,ar),_=_+Math.imul(wr,Zt)|0,tt=Math.imul(wr,ar),lt=lt+Math.imul(hr,vr)|0,_=_+Math.imul(hr,Rr)|0,_=_+Math.imul(Ar,vr)|0,tt=tt+Math.imul(Ar,Rr)|0,lt=lt+Math.imul(Bt,tr)|0,_=_+Math.imul(Bt,yr)|0,_=_+Math.imul(Jt,tr)|0,tt=tt+Math.imul(Jt,yr)|0,lt=lt+Math.imul(Kt,Nr)|0,_=_+Math.imul(Kt,zr)|0,_=_+Math.imul(jt,Nr)|0,tt=tt+Math.imul(jt,zr)|0,lt=lt+Math.imul(Gt,Kr)|0,_=_+Math.imul(Gt,nn)|0,_=_+Math.imul(Pt,Kr)|0,tt=tt+Math.imul(Pt,nn)|0,lt=lt+Math.imul(It,Zr)|0,_=_+Math.imul(It,on)|0,_=_+Math.imul(Nt,Zr)|0,tt=tt+Math.imul(Nt,on)|0;var vo=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(vo>>>26)|0,vo&=67108863,lt=Math.imul(Dr,Zt),_=Math.imul(Dr,ar),_=_+Math.imul(Qr,Zt)|0,tt=Math.imul(Qr,ar),lt=lt+Math.imul(Lr,vr)|0,_=_+Math.imul(Lr,Rr)|0,_=_+Math.imul(wr,vr)|0,tt=tt+Math.imul(wr,Rr)|0,lt=lt+Math.imul(hr,tr)|0,_=_+Math.imul(hr,yr)|0,_=_+Math.imul(Ar,tr)|0,tt=tt+Math.imul(Ar,yr)|0,lt=lt+Math.imul(Bt,Nr)|0,_=_+Math.imul(Bt,zr)|0,_=_+Math.imul(Jt,Nr)|0,tt=tt+Math.imul(Jt,zr)|0,lt=lt+Math.imul(Kt,Kr)|0,_=_+Math.imul(Kt,nn)|0,_=_+Math.imul(jt,Kr)|0,tt=tt+Math.imul(jt,nn)|0,lt=lt+Math.imul(Gt,Zr)|0,_=_+Math.imul(Gt,on)|0,_=_+Math.imul(Pt,Zr)|0,tt=tt+Math.imul(Pt,on)|0,lt=lt+Math.imul(It,en)|0,_=_+Math.imul(It,ln)|0,_=_+Math.imul(Nt,en)|0,tt=tt+Math.imul(Nt,ln)|0;var oo=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(oo>>>26)|0,oo&=67108863,lt=Math.imul(Br,Zt),_=Math.imul(Br,ar),_=_+Math.imul(Gr,Zt)|0,tt=Math.imul(Gr,ar),lt=lt+Math.imul(Dr,vr)|0,_=_+Math.imul(Dr,Rr)|0,_=_+Math.imul(Qr,vr)|0,tt=tt+Math.imul(Qr,Rr)|0,lt=lt+Math.imul(Lr,tr)|0,_=_+Math.imul(Lr,yr)|0,_=_+Math.imul(wr,tr)|0,tt=tt+Math.imul(wr,yr)|0,lt=lt+Math.imul(hr,Nr)|0,_=_+Math.imul(hr,zr)|0,_=_+Math.imul(Ar,Nr)|0,tt=tt+Math.imul(Ar,zr)|0,lt=lt+Math.imul(Bt,Kr)|0,_=_+Math.imul(Bt,nn)|0,_=_+Math.imul(Jt,Kr)|0,tt=tt+Math.imul(Jt,nn)|0,lt=lt+Math.imul(Kt,Zr)|0,_=_+Math.imul(Kt,on)|0,_=_+Math.imul(jt,Zr)|0,tt=tt+Math.imul(jt,on)|0,lt=lt+Math.imul(Gt,en)|0,_=_+Math.imul(Gt,ln)|0,_=_+Math.imul(Pt,en)|0,tt=tt+Math.imul(Pt,ln)|0,lt=lt+Math.imul(It,$t)|0,_=_+Math.imul(It,or)|0,_=_+Math.imul(Nt,$t)|0,tt=tt+Math.imul(Nt,or)|0;var mo=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(mo>>>26)|0,mo&=67108863,lt=Math.imul(Fr,Zt),_=Math.imul(Fr,ar),_=_+Math.imul(_i,Zt)|0,tt=Math.imul(_i,ar),lt=lt+Math.imul(Br,vr)|0,_=_+Math.imul(Br,Rr)|0,_=_+Math.imul(Gr,vr)|0,tt=tt+Math.imul(Gr,Rr)|0,lt=lt+Math.imul(Dr,tr)|0,_=_+Math.imul(Dr,yr)|0,_=_+Math.imul(Qr,tr)|0,tt=tt+Math.imul(Qr,yr)|0,lt=lt+Math.imul(Lr,Nr)|0,_=_+Math.imul(Lr,zr)|0,_=_+Math.imul(wr,Nr)|0,tt=tt+Math.imul(wr,zr)|0,lt=lt+Math.imul(hr,Kr)|0,_=_+Math.imul(hr,nn)|0,_=_+Math.imul(Ar,Kr)|0,tt=tt+Math.imul(Ar,nn)|0,lt=lt+Math.imul(Bt,Zr)|0,_=_+Math.imul(Bt,on)|0,_=_+Math.imul(Jt,Zr)|0,tt=tt+Math.imul(Jt,on)|0,lt=lt+Math.imul(Kt,en)|0,_=_+Math.imul(Kt,ln)|0,_=_+Math.imul(jt,en)|0,tt=tt+Math.imul(jt,ln)|0,lt=lt+Math.imul(Gt,$t)|0,_=_+Math.imul(Gt,or)|0,_=_+Math.imul(Pt,$t)|0,tt=tt+Math.imul(Pt,or)|0,lt=lt+Math.imul(It,Vr)|0,_=_+Math.imul(It,Hr)|0,_=_+Math.imul(Nt,Vr)|0,tt=tt+Math.imul(Nt,Hr)|0;var ho=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(ho>>>26)|0,ho&=67108863,lt=Math.imul(Wt,Zt),_=Math.imul(Wt,ar),_=_+Math.imul(Lt,Zt)|0,tt=Math.imul(Lt,ar),lt=lt+Math.imul(Fr,vr)|0,_=_+Math.imul(Fr,Rr)|0,_=_+Math.imul(_i,vr)|0,tt=tt+Math.imul(_i,Rr)|0,lt=lt+Math.imul(Br,tr)|0,_=_+Math.imul(Br,yr)|0,_=_+Math.imul(Gr,tr)|0,tt=tt+Math.imul(Gr,yr)|0,lt=lt+Math.imul(Dr,Nr)|0,_=_+Math.imul(Dr,zr)|0,_=_+Math.imul(Qr,Nr)|0,tt=tt+Math.imul(Qr,zr)|0,lt=lt+Math.imul(Lr,Kr)|0,_=_+Math.imul(Lr,nn)|0,_=_+Math.imul(wr,Kr)|0,tt=tt+Math.imul(wr,nn)|0,lt=lt+Math.imul(hr,Zr)|0,_=_+Math.imul(hr,on)|0,_=_+Math.imul(Ar,Zr)|0,tt=tt+Math.imul(Ar,on)|0,lt=lt+Math.imul(Bt,en)|0,_=_+Math.imul(Bt,ln)|0,_=_+Math.imul(Jt,en)|0,tt=tt+Math.imul(Jt,ln)|0,lt=lt+Math.imul(Kt,$t)|0,_=_+Math.imul(Kt,or)|0,_=_+Math.imul(jt,$t)|0,tt=tt+Math.imul(jt,or)|0,lt=lt+Math.imul(Gt,Vr)|0,_=_+Math.imul(Gt,Hr)|0,_=_+Math.imul(Pt,Vr)|0,tt=tt+Math.imul(Pt,Hr)|0,lt=lt+Math.imul(It,Ur)|0,_=_+Math.imul(It,tn)|0,_=_+Math.imul(Nt,Ur)|0,tt=tt+Math.imul(Nt,tn)|0;var go=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(go>>>26)|0,go&=67108863,lt=Math.imul(Wt,vr),_=Math.imul(Wt,Rr),_=_+Math.imul(Lt,vr)|0,tt=Math.imul(Lt,Rr),lt=lt+Math.imul(Fr,tr)|0,_=_+Math.imul(Fr,yr)|0,_=_+Math.imul(_i,tr)|0,tt=tt+Math.imul(_i,yr)|0,lt=lt+Math.imul(Br,Nr)|0,_=_+Math.imul(Br,zr)|0,_=_+Math.imul(Gr,Nr)|0,tt=tt+Math.imul(Gr,zr)|0,lt=lt+Math.imul(Dr,Kr)|0,_=_+Math.imul(Dr,nn)|0,_=_+Math.imul(Qr,Kr)|0,tt=tt+Math.imul(Qr,nn)|0,lt=lt+Math.imul(Lr,Zr)|0,_=_+Math.imul(Lr,on)|0,_=_+Math.imul(wr,Zr)|0,tt=tt+Math.imul(wr,on)|0,lt=lt+Math.imul(hr,en)|0,_=_+Math.imul(hr,ln)|0,_=_+Math.imul(Ar,en)|0,tt=tt+Math.imul(Ar,ln)|0,lt=lt+Math.imul(Bt,$t)|0,_=_+Math.imul(Bt,or)|0,_=_+Math.imul(Jt,$t)|0,tt=tt+Math.imul(Jt,or)|0,lt=lt+Math.imul(Kt,Vr)|0,_=_+Math.imul(Kt,Hr)|0,_=_+Math.imul(jt,Vr)|0,tt=tt+Math.imul(jt,Hr)|0,lt=lt+Math.imul(Gt,Ur)|0,_=_+Math.imul(Gt,tn)|0,_=_+Math.imul(Pt,Ur)|0,tt=tt+Math.imul(Pt,tn)|0;var bo=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(bo>>>26)|0,bo&=67108863,lt=Math.imul(Wt,tr),_=Math.imul(Wt,yr),_=_+Math.imul(Lt,tr)|0,tt=Math.imul(Lt,yr),lt=lt+Math.imul(Fr,Nr)|0,_=_+Math.imul(Fr,zr)|0,_=_+Math.imul(_i,Nr)|0,tt=tt+Math.imul(_i,zr)|0,lt=lt+Math.imul(Br,Kr)|0,_=_+Math.imul(Br,nn)|0,_=_+Math.imul(Gr,Kr)|0,tt=tt+Math.imul(Gr,nn)|0,lt=lt+Math.imul(Dr,Zr)|0,_=_+Math.imul(Dr,on)|0,_=_+Math.imul(Qr,Zr)|0,tt=tt+Math.imul(Qr,on)|0,lt=lt+Math.imul(Lr,en)|0,_=_+Math.imul(Lr,ln)|0,_=_+Math.imul(wr,en)|0,tt=tt+Math.imul(wr,ln)|0,lt=lt+Math.imul(hr,$t)|0,_=_+Math.imul(hr,or)|0,_=_+Math.imul(Ar,$t)|0,tt=tt+Math.imul(Ar,or)|0,lt=lt+Math.imul(Bt,Vr)|0,_=_+Math.imul(Bt,Hr)|0,_=_+Math.imul(Jt,Vr)|0,tt=tt+Math.imul(Jt,Hr)|0,lt=lt+Math.imul(Kt,Ur)|0,_=_+Math.imul(Kt,tn)|0,_=_+Math.imul(jt,Ur)|0,tt=tt+Math.imul(jt,tn)|0;var ur=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(ur>>>26)|0,ur&=67108863,lt=Math.imul(Wt,Nr),_=Math.imul(Wt,zr),_=_+Math.imul(Lt,Nr)|0,tt=Math.imul(Lt,zr),lt=lt+Math.imul(Fr,Kr)|0,_=_+Math.imul(Fr,nn)|0,_=_+Math.imul(_i,Kr)|0,tt=tt+Math.imul(_i,nn)|0,lt=lt+Math.imul(Br,Zr)|0,_=_+Math.imul(Br,on)|0,_=_+Math.imul(Gr,Zr)|0,tt=tt+Math.imul(Gr,on)|0,lt=lt+Math.imul(Dr,en)|0,_=_+Math.imul(Dr,ln)|0,_=_+Math.imul(Qr,en)|0,tt=tt+Math.imul(Qr,ln)|0,lt=lt+Math.imul(Lr,$t)|0,_=_+Math.imul(Lr,or)|0,_=_+Math.imul(wr,$t)|0,tt=tt+Math.imul(wr,or)|0,lt=lt+Math.imul(hr,Vr)|0,_=_+Math.imul(hr,Hr)|0,_=_+Math.imul(Ar,Vr)|0,tt=tt+Math.imul(Ar,Hr)|0,lt=lt+Math.imul(Bt,Ur)|0,_=_+Math.imul(Bt,tn)|0,_=_+Math.imul(Jt,Ur)|0,tt=tt+Math.imul(Jt,tn)|0;var Cr=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,lt=Math.imul(Wt,Kr),_=Math.imul(Wt,nn),_=_+Math.imul(Lt,Kr)|0,tt=Math.imul(Lt,nn),lt=lt+Math.imul(Fr,Zr)|0,_=_+Math.imul(Fr,on)|0,_=_+Math.imul(_i,Zr)|0,tt=tt+Math.imul(_i,on)|0,lt=lt+Math.imul(Br,en)|0,_=_+Math.imul(Br,ln)|0,_=_+Math.imul(Gr,en)|0,tt=tt+Math.imul(Gr,ln)|0,lt=lt+Math.imul(Dr,$t)|0,_=_+Math.imul(Dr,or)|0,_=_+Math.imul(Qr,$t)|0,tt=tt+Math.imul(Qr,or)|0,lt=lt+Math.imul(Lr,Vr)|0,_=_+Math.imul(Lr,Hr)|0,_=_+Math.imul(wr,Vr)|0,tt=tt+Math.imul(wr,Hr)|0,lt=lt+Math.imul(hr,Ur)|0,_=_+Math.imul(hr,tn)|0,_=_+Math.imul(Ar,Ur)|0,tt=tt+Math.imul(Ar,tn)|0;var $r=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+($r>>>26)|0,$r&=67108863,lt=Math.imul(Wt,Zr),_=Math.imul(Wt,on),_=_+Math.imul(Lt,Zr)|0,tt=Math.imul(Lt,on),lt=lt+Math.imul(Fr,en)|0,_=_+Math.imul(Fr,ln)|0,_=_+Math.imul(_i,en)|0,tt=tt+Math.imul(_i,ln)|0,lt=lt+Math.imul(Br,$t)|0,_=_+Math.imul(Br,or)|0,_=_+Math.imul(Gr,$t)|0,tt=tt+Math.imul(Gr,or)|0,lt=lt+Math.imul(Dr,Vr)|0,_=_+Math.imul(Dr,Hr)|0,_=_+Math.imul(Qr,Vr)|0,tt=tt+Math.imul(Qr,Hr)|0,lt=lt+Math.imul(Lr,Ur)|0,_=_+Math.imul(Lr,tn)|0,_=_+Math.imul(wr,Ur)|0,tt=tt+Math.imul(wr,tn)|0;var dn=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(dn>>>26)|0,dn&=67108863,lt=Math.imul(Wt,en),_=Math.imul(Wt,ln),_=_+Math.imul(Lt,en)|0,tt=Math.imul(Lt,ln),lt=lt+Math.imul(Fr,$t)|0,_=_+Math.imul(Fr,or)|0,_=_+Math.imul(_i,$t)|0,tt=tt+Math.imul(_i,or)|0,lt=lt+Math.imul(Br,Vr)|0,_=_+Math.imul(Br,Hr)|0,_=_+Math.imul(Gr,Vr)|0,tt=tt+Math.imul(Gr,Hr)|0,lt=lt+Math.imul(Dr,Ur)|0,_=_+Math.imul(Dr,tn)|0,_=_+Math.imul(Qr,Ur)|0,tt=tt+Math.imul(Qr,tn)|0;var rn=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(rn>>>26)|0,rn&=67108863,lt=Math.imul(Wt,$t),_=Math.imul(Wt,or),_=_+Math.imul(Lt,$t)|0,tt=Math.imul(Lt,or),lt=lt+Math.imul(Fr,Vr)|0,_=_+Math.imul(Fr,Hr)|0,_=_+Math.imul(_i,Vr)|0,tt=tt+Math.imul(_i,Hr)|0,lt=lt+Math.imul(Br,Ur)|0,_=_+Math.imul(Br,tn)|0,_=_+Math.imul(Gr,Ur)|0,tt=tt+Math.imul(Gr,tn)|0;var Sn=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,lt=Math.imul(Wt,Vr),_=Math.imul(Wt,Hr),_=_+Math.imul(Lt,Vr)|0,tt=Math.imul(Lt,Hr),lt=lt+Math.imul(Fr,Ur)|0,_=_+Math.imul(Fr,tn)|0,_=_+Math.imul(_i,Ur)|0,tt=tt+Math.imul(_i,tn)|0;var In=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(In>>>26)|0,In&=67108863,lt=Math.imul(Wt,Ur),_=Math.imul(Wt,tn),_=_+Math.imul(Lt,Ur)|0,tt=Math.imul(Lt,tn);var Cn=(mt+lt|0)+((_&8191)<<13)|0;return mt=(tt+(_>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,pt[0]=jn,pt[1]=Un,pt[2]=ao,pt[3]=co,pt[4]=ro,pt[5]=vo,pt[6]=oo,pt[7]=mo,pt[8]=ho,pt[9]=go,pt[10]=bo,pt[11]=ur,pt[12]=Cr,pt[13]=$r,pt[14]=dn,pt[15]=rn,pt[16]=Sn,pt[17]=In,pt[18]=Cn,mt!==0&&(pt[19]=mt,$.length++),$};Math.imul||(rt=vt);function bt(nt,s,b){b.negative=s.negative^nt.negative,b.length=nt.length+s.length;for(var $=0,_e=0,it=0;it<b.length-1;it++){var pt=_e;_e=0;for(var mt=$&67108863,lt=Math.min(it,s.length-1),_=Math.max(0,it-nt.length+1);_<=lt;_++){var tt=it-_,Tt=nt.words[tt]|0,It=s.words[_]|0,Nt=Tt*It,Ut=Nt&67108863;pt=pt+(Nt/67108864|0)|0,Ut=Ut+mt|0,mt=Ut&67108863,pt=pt+(Ut>>>26)|0,_e+=pt>>>26,pt&=67108863}b.words[it]=mt,$=pt,pt=_e}return $!==0?b.words[it]=$:b.length--,b.strip()}function ht(nt,s,b){var $=new wt;return $.mulp(nt,s,b)}d.prototype.mulTo=function(s,b){var $,_e=this.length+s.length;return this.length===10&&s.length===10?$=rt(this,s,b):_e<63?$=vt(this,s,b):_e<1024?$=bt(this,s,b):$=ht(this,s,b),$};function wt(nt,s){this.x=nt,this.y=s}wt.prototype.makeRBT=function(s){for(var b=new Array(s),$=d.prototype._countBits(s)-1,_e=0;_e<s;_e++)b[_e]=this.revBin(_e,$,s);return b},wt.prototype.revBin=function(s,b,$){if(s===0||s===$-1)return s;for(var _e=0,it=0;it<b;it++)_e|=(s&1)<<b-it-1,s>>=1;return _e},wt.prototype.permute=function(s,b,$,_e,it,pt){for(var mt=0;mt<pt;mt++)_e[mt]=b[s[mt]],it[mt]=$[s[mt]]},wt.prototype.transform=function(s,b,$,_e,it,pt){this.permute(pt,s,b,$,_e,it);for(var mt=1;mt<it;mt<<=1)for(var lt=mt<<1,_=Math.cos(2*Math.PI/lt),tt=Math.sin(2*Math.PI/lt),Tt=0;Tt<it;Tt+=lt)for(var It=_,Nt=tt,Ut=0;Ut<mt;Ut++){var Gt=$[Tt+Ut],Pt=_e[Tt+Ut],qt=$[Tt+Ut+mt],Kt=_e[Tt+Ut+mt],jt=It*qt-Nt*Kt;Kt=It*Kt+Nt*qt,qt=jt,$[Tt+Ut]=Gt+qt,_e[Tt+Ut]=Pt+Kt,$[Tt+Ut+mt]=Gt-qt,_e[Tt+Ut+mt]=Pt-Kt,Ut!==lt&&(jt=_*It-tt*Nt,Nt=_*Nt+tt*It,It=jt)}},wt.prototype.guessLen13b=function(s,b){var $=Math.max(b,s)|1,_e=$&1,it=0;for($=$/2|0;$;$=$>>>1)it++;return 1<<it+1+_e},wt.prototype.conjugate=function(s,b,$){if(!($<=1))for(var _e=0;_e<$/2;_e++){var it=s[_e];s[_e]=s[$-_e-1],s[$-_e-1]=it,it=b[_e],b[_e]=-b[$-_e-1],b[$-_e-1]=-it}},wt.prototype.normalize13b=function(s,b){for(var $=0,_e=0;_e<b/2;_e++){var it=Math.round(s[2*_e+1]/b)*8192+Math.round(s[2*_e]/b)+$;s[_e]=it&67108863,it<67108864?$=0:$=it/67108864|0}return s},wt.prototype.convert13b=function(s,b,$,_e){for(var it=0,pt=0;pt<b;pt++)it=it+(s[pt]|0),$[2*pt]=it&8191,it=it>>>13,$[2*pt+1]=it&8191,it=it>>>13;for(pt=2*b;pt<_e;++pt)$[pt]=0;c(it===0),c((it&-8192)===0)},wt.prototype.stub=function(s){for(var b=new Array(s),$=0;$<s;$++)b[$]=0;return b},wt.prototype.mulp=function(s,b,$){var _e=2*this.guessLen13b(s.length,b.length),it=this.makeRBT(_e),pt=this.stub(_e),mt=new Array(_e),lt=new Array(_e),_=new Array(_e),tt=new Array(_e),Tt=new Array(_e),It=new Array(_e),Nt=$.words;Nt.length=_e,this.convert13b(s.words,s.length,mt,_e),this.convert13b(b.words,b.length,tt,_e),this.transform(mt,pt,lt,_,_e,it),this.transform(tt,pt,Tt,It,_e,it);for(var Ut=0;Ut<_e;Ut++){var Gt=lt[Ut]*Tt[Ut]-_[Ut]*It[Ut];_[Ut]=lt[Ut]*It[Ut]+_[Ut]*Tt[Ut],lt[Ut]=Gt}return this.conjugate(lt,_,_e),this.transform(lt,_,Nt,pt,_e,it),this.conjugate(Nt,pt,_e),this.normalize13b(Nt,_e),$.negative=s.negative^b.negative,$.length=s.length+b.length,$.strip()},d.prototype.mul=function(s){var b=new d(null);return b.words=new Array(this.length+s.length),this.mulTo(s,b)},d.prototype.mulf=function(s){var b=new d(null);return b.words=new Array(this.length+s.length),ht(this,s,b)},d.prototype.imul=function(s){return this.clone().mulTo(s,this)},d.prototype.imuln=function(s){c(typeof s=="number"),c(s<67108864);for(var b=0,$=0;$<this.length;$++){var _e=(this.words[$]|0)*s,it=(_e&67108863)+(b&67108863);b>>=26,b+=_e/67108864|0,b+=it>>>26,this.words[$]=it&67108863}return b!==0&&(this.words[$]=b,this.length++),this},d.prototype.muln=function(s){return this.clone().imuln(s)},d.prototype.sqr=function(){return this.mul(this)},d.prototype.isqr=function(){return this.imul(this.clone())},d.prototype.pow=function(s){var b=yt(s);if(b.length===0)return new d(1);for(var $=this,_e=0;_e<b.length&&b[_e]===0;_e++,$=$.sqr());if(++_e<b.length)for(var it=$.sqr();_e<b.length;_e++,it=it.sqr())b[_e]!==0&&($=$.mul(it));return $},d.prototype.iushln=function(s){c(typeof s=="number"&&s>=0);var b=s%26,$=(s-b)/26,_e=67108863>>>26-b<<26-b,it;if(b!==0){var pt=0;for(it=0;it<this.length;it++){var mt=this.words[it]&_e,lt=(this.words[it]|0)-mt<<b;this.words[it]=lt|pt,pt=mt>>>26-b}pt&&(this.words[it]=pt,this.length++)}if($!==0){for(it=this.length-1;it>=0;it--)this.words[it+$]=this.words[it];for(it=0;it<$;it++)this.words[it]=0;this.length+=$}return this.strip()},d.prototype.ishln=function(s){return c(this.negative===0),this.iushln(s)},d.prototype.iushrn=function(s,b,$){c(typeof s=="number"&&s>=0);var _e;b?_e=(b-b%26)/26:_e=0;var it=s%26,pt=Math.min((s-it)/26,this.length),mt=67108863^67108863>>>it<<it,lt=$;if(_e-=pt,_e=Math.max(0,_e),lt){for(var _=0;_<pt;_++)lt.words[_]=this.words[_];lt.length=pt}if(pt!==0)if(this.length>pt)for(this.length-=pt,_=0;_<this.length;_++)this.words[_]=this.words[_+pt];else this.words[0]=0,this.length=1;var tt=0;for(_=this.length-1;_>=0&&(tt!==0||_>=_e);_--){var Tt=this.words[_]|0;this.words[_]=tt<<26-it|Tt>>>it,tt=Tt&mt}return lt&&tt!==0&&(lt.words[lt.length++]=tt),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},d.prototype.ishrn=function(s,b,$){return c(this.negative===0),this.iushrn(s,b,$)},d.prototype.shln=function(s){return this.clone().ishln(s)},d.prototype.ushln=function(s){return this.clone().iushln(s)},d.prototype.shrn=function(s){return this.clone().ishrn(s)},d.prototype.ushrn=function(s){return this.clone().iushrn(s)},d.prototype.testn=function(s){c(typeof s=="number"&&s>=0);var b=s%26,$=(s-b)/26,_e=1<<b;if(this.length<=$)return!1;var it=this.words[$];return!!(it&_e)},d.prototype.imaskn=function(s){c(typeof s=="number"&&s>=0);var b=s%26,$=(s-b)/26;if(c(this.negative===0,"imaskn works only with positive numbers"),this.length<=$)return this;if(b!==0&&$++,this.length=Math.min($,this.length),b!==0){var _e=67108863^67108863>>>b<<b;this.words[this.length-1]&=_e}return this.strip()},d.prototype.maskn=function(s){return this.clone().imaskn(s)},d.prototype.iaddn=function(s){return c(typeof s=="number"),c(s<67108864),s<0?this.isubn(-s):this.negative!==0?this.length===1&&(this.words[0]|0)<s?(this.words[0]=s-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(s),this.negative=1,this):this._iaddn(s)},d.prototype._iaddn=function(s){this.words[0]+=s;for(var b=0;b<this.length&&this.words[b]>=67108864;b++)this.words[b]-=67108864,b===this.length-1?this.words[b+1]=1:this.words[b+1]++;return this.length=Math.max(this.length,b+1),this},d.prototype.isubn=function(s){if(c(typeof s=="number"),c(s<67108864),s<0)return this.iaddn(-s);if(this.negative!==0)return this.negative=0,this.iaddn(s),this.negative=1,this;if(this.words[0]-=s,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var b=0;b<this.length&&this.words[b]<0;b++)this.words[b]+=67108864,this.words[b+1]-=1;return this.strip()},d.prototype.addn=function(s){return this.clone().iaddn(s)},d.prototype.subn=function(s){return this.clone().isubn(s)},d.prototype.iabs=function(){return this.negative=0,this},d.prototype.abs=function(){return this.clone().iabs()},d.prototype._ishlnsubmul=function(s,b,$){var _e=s.length+$,it;this._expand(_e);var pt,mt=0;for(it=0;it<s.length;it++){pt=(this.words[it+$]|0)+mt;var lt=(s.words[it]|0)*b;pt-=lt&67108863,mt=(pt>>26)-(lt/67108864|0),this.words[it+$]=pt&67108863}for(;it<this.length-$;it++)pt=(this.words[it+$]|0)+mt,mt=pt>>26,this.words[it+$]=pt&67108863;if(mt===0)return this.strip();for(c(mt===-1),mt=0,it=0;it<this.length;it++)pt=-(this.words[it]|0)+mt,mt=pt>>26,this.words[it]=pt&67108863;return this.negative=1,this.strip()},d.prototype._wordDiv=function(s,b){var $=this.length-s.length,_e=this.clone(),it=s,pt=it.words[it.length-1]|0,mt=this._countBits(pt);$=26-mt,$!==0&&(it=it.ushln($),_e.iushln($),pt=it.words[it.length-1]|0);var lt=_e.length-it.length,_;if(b!=="mod"){_=new d(null),_.length=lt+1,_.words=new Array(_.length);for(var tt=0;tt<_.length;tt++)_.words[tt]=0}var Tt=_e.clone()._ishlnsubmul(it,1,lt);Tt.negative===0&&(_e=Tt,_&&(_.words[lt]=1));for(var It=lt-1;It>=0;It--){var Nt=(_e.words[it.length+It]|0)*67108864+(_e.words[it.length+It-1]|0);for(Nt=Math.min(Nt/pt|0,67108863),_e._ishlnsubmul(it,Nt,It);_e.negative!==0;)Nt--,_e.negative=0,_e._ishlnsubmul(it,1,It),_e.isZero()||(_e.negative^=1);_&&(_.words[It]=Nt)}return _&&_.strip(),_e.strip(),b!=="div"&&$!==0&&_e.iushrn($),{div:_||null,mod:_e}},d.prototype.divmod=function(s,b,$){if(c(!s.isZero()),this.isZero())return{div:new d(0),mod:new d(0)};var _e,it,pt;return this.negative!==0&&s.negative===0?(pt=this.neg().divmod(s,b),b!=="mod"&&(_e=pt.div.neg()),b!=="div"&&(it=pt.mod.neg(),$&&it.negative!==0&&it.iadd(s)),{div:_e,mod:it}):this.negative===0&&s.negative!==0?(pt=this.divmod(s.neg(),b),b!=="mod"&&(_e=pt.div.neg()),{div:_e,mod:pt.mod}):this.negative&s.negative?(pt=this.neg().divmod(s.neg(),b),b!=="div"&&(it=pt.mod.neg(),$&&it.negative!==0&&it.isub(s)),{div:pt.div,mod:it}):s.length>this.length||this.cmp(s)<0?{div:new d(0),mod:this}:s.length===1?b==="div"?{div:this.divn(s.words[0]),mod:null}:b==="mod"?{div:null,mod:new d(this.modn(s.words[0]))}:{div:this.divn(s.words[0]),mod:new d(this.modn(s.words[0]))}:this._wordDiv(s,b)},d.prototype.div=function(s){return this.divmod(s,"div",!1).div},d.prototype.mod=function(s){return this.divmod(s,"mod",!1).mod},d.prototype.umod=function(s){return this.divmod(s,"mod",!0).mod},d.prototype.divRound=function(s){var b=this.divmod(s);if(b.mod.isZero())return b.div;var $=b.div.negative!==0?b.mod.isub(s):b.mod,_e=s.ushrn(1),it=s.andln(1),pt=$.cmp(_e);return pt<0||it===1&&pt===0?b.div:b.div.negative!==0?b.div.isubn(1):b.div.iaddn(1)},d.prototype.modn=function(s){c(s<=67108863);for(var b=(1<<26)%s,$=0,_e=this.length-1;_e>=0;_e--)$=(b*$+(this.words[_e]|0))%s;return $},d.prototype.idivn=function(s){c(s<=67108863);for(var b=0,$=this.length-1;$>=0;$--){var _e=(this.words[$]|0)+b*67108864;this.words[$]=_e/s|0,b=_e%s}return this.strip()},d.prototype.divn=function(s){return this.clone().idivn(s)},d.prototype.egcd=function(s){c(s.negative===0),c(!s.isZero());var b=this,$=s.clone();b.negative!==0?b=b.umod(s):b=b.clone();for(var _e=new d(1),it=new d(0),pt=new d(0),mt=new d(1),lt=0;b.isEven()&&$.isEven();)b.iushrn(1),$.iushrn(1),++lt;for(var _=$.clone(),tt=b.clone();!b.isZero();){for(var Tt=0,It=1;!(b.words[0]&It)&&Tt<26;++Tt,It<<=1);if(Tt>0)for(b.iushrn(Tt);Tt-- >0;)(_e.isOdd()||it.isOdd())&&(_e.iadd(_),it.isub(tt)),_e.iushrn(1),it.iushrn(1);for(var Nt=0,Ut=1;!($.words[0]&Ut)&&Nt<26;++Nt,Ut<<=1);if(Nt>0)for($.iushrn(Nt);Nt-- >0;)(pt.isOdd()||mt.isOdd())&&(pt.iadd(_),mt.isub(tt)),pt.iushrn(1),mt.iushrn(1);b.cmp($)>=0?(b.isub($),_e.isub(pt),it.isub(mt)):($.isub(b),pt.isub(_e),mt.isub(it))}return{a:pt,b:mt,gcd:$.iushln(lt)}},d.prototype._invmp=function(s){c(s.negative===0),c(!s.isZero());var b=this,$=s.clone();b.negative!==0?b=b.umod(s):b=b.clone();for(var _e=new d(1),it=new d(0),pt=$.clone();b.cmpn(1)>0&&$.cmpn(1)>0;){for(var mt=0,lt=1;!(b.words[0]&lt)&&mt<26;++mt,lt<<=1);if(mt>0)for(b.iushrn(mt);mt-- >0;)_e.isOdd()&&_e.iadd(pt),_e.iushrn(1);for(var _=0,tt=1;!($.words[0]&tt)&&_<26;++_,tt<<=1);if(_>0)for($.iushrn(_);_-- >0;)it.isOdd()&&it.iadd(pt),it.iushrn(1);b.cmp($)>=0?(b.isub($),_e.isub(it)):($.isub(b),it.isub(_e))}var Tt;return b.cmpn(1)===0?Tt=_e:Tt=it,Tt.cmpn(0)<0&&Tt.iadd(s),Tt},d.prototype.gcd=function(s){if(this.isZero())return s.abs();if(s.isZero())return this.abs();var b=this.clone(),$=s.clone();b.negative=0,$.negative=0;for(var _e=0;b.isEven()&&$.isEven();_e++)b.iushrn(1),$.iushrn(1);do{for(;b.isEven();)b.iushrn(1);for(;$.isEven();)$.iushrn(1);var it=b.cmp($);if(it<0){var pt=b;b=$,$=pt}else if(it===0||$.cmpn(1)===0)break;b.isub($)}while(!0);return $.iushln(_e)},d.prototype.invm=function(s){return this.egcd(s).a.umod(s)},d.prototype.isEven=function(){return(this.words[0]&1)===0},d.prototype.isOdd=function(){return(this.words[0]&1)===1},d.prototype.andln=function(s){return this.words[0]&s},d.prototype.bincn=function(s){c(typeof s=="number");var b=s%26,$=(s-b)/26,_e=1<<b;if(this.length<=$)return this._expand($+1),this.words[$]|=_e,this;for(var it=_e,pt=$;it!==0&&pt<this.length;pt++){var mt=this.words[pt]|0;mt+=it,it=mt>>>26,mt&=67108863,this.words[pt]=mt}return it!==0&&(this.words[pt]=it,this.length++),this},d.prototype.isZero=function(){return this.length===1&&this.words[0]===0},d.prototype.cmpn=function(s){var b=s<0;if(this.negative!==0&&!b)return-1;if(this.negative===0&&b)return 1;this.strip();var $;if(this.length>1)$=1;else{b&&(s=-s),c(s<=67108863,"Number is too big");var _e=this.words[0]|0;$=_e===s?0:_e<s?-1:1}return this.negative!==0?-$|0:$},d.prototype.cmp=function(s){if(this.negative!==0&&s.negative===0)return-1;if(this.negative===0&&s.negative!==0)return 1;var b=this.ucmp(s);return this.negative!==0?-b|0:b},d.prototype.ucmp=function(s){if(this.length>s.length)return 1;if(this.length<s.length)return-1;for(var b=0,$=this.length-1;$>=0;$--){var _e=this.words[$]|0,it=s.words[$]|0;if(_e!==it){_e<it?b=-1:_e>it&&(b=1);break}}return b},d.prototype.gtn=function(s){return this.cmpn(s)===1},d.prototype.gt=function(s){return this.cmp(s)===1},d.prototype.gten=function(s){return this.cmpn(s)>=0},d.prototype.gte=function(s){return this.cmp(s)>=0},d.prototype.ltn=function(s){return this.cmpn(s)===-1},d.prototype.lt=function(s){return this.cmp(s)===-1},d.prototype.lten=function(s){return this.cmpn(s)<=0},d.prototype.lte=function(s){return this.cmp(s)<=0},d.prototype.eqn=function(s){return this.cmpn(s)===0},d.prototype.eq=function(s){return this.cmp(s)===0},d.red=function(s){return new _t(s)},d.prototype.toRed=function(s){return c(!this.red,"Already a number in reduction context"),c(this.negative===0,"red works only with positives"),s.convertTo(this)._forceRed(s)},d.prototype.fromRed=function(){return c(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},d.prototype._forceRed=function(s){return this.red=s,this},d.prototype.forceRed=function(s){return c(!this.red,"Already a number in reduction context"),this._forceRed(s)},d.prototype.redAdd=function(s){return c(this.red,"redAdd works only with red numbers"),this.red.add(this,s)},d.prototype.redIAdd=function(s){return c(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,s)},d.prototype.redSub=function(s){return c(this.red,"redSub works only with red numbers"),this.red.sub(this,s)},d.prototype.redISub=function(s){return c(this.red,"redISub works only with red numbers"),this.red.isub(this,s)},d.prototype.redShl=function(s){return c(this.red,"redShl works only with red numbers"),this.red.shl(this,s)},d.prototype.redMul=function(s){return c(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.mul(this,s)},d.prototype.redIMul=function(s){return c(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.imul(this,s)},d.prototype.redSqr=function(){return c(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},d.prototype.redISqr=function(){return c(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},d.prototype.redSqrt=function(){return c(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},d.prototype.redInvm=function(){return c(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},d.prototype.redNeg=function(){return c(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},d.prototype.redPow=function(s){return c(this.red&&!s.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,s)};var At={k256:null,p224:null,p192:null,p25519:null};function Ct(nt,s){this.name=nt,this.p=new d(s,16),this.n=this.p.bitLength(),this.k=new d(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Ct.prototype._tmp=function(){var s=new d(null);return s.words=new Array(Math.ceil(this.n/13)),s},Ct.prototype.ireduce=function(s){var b=s,$;do this.split(b,this.tmp),b=this.imulK(b),b=b.iadd(this.tmp),$=b.bitLength();while($>this.n);var _e=$<this.n?-1:b.ucmp(this.p);return _e===0?(b.words[0]=0,b.length=1):_e>0?b.isub(this.p):b.strip!==void 0?b.strip():b._strip(),b},Ct.prototype.split=function(s,b){s.iushrn(this.n,0,b)},Ct.prototype.imulK=function(s){return s.imul(this.k)};function dt(){Ct.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}j(dt,Ct),dt.prototype.split=function(s,b){for(var $=4194303,_e=Math.min(s.length,9),it=0;it<_e;it++)b.words[it]=s.words[it];if(b.length=_e,s.length<=9){s.words[0]=0,s.length=1;return}var pt=s.words[9];for(b.words[b.length++]=pt&$,it=10;it<s.length;it++){var mt=s.words[it]|0;s.words[it-10]=(mt&$)<<4|pt>>>22,pt=mt}pt>>>=22,s.words[it-10]=pt,pt===0&&s.length>10?s.length-=10:s.length-=9},dt.prototype.imulK=function(s){s.words[s.length]=0,s.words[s.length+1]=0,s.length+=2;for(var b=0,$=0;$<s.length;$++){var _e=s.words[$]|0;b+=_e*977,s.words[$]=b&67108863,b=_e*64+(b/67108864|0)}return s.words[s.length-1]===0&&(s.length--,s.words[s.length-1]===0&&s.length--),s};function Et(){Ct.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}j(Et,Ct);function Rt(){Ct.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}j(Rt,Ct);function Mt(){Ct.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}j(Mt,Ct),Mt.prototype.imulK=function(s){for(var b=0,$=0;$<s.length;$++){var _e=(s.words[$]|0)*19+b,it=_e&67108863;_e>>>=26,s.words[$]=it,b=_e}return b!==0&&(s.words[s.length++]=b),s},d._prime=function(s){if(At[s])return At[s];var b;if(s==="k256")b=new dt;else if(s==="p224")b=new Et;else if(s==="p192")b=new Rt;else if(s==="p25519")b=new Mt;else throw new Error("Unknown prime "+s);return At[s]=b,b};function _t(nt){if(typeof nt=="string"){var s=d._prime(nt);this.m=s.p,this.prime=s}else c(nt.gtn(1),"modulus must be greater than 1"),this.m=nt,this.prime=null}_t.prototype._verify1=function(s){c(s.negative===0,"red works only with positives"),c(s.red,"red works only with red numbers")},_t.prototype._verify2=function(s,b){c((s.negative|b.negative)===0,"red works only with positives"),c(s.red&&s.red===b.red,"red works only with red numbers")},_t.prototype.imod=function(s){return this.prime?this.prime.ireduce(s)._forceRed(this):s.umod(this.m)._forceRed(this)},_t.prototype.neg=function(s){return s.isZero()?s.clone():this.m.sub(s)._forceRed(this)},_t.prototype.add=function(s,b){this._verify2(s,b);var $=s.add(b);return $.cmp(this.m)>=0&&$.isub(this.m),$._forceRed(this)},_t.prototype.iadd=function(s,b){this._verify2(s,b);var $=s.iadd(b);return $.cmp(this.m)>=0&&$.isub(this.m),$},_t.prototype.sub=function(s,b){this._verify2(s,b);var $=s.sub(b);return $.cmpn(0)<0&&$.iadd(this.m),$._forceRed(this)},_t.prototype.isub=function(s,b){this._verify2(s,b);var $=s.isub(b);return $.cmpn(0)<0&&$.iadd(this.m),$},_t.prototype.shl=function(s,b){return this._verify1(s),this.imod(s.ushln(b))},_t.prototype.imul=function(s,b){return this._verify2(s,b),this.imod(s.imul(b))},_t.prototype.mul=function(s,b){return this._verify2(s,b),this.imod(s.mul(b))},_t.prototype.isqr=function(s){return this.imul(s,s.clone())},_t.prototype.sqr=function(s){return this.mul(s,s)},_t.prototype.sqrt=function(s){if(s.isZero())return s.clone();var b=this.m.andln(3);if(c(b%2===1),b===3){var $=this.m.add(new d(1)).iushrn(2);return this.pow(s,$)}for(var _e=this.m.subn(1),it=0;!_e.isZero()&&_e.andln(1)===0;)it++,_e.iushrn(1);c(!_e.isZero());var pt=new d(1).toRed(this),mt=pt.redNeg(),lt=this.m.subn(1).iushrn(1),_=this.m.bitLength();for(_=new d(2*_*_).toRed(this);this.pow(_,lt).cmp(mt)!==0;)_.redIAdd(mt);for(var tt=this.pow(_,_e),Tt=this.pow(s,_e.addn(1).iushrn(1)),It=this.pow(s,_e),Nt=it;It.cmp(pt)!==0;){for(var Ut=It,Gt=0;Ut.cmp(pt)!==0;Gt++)Ut=Ut.redSqr();c(Gt<Nt);var Pt=this.pow(tt,new d(1).iushln(Nt-Gt-1));Tt=Tt.redMul(Pt),tt=Pt.redSqr(),It=It.redMul(tt),Nt=Gt}return Tt},_t.prototype.invm=function(s){var b=s._invmp(this.m);return b.negative!==0?(b.negative=0,this.imod(b).redNeg()):this.imod(b)},_t.prototype.pow=function(s,b){if(b.isZero())return new d(1).toRed(this);if(b.cmpn(1)===0)return s.clone();var $=4,_e=new Array(1<<$);_e[0]=new d(1).toRed(this),_e[1]=s;for(var it=2;it<_e.length;it++)_e[it]=this.mul(_e[it-1],s);var pt=_e[0],mt=0,lt=0,_=b.bitLength()%26;for(_===0&&(_=26),it=b.length-1;it>=0;it--){for(var tt=b.words[it],Tt=_-1;Tt>=0;Tt--){var It=tt>>Tt&1;if(pt!==_e[0]&&(pt=this.sqr(pt)),It===0&&mt===0){lt=0;continue}mt<<=1,mt|=It,lt++,!(lt!==$&&(it!==0||Tt!==0))&&(pt=this.mul(pt,_e[mt]),lt=0,mt=0)}_=26}return pt},_t.prototype.convertTo=function(s){var b=s.umod(this.m);return b===s?b.clone():b},_t.prototype.convertFrom=function(s){var b=s.clone();return b.red=null,b},d.mont=function(s){return new kt(s)};function kt(nt){_t.call(this,nt),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new d(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}j(kt,_t),kt.prototype.convertTo=function(s){return this.imod(s.ushln(this.shift))},kt.prototype.convertFrom=function(s){var b=this.imod(s.mul(this.rinv));return b.red=null,b},kt.prototype.imul=function(s,b){if(s.isZero()||b.isZero())return s.words[0]=0,s.length=1,s;var $=s.imul(b),_e=$.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),it=$.isub(_e).iushrn(this.shift),pt=it;return it.cmp(this.m)>=0?pt=it.isub(this.m):it.cmpn(0)<0&&(pt=it.iadd(this.m)),pt._forceRed(this)},kt.prototype.mul=function(s,b){if(s.isZero()||b.isZero())return new d(0)._forceRed(this);var $=s.mul(b),_e=$.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),it=$.isub(_e).iushrn(this.shift),pt=it;return it.cmp(this.m)>=0?pt=it.isub(this.m):it.cmpn(0)<0&&(pt=it.iadd(this.m)),pt._forceRed(this)},kt.prototype.invm=function(s){var b=this.imod(s._invmp(this.m).mul(this.r2));return b._forceRed(this)}})(o,commonjsGlobal)}(bn$6)),bn$6.exports}var bn$5={exports:{}};bn$5.exports;var hasRequiredBn$5;function requireBn$5(){return hasRequiredBn$5||(hasRequiredBn$5=1,function(o){(function(e,a){function c(nt,s){if(!nt)throw new Error(s||"Assertion failed")}function j(nt,s){nt.super_=s;var b=function(){};b.prototype=s.prototype,nt.prototype=new b,nt.prototype.constructor=nt}function d(nt,s,b){if(d.isBN(nt))return nt;this.negative=0,this.words=null,this.length=0,this.red=null,nt!==null&&((s==="le"||s==="be")&&(b=s,s=10),this._init(nt||0,s||10,b||"be"))}typeof e=="object"?e.exports=d:a.BN=d,d.BN=d,d.wordSize=26;var et;try{typeof window<"u"&&typeof window.Buffer<"u"?et=window.Buffer:et=require$$1$2.Buffer}catch{}d.isBN=function(s){return s instanceof d?!0:s!==null&&typeof s=="object"&&s.constructor.wordSize===d.wordSize&&Array.isArray(s.words)},d.max=function(s,b){return s.cmp(b)>0?s:b},d.min=function(s,b){return s.cmp(b)<0?s:b},d.prototype._init=function(s,b,$){if(typeof s=="number")return this._initNumber(s,b,$);if(typeof s=="object")return this._initArray(s,b,$);b==="hex"&&(b=16),c(b===(b|0)&&b>=2&&b<=36),s=s.toString().replace(/\s+/g,"");var _e=0;s[0]==="-"&&(_e++,this.negative=1),_e<s.length&&(b===16?this._parseHex(s,_e,$):(this._parseBase(s,b,_e),$==="le"&&this._initArray(this.toArray(),b,$)))},d.prototype._initNumber=function(s,b,$){s<0&&(this.negative=1,s=-s),s<67108864?(this.words=[s&67108863],this.length=1):s<4503599627370496?(this.words=[s&67108863,s/67108864&67108863],this.length=2):(c(s<9007199254740992),this.words=[s&67108863,s/67108864&67108863,1],this.length=3),$==="le"&&this._initArray(this.toArray(),b,$)},d.prototype._initArray=function(s,b,$){if(c(typeof s.length=="number"),s.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(s.length/3),this.words=new Array(this.length);for(var _e=0;_e<this.length;_e++)this.words[_e]=0;var it,pt,mt=0;if($==="be")for(_e=s.length-1,it=0;_e>=0;_e-=3)pt=s[_e]|s[_e-1]<<8|s[_e-2]<<16,this.words[it]|=pt<<mt&67108863,this.words[it+1]=pt>>>26-mt&67108863,mt+=24,mt>=26&&(mt-=26,it++);else if($==="le")for(_e=0,it=0;_e<s.length;_e+=3)pt=s[_e]|s[_e+1]<<8|s[_e+2]<<16,this.words[it]|=pt<<mt&67108863,this.words[it+1]=pt>>>26-mt&67108863,mt+=24,mt>=26&&(mt-=26,it++);return this.strip()};function at(nt,s){var b=nt.charCodeAt(s);return b>=65&&b<=70?b-55:b>=97&&b<=102?b-87:b-48&15}function st(nt,s,b){var $=at(nt,b);return b-1>=s&&($|=at(nt,b-1)<<4),$}d.prototype._parseHex=function(s,b,$){this.length=Math.ceil((s.length-b)/6),this.words=new Array(this.length);for(var _e=0;_e<this.length;_e++)this.words[_e]=0;var it=0,pt=0,mt;if($==="be")for(_e=s.length-1;_e>=b;_e-=2)mt=st(s,b,_e)<<it,this.words[pt]|=mt&67108863,it>=18?(it-=18,pt+=1,this.words[pt]|=mt>>>26):it+=8;else{var lt=s.length-b;for(_e=lt%2===0?b+1:b;_e<s.length;_e+=2)mt=st(s,b,_e)<<it,this.words[pt]|=mt&67108863,it>=18?(it-=18,pt+=1,this.words[pt]|=mt>>>26):it+=8}this.strip()};function ct(nt,s,b,$){for(var _e=0,it=Math.min(nt.length,b),pt=s;pt<it;pt++){var mt=nt.charCodeAt(pt)-48;_e*=$,mt>=49?_e+=mt-49+10:mt>=17?_e+=mt-17+10:_e+=mt}return _e}d.prototype._parseBase=function(s,b,$){this.words=[0],this.length=1;for(var _e=0,it=1;it<=67108863;it*=b)_e++;_e--,it=it/b|0;for(var pt=s.length-$,mt=pt%_e,lt=Math.min(pt,pt-mt)+$,_=0,tt=$;tt<lt;tt+=_e)_=ct(s,tt,tt+_e,b),this.imuln(it),this.words[0]+_<67108864?this.words[0]+=_:this._iaddn(_);if(mt!==0){var Tt=1;for(_=ct(s,tt,s.length,b),tt=0;tt<mt;tt++)Tt*=b;this.imuln(Tt),this.words[0]+_<67108864?this.words[0]+=_:this._iaddn(_)}this.strip()},d.prototype.copy=function(s){s.words=new Array(this.length);for(var b=0;b<this.length;b++)s.words[b]=this.words[b];s.length=this.length,s.negative=this.negative,s.red=this.red},d.prototype.clone=function(){var s=new d(null);return this.copy(s),s},d.prototype._expand=function(s){for(;this.length<s;)this.words[this.length++]=0;return this},d.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},d.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},d.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var ot=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],gt=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],ft=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];d.prototype.toString=function(s,b){s=s||10,b=b|0||1;var $;if(s===16||s==="hex"){$="";for(var _e=0,it=0,pt=0;pt<this.length;pt++){var mt=this.words[pt],lt=((mt<<_e|it)&16777215).toString(16);it=mt>>>24-_e&16777215,it!==0||pt!==this.length-1?$=ot[6-lt.length]+lt+$:$=lt+$,_e+=2,_e>=26&&(_e-=26,pt--)}for(it!==0&&($=it.toString(16)+$);$.length%b!==0;)$="0"+$;return this.negative!==0&&($="-"+$),$}if(s===(s|0)&&s>=2&&s<=36){var _=gt[s],tt=ft[s];$="";var Tt=this.clone();for(Tt.negative=0;!Tt.isZero();){var It=Tt.modn(tt).toString(s);Tt=Tt.idivn(tt),Tt.isZero()?$=It+$:$=ot[_-It.length]+It+$}for(this.isZero()&&($="0"+$);$.length%b!==0;)$="0"+$;return this.negative!==0&&($="-"+$),$}c(!1,"Base should be between 2 and 36")},d.prototype.toNumber=function(){var s=this.words[0];return this.length===2?s+=this.words[1]*67108864:this.length===3&&this.words[2]===1?s+=4503599627370496+this.words[1]*67108864:this.length>2&&c(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-s:s},d.prototype.toJSON=function(){return this.toString(16)},d.prototype.toBuffer=function(s,b){return c(typeof et<"u"),this.toArrayLike(et,s,b)},d.prototype.toArray=function(s,b){return this.toArrayLike(Array,s,b)},d.prototype.toArrayLike=function(s,b,$){var _e=this.byteLength(),it=$||Math.max(1,_e);c(_e<=it,"byte array longer than desired length"),c(it>0,"Requested array length <= 0"),this.strip();var pt=b==="le",mt=new s(it),lt,_,tt=this.clone();if(pt){for(_=0;!tt.isZero();_++)lt=tt.andln(255),tt.iushrn(8),mt[_]=lt;for(;_<it;_++)mt[_]=0}else{for(_=0;_<it-_e;_++)mt[_]=0;for(_=0;!tt.isZero();_++)lt=tt.andln(255),tt.iushrn(8),mt[it-_-1]=lt}return mt},Math.clz32?d.prototype._countBits=function(s){return 32-Math.clz32(s)}:d.prototype._countBits=function(s){var b=s,$=0;return b>=4096&&($+=13,b>>>=13),b>=64&&($+=7,b>>>=7),b>=8&&($+=4,b>>>=4),b>=2&&($+=2,b>>>=2),$+b},d.prototype._zeroBits=function(s){if(s===0)return 26;var b=s,$=0;return b&8191||($+=13,b>>>=13),b&127||($+=7,b>>>=7),b&15||($+=4,b>>>=4),b&3||($+=2,b>>>=2),b&1||$++,$},d.prototype.bitLength=function(){var s=this.words[this.length-1],b=this._countBits(s);return(this.length-1)*26+b};function yt(nt){for(var s=new Array(nt.bitLength()),b=0;b<s.length;b++){var $=b/26|0,_e=b%26;s[b]=(nt.words[$]&1<<_e)>>>_e}return s}d.prototype.zeroBits=function(){if(this.isZero())return 0;for(var s=0,b=0;b<this.length;b++){var $=this._zeroBits(this.words[b]);if(s+=$,$!==26)break}return s},d.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},d.prototype.toTwos=function(s){return this.negative!==0?this.abs().inotn(s).iaddn(1):this.clone()},d.prototype.fromTwos=function(s){return this.testn(s-1)?this.notn(s).iaddn(1).ineg():this.clone()},d.prototype.isNeg=function(){return this.negative!==0},d.prototype.neg=function(){return this.clone().ineg()},d.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},d.prototype.iuor=function(s){for(;this.length<s.length;)this.words[this.length++]=0;for(var b=0;b<s.length;b++)this.words[b]=this.words[b]|s.words[b];return this.strip()},d.prototype.ior=function(s){return c((this.negative|s.negative)===0),this.iuor(s)},d.prototype.or=function(s){return this.length>s.length?this.clone().ior(s):s.clone().ior(this)},d.prototype.uor=function(s){return this.length>s.length?this.clone().iuor(s):s.clone().iuor(this)},d.prototype.iuand=function(s){var b;this.length>s.length?b=s:b=this;for(var $=0;$<b.length;$++)this.words[$]=this.words[$]&s.words[$];return this.length=b.length,this.strip()},d.prototype.iand=function(s){return c((this.negative|s.negative)===0),this.iuand(s)},d.prototype.and=function(s){return this.length>s.length?this.clone().iand(s):s.clone().iand(this)},d.prototype.uand=function(s){return this.length>s.length?this.clone().iuand(s):s.clone().iuand(this)},d.prototype.iuxor=function(s){var b,$;this.length>s.length?(b=this,$=s):(b=s,$=this);for(var _e=0;_e<$.length;_e++)this.words[_e]=b.words[_e]^$.words[_e];if(this!==b)for(;_e<b.length;_e++)this.words[_e]=b.words[_e];return this.length=b.length,this.strip()},d.prototype.ixor=function(s){return c((this.negative|s.negative)===0),this.iuxor(s)},d.prototype.xor=function(s){return this.length>s.length?this.clone().ixor(s):s.clone().ixor(this)},d.prototype.uxor=function(s){return this.length>s.length?this.clone().iuxor(s):s.clone().iuxor(this)},d.prototype.inotn=function(s){c(typeof s=="number"&&s>=0);var b=Math.ceil(s/26)|0,$=s%26;this._expand(b),$>0&&b--;for(var _e=0;_e<b;_e++)this.words[_e]=~this.words[_e]&67108863;return $>0&&(this.words[_e]=~this.words[_e]&67108863>>26-$),this.strip()},d.prototype.notn=function(s){return this.clone().inotn(s)},d.prototype.setn=function(s,b){c(typeof s=="number"&&s>=0);var $=s/26|0,_e=s%26;return this._expand($+1),b?this.words[$]=this.words[$]|1<<_e:this.words[$]=this.words[$]&~(1<<_e),this.strip()},d.prototype.iadd=function(s){var b;if(this.negative!==0&&s.negative===0)return this.negative=0,b=this.isub(s),this.negative^=1,this._normSign();if(this.negative===0&&s.negative!==0)return s.negative=0,b=this.isub(s),s.negative=1,b._normSign();var $,_e;this.length>s.length?($=this,_e=s):($=s,_e=this);for(var it=0,pt=0;pt<_e.length;pt++)b=($.words[pt]|0)+(_e.words[pt]|0)+it,this.words[pt]=b&67108863,it=b>>>26;for(;it!==0&&pt<$.length;pt++)b=($.words[pt]|0)+it,this.words[pt]=b&67108863,it=b>>>26;if(this.length=$.length,it!==0)this.words[this.length]=it,this.length++;else if($!==this)for(;pt<$.length;pt++)this.words[pt]=$.words[pt];return this},d.prototype.add=function(s){var b;return s.negative!==0&&this.negative===0?(s.negative=0,b=this.sub(s),s.negative^=1,b):s.negative===0&&this.negative!==0?(this.negative=0,b=s.sub(this),this.negative=1,b):this.length>s.length?this.clone().iadd(s):s.clone().iadd(this)},d.prototype.isub=function(s){if(s.negative!==0){s.negative=0;var b=this.iadd(s);return s.negative=1,b._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(s),this.negative=1,this._normSign();var $=this.cmp(s);if($===0)return this.negative=0,this.length=1,this.words[0]=0,this;var _e,it;$>0?(_e=this,it=s):(_e=s,it=this);for(var pt=0,mt=0;mt<it.length;mt++)b=(_e.words[mt]|0)-(it.words[mt]|0)+pt,pt=b>>26,this.words[mt]=b&67108863;for(;pt!==0&&mt<_e.length;mt++)b=(_e.words[mt]|0)+pt,pt=b>>26,this.words[mt]=b&67108863;if(pt===0&&mt<_e.length&&_e!==this)for(;mt<_e.length;mt++)this.words[mt]=_e.words[mt];return this.length=Math.max(this.length,mt),_e!==this&&(this.negative=1),this.strip()},d.prototype.sub=function(s){return this.clone().isub(s)};function vt(nt,s,b){b.negative=s.negative^nt.negative;var $=nt.length+s.length|0;b.length=$,$=$-1|0;var _e=nt.words[0]|0,it=s.words[0]|0,pt=_e*it,mt=pt&67108863,lt=pt/67108864|0;b.words[0]=mt;for(var _=1;_<$;_++){for(var tt=lt>>>26,Tt=lt&67108863,It=Math.min(_,s.length-1),Nt=Math.max(0,_-nt.length+1);Nt<=It;Nt++){var Ut=_-Nt|0;_e=nt.words[Ut]|0,it=s.words[Nt]|0,pt=_e*it+Tt,tt+=pt/67108864|0,Tt=pt&67108863}b.words[_]=Tt|0,lt=tt|0}return lt!==0?b.words[_]=lt|0:b.length--,b.strip()}var rt=function(s,b,$){var _e=s.words,it=b.words,pt=$.words,mt=0,lt,_,tt,Tt=_e[0]|0,It=Tt&8191,Nt=Tt>>>13,Ut=_e[1]|0,Gt=Ut&8191,Pt=Ut>>>13,qt=_e[2]|0,Kt=qt&8191,jt=qt>>>13,Ht=_e[3]|0,Bt=Ht&8191,Jt=Ht>>>13,sr=_e[4]|0,hr=sr&8191,Ar=sr>>>13,gn=_e[5]|0,Lr=gn&8191,wr=gn>>>13,En=_e[6]|0,Dr=En&8191,Qr=En>>>13,Dn=_e[7]|0,Br=Dn&8191,Gr=Dn>>>13,Ln=_e[8]|0,Fr=Ln&8191,_i=Ln>>>13,Kn=_e[9]|0,Wt=Kn&8191,Lt=Kn>>>13,zt=it[0]|0,Zt=zt&8191,ar=zt>>>13,Or=it[1]|0,vr=Or&8191,Rr=Or>>>13,fr=it[2]|0,tr=fr&8191,yr=fr>>>13,fn=it[3]|0,Nr=fn&8191,zr=fn>>>13,xn=it[4]|0,Kr=xn&8191,nn=xn>>>13,Wn=it[5]|0,Zr=Wn&8191,on=Wn>>>13,Xn=it[6]|0,en=Xn&8191,ln=Xn>>>13,Zn=it[7]|0,$t=Zn&8191,or=Zn>>>13,Yr=it[8]|0,Vr=Yr&8191,Hr=Yr>>>13,Mn=it[9]|0,Ur=Mn&8191,tn=Mn>>>13;$.negative=s.negative^b.negative,$.length=19,lt=Math.imul(It,Zt),_=Math.imul(It,ar),_=_+Math.imul(Nt,Zt)|0,tt=Math.imul(Nt,ar);var jn=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(jn>>>26)|0,jn&=67108863,lt=Math.imul(Gt,Zt),_=Math.imul(Gt,ar),_=_+Math.imul(Pt,Zt)|0,tt=Math.imul(Pt,ar),lt=lt+Math.imul(It,vr)|0,_=_+Math.imul(It,Rr)|0,_=_+Math.imul(Nt,vr)|0,tt=tt+Math.imul(Nt,Rr)|0;var Un=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(Un>>>26)|0,Un&=67108863,lt=Math.imul(Kt,Zt),_=Math.imul(Kt,ar),_=_+Math.imul(jt,Zt)|0,tt=Math.imul(jt,ar),lt=lt+Math.imul(Gt,vr)|0,_=_+Math.imul(Gt,Rr)|0,_=_+Math.imul(Pt,vr)|0,tt=tt+Math.imul(Pt,Rr)|0,lt=lt+Math.imul(It,tr)|0,_=_+Math.imul(It,yr)|0,_=_+Math.imul(Nt,tr)|0,tt=tt+Math.imul(Nt,yr)|0;var ao=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(ao>>>26)|0,ao&=67108863,lt=Math.imul(Bt,Zt),_=Math.imul(Bt,ar),_=_+Math.imul(Jt,Zt)|0,tt=Math.imul(Jt,ar),lt=lt+Math.imul(Kt,vr)|0,_=_+Math.imul(Kt,Rr)|0,_=_+Math.imul(jt,vr)|0,tt=tt+Math.imul(jt,Rr)|0,lt=lt+Math.imul(Gt,tr)|0,_=_+Math.imul(Gt,yr)|0,_=_+Math.imul(Pt,tr)|0,tt=tt+Math.imul(Pt,yr)|0,lt=lt+Math.imul(It,Nr)|0,_=_+Math.imul(It,zr)|0,_=_+Math.imul(Nt,Nr)|0,tt=tt+Math.imul(Nt,zr)|0;var co=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(co>>>26)|0,co&=67108863,lt=Math.imul(hr,Zt),_=Math.imul(hr,ar),_=_+Math.imul(Ar,Zt)|0,tt=Math.imul(Ar,ar),lt=lt+Math.imul(Bt,vr)|0,_=_+Math.imul(Bt,Rr)|0,_=_+Math.imul(Jt,vr)|0,tt=tt+Math.imul(Jt,Rr)|0,lt=lt+Math.imul(Kt,tr)|0,_=_+Math.imul(Kt,yr)|0,_=_+Math.imul(jt,tr)|0,tt=tt+Math.imul(jt,yr)|0,lt=lt+Math.imul(Gt,Nr)|0,_=_+Math.imul(Gt,zr)|0,_=_+Math.imul(Pt,Nr)|0,tt=tt+Math.imul(Pt,zr)|0,lt=lt+Math.imul(It,Kr)|0,_=_+Math.imul(It,nn)|0,_=_+Math.imul(Nt,Kr)|0,tt=tt+Math.imul(Nt,nn)|0;var ro=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(ro>>>26)|0,ro&=67108863,lt=Math.imul(Lr,Zt),_=Math.imul(Lr,ar),_=_+Math.imul(wr,Zt)|0,tt=Math.imul(wr,ar),lt=lt+Math.imul(hr,vr)|0,_=_+Math.imul(hr,Rr)|0,_=_+Math.imul(Ar,vr)|0,tt=tt+Math.imul(Ar,Rr)|0,lt=lt+Math.imul(Bt,tr)|0,_=_+Math.imul(Bt,yr)|0,_=_+Math.imul(Jt,tr)|0,tt=tt+Math.imul(Jt,yr)|0,lt=lt+Math.imul(Kt,Nr)|0,_=_+Math.imul(Kt,zr)|0,_=_+Math.imul(jt,Nr)|0,tt=tt+Math.imul(jt,zr)|0,lt=lt+Math.imul(Gt,Kr)|0,_=_+Math.imul(Gt,nn)|0,_=_+Math.imul(Pt,Kr)|0,tt=tt+Math.imul(Pt,nn)|0,lt=lt+Math.imul(It,Zr)|0,_=_+Math.imul(It,on)|0,_=_+Math.imul(Nt,Zr)|0,tt=tt+Math.imul(Nt,on)|0;var vo=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(vo>>>26)|0,vo&=67108863,lt=Math.imul(Dr,Zt),_=Math.imul(Dr,ar),_=_+Math.imul(Qr,Zt)|0,tt=Math.imul(Qr,ar),lt=lt+Math.imul(Lr,vr)|0,_=_+Math.imul(Lr,Rr)|0,_=_+Math.imul(wr,vr)|0,tt=tt+Math.imul(wr,Rr)|0,lt=lt+Math.imul(hr,tr)|0,_=_+Math.imul(hr,yr)|0,_=_+Math.imul(Ar,tr)|0,tt=tt+Math.imul(Ar,yr)|0,lt=lt+Math.imul(Bt,Nr)|0,_=_+Math.imul(Bt,zr)|0,_=_+Math.imul(Jt,Nr)|0,tt=tt+Math.imul(Jt,zr)|0,lt=lt+Math.imul(Kt,Kr)|0,_=_+Math.imul(Kt,nn)|0,_=_+Math.imul(jt,Kr)|0,tt=tt+Math.imul(jt,nn)|0,lt=lt+Math.imul(Gt,Zr)|0,_=_+Math.imul(Gt,on)|0,_=_+Math.imul(Pt,Zr)|0,tt=tt+Math.imul(Pt,on)|0,lt=lt+Math.imul(It,en)|0,_=_+Math.imul(It,ln)|0,_=_+Math.imul(Nt,en)|0,tt=tt+Math.imul(Nt,ln)|0;var oo=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(oo>>>26)|0,oo&=67108863,lt=Math.imul(Br,Zt),_=Math.imul(Br,ar),_=_+Math.imul(Gr,Zt)|0,tt=Math.imul(Gr,ar),lt=lt+Math.imul(Dr,vr)|0,_=_+Math.imul(Dr,Rr)|0,_=_+Math.imul(Qr,vr)|0,tt=tt+Math.imul(Qr,Rr)|0,lt=lt+Math.imul(Lr,tr)|0,_=_+Math.imul(Lr,yr)|0,_=_+Math.imul(wr,tr)|0,tt=tt+Math.imul(wr,yr)|0,lt=lt+Math.imul(hr,Nr)|0,_=_+Math.imul(hr,zr)|0,_=_+Math.imul(Ar,Nr)|0,tt=tt+Math.imul(Ar,zr)|0,lt=lt+Math.imul(Bt,Kr)|0,_=_+Math.imul(Bt,nn)|0,_=_+Math.imul(Jt,Kr)|0,tt=tt+Math.imul(Jt,nn)|0,lt=lt+Math.imul(Kt,Zr)|0,_=_+Math.imul(Kt,on)|0,_=_+Math.imul(jt,Zr)|0,tt=tt+Math.imul(jt,on)|0,lt=lt+Math.imul(Gt,en)|0,_=_+Math.imul(Gt,ln)|0,_=_+Math.imul(Pt,en)|0,tt=tt+Math.imul(Pt,ln)|0,lt=lt+Math.imul(It,$t)|0,_=_+Math.imul(It,or)|0,_=_+Math.imul(Nt,$t)|0,tt=tt+Math.imul(Nt,or)|0;var mo=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(mo>>>26)|0,mo&=67108863,lt=Math.imul(Fr,Zt),_=Math.imul(Fr,ar),_=_+Math.imul(_i,Zt)|0,tt=Math.imul(_i,ar),lt=lt+Math.imul(Br,vr)|0,_=_+Math.imul(Br,Rr)|0,_=_+Math.imul(Gr,vr)|0,tt=tt+Math.imul(Gr,Rr)|0,lt=lt+Math.imul(Dr,tr)|0,_=_+Math.imul(Dr,yr)|0,_=_+Math.imul(Qr,tr)|0,tt=tt+Math.imul(Qr,yr)|0,lt=lt+Math.imul(Lr,Nr)|0,_=_+Math.imul(Lr,zr)|0,_=_+Math.imul(wr,Nr)|0,tt=tt+Math.imul(wr,zr)|0,lt=lt+Math.imul(hr,Kr)|0,_=_+Math.imul(hr,nn)|0,_=_+Math.imul(Ar,Kr)|0,tt=tt+Math.imul(Ar,nn)|0,lt=lt+Math.imul(Bt,Zr)|0,_=_+Math.imul(Bt,on)|0,_=_+Math.imul(Jt,Zr)|0,tt=tt+Math.imul(Jt,on)|0,lt=lt+Math.imul(Kt,en)|0,_=_+Math.imul(Kt,ln)|0,_=_+Math.imul(jt,en)|0,tt=tt+Math.imul(jt,ln)|0,lt=lt+Math.imul(Gt,$t)|0,_=_+Math.imul(Gt,or)|0,_=_+Math.imul(Pt,$t)|0,tt=tt+Math.imul(Pt,or)|0,lt=lt+Math.imul(It,Vr)|0,_=_+Math.imul(It,Hr)|0,_=_+Math.imul(Nt,Vr)|0,tt=tt+Math.imul(Nt,Hr)|0;var ho=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(ho>>>26)|0,ho&=67108863,lt=Math.imul(Wt,Zt),_=Math.imul(Wt,ar),_=_+Math.imul(Lt,Zt)|0,tt=Math.imul(Lt,ar),lt=lt+Math.imul(Fr,vr)|0,_=_+Math.imul(Fr,Rr)|0,_=_+Math.imul(_i,vr)|0,tt=tt+Math.imul(_i,Rr)|0,lt=lt+Math.imul(Br,tr)|0,_=_+Math.imul(Br,yr)|0,_=_+Math.imul(Gr,tr)|0,tt=tt+Math.imul(Gr,yr)|0,lt=lt+Math.imul(Dr,Nr)|0,_=_+Math.imul(Dr,zr)|0,_=_+Math.imul(Qr,Nr)|0,tt=tt+Math.imul(Qr,zr)|0,lt=lt+Math.imul(Lr,Kr)|0,_=_+Math.imul(Lr,nn)|0,_=_+Math.imul(wr,Kr)|0,tt=tt+Math.imul(wr,nn)|0,lt=lt+Math.imul(hr,Zr)|0,_=_+Math.imul(hr,on)|0,_=_+Math.imul(Ar,Zr)|0,tt=tt+Math.imul(Ar,on)|0,lt=lt+Math.imul(Bt,en)|0,_=_+Math.imul(Bt,ln)|0,_=_+Math.imul(Jt,en)|0,tt=tt+Math.imul(Jt,ln)|0,lt=lt+Math.imul(Kt,$t)|0,_=_+Math.imul(Kt,or)|0,_=_+Math.imul(jt,$t)|0,tt=tt+Math.imul(jt,or)|0,lt=lt+Math.imul(Gt,Vr)|0,_=_+Math.imul(Gt,Hr)|0,_=_+Math.imul(Pt,Vr)|0,tt=tt+Math.imul(Pt,Hr)|0,lt=lt+Math.imul(It,Ur)|0,_=_+Math.imul(It,tn)|0,_=_+Math.imul(Nt,Ur)|0,tt=tt+Math.imul(Nt,tn)|0;var go=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(go>>>26)|0,go&=67108863,lt=Math.imul(Wt,vr),_=Math.imul(Wt,Rr),_=_+Math.imul(Lt,vr)|0,tt=Math.imul(Lt,Rr),lt=lt+Math.imul(Fr,tr)|0,_=_+Math.imul(Fr,yr)|0,_=_+Math.imul(_i,tr)|0,tt=tt+Math.imul(_i,yr)|0,lt=lt+Math.imul(Br,Nr)|0,_=_+Math.imul(Br,zr)|0,_=_+Math.imul(Gr,Nr)|0,tt=tt+Math.imul(Gr,zr)|0,lt=lt+Math.imul(Dr,Kr)|0,_=_+Math.imul(Dr,nn)|0,_=_+Math.imul(Qr,Kr)|0,tt=tt+Math.imul(Qr,nn)|0,lt=lt+Math.imul(Lr,Zr)|0,_=_+Math.imul(Lr,on)|0,_=_+Math.imul(wr,Zr)|0,tt=tt+Math.imul(wr,on)|0,lt=lt+Math.imul(hr,en)|0,_=_+Math.imul(hr,ln)|0,_=_+Math.imul(Ar,en)|0,tt=tt+Math.imul(Ar,ln)|0,lt=lt+Math.imul(Bt,$t)|0,_=_+Math.imul(Bt,or)|0,_=_+Math.imul(Jt,$t)|0,tt=tt+Math.imul(Jt,or)|0,lt=lt+Math.imul(Kt,Vr)|0,_=_+Math.imul(Kt,Hr)|0,_=_+Math.imul(jt,Vr)|0,tt=tt+Math.imul(jt,Hr)|0,lt=lt+Math.imul(Gt,Ur)|0,_=_+Math.imul(Gt,tn)|0,_=_+Math.imul(Pt,Ur)|0,tt=tt+Math.imul(Pt,tn)|0;var bo=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(bo>>>26)|0,bo&=67108863,lt=Math.imul(Wt,tr),_=Math.imul(Wt,yr),_=_+Math.imul(Lt,tr)|0,tt=Math.imul(Lt,yr),lt=lt+Math.imul(Fr,Nr)|0,_=_+Math.imul(Fr,zr)|0,_=_+Math.imul(_i,Nr)|0,tt=tt+Math.imul(_i,zr)|0,lt=lt+Math.imul(Br,Kr)|0,_=_+Math.imul(Br,nn)|0,_=_+Math.imul(Gr,Kr)|0,tt=tt+Math.imul(Gr,nn)|0,lt=lt+Math.imul(Dr,Zr)|0,_=_+Math.imul(Dr,on)|0,_=_+Math.imul(Qr,Zr)|0,tt=tt+Math.imul(Qr,on)|0,lt=lt+Math.imul(Lr,en)|0,_=_+Math.imul(Lr,ln)|0,_=_+Math.imul(wr,en)|0,tt=tt+Math.imul(wr,ln)|0,lt=lt+Math.imul(hr,$t)|0,_=_+Math.imul(hr,or)|0,_=_+Math.imul(Ar,$t)|0,tt=tt+Math.imul(Ar,or)|0,lt=lt+Math.imul(Bt,Vr)|0,_=_+Math.imul(Bt,Hr)|0,_=_+Math.imul(Jt,Vr)|0,tt=tt+Math.imul(Jt,Hr)|0,lt=lt+Math.imul(Kt,Ur)|0,_=_+Math.imul(Kt,tn)|0,_=_+Math.imul(jt,Ur)|0,tt=tt+Math.imul(jt,tn)|0;var ur=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(ur>>>26)|0,ur&=67108863,lt=Math.imul(Wt,Nr),_=Math.imul(Wt,zr),_=_+Math.imul(Lt,Nr)|0,tt=Math.imul(Lt,zr),lt=lt+Math.imul(Fr,Kr)|0,_=_+Math.imul(Fr,nn)|0,_=_+Math.imul(_i,Kr)|0,tt=tt+Math.imul(_i,nn)|0,lt=lt+Math.imul(Br,Zr)|0,_=_+Math.imul(Br,on)|0,_=_+Math.imul(Gr,Zr)|0,tt=tt+Math.imul(Gr,on)|0,lt=lt+Math.imul(Dr,en)|0,_=_+Math.imul(Dr,ln)|0,_=_+Math.imul(Qr,en)|0,tt=tt+Math.imul(Qr,ln)|0,lt=lt+Math.imul(Lr,$t)|0,_=_+Math.imul(Lr,or)|0,_=_+Math.imul(wr,$t)|0,tt=tt+Math.imul(wr,or)|0,lt=lt+Math.imul(hr,Vr)|0,_=_+Math.imul(hr,Hr)|0,_=_+Math.imul(Ar,Vr)|0,tt=tt+Math.imul(Ar,Hr)|0,lt=lt+Math.imul(Bt,Ur)|0,_=_+Math.imul(Bt,tn)|0,_=_+Math.imul(Jt,Ur)|0,tt=tt+Math.imul(Jt,tn)|0;var Cr=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,lt=Math.imul(Wt,Kr),_=Math.imul(Wt,nn),_=_+Math.imul(Lt,Kr)|0,tt=Math.imul(Lt,nn),lt=lt+Math.imul(Fr,Zr)|0,_=_+Math.imul(Fr,on)|0,_=_+Math.imul(_i,Zr)|0,tt=tt+Math.imul(_i,on)|0,lt=lt+Math.imul(Br,en)|0,_=_+Math.imul(Br,ln)|0,_=_+Math.imul(Gr,en)|0,tt=tt+Math.imul(Gr,ln)|0,lt=lt+Math.imul(Dr,$t)|0,_=_+Math.imul(Dr,or)|0,_=_+Math.imul(Qr,$t)|0,tt=tt+Math.imul(Qr,or)|0,lt=lt+Math.imul(Lr,Vr)|0,_=_+Math.imul(Lr,Hr)|0,_=_+Math.imul(wr,Vr)|0,tt=tt+Math.imul(wr,Hr)|0,lt=lt+Math.imul(hr,Ur)|0,_=_+Math.imul(hr,tn)|0,_=_+Math.imul(Ar,Ur)|0,tt=tt+Math.imul(Ar,tn)|0;var $r=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+($r>>>26)|0,$r&=67108863,lt=Math.imul(Wt,Zr),_=Math.imul(Wt,on),_=_+Math.imul(Lt,Zr)|0,tt=Math.imul(Lt,on),lt=lt+Math.imul(Fr,en)|0,_=_+Math.imul(Fr,ln)|0,_=_+Math.imul(_i,en)|0,tt=tt+Math.imul(_i,ln)|0,lt=lt+Math.imul(Br,$t)|0,_=_+Math.imul(Br,or)|0,_=_+Math.imul(Gr,$t)|0,tt=tt+Math.imul(Gr,or)|0,lt=lt+Math.imul(Dr,Vr)|0,_=_+Math.imul(Dr,Hr)|0,_=_+Math.imul(Qr,Vr)|0,tt=tt+Math.imul(Qr,Hr)|0,lt=lt+Math.imul(Lr,Ur)|0,_=_+Math.imul(Lr,tn)|0,_=_+Math.imul(wr,Ur)|0,tt=tt+Math.imul(wr,tn)|0;var dn=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(dn>>>26)|0,dn&=67108863,lt=Math.imul(Wt,en),_=Math.imul(Wt,ln),_=_+Math.imul(Lt,en)|0,tt=Math.imul(Lt,ln),lt=lt+Math.imul(Fr,$t)|0,_=_+Math.imul(Fr,or)|0,_=_+Math.imul(_i,$t)|0,tt=tt+Math.imul(_i,or)|0,lt=lt+Math.imul(Br,Vr)|0,_=_+Math.imul(Br,Hr)|0,_=_+Math.imul(Gr,Vr)|0,tt=tt+Math.imul(Gr,Hr)|0,lt=lt+Math.imul(Dr,Ur)|0,_=_+Math.imul(Dr,tn)|0,_=_+Math.imul(Qr,Ur)|0,tt=tt+Math.imul(Qr,tn)|0;var rn=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(rn>>>26)|0,rn&=67108863,lt=Math.imul(Wt,$t),_=Math.imul(Wt,or),_=_+Math.imul(Lt,$t)|0,tt=Math.imul(Lt,or),lt=lt+Math.imul(Fr,Vr)|0,_=_+Math.imul(Fr,Hr)|0,_=_+Math.imul(_i,Vr)|0,tt=tt+Math.imul(_i,Hr)|0,lt=lt+Math.imul(Br,Ur)|0,_=_+Math.imul(Br,tn)|0,_=_+Math.imul(Gr,Ur)|0,tt=tt+Math.imul(Gr,tn)|0;var Sn=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,lt=Math.imul(Wt,Vr),_=Math.imul(Wt,Hr),_=_+Math.imul(Lt,Vr)|0,tt=Math.imul(Lt,Hr),lt=lt+Math.imul(Fr,Ur)|0,_=_+Math.imul(Fr,tn)|0,_=_+Math.imul(_i,Ur)|0,tt=tt+Math.imul(_i,tn)|0;var In=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(In>>>26)|0,In&=67108863,lt=Math.imul(Wt,Ur),_=Math.imul(Wt,tn),_=_+Math.imul(Lt,Ur)|0,tt=Math.imul(Lt,tn);var Cn=(mt+lt|0)+((_&8191)<<13)|0;return mt=(tt+(_>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,pt[0]=jn,pt[1]=Un,pt[2]=ao,pt[3]=co,pt[4]=ro,pt[5]=vo,pt[6]=oo,pt[7]=mo,pt[8]=ho,pt[9]=go,pt[10]=bo,pt[11]=ur,pt[12]=Cr,pt[13]=$r,pt[14]=dn,pt[15]=rn,pt[16]=Sn,pt[17]=In,pt[18]=Cn,mt!==0&&(pt[19]=mt,$.length++),$};Math.imul||(rt=vt);function bt(nt,s,b){b.negative=s.negative^nt.negative,b.length=nt.length+s.length;for(var $=0,_e=0,it=0;it<b.length-1;it++){var pt=_e;_e=0;for(var mt=$&67108863,lt=Math.min(it,s.length-1),_=Math.max(0,it-nt.length+1);_<=lt;_++){var tt=it-_,Tt=nt.words[tt]|0,It=s.words[_]|0,Nt=Tt*It,Ut=Nt&67108863;pt=pt+(Nt/67108864|0)|0,Ut=Ut+mt|0,mt=Ut&67108863,pt=pt+(Ut>>>26)|0,_e+=pt>>>26,pt&=67108863}b.words[it]=mt,$=pt,pt=_e}return $!==0?b.words[it]=$:b.length--,b.strip()}function ht(nt,s,b){var $=new wt;return $.mulp(nt,s,b)}d.prototype.mulTo=function(s,b){var $,_e=this.length+s.length;return this.length===10&&s.length===10?$=rt(this,s,b):_e<63?$=vt(this,s,b):_e<1024?$=bt(this,s,b):$=ht(this,s,b),$};function wt(nt,s){this.x=nt,this.y=s}wt.prototype.makeRBT=function(s){for(var b=new Array(s),$=d.prototype._countBits(s)-1,_e=0;_e<s;_e++)b[_e]=this.revBin(_e,$,s);return b},wt.prototype.revBin=function(s,b,$){if(s===0||s===$-1)return s;for(var _e=0,it=0;it<b;it++)_e|=(s&1)<<b-it-1,s>>=1;return _e},wt.prototype.permute=function(s,b,$,_e,it,pt){for(var mt=0;mt<pt;mt++)_e[mt]=b[s[mt]],it[mt]=$[s[mt]]},wt.prototype.transform=function(s,b,$,_e,it,pt){this.permute(pt,s,b,$,_e,it);for(var mt=1;mt<it;mt<<=1)for(var lt=mt<<1,_=Math.cos(2*Math.PI/lt),tt=Math.sin(2*Math.PI/lt),Tt=0;Tt<it;Tt+=lt)for(var It=_,Nt=tt,Ut=0;Ut<mt;Ut++){var Gt=$[Tt+Ut],Pt=_e[Tt+Ut],qt=$[Tt+Ut+mt],Kt=_e[Tt+Ut+mt],jt=It*qt-Nt*Kt;Kt=It*Kt+Nt*qt,qt=jt,$[Tt+Ut]=Gt+qt,_e[Tt+Ut]=Pt+Kt,$[Tt+Ut+mt]=Gt-qt,_e[Tt+Ut+mt]=Pt-Kt,Ut!==lt&&(jt=_*It-tt*Nt,Nt=_*Nt+tt*It,It=jt)}},wt.prototype.guessLen13b=function(s,b){var $=Math.max(b,s)|1,_e=$&1,it=0;for($=$/2|0;$;$=$>>>1)it++;return 1<<it+1+_e},wt.prototype.conjugate=function(s,b,$){if(!($<=1))for(var _e=0;_e<$/2;_e++){var it=s[_e];s[_e]=s[$-_e-1],s[$-_e-1]=it,it=b[_e],b[_e]=-b[$-_e-1],b[$-_e-1]=-it}},wt.prototype.normalize13b=function(s,b){for(var $=0,_e=0;_e<b/2;_e++){var it=Math.round(s[2*_e+1]/b)*8192+Math.round(s[2*_e]/b)+$;s[_e]=it&67108863,it<67108864?$=0:$=it/67108864|0}return s},wt.prototype.convert13b=function(s,b,$,_e){for(var it=0,pt=0;pt<b;pt++)it=it+(s[pt]|0),$[2*pt]=it&8191,it=it>>>13,$[2*pt+1]=it&8191,it=it>>>13;for(pt=2*b;pt<_e;++pt)$[pt]=0;c(it===0),c((it&-8192)===0)},wt.prototype.stub=function(s){for(var b=new Array(s),$=0;$<s;$++)b[$]=0;return b},wt.prototype.mulp=function(s,b,$){var _e=2*this.guessLen13b(s.length,b.length),it=this.makeRBT(_e),pt=this.stub(_e),mt=new Array(_e),lt=new Array(_e),_=new Array(_e),tt=new Array(_e),Tt=new Array(_e),It=new Array(_e),Nt=$.words;Nt.length=_e,this.convert13b(s.words,s.length,mt,_e),this.convert13b(b.words,b.length,tt,_e),this.transform(mt,pt,lt,_,_e,it),this.transform(tt,pt,Tt,It,_e,it);for(var Ut=0;Ut<_e;Ut++){var Gt=lt[Ut]*Tt[Ut]-_[Ut]*It[Ut];_[Ut]=lt[Ut]*It[Ut]+_[Ut]*Tt[Ut],lt[Ut]=Gt}return this.conjugate(lt,_,_e),this.transform(lt,_,Nt,pt,_e,it),this.conjugate(Nt,pt,_e),this.normalize13b(Nt,_e),$.negative=s.negative^b.negative,$.length=s.length+b.length,$.strip()},d.prototype.mul=function(s){var b=new d(null);return b.words=new Array(this.length+s.length),this.mulTo(s,b)},d.prototype.mulf=function(s){var b=new d(null);return b.words=new Array(this.length+s.length),ht(this,s,b)},d.prototype.imul=function(s){return this.clone().mulTo(s,this)},d.prototype.imuln=function(s){c(typeof s=="number"),c(s<67108864);for(var b=0,$=0;$<this.length;$++){var _e=(this.words[$]|0)*s,it=(_e&67108863)+(b&67108863);b>>=26,b+=_e/67108864|0,b+=it>>>26,this.words[$]=it&67108863}return b!==0&&(this.words[$]=b,this.length++),this},d.prototype.muln=function(s){return this.clone().imuln(s)},d.prototype.sqr=function(){return this.mul(this)},d.prototype.isqr=function(){return this.imul(this.clone())},d.prototype.pow=function(s){var b=yt(s);if(b.length===0)return new d(1);for(var $=this,_e=0;_e<b.length&&b[_e]===0;_e++,$=$.sqr());if(++_e<b.length)for(var it=$.sqr();_e<b.length;_e++,it=it.sqr())b[_e]!==0&&($=$.mul(it));return $},d.prototype.iushln=function(s){c(typeof s=="number"&&s>=0);var b=s%26,$=(s-b)/26,_e=67108863>>>26-b<<26-b,it;if(b!==0){var pt=0;for(it=0;it<this.length;it++){var mt=this.words[it]&_e,lt=(this.words[it]|0)-mt<<b;this.words[it]=lt|pt,pt=mt>>>26-b}pt&&(this.words[it]=pt,this.length++)}if($!==0){for(it=this.length-1;it>=0;it--)this.words[it+$]=this.words[it];for(it=0;it<$;it++)this.words[it]=0;this.length+=$}return this.strip()},d.prototype.ishln=function(s){return c(this.negative===0),this.iushln(s)},d.prototype.iushrn=function(s,b,$){c(typeof s=="number"&&s>=0);var _e;b?_e=(b-b%26)/26:_e=0;var it=s%26,pt=Math.min((s-it)/26,this.length),mt=67108863^67108863>>>it<<it,lt=$;if(_e-=pt,_e=Math.max(0,_e),lt){for(var _=0;_<pt;_++)lt.words[_]=this.words[_];lt.length=pt}if(pt!==0)if(this.length>pt)for(this.length-=pt,_=0;_<this.length;_++)this.words[_]=this.words[_+pt];else this.words[0]=0,this.length=1;var tt=0;for(_=this.length-1;_>=0&&(tt!==0||_>=_e);_--){var Tt=this.words[_]|0;this.words[_]=tt<<26-it|Tt>>>it,tt=Tt&mt}return lt&&tt!==0&&(lt.words[lt.length++]=tt),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},d.prototype.ishrn=function(s,b,$){return c(this.negative===0),this.iushrn(s,b,$)},d.prototype.shln=function(s){return this.clone().ishln(s)},d.prototype.ushln=function(s){return this.clone().iushln(s)},d.prototype.shrn=function(s){return this.clone().ishrn(s)},d.prototype.ushrn=function(s){return this.clone().iushrn(s)},d.prototype.testn=function(s){c(typeof s=="number"&&s>=0);var b=s%26,$=(s-b)/26,_e=1<<b;if(this.length<=$)return!1;var it=this.words[$];return!!(it&_e)},d.prototype.imaskn=function(s){c(typeof s=="number"&&s>=0);var b=s%26,$=(s-b)/26;if(c(this.negative===0,"imaskn works only with positive numbers"),this.length<=$)return this;if(b!==0&&$++,this.length=Math.min($,this.length),b!==0){var _e=67108863^67108863>>>b<<b;this.words[this.length-1]&=_e}return this.strip()},d.prototype.maskn=function(s){return this.clone().imaskn(s)},d.prototype.iaddn=function(s){return c(typeof s=="number"),c(s<67108864),s<0?this.isubn(-s):this.negative!==0?this.length===1&&(this.words[0]|0)<s?(this.words[0]=s-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(s),this.negative=1,this):this._iaddn(s)},d.prototype._iaddn=function(s){this.words[0]+=s;for(var b=0;b<this.length&&this.words[b]>=67108864;b++)this.words[b]-=67108864,b===this.length-1?this.words[b+1]=1:this.words[b+1]++;return this.length=Math.max(this.length,b+1),this},d.prototype.isubn=function(s){if(c(typeof s=="number"),c(s<67108864),s<0)return this.iaddn(-s);if(this.negative!==0)return this.negative=0,this.iaddn(s),this.negative=1,this;if(this.words[0]-=s,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var b=0;b<this.length&&this.words[b]<0;b++)this.words[b]+=67108864,this.words[b+1]-=1;return this.strip()},d.prototype.addn=function(s){return this.clone().iaddn(s)},d.prototype.subn=function(s){return this.clone().isubn(s)},d.prototype.iabs=function(){return this.negative=0,this},d.prototype.abs=function(){return this.clone().iabs()},d.prototype._ishlnsubmul=function(s,b,$){var _e=s.length+$,it;this._expand(_e);var pt,mt=0;for(it=0;it<s.length;it++){pt=(this.words[it+$]|0)+mt;var lt=(s.words[it]|0)*b;pt-=lt&67108863,mt=(pt>>26)-(lt/67108864|0),this.words[it+$]=pt&67108863}for(;it<this.length-$;it++)pt=(this.words[it+$]|0)+mt,mt=pt>>26,this.words[it+$]=pt&67108863;if(mt===0)return this.strip();for(c(mt===-1),mt=0,it=0;it<this.length;it++)pt=-(this.words[it]|0)+mt,mt=pt>>26,this.words[it]=pt&67108863;return this.negative=1,this.strip()},d.prototype._wordDiv=function(s,b){var $=this.length-s.length,_e=this.clone(),it=s,pt=it.words[it.length-1]|0,mt=this._countBits(pt);$=26-mt,$!==0&&(it=it.ushln($),_e.iushln($),pt=it.words[it.length-1]|0);var lt=_e.length-it.length,_;if(b!=="mod"){_=new d(null),_.length=lt+1,_.words=new Array(_.length);for(var tt=0;tt<_.length;tt++)_.words[tt]=0}var Tt=_e.clone()._ishlnsubmul(it,1,lt);Tt.negative===0&&(_e=Tt,_&&(_.words[lt]=1));for(var It=lt-1;It>=0;It--){var Nt=(_e.words[it.length+It]|0)*67108864+(_e.words[it.length+It-1]|0);for(Nt=Math.min(Nt/pt|0,67108863),_e._ishlnsubmul(it,Nt,It);_e.negative!==0;)Nt--,_e.negative=0,_e._ishlnsubmul(it,1,It),_e.isZero()||(_e.negative^=1);_&&(_.words[It]=Nt)}return _&&_.strip(),_e.strip(),b!=="div"&&$!==0&&_e.iushrn($),{div:_||null,mod:_e}},d.prototype.divmod=function(s,b,$){if(c(!s.isZero()),this.isZero())return{div:new d(0),mod:new d(0)};var _e,it,pt;return this.negative!==0&&s.negative===0?(pt=this.neg().divmod(s,b),b!=="mod"&&(_e=pt.div.neg()),b!=="div"&&(it=pt.mod.neg(),$&&it.negative!==0&&it.iadd(s)),{div:_e,mod:it}):this.negative===0&&s.negative!==0?(pt=this.divmod(s.neg(),b),b!=="mod"&&(_e=pt.div.neg()),{div:_e,mod:pt.mod}):this.negative&s.negative?(pt=this.neg().divmod(s.neg(),b),b!=="div"&&(it=pt.mod.neg(),$&&it.negative!==0&&it.isub(s)),{div:pt.div,mod:it}):s.length>this.length||this.cmp(s)<0?{div:new d(0),mod:this}:s.length===1?b==="div"?{div:this.divn(s.words[0]),mod:null}:b==="mod"?{div:null,mod:new d(this.modn(s.words[0]))}:{div:this.divn(s.words[0]),mod:new d(this.modn(s.words[0]))}:this._wordDiv(s,b)},d.prototype.div=function(s){return this.divmod(s,"div",!1).div},d.prototype.mod=function(s){return this.divmod(s,"mod",!1).mod},d.prototype.umod=function(s){return this.divmod(s,"mod",!0).mod},d.prototype.divRound=function(s){var b=this.divmod(s);if(b.mod.isZero())return b.div;var $=b.div.negative!==0?b.mod.isub(s):b.mod,_e=s.ushrn(1),it=s.andln(1),pt=$.cmp(_e);return pt<0||it===1&&pt===0?b.div:b.div.negative!==0?b.div.isubn(1):b.div.iaddn(1)},d.prototype.modn=function(s){c(s<=67108863);for(var b=(1<<26)%s,$=0,_e=this.length-1;_e>=0;_e--)$=(b*$+(this.words[_e]|0))%s;return $},d.prototype.idivn=function(s){c(s<=67108863);for(var b=0,$=this.length-1;$>=0;$--){var _e=(this.words[$]|0)+b*67108864;this.words[$]=_e/s|0,b=_e%s}return this.strip()},d.prototype.divn=function(s){return this.clone().idivn(s)},d.prototype.egcd=function(s){c(s.negative===0),c(!s.isZero());var b=this,$=s.clone();b.negative!==0?b=b.umod(s):b=b.clone();for(var _e=new d(1),it=new d(0),pt=new d(0),mt=new d(1),lt=0;b.isEven()&&$.isEven();)b.iushrn(1),$.iushrn(1),++lt;for(var _=$.clone(),tt=b.clone();!b.isZero();){for(var Tt=0,It=1;!(b.words[0]&It)&&Tt<26;++Tt,It<<=1);if(Tt>0)for(b.iushrn(Tt);Tt-- >0;)(_e.isOdd()||it.isOdd())&&(_e.iadd(_),it.isub(tt)),_e.iushrn(1),it.iushrn(1);for(var Nt=0,Ut=1;!($.words[0]&Ut)&&Nt<26;++Nt,Ut<<=1);if(Nt>0)for($.iushrn(Nt);Nt-- >0;)(pt.isOdd()||mt.isOdd())&&(pt.iadd(_),mt.isub(tt)),pt.iushrn(1),mt.iushrn(1);b.cmp($)>=0?(b.isub($),_e.isub(pt),it.isub(mt)):($.isub(b),pt.isub(_e),mt.isub(it))}return{a:pt,b:mt,gcd:$.iushln(lt)}},d.prototype._invmp=function(s){c(s.negative===0),c(!s.isZero());var b=this,$=s.clone();b.negative!==0?b=b.umod(s):b=b.clone();for(var _e=new d(1),it=new d(0),pt=$.clone();b.cmpn(1)>0&&$.cmpn(1)>0;){for(var mt=0,lt=1;!(b.words[0]&lt)&&mt<26;++mt,lt<<=1);if(mt>0)for(b.iushrn(mt);mt-- >0;)_e.isOdd()&&_e.iadd(pt),_e.iushrn(1);for(var _=0,tt=1;!($.words[0]&tt)&&_<26;++_,tt<<=1);if(_>0)for($.iushrn(_);_-- >0;)it.isOdd()&&it.iadd(pt),it.iushrn(1);b.cmp($)>=0?(b.isub($),_e.isub(it)):($.isub(b),it.isub(_e))}var Tt;return b.cmpn(1)===0?Tt=_e:Tt=it,Tt.cmpn(0)<0&&Tt.iadd(s),Tt},d.prototype.gcd=function(s){if(this.isZero())return s.abs();if(s.isZero())return this.abs();var b=this.clone(),$=s.clone();b.negative=0,$.negative=0;for(var _e=0;b.isEven()&&$.isEven();_e++)b.iushrn(1),$.iushrn(1);do{for(;b.isEven();)b.iushrn(1);for(;$.isEven();)$.iushrn(1);var it=b.cmp($);if(it<0){var pt=b;b=$,$=pt}else if(it===0||$.cmpn(1)===0)break;b.isub($)}while(!0);return $.iushln(_e)},d.prototype.invm=function(s){return this.egcd(s).a.umod(s)},d.prototype.isEven=function(){return(this.words[0]&1)===0},d.prototype.isOdd=function(){return(this.words[0]&1)===1},d.prototype.andln=function(s){return this.words[0]&s},d.prototype.bincn=function(s){c(typeof s=="number");var b=s%26,$=(s-b)/26,_e=1<<b;if(this.length<=$)return this._expand($+1),this.words[$]|=_e,this;for(var it=_e,pt=$;it!==0&&pt<this.length;pt++){var mt=this.words[pt]|0;mt+=it,it=mt>>>26,mt&=67108863,this.words[pt]=mt}return it!==0&&(this.words[pt]=it,this.length++),this},d.prototype.isZero=function(){return this.length===1&&this.words[0]===0},d.prototype.cmpn=function(s){var b=s<0;if(this.negative!==0&&!b)return-1;if(this.negative===0&&b)return 1;this.strip();var $;if(this.length>1)$=1;else{b&&(s=-s),c(s<=67108863,"Number is too big");var _e=this.words[0]|0;$=_e===s?0:_e<s?-1:1}return this.negative!==0?-$|0:$},d.prototype.cmp=function(s){if(this.negative!==0&&s.negative===0)return-1;if(this.negative===0&&s.negative!==0)return 1;var b=this.ucmp(s);return this.negative!==0?-b|0:b},d.prototype.ucmp=function(s){if(this.length>s.length)return 1;if(this.length<s.length)return-1;for(var b=0,$=this.length-1;$>=0;$--){var _e=this.words[$]|0,it=s.words[$]|0;if(_e!==it){_e<it?b=-1:_e>it&&(b=1);break}}return b},d.prototype.gtn=function(s){return this.cmpn(s)===1},d.prototype.gt=function(s){return this.cmp(s)===1},d.prototype.gten=function(s){return this.cmpn(s)>=0},d.prototype.gte=function(s){return this.cmp(s)>=0},d.prototype.ltn=function(s){return this.cmpn(s)===-1},d.prototype.lt=function(s){return this.cmp(s)===-1},d.prototype.lten=function(s){return this.cmpn(s)<=0},d.prototype.lte=function(s){return this.cmp(s)<=0},d.prototype.eqn=function(s){return this.cmpn(s)===0},d.prototype.eq=function(s){return this.cmp(s)===0},d.red=function(s){return new _t(s)},d.prototype.toRed=function(s){return c(!this.red,"Already a number in reduction context"),c(this.negative===0,"red works only with positives"),s.convertTo(this)._forceRed(s)},d.prototype.fromRed=function(){return c(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},d.prototype._forceRed=function(s){return this.red=s,this},d.prototype.forceRed=function(s){return c(!this.red,"Already a number in reduction context"),this._forceRed(s)},d.prototype.redAdd=function(s){return c(this.red,"redAdd works only with red numbers"),this.red.add(this,s)},d.prototype.redIAdd=function(s){return c(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,s)},d.prototype.redSub=function(s){return c(this.red,"redSub works only with red numbers"),this.red.sub(this,s)},d.prototype.redISub=function(s){return c(this.red,"redISub works only with red numbers"),this.red.isub(this,s)},d.prototype.redShl=function(s){return c(this.red,"redShl works only with red numbers"),this.red.shl(this,s)},d.prototype.redMul=function(s){return c(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.mul(this,s)},d.prototype.redIMul=function(s){return c(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.imul(this,s)},d.prototype.redSqr=function(){return c(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},d.prototype.redISqr=function(){return c(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},d.prototype.redSqrt=function(){return c(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},d.prototype.redInvm=function(){return c(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},d.prototype.redNeg=function(){return c(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},d.prototype.redPow=function(s){return c(this.red&&!s.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,s)};var At={k256:null,p224:null,p192:null,p25519:null};function Ct(nt,s){this.name=nt,this.p=new d(s,16),this.n=this.p.bitLength(),this.k=new d(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Ct.prototype._tmp=function(){var s=new d(null);return s.words=new Array(Math.ceil(this.n/13)),s},Ct.prototype.ireduce=function(s){var b=s,$;do this.split(b,this.tmp),b=this.imulK(b),b=b.iadd(this.tmp),$=b.bitLength();while($>this.n);var _e=$<this.n?-1:b.ucmp(this.p);return _e===0?(b.words[0]=0,b.length=1):_e>0?b.isub(this.p):b.strip!==void 0?b.strip():b._strip(),b},Ct.prototype.split=function(s,b){s.iushrn(this.n,0,b)},Ct.prototype.imulK=function(s){return s.imul(this.k)};function dt(){Ct.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}j(dt,Ct),dt.prototype.split=function(s,b){for(var $=4194303,_e=Math.min(s.length,9),it=0;it<_e;it++)b.words[it]=s.words[it];if(b.length=_e,s.length<=9){s.words[0]=0,s.length=1;return}var pt=s.words[9];for(b.words[b.length++]=pt&$,it=10;it<s.length;it++){var mt=s.words[it]|0;s.words[it-10]=(mt&$)<<4|pt>>>22,pt=mt}pt>>>=22,s.words[it-10]=pt,pt===0&&s.length>10?s.length-=10:s.length-=9},dt.prototype.imulK=function(s){s.words[s.length]=0,s.words[s.length+1]=0,s.length+=2;for(var b=0,$=0;$<s.length;$++){var _e=s.words[$]|0;b+=_e*977,s.words[$]=b&67108863,b=_e*64+(b/67108864|0)}return s.words[s.length-1]===0&&(s.length--,s.words[s.length-1]===0&&s.length--),s};function Et(){Ct.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}j(Et,Ct);function Rt(){Ct.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}j(Rt,Ct);function Mt(){Ct.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}j(Mt,Ct),Mt.prototype.imulK=function(s){for(var b=0,$=0;$<s.length;$++){var _e=(s.words[$]|0)*19+b,it=_e&67108863;_e>>>=26,s.words[$]=it,b=_e}return b!==0&&(s.words[s.length++]=b),s},d._prime=function(s){if(At[s])return At[s];var b;if(s==="k256")b=new dt;else if(s==="p224")b=new Et;else if(s==="p192")b=new Rt;else if(s==="p25519")b=new Mt;else throw new Error("Unknown prime "+s);return At[s]=b,b};function _t(nt){if(typeof nt=="string"){var s=d._prime(nt);this.m=s.p,this.prime=s}else c(nt.gtn(1),"modulus must be greater than 1"),this.m=nt,this.prime=null}_t.prototype._verify1=function(s){c(s.negative===0,"red works only with positives"),c(s.red,"red works only with red numbers")},_t.prototype._verify2=function(s,b){c((s.negative|b.negative)===0,"red works only with positives"),c(s.red&&s.red===b.red,"red works only with red numbers")},_t.prototype.imod=function(s){return this.prime?this.prime.ireduce(s)._forceRed(this):s.umod(this.m)._forceRed(this)},_t.prototype.neg=function(s){return s.isZero()?s.clone():this.m.sub(s)._forceRed(this)},_t.prototype.add=function(s,b){this._verify2(s,b);var $=s.add(b);return $.cmp(this.m)>=0&&$.isub(this.m),$._forceRed(this)},_t.prototype.iadd=function(s,b){this._verify2(s,b);var $=s.iadd(b);return $.cmp(this.m)>=0&&$.isub(this.m),$},_t.prototype.sub=function(s,b){this._verify2(s,b);var $=s.sub(b);return $.cmpn(0)<0&&$.iadd(this.m),$._forceRed(this)},_t.prototype.isub=function(s,b){this._verify2(s,b);var $=s.isub(b);return $.cmpn(0)<0&&$.iadd(this.m),$},_t.prototype.shl=function(s,b){return this._verify1(s),this.imod(s.ushln(b))},_t.prototype.imul=function(s,b){return this._verify2(s,b),this.imod(s.imul(b))},_t.prototype.mul=function(s,b){return this._verify2(s,b),this.imod(s.mul(b))},_t.prototype.isqr=function(s){return this.imul(s,s.clone())},_t.prototype.sqr=function(s){return this.mul(s,s)},_t.prototype.sqrt=function(s){if(s.isZero())return s.clone();var b=this.m.andln(3);if(c(b%2===1),b===3){var $=this.m.add(new d(1)).iushrn(2);return this.pow(s,$)}for(var _e=this.m.subn(1),it=0;!_e.isZero()&&_e.andln(1)===0;)it++,_e.iushrn(1);c(!_e.isZero());var pt=new d(1).toRed(this),mt=pt.redNeg(),lt=this.m.subn(1).iushrn(1),_=this.m.bitLength();for(_=new d(2*_*_).toRed(this);this.pow(_,lt).cmp(mt)!==0;)_.redIAdd(mt);for(var tt=this.pow(_,_e),Tt=this.pow(s,_e.addn(1).iushrn(1)),It=this.pow(s,_e),Nt=it;It.cmp(pt)!==0;){for(var Ut=It,Gt=0;Ut.cmp(pt)!==0;Gt++)Ut=Ut.redSqr();c(Gt<Nt);var Pt=this.pow(tt,new d(1).iushln(Nt-Gt-1));Tt=Tt.redMul(Pt),tt=Pt.redSqr(),It=It.redMul(tt),Nt=Gt}return Tt},_t.prototype.invm=function(s){var b=s._invmp(this.m);return b.negative!==0?(b.negative=0,this.imod(b).redNeg()):this.imod(b)},_t.prototype.pow=function(s,b){if(b.isZero())return new d(1).toRed(this);if(b.cmpn(1)===0)return s.clone();var $=4,_e=new Array(1<<$);_e[0]=new d(1).toRed(this),_e[1]=s;for(var it=2;it<_e.length;it++)_e[it]=this.mul(_e[it-1],s);var pt=_e[0],mt=0,lt=0,_=b.bitLength()%26;for(_===0&&(_=26),it=b.length-1;it>=0;it--){for(var tt=b.words[it],Tt=_-1;Tt>=0;Tt--){var It=tt>>Tt&1;if(pt!==_e[0]&&(pt=this.sqr(pt)),It===0&&mt===0){lt=0;continue}mt<<=1,mt|=It,lt++,!(lt!==$&&(it!==0||Tt!==0))&&(pt=this.mul(pt,_e[mt]),lt=0,mt=0)}_=26}return pt},_t.prototype.convertTo=function(s){var b=s.umod(this.m);return b===s?b.clone():b},_t.prototype.convertFrom=function(s){var b=s.clone();return b.red=null,b},d.mont=function(s){return new kt(s)};function kt(nt){_t.call(this,nt),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new d(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}j(kt,_t),kt.prototype.convertTo=function(s){return this.imod(s.ushln(this.shift))},kt.prototype.convertFrom=function(s){var b=this.imod(s.mul(this.rinv));return b.red=null,b},kt.prototype.imul=function(s,b){if(s.isZero()||b.isZero())return s.words[0]=0,s.length=1,s;var $=s.imul(b),_e=$.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),it=$.isub(_e).iushrn(this.shift),pt=it;return it.cmp(this.m)>=0?pt=it.isub(this.m):it.cmpn(0)<0&&(pt=it.iadd(this.m)),pt._forceRed(this)},kt.prototype.mul=function(s,b){if(s.isZero()||b.isZero())return new d(0)._forceRed(this);var $=s.mul(b),_e=$.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),it=$.isub(_e).iushrn(this.shift),pt=it;return it.cmp(this.m)>=0?pt=it.isub(this.m):it.cmpn(0)<0&&(pt=it.iadd(this.m)),pt._forceRed(this)},kt.prototype.invm=function(s){var b=this.imod(s._invmp(this.m).mul(this.r2));return b._forceRed(this)}})(o,commonjsGlobal)}(bn$5)),bn$5.exports}var brorand={exports:{}},hasRequiredBrorand;function requireBrorand(){if(hasRequiredBrorand)return brorand.exports;hasRequiredBrorand=1;var o;brorand.exports=function(j){return o||(o=new e(null)),o.generate(j)};function e(c){this.rand=c}if(brorand.exports.Rand=e,e.prototype.generate=function(j){return this._rand(j)},e.prototype._rand=function(j){if(this.rand.getBytes)return this.rand.getBytes(j);for(var d=new Uint8Array(j),et=0;et<d.length;et++)d[et]=this.rand.getByte();return d},typeof self=="object")self.crypto&&self.crypto.getRandomValues?e.prototype._rand=function(j){var d=new Uint8Array(j);return self.crypto.getRandomValues(d),d}:self.msCrypto&&self.msCrypto.getRandomValues?e.prototype._rand=function(j){var d=new Uint8Array(j);return self.msCrypto.getRandomValues(d),d}:typeof window=="object"&&(e.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var a=requireCryptoBrowserify();if(typeof a.randomBytes!="function")throw new Error("Not supported");e.prototype._rand=function(j){return a.randomBytes(j)}}catch{}return brorand.exports}var mr,hasRequiredMr;function requireMr(){if(hasRequiredMr)return mr;hasRequiredMr=1;var o=requireBn$5(),e=requireBrorand();function a(c){this.rand=c||new e.Rand}return mr=a,a.create=function(j){return new a(j)},a.prototype._randbelow=function(j){var d=j.bitLength(),et=Math.ceil(d/8);do var at=new o(this.rand.generate(et));while(at.cmp(j)>=0);return at},a.prototype._randrange=function(j,d){var et=d.sub(j);return j.add(this._randbelow(et))},a.prototype.test=function(j,d,et){var at=j.bitLength(),st=o.mont(j),ct=new o(1).toRed(st);d||(d=Math.max(1,at/48|0));for(var ot=j.subn(1),gt=0;!ot.testn(gt);gt++);for(var ft=j.shrn(gt),yt=ot.toRed(st),vt=!0;d>0;d--){var rt=this._randrange(new o(2),ot);et&&et(rt);var bt=rt.toRed(st).redPow(ft);if(!(bt.cmp(ct)===0||bt.cmp(yt)===0)){for(var ht=1;ht<gt;ht++){if(bt=bt.redSqr(),bt.cmp(ct)===0)return!1;if(bt.cmp(yt)===0)break}if(ht===gt)return!1}}return vt},a.prototype.getDivisor=function(j,d){var et=j.bitLength(),at=o.mont(j),st=new o(1).toRed(at);d||(d=Math.max(1,et/48|0));for(var ct=j.subn(1),ot=0;!ct.testn(ot);ot++);for(var gt=j.shrn(ot),ft=ct.toRed(at);d>0;d--){var yt=this._randrange(new o(2),ct),vt=j.gcd(yt);if(vt.cmpn(1)!==0)return vt;var rt=yt.toRed(at).redPow(gt);if(!(rt.cmp(st)===0||rt.cmp(ft)===0)){for(var bt=1;bt<ot;bt++){if(rt=rt.redSqr(),rt.cmp(st)===0)return rt.fromRed().subn(1).gcd(j);if(rt.cmp(ft)===0)break}if(bt===ot)return rt=rt.redSqr(),rt.fromRed().subn(1).gcd(j)}}return!1},mr}var generatePrime,hasRequiredGeneratePrime;function requireGeneratePrime(){if(hasRequiredGeneratePrime)return generatePrime;hasRequiredGeneratePrime=1;var o=requireBrowser$b();generatePrime=bt,bt.simpleSieve=vt,bt.fermatTest=rt;var e=requireBn$6(),a=new e(24),c=requireMr(),j=new c,d=new e(1),et=new e(2),at=new e(5);new e(16),new e(8);var st=new e(10),ct=new e(3);new e(7);var ot=new e(11),gt=new e(4);new e(12);var ft=null;function yt(){if(ft!==null)return ft;var ht=1048576,wt=[];wt[0]=2;for(var At=1,Ct=3;Ct<ht;Ct+=2){for(var dt=Math.ceil(Math.sqrt(Ct)),Et=0;Et<At&&wt[Et]<=dt&&Ct%wt[Et]!==0;Et++);At!==Et&&wt[Et]<=dt||(wt[At++]=Ct)}return ft=wt,wt}function vt(ht){for(var wt=yt(),At=0;At<wt.length;At++)if(ht.modn(wt[At])===0)return ht.cmpn(wt[At])===0;return!0}function rt(ht){var wt=e.mont(ht);return et.toRed(wt).redPow(ht.subn(1)).fromRed().cmpn(1)===0}function bt(ht,wt){if(ht<16)return wt===2||wt===5?new e([140,123]):new e([140,39]);wt=new e(wt);for(var At,Ct;;){for(At=new e(o(Math.ceil(ht/8)));At.bitLength()>ht;)At.ishrn(1);if(At.isEven()&&At.iadd(d),At.testn(1)||At.iadd(et),wt.cmp(et)){if(!wt.cmp(at))for(;At.mod(st).cmp(ct);)At.iadd(gt)}else for(;At.mod(a).cmp(ot);)At.iadd(gt);if(Ct=At.shrn(1),vt(Ct)&&vt(At)&&rt(Ct)&&rt(At)&&j.test(Ct)&&j.test(At))return At}}return generatePrime}const modp1={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"},require$$1$1={modp1,modp2,modp5,modp14,modp15,modp16,modp17,modp18};var dh,hasRequiredDh;function requireDh(){if(hasRequiredDh)return dh;hasRequiredDh=1;var o=requireBn$6(),e=requireMr(),a=new e,c=new o(24),j=new o(11),d=new o(10),et=new o(3),at=new o(7),st=requireGeneratePrime(),ct=requireBrowser$b();dh=vt;function ot(bt,ht){return ht=ht||"utf8",Buffer.isBuffer(bt)||(bt=new Buffer(bt,ht)),this._pub=new o(bt),this}function gt(bt,ht){return ht=ht||"utf8",Buffer.isBuffer(bt)||(bt=new Buffer(bt,ht)),this._priv=new o(bt),this}var ft={};function yt(bt,ht){var wt=ht.toString("hex"),At=[wt,bt.toString(16)].join("_");if(At in ft)return ft[At];var Ct=0;if(bt.isEven()||!st.simpleSieve||!st.fermatTest(bt)||!a.test(bt))return Ct+=1,wt==="02"||wt==="05"?Ct+=8:Ct+=4,ft[At]=Ct,Ct;a.test(bt.shrn(1))||(Ct+=2);var dt;switch(wt){case"02":bt.mod(c).cmp(j)&&(Ct+=8);break;case"05":dt=bt.mod(d),dt.cmp(et)&&dt.cmp(at)&&(Ct+=8);break;default:Ct+=4}return ft[At]=Ct,Ct}function vt(bt,ht,wt){this.setGenerator(ht),this.__prime=new o(bt),this._prime=o.mont(this.__prime),this._primeLen=bt.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,wt?(this.setPublicKey=ot,this.setPrivateKey=gt):this._primeCode=8}Object.defineProperty(vt.prototype,"verifyError",{enumerable:!0,get:function(){return typeof this._primeCode!="number"&&(this._primeCode=yt(this.__prime,this.__gen)),this._primeCode}}),vt.prototype.generateKeys=function(){return this._priv||(this._priv=new o(ct(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},vt.prototype.computeSecret=function(bt){bt=new o(bt),bt=bt.toRed(this._prime);var ht=bt.redPow(this._priv).fromRed(),wt=new Buffer(ht.toArray()),At=this.getPrime();if(wt.length<At.length){var Ct=new Buffer(At.length-wt.length);Ct.fill(0),wt=Buffer.concat([Ct,wt])}return wt},vt.prototype.getPublicKey=function(ht){return rt(this._pub,ht)},vt.prototype.getPrivateKey=function(ht){return rt(this._priv,ht)},vt.prototype.getPrime=function(bt){return rt(this.__prime,bt)},vt.prototype.getGenerator=function(bt){return rt(this._gen,bt)},vt.prototype.setGenerator=function(bt,ht){return ht=ht||"utf8",Buffer.isBuffer(bt)||(bt=new Buffer(bt,ht)),this.__gen=bt,this._gen=new o(bt),this};function rt(bt,ht){var wt=new Buffer(bt.toArray());return ht?wt.toString(ht):wt}return dh}var hasRequiredBrowser$4;function requireBrowser$4(){if(hasRequiredBrowser$4)return browser$6;hasRequiredBrowser$4=1;var o=requireGeneratePrime(),e=require$$1$1,a=requireDh();function c(et){var at=new Buffer(e[et].prime,"hex"),st=new Buffer(e[et].gen,"hex");return new a(at,st)}var j={binary:!0,hex:!0,base64:!0};function d(et,at,st,ct){return Buffer.isBuffer(at)||j[at]===void 0?d(et,"binary",at,st):(at=at||"binary",ct=ct||"binary",st=st||new Buffer([2]),Buffer.isBuffer(st)||(st=new Buffer(st,ct)),typeof et=="number"?new a(o(et,st),st,!0):(Buffer.isBuffer(et)||(et=new Buffer(et,at)),new a(et,st,!0)))}return browser$6.DiffieHellmanGroup=browser$6.createDiffieHellmanGroup=browser$6.getDiffieHellman=c,browser$6.createDiffieHellman=browser$6.DiffieHellman=d,browser$6}var readableBrowser={exports:{}},processNextickArgs={exports:{}},hasRequiredProcessNextickArgs;function requireProcessNextickArgs(){if(hasRequiredProcessNextickArgs)return processNextickArgs.exports;hasRequiredProcessNextickArgs=1,typeof process$1>"u"||!process$1.version||process$1.version.indexOf("v0.")===0||process$1.version.indexOf("v1.")===0&&process$1.version.indexOf("v1.8.")!==0?processNextickArgs.exports={nextTick:o}:processNextickArgs.exports=process$1;function o(e,a,c,j){if(typeof e!="function")throw new TypeError('"callback" argument must be a function');var d=arguments.length,et,at;switch(d){case 0:case 1:return process$1.nextTick(e);case 2:return process$1.nextTick(function(){e.call(null,a)});case 3:return process$1.nextTick(function(){e.call(null,a,c)});case 4:return process$1.nextTick(function(){e.call(null,a,c,j)});default:for(et=new Array(d-1),at=0;at<et.length;)et[at++]=arguments[at];return process$1.nextTick(function(){e.apply(null,et)})}}return processNextickArgs.exports}var isarray,hasRequiredIsarray;function requireIsarray(){if(hasRequiredIsarray)return isarray;hasRequiredIsarray=1;var o={}.toString;return isarray=Array.isArray||function(e){return o.call(e)=="[object Array]"},isarray}var streamBrowser,hasRequiredStreamBrowser;function requireStreamBrowser(){return hasRequiredStreamBrowser||(hasRequiredStreamBrowser=1,streamBrowser=eventsExports.EventEmitter),streamBrowser}var safeBuffer={exports:{}},hasRequiredSafeBuffer;function requireSafeBuffer(){return hasRequiredSafeBuffer||(hasRequiredSafeBuffer=1,function(o,e){var a=require$$1$2,c=a.Buffer;function j(et,at){for(var st in et)at[st]=et[st]}c.from&&c.alloc&&c.allocUnsafe&&c.allocUnsafeSlow?o.exports=a:(j(a,e),e.Buffer=d);function d(et,at,st){return c(et,at,st)}j(c,d),d.from=function(et,at,st){if(typeof et=="number")throw new TypeError("Argument must not be a number");return c(et,at,st)},d.alloc=function(et,at,st){if(typeof et!="number")throw new TypeError("Argument must be a number");var ct=c(et);return at!==void 0?typeof st=="string"?ct.fill(at,st):ct.fill(at):ct.fill(0),ct},d.allocUnsafe=function(et){if(typeof et!="number")throw new TypeError("Argument must be a number");return c(et)},d.allocUnsafeSlow=function(et){if(typeof et!="number")throw new TypeError("Argument must be a number");return a.SlowBuffer(et)}}(safeBuffer,safeBuffer.exports)),safeBuffer.exports}var util$7={},hasRequiredUtil;function requireUtil(){if(hasRequiredUtil)return util$7;hasRequiredUtil=1;function o(rt){return Array.isArray?Array.isArray(rt):vt(rt)==="[object Array]"}util$7.isArray=o;function e(rt){return typeof rt=="boolean"}util$7.isBoolean=e;function a(rt){return rt===null}util$7.isNull=a;function c(rt){return rt==null}util$7.isNullOrUndefined=c;function j(rt){return typeof rt=="number"}util$7.isNumber=j;function d(rt){return typeof rt=="string"}util$7.isString=d;function et(rt){return typeof rt=="symbol"}util$7.isSymbol=et;function at(rt){return rt===void 0}util$7.isUndefined=at;function st(rt){return vt(rt)==="[object RegExp]"}util$7.isRegExp=st;function ct(rt){return typeof rt=="object"&&rt!==null}util$7.isObject=ct;function ot(rt){return vt(rt)==="[object Date]"}util$7.isDate=ot;function gt(rt){return vt(rt)==="[object Error]"||rt instanceof Error}util$7.isError=gt;function ft(rt){return typeof rt=="function"}util$7.isFunction=ft;function yt(rt){return rt===null||typeof rt=="boolean"||typeof rt=="number"||typeof rt=="string"||typeof rt=="symbol"||typeof rt>"u"}util$7.isPrimitive=yt,util$7.isBuffer=require$$1$2.Buffer.isBuffer;function vt(rt){return Object.prototype.toString.call(rt)}return util$7}var BufferList={exports:{}},hasRequiredBufferList;function requireBufferList(){return hasRequiredBufferList||(hasRequiredBufferList=1,function(o){function e(d,et){if(!(d instanceof et))throw new TypeError("Cannot call a class as a function")}var a=requireSafeBuffer().Buffer,c=util$8;function j(d,et,at){d.copy(et,at)}o.exports=function(){function d(){e(this,d),this.head=null,this.tail=null,this.length=0}return d.prototype.push=function(at){var st={data:at,next:null};this.length>0?this.tail.next=st:this.head=st,this.tail=st,++this.length},d.prototype.unshift=function(at){var st={data:at,next:this.head};this.length===0&&(this.tail=st),this.head=st,++this.length},d.prototype.shift=function(){if(this.length!==0){var at=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,at}},d.prototype.clear=function(){this.head=this.tail=null,this.length=0},d.prototype.join=function(at){if(this.length===0)return"";for(var st=this.head,ct=""+st.data;st=st.next;)ct+=at+st.data;return ct},d.prototype.concat=function(at){if(this.length===0)return a.alloc(0);for(var st=a.allocUnsafe(at>>>0),ct=this.head,ot=0;ct;)j(ct.data,st,ot),ot+=ct.data.length,ct=ct.next;return st},d}(),c&&c.inspect&&c.inspect.custom&&(o.exports.prototype[c.inspect.custom]=function(){var d=c.inspect({length:this.length});return this.constructor.name+" "+d})}(BufferList)),BufferList.exports}var destroy_1,hasRequiredDestroy;function requireDestroy(){if(hasRequiredDestroy)return destroy_1;hasRequiredDestroy=1;var o=requireProcessNextickArgs();function e(j,d){var et=this,at=this._readableState&&this._readableState.destroyed,st=this._writableState&&this._writableState.destroyed;return at||st?(d?d(j):j&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,o.nextTick(c,this,j)):o.nextTick(c,this,j)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(j||null,function(ct){!d&&ct?et._writableState?et._writableState.errorEmitted||(et._writableState.errorEmitted=!0,o.nextTick(c,et,ct)):o.nextTick(c,et,ct):d&&d(ct)}),this)}function a(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function c(j,d){j.emit("error",d)}return destroy_1={destroy:e,undestroy:a},destroy_1}var _stream_writable,hasRequired_stream_writable;function require_stream_writable(){if(hasRequired_stream_writable)return _stream_writable;hasRequired_stream_writable=1;var o=requireProcessNextickArgs();_stream_writable=rt;function e(pt){var mt=this;this.next=null,this.entry=null,this.finish=function(){it(mt,pt)}}var a=!process$1.browser&&["v0.10","v0.9."].indexOf(process$1.version.slice(0,5))>-1?setImmediate:o.nextTick,c;rt.WritableState=yt;var j=Object.create(requireUtil());j.inherits=requireInherits_browser();var d={deprecate:requireBrowser$a()},et=requireStreamBrowser(),at=requireSafeBuffer().Buffer,st=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function ct(pt){return at.from(pt)}function ot(pt){return at.isBuffer(pt)||pt instanceof st}var gt=requireDestroy();j.inherits(rt,et);function ft(){}function yt(pt,mt){c=c||require_stream_duplex(),pt=pt||{};var lt=mt instanceof c;this.objectMode=!!pt.objectMode,lt&&(this.objectMode=this.objectMode||!!pt.writableObjectMode);var _=pt.highWaterMark,tt=pt.writableHighWaterMark,Tt=this.objectMode?16:16*1024;_||_===0?this.highWaterMark=_:lt&&(tt||tt===0)?this.highWaterMark=tt:this.highWaterMark=Tt,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var It=pt.decodeStrings===!1;this.decodeStrings=!It,this.defaultEncoding=pt.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Nt){Rt(mt,Nt)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}yt.prototype.getBuffer=function(){for(var mt=this.bufferedRequest,lt=[];mt;)lt.push(mt),mt=mt.next;return lt},function(){try{Object.defineProperty(yt.prototype,"buffer",{get:d.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var vt;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(vt=Function.prototype[Symbol.hasInstance],Object.defineProperty(rt,Symbol.hasInstance,{value:function(pt){return vt.call(this,pt)?!0:this!==rt?!1:pt&&pt._writableState instanceof yt}})):vt=function(pt){return pt instanceof this};function rt(pt){if(c=c||require_stream_duplex(),!vt.call(rt,this)&&!(this instanceof c))return new rt(pt);this._writableState=new yt(pt,this),this.writable=!0,pt&&(typeof pt.write=="function"&&(this._write=pt.write),typeof pt.writev=="function"&&(this._writev=pt.writev),typeof pt.destroy=="function"&&(this._destroy=pt.destroy),typeof pt.final=="function"&&(this._final=pt.final)),et.call(this)}rt.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function bt(pt,mt){var lt=new Error("write after end");pt.emit("error",lt),o.nextTick(mt,lt)}function ht(pt,mt,lt,_){var tt=!0,Tt=!1;return lt===null?Tt=new TypeError("May not write null values to stream"):typeof lt!="string"&&lt!==void 0&&!mt.objectMode&&(Tt=new TypeError("Invalid non-string/buffer chunk")),Tt&&(pt.emit("error",Tt),o.nextTick(_,Tt),tt=!1),tt}rt.prototype.write=function(pt,mt,lt){var _=this._writableState,tt=!1,Tt=!_.objectMode&&ot(pt);return Tt&&!at.isBuffer(pt)&&(pt=ct(pt)),typeof mt=="function"&&(lt=mt,mt=null),Tt?mt="buffer":mt||(mt=_.defaultEncoding),typeof lt!="function"&&(lt=ft),_.ended?bt(this,lt):(Tt||ht(this,_,pt,lt))&&(_.pendingcb++,tt=At(this,_,Tt,pt,mt,lt)),tt},rt.prototype.cork=function(){var pt=this._writableState;pt.corked++},rt.prototype.uncork=function(){var pt=this._writableState;pt.corked&&(pt.corked--,!pt.writing&&!pt.corked&&!pt.bufferProcessing&&pt.bufferedRequest&&kt(this,pt))},rt.prototype.setDefaultEncoding=function(mt){if(typeof mt=="string"&&(mt=mt.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((mt+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+mt);return this._writableState.defaultEncoding=mt,this};function wt(pt,mt,lt){return!pt.objectMode&&pt.decodeStrings!==!1&&typeof mt=="string"&&(mt=at.from(mt,lt)),mt}Object.defineProperty(rt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function At(pt,mt,lt,_,tt,Tt){if(!lt){var It=wt(mt,_,tt);_!==It&&(lt=!0,tt="buffer",_=It)}var Nt=mt.objectMode?1:_.length;mt.length+=Nt;var Ut=mt.length<mt.highWaterMark;if(Ut||(mt.needDrain=!0),mt.writing||mt.corked){var Gt=mt.lastBufferedRequest;mt.lastBufferedRequest={chunk:_,encoding:tt,isBuf:lt,callback:Tt,next:null},Gt?Gt.next=mt.lastBufferedRequest:mt.bufferedRequest=mt.lastBufferedRequest,mt.bufferedRequestCount+=1}else Ct(pt,mt,!1,Nt,_,tt,Tt);return Ut}function Ct(pt,mt,lt,_,tt,Tt,It){mt.writelen=_,mt.writecb=It,mt.writing=!0,mt.sync=!0,lt?pt._writev(tt,mt.onwrite):pt._write(tt,Tt,mt.onwrite),mt.sync=!1}function dt(pt,mt,lt,_,tt){--mt.pendingcb,lt?(o.nextTick(tt,_),o.nextTick($,pt,mt),pt._writableState.errorEmitted=!0,pt.emit("error",_)):(tt(_),pt._writableState.errorEmitted=!0,pt.emit("error",_),$(pt,mt))}function Et(pt){pt.writing=!1,pt.writecb=null,pt.length-=pt.writelen,pt.writelen=0}function Rt(pt,mt){var lt=pt._writableState,_=lt.sync,tt=lt.writecb;if(Et(lt),mt)dt(pt,lt,_,mt,tt);else{var Tt=nt(lt);!Tt&&!lt.corked&&!lt.bufferProcessing&&lt.bufferedRequest&&kt(pt,lt),_?a(Mt,pt,lt,Tt,tt):Mt(pt,lt,Tt,tt)}}function Mt(pt,mt,lt,_){lt||_t(pt,mt),mt.pendingcb--,_(),$(pt,mt)}function _t(pt,mt){mt.length===0&&mt.needDrain&&(mt.needDrain=!1,pt.emit("drain"))}function kt(pt,mt){mt.bufferProcessing=!0;var lt=mt.bufferedRequest;if(pt._writev&&lt&&lt.next){var _=mt.bufferedRequestCount,tt=new Array(_),Tt=mt.corkedRequestsFree;Tt.entry=lt;for(var It=0,Nt=!0;lt;)tt[It]=lt,lt.isBuf||(Nt=!1),lt=lt.next,It+=1;tt.allBuffers=Nt,Ct(pt,mt,!0,mt.length,tt,"",Tt.finish),mt.pendingcb++,mt.lastBufferedRequest=null,Tt.next?(mt.corkedRequestsFree=Tt.next,Tt.next=null):mt.corkedRequestsFree=new e(mt),mt.bufferedRequestCount=0}else{for(;lt;){var Ut=lt.chunk,Gt=lt.encoding,Pt=lt.callback,qt=mt.objectMode?1:Ut.length;if(Ct(pt,mt,!1,qt,Ut,Gt,Pt),lt=lt.next,mt.bufferedRequestCount--,mt.writing)break}lt===null&&(mt.lastBufferedRequest=null)}mt.bufferedRequest=lt,mt.bufferProcessing=!1}rt.prototype._write=function(pt,mt,lt){lt(new Error("_write() is not implemented"))},rt.prototype._writev=null,rt.prototype.end=function(pt,mt,lt){var _=this._writableState;typeof pt=="function"?(lt=pt,pt=null,mt=null):typeof mt=="function"&&(lt=mt,mt=null),pt!=null&&this.write(pt,mt),_.corked&&(_.corked=1,this.uncork()),_.ending||_e(this,_,lt)};function nt(pt){return pt.ending&&pt.length===0&&pt.bufferedRequest===null&&!pt.finished&&!pt.writing}function s(pt,mt){pt._final(function(lt){mt.pendingcb--,lt&&pt.emit("error",lt),mt.prefinished=!0,pt.emit("prefinish"),$(pt,mt)})}function b(pt,mt){!mt.prefinished&&!mt.finalCalled&&(typeof pt._final=="function"?(mt.pendingcb++,mt.finalCalled=!0,o.nextTick(s,pt,mt)):(mt.prefinished=!0,pt.emit("prefinish")))}function $(pt,mt){var lt=nt(mt);return lt&&(b(pt,mt),mt.pendingcb===0&&(mt.finished=!0,pt.emit("finish"))),lt}function _e(pt,mt,lt){mt.ending=!0,$(pt,mt),lt&&(mt.finished?o.nextTick(lt):pt.once("finish",lt)),mt.ended=!0,pt.writable=!1}function it(pt,mt,lt){var _=pt.entry;for(pt.entry=null;_;){var tt=_.callback;mt.pendingcb--,tt(lt),_=_.next}mt.corkedRequestsFree.next=pt}return Object.defineProperty(rt.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(pt){this._writableState&&(this._writableState.destroyed=pt)}}),rt.prototype.destroy=gt.destroy,rt.prototype._undestroy=gt.undestroy,rt.prototype._destroy=function(pt,mt){this.end(),mt(pt)},_stream_writable}var _stream_duplex,hasRequired_stream_duplex;function require_stream_duplex(){if(hasRequired_stream_duplex)return _stream_duplex;hasRequired_stream_duplex=1;var o=requireProcessNextickArgs(),e=Object.keys||function(gt){var ft=[];for(var yt in gt)ft.push(yt);return ft};_stream_duplex=st;var a=Object.create(requireUtil());a.inherits=requireInherits_browser();var c=require_stream_readable(),j=require_stream_writable();a.inherits(st,c);for(var d=e(j.prototype),et=0;et<d.length;et++){var at=d[et];st.prototype[at]||(st.prototype[at]=j.prototype[at])}function st(gt){if(!(this instanceof st))return new st(gt);c.call(this,gt),j.call(this,gt),gt&&gt.readable===!1&&(this.readable=!1),gt&&gt.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,gt&&gt.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",ct)}Object.defineProperty(st.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function ct(){this.allowHalfOpen||this._writableState.ended||o.nextTick(ot,this)}function ot(gt){gt.end()}return Object.defineProperty(st.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(gt){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=gt,this._writableState.destroyed=gt)}}),st.prototype._destroy=function(gt,ft){this.push(null),this.end(),o.nextTick(ft,gt)},_stream_duplex}var _stream_readable,hasRequired_stream_readable;function require_stream_readable(){if(hasRequired_stream_readable)return _stream_readable;hasRequired_stream_readable=1;var o=requireProcessNextickArgs();_stream_readable=wt;var e=requireIsarray(),a;wt.ReadableState=ht,eventsExports.EventEmitter;var c=function(Pt,qt){return Pt.listeners(qt).length},j=requireStreamBrowser(),d=requireSafeBuffer().Buffer,et=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function at(Pt){return d.from(Pt)}function st(Pt){return d.isBuffer(Pt)||Pt instanceof et}var ct=Object.create(requireUtil());ct.inherits=requireInherits_browser();var ot=util$8,gt=void 0;ot&&ot.debuglog?gt=ot.debuglog("stream"):gt=function(){};var ft=requireBufferList(),yt=requireDestroy(),vt;ct.inherits(wt,j);var rt=["error","close","destroy","pause","resume"];function bt(Pt,qt,Kt){if(typeof Pt.prependListener=="function")return Pt.prependListener(qt,Kt);!Pt._events||!Pt._events[qt]?Pt.on(qt,Kt):e(Pt._events[qt])?Pt._events[qt].unshift(Kt):Pt._events[qt]=[Kt,Pt._events[qt]]}function ht(Pt,qt){a=a||require_stream_duplex(),Pt=Pt||{};var Kt=qt instanceof a;this.objectMode=!!Pt.objectMode,Kt&&(this.objectMode=this.objectMode||!!Pt.readableObjectMode);var jt=Pt.highWaterMark,Ht=Pt.readableHighWaterMark,Bt=this.objectMode?16:16*1024;jt||jt===0?this.highWaterMark=jt:Kt&&(Ht||Ht===0)?this.highWaterMark=Ht:this.highWaterMark=Bt,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new ft,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=Pt.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Pt.encoding&&(vt||(vt=requireString_decoder().StringDecoder),this.decoder=new vt(Pt.encoding),this.encoding=Pt.encoding)}function wt(Pt){if(a=a||require_stream_duplex(),!(this instanceof wt))return new wt(Pt);this._readableState=new ht(Pt,this),this.readable=!0,Pt&&(typeof Pt.read=="function"&&(this._read=Pt.read),typeof Pt.destroy=="function"&&(this._destroy=Pt.destroy)),j.call(this)}Object.defineProperty(wt.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(Pt){this._readableState&&(this._readableState.destroyed=Pt)}}),wt.prototype.destroy=yt.destroy,wt.prototype._undestroy=yt.undestroy,wt.prototype._destroy=function(Pt,qt){this.push(null),qt(Pt)},wt.prototype.push=function(Pt,qt){var Kt=this._readableState,jt;return Kt.objectMode?jt=!0:typeof Pt=="string"&&(qt=qt||Kt.defaultEncoding,qt!==Kt.encoding&&(Pt=d.from(Pt,qt),qt=""),jt=!0),At(this,Pt,qt,!1,jt)},wt.prototype.unshift=function(Pt){return At(this,Pt,null,!0,!1)};function At(Pt,qt,Kt,jt,Ht){var Bt=Pt._readableState;if(qt===null)Bt.reading=!1,kt(Pt,Bt);else{var Jt;Ht||(Jt=dt(Bt,qt)),Jt?Pt.emit("error",Jt):Bt.objectMode||qt&&qt.length>0?(typeof qt!="string"&&!Bt.objectMode&&Object.getPrototypeOf(qt)!==d.prototype&&(qt=at(qt)),jt?Bt.endEmitted?Pt.emit("error",new Error("stream.unshift() after end event")):Ct(Pt,Bt,qt,!0):Bt.ended?Pt.emit("error",new Error("stream.push() after EOF")):(Bt.reading=!1,Bt.decoder&&!Kt?(qt=Bt.decoder.write(qt),Bt.objectMode||qt.length!==0?Ct(Pt,Bt,qt,!1):b(Pt,Bt)):Ct(Pt,Bt,qt,!1))):jt||(Bt.reading=!1)}return Et(Bt)}function Ct(Pt,qt,Kt,jt){qt.flowing&&qt.length===0&&!qt.sync?(Pt.emit("data",Kt),Pt.read(0)):(qt.length+=qt.objectMode?1:Kt.length,jt?qt.buffer.unshift(Kt):qt.buffer.push(Kt),qt.needReadable&&nt(Pt)),b(Pt,qt)}function dt(Pt,qt){var Kt;return!st(qt)&&typeof qt!="string"&&qt!==void 0&&!Pt.objectMode&&(Kt=new TypeError("Invalid non-string/buffer chunk")),Kt}function Et(Pt){return!Pt.ended&&(Pt.needReadable||Pt.length<Pt.highWaterMark||Pt.length===0)}wt.prototype.isPaused=function(){return this._readableState.flowing===!1},wt.prototype.setEncoding=function(Pt){return vt||(vt=requireString_decoder().StringDecoder),this._readableState.decoder=new vt(Pt),this._readableState.encoding=Pt,this};var Rt=8388608;function Mt(Pt){return Pt>=Rt?Pt=Rt:(Pt--,Pt|=Pt>>>1,Pt|=Pt>>>2,Pt|=Pt>>>4,Pt|=Pt>>>8,Pt|=Pt>>>16,Pt++),Pt}function _t(Pt,qt){return Pt<=0||qt.length===0&&qt.ended?0:qt.objectMode?1:Pt!==Pt?qt.flowing&&qt.length?qt.buffer.head.data.length:qt.length:(Pt>qt.highWaterMark&&(qt.highWaterMark=Mt(Pt)),Pt<=qt.length?Pt:qt.ended?qt.length:(qt.needReadable=!0,0))}wt.prototype.read=function(Pt){gt("read",Pt),Pt=parseInt(Pt,10);var qt=this._readableState,Kt=Pt;if(Pt!==0&&(qt.emittedReadable=!1),Pt===0&&qt.needReadable&&(qt.length>=qt.highWaterMark||qt.ended))return gt("read: emitReadable",qt.length,qt.ended),qt.length===0&&qt.ended?Nt(this):nt(this),null;if(Pt=_t(Pt,qt),Pt===0&&qt.ended)return qt.length===0&&Nt(this),null;var jt=qt.needReadable;gt("need readable",jt),(qt.length===0||qt.length-Pt<qt.highWaterMark)&&(jt=!0,gt("length less than watermark",jt)),qt.ended||qt.reading?(jt=!1,gt("reading or ended",jt)):jt&&(gt("do read"),qt.reading=!0,qt.sync=!0,qt.length===0&&(qt.needReadable=!0),this._read(qt.highWaterMark),qt.sync=!1,qt.reading||(Pt=_t(Kt,qt)));var Ht;return Pt>0?Ht=_(Pt,qt):Ht=null,Ht===null?(qt.needReadable=!0,Pt=0):qt.length-=Pt,qt.length===0&&(qt.ended||(qt.needReadable=!0),Kt!==Pt&&qt.ended&&Nt(this)),Ht!==null&&this.emit("data",Ht),Ht};function kt(Pt,qt){if(!qt.ended){if(qt.decoder){var Kt=qt.decoder.end();Kt&&Kt.length&&(qt.buffer.push(Kt),qt.length+=qt.objectMode?1:Kt.length)}qt.ended=!0,nt(Pt)}}function nt(Pt){var qt=Pt._readableState;qt.needReadable=!1,qt.emittedReadable||(gt("emitReadable",qt.flowing),qt.emittedReadable=!0,qt.sync?o.nextTick(s,Pt):s(Pt))}function s(Pt){gt("emit readable"),Pt.emit("readable"),lt(Pt)}function b(Pt,qt){qt.readingMore||(qt.readingMore=!0,o.nextTick($,Pt,qt))}function $(Pt,qt){for(var Kt=qt.length;!qt.reading&&!qt.flowing&&!qt.ended&&qt.length<qt.highWaterMark&&(gt("maybeReadMore read 0"),Pt.read(0),Kt!==qt.length);)Kt=qt.length;qt.readingMore=!1}wt.prototype._read=function(Pt){this.emit("error",new Error("_read() is not implemented"))},wt.prototype.pipe=function(Pt,qt){var Kt=this,jt=this._readableState;switch(jt.pipesCount){case 0:jt.pipes=Pt;break;case 1:jt.pipes=[jt.pipes,Pt];break;default:jt.pipes.push(Pt);break}jt.pipesCount+=1,gt("pipe count=%d opts=%j",jt.pipesCount,qt);var Ht=(!qt||qt.end!==!1)&&Pt!==process$1.stdout&&Pt!==process$1.stderr,Bt=Ht?sr:Dn;jt.endEmitted?o.nextTick(Bt):Kt.once("end",Bt),Pt.on("unpipe",Jt);function Jt(Br,Gr){gt("onunpipe"),Br===Kt&&Gr&&Gr.hasUnpiped===!1&&(Gr.hasUnpiped=!0,gn())}function sr(){gt("onend"),Pt.end()}var hr=_e(Kt);Pt.on("drain",hr);var Ar=!1;function gn(){gt("cleanup"),Pt.removeListener("close",Dr),Pt.removeListener("finish",Qr),Pt.removeListener("drain",hr),Pt.removeListener("error",En),Pt.removeListener("unpipe",Jt),Kt.removeListener("end",sr),Kt.removeListener("end",Dn),Kt.removeListener("data",wr),Ar=!0,jt.awaitDrain&&(!Pt._writableState||Pt._writableState.needDrain)&&hr()}var Lr=!1;Kt.on("data",wr);function wr(Br){gt("ondata"),Lr=!1;var Gr=Pt.write(Br);Gr===!1&&!Lr&&((jt.pipesCount===1&&jt.pipes===Pt||jt.pipesCount>1&&Gt(jt.pipes,Pt)!==-1)&&!Ar&&(gt("false write response, pause",jt.awaitDrain),jt.awaitDrain++,Lr=!0),Kt.pause())}function En(Br){gt("onerror",Br),Dn(),Pt.removeListener("error",En),c(Pt,"error")===0&&Pt.emit("error",Br)}bt(Pt,"error",En);function Dr(){Pt.removeListener("finish",Qr),Dn()}Pt.once("close",Dr);function Qr(){gt("onfinish"),Pt.removeListener("close",Dr),Dn()}Pt.once("finish",Qr);function Dn(){gt("unpipe"),Kt.unpipe(Pt)}return Pt.emit("pipe",Kt),jt.flowing||(gt("pipe resume"),Kt.resume()),Pt};function _e(Pt){return function(){var qt=Pt._readableState;gt("pipeOnDrain",qt.awaitDrain),qt.awaitDrain&&qt.awaitDrain--,qt.awaitDrain===0&&c(Pt,"data")&&(qt.flowing=!0,lt(Pt))}}wt.prototype.unpipe=function(Pt){var qt=this._readableState,Kt={hasUnpiped:!1};if(qt.pipesCount===0)return this;if(qt.pipesCount===1)return Pt&&Pt!==qt.pipes?this:(Pt||(Pt=qt.pipes),qt.pipes=null,qt.pipesCount=0,qt.flowing=!1,Pt&&Pt.emit("unpipe",this,Kt),this);if(!Pt){var jt=qt.pipes,Ht=qt.pipesCount;qt.pipes=null,qt.pipesCount=0,qt.flowing=!1;for(var Bt=0;Bt<Ht;Bt++)jt[Bt].emit("unpipe",this,{hasUnpiped:!1});return this}var Jt=Gt(qt.pipes,Pt);return Jt===-1?this:(qt.pipes.splice(Jt,1),qt.pipesCount-=1,qt.pipesCount===1&&(qt.pipes=qt.pipes[0]),Pt.emit("unpipe",this,Kt),this)},wt.prototype.on=function(Pt,qt){var Kt=j.prototype.on.call(this,Pt,qt);if(Pt==="data")this._readableState.flowing!==!1&&this.resume();else if(Pt==="readable"){var jt=this._readableState;!jt.endEmitted&&!jt.readableListening&&(jt.readableListening=jt.needReadable=!0,jt.emittedReadable=!1,jt.reading?jt.length&&nt(this):o.nextTick(it,this))}return Kt},wt.prototype.addListener=wt.prototype.on;function it(Pt){gt("readable nexttick read 0"),Pt.read(0)}wt.prototype.resume=function(){var Pt=this._readableState;return Pt.flowing||(gt("resume"),Pt.flowing=!0,pt(this,Pt)),this};function pt(Pt,qt){qt.resumeScheduled||(qt.resumeScheduled=!0,o.nextTick(mt,Pt,qt))}function mt(Pt,qt){qt.reading||(gt("resume read 0"),Pt.read(0)),qt.resumeScheduled=!1,qt.awaitDrain=0,Pt.emit("resume"),lt(Pt),qt.flowing&&!qt.reading&&Pt.read(0)}wt.prototype.pause=function(){return gt("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(gt("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function lt(Pt){var qt=Pt._readableState;for(gt("flow",qt.flowing);qt.flowing&&Pt.read()!==null;);}wt.prototype.wrap=function(Pt){var qt=this,Kt=this._readableState,jt=!1;Pt.on("end",function(){if(gt("wrapped end"),Kt.decoder&&!Kt.ended){var Jt=Kt.decoder.end();Jt&&Jt.length&&qt.push(Jt)}qt.push(null)}),Pt.on("data",function(Jt){if(gt("wrapped data"),Kt.decoder&&(Jt=Kt.decoder.write(Jt)),!(Kt.objectMode&&Jt==null)&&!(!Kt.objectMode&&(!Jt||!Jt.length))){var sr=qt.push(Jt);sr||(jt=!0,Pt.pause())}});for(var Ht in Pt)this[Ht]===void 0&&typeof Pt[Ht]=="function"&&(this[Ht]=function(Jt){return function(){return Pt[Jt].apply(Pt,arguments)}}(Ht));for(var Bt=0;Bt<rt.length;Bt++)Pt.on(rt[Bt],this.emit.bind(this,rt[Bt]));return this._read=function(Jt){gt("wrapped _read",Jt),jt&&(jt=!1,Pt.resume())},this},Object.defineProperty(wt.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),wt._fromList=_;function _(Pt,qt){if(qt.length===0)return null;var Kt;return qt.objectMode?Kt=qt.buffer.shift():!Pt||Pt>=qt.length?(qt.decoder?Kt=qt.buffer.join(""):qt.buffer.length===1?Kt=qt.buffer.head.data:Kt=qt.buffer.concat(qt.length),qt.buffer.clear()):Kt=tt(Pt,qt.buffer,qt.decoder),Kt}function tt(Pt,qt,Kt){var jt;return Pt<qt.head.data.length?(jt=qt.head.data.slice(0,Pt),qt.head.data=qt.head.data.slice(Pt)):Pt===qt.head.data.length?jt=qt.shift():jt=Kt?Tt(Pt,qt):It(Pt,qt),jt}function Tt(Pt,qt){var Kt=qt.head,jt=1,Ht=Kt.data;for(Pt-=Ht.length;Kt=Kt.next;){var Bt=Kt.data,Jt=Pt>Bt.length?Bt.length:Pt;if(Jt===Bt.length?Ht+=Bt:Ht+=Bt.slice(0,Pt),Pt-=Jt,Pt===0){Jt===Bt.length?(++jt,Kt.next?qt.head=Kt.next:qt.head=qt.tail=null):(qt.head=Kt,Kt.data=Bt.slice(Jt));break}++jt}return qt.length-=jt,Ht}function It(Pt,qt){var Kt=d.allocUnsafe(Pt),jt=qt.head,Ht=1;for(jt.data.copy(Kt),Pt-=jt.data.length;jt=jt.next;){var Bt=jt.data,Jt=Pt>Bt.length?Bt.length:Pt;if(Bt.copy(Kt,Kt.length-Pt,0,Jt),Pt-=Jt,Pt===0){Jt===Bt.length?(++Ht,jt.next?qt.head=jt.next:qt.head=qt.tail=null):(qt.head=jt,jt.data=Bt.slice(Jt));break}++Ht}return qt.length-=Ht,Kt}function Nt(Pt){var qt=Pt._readableState;if(qt.length>0)throw new Error('"endReadable()" called on non-empty stream');qt.endEmitted||(qt.ended=!0,o.nextTick(Ut,qt,Pt))}function Ut(Pt,qt){!Pt.endEmitted&&Pt.length===0&&(Pt.endEmitted=!0,qt.readable=!1,qt.emit("end"))}function Gt(Pt,qt){for(var Kt=0,jt=Pt.length;Kt<jt;Kt++)if(Pt[Kt]===qt)return Kt;return-1}return _stream_readable}var _stream_transform,hasRequired_stream_transform;function require_stream_transform(){if(hasRequired_stream_transform)return _stream_transform;hasRequired_stream_transform=1,_stream_transform=c;var o=require_stream_duplex(),e=Object.create(requireUtil());e.inherits=requireInherits_browser(),e.inherits(c,o);function a(et,at){var st=this._transformState;st.transforming=!1;var ct=st.writecb;if(!ct)return this.emit("error",new Error("write callback called multiple times"));st.writechunk=null,st.writecb=null,at!=null&&this.push(at),ct(et);var ot=this._readableState;ot.reading=!1,(ot.needReadable||ot.length<ot.highWaterMark)&&this._read(ot.highWaterMark)}function c(et){if(!(this instanceof c))return new c(et);o.call(this,et),this._transformState={afterTransform:a.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,et&&(typeof et.transform=="function"&&(this._transform=et.transform),typeof et.flush=="function"&&(this._flush=et.flush)),this.on("prefinish",j)}function j(){var et=this;typeof this._flush=="function"?this._flush(function(at,st){d(et,at,st)}):d(this,null,null)}c.prototype.push=function(et,at){return this._transformState.needTransform=!1,o.prototype.push.call(this,et,at)},c.prototype._transform=function(et,at,st){throw new Error("_transform() is not implemented")},c.prototype._write=function(et,at,st){var ct=this._transformState;if(ct.writecb=st,ct.writechunk=et,ct.writeencoding=at,!ct.transforming){var ot=this._readableState;(ct.needTransform||ot.needReadable||ot.length<ot.highWaterMark)&&this._read(ot.highWaterMark)}},c.prototype._read=function(et){var at=this._transformState;at.writechunk!==null&&at.writecb&&!at.transforming?(at.transforming=!0,this._transform(at.writechunk,at.writeencoding,at.afterTransform)):at.needTransform=!0},c.prototype._destroy=function(et,at){var st=this;o.prototype._destroy.call(this,et,function(ct){at(ct),st.emit("close")})};function d(et,at,st){if(at)return et.emit("error",at);if(st!=null&&et.push(st),et._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(et._transformState.transforming)throw new Error("Calling transform done when still transforming");return et.push(null)}return _stream_transform}var _stream_passthrough,hasRequired_stream_passthrough;function require_stream_passthrough(){if(hasRequired_stream_passthrough)return _stream_passthrough;hasRequired_stream_passthrough=1,_stream_passthrough=a;var o=require_stream_transform(),e=Object.create(requireUtil());e.inherits=requireInherits_browser(),e.inherits(a,o);function a(c){if(!(this instanceof a))return new a(c);o.call(this,c)}return a.prototype._transform=function(c,j,d){d(null,c)},_stream_passthrough}var hasRequiredReadableBrowser;function requireReadableBrowser(){return hasRequiredReadableBrowser||(hasRequiredReadableBrowser=1,function(o,e){e=o.exports=require_stream_readable(),e.Stream=e,e.Readable=e,e.Writable=require_stream_writable(),e.Duplex=require_stream_duplex(),e.Transform=require_stream_transform(),e.PassThrough=require_stream_passthrough()}(readableBrowser,readableBrowser.exports)),readableBrowser.exports}var sign={exports:{}},bn$4={exports:{}};bn$4.exports;var hasRequiredBn$4;function requireBn$4(){return hasRequiredBn$4||(hasRequiredBn$4=1,function(o){(function(e,a){function c(b,$){if(!b)throw new Error($||"Assertion failed")}function j(b,$){b.super_=$;var _e=function(){};_e.prototype=$.prototype,b.prototype=new _e,b.prototype.constructor=b}function d(b,$,_e){if(d.isBN(b))return b;this.negative=0,this.words=null,this.length=0,this.red=null,b!==null&&(($==="le"||$==="be")&&(_e=$,$=10),this._init(b||0,$||10,_e||"be"))}typeof e=="object"?e.exports=d:a.BN=d,d.BN=d,d.wordSize=26;var et;try{typeof window<"u"&&typeof window.Buffer<"u"?et=window.Buffer:et=require$$1$2.Buffer}catch{}d.isBN=function($){return $ instanceof d?!0:$!==null&&typeof $=="object"&&$.constructor.wordSize===d.wordSize&&Array.isArray($.words)},d.max=function($,_e){return $.cmp(_e)>0?$:_e},d.min=function($,_e){return $.cmp(_e)<0?$:_e},d.prototype._init=function($,_e,it){if(typeof $=="number")return this._initNumber($,_e,it);if(typeof $=="object")return this._initArray($,_e,it);_e==="hex"&&(_e=16),c(_e===(_e|0)&&_e>=2&&_e<=36),$=$.toString().replace(/\s+/g,"");var pt=0;$[0]==="-"&&(pt++,this.negative=1),pt<$.length&&(_e===16?this._parseHex($,pt,it):(this._parseBase($,_e,pt),it==="le"&&this._initArray(this.toArray(),_e,it)))},d.prototype._initNumber=function($,_e,it){$<0&&(this.negative=1,$=-$),$<67108864?(this.words=[$&67108863],this.length=1):$<4503599627370496?(this.words=[$&67108863,$/67108864&67108863],this.length=2):(c($<9007199254740992),this.words=[$&67108863,$/67108864&67108863,1],this.length=3),it==="le"&&this._initArray(this.toArray(),_e,it)},d.prototype._initArray=function($,_e,it){if(c(typeof $.length=="number"),$.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil($.length/3),this.words=new Array(this.length);for(var pt=0;pt<this.length;pt++)this.words[pt]=0;var mt,lt,_=0;if(it==="be")for(pt=$.length-1,mt=0;pt>=0;pt-=3)lt=$[pt]|$[pt-1]<<8|$[pt-2]<<16,this.words[mt]|=lt<<_&67108863,this.words[mt+1]=lt>>>26-_&67108863,_+=24,_>=26&&(_-=26,mt++);else if(it==="le")for(pt=0,mt=0;pt<$.length;pt+=3)lt=$[pt]|$[pt+1]<<8|$[pt+2]<<16,this.words[mt]|=lt<<_&67108863,this.words[mt+1]=lt>>>26-_&67108863,_+=24,_>=26&&(_-=26,mt++);return this._strip()};function at(b,$){var _e=b.charCodeAt($);if(_e>=48&&_e<=57)return _e-48;if(_e>=65&&_e<=70)return _e-55;if(_e>=97&&_e<=102)return _e-87;c(!1,"Invalid character in "+b)}function st(b,$,_e){var it=at(b,_e);return _e-1>=$&&(it|=at(b,_e-1)<<4),it}d.prototype._parseHex=function($,_e,it){this.length=Math.ceil(($.length-_e)/6),this.words=new Array(this.length);for(var pt=0;pt<this.length;pt++)this.words[pt]=0;var mt=0,lt=0,_;if(it==="be")for(pt=$.length-1;pt>=_e;pt-=2)_=st($,_e,pt)<<mt,this.words[lt]|=_&67108863,mt>=18?(mt-=18,lt+=1,this.words[lt]|=_>>>26):mt+=8;else{var tt=$.length-_e;for(pt=tt%2===0?_e+1:_e;pt<$.length;pt+=2)_=st($,_e,pt)<<mt,this.words[lt]|=_&67108863,mt>=18?(mt-=18,lt+=1,this.words[lt]|=_>>>26):mt+=8}this._strip()};function ct(b,$,_e,it){for(var pt=0,mt=0,lt=Math.min(b.length,_e),_=$;_<lt;_++){var tt=b.charCodeAt(_)-48;pt*=it,tt>=49?mt=tt-49+10:tt>=17?mt=tt-17+10:mt=tt,c(tt>=0&&mt<it,"Invalid character"),pt+=mt}return pt}d.prototype._parseBase=function($,_e,it){this.words=[0],this.length=1;for(var pt=0,mt=1;mt<=67108863;mt*=_e)pt++;pt--,mt=mt/_e|0;for(var lt=$.length-it,_=lt%pt,tt=Math.min(lt,lt-_)+it,Tt=0,It=it;It<tt;It+=pt)Tt=ct($,It,It+pt,_e),this.imuln(mt),this.words[0]+Tt<67108864?this.words[0]+=Tt:this._iaddn(Tt);if(_!==0){var Nt=1;for(Tt=ct($,It,$.length,_e),It=0;It<_;It++)Nt*=_e;this.imuln(Nt),this.words[0]+Tt<67108864?this.words[0]+=Tt:this._iaddn(Tt)}this._strip()},d.prototype.copy=function($){$.words=new Array(this.length);for(var _e=0;_e<this.length;_e++)$.words[_e]=this.words[_e];$.length=this.length,$.negative=this.negative,$.red=this.red};function ot(b,$){b.words=$.words,b.length=$.length,b.negative=$.negative,b.red=$.red}if(d.prototype._move=function($){ot($,this)},d.prototype.clone=function(){var $=new d(null);return this.copy($),$},d.prototype._expand=function($){for(;this.length<$;)this.words[this.length++]=0;return this},d.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},d.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{d.prototype[Symbol.for("nodejs.util.inspect.custom")]=gt}catch{d.prototype.inspect=gt}else d.prototype.inspect=gt;function gt(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var ft=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],yt=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],vt=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];d.prototype.toString=function($,_e){$=$||10,_e=_e|0||1;var it;if($===16||$==="hex"){it="";for(var pt=0,mt=0,lt=0;lt<this.length;lt++){var _=this.words[lt],tt=((_<<pt|mt)&16777215).toString(16);mt=_>>>24-pt&16777215,pt+=2,pt>=26&&(pt-=26,lt--),mt!==0||lt!==this.length-1?it=ft[6-tt.length]+tt+it:it=tt+it}for(mt!==0&&(it=mt.toString(16)+it);it.length%_e!==0;)it="0"+it;return this.negative!==0&&(it="-"+it),it}if($===($|0)&&$>=2&&$<=36){var Tt=yt[$],It=vt[$];it="";var Nt=this.clone();for(Nt.negative=0;!Nt.isZero();){var Ut=Nt.modrn(It).toString($);Nt=Nt.idivn(It),Nt.isZero()?it=Ut+it:it=ft[Tt-Ut.length]+Ut+it}for(this.isZero()&&(it="0"+it);it.length%_e!==0;)it="0"+it;return this.negative!==0&&(it="-"+it),it}c(!1,"Base should be between 2 and 36")},d.prototype.toNumber=function(){var $=this.words[0];return this.length===2?$+=this.words[1]*67108864:this.length===3&&this.words[2]===1?$+=4503599627370496+this.words[1]*67108864:this.length>2&&c(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-$:$},d.prototype.toJSON=function(){return this.toString(16,2)},et&&(d.prototype.toBuffer=function($,_e){return this.toArrayLike(et,$,_e)}),d.prototype.toArray=function($,_e){return this.toArrayLike(Array,$,_e)};var rt=function($,_e){return $.allocUnsafe?$.allocUnsafe(_e):new $(_e)};d.prototype.toArrayLike=function($,_e,it){this._strip();var pt=this.byteLength(),mt=it||Math.max(1,pt);c(pt<=mt,"byte array longer than desired length"),c(mt>0,"Requested array length <= 0");var lt=rt($,mt),_=_e==="le"?"LE":"BE";return this["_toArrayLike"+_](lt,pt),lt},d.prototype._toArrayLikeLE=function($,_e){for(var it=0,pt=0,mt=0,lt=0;mt<this.length;mt++){var _=this.words[mt]<<lt|pt;$[it++]=_&255,it<$.length&&($[it++]=_>>8&255),it<$.length&&($[it++]=_>>16&255),lt===6?(it<$.length&&($[it++]=_>>24&255),pt=0,lt=0):(pt=_>>>24,lt+=2)}if(it<$.length)for($[it++]=pt;it<$.length;)$[it++]=0},d.prototype._toArrayLikeBE=function($,_e){for(var it=$.length-1,pt=0,mt=0,lt=0;mt<this.length;mt++){var _=this.words[mt]<<lt|pt;$[it--]=_&255,it>=0&&($[it--]=_>>8&255),it>=0&&($[it--]=_>>16&255),lt===6?(it>=0&&($[it--]=_>>24&255),pt=0,lt=0):(pt=_>>>24,lt+=2)}if(it>=0)for($[it--]=pt;it>=0;)$[it--]=0},Math.clz32?d.prototype._countBits=function($){return 32-Math.clz32($)}:d.prototype._countBits=function($){var _e=$,it=0;return _e>=4096&&(it+=13,_e>>>=13),_e>=64&&(it+=7,_e>>>=7),_e>=8&&(it+=4,_e>>>=4),_e>=2&&(it+=2,_e>>>=2),it+_e},d.prototype._zeroBits=function($){if($===0)return 26;var _e=$,it=0;return _e&8191||(it+=13,_e>>>=13),_e&127||(it+=7,_e>>>=7),_e&15||(it+=4,_e>>>=4),_e&3||(it+=2,_e>>>=2),_e&1||it++,it},d.prototype.bitLength=function(){var $=this.words[this.length-1],_e=this._countBits($);return(this.length-1)*26+_e};function bt(b){for(var $=new Array(b.bitLength()),_e=0;_e<$.length;_e++){var it=_e/26|0,pt=_e%26;$[_e]=b.words[it]>>>pt&1}return $}d.prototype.zeroBits=function(){if(this.isZero())return 0;for(var $=0,_e=0;_e<this.length;_e++){var it=this._zeroBits(this.words[_e]);if($+=it,it!==26)break}return $},d.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},d.prototype.toTwos=function($){return this.negative!==0?this.abs().inotn($).iaddn(1):this.clone()},d.prototype.fromTwos=function($){return this.testn($-1)?this.notn($).iaddn(1).ineg():this.clone()},d.prototype.isNeg=function(){return this.negative!==0},d.prototype.neg=function(){return this.clone().ineg()},d.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},d.prototype.iuor=function($){for(;this.length<$.length;)this.words[this.length++]=0;for(var _e=0;_e<$.length;_e++)this.words[_e]=this.words[_e]|$.words[_e];return this._strip()},d.prototype.ior=function($){return c((this.negative|$.negative)===0),this.iuor($)},d.prototype.or=function($){return this.length>$.length?this.clone().ior($):$.clone().ior(this)},d.prototype.uor=function($){return this.length>$.length?this.clone().iuor($):$.clone().iuor(this)},d.prototype.iuand=function($){var _e;this.length>$.length?_e=$:_e=this;for(var it=0;it<_e.length;it++)this.words[it]=this.words[it]&$.words[it];return this.length=_e.length,this._strip()},d.prototype.iand=function($){return c((this.negative|$.negative)===0),this.iuand($)},d.prototype.and=function($){return this.length>$.length?this.clone().iand($):$.clone().iand(this)},d.prototype.uand=function($){return this.length>$.length?this.clone().iuand($):$.clone().iuand(this)},d.prototype.iuxor=function($){var _e,it;this.length>$.length?(_e=this,it=$):(_e=$,it=this);for(var pt=0;pt<it.length;pt++)this.words[pt]=_e.words[pt]^it.words[pt];if(this!==_e)for(;pt<_e.length;pt++)this.words[pt]=_e.words[pt];return this.length=_e.length,this._strip()},d.prototype.ixor=function($){return c((this.negative|$.negative)===0),this.iuxor($)},d.prototype.xor=function($){return this.length>$.length?this.clone().ixor($):$.clone().ixor(this)},d.prototype.uxor=function($){return this.length>$.length?this.clone().iuxor($):$.clone().iuxor(this)},d.prototype.inotn=function($){c(typeof $=="number"&&$>=0);var _e=Math.ceil($/26)|0,it=$%26;this._expand(_e),it>0&&_e--;for(var pt=0;pt<_e;pt++)this.words[pt]=~this.words[pt]&67108863;return it>0&&(this.words[pt]=~this.words[pt]&67108863>>26-it),this._strip()},d.prototype.notn=function($){return this.clone().inotn($)},d.prototype.setn=function($,_e){c(typeof $=="number"&&$>=0);var it=$/26|0,pt=$%26;return this._expand(it+1),_e?this.words[it]=this.words[it]|1<<pt:this.words[it]=this.words[it]&~(1<<pt),this._strip()},d.prototype.iadd=function($){var _e;if(this.negative!==0&&$.negative===0)return this.negative=0,_e=this.isub($),this.negative^=1,this._normSign();if(this.negative===0&&$.negative!==0)return $.negative=0,_e=this.isub($),$.negative=1,_e._normSign();var it,pt;this.length>$.length?(it=this,pt=$):(it=$,pt=this);for(var mt=0,lt=0;lt<pt.length;lt++)_e=(it.words[lt]|0)+(pt.words[lt]|0)+mt,this.words[lt]=_e&67108863,mt=_e>>>26;for(;mt!==0&&lt<it.length;lt++)_e=(it.words[lt]|0)+mt,this.words[lt]=_e&67108863,mt=_e>>>26;if(this.length=it.length,mt!==0)this.words[this.length]=mt,this.length++;else if(it!==this)for(;lt<it.length;lt++)this.words[lt]=it.words[lt];return this},d.prototype.add=function($){var _e;return $.negative!==0&&this.negative===0?($.negative=0,_e=this.sub($),$.negative^=1,_e):$.negative===0&&this.negative!==0?(this.negative=0,_e=$.sub(this),this.negative=1,_e):this.length>$.length?this.clone().iadd($):$.clone().iadd(this)},d.prototype.isub=function($){if($.negative!==0){$.negative=0;var _e=this.iadd($);return $.negative=1,_e._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd($),this.negative=1,this._normSign();var it=this.cmp($);if(it===0)return this.negative=0,this.length=1,this.words[0]=0,this;var pt,mt;it>0?(pt=this,mt=$):(pt=$,mt=this);for(var lt=0,_=0;_<mt.length;_++)_e=(pt.words[_]|0)-(mt.words[_]|0)+lt,lt=_e>>26,this.words[_]=_e&67108863;for(;lt!==0&&_<pt.length;_++)_e=(pt.words[_]|0)+lt,lt=_e>>26,this.words[_]=_e&67108863;if(lt===0&&_<pt.length&&pt!==this)for(;_<pt.length;_++)this.words[_]=pt.words[_];return this.length=Math.max(this.length,_),pt!==this&&(this.negative=1),this._strip()},d.prototype.sub=function($){return this.clone().isub($)};function ht(b,$,_e){_e.negative=$.negative^b.negative;var it=b.length+$.length|0;_e.length=it,it=it-1|0;var pt=b.words[0]|0,mt=$.words[0]|0,lt=pt*mt,_=lt&67108863,tt=lt/67108864|0;_e.words[0]=_;for(var Tt=1;Tt<it;Tt++){for(var It=tt>>>26,Nt=tt&67108863,Ut=Math.min(Tt,$.length-1),Gt=Math.max(0,Tt-b.length+1);Gt<=Ut;Gt++){var Pt=Tt-Gt|0;pt=b.words[Pt]|0,mt=$.words[Gt]|0,lt=pt*mt+Nt,It+=lt/67108864|0,Nt=lt&67108863}_e.words[Tt]=Nt|0,tt=It|0}return tt!==0?_e.words[Tt]=tt|0:_e.length--,_e._strip()}var wt=function($,_e,it){var pt=$.words,mt=_e.words,lt=it.words,_=0,tt,Tt,It,Nt=pt[0]|0,Ut=Nt&8191,Gt=Nt>>>13,Pt=pt[1]|0,qt=Pt&8191,Kt=Pt>>>13,jt=pt[2]|0,Ht=jt&8191,Bt=jt>>>13,Jt=pt[3]|0,sr=Jt&8191,hr=Jt>>>13,Ar=pt[4]|0,gn=Ar&8191,Lr=Ar>>>13,wr=pt[5]|0,En=wr&8191,Dr=wr>>>13,Qr=pt[6]|0,Dn=Qr&8191,Br=Qr>>>13,Gr=pt[7]|0,Ln=Gr&8191,Fr=Gr>>>13,_i=pt[8]|0,Kn=_i&8191,Wt=_i>>>13,Lt=pt[9]|0,zt=Lt&8191,Zt=Lt>>>13,ar=mt[0]|0,Or=ar&8191,vr=ar>>>13,Rr=mt[1]|0,fr=Rr&8191,tr=Rr>>>13,yr=mt[2]|0,fn=yr&8191,Nr=yr>>>13,zr=mt[3]|0,xn=zr&8191,Kr=zr>>>13,nn=mt[4]|0,Wn=nn&8191,Zr=nn>>>13,on=mt[5]|0,Xn=on&8191,en=on>>>13,ln=mt[6]|0,Zn=ln&8191,$t=ln>>>13,or=mt[7]|0,Yr=or&8191,Vr=or>>>13,Hr=mt[8]|0,Mn=Hr&8191,Ur=Hr>>>13,tn=mt[9]|0,jn=tn&8191,Un=tn>>>13;it.negative=$.negative^_e.negative,it.length=19,tt=Math.imul(Ut,Or),Tt=Math.imul(Ut,vr),Tt=Tt+Math.imul(Gt,Or)|0,It=Math.imul(Gt,vr);var ao=(_+tt|0)+((Tt&8191)<<13)|0;_=(It+(Tt>>>13)|0)+(ao>>>26)|0,ao&=67108863,tt=Math.imul(qt,Or),Tt=Math.imul(qt,vr),Tt=Tt+Math.imul(Kt,Or)|0,It=Math.imul(Kt,vr),tt=tt+Math.imul(Ut,fr)|0,Tt=Tt+Math.imul(Ut,tr)|0,Tt=Tt+Math.imul(Gt,fr)|0,It=It+Math.imul(Gt,tr)|0;var co=(_+tt|0)+((Tt&8191)<<13)|0;_=(It+(Tt>>>13)|0)+(co>>>26)|0,co&=67108863,tt=Math.imul(Ht,Or),Tt=Math.imul(Ht,vr),Tt=Tt+Math.imul(Bt,Or)|0,It=Math.imul(Bt,vr),tt=tt+Math.imul(qt,fr)|0,Tt=Tt+Math.imul(qt,tr)|0,Tt=Tt+Math.imul(Kt,fr)|0,It=It+Math.imul(Kt,tr)|0,tt=tt+Math.imul(Ut,fn)|0,Tt=Tt+Math.imul(Ut,Nr)|0,Tt=Tt+Math.imul(Gt,fn)|0,It=It+Math.imul(Gt,Nr)|0;var ro=(_+tt|0)+((Tt&8191)<<13)|0;_=(It+(Tt>>>13)|0)+(ro>>>26)|0,ro&=67108863,tt=Math.imul(sr,Or),Tt=Math.imul(sr,vr),Tt=Tt+Math.imul(hr,Or)|0,It=Math.imul(hr,vr),tt=tt+Math.imul(Ht,fr)|0,Tt=Tt+Math.imul(Ht,tr)|0,Tt=Tt+Math.imul(Bt,fr)|0,It=It+Math.imul(Bt,tr)|0,tt=tt+Math.imul(qt,fn)|0,Tt=Tt+Math.imul(qt,Nr)|0,Tt=Tt+Math.imul(Kt,fn)|0,It=It+Math.imul(Kt,Nr)|0,tt=tt+Math.imul(Ut,xn)|0,Tt=Tt+Math.imul(Ut,Kr)|0,Tt=Tt+Math.imul(Gt,xn)|0,It=It+Math.imul(Gt,Kr)|0;var vo=(_+tt|0)+((Tt&8191)<<13)|0;_=(It+(Tt>>>13)|0)+(vo>>>26)|0,vo&=67108863,tt=Math.imul(gn,Or),Tt=Math.imul(gn,vr),Tt=Tt+Math.imul(Lr,Or)|0,It=Math.imul(Lr,vr),tt=tt+Math.imul(sr,fr)|0,Tt=Tt+Math.imul(sr,tr)|0,Tt=Tt+Math.imul(hr,fr)|0,It=It+Math.imul(hr,tr)|0,tt=tt+Math.imul(Ht,fn)|0,Tt=Tt+Math.imul(Ht,Nr)|0,Tt=Tt+Math.imul(Bt,fn)|0,It=It+Math.imul(Bt,Nr)|0,tt=tt+Math.imul(qt,xn)|0,Tt=Tt+Math.imul(qt,Kr)|0,Tt=Tt+Math.imul(Kt,xn)|0,It=It+Math.imul(Kt,Kr)|0,tt=tt+Math.imul(Ut,Wn)|0,Tt=Tt+Math.imul(Ut,Zr)|0,Tt=Tt+Math.imul(Gt,Wn)|0,It=It+Math.imul(Gt,Zr)|0;var oo=(_+tt|0)+((Tt&8191)<<13)|0;_=(It+(Tt>>>13)|0)+(oo>>>26)|0,oo&=67108863,tt=Math.imul(En,Or),Tt=Math.imul(En,vr),Tt=Tt+Math.imul(Dr,Or)|0,It=Math.imul(Dr,vr),tt=tt+Math.imul(gn,fr)|0,Tt=Tt+Math.imul(gn,tr)|0,Tt=Tt+Math.imul(Lr,fr)|0,It=It+Math.imul(Lr,tr)|0,tt=tt+Math.imul(sr,fn)|0,Tt=Tt+Math.imul(sr,Nr)|0,Tt=Tt+Math.imul(hr,fn)|0,It=It+Math.imul(hr,Nr)|0,tt=tt+Math.imul(Ht,xn)|0,Tt=Tt+Math.imul(Ht,Kr)|0,Tt=Tt+Math.imul(Bt,xn)|0,It=It+Math.imul(Bt,Kr)|0,tt=tt+Math.imul(qt,Wn)|0,Tt=Tt+Math.imul(qt,Zr)|0,Tt=Tt+Math.imul(Kt,Wn)|0,It=It+Math.imul(Kt,Zr)|0,tt=tt+Math.imul(Ut,Xn)|0,Tt=Tt+Math.imul(Ut,en)|0,Tt=Tt+Math.imul(Gt,Xn)|0,It=It+Math.imul(Gt,en)|0;var mo=(_+tt|0)+((Tt&8191)<<13)|0;_=(It+(Tt>>>13)|0)+(mo>>>26)|0,mo&=67108863,tt=Math.imul(Dn,Or),Tt=Math.imul(Dn,vr),Tt=Tt+Math.imul(Br,Or)|0,It=Math.imul(Br,vr),tt=tt+Math.imul(En,fr)|0,Tt=Tt+Math.imul(En,tr)|0,Tt=Tt+Math.imul(Dr,fr)|0,It=It+Math.imul(Dr,tr)|0,tt=tt+Math.imul(gn,fn)|0,Tt=Tt+Math.imul(gn,Nr)|0,Tt=Tt+Math.imul(Lr,fn)|0,It=It+Math.imul(Lr,Nr)|0,tt=tt+Math.imul(sr,xn)|0,Tt=Tt+Math.imul(sr,Kr)|0,Tt=Tt+Math.imul(hr,xn)|0,It=It+Math.imul(hr,Kr)|0,tt=tt+Math.imul(Ht,Wn)|0,Tt=Tt+Math.imul(Ht,Zr)|0,Tt=Tt+Math.imul(Bt,Wn)|0,It=It+Math.imul(Bt,Zr)|0,tt=tt+Math.imul(qt,Xn)|0,Tt=Tt+Math.imul(qt,en)|0,Tt=Tt+Math.imul(Kt,Xn)|0,It=It+Math.imul(Kt,en)|0,tt=tt+Math.imul(Ut,Zn)|0,Tt=Tt+Math.imul(Ut,$t)|0,Tt=Tt+Math.imul(Gt,Zn)|0,It=It+Math.imul(Gt,$t)|0;var ho=(_+tt|0)+((Tt&8191)<<13)|0;_=(It+(Tt>>>13)|0)+(ho>>>26)|0,ho&=67108863,tt=Math.imul(Ln,Or),Tt=Math.imul(Ln,vr),Tt=Tt+Math.imul(Fr,Or)|0,It=Math.imul(Fr,vr),tt=tt+Math.imul(Dn,fr)|0,Tt=Tt+Math.imul(Dn,tr)|0,Tt=Tt+Math.imul(Br,fr)|0,It=It+Math.imul(Br,tr)|0,tt=tt+Math.imul(En,fn)|0,Tt=Tt+Math.imul(En,Nr)|0,Tt=Tt+Math.imul(Dr,fn)|0,It=It+Math.imul(Dr,Nr)|0,tt=tt+Math.imul(gn,xn)|0,Tt=Tt+Math.imul(gn,Kr)|0,Tt=Tt+Math.imul(Lr,xn)|0,It=It+Math.imul(Lr,Kr)|0,tt=tt+Math.imul(sr,Wn)|0,Tt=Tt+Math.imul(sr,Zr)|0,Tt=Tt+Math.imul(hr,Wn)|0,It=It+Math.imul(hr,Zr)|0,tt=tt+Math.imul(Ht,Xn)|0,Tt=Tt+Math.imul(Ht,en)|0,Tt=Tt+Math.imul(Bt,Xn)|0,It=It+Math.imul(Bt,en)|0,tt=tt+Math.imul(qt,Zn)|0,Tt=Tt+Math.imul(qt,$t)|0,Tt=Tt+Math.imul(Kt,Zn)|0,It=It+Math.imul(Kt,$t)|0,tt=tt+Math.imul(Ut,Yr)|0,Tt=Tt+Math.imul(Ut,Vr)|0,Tt=Tt+Math.imul(Gt,Yr)|0,It=It+Math.imul(Gt,Vr)|0;var go=(_+tt|0)+((Tt&8191)<<13)|0;_=(It+(Tt>>>13)|0)+(go>>>26)|0,go&=67108863,tt=Math.imul(Kn,Or),Tt=Math.imul(Kn,vr),Tt=Tt+Math.imul(Wt,Or)|0,It=Math.imul(Wt,vr),tt=tt+Math.imul(Ln,fr)|0,Tt=Tt+Math.imul(Ln,tr)|0,Tt=Tt+Math.imul(Fr,fr)|0,It=It+Math.imul(Fr,tr)|0,tt=tt+Math.imul(Dn,fn)|0,Tt=Tt+Math.imul(Dn,Nr)|0,Tt=Tt+Math.imul(Br,fn)|0,It=It+Math.imul(Br,Nr)|0,tt=tt+Math.imul(En,xn)|0,Tt=Tt+Math.imul(En,Kr)|0,Tt=Tt+Math.imul(Dr,xn)|0,It=It+Math.imul(Dr,Kr)|0,tt=tt+Math.imul(gn,Wn)|0,Tt=Tt+Math.imul(gn,Zr)|0,Tt=Tt+Math.imul(Lr,Wn)|0,It=It+Math.imul(Lr,Zr)|0,tt=tt+Math.imul(sr,Xn)|0,Tt=Tt+Math.imul(sr,en)|0,Tt=Tt+Math.imul(hr,Xn)|0,It=It+Math.imul(hr,en)|0,tt=tt+Math.imul(Ht,Zn)|0,Tt=Tt+Math.imul(Ht,$t)|0,Tt=Tt+Math.imul(Bt,Zn)|0,It=It+Math.imul(Bt,$t)|0,tt=tt+Math.imul(qt,Yr)|0,Tt=Tt+Math.imul(qt,Vr)|0,Tt=Tt+Math.imul(Kt,Yr)|0,It=It+Math.imul(Kt,Vr)|0,tt=tt+Math.imul(Ut,Mn)|0,Tt=Tt+Math.imul(Ut,Ur)|0,Tt=Tt+Math.imul(Gt,Mn)|0,It=It+Math.imul(Gt,Ur)|0;var bo=(_+tt|0)+((Tt&8191)<<13)|0;_=(It+(Tt>>>13)|0)+(bo>>>26)|0,bo&=67108863,tt=Math.imul(zt,Or),Tt=Math.imul(zt,vr),Tt=Tt+Math.imul(Zt,Or)|0,It=Math.imul(Zt,vr),tt=tt+Math.imul(Kn,fr)|0,Tt=Tt+Math.imul(Kn,tr)|0,Tt=Tt+Math.imul(Wt,fr)|0,It=It+Math.imul(Wt,tr)|0,tt=tt+Math.imul(Ln,fn)|0,Tt=Tt+Math.imul(Ln,Nr)|0,Tt=Tt+Math.imul(Fr,fn)|0,It=It+Math.imul(Fr,Nr)|0,tt=tt+Math.imul(Dn,xn)|0,Tt=Tt+Math.imul(Dn,Kr)|0,Tt=Tt+Math.imul(Br,xn)|0,It=It+Math.imul(Br,Kr)|0,tt=tt+Math.imul(En,Wn)|0,Tt=Tt+Math.imul(En,Zr)|0,Tt=Tt+Math.imul(Dr,Wn)|0,It=It+Math.imul(Dr,Zr)|0,tt=tt+Math.imul(gn,Xn)|0,Tt=Tt+Math.imul(gn,en)|0,Tt=Tt+Math.imul(Lr,Xn)|0,It=It+Math.imul(Lr,en)|0,tt=tt+Math.imul(sr,Zn)|0,Tt=Tt+Math.imul(sr,$t)|0,Tt=Tt+Math.imul(hr,Zn)|0,It=It+Math.imul(hr,$t)|0,tt=tt+Math.imul(Ht,Yr)|0,Tt=Tt+Math.imul(Ht,Vr)|0,Tt=Tt+Math.imul(Bt,Yr)|0,It=It+Math.imul(Bt,Vr)|0,tt=tt+Math.imul(qt,Mn)|0,Tt=Tt+Math.imul(qt,Ur)|0,Tt=Tt+Math.imul(Kt,Mn)|0,It=It+Math.imul(Kt,Ur)|0,tt=tt+Math.imul(Ut,jn)|0,Tt=Tt+Math.imul(Ut,Un)|0,Tt=Tt+Math.imul(Gt,jn)|0,It=It+Math.imul(Gt,Un)|0;var ur=(_+tt|0)+((Tt&8191)<<13)|0;_=(It+(Tt>>>13)|0)+(ur>>>26)|0,ur&=67108863,tt=Math.imul(zt,fr),Tt=Math.imul(zt,tr),Tt=Tt+Math.imul(Zt,fr)|0,It=Math.imul(Zt,tr),tt=tt+Math.imul(Kn,fn)|0,Tt=Tt+Math.imul(Kn,Nr)|0,Tt=Tt+Math.imul(Wt,fn)|0,It=It+Math.imul(Wt,Nr)|0,tt=tt+Math.imul(Ln,xn)|0,Tt=Tt+Math.imul(Ln,Kr)|0,Tt=Tt+Math.imul(Fr,xn)|0,It=It+Math.imul(Fr,Kr)|0,tt=tt+Math.imul(Dn,Wn)|0,Tt=Tt+Math.imul(Dn,Zr)|0,Tt=Tt+Math.imul(Br,Wn)|0,It=It+Math.imul(Br,Zr)|0,tt=tt+Math.imul(En,Xn)|0,Tt=Tt+Math.imul(En,en)|0,Tt=Tt+Math.imul(Dr,Xn)|0,It=It+Math.imul(Dr,en)|0,tt=tt+Math.imul(gn,Zn)|0,Tt=Tt+Math.imul(gn,$t)|0,Tt=Tt+Math.imul(Lr,Zn)|0,It=It+Math.imul(Lr,$t)|0,tt=tt+Math.imul(sr,Yr)|0,Tt=Tt+Math.imul(sr,Vr)|0,Tt=Tt+Math.imul(hr,Yr)|0,It=It+Math.imul(hr,Vr)|0,tt=tt+Math.imul(Ht,Mn)|0,Tt=Tt+Math.imul(Ht,Ur)|0,Tt=Tt+Math.imul(Bt,Mn)|0,It=It+Math.imul(Bt,Ur)|0,tt=tt+Math.imul(qt,jn)|0,Tt=Tt+Math.imul(qt,Un)|0,Tt=Tt+Math.imul(Kt,jn)|0,It=It+Math.imul(Kt,Un)|0;var Cr=(_+tt|0)+((Tt&8191)<<13)|0;_=(It+(Tt>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,tt=Math.imul(zt,fn),Tt=Math.imul(zt,Nr),Tt=Tt+Math.imul(Zt,fn)|0,It=Math.imul(Zt,Nr),tt=tt+Math.imul(Kn,xn)|0,Tt=Tt+Math.imul(Kn,Kr)|0,Tt=Tt+Math.imul(Wt,xn)|0,It=It+Math.imul(Wt,Kr)|0,tt=tt+Math.imul(Ln,Wn)|0,Tt=Tt+Math.imul(Ln,Zr)|0,Tt=Tt+Math.imul(Fr,Wn)|0,It=It+Math.imul(Fr,Zr)|0,tt=tt+Math.imul(Dn,Xn)|0,Tt=Tt+Math.imul(Dn,en)|0,Tt=Tt+Math.imul(Br,Xn)|0,It=It+Math.imul(Br,en)|0,tt=tt+Math.imul(En,Zn)|0,Tt=Tt+Math.imul(En,$t)|0,Tt=Tt+Math.imul(Dr,Zn)|0,It=It+Math.imul(Dr,$t)|0,tt=tt+Math.imul(gn,Yr)|0,Tt=Tt+Math.imul(gn,Vr)|0,Tt=Tt+Math.imul(Lr,Yr)|0,It=It+Math.imul(Lr,Vr)|0,tt=tt+Math.imul(sr,Mn)|0,Tt=Tt+Math.imul(sr,Ur)|0,Tt=Tt+Math.imul(hr,Mn)|0,It=It+Math.imul(hr,Ur)|0,tt=tt+Math.imul(Ht,jn)|0,Tt=Tt+Math.imul(Ht,Un)|0,Tt=Tt+Math.imul(Bt,jn)|0,It=It+Math.imul(Bt,Un)|0;var $r=(_+tt|0)+((Tt&8191)<<13)|0;_=(It+(Tt>>>13)|0)+($r>>>26)|0,$r&=67108863,tt=Math.imul(zt,xn),Tt=Math.imul(zt,Kr),Tt=Tt+Math.imul(Zt,xn)|0,It=Math.imul(Zt,Kr),tt=tt+Math.imul(Kn,Wn)|0,Tt=Tt+Math.imul(Kn,Zr)|0,Tt=Tt+Math.imul(Wt,Wn)|0,It=It+Math.imul(Wt,Zr)|0,tt=tt+Math.imul(Ln,Xn)|0,Tt=Tt+Math.imul(Ln,en)|0,Tt=Tt+Math.imul(Fr,Xn)|0,It=It+Math.imul(Fr,en)|0,tt=tt+Math.imul(Dn,Zn)|0,Tt=Tt+Math.imul(Dn,$t)|0,Tt=Tt+Math.imul(Br,Zn)|0,It=It+Math.imul(Br,$t)|0,tt=tt+Math.imul(En,Yr)|0,Tt=Tt+Math.imul(En,Vr)|0,Tt=Tt+Math.imul(Dr,Yr)|0,It=It+Math.imul(Dr,Vr)|0,tt=tt+Math.imul(gn,Mn)|0,Tt=Tt+Math.imul(gn,Ur)|0,Tt=Tt+Math.imul(Lr,Mn)|0,It=It+Math.imul(Lr,Ur)|0,tt=tt+Math.imul(sr,jn)|0,Tt=Tt+Math.imul(sr,Un)|0,Tt=Tt+Math.imul(hr,jn)|0,It=It+Math.imul(hr,Un)|0;var dn=(_+tt|0)+((Tt&8191)<<13)|0;_=(It+(Tt>>>13)|0)+(dn>>>26)|0,dn&=67108863,tt=Math.imul(zt,Wn),Tt=Math.imul(zt,Zr),Tt=Tt+Math.imul(Zt,Wn)|0,It=Math.imul(Zt,Zr),tt=tt+Math.imul(Kn,Xn)|0,Tt=Tt+Math.imul(Kn,en)|0,Tt=Tt+Math.imul(Wt,Xn)|0,It=It+Math.imul(Wt,en)|0,tt=tt+Math.imul(Ln,Zn)|0,Tt=Tt+Math.imul(Ln,$t)|0,Tt=Tt+Math.imul(Fr,Zn)|0,It=It+Math.imul(Fr,$t)|0,tt=tt+Math.imul(Dn,Yr)|0,Tt=Tt+Math.imul(Dn,Vr)|0,Tt=Tt+Math.imul(Br,Yr)|0,It=It+Math.imul(Br,Vr)|0,tt=tt+Math.imul(En,Mn)|0,Tt=Tt+Math.imul(En,Ur)|0,Tt=Tt+Math.imul(Dr,Mn)|0,It=It+Math.imul(Dr,Ur)|0,tt=tt+Math.imul(gn,jn)|0,Tt=Tt+Math.imul(gn,Un)|0,Tt=Tt+Math.imul(Lr,jn)|0,It=It+Math.imul(Lr,Un)|0;var rn=(_+tt|0)+((Tt&8191)<<13)|0;_=(It+(Tt>>>13)|0)+(rn>>>26)|0,rn&=67108863,tt=Math.imul(zt,Xn),Tt=Math.imul(zt,en),Tt=Tt+Math.imul(Zt,Xn)|0,It=Math.imul(Zt,en),tt=tt+Math.imul(Kn,Zn)|0,Tt=Tt+Math.imul(Kn,$t)|0,Tt=Tt+Math.imul(Wt,Zn)|0,It=It+Math.imul(Wt,$t)|0,tt=tt+Math.imul(Ln,Yr)|0,Tt=Tt+Math.imul(Ln,Vr)|0,Tt=Tt+Math.imul(Fr,Yr)|0,It=It+Math.imul(Fr,Vr)|0,tt=tt+Math.imul(Dn,Mn)|0,Tt=Tt+Math.imul(Dn,Ur)|0,Tt=Tt+Math.imul(Br,Mn)|0,It=It+Math.imul(Br,Ur)|0,tt=tt+Math.imul(En,jn)|0,Tt=Tt+Math.imul(En,Un)|0,Tt=Tt+Math.imul(Dr,jn)|0,It=It+Math.imul(Dr,Un)|0;var Sn=(_+tt|0)+((Tt&8191)<<13)|0;_=(It+(Tt>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,tt=Math.imul(zt,Zn),Tt=Math.imul(zt,$t),Tt=Tt+Math.imul(Zt,Zn)|0,It=Math.imul(Zt,$t),tt=tt+Math.imul(Kn,Yr)|0,Tt=Tt+Math.imul(Kn,Vr)|0,Tt=Tt+Math.imul(Wt,Yr)|0,It=It+Math.imul(Wt,Vr)|0,tt=tt+Math.imul(Ln,Mn)|0,Tt=Tt+Math.imul(Ln,Ur)|0,Tt=Tt+Math.imul(Fr,Mn)|0,It=It+Math.imul(Fr,Ur)|0,tt=tt+Math.imul(Dn,jn)|0,Tt=Tt+Math.imul(Dn,Un)|0,Tt=Tt+Math.imul(Br,jn)|0,It=It+Math.imul(Br,Un)|0;var In=(_+tt|0)+((Tt&8191)<<13)|0;_=(It+(Tt>>>13)|0)+(In>>>26)|0,In&=67108863,tt=Math.imul(zt,Yr),Tt=Math.imul(zt,Vr),Tt=Tt+Math.imul(Zt,Yr)|0,It=Math.imul(Zt,Vr),tt=tt+Math.imul(Kn,Mn)|0,Tt=Tt+Math.imul(Kn,Ur)|0,Tt=Tt+Math.imul(Wt,Mn)|0,It=It+Math.imul(Wt,Ur)|0,tt=tt+Math.imul(Ln,jn)|0,Tt=Tt+Math.imul(Ln,Un)|0,Tt=Tt+Math.imul(Fr,jn)|0,It=It+Math.imul(Fr,Un)|0;var Cn=(_+tt|0)+((Tt&8191)<<13)|0;_=(It+(Tt>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,tt=Math.imul(zt,Mn),Tt=Math.imul(zt,Ur),Tt=Tt+Math.imul(Zt,Mn)|0,It=Math.imul(Zt,Ur),tt=tt+Math.imul(Kn,jn)|0,Tt=Tt+Math.imul(Kn,Un)|0,Tt=Tt+Math.imul(Wt,jn)|0,It=It+Math.imul(Wt,Un)|0;var qn=(_+tt|0)+((Tt&8191)<<13)|0;_=(It+(Tt>>>13)|0)+(qn>>>26)|0,qn&=67108863,tt=Math.imul(zt,jn),Tt=Math.imul(zt,Un),Tt=Tt+Math.imul(Zt,jn)|0,It=Math.imul(Zt,Un);var Vn=(_+tt|0)+((Tt&8191)<<13)|0;return _=(It+(Tt>>>13)|0)+(Vn>>>26)|0,Vn&=67108863,lt[0]=ao,lt[1]=co,lt[2]=ro,lt[3]=vo,lt[4]=oo,lt[5]=mo,lt[6]=ho,lt[7]=go,lt[8]=bo,lt[9]=ur,lt[10]=Cr,lt[11]=$r,lt[12]=dn,lt[13]=rn,lt[14]=Sn,lt[15]=In,lt[16]=Cn,lt[17]=qn,lt[18]=Vn,_!==0&&(lt[19]=_,it.length++),it};Math.imul||(wt=ht);function At(b,$,_e){_e.negative=$.negative^b.negative,_e.length=b.length+$.length;for(var it=0,pt=0,mt=0;mt<_e.length-1;mt++){var lt=pt;pt=0;for(var _=it&67108863,tt=Math.min(mt,$.length-1),Tt=Math.max(0,mt-b.length+1);Tt<=tt;Tt++){var It=mt-Tt,Nt=b.words[It]|0,Ut=$.words[Tt]|0,Gt=Nt*Ut,Pt=Gt&67108863;lt=lt+(Gt/67108864|0)|0,Pt=Pt+_|0,_=Pt&67108863,lt=lt+(Pt>>>26)|0,pt+=lt>>>26,lt&=67108863}_e.words[mt]=_,it=lt,lt=pt}return it!==0?_e.words[mt]=it:_e.length--,_e._strip()}function Ct(b,$,_e){return At(b,$,_e)}d.prototype.mulTo=function($,_e){var it,pt=this.length+$.length;return this.length===10&&$.length===10?it=wt(this,$,_e):pt<63?it=ht(this,$,_e):pt<1024?it=At(this,$,_e):it=Ct(this,$,_e),it},d.prototype.mul=function($){var _e=new d(null);return _e.words=new Array(this.length+$.length),this.mulTo($,_e)},d.prototype.mulf=function($){var _e=new d(null);return _e.words=new Array(this.length+$.length),Ct(this,$,_e)},d.prototype.imul=function($){return this.clone().mulTo($,this)},d.prototype.imuln=function($){var _e=$<0;_e&&($=-$),c(typeof $=="number"),c($<67108864);for(var it=0,pt=0;pt<this.length;pt++){var mt=(this.words[pt]|0)*$,lt=(mt&67108863)+(it&67108863);it>>=26,it+=mt/67108864|0,it+=lt>>>26,this.words[pt]=lt&67108863}return it!==0&&(this.words[pt]=it,this.length++),_e?this.ineg():this},d.prototype.muln=function($){return this.clone().imuln($)},d.prototype.sqr=function(){return this.mul(this)},d.prototype.isqr=function(){return this.imul(this.clone())},d.prototype.pow=function($){var _e=bt($);if(_e.length===0)return new d(1);for(var it=this,pt=0;pt<_e.length&&_e[pt]===0;pt++,it=it.sqr());if(++pt<_e.length)for(var mt=it.sqr();pt<_e.length;pt++,mt=mt.sqr())_e[pt]!==0&&(it=it.mul(mt));return it},d.prototype.iushln=function($){c(typeof $=="number"&&$>=0);var _e=$%26,it=($-_e)/26,pt=67108863>>>26-_e<<26-_e,mt;if(_e!==0){var lt=0;for(mt=0;mt<this.length;mt++){var _=this.words[mt]&pt,tt=(this.words[mt]|0)-_<<_e;this.words[mt]=tt|lt,lt=_>>>26-_e}lt&&(this.words[mt]=lt,this.length++)}if(it!==0){for(mt=this.length-1;mt>=0;mt--)this.words[mt+it]=this.words[mt];for(mt=0;mt<it;mt++)this.words[mt]=0;this.length+=it}return this._strip()},d.prototype.ishln=function($){return c(this.negative===0),this.iushln($)},d.prototype.iushrn=function($,_e,it){c(typeof $=="number"&&$>=0);var pt;_e?pt=(_e-_e%26)/26:pt=0;var mt=$%26,lt=Math.min(($-mt)/26,this.length),_=67108863^67108863>>>mt<<mt,tt=it;if(pt-=lt,pt=Math.max(0,pt),tt){for(var Tt=0;Tt<lt;Tt++)tt.words[Tt]=this.words[Tt];tt.length=lt}if(lt!==0)if(this.length>lt)for(this.length-=lt,Tt=0;Tt<this.length;Tt++)this.words[Tt]=this.words[Tt+lt];else this.words[0]=0,this.length=1;var It=0;for(Tt=this.length-1;Tt>=0&&(It!==0||Tt>=pt);Tt--){var Nt=this.words[Tt]|0;this.words[Tt]=It<<26-mt|Nt>>>mt,It=Nt&_}return tt&&It!==0&&(tt.words[tt.length++]=It),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},d.prototype.ishrn=function($,_e,it){return c(this.negative===0),this.iushrn($,_e,it)},d.prototype.shln=function($){return this.clone().ishln($)},d.prototype.ushln=function($){return this.clone().iushln($)},d.prototype.shrn=function($){return this.clone().ishrn($)},d.prototype.ushrn=function($){return this.clone().iushrn($)},d.prototype.testn=function($){c(typeof $=="number"&&$>=0);var _e=$%26,it=($-_e)/26,pt=1<<_e;if(this.length<=it)return!1;var mt=this.words[it];return!!(mt&pt)},d.prototype.imaskn=function($){c(typeof $=="number"&&$>=0);var _e=$%26,it=($-_e)/26;if(c(this.negative===0,"imaskn works only with positive numbers"),this.length<=it)return this;if(_e!==0&&it++,this.length=Math.min(it,this.length),_e!==0){var pt=67108863^67108863>>>_e<<_e;this.words[this.length-1]&=pt}return this._strip()},d.prototype.maskn=function($){return this.clone().imaskn($)},d.prototype.iaddn=function($){return c(typeof $=="number"),c($<67108864),$<0?this.isubn(-$):this.negative!==0?this.length===1&&(this.words[0]|0)<=$?(this.words[0]=$-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn($),this.negative=1,this):this._iaddn($)},d.prototype._iaddn=function($){this.words[0]+=$;for(var _e=0;_e<this.length&&this.words[_e]>=67108864;_e++)this.words[_e]-=67108864,_e===this.length-1?this.words[_e+1]=1:this.words[_e+1]++;return this.length=Math.max(this.length,_e+1),this},d.prototype.isubn=function($){if(c(typeof $=="number"),c($<67108864),$<0)return this.iaddn(-$);if(this.negative!==0)return this.negative=0,this.iaddn($),this.negative=1,this;if(this.words[0]-=$,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var _e=0;_e<this.length&&this.words[_e]<0;_e++)this.words[_e]+=67108864,this.words[_e+1]-=1;return this._strip()},d.prototype.addn=function($){return this.clone().iaddn($)},d.prototype.subn=function($){return this.clone().isubn($)},d.prototype.iabs=function(){return this.negative=0,this},d.prototype.abs=function(){return this.clone().iabs()},d.prototype._ishlnsubmul=function($,_e,it){var pt=$.length+it,mt;this._expand(pt);var lt,_=0;for(mt=0;mt<$.length;mt++){lt=(this.words[mt+it]|0)+_;var tt=($.words[mt]|0)*_e;lt-=tt&67108863,_=(lt>>26)-(tt/67108864|0),this.words[mt+it]=lt&67108863}for(;mt<this.length-it;mt++)lt=(this.words[mt+it]|0)+_,_=lt>>26,this.words[mt+it]=lt&67108863;if(_===0)return this._strip();for(c(_===-1),_=0,mt=0;mt<this.length;mt++)lt=-(this.words[mt]|0)+_,_=lt>>26,this.words[mt]=lt&67108863;return this.negative=1,this._strip()},d.prototype._wordDiv=function($,_e){var it=this.length-$.length,pt=this.clone(),mt=$,lt=mt.words[mt.length-1]|0,_=this._countBits(lt);it=26-_,it!==0&&(mt=mt.ushln(it),pt.iushln(it),lt=mt.words[mt.length-1]|0);var tt=pt.length-mt.length,Tt;if(_e!=="mod"){Tt=new d(null),Tt.length=tt+1,Tt.words=new Array(Tt.length);for(var It=0;It<Tt.length;It++)Tt.words[It]=0}var Nt=pt.clone()._ishlnsubmul(mt,1,tt);Nt.negative===0&&(pt=Nt,Tt&&(Tt.words[tt]=1));for(var Ut=tt-1;Ut>=0;Ut--){var Gt=(pt.words[mt.length+Ut]|0)*67108864+(pt.words[mt.length+Ut-1]|0);for(Gt=Math.min(Gt/lt|0,67108863),pt._ishlnsubmul(mt,Gt,Ut);pt.negative!==0;)Gt--,pt.negative=0,pt._ishlnsubmul(mt,1,Ut),pt.isZero()||(pt.negative^=1);Tt&&(Tt.words[Ut]=Gt)}return Tt&&Tt._strip(),pt._strip(),_e!=="div"&&it!==0&&pt.iushrn(it),{div:Tt||null,mod:pt}},d.prototype.divmod=function($,_e,it){if(c(!$.isZero()),this.isZero())return{div:new d(0),mod:new d(0)};var pt,mt,lt;return this.negative!==0&&$.negative===0?(lt=this.neg().divmod($,_e),_e!=="mod"&&(pt=lt.div.neg()),_e!=="div"&&(mt=lt.mod.neg(),it&&mt.negative!==0&&mt.iadd($)),{div:pt,mod:mt}):this.negative===0&&$.negative!==0?(lt=this.divmod($.neg(),_e),_e!=="mod"&&(pt=lt.div.neg()),{div:pt,mod:lt.mod}):this.negative&$.negative?(lt=this.neg().divmod($.neg(),_e),_e!=="div"&&(mt=lt.mod.neg(),it&&mt.negative!==0&&mt.isub($)),{div:lt.div,mod:mt}):$.length>this.length||this.cmp($)<0?{div:new d(0),mod:this}:$.length===1?_e==="div"?{div:this.divn($.words[0]),mod:null}:_e==="mod"?{div:null,mod:new d(this.modrn($.words[0]))}:{div:this.divn($.words[0]),mod:new d(this.modrn($.words[0]))}:this._wordDiv($,_e)},d.prototype.div=function($){return this.divmod($,"div",!1).div},d.prototype.mod=function($){return this.divmod($,"mod",!1).mod},d.prototype.umod=function($){return this.divmod($,"mod",!0).mod},d.prototype.divRound=function($){var _e=this.divmod($);if(_e.mod.isZero())return _e.div;var it=_e.div.negative!==0?_e.mod.isub($):_e.mod,pt=$.ushrn(1),mt=$.andln(1),lt=it.cmp(pt);return lt<0||mt===1&&lt===0?_e.div:_e.div.negative!==0?_e.div.isubn(1):_e.div.iaddn(1)},d.prototype.modrn=function($){var _e=$<0;_e&&($=-$),c($<=67108863);for(var it=(1<<26)%$,pt=0,mt=this.length-1;mt>=0;mt--)pt=(it*pt+(this.words[mt]|0))%$;return _e?-pt:pt},d.prototype.modn=function($){return this.modrn($)},d.prototype.idivn=function($){var _e=$<0;_e&&($=-$),c($<=67108863);for(var it=0,pt=this.length-1;pt>=0;pt--){var mt=(this.words[pt]|0)+it*67108864;this.words[pt]=mt/$|0,it=mt%$}return this._strip(),_e?this.ineg():this},d.prototype.divn=function($){return this.clone().idivn($)},d.prototype.egcd=function($){c($.negative===0),c(!$.isZero());var _e=this,it=$.clone();_e.negative!==0?_e=_e.umod($):_e=_e.clone();for(var pt=new d(1),mt=new d(0),lt=new d(0),_=new d(1),tt=0;_e.isEven()&&it.isEven();)_e.iushrn(1),it.iushrn(1),++tt;for(var Tt=it.clone(),It=_e.clone();!_e.isZero();){for(var Nt=0,Ut=1;!(_e.words[0]&Ut)&&Nt<26;++Nt,Ut<<=1);if(Nt>0)for(_e.iushrn(Nt);Nt-- >0;)(pt.isOdd()||mt.isOdd())&&(pt.iadd(Tt),mt.isub(It)),pt.iushrn(1),mt.iushrn(1);for(var Gt=0,Pt=1;!(it.words[0]&Pt)&&Gt<26;++Gt,Pt<<=1);if(Gt>0)for(it.iushrn(Gt);Gt-- >0;)(lt.isOdd()||_.isOdd())&&(lt.iadd(Tt),_.isub(It)),lt.iushrn(1),_.iushrn(1);_e.cmp(it)>=0?(_e.isub(it),pt.isub(lt),mt.isub(_)):(it.isub(_e),lt.isub(pt),_.isub(mt))}return{a:lt,b:_,gcd:it.iushln(tt)}},d.prototype._invmp=function($){c($.negative===0),c(!$.isZero());var _e=this,it=$.clone();_e.negative!==0?_e=_e.umod($):_e=_e.clone();for(var pt=new d(1),mt=new d(0),lt=it.clone();_e.cmpn(1)>0&&it.cmpn(1)>0;){for(var _=0,tt=1;!(_e.words[0]&tt)&&_<26;++_,tt<<=1);if(_>0)for(_e.iushrn(_);_-- >0;)pt.isOdd()&&pt.iadd(lt),pt.iushrn(1);for(var Tt=0,It=1;!(it.words[0]&It)&&Tt<26;++Tt,It<<=1);if(Tt>0)for(it.iushrn(Tt);Tt-- >0;)mt.isOdd()&&mt.iadd(lt),mt.iushrn(1);_e.cmp(it)>=0?(_e.isub(it),pt.isub(mt)):(it.isub(_e),mt.isub(pt))}var Nt;return _e.cmpn(1)===0?Nt=pt:Nt=mt,Nt.cmpn(0)<0&&Nt.iadd($),Nt},d.prototype.gcd=function($){if(this.isZero())return $.abs();if($.isZero())return this.abs();var _e=this.clone(),it=$.clone();_e.negative=0,it.negative=0;for(var pt=0;_e.isEven()&&it.isEven();pt++)_e.iushrn(1),it.iushrn(1);do{for(;_e.isEven();)_e.iushrn(1);for(;it.isEven();)it.iushrn(1);var mt=_e.cmp(it);if(mt<0){var lt=_e;_e=it,it=lt}else if(mt===0||it.cmpn(1)===0)break;_e.isub(it)}while(!0);return it.iushln(pt)},d.prototype.invm=function($){return this.egcd($).a.umod($)},d.prototype.isEven=function(){return(this.words[0]&1)===0},d.prototype.isOdd=function(){return(this.words[0]&1)===1},d.prototype.andln=function($){return this.words[0]&$},d.prototype.bincn=function($){c(typeof $=="number");var _e=$%26,it=($-_e)/26,pt=1<<_e;if(this.length<=it)return this._expand(it+1),this.words[it]|=pt,this;for(var mt=pt,lt=it;mt!==0&&lt<this.length;lt++){var _=this.words[lt]|0;_+=mt,mt=_>>>26,_&=67108863,this.words[lt]=_}return mt!==0&&(this.words[lt]=mt,this.length++),this},d.prototype.isZero=function(){return this.length===1&&this.words[0]===0},d.prototype.cmpn=function($){var _e=$<0;if(this.negative!==0&&!_e)return-1;if(this.negative===0&&_e)return 1;this._strip();var it;if(this.length>1)it=1;else{_e&&($=-$),c($<=67108863,"Number is too big");var pt=this.words[0]|0;it=pt===$?0:pt<$?-1:1}return this.negative!==0?-it|0:it},d.prototype.cmp=function($){if(this.negative!==0&&$.negative===0)return-1;if(this.negative===0&&$.negative!==0)return 1;var _e=this.ucmp($);return this.negative!==0?-_e|0:_e},d.prototype.ucmp=function($){if(this.length>$.length)return 1;if(this.length<$.length)return-1;for(var _e=0,it=this.length-1;it>=0;it--){var pt=this.words[it]|0,mt=$.words[it]|0;if(pt!==mt){pt<mt?_e=-1:pt>mt&&(_e=1);break}}return _e},d.prototype.gtn=function($){return this.cmpn($)===1},d.prototype.gt=function($){return this.cmp($)===1},d.prototype.gten=function($){return this.cmpn($)>=0},d.prototype.gte=function($){return this.cmp($)>=0},d.prototype.ltn=function($){return this.cmpn($)===-1},d.prototype.lt=function($){return this.cmp($)===-1},d.prototype.lten=function($){return this.cmpn($)<=0},d.prototype.lte=function($){return this.cmp($)<=0},d.prototype.eqn=function($){return this.cmpn($)===0},d.prototype.eq=function($){return this.cmp($)===0},d.red=function($){return new nt($)},d.prototype.toRed=function($){return c(!this.red,"Already a number in reduction context"),c(this.negative===0,"red works only with positives"),$.convertTo(this)._forceRed($)},d.prototype.fromRed=function(){return c(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},d.prototype._forceRed=function($){return this.red=$,this},d.prototype.forceRed=function($){return c(!this.red,"Already a number in reduction context"),this._forceRed($)},d.prototype.redAdd=function($){return c(this.red,"redAdd works only with red numbers"),this.red.add(this,$)},d.prototype.redIAdd=function($){return c(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,$)},d.prototype.redSub=function($){return c(this.red,"redSub works only with red numbers"),this.red.sub(this,$)},d.prototype.redISub=function($){return c(this.red,"redISub works only with red numbers"),this.red.isub(this,$)},d.prototype.redShl=function($){return c(this.red,"redShl works only with red numbers"),this.red.shl(this,$)},d.prototype.redMul=function($){return c(this.red,"redMul works only with red numbers"),this.red._verify2(this,$),this.red.mul(this,$)},d.prototype.redIMul=function($){return c(this.red,"redMul works only with red numbers"),this.red._verify2(this,$),this.red.imul(this,$)},d.prototype.redSqr=function(){return c(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},d.prototype.redISqr=function(){return c(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},d.prototype.redSqrt=function(){return c(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},d.prototype.redInvm=function(){return c(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},d.prototype.redNeg=function(){return c(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},d.prototype.redPow=function($){return c(this.red&&!$.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,$)};var dt={k256:null,p224:null,p192:null,p25519:null};function Et(b,$){this.name=b,this.p=new d($,16),this.n=this.p.bitLength(),this.k=new d(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Et.prototype._tmp=function(){var $=new d(null);return $.words=new Array(Math.ceil(this.n/13)),$},Et.prototype.ireduce=function($){var _e=$,it;do this.split(_e,this.tmp),_e=this.imulK(_e),_e=_e.iadd(this.tmp),it=_e.bitLength();while(it>this.n);var pt=it<this.n?-1:_e.ucmp(this.p);return pt===0?(_e.words[0]=0,_e.length=1):pt>0?_e.isub(this.p):_e.strip!==void 0?_e.strip():_e._strip(),_e},Et.prototype.split=function($,_e){$.iushrn(this.n,0,_e)},Et.prototype.imulK=function($){return $.imul(this.k)};function Rt(){Et.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}j(Rt,Et),Rt.prototype.split=function($,_e){for(var it=4194303,pt=Math.min($.length,9),mt=0;mt<pt;mt++)_e.words[mt]=$.words[mt];if(_e.length=pt,$.length<=9){$.words[0]=0,$.length=1;return}var lt=$.words[9];for(_e.words[_e.length++]=lt&it,mt=10;mt<$.length;mt++){var _=$.words[mt]|0;$.words[mt-10]=(_&it)<<4|lt>>>22,lt=_}lt>>>=22,$.words[mt-10]=lt,lt===0&&$.length>10?$.length-=10:$.length-=9},Rt.prototype.imulK=function($){$.words[$.length]=0,$.words[$.length+1]=0,$.length+=2;for(var _e=0,it=0;it<$.length;it++){var pt=$.words[it]|0;_e+=pt*977,$.words[it]=_e&67108863,_e=pt*64+(_e/67108864|0)}return $.words[$.length-1]===0&&($.length--,$.words[$.length-1]===0&&$.length--),$};function Mt(){Et.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}j(Mt,Et);function _t(){Et.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}j(_t,Et);function kt(){Et.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}j(kt,Et),kt.prototype.imulK=function($){for(var _e=0,it=0;it<$.length;it++){var pt=($.words[it]|0)*19+_e,mt=pt&67108863;pt>>>=26,$.words[it]=mt,_e=pt}return _e!==0&&($.words[$.length++]=_e),$},d._prime=function($){if(dt[$])return dt[$];var _e;if($==="k256")_e=new Rt;else if($==="p224")_e=new Mt;else if($==="p192")_e=new _t;else if($==="p25519")_e=new kt;else throw new Error("Unknown prime "+$);return dt[$]=_e,_e};function nt(b){if(typeof b=="string"){var $=d._prime(b);this.m=$.p,this.prime=$}else c(b.gtn(1),"modulus must be greater than 1"),this.m=b,this.prime=null}nt.prototype._verify1=function($){c($.negative===0,"red works only with positives"),c($.red,"red works only with red numbers")},nt.prototype._verify2=function($,_e){c(($.negative|_e.negative)===0,"red works only with positives"),c($.red&&$.red===_e.red,"red works only with red numbers")},nt.prototype.imod=function($){return this.prime?this.prime.ireduce($)._forceRed(this):(ot($,$.umod(this.m)._forceRed(this)),$)},nt.prototype.neg=function($){return $.isZero()?$.clone():this.m.sub($)._forceRed(this)},nt.prototype.add=function($,_e){this._verify2($,_e);var it=$.add(_e);return it.cmp(this.m)>=0&&it.isub(this.m),it._forceRed(this)},nt.prototype.iadd=function($,_e){this._verify2($,_e);var it=$.iadd(_e);return it.cmp(this.m)>=0&&it.isub(this.m),it},nt.prototype.sub=function($,_e){this._verify2($,_e);var it=$.sub(_e);return it.cmpn(0)<0&&it.iadd(this.m),it._forceRed(this)},nt.prototype.isub=function($,_e){this._verify2($,_e);var it=$.isub(_e);return it.cmpn(0)<0&&it.iadd(this.m),it},nt.prototype.shl=function($,_e){return this._verify1($),this.imod($.ushln(_e))},nt.prototype.imul=function($,_e){return this._verify2($,_e),this.imod($.imul(_e))},nt.prototype.mul=function($,_e){return this._verify2($,_e),this.imod($.mul(_e))},nt.prototype.isqr=function($){return this.imul($,$.clone())},nt.prototype.sqr=function($){return this.mul($,$)},nt.prototype.sqrt=function($){if($.isZero())return $.clone();var _e=this.m.andln(3);if(c(_e%2===1),_e===3){var it=this.m.add(new d(1)).iushrn(2);return this.pow($,it)}for(var pt=this.m.subn(1),mt=0;!pt.isZero()&&pt.andln(1)===0;)mt++,pt.iushrn(1);c(!pt.isZero());var lt=new d(1).toRed(this),_=lt.redNeg(),tt=this.m.subn(1).iushrn(1),Tt=this.m.bitLength();for(Tt=new d(2*Tt*Tt).toRed(this);this.pow(Tt,tt).cmp(_)!==0;)Tt.redIAdd(_);for(var It=this.pow(Tt,pt),Nt=this.pow($,pt.addn(1).iushrn(1)),Ut=this.pow($,pt),Gt=mt;Ut.cmp(lt)!==0;){for(var Pt=Ut,qt=0;Pt.cmp(lt)!==0;qt++)Pt=Pt.redSqr();c(qt<Gt);var Kt=this.pow(It,new d(1).iushln(Gt-qt-1));Nt=Nt.redMul(Kt),It=Kt.redSqr(),Ut=Ut.redMul(It),Gt=qt}return Nt},nt.prototype.invm=function($){var _e=$._invmp(this.m);return _e.negative!==0?(_e.negative=0,this.imod(_e).redNeg()):this.imod(_e)},nt.prototype.pow=function($,_e){if(_e.isZero())return new d(1).toRed(this);if(_e.cmpn(1)===0)return $.clone();var it=4,pt=new Array(1<<it);pt[0]=new d(1).toRed(this),pt[1]=$;for(var mt=2;mt<pt.length;mt++)pt[mt]=this.mul(pt[mt-1],$);var lt=pt[0],_=0,tt=0,Tt=_e.bitLength()%26;for(Tt===0&&(Tt=26),mt=_e.length-1;mt>=0;mt--){for(var It=_e.words[mt],Nt=Tt-1;Nt>=0;Nt--){var Ut=It>>Nt&1;if(lt!==pt[0]&&(lt=this.sqr(lt)),Ut===0&&_===0){tt=0;continue}_<<=1,_|=Ut,tt++,!(tt!==it&&(mt!==0||Nt!==0))&&(lt=this.mul(lt,pt[_]),tt=0,_=0)}Tt=26}return lt},nt.prototype.convertTo=function($){var _e=$.umod(this.m);return _e===$?_e.clone():_e},nt.prototype.convertFrom=function($){var _e=$.clone();return _e.red=null,_e},d.mont=function($){return new s($)};function s(b){nt.call(this,b),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new d(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}j(s,nt),s.prototype.convertTo=function($){return this.imod($.ushln(this.shift))},s.prototype.convertFrom=function($){var _e=this.imod($.mul(this.rinv));return _e.red=null,_e},s.prototype.imul=function($,_e){if($.isZero()||_e.isZero())return $.words[0]=0,$.length=1,$;var it=$.imul(_e),pt=it.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),mt=it.isub(pt).iushrn(this.shift),lt=mt;return mt.cmp(this.m)>=0?lt=mt.isub(this.m):mt.cmpn(0)<0&&(lt=mt.iadd(this.m)),lt._forceRed(this)},s.prototype.mul=function($,_e){if($.isZero()||_e.isZero())return new d(0)._forceRed(this);var it=$.mul(_e),pt=it.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),mt=it.isub(pt).iushrn(this.shift),lt=mt;return mt.cmp(this.m)>=0?lt=mt.isub(this.m):mt.cmpn(0)<0&&(lt=mt.iadd(this.m)),lt._forceRed(this)},s.prototype.invm=function($){var _e=this.imod($._invmp(this.m).mul(this.r2));return _e._forceRed(this)}})(o,commonjsGlobal)}(bn$4)),bn$4.exports}var browserifyRsa,hasRequiredBrowserifyRsa;function requireBrowserifyRsa(){if(hasRequiredBrowserifyRsa)return browserifyRsa;hasRequiredBrowserifyRsa=1;var o=requireBn$4(),e=requireBrowser$b(),a=requireSafeBuffer$1().Buffer;function c(et){var at=et.modulus.byteLength(),st;do st=new o(e(at));while(st.cmp(et.modulus)>=0||!st.umod(et.prime1)||!st.umod(et.prime2));return st}function j(et){var at=c(et),st=at.toRed(o.mont(et.modulus)).redPow(new o(et.publicExponent)).fromRed();return{blinder:st,unblinder:at.invm(et.modulus)}}function d(et,at){var st=j(at),ct=at.modulus.byteLength(),ot=new o(et).mul(st.blinder).umod(at.modulus),gt=ot.toRed(o.mont(at.prime1)),ft=ot.toRed(o.mont(at.prime2)),yt=at.coefficient,vt=at.prime1,rt=at.prime2,bt=gt.redPow(at.exponent1).fromRed(),ht=ft.redPow(at.exponent2).fromRed(),wt=bt.isub(ht).imul(yt).umod(vt).imul(rt);return ht.iadd(wt).imul(st.unblinder).umod(at.modulus).toArrayLike(a,"be",ct)}return d.getr=c,browserifyRsa=d,browserifyRsa}var elliptic={};const name="elliptic",version="6.6.0",description="EC cryptography",main="lib/elliptic.js",files=["lib"],scripts={lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository={type:"git",url:"git@github.com:indutny/elliptic"},keywords=["EC","Elliptic","curve","Cryptography"],author="Fedor Indutny <fedor@indutny.com>",license="MIT",bugs={url:"https://github.com/indutny/elliptic/issues"},homepage="https://github.com/indutny/elliptic",devDependencies={brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies={"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},require$$0$1={name,version,description,main,files,scripts,repository,keywords,author,license,bugs,homepage,devDependencies,dependencies};var utils$3={},bn$3={exports:{}};bn$3.exports;var hasRequiredBn$3;function requireBn$3(){return hasRequiredBn$3||(hasRequiredBn$3=1,function(o){(function(e,a){function c(nt,s){if(!nt)throw new Error(s||"Assertion failed")}function j(nt,s){nt.super_=s;var b=function(){};b.prototype=s.prototype,nt.prototype=new b,nt.prototype.constructor=nt}function d(nt,s,b){if(d.isBN(nt))return nt;this.negative=0,this.words=null,this.length=0,this.red=null,nt!==null&&((s==="le"||s==="be")&&(b=s,s=10),this._init(nt||0,s||10,b||"be"))}typeof e=="object"?e.exports=d:a.BN=d,d.BN=d,d.wordSize=26;var et;try{typeof window<"u"&&typeof window.Buffer<"u"?et=window.Buffer:et=require$$1$2.Buffer}catch{}d.isBN=function(s){return s instanceof d?!0:s!==null&&typeof s=="object"&&s.constructor.wordSize===d.wordSize&&Array.isArray(s.words)},d.max=function(s,b){return s.cmp(b)>0?s:b},d.min=function(s,b){return s.cmp(b)<0?s:b},d.prototype._init=function(s,b,$){if(typeof s=="number")return this._initNumber(s,b,$);if(typeof s=="object")return this._initArray(s,b,$);b==="hex"&&(b=16),c(b===(b|0)&&b>=2&&b<=36),s=s.toString().replace(/\s+/g,"");var _e=0;s[0]==="-"&&(_e++,this.negative=1),_e<s.length&&(b===16?this._parseHex(s,_e,$):(this._parseBase(s,b,_e),$==="le"&&this._initArray(this.toArray(),b,$)))},d.prototype._initNumber=function(s,b,$){s<0&&(this.negative=1,s=-s),s<67108864?(this.words=[s&67108863],this.length=1):s<4503599627370496?(this.words=[s&67108863,s/67108864&67108863],this.length=2):(c(s<9007199254740992),this.words=[s&67108863,s/67108864&67108863,1],this.length=3),$==="le"&&this._initArray(this.toArray(),b,$)},d.prototype._initArray=function(s,b,$){if(c(typeof s.length=="number"),s.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(s.length/3),this.words=new Array(this.length);for(var _e=0;_e<this.length;_e++)this.words[_e]=0;var it,pt,mt=0;if($==="be")for(_e=s.length-1,it=0;_e>=0;_e-=3)pt=s[_e]|s[_e-1]<<8|s[_e-2]<<16,this.words[it]|=pt<<mt&67108863,this.words[it+1]=pt>>>26-mt&67108863,mt+=24,mt>=26&&(mt-=26,it++);else if($==="le")for(_e=0,it=0;_e<s.length;_e+=3)pt=s[_e]|s[_e+1]<<8|s[_e+2]<<16,this.words[it]|=pt<<mt&67108863,this.words[it+1]=pt>>>26-mt&67108863,mt+=24,mt>=26&&(mt-=26,it++);return this.strip()};function at(nt,s){var b=nt.charCodeAt(s);return b>=65&&b<=70?b-55:b>=97&&b<=102?b-87:b-48&15}function st(nt,s,b){var $=at(nt,b);return b-1>=s&&($|=at(nt,b-1)<<4),$}d.prototype._parseHex=function(s,b,$){this.length=Math.ceil((s.length-b)/6),this.words=new Array(this.length);for(var _e=0;_e<this.length;_e++)this.words[_e]=0;var it=0,pt=0,mt;if($==="be")for(_e=s.length-1;_e>=b;_e-=2)mt=st(s,b,_e)<<it,this.words[pt]|=mt&67108863,it>=18?(it-=18,pt+=1,this.words[pt]|=mt>>>26):it+=8;else{var lt=s.length-b;for(_e=lt%2===0?b+1:b;_e<s.length;_e+=2)mt=st(s,b,_e)<<it,this.words[pt]|=mt&67108863,it>=18?(it-=18,pt+=1,this.words[pt]|=mt>>>26):it+=8}this.strip()};function ct(nt,s,b,$){for(var _e=0,it=Math.min(nt.length,b),pt=s;pt<it;pt++){var mt=nt.charCodeAt(pt)-48;_e*=$,mt>=49?_e+=mt-49+10:mt>=17?_e+=mt-17+10:_e+=mt}return _e}d.prototype._parseBase=function(s,b,$){this.words=[0],this.length=1;for(var _e=0,it=1;it<=67108863;it*=b)_e++;_e--,it=it/b|0;for(var pt=s.length-$,mt=pt%_e,lt=Math.min(pt,pt-mt)+$,_=0,tt=$;tt<lt;tt+=_e)_=ct(s,tt,tt+_e,b),this.imuln(it),this.words[0]+_<67108864?this.words[0]+=_:this._iaddn(_);if(mt!==0){var Tt=1;for(_=ct(s,tt,s.length,b),tt=0;tt<mt;tt++)Tt*=b;this.imuln(Tt),this.words[0]+_<67108864?this.words[0]+=_:this._iaddn(_)}this.strip()},d.prototype.copy=function(s){s.words=new Array(this.length);for(var b=0;b<this.length;b++)s.words[b]=this.words[b];s.length=this.length,s.negative=this.negative,s.red=this.red},d.prototype.clone=function(){var s=new d(null);return this.copy(s),s},d.prototype._expand=function(s){for(;this.length<s;)this.words[this.length++]=0;return this},d.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},d.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},d.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var ot=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],gt=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],ft=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];d.prototype.toString=function(s,b){s=s||10,b=b|0||1;var $;if(s===16||s==="hex"){$="";for(var _e=0,it=0,pt=0;pt<this.length;pt++){var mt=this.words[pt],lt=((mt<<_e|it)&16777215).toString(16);it=mt>>>24-_e&16777215,it!==0||pt!==this.length-1?$=ot[6-lt.length]+lt+$:$=lt+$,_e+=2,_e>=26&&(_e-=26,pt--)}for(it!==0&&($=it.toString(16)+$);$.length%b!==0;)$="0"+$;return this.negative!==0&&($="-"+$),$}if(s===(s|0)&&s>=2&&s<=36){var _=gt[s],tt=ft[s];$="";var Tt=this.clone();for(Tt.negative=0;!Tt.isZero();){var It=Tt.modn(tt).toString(s);Tt=Tt.idivn(tt),Tt.isZero()?$=It+$:$=ot[_-It.length]+It+$}for(this.isZero()&&($="0"+$);$.length%b!==0;)$="0"+$;return this.negative!==0&&($="-"+$),$}c(!1,"Base should be between 2 and 36")},d.prototype.toNumber=function(){var s=this.words[0];return this.length===2?s+=this.words[1]*67108864:this.length===3&&this.words[2]===1?s+=4503599627370496+this.words[1]*67108864:this.length>2&&c(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-s:s},d.prototype.toJSON=function(){return this.toString(16)},d.prototype.toBuffer=function(s,b){return c(typeof et<"u"),this.toArrayLike(et,s,b)},d.prototype.toArray=function(s,b){return this.toArrayLike(Array,s,b)},d.prototype.toArrayLike=function(s,b,$){var _e=this.byteLength(),it=$||Math.max(1,_e);c(_e<=it,"byte array longer than desired length"),c(it>0,"Requested array length <= 0"),this.strip();var pt=b==="le",mt=new s(it),lt,_,tt=this.clone();if(pt){for(_=0;!tt.isZero();_++)lt=tt.andln(255),tt.iushrn(8),mt[_]=lt;for(;_<it;_++)mt[_]=0}else{for(_=0;_<it-_e;_++)mt[_]=0;for(_=0;!tt.isZero();_++)lt=tt.andln(255),tt.iushrn(8),mt[it-_-1]=lt}return mt},Math.clz32?d.prototype._countBits=function(s){return 32-Math.clz32(s)}:d.prototype._countBits=function(s){var b=s,$=0;return b>=4096&&($+=13,b>>>=13),b>=64&&($+=7,b>>>=7),b>=8&&($+=4,b>>>=4),b>=2&&($+=2,b>>>=2),$+b},d.prototype._zeroBits=function(s){if(s===0)return 26;var b=s,$=0;return b&8191||($+=13,b>>>=13),b&127||($+=7,b>>>=7),b&15||($+=4,b>>>=4),b&3||($+=2,b>>>=2),b&1||$++,$},d.prototype.bitLength=function(){var s=this.words[this.length-1],b=this._countBits(s);return(this.length-1)*26+b};function yt(nt){for(var s=new Array(nt.bitLength()),b=0;b<s.length;b++){var $=b/26|0,_e=b%26;s[b]=(nt.words[$]&1<<_e)>>>_e}return s}d.prototype.zeroBits=function(){if(this.isZero())return 0;for(var s=0,b=0;b<this.length;b++){var $=this._zeroBits(this.words[b]);if(s+=$,$!==26)break}return s},d.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},d.prototype.toTwos=function(s){return this.negative!==0?this.abs().inotn(s).iaddn(1):this.clone()},d.prototype.fromTwos=function(s){return this.testn(s-1)?this.notn(s).iaddn(1).ineg():this.clone()},d.prototype.isNeg=function(){return this.negative!==0},d.prototype.neg=function(){return this.clone().ineg()},d.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},d.prototype.iuor=function(s){for(;this.length<s.length;)this.words[this.length++]=0;for(var b=0;b<s.length;b++)this.words[b]=this.words[b]|s.words[b];return this.strip()},d.prototype.ior=function(s){return c((this.negative|s.negative)===0),this.iuor(s)},d.prototype.or=function(s){return this.length>s.length?this.clone().ior(s):s.clone().ior(this)},d.prototype.uor=function(s){return this.length>s.length?this.clone().iuor(s):s.clone().iuor(this)},d.prototype.iuand=function(s){var b;this.length>s.length?b=s:b=this;for(var $=0;$<b.length;$++)this.words[$]=this.words[$]&s.words[$];return this.length=b.length,this.strip()},d.prototype.iand=function(s){return c((this.negative|s.negative)===0),this.iuand(s)},d.prototype.and=function(s){return this.length>s.length?this.clone().iand(s):s.clone().iand(this)},d.prototype.uand=function(s){return this.length>s.length?this.clone().iuand(s):s.clone().iuand(this)},d.prototype.iuxor=function(s){var b,$;this.length>s.length?(b=this,$=s):(b=s,$=this);for(var _e=0;_e<$.length;_e++)this.words[_e]=b.words[_e]^$.words[_e];if(this!==b)for(;_e<b.length;_e++)this.words[_e]=b.words[_e];return this.length=b.length,this.strip()},d.prototype.ixor=function(s){return c((this.negative|s.negative)===0),this.iuxor(s)},d.prototype.xor=function(s){return this.length>s.length?this.clone().ixor(s):s.clone().ixor(this)},d.prototype.uxor=function(s){return this.length>s.length?this.clone().iuxor(s):s.clone().iuxor(this)},d.prototype.inotn=function(s){c(typeof s=="number"&&s>=0);var b=Math.ceil(s/26)|0,$=s%26;this._expand(b),$>0&&b--;for(var _e=0;_e<b;_e++)this.words[_e]=~this.words[_e]&67108863;return $>0&&(this.words[_e]=~this.words[_e]&67108863>>26-$),this.strip()},d.prototype.notn=function(s){return this.clone().inotn(s)},d.prototype.setn=function(s,b){c(typeof s=="number"&&s>=0);var $=s/26|0,_e=s%26;return this._expand($+1),b?this.words[$]=this.words[$]|1<<_e:this.words[$]=this.words[$]&~(1<<_e),this.strip()},d.prototype.iadd=function(s){var b;if(this.negative!==0&&s.negative===0)return this.negative=0,b=this.isub(s),this.negative^=1,this._normSign();if(this.negative===0&&s.negative!==0)return s.negative=0,b=this.isub(s),s.negative=1,b._normSign();var $,_e;this.length>s.length?($=this,_e=s):($=s,_e=this);for(var it=0,pt=0;pt<_e.length;pt++)b=($.words[pt]|0)+(_e.words[pt]|0)+it,this.words[pt]=b&67108863,it=b>>>26;for(;it!==0&&pt<$.length;pt++)b=($.words[pt]|0)+it,this.words[pt]=b&67108863,it=b>>>26;if(this.length=$.length,it!==0)this.words[this.length]=it,this.length++;else if($!==this)for(;pt<$.length;pt++)this.words[pt]=$.words[pt];return this},d.prototype.add=function(s){var b;return s.negative!==0&&this.negative===0?(s.negative=0,b=this.sub(s),s.negative^=1,b):s.negative===0&&this.negative!==0?(this.negative=0,b=s.sub(this),this.negative=1,b):this.length>s.length?this.clone().iadd(s):s.clone().iadd(this)},d.prototype.isub=function(s){if(s.negative!==0){s.negative=0;var b=this.iadd(s);return s.negative=1,b._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(s),this.negative=1,this._normSign();var $=this.cmp(s);if($===0)return this.negative=0,this.length=1,this.words[0]=0,this;var _e,it;$>0?(_e=this,it=s):(_e=s,it=this);for(var pt=0,mt=0;mt<it.length;mt++)b=(_e.words[mt]|0)-(it.words[mt]|0)+pt,pt=b>>26,this.words[mt]=b&67108863;for(;pt!==0&&mt<_e.length;mt++)b=(_e.words[mt]|0)+pt,pt=b>>26,this.words[mt]=b&67108863;if(pt===0&&mt<_e.length&&_e!==this)for(;mt<_e.length;mt++)this.words[mt]=_e.words[mt];return this.length=Math.max(this.length,mt),_e!==this&&(this.negative=1),this.strip()},d.prototype.sub=function(s){return this.clone().isub(s)};function vt(nt,s,b){b.negative=s.negative^nt.negative;var $=nt.length+s.length|0;b.length=$,$=$-1|0;var _e=nt.words[0]|0,it=s.words[0]|0,pt=_e*it,mt=pt&67108863,lt=pt/67108864|0;b.words[0]=mt;for(var _=1;_<$;_++){for(var tt=lt>>>26,Tt=lt&67108863,It=Math.min(_,s.length-1),Nt=Math.max(0,_-nt.length+1);Nt<=It;Nt++){var Ut=_-Nt|0;_e=nt.words[Ut]|0,it=s.words[Nt]|0,pt=_e*it+Tt,tt+=pt/67108864|0,Tt=pt&67108863}b.words[_]=Tt|0,lt=tt|0}return lt!==0?b.words[_]=lt|0:b.length--,b.strip()}var rt=function(s,b,$){var _e=s.words,it=b.words,pt=$.words,mt=0,lt,_,tt,Tt=_e[0]|0,It=Tt&8191,Nt=Tt>>>13,Ut=_e[1]|0,Gt=Ut&8191,Pt=Ut>>>13,qt=_e[2]|0,Kt=qt&8191,jt=qt>>>13,Ht=_e[3]|0,Bt=Ht&8191,Jt=Ht>>>13,sr=_e[4]|0,hr=sr&8191,Ar=sr>>>13,gn=_e[5]|0,Lr=gn&8191,wr=gn>>>13,En=_e[6]|0,Dr=En&8191,Qr=En>>>13,Dn=_e[7]|0,Br=Dn&8191,Gr=Dn>>>13,Ln=_e[8]|0,Fr=Ln&8191,_i=Ln>>>13,Kn=_e[9]|0,Wt=Kn&8191,Lt=Kn>>>13,zt=it[0]|0,Zt=zt&8191,ar=zt>>>13,Or=it[1]|0,vr=Or&8191,Rr=Or>>>13,fr=it[2]|0,tr=fr&8191,yr=fr>>>13,fn=it[3]|0,Nr=fn&8191,zr=fn>>>13,xn=it[4]|0,Kr=xn&8191,nn=xn>>>13,Wn=it[5]|0,Zr=Wn&8191,on=Wn>>>13,Xn=it[6]|0,en=Xn&8191,ln=Xn>>>13,Zn=it[7]|0,$t=Zn&8191,or=Zn>>>13,Yr=it[8]|0,Vr=Yr&8191,Hr=Yr>>>13,Mn=it[9]|0,Ur=Mn&8191,tn=Mn>>>13;$.negative=s.negative^b.negative,$.length=19,lt=Math.imul(It,Zt),_=Math.imul(It,ar),_=_+Math.imul(Nt,Zt)|0,tt=Math.imul(Nt,ar);var jn=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(jn>>>26)|0,jn&=67108863,lt=Math.imul(Gt,Zt),_=Math.imul(Gt,ar),_=_+Math.imul(Pt,Zt)|0,tt=Math.imul(Pt,ar),lt=lt+Math.imul(It,vr)|0,_=_+Math.imul(It,Rr)|0,_=_+Math.imul(Nt,vr)|0,tt=tt+Math.imul(Nt,Rr)|0;var Un=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(Un>>>26)|0,Un&=67108863,lt=Math.imul(Kt,Zt),_=Math.imul(Kt,ar),_=_+Math.imul(jt,Zt)|0,tt=Math.imul(jt,ar),lt=lt+Math.imul(Gt,vr)|0,_=_+Math.imul(Gt,Rr)|0,_=_+Math.imul(Pt,vr)|0,tt=tt+Math.imul(Pt,Rr)|0,lt=lt+Math.imul(It,tr)|0,_=_+Math.imul(It,yr)|0,_=_+Math.imul(Nt,tr)|0,tt=tt+Math.imul(Nt,yr)|0;var ao=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(ao>>>26)|0,ao&=67108863,lt=Math.imul(Bt,Zt),_=Math.imul(Bt,ar),_=_+Math.imul(Jt,Zt)|0,tt=Math.imul(Jt,ar),lt=lt+Math.imul(Kt,vr)|0,_=_+Math.imul(Kt,Rr)|0,_=_+Math.imul(jt,vr)|0,tt=tt+Math.imul(jt,Rr)|0,lt=lt+Math.imul(Gt,tr)|0,_=_+Math.imul(Gt,yr)|0,_=_+Math.imul(Pt,tr)|0,tt=tt+Math.imul(Pt,yr)|0,lt=lt+Math.imul(It,Nr)|0,_=_+Math.imul(It,zr)|0,_=_+Math.imul(Nt,Nr)|0,tt=tt+Math.imul(Nt,zr)|0;var co=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(co>>>26)|0,co&=67108863,lt=Math.imul(hr,Zt),_=Math.imul(hr,ar),_=_+Math.imul(Ar,Zt)|0,tt=Math.imul(Ar,ar),lt=lt+Math.imul(Bt,vr)|0,_=_+Math.imul(Bt,Rr)|0,_=_+Math.imul(Jt,vr)|0,tt=tt+Math.imul(Jt,Rr)|0,lt=lt+Math.imul(Kt,tr)|0,_=_+Math.imul(Kt,yr)|0,_=_+Math.imul(jt,tr)|0,tt=tt+Math.imul(jt,yr)|0,lt=lt+Math.imul(Gt,Nr)|0,_=_+Math.imul(Gt,zr)|0,_=_+Math.imul(Pt,Nr)|0,tt=tt+Math.imul(Pt,zr)|0,lt=lt+Math.imul(It,Kr)|0,_=_+Math.imul(It,nn)|0,_=_+Math.imul(Nt,Kr)|0,tt=tt+Math.imul(Nt,nn)|0;var ro=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(ro>>>26)|0,ro&=67108863,lt=Math.imul(Lr,Zt),_=Math.imul(Lr,ar),_=_+Math.imul(wr,Zt)|0,tt=Math.imul(wr,ar),lt=lt+Math.imul(hr,vr)|0,_=_+Math.imul(hr,Rr)|0,_=_+Math.imul(Ar,vr)|0,tt=tt+Math.imul(Ar,Rr)|0,lt=lt+Math.imul(Bt,tr)|0,_=_+Math.imul(Bt,yr)|0,_=_+Math.imul(Jt,tr)|0,tt=tt+Math.imul(Jt,yr)|0,lt=lt+Math.imul(Kt,Nr)|0,_=_+Math.imul(Kt,zr)|0,_=_+Math.imul(jt,Nr)|0,tt=tt+Math.imul(jt,zr)|0,lt=lt+Math.imul(Gt,Kr)|0,_=_+Math.imul(Gt,nn)|0,_=_+Math.imul(Pt,Kr)|0,tt=tt+Math.imul(Pt,nn)|0,lt=lt+Math.imul(It,Zr)|0,_=_+Math.imul(It,on)|0,_=_+Math.imul(Nt,Zr)|0,tt=tt+Math.imul(Nt,on)|0;var vo=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(vo>>>26)|0,vo&=67108863,lt=Math.imul(Dr,Zt),_=Math.imul(Dr,ar),_=_+Math.imul(Qr,Zt)|0,tt=Math.imul(Qr,ar),lt=lt+Math.imul(Lr,vr)|0,_=_+Math.imul(Lr,Rr)|0,_=_+Math.imul(wr,vr)|0,tt=tt+Math.imul(wr,Rr)|0,lt=lt+Math.imul(hr,tr)|0,_=_+Math.imul(hr,yr)|0,_=_+Math.imul(Ar,tr)|0,tt=tt+Math.imul(Ar,yr)|0,lt=lt+Math.imul(Bt,Nr)|0,_=_+Math.imul(Bt,zr)|0,_=_+Math.imul(Jt,Nr)|0,tt=tt+Math.imul(Jt,zr)|0,lt=lt+Math.imul(Kt,Kr)|0,_=_+Math.imul(Kt,nn)|0,_=_+Math.imul(jt,Kr)|0,tt=tt+Math.imul(jt,nn)|0,lt=lt+Math.imul(Gt,Zr)|0,_=_+Math.imul(Gt,on)|0,_=_+Math.imul(Pt,Zr)|0,tt=tt+Math.imul(Pt,on)|0,lt=lt+Math.imul(It,en)|0,_=_+Math.imul(It,ln)|0,_=_+Math.imul(Nt,en)|0,tt=tt+Math.imul(Nt,ln)|0;var oo=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(oo>>>26)|0,oo&=67108863,lt=Math.imul(Br,Zt),_=Math.imul(Br,ar),_=_+Math.imul(Gr,Zt)|0,tt=Math.imul(Gr,ar),lt=lt+Math.imul(Dr,vr)|0,_=_+Math.imul(Dr,Rr)|0,_=_+Math.imul(Qr,vr)|0,tt=tt+Math.imul(Qr,Rr)|0,lt=lt+Math.imul(Lr,tr)|0,_=_+Math.imul(Lr,yr)|0,_=_+Math.imul(wr,tr)|0,tt=tt+Math.imul(wr,yr)|0,lt=lt+Math.imul(hr,Nr)|0,_=_+Math.imul(hr,zr)|0,_=_+Math.imul(Ar,Nr)|0,tt=tt+Math.imul(Ar,zr)|0,lt=lt+Math.imul(Bt,Kr)|0,_=_+Math.imul(Bt,nn)|0,_=_+Math.imul(Jt,Kr)|0,tt=tt+Math.imul(Jt,nn)|0,lt=lt+Math.imul(Kt,Zr)|0,_=_+Math.imul(Kt,on)|0,_=_+Math.imul(jt,Zr)|0,tt=tt+Math.imul(jt,on)|0,lt=lt+Math.imul(Gt,en)|0,_=_+Math.imul(Gt,ln)|0,_=_+Math.imul(Pt,en)|0,tt=tt+Math.imul(Pt,ln)|0,lt=lt+Math.imul(It,$t)|0,_=_+Math.imul(It,or)|0,_=_+Math.imul(Nt,$t)|0,tt=tt+Math.imul(Nt,or)|0;var mo=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(mo>>>26)|0,mo&=67108863,lt=Math.imul(Fr,Zt),_=Math.imul(Fr,ar),_=_+Math.imul(_i,Zt)|0,tt=Math.imul(_i,ar),lt=lt+Math.imul(Br,vr)|0,_=_+Math.imul(Br,Rr)|0,_=_+Math.imul(Gr,vr)|0,tt=tt+Math.imul(Gr,Rr)|0,lt=lt+Math.imul(Dr,tr)|0,_=_+Math.imul(Dr,yr)|0,_=_+Math.imul(Qr,tr)|0,tt=tt+Math.imul(Qr,yr)|0,lt=lt+Math.imul(Lr,Nr)|0,_=_+Math.imul(Lr,zr)|0,_=_+Math.imul(wr,Nr)|0,tt=tt+Math.imul(wr,zr)|0,lt=lt+Math.imul(hr,Kr)|0,_=_+Math.imul(hr,nn)|0,_=_+Math.imul(Ar,Kr)|0,tt=tt+Math.imul(Ar,nn)|0,lt=lt+Math.imul(Bt,Zr)|0,_=_+Math.imul(Bt,on)|0,_=_+Math.imul(Jt,Zr)|0,tt=tt+Math.imul(Jt,on)|0,lt=lt+Math.imul(Kt,en)|0,_=_+Math.imul(Kt,ln)|0,_=_+Math.imul(jt,en)|0,tt=tt+Math.imul(jt,ln)|0,lt=lt+Math.imul(Gt,$t)|0,_=_+Math.imul(Gt,or)|0,_=_+Math.imul(Pt,$t)|0,tt=tt+Math.imul(Pt,or)|0,lt=lt+Math.imul(It,Vr)|0,_=_+Math.imul(It,Hr)|0,_=_+Math.imul(Nt,Vr)|0,tt=tt+Math.imul(Nt,Hr)|0;var ho=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(ho>>>26)|0,ho&=67108863,lt=Math.imul(Wt,Zt),_=Math.imul(Wt,ar),_=_+Math.imul(Lt,Zt)|0,tt=Math.imul(Lt,ar),lt=lt+Math.imul(Fr,vr)|0,_=_+Math.imul(Fr,Rr)|0,_=_+Math.imul(_i,vr)|0,tt=tt+Math.imul(_i,Rr)|0,lt=lt+Math.imul(Br,tr)|0,_=_+Math.imul(Br,yr)|0,_=_+Math.imul(Gr,tr)|0,tt=tt+Math.imul(Gr,yr)|0,lt=lt+Math.imul(Dr,Nr)|0,_=_+Math.imul(Dr,zr)|0,_=_+Math.imul(Qr,Nr)|0,tt=tt+Math.imul(Qr,zr)|0,lt=lt+Math.imul(Lr,Kr)|0,_=_+Math.imul(Lr,nn)|0,_=_+Math.imul(wr,Kr)|0,tt=tt+Math.imul(wr,nn)|0,lt=lt+Math.imul(hr,Zr)|0,_=_+Math.imul(hr,on)|0,_=_+Math.imul(Ar,Zr)|0,tt=tt+Math.imul(Ar,on)|0,lt=lt+Math.imul(Bt,en)|0,_=_+Math.imul(Bt,ln)|0,_=_+Math.imul(Jt,en)|0,tt=tt+Math.imul(Jt,ln)|0,lt=lt+Math.imul(Kt,$t)|0,_=_+Math.imul(Kt,or)|0,_=_+Math.imul(jt,$t)|0,tt=tt+Math.imul(jt,or)|0,lt=lt+Math.imul(Gt,Vr)|0,_=_+Math.imul(Gt,Hr)|0,_=_+Math.imul(Pt,Vr)|0,tt=tt+Math.imul(Pt,Hr)|0,lt=lt+Math.imul(It,Ur)|0,_=_+Math.imul(It,tn)|0,_=_+Math.imul(Nt,Ur)|0,tt=tt+Math.imul(Nt,tn)|0;var go=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(go>>>26)|0,go&=67108863,lt=Math.imul(Wt,vr),_=Math.imul(Wt,Rr),_=_+Math.imul(Lt,vr)|0,tt=Math.imul(Lt,Rr),lt=lt+Math.imul(Fr,tr)|0,_=_+Math.imul(Fr,yr)|0,_=_+Math.imul(_i,tr)|0,tt=tt+Math.imul(_i,yr)|0,lt=lt+Math.imul(Br,Nr)|0,_=_+Math.imul(Br,zr)|0,_=_+Math.imul(Gr,Nr)|0,tt=tt+Math.imul(Gr,zr)|0,lt=lt+Math.imul(Dr,Kr)|0,_=_+Math.imul(Dr,nn)|0,_=_+Math.imul(Qr,Kr)|0,tt=tt+Math.imul(Qr,nn)|0,lt=lt+Math.imul(Lr,Zr)|0,_=_+Math.imul(Lr,on)|0,_=_+Math.imul(wr,Zr)|0,tt=tt+Math.imul(wr,on)|0,lt=lt+Math.imul(hr,en)|0,_=_+Math.imul(hr,ln)|0,_=_+Math.imul(Ar,en)|0,tt=tt+Math.imul(Ar,ln)|0,lt=lt+Math.imul(Bt,$t)|0,_=_+Math.imul(Bt,or)|0,_=_+Math.imul(Jt,$t)|0,tt=tt+Math.imul(Jt,or)|0,lt=lt+Math.imul(Kt,Vr)|0,_=_+Math.imul(Kt,Hr)|0,_=_+Math.imul(jt,Vr)|0,tt=tt+Math.imul(jt,Hr)|0,lt=lt+Math.imul(Gt,Ur)|0,_=_+Math.imul(Gt,tn)|0,_=_+Math.imul(Pt,Ur)|0,tt=tt+Math.imul(Pt,tn)|0;var bo=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(bo>>>26)|0,bo&=67108863,lt=Math.imul(Wt,tr),_=Math.imul(Wt,yr),_=_+Math.imul(Lt,tr)|0,tt=Math.imul(Lt,yr),lt=lt+Math.imul(Fr,Nr)|0,_=_+Math.imul(Fr,zr)|0,_=_+Math.imul(_i,Nr)|0,tt=tt+Math.imul(_i,zr)|0,lt=lt+Math.imul(Br,Kr)|0,_=_+Math.imul(Br,nn)|0,_=_+Math.imul(Gr,Kr)|0,tt=tt+Math.imul(Gr,nn)|0,lt=lt+Math.imul(Dr,Zr)|0,_=_+Math.imul(Dr,on)|0,_=_+Math.imul(Qr,Zr)|0,tt=tt+Math.imul(Qr,on)|0,lt=lt+Math.imul(Lr,en)|0,_=_+Math.imul(Lr,ln)|0,_=_+Math.imul(wr,en)|0,tt=tt+Math.imul(wr,ln)|0,lt=lt+Math.imul(hr,$t)|0,_=_+Math.imul(hr,or)|0,_=_+Math.imul(Ar,$t)|0,tt=tt+Math.imul(Ar,or)|0,lt=lt+Math.imul(Bt,Vr)|0,_=_+Math.imul(Bt,Hr)|0,_=_+Math.imul(Jt,Vr)|0,tt=tt+Math.imul(Jt,Hr)|0,lt=lt+Math.imul(Kt,Ur)|0,_=_+Math.imul(Kt,tn)|0,_=_+Math.imul(jt,Ur)|0,tt=tt+Math.imul(jt,tn)|0;var ur=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(ur>>>26)|0,ur&=67108863,lt=Math.imul(Wt,Nr),_=Math.imul(Wt,zr),_=_+Math.imul(Lt,Nr)|0,tt=Math.imul(Lt,zr),lt=lt+Math.imul(Fr,Kr)|0,_=_+Math.imul(Fr,nn)|0,_=_+Math.imul(_i,Kr)|0,tt=tt+Math.imul(_i,nn)|0,lt=lt+Math.imul(Br,Zr)|0,_=_+Math.imul(Br,on)|0,_=_+Math.imul(Gr,Zr)|0,tt=tt+Math.imul(Gr,on)|0,lt=lt+Math.imul(Dr,en)|0,_=_+Math.imul(Dr,ln)|0,_=_+Math.imul(Qr,en)|0,tt=tt+Math.imul(Qr,ln)|0,lt=lt+Math.imul(Lr,$t)|0,_=_+Math.imul(Lr,or)|0,_=_+Math.imul(wr,$t)|0,tt=tt+Math.imul(wr,or)|0,lt=lt+Math.imul(hr,Vr)|0,_=_+Math.imul(hr,Hr)|0,_=_+Math.imul(Ar,Vr)|0,tt=tt+Math.imul(Ar,Hr)|0,lt=lt+Math.imul(Bt,Ur)|0,_=_+Math.imul(Bt,tn)|0,_=_+Math.imul(Jt,Ur)|0,tt=tt+Math.imul(Jt,tn)|0;var Cr=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,lt=Math.imul(Wt,Kr),_=Math.imul(Wt,nn),_=_+Math.imul(Lt,Kr)|0,tt=Math.imul(Lt,nn),lt=lt+Math.imul(Fr,Zr)|0,_=_+Math.imul(Fr,on)|0,_=_+Math.imul(_i,Zr)|0,tt=tt+Math.imul(_i,on)|0,lt=lt+Math.imul(Br,en)|0,_=_+Math.imul(Br,ln)|0,_=_+Math.imul(Gr,en)|0,tt=tt+Math.imul(Gr,ln)|0,lt=lt+Math.imul(Dr,$t)|0,_=_+Math.imul(Dr,or)|0,_=_+Math.imul(Qr,$t)|0,tt=tt+Math.imul(Qr,or)|0,lt=lt+Math.imul(Lr,Vr)|0,_=_+Math.imul(Lr,Hr)|0,_=_+Math.imul(wr,Vr)|0,tt=tt+Math.imul(wr,Hr)|0,lt=lt+Math.imul(hr,Ur)|0,_=_+Math.imul(hr,tn)|0,_=_+Math.imul(Ar,Ur)|0,tt=tt+Math.imul(Ar,tn)|0;var $r=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+($r>>>26)|0,$r&=67108863,lt=Math.imul(Wt,Zr),_=Math.imul(Wt,on),_=_+Math.imul(Lt,Zr)|0,tt=Math.imul(Lt,on),lt=lt+Math.imul(Fr,en)|0,_=_+Math.imul(Fr,ln)|0,_=_+Math.imul(_i,en)|0,tt=tt+Math.imul(_i,ln)|0,lt=lt+Math.imul(Br,$t)|0,_=_+Math.imul(Br,or)|0,_=_+Math.imul(Gr,$t)|0,tt=tt+Math.imul(Gr,or)|0,lt=lt+Math.imul(Dr,Vr)|0,_=_+Math.imul(Dr,Hr)|0,_=_+Math.imul(Qr,Vr)|0,tt=tt+Math.imul(Qr,Hr)|0,lt=lt+Math.imul(Lr,Ur)|0,_=_+Math.imul(Lr,tn)|0,_=_+Math.imul(wr,Ur)|0,tt=tt+Math.imul(wr,tn)|0;var dn=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(dn>>>26)|0,dn&=67108863,lt=Math.imul(Wt,en),_=Math.imul(Wt,ln),_=_+Math.imul(Lt,en)|0,tt=Math.imul(Lt,ln),lt=lt+Math.imul(Fr,$t)|0,_=_+Math.imul(Fr,or)|0,_=_+Math.imul(_i,$t)|0,tt=tt+Math.imul(_i,or)|0,lt=lt+Math.imul(Br,Vr)|0,_=_+Math.imul(Br,Hr)|0,_=_+Math.imul(Gr,Vr)|0,tt=tt+Math.imul(Gr,Hr)|0,lt=lt+Math.imul(Dr,Ur)|0,_=_+Math.imul(Dr,tn)|0,_=_+Math.imul(Qr,Ur)|0,tt=tt+Math.imul(Qr,tn)|0;var rn=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(rn>>>26)|0,rn&=67108863,lt=Math.imul(Wt,$t),_=Math.imul(Wt,or),_=_+Math.imul(Lt,$t)|0,tt=Math.imul(Lt,or),lt=lt+Math.imul(Fr,Vr)|0,_=_+Math.imul(Fr,Hr)|0,_=_+Math.imul(_i,Vr)|0,tt=tt+Math.imul(_i,Hr)|0,lt=lt+Math.imul(Br,Ur)|0,_=_+Math.imul(Br,tn)|0,_=_+Math.imul(Gr,Ur)|0,tt=tt+Math.imul(Gr,tn)|0;var Sn=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,lt=Math.imul(Wt,Vr),_=Math.imul(Wt,Hr),_=_+Math.imul(Lt,Vr)|0,tt=Math.imul(Lt,Hr),lt=lt+Math.imul(Fr,Ur)|0,_=_+Math.imul(Fr,tn)|0,_=_+Math.imul(_i,Ur)|0,tt=tt+Math.imul(_i,tn)|0;var In=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(In>>>26)|0,In&=67108863,lt=Math.imul(Wt,Ur),_=Math.imul(Wt,tn),_=_+Math.imul(Lt,Ur)|0,tt=Math.imul(Lt,tn);var Cn=(mt+lt|0)+((_&8191)<<13)|0;return mt=(tt+(_>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,pt[0]=jn,pt[1]=Un,pt[2]=ao,pt[3]=co,pt[4]=ro,pt[5]=vo,pt[6]=oo,pt[7]=mo,pt[8]=ho,pt[9]=go,pt[10]=bo,pt[11]=ur,pt[12]=Cr,pt[13]=$r,pt[14]=dn,pt[15]=rn,pt[16]=Sn,pt[17]=In,pt[18]=Cn,mt!==0&&(pt[19]=mt,$.length++),$};Math.imul||(rt=vt);function bt(nt,s,b){b.negative=s.negative^nt.negative,b.length=nt.length+s.length;for(var $=0,_e=0,it=0;it<b.length-1;it++){var pt=_e;_e=0;for(var mt=$&67108863,lt=Math.min(it,s.length-1),_=Math.max(0,it-nt.length+1);_<=lt;_++){var tt=it-_,Tt=nt.words[tt]|0,It=s.words[_]|0,Nt=Tt*It,Ut=Nt&67108863;pt=pt+(Nt/67108864|0)|0,Ut=Ut+mt|0,mt=Ut&67108863,pt=pt+(Ut>>>26)|0,_e+=pt>>>26,pt&=67108863}b.words[it]=mt,$=pt,pt=_e}return $!==0?b.words[it]=$:b.length--,b.strip()}function ht(nt,s,b){var $=new wt;return $.mulp(nt,s,b)}d.prototype.mulTo=function(s,b){var $,_e=this.length+s.length;return this.length===10&&s.length===10?$=rt(this,s,b):_e<63?$=vt(this,s,b):_e<1024?$=bt(this,s,b):$=ht(this,s,b),$};function wt(nt,s){this.x=nt,this.y=s}wt.prototype.makeRBT=function(s){for(var b=new Array(s),$=d.prototype._countBits(s)-1,_e=0;_e<s;_e++)b[_e]=this.revBin(_e,$,s);return b},wt.prototype.revBin=function(s,b,$){if(s===0||s===$-1)return s;for(var _e=0,it=0;it<b;it++)_e|=(s&1)<<b-it-1,s>>=1;return _e},wt.prototype.permute=function(s,b,$,_e,it,pt){for(var mt=0;mt<pt;mt++)_e[mt]=b[s[mt]],it[mt]=$[s[mt]]},wt.prototype.transform=function(s,b,$,_e,it,pt){this.permute(pt,s,b,$,_e,it);for(var mt=1;mt<it;mt<<=1)for(var lt=mt<<1,_=Math.cos(2*Math.PI/lt),tt=Math.sin(2*Math.PI/lt),Tt=0;Tt<it;Tt+=lt)for(var It=_,Nt=tt,Ut=0;Ut<mt;Ut++){var Gt=$[Tt+Ut],Pt=_e[Tt+Ut],qt=$[Tt+Ut+mt],Kt=_e[Tt+Ut+mt],jt=It*qt-Nt*Kt;Kt=It*Kt+Nt*qt,qt=jt,$[Tt+Ut]=Gt+qt,_e[Tt+Ut]=Pt+Kt,$[Tt+Ut+mt]=Gt-qt,_e[Tt+Ut+mt]=Pt-Kt,Ut!==lt&&(jt=_*It-tt*Nt,Nt=_*Nt+tt*It,It=jt)}},wt.prototype.guessLen13b=function(s,b){var $=Math.max(b,s)|1,_e=$&1,it=0;for($=$/2|0;$;$=$>>>1)it++;return 1<<it+1+_e},wt.prototype.conjugate=function(s,b,$){if(!($<=1))for(var _e=0;_e<$/2;_e++){var it=s[_e];s[_e]=s[$-_e-1],s[$-_e-1]=it,it=b[_e],b[_e]=-b[$-_e-1],b[$-_e-1]=-it}},wt.prototype.normalize13b=function(s,b){for(var $=0,_e=0;_e<b/2;_e++){var it=Math.round(s[2*_e+1]/b)*8192+Math.round(s[2*_e]/b)+$;s[_e]=it&67108863,it<67108864?$=0:$=it/67108864|0}return s},wt.prototype.convert13b=function(s,b,$,_e){for(var it=0,pt=0;pt<b;pt++)it=it+(s[pt]|0),$[2*pt]=it&8191,it=it>>>13,$[2*pt+1]=it&8191,it=it>>>13;for(pt=2*b;pt<_e;++pt)$[pt]=0;c(it===0),c((it&-8192)===0)},wt.prototype.stub=function(s){for(var b=new Array(s),$=0;$<s;$++)b[$]=0;return b},wt.prototype.mulp=function(s,b,$){var _e=2*this.guessLen13b(s.length,b.length),it=this.makeRBT(_e),pt=this.stub(_e),mt=new Array(_e),lt=new Array(_e),_=new Array(_e),tt=new Array(_e),Tt=new Array(_e),It=new Array(_e),Nt=$.words;Nt.length=_e,this.convert13b(s.words,s.length,mt,_e),this.convert13b(b.words,b.length,tt,_e),this.transform(mt,pt,lt,_,_e,it),this.transform(tt,pt,Tt,It,_e,it);for(var Ut=0;Ut<_e;Ut++){var Gt=lt[Ut]*Tt[Ut]-_[Ut]*It[Ut];_[Ut]=lt[Ut]*It[Ut]+_[Ut]*Tt[Ut],lt[Ut]=Gt}return this.conjugate(lt,_,_e),this.transform(lt,_,Nt,pt,_e,it),this.conjugate(Nt,pt,_e),this.normalize13b(Nt,_e),$.negative=s.negative^b.negative,$.length=s.length+b.length,$.strip()},d.prototype.mul=function(s){var b=new d(null);return b.words=new Array(this.length+s.length),this.mulTo(s,b)},d.prototype.mulf=function(s){var b=new d(null);return b.words=new Array(this.length+s.length),ht(this,s,b)},d.prototype.imul=function(s){return this.clone().mulTo(s,this)},d.prototype.imuln=function(s){c(typeof s=="number"),c(s<67108864);for(var b=0,$=0;$<this.length;$++){var _e=(this.words[$]|0)*s,it=(_e&67108863)+(b&67108863);b>>=26,b+=_e/67108864|0,b+=it>>>26,this.words[$]=it&67108863}return b!==0&&(this.words[$]=b,this.length++),this},d.prototype.muln=function(s){return this.clone().imuln(s)},d.prototype.sqr=function(){return this.mul(this)},d.prototype.isqr=function(){return this.imul(this.clone())},d.prototype.pow=function(s){var b=yt(s);if(b.length===0)return new d(1);for(var $=this,_e=0;_e<b.length&&b[_e]===0;_e++,$=$.sqr());if(++_e<b.length)for(var it=$.sqr();_e<b.length;_e++,it=it.sqr())b[_e]!==0&&($=$.mul(it));return $},d.prototype.iushln=function(s){c(typeof s=="number"&&s>=0);var b=s%26,$=(s-b)/26,_e=67108863>>>26-b<<26-b,it;if(b!==0){var pt=0;for(it=0;it<this.length;it++){var mt=this.words[it]&_e,lt=(this.words[it]|0)-mt<<b;this.words[it]=lt|pt,pt=mt>>>26-b}pt&&(this.words[it]=pt,this.length++)}if($!==0){for(it=this.length-1;it>=0;it--)this.words[it+$]=this.words[it];for(it=0;it<$;it++)this.words[it]=0;this.length+=$}return this.strip()},d.prototype.ishln=function(s){return c(this.negative===0),this.iushln(s)},d.prototype.iushrn=function(s,b,$){c(typeof s=="number"&&s>=0);var _e;b?_e=(b-b%26)/26:_e=0;var it=s%26,pt=Math.min((s-it)/26,this.length),mt=67108863^67108863>>>it<<it,lt=$;if(_e-=pt,_e=Math.max(0,_e),lt){for(var _=0;_<pt;_++)lt.words[_]=this.words[_];lt.length=pt}if(pt!==0)if(this.length>pt)for(this.length-=pt,_=0;_<this.length;_++)this.words[_]=this.words[_+pt];else this.words[0]=0,this.length=1;var tt=0;for(_=this.length-1;_>=0&&(tt!==0||_>=_e);_--){var Tt=this.words[_]|0;this.words[_]=tt<<26-it|Tt>>>it,tt=Tt&mt}return lt&&tt!==0&&(lt.words[lt.length++]=tt),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},d.prototype.ishrn=function(s,b,$){return c(this.negative===0),this.iushrn(s,b,$)},d.prototype.shln=function(s){return this.clone().ishln(s)},d.prototype.ushln=function(s){return this.clone().iushln(s)},d.prototype.shrn=function(s){return this.clone().ishrn(s)},d.prototype.ushrn=function(s){return this.clone().iushrn(s)},d.prototype.testn=function(s){c(typeof s=="number"&&s>=0);var b=s%26,$=(s-b)/26,_e=1<<b;if(this.length<=$)return!1;var it=this.words[$];return!!(it&_e)},d.prototype.imaskn=function(s){c(typeof s=="number"&&s>=0);var b=s%26,$=(s-b)/26;if(c(this.negative===0,"imaskn works only with positive numbers"),this.length<=$)return this;if(b!==0&&$++,this.length=Math.min($,this.length),b!==0){var _e=67108863^67108863>>>b<<b;this.words[this.length-1]&=_e}return this.strip()},d.prototype.maskn=function(s){return this.clone().imaskn(s)},d.prototype.iaddn=function(s){return c(typeof s=="number"),c(s<67108864),s<0?this.isubn(-s):this.negative!==0?this.length===1&&(this.words[0]|0)<s?(this.words[0]=s-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(s),this.negative=1,this):this._iaddn(s)},d.prototype._iaddn=function(s){this.words[0]+=s;for(var b=0;b<this.length&&this.words[b]>=67108864;b++)this.words[b]-=67108864,b===this.length-1?this.words[b+1]=1:this.words[b+1]++;return this.length=Math.max(this.length,b+1),this},d.prototype.isubn=function(s){if(c(typeof s=="number"),c(s<67108864),s<0)return this.iaddn(-s);if(this.negative!==0)return this.negative=0,this.iaddn(s),this.negative=1,this;if(this.words[0]-=s,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var b=0;b<this.length&&this.words[b]<0;b++)this.words[b]+=67108864,this.words[b+1]-=1;return this.strip()},d.prototype.addn=function(s){return this.clone().iaddn(s)},d.prototype.subn=function(s){return this.clone().isubn(s)},d.prototype.iabs=function(){return this.negative=0,this},d.prototype.abs=function(){return this.clone().iabs()},d.prototype._ishlnsubmul=function(s,b,$){var _e=s.length+$,it;this._expand(_e);var pt,mt=0;for(it=0;it<s.length;it++){pt=(this.words[it+$]|0)+mt;var lt=(s.words[it]|0)*b;pt-=lt&67108863,mt=(pt>>26)-(lt/67108864|0),this.words[it+$]=pt&67108863}for(;it<this.length-$;it++)pt=(this.words[it+$]|0)+mt,mt=pt>>26,this.words[it+$]=pt&67108863;if(mt===0)return this.strip();for(c(mt===-1),mt=0,it=0;it<this.length;it++)pt=-(this.words[it]|0)+mt,mt=pt>>26,this.words[it]=pt&67108863;return this.negative=1,this.strip()},d.prototype._wordDiv=function(s,b){var $=this.length-s.length,_e=this.clone(),it=s,pt=it.words[it.length-1]|0,mt=this._countBits(pt);$=26-mt,$!==0&&(it=it.ushln($),_e.iushln($),pt=it.words[it.length-1]|0);var lt=_e.length-it.length,_;if(b!=="mod"){_=new d(null),_.length=lt+1,_.words=new Array(_.length);for(var tt=0;tt<_.length;tt++)_.words[tt]=0}var Tt=_e.clone()._ishlnsubmul(it,1,lt);Tt.negative===0&&(_e=Tt,_&&(_.words[lt]=1));for(var It=lt-1;It>=0;It--){var Nt=(_e.words[it.length+It]|0)*67108864+(_e.words[it.length+It-1]|0);for(Nt=Math.min(Nt/pt|0,67108863),_e._ishlnsubmul(it,Nt,It);_e.negative!==0;)Nt--,_e.negative=0,_e._ishlnsubmul(it,1,It),_e.isZero()||(_e.negative^=1);_&&(_.words[It]=Nt)}return _&&_.strip(),_e.strip(),b!=="div"&&$!==0&&_e.iushrn($),{div:_||null,mod:_e}},d.prototype.divmod=function(s,b,$){if(c(!s.isZero()),this.isZero())return{div:new d(0),mod:new d(0)};var _e,it,pt;return this.negative!==0&&s.negative===0?(pt=this.neg().divmod(s,b),b!=="mod"&&(_e=pt.div.neg()),b!=="div"&&(it=pt.mod.neg(),$&&it.negative!==0&&it.iadd(s)),{div:_e,mod:it}):this.negative===0&&s.negative!==0?(pt=this.divmod(s.neg(),b),b!=="mod"&&(_e=pt.div.neg()),{div:_e,mod:pt.mod}):this.negative&s.negative?(pt=this.neg().divmod(s.neg(),b),b!=="div"&&(it=pt.mod.neg(),$&&it.negative!==0&&it.isub(s)),{div:pt.div,mod:it}):s.length>this.length||this.cmp(s)<0?{div:new d(0),mod:this}:s.length===1?b==="div"?{div:this.divn(s.words[0]),mod:null}:b==="mod"?{div:null,mod:new d(this.modn(s.words[0]))}:{div:this.divn(s.words[0]),mod:new d(this.modn(s.words[0]))}:this._wordDiv(s,b)},d.prototype.div=function(s){return this.divmod(s,"div",!1).div},d.prototype.mod=function(s){return this.divmod(s,"mod",!1).mod},d.prototype.umod=function(s){return this.divmod(s,"mod",!0).mod},d.prototype.divRound=function(s){var b=this.divmod(s);if(b.mod.isZero())return b.div;var $=b.div.negative!==0?b.mod.isub(s):b.mod,_e=s.ushrn(1),it=s.andln(1),pt=$.cmp(_e);return pt<0||it===1&&pt===0?b.div:b.div.negative!==0?b.div.isubn(1):b.div.iaddn(1)},d.prototype.modn=function(s){c(s<=67108863);for(var b=(1<<26)%s,$=0,_e=this.length-1;_e>=0;_e--)$=(b*$+(this.words[_e]|0))%s;return $},d.prototype.idivn=function(s){c(s<=67108863);for(var b=0,$=this.length-1;$>=0;$--){var _e=(this.words[$]|0)+b*67108864;this.words[$]=_e/s|0,b=_e%s}return this.strip()},d.prototype.divn=function(s){return this.clone().idivn(s)},d.prototype.egcd=function(s){c(s.negative===0),c(!s.isZero());var b=this,$=s.clone();b.negative!==0?b=b.umod(s):b=b.clone();for(var _e=new d(1),it=new d(0),pt=new d(0),mt=new d(1),lt=0;b.isEven()&&$.isEven();)b.iushrn(1),$.iushrn(1),++lt;for(var _=$.clone(),tt=b.clone();!b.isZero();){for(var Tt=0,It=1;!(b.words[0]&It)&&Tt<26;++Tt,It<<=1);if(Tt>0)for(b.iushrn(Tt);Tt-- >0;)(_e.isOdd()||it.isOdd())&&(_e.iadd(_),it.isub(tt)),_e.iushrn(1),it.iushrn(1);for(var Nt=0,Ut=1;!($.words[0]&Ut)&&Nt<26;++Nt,Ut<<=1);if(Nt>0)for($.iushrn(Nt);Nt-- >0;)(pt.isOdd()||mt.isOdd())&&(pt.iadd(_),mt.isub(tt)),pt.iushrn(1),mt.iushrn(1);b.cmp($)>=0?(b.isub($),_e.isub(pt),it.isub(mt)):($.isub(b),pt.isub(_e),mt.isub(it))}return{a:pt,b:mt,gcd:$.iushln(lt)}},d.prototype._invmp=function(s){c(s.negative===0),c(!s.isZero());var b=this,$=s.clone();b.negative!==0?b=b.umod(s):b=b.clone();for(var _e=new d(1),it=new d(0),pt=$.clone();b.cmpn(1)>0&&$.cmpn(1)>0;){for(var mt=0,lt=1;!(b.words[0]&lt)&&mt<26;++mt,lt<<=1);if(mt>0)for(b.iushrn(mt);mt-- >0;)_e.isOdd()&&_e.iadd(pt),_e.iushrn(1);for(var _=0,tt=1;!($.words[0]&tt)&&_<26;++_,tt<<=1);if(_>0)for($.iushrn(_);_-- >0;)it.isOdd()&&it.iadd(pt),it.iushrn(1);b.cmp($)>=0?(b.isub($),_e.isub(it)):($.isub(b),it.isub(_e))}var Tt;return b.cmpn(1)===0?Tt=_e:Tt=it,Tt.cmpn(0)<0&&Tt.iadd(s),Tt},d.prototype.gcd=function(s){if(this.isZero())return s.abs();if(s.isZero())return this.abs();var b=this.clone(),$=s.clone();b.negative=0,$.negative=0;for(var _e=0;b.isEven()&&$.isEven();_e++)b.iushrn(1),$.iushrn(1);do{for(;b.isEven();)b.iushrn(1);for(;$.isEven();)$.iushrn(1);var it=b.cmp($);if(it<0){var pt=b;b=$,$=pt}else if(it===0||$.cmpn(1)===0)break;b.isub($)}while(!0);return $.iushln(_e)},d.prototype.invm=function(s){return this.egcd(s).a.umod(s)},d.prototype.isEven=function(){return(this.words[0]&1)===0},d.prototype.isOdd=function(){return(this.words[0]&1)===1},d.prototype.andln=function(s){return this.words[0]&s},d.prototype.bincn=function(s){c(typeof s=="number");var b=s%26,$=(s-b)/26,_e=1<<b;if(this.length<=$)return this._expand($+1),this.words[$]|=_e,this;for(var it=_e,pt=$;it!==0&&pt<this.length;pt++){var mt=this.words[pt]|0;mt+=it,it=mt>>>26,mt&=67108863,this.words[pt]=mt}return it!==0&&(this.words[pt]=it,this.length++),this},d.prototype.isZero=function(){return this.length===1&&this.words[0]===0},d.prototype.cmpn=function(s){var b=s<0;if(this.negative!==0&&!b)return-1;if(this.negative===0&&b)return 1;this.strip();var $;if(this.length>1)$=1;else{b&&(s=-s),c(s<=67108863,"Number is too big");var _e=this.words[0]|0;$=_e===s?0:_e<s?-1:1}return this.negative!==0?-$|0:$},d.prototype.cmp=function(s){if(this.negative!==0&&s.negative===0)return-1;if(this.negative===0&&s.negative!==0)return 1;var b=this.ucmp(s);return this.negative!==0?-b|0:b},d.prototype.ucmp=function(s){if(this.length>s.length)return 1;if(this.length<s.length)return-1;for(var b=0,$=this.length-1;$>=0;$--){var _e=this.words[$]|0,it=s.words[$]|0;if(_e!==it){_e<it?b=-1:_e>it&&(b=1);break}}return b},d.prototype.gtn=function(s){return this.cmpn(s)===1},d.prototype.gt=function(s){return this.cmp(s)===1},d.prototype.gten=function(s){return this.cmpn(s)>=0},d.prototype.gte=function(s){return this.cmp(s)>=0},d.prototype.ltn=function(s){return this.cmpn(s)===-1},d.prototype.lt=function(s){return this.cmp(s)===-1},d.prototype.lten=function(s){return this.cmpn(s)<=0},d.prototype.lte=function(s){return this.cmp(s)<=0},d.prototype.eqn=function(s){return this.cmpn(s)===0},d.prototype.eq=function(s){return this.cmp(s)===0},d.red=function(s){return new _t(s)},d.prototype.toRed=function(s){return c(!this.red,"Already a number in reduction context"),c(this.negative===0,"red works only with positives"),s.convertTo(this)._forceRed(s)},d.prototype.fromRed=function(){return c(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},d.prototype._forceRed=function(s){return this.red=s,this},d.prototype.forceRed=function(s){return c(!this.red,"Already a number in reduction context"),this._forceRed(s)},d.prototype.redAdd=function(s){return c(this.red,"redAdd works only with red numbers"),this.red.add(this,s)},d.prototype.redIAdd=function(s){return c(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,s)},d.prototype.redSub=function(s){return c(this.red,"redSub works only with red numbers"),this.red.sub(this,s)},d.prototype.redISub=function(s){return c(this.red,"redISub works only with red numbers"),this.red.isub(this,s)},d.prototype.redShl=function(s){return c(this.red,"redShl works only with red numbers"),this.red.shl(this,s)},d.prototype.redMul=function(s){return c(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.mul(this,s)},d.prototype.redIMul=function(s){return c(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.imul(this,s)},d.prototype.redSqr=function(){return c(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},d.prototype.redISqr=function(){return c(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},d.prototype.redSqrt=function(){return c(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},d.prototype.redInvm=function(){return c(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},d.prototype.redNeg=function(){return c(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},d.prototype.redPow=function(s){return c(this.red&&!s.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,s)};var At={k256:null,p224:null,p192:null,p25519:null};function Ct(nt,s){this.name=nt,this.p=new d(s,16),this.n=this.p.bitLength(),this.k=new d(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Ct.prototype._tmp=function(){var s=new d(null);return s.words=new Array(Math.ceil(this.n/13)),s},Ct.prototype.ireduce=function(s){var b=s,$;do this.split(b,this.tmp),b=this.imulK(b),b=b.iadd(this.tmp),$=b.bitLength();while($>this.n);var _e=$<this.n?-1:b.ucmp(this.p);return _e===0?(b.words[0]=0,b.length=1):_e>0?b.isub(this.p):b.strip!==void 0?b.strip():b._strip(),b},Ct.prototype.split=function(s,b){s.iushrn(this.n,0,b)},Ct.prototype.imulK=function(s){return s.imul(this.k)};function dt(){Ct.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}j(dt,Ct),dt.prototype.split=function(s,b){for(var $=4194303,_e=Math.min(s.length,9),it=0;it<_e;it++)b.words[it]=s.words[it];if(b.length=_e,s.length<=9){s.words[0]=0,s.length=1;return}var pt=s.words[9];for(b.words[b.length++]=pt&$,it=10;it<s.length;it++){var mt=s.words[it]|0;s.words[it-10]=(mt&$)<<4|pt>>>22,pt=mt}pt>>>=22,s.words[it-10]=pt,pt===0&&s.length>10?s.length-=10:s.length-=9},dt.prototype.imulK=function(s){s.words[s.length]=0,s.words[s.length+1]=0,s.length+=2;for(var b=0,$=0;$<s.length;$++){var _e=s.words[$]|0;b+=_e*977,s.words[$]=b&67108863,b=_e*64+(b/67108864|0)}return s.words[s.length-1]===0&&(s.length--,s.words[s.length-1]===0&&s.length--),s};function Et(){Ct.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}j(Et,Ct);function Rt(){Ct.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}j(Rt,Ct);function Mt(){Ct.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}j(Mt,Ct),Mt.prototype.imulK=function(s){for(var b=0,$=0;$<s.length;$++){var _e=(s.words[$]|0)*19+b,it=_e&67108863;_e>>>=26,s.words[$]=it,b=_e}return b!==0&&(s.words[s.length++]=b),s},d._prime=function(s){if(At[s])return At[s];var b;if(s==="k256")b=new dt;else if(s==="p224")b=new Et;else if(s==="p192")b=new Rt;else if(s==="p25519")b=new Mt;else throw new Error("Unknown prime "+s);return At[s]=b,b};function _t(nt){if(typeof nt=="string"){var s=d._prime(nt);this.m=s.p,this.prime=s}else c(nt.gtn(1),"modulus must be greater than 1"),this.m=nt,this.prime=null}_t.prototype._verify1=function(s){c(s.negative===0,"red works only with positives"),c(s.red,"red works only with red numbers")},_t.prototype._verify2=function(s,b){c((s.negative|b.negative)===0,"red works only with positives"),c(s.red&&s.red===b.red,"red works only with red numbers")},_t.prototype.imod=function(s){return this.prime?this.prime.ireduce(s)._forceRed(this):s.umod(this.m)._forceRed(this)},_t.prototype.neg=function(s){return s.isZero()?s.clone():this.m.sub(s)._forceRed(this)},_t.prototype.add=function(s,b){this._verify2(s,b);var $=s.add(b);return $.cmp(this.m)>=0&&$.isub(this.m),$._forceRed(this)},_t.prototype.iadd=function(s,b){this._verify2(s,b);var $=s.iadd(b);return $.cmp(this.m)>=0&&$.isub(this.m),$},_t.prototype.sub=function(s,b){this._verify2(s,b);var $=s.sub(b);return $.cmpn(0)<0&&$.iadd(this.m),$._forceRed(this)},_t.prototype.isub=function(s,b){this._verify2(s,b);var $=s.isub(b);return $.cmpn(0)<0&&$.iadd(this.m),$},_t.prototype.shl=function(s,b){return this._verify1(s),this.imod(s.ushln(b))},_t.prototype.imul=function(s,b){return this._verify2(s,b),this.imod(s.imul(b))},_t.prototype.mul=function(s,b){return this._verify2(s,b),this.imod(s.mul(b))},_t.prototype.isqr=function(s){return this.imul(s,s.clone())},_t.prototype.sqr=function(s){return this.mul(s,s)},_t.prototype.sqrt=function(s){if(s.isZero())return s.clone();var b=this.m.andln(3);if(c(b%2===1),b===3){var $=this.m.add(new d(1)).iushrn(2);return this.pow(s,$)}for(var _e=this.m.subn(1),it=0;!_e.isZero()&&_e.andln(1)===0;)it++,_e.iushrn(1);c(!_e.isZero());var pt=new d(1).toRed(this),mt=pt.redNeg(),lt=this.m.subn(1).iushrn(1),_=this.m.bitLength();for(_=new d(2*_*_).toRed(this);this.pow(_,lt).cmp(mt)!==0;)_.redIAdd(mt);for(var tt=this.pow(_,_e),Tt=this.pow(s,_e.addn(1).iushrn(1)),It=this.pow(s,_e),Nt=it;It.cmp(pt)!==0;){for(var Ut=It,Gt=0;Ut.cmp(pt)!==0;Gt++)Ut=Ut.redSqr();c(Gt<Nt);var Pt=this.pow(tt,new d(1).iushln(Nt-Gt-1));Tt=Tt.redMul(Pt),tt=Pt.redSqr(),It=It.redMul(tt),Nt=Gt}return Tt},_t.prototype.invm=function(s){var b=s._invmp(this.m);return b.negative!==0?(b.negative=0,this.imod(b).redNeg()):this.imod(b)},_t.prototype.pow=function(s,b){if(b.isZero())return new d(1).toRed(this);if(b.cmpn(1)===0)return s.clone();var $=4,_e=new Array(1<<$);_e[0]=new d(1).toRed(this),_e[1]=s;for(var it=2;it<_e.length;it++)_e[it]=this.mul(_e[it-1],s);var pt=_e[0],mt=0,lt=0,_=b.bitLength()%26;for(_===0&&(_=26),it=b.length-1;it>=0;it--){for(var tt=b.words[it],Tt=_-1;Tt>=0;Tt--){var It=tt>>Tt&1;if(pt!==_e[0]&&(pt=this.sqr(pt)),It===0&&mt===0){lt=0;continue}mt<<=1,mt|=It,lt++,!(lt!==$&&(it!==0||Tt!==0))&&(pt=this.mul(pt,_e[mt]),lt=0,mt=0)}_=26}return pt},_t.prototype.convertTo=function(s){var b=s.umod(this.m);return b===s?b.clone():b},_t.prototype.convertFrom=function(s){var b=s.clone();return b.red=null,b},d.mont=function(s){return new kt(s)};function kt(nt){_t.call(this,nt),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new d(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}j(kt,_t),kt.prototype.convertTo=function(s){return this.imod(s.ushln(this.shift))},kt.prototype.convertFrom=function(s){var b=this.imod(s.mul(this.rinv));return b.red=null,b},kt.prototype.imul=function(s,b){if(s.isZero()||b.isZero())return s.words[0]=0,s.length=1,s;var $=s.imul(b),_e=$.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),it=$.isub(_e).iushrn(this.shift),pt=it;return it.cmp(this.m)>=0?pt=it.isub(this.m):it.cmpn(0)<0&&(pt=it.iadd(this.m)),pt._forceRed(this)},kt.prototype.mul=function(s,b){if(s.isZero()||b.isZero())return new d(0)._forceRed(this);var $=s.mul(b),_e=$.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),it=$.isub(_e).iushrn(this.shift),pt=it;return it.cmp(this.m)>=0?pt=it.isub(this.m):it.cmpn(0)<0&&(pt=it.iadd(this.m)),pt._forceRed(this)},kt.prototype.invm=function(s){var b=this.imod(s._invmp(this.m).mul(this.r2));return b._forceRed(this)}})(o,commonjsGlobal)}(bn$3)),bn$3.exports}var utils$2={},hasRequiredUtils$3;function requireUtils$3(){return hasRequiredUtils$3||(hasRequiredUtils$3=1,function(o){var e=o;function a(d,et){if(Array.isArray(d))return d.slice();if(!d)return[];var at=[];if(typeof d!="string"){for(var st=0;st<d.length;st++)at[st]=d[st]|0;return at}if(et==="hex"){d=d.replace(/[^a-z0-9]+/ig,""),d.length%2!==0&&(d="0"+d);for(var st=0;st<d.length;st+=2)at.push(parseInt(d[st]+d[st+1],16))}else for(var st=0;st<d.length;st++){var ct=d.charCodeAt(st),ot=ct>>8,gt=ct&255;ot?at.push(ot,gt):at.push(gt)}return at}e.toArray=a;function c(d){return d.length===1?"0"+d:d}e.zero2=c;function j(d){for(var et="",at=0;at<d.length;at++)et+=c(d[at].toString(16));return et}e.toHex=j,e.encode=function(et,at){return at==="hex"?j(et):et}}(utils$2)),utils$2}var hasRequiredUtils$2;function requireUtils$2(){return hasRequiredUtils$2||(hasRequiredUtils$2=1,function(o){var e=o,a=requireBn$3(),c=requireMinimalisticAssert(),j=requireUtils$3();e.assert=c,e.toArray=j.toArray,e.zero2=j.zero2,e.toHex=j.toHex,e.encode=j.encode;function d(ot,gt,ft){var yt=new Array(Math.max(ot.bitLength(),ft)+1),vt;for(vt=0;vt<yt.length;vt+=1)yt[vt]=0;var rt=1<<gt+1,bt=ot.clone();for(vt=0;vt<yt.length;vt++){var ht,wt=bt.andln(rt-1);bt.isOdd()?(wt>(rt>>1)-1?ht=(rt>>1)-wt:ht=wt,bt.isubn(ht)):ht=0,yt[vt]=ht,bt.iushrn(1)}return yt}e.getNAF=d;function et(ot,gt){var ft=[[],[]];ot=ot.clone(),gt=gt.clone();for(var yt=0,vt=0,rt;ot.cmpn(-yt)>0||gt.cmpn(-vt)>0;){var bt=ot.andln(3)+yt&3,ht=gt.andln(3)+vt&3;bt===3&&(bt=-1),ht===3&&(ht=-1);var wt;bt&1?(rt=ot.andln(7)+yt&7,(rt===3||rt===5)&&ht===2?wt=-bt:wt=bt):wt=0,ft[0].push(wt);var At;ht&1?(rt=gt.andln(7)+vt&7,(rt===3||rt===5)&&bt===2?At=-ht:At=ht):At=0,ft[1].push(At),2*yt===wt+1&&(yt=1-yt),2*vt===At+1&&(vt=1-vt),ot.iushrn(1),gt.iushrn(1)}return ft}e.getJSF=et;function at(ot,gt,ft){var yt="_"+gt;ot.prototype[gt]=function(){return this[yt]!==void 0?this[yt]:this[yt]=ft.call(this)}}e.cachedProperty=at;function st(ot){return typeof ot=="string"?e.toArray(ot,"hex"):ot}e.parseBytes=st;function ct(ot){return new a(ot,"hex","le")}e.intFromLE=ct}(utils$3)),utils$3}var curve={},base$1,hasRequiredBase$1;function requireBase$1(){if(hasRequiredBase$1)return base$1;hasRequiredBase$1=1;var o=requireBn$3(),e=requireUtils$2(),a=e.getNAF,c=e.getJSF,j=e.assert;function d(at,st){this.type=at,this.p=new o(st.p,16),this.red=st.prime?o.red(st.prime):o.mont(this.p),this.zero=new o(0).toRed(this.red),this.one=new o(1).toRed(this.red),this.two=new o(2).toRed(this.red),this.n=st.n&&new o(st.n,16),this.g=st.g&&this.pointFromJSON(st.g,st.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var ct=this.n&&this.p.div(this.n);!ct||ct.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}base$1=d,d.prototype.point=function(){throw new Error("Not implemented")},d.prototype.validate=function(){throw new Error("Not implemented")},d.prototype._fixedNafMul=function(st,ct){j(st.precomputed);var ot=st._getDoubles(),gt=a(ct,1,this._bitLength),ft=(1<<ot.step+1)-(ot.step%2===0?2:1);ft/=3;var yt=[],vt,rt;for(vt=0;vt<gt.length;vt+=ot.step){rt=0;for(var bt=vt+ot.step-1;bt>=vt;bt--)rt=(rt<<1)+gt[bt];yt.push(rt)}for(var ht=this.jpoint(null,null,null),wt=this.jpoint(null,null,null),At=ft;At>0;At--){for(vt=0;vt<yt.length;vt++)rt=yt[vt],rt===At?wt=wt.mixedAdd(ot.points[vt]):rt===-At&&(wt=wt.mixedAdd(ot.points[vt].neg()));ht=ht.add(wt)}return ht.toP()},d.prototype._wnafMul=function(st,ct){var ot=4,gt=st._getNAFPoints(ot);ot=gt.wnd;for(var ft=gt.points,yt=a(ct,ot,this._bitLength),vt=this.jpoint(null,null,null),rt=yt.length-1;rt>=0;rt--){for(var bt=0;rt>=0&&yt[rt]===0;rt--)bt++;if(rt>=0&&bt++,vt=vt.dblp(bt),rt<0)break;var ht=yt[rt];j(ht!==0),st.type==="affine"?ht>0?vt=vt.mixedAdd(ft[ht-1>>1]):vt=vt.mixedAdd(ft[-ht-1>>1].neg()):ht>0?vt=vt.add(ft[ht-1>>1]):vt=vt.add(ft[-ht-1>>1].neg())}return st.type==="affine"?vt.toP():vt},d.prototype._wnafMulAdd=function(st,ct,ot,gt,ft){var yt=this._wnafT1,vt=this._wnafT2,rt=this._wnafT3,bt=0,ht,wt,At;for(ht=0;ht<gt;ht++){At=ct[ht];var Ct=At._getNAFPoints(st);yt[ht]=Ct.wnd,vt[ht]=Ct.points}for(ht=gt-1;ht>=1;ht-=2){var dt=ht-1,Et=ht;if(yt[dt]!==1||yt[Et]!==1){rt[dt]=a(ot[dt],yt[dt],this._bitLength),rt[Et]=a(ot[Et],yt[Et],this._bitLength),bt=Math.max(rt[dt].length,bt),bt=Math.max(rt[Et].length,bt);continue}var Rt=[ct[dt],null,null,ct[Et]];ct[dt].y.cmp(ct[Et].y)===0?(Rt[1]=ct[dt].add(ct[Et]),Rt[2]=ct[dt].toJ().mixedAdd(ct[Et].neg())):ct[dt].y.cmp(ct[Et].y.redNeg())===0?(Rt[1]=ct[dt].toJ().mixedAdd(ct[Et]),Rt[2]=ct[dt].add(ct[Et].neg())):(Rt[1]=ct[dt].toJ().mixedAdd(ct[Et]),Rt[2]=ct[dt].toJ().mixedAdd(ct[Et].neg()));var Mt=[-3,-1,-5,-7,0,7,5,1,3],_t=c(ot[dt],ot[Et]);for(bt=Math.max(_t[0].length,bt),rt[dt]=new Array(bt),rt[Et]=new Array(bt),wt=0;wt<bt;wt++){var kt=_t[0][wt]|0,nt=_t[1][wt]|0;rt[dt][wt]=Mt[(kt+1)*3+(nt+1)],rt[Et][wt]=0,vt[dt]=Rt}}var s=this.jpoint(null,null,null),b=this._wnafT4;for(ht=bt;ht>=0;ht--){for(var $=0;ht>=0;){var _e=!0;for(wt=0;wt<gt;wt++)b[wt]=rt[wt][ht]|0,b[wt]!==0&&(_e=!1);if(!_e)break;$++,ht--}if(ht>=0&&$++,s=s.dblp($),ht<0)break;for(wt=0;wt<gt;wt++){var it=b[wt];it!==0&&(it>0?At=vt[wt][it-1>>1]:it<0&&(At=vt[wt][-it-1>>1].neg()),At.type==="affine"?s=s.mixedAdd(At):s=s.add(At))}}for(ht=0;ht<gt;ht++)vt[ht]=null;return ft?s:s.toP()};function et(at,st){this.curve=at,this.type=st,this.precomputed=null}return d.BasePoint=et,et.prototype.eq=function(){throw new Error("Not implemented")},et.prototype.validate=function(){return this.curve.validate(this)},d.prototype.decodePoint=function(st,ct){st=e.toArray(st,ct);var ot=this.p.byteLength();if((st[0]===4||st[0]===6||st[0]===7)&&st.length-1===2*ot){st[0]===6?j(st[st.length-1]%2===0):st[0]===7&&j(st[st.length-1]%2===1);var gt=this.point(st.slice(1,1+ot),st.slice(1+ot,1+2*ot));return gt}else if((st[0]===2||st[0]===3)&&st.length-1===ot)return this.pointFromX(st.slice(1,1+ot),st[0]===3);throw new Error("Unknown point format")},et.prototype.encodeCompressed=function(st){return this.encode(st,!0)},et.prototype._encode=function(st){var ct=this.curve.p.byteLength(),ot=this.getX().toArray("be",ct);return st?[this.getY().isEven()?2:3].concat(ot):[4].concat(ot,this.getY().toArray("be",ct))},et.prototype.encode=function(st,ct){return e.encode(this._encode(ct),st)},et.prototype.precompute=function(st){if(this.precomputed)return this;var ct={doubles:null,naf:null,beta:null};return ct.naf=this._getNAFPoints(8),ct.doubles=this._getDoubles(4,st),ct.beta=this._getBeta(),this.precomputed=ct,this},et.prototype._hasDoubles=function(st){if(!this.precomputed)return!1;var ct=this.precomputed.doubles;return ct?ct.points.length>=Math.ceil((st.bitLength()+1)/ct.step):!1},et.prototype._getDoubles=function(st,ct){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var ot=[this],gt=this,ft=0;ft<ct;ft+=st){for(var yt=0;yt<st;yt++)gt=gt.dbl();ot.push(gt)}return{step:st,points:ot}},et.prototype._getNAFPoints=function(st){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var ct=[this],ot=(1<<st)-1,gt=ot===1?null:this.dbl(),ft=1;ft<ot;ft++)ct[ft]=ct[ft-1].add(gt);return{wnd:st,points:ct}},et.prototype._getBeta=function(){return null},et.prototype.dblp=function(st){for(var ct=this,ot=0;ot<st;ot++)ct=ct.dbl();return ct},base$1}var short,hasRequiredShort;function requireShort(){if(hasRequiredShort)return short;hasRequiredShort=1;var o=requireUtils$2(),e=requireBn$3(),a=requireInherits_browser(),c=requireBase$1(),j=o.assert;function d(st){c.call(this,"short",st),this.a=new e(st.a,16).toRed(this.red),this.b=new e(st.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(st),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}a(d,c),short=d,d.prototype._getEndomorphism=function(ct){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var ot,gt;if(ct.beta)ot=new e(ct.beta,16).toRed(this.red);else{var ft=this._getEndoRoots(this.p);ot=ft[0].cmp(ft[1])<0?ft[0]:ft[1],ot=ot.toRed(this.red)}if(ct.lambda)gt=new e(ct.lambda,16);else{var yt=this._getEndoRoots(this.n);this.g.mul(yt[0]).x.cmp(this.g.x.redMul(ot))===0?gt=yt[0]:(gt=yt[1],j(this.g.mul(gt).x.cmp(this.g.x.redMul(ot))===0))}var vt;return ct.basis?vt=ct.basis.map(function(rt){return{a:new e(rt.a,16),b:new e(rt.b,16)}}):vt=this._getEndoBasis(gt),{beta:ot,lambda:gt,basis:vt}}},d.prototype._getEndoRoots=function(ct){var ot=ct===this.p?this.red:e.mont(ct),gt=new e(2).toRed(ot).redInvm(),ft=gt.redNeg(),yt=new e(3).toRed(ot).redNeg().redSqrt().redMul(gt),vt=ft.redAdd(yt).fromRed(),rt=ft.redSub(yt).fromRed();return[vt,rt]},d.prototype._getEndoBasis=function(ct){for(var ot=this.n.ushrn(Math.floor(this.n.bitLength()/2)),gt=ct,ft=this.n.clone(),yt=new e(1),vt=new e(0),rt=new e(0),bt=new e(1),ht,wt,At,Ct,dt,Et,Rt,Mt=0,_t,kt;gt.cmpn(0)!==0;){var nt=ft.div(gt);_t=ft.sub(nt.mul(gt)),kt=rt.sub(nt.mul(yt));var s=bt.sub(nt.mul(vt));if(!At&&_t.cmp(ot)<0)ht=Rt.neg(),wt=yt,At=_t.neg(),Ct=kt;else if(At&&++Mt===2)break;Rt=_t,ft=gt,gt=_t,rt=yt,yt=kt,bt=vt,vt=s}dt=_t.neg(),Et=kt;var b=At.sqr().add(Ct.sqr()),$=dt.sqr().add(Et.sqr());return $.cmp(b)>=0&&(dt=ht,Et=wt),At.negative&&(At=At.neg(),Ct=Ct.neg()),dt.negative&&(dt=dt.neg(),Et=Et.neg()),[{a:At,b:Ct},{a:dt,b:Et}]},d.prototype._endoSplit=function(ct){var ot=this.endo.basis,gt=ot[0],ft=ot[1],yt=ft.b.mul(ct).divRound(this.n),vt=gt.b.neg().mul(ct).divRound(this.n),rt=yt.mul(gt.a),bt=vt.mul(ft.a),ht=yt.mul(gt.b),wt=vt.mul(ft.b),At=ct.sub(rt).sub(bt),Ct=ht.add(wt).neg();return{k1:At,k2:Ct}},d.prototype.pointFromX=function(ct,ot){ct=new e(ct,16),ct.red||(ct=ct.toRed(this.red));var gt=ct.redSqr().redMul(ct).redIAdd(ct.redMul(this.a)).redIAdd(this.b),ft=gt.redSqrt();if(ft.redSqr().redSub(gt).cmp(this.zero)!==0)throw new Error("invalid point");var yt=ft.fromRed().isOdd();return(ot&&!yt||!ot&&yt)&&(ft=ft.redNeg()),this.point(ct,ft)},d.prototype.validate=function(ct){if(ct.inf)return!0;var ot=ct.x,gt=ct.y,ft=this.a.redMul(ot),yt=ot.redSqr().redMul(ot).redIAdd(ft).redIAdd(this.b);return gt.redSqr().redISub(yt).cmpn(0)===0},d.prototype._endoWnafMulAdd=function(ct,ot,gt){for(var ft=this._endoWnafT1,yt=this._endoWnafT2,vt=0;vt<ct.length;vt++){var rt=this._endoSplit(ot[vt]),bt=ct[vt],ht=bt._getBeta();rt.k1.negative&&(rt.k1.ineg(),bt=bt.neg(!0)),rt.k2.negative&&(rt.k2.ineg(),ht=ht.neg(!0)),ft[vt*2]=bt,ft[vt*2+1]=ht,yt[vt*2]=rt.k1,yt[vt*2+1]=rt.k2}for(var wt=this._wnafMulAdd(1,ft,yt,vt*2,gt),At=0;At<vt*2;At++)ft[At]=null,yt[At]=null;return wt};function et(st,ct,ot,gt){c.BasePoint.call(this,st,"affine"),ct===null&&ot===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new e(ct,16),this.y=new e(ot,16),gt&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}a(et,c.BasePoint),d.prototype.point=function(ct,ot,gt){return new et(this,ct,ot,gt)},d.prototype.pointFromJSON=function(ct,ot){return et.fromJSON(this,ct,ot)},et.prototype._getBeta=function(){if(this.curve.endo){var ct=this.precomputed;if(ct&&ct.beta)return ct.beta;var ot=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(ct){var gt=this.curve,ft=function(yt){return gt.point(yt.x.redMul(gt.endo.beta),yt.y)};ct.beta=ot,ot.precomputed={beta:null,naf:ct.naf&&{wnd:ct.naf.wnd,points:ct.naf.points.map(ft)},doubles:ct.doubles&&{step:ct.doubles.step,points:ct.doubles.points.map(ft)}}}return ot}},et.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},et.fromJSON=function(ct,ot,gt){typeof ot=="string"&&(ot=JSON.parse(ot));var ft=ct.point(ot[0],ot[1],gt);if(!ot[2])return ft;function yt(rt){return ct.point(rt[0],rt[1],gt)}var vt=ot[2];return ft.precomputed={beta:null,doubles:vt.doubles&&{step:vt.doubles.step,points:[ft].concat(vt.doubles.points.map(yt))},naf:vt.naf&&{wnd:vt.naf.wnd,points:[ft].concat(vt.naf.points.map(yt))}},ft},et.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},et.prototype.isInfinity=function(){return this.inf},et.prototype.add=function(ct){if(this.inf)return ct;if(ct.inf)return this;if(this.eq(ct))return this.dbl();if(this.neg().eq(ct))return this.curve.point(null,null);if(this.x.cmp(ct.x)===0)return this.curve.point(null,null);var ot=this.y.redSub(ct.y);ot.cmpn(0)!==0&&(ot=ot.redMul(this.x.redSub(ct.x).redInvm()));var gt=ot.redSqr().redISub(this.x).redISub(ct.x),ft=ot.redMul(this.x.redSub(gt)).redISub(this.y);return this.curve.point(gt,ft)},et.prototype.dbl=function(){if(this.inf)return this;var ct=this.y.redAdd(this.y);if(ct.cmpn(0)===0)return this.curve.point(null,null);var ot=this.curve.a,gt=this.x.redSqr(),ft=ct.redInvm(),yt=gt.redAdd(gt).redIAdd(gt).redIAdd(ot).redMul(ft),vt=yt.redSqr().redISub(this.x.redAdd(this.x)),rt=yt.redMul(this.x.redSub(vt)).redISub(this.y);return this.curve.point(vt,rt)},et.prototype.getX=function(){return this.x.fromRed()},et.prototype.getY=function(){return this.y.fromRed()},et.prototype.mul=function(ct){return ct=new e(ct,16),this.isInfinity()?this:this._hasDoubles(ct)?this.curve._fixedNafMul(this,ct):this.curve.endo?this.curve._endoWnafMulAdd([this],[ct]):this.curve._wnafMul(this,ct)},et.prototype.mulAdd=function(ct,ot,gt){var ft=[this,ot],yt=[ct,gt];return this.curve.endo?this.curve._endoWnafMulAdd(ft,yt):this.curve._wnafMulAdd(1,ft,yt,2)},et.prototype.jmulAdd=function(ct,ot,gt){var ft=[this,ot],yt=[ct,gt];return this.curve.endo?this.curve._endoWnafMulAdd(ft,yt,!0):this.curve._wnafMulAdd(1,ft,yt,2,!0)},et.prototype.eq=function(ct){return this===ct||this.inf===ct.inf&&(this.inf||this.x.cmp(ct.x)===0&&this.y.cmp(ct.y)===0)},et.prototype.neg=function(ct){if(this.inf)return this;var ot=this.curve.point(this.x,this.y.redNeg());if(ct&&this.precomputed){var gt=this.precomputed,ft=function(yt){return yt.neg()};ot.precomputed={naf:gt.naf&&{wnd:gt.naf.wnd,points:gt.naf.points.map(ft)},doubles:gt.doubles&&{step:gt.doubles.step,points:gt.doubles.points.map(ft)}}}return ot},et.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var ct=this.curve.jpoint(this.x,this.y,this.curve.one);return ct};function at(st,ct,ot,gt){c.BasePoint.call(this,st,"jacobian"),ct===null&&ot===null&&gt===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new e(0)):(this.x=new e(ct,16),this.y=new e(ot,16),this.z=new e(gt,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}return a(at,c.BasePoint),d.prototype.jpoint=function(ct,ot,gt){return new at(this,ct,ot,gt)},at.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var ct=this.z.redInvm(),ot=ct.redSqr(),gt=this.x.redMul(ot),ft=this.y.redMul(ot).redMul(ct);return this.curve.point(gt,ft)},at.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},at.prototype.add=function(ct){if(this.isInfinity())return ct;if(ct.isInfinity())return this;var ot=ct.z.redSqr(),gt=this.z.redSqr(),ft=this.x.redMul(ot),yt=ct.x.redMul(gt),vt=this.y.redMul(ot.redMul(ct.z)),rt=ct.y.redMul(gt.redMul(this.z)),bt=ft.redSub(yt),ht=vt.redSub(rt);if(bt.cmpn(0)===0)return ht.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var wt=bt.redSqr(),At=wt.redMul(bt),Ct=ft.redMul(wt),dt=ht.redSqr().redIAdd(At).redISub(Ct).redISub(Ct),Et=ht.redMul(Ct.redISub(dt)).redISub(vt.redMul(At)),Rt=this.z.redMul(ct.z).redMul(bt);return this.curve.jpoint(dt,Et,Rt)},at.prototype.mixedAdd=function(ct){if(this.isInfinity())return ct.toJ();if(ct.isInfinity())return this;var ot=this.z.redSqr(),gt=this.x,ft=ct.x.redMul(ot),yt=this.y,vt=ct.y.redMul(ot).redMul(this.z),rt=gt.redSub(ft),bt=yt.redSub(vt);if(rt.cmpn(0)===0)return bt.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var ht=rt.redSqr(),wt=ht.redMul(rt),At=gt.redMul(ht),Ct=bt.redSqr().redIAdd(wt).redISub(At).redISub(At),dt=bt.redMul(At.redISub(Ct)).redISub(yt.redMul(wt)),Et=this.z.redMul(rt);return this.curve.jpoint(Ct,dt,Et)},at.prototype.dblp=function(ct){if(ct===0)return this;if(this.isInfinity())return this;if(!ct)return this.dbl();var ot;if(this.curve.zeroA||this.curve.threeA){var gt=this;for(ot=0;ot<ct;ot++)gt=gt.dbl();return gt}var ft=this.curve.a,yt=this.curve.tinv,vt=this.x,rt=this.y,bt=this.z,ht=bt.redSqr().redSqr(),wt=rt.redAdd(rt);for(ot=0;ot<ct;ot++){var At=vt.redSqr(),Ct=wt.redSqr(),dt=Ct.redSqr(),Et=At.redAdd(At).redIAdd(At).redIAdd(ft.redMul(ht)),Rt=vt.redMul(Ct),Mt=Et.redSqr().redISub(Rt.redAdd(Rt)),_t=Rt.redISub(Mt),kt=Et.redMul(_t);kt=kt.redIAdd(kt).redISub(dt);var nt=wt.redMul(bt);ot+1<ct&&(ht=ht.redMul(dt)),vt=Mt,bt=nt,wt=kt}return this.curve.jpoint(vt,wt.redMul(yt),bt)},at.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},at.prototype._zeroDbl=function(){var ct,ot,gt;if(this.zOne){var ft=this.x.redSqr(),yt=this.y.redSqr(),vt=yt.redSqr(),rt=this.x.redAdd(yt).redSqr().redISub(ft).redISub(vt);rt=rt.redIAdd(rt);var bt=ft.redAdd(ft).redIAdd(ft),ht=bt.redSqr().redISub(rt).redISub(rt),wt=vt.redIAdd(vt);wt=wt.redIAdd(wt),wt=wt.redIAdd(wt),ct=ht,ot=bt.redMul(rt.redISub(ht)).redISub(wt),gt=this.y.redAdd(this.y)}else{var At=this.x.redSqr(),Ct=this.y.redSqr(),dt=Ct.redSqr(),Et=this.x.redAdd(Ct).redSqr().redISub(At).redISub(dt);Et=Et.redIAdd(Et);var Rt=At.redAdd(At).redIAdd(At),Mt=Rt.redSqr(),_t=dt.redIAdd(dt);_t=_t.redIAdd(_t),_t=_t.redIAdd(_t),ct=Mt.redISub(Et).redISub(Et),ot=Rt.redMul(Et.redISub(ct)).redISub(_t),gt=this.y.redMul(this.z),gt=gt.redIAdd(gt)}return this.curve.jpoint(ct,ot,gt)},at.prototype._threeDbl=function(){var ct,ot,gt;if(this.zOne){var ft=this.x.redSqr(),yt=this.y.redSqr(),vt=yt.redSqr(),rt=this.x.redAdd(yt).redSqr().redISub(ft).redISub(vt);rt=rt.redIAdd(rt);var bt=ft.redAdd(ft).redIAdd(ft).redIAdd(this.curve.a),ht=bt.redSqr().redISub(rt).redISub(rt);ct=ht;var wt=vt.redIAdd(vt);wt=wt.redIAdd(wt),wt=wt.redIAdd(wt),ot=bt.redMul(rt.redISub(ht)).redISub(wt),gt=this.y.redAdd(this.y)}else{var At=this.z.redSqr(),Ct=this.y.redSqr(),dt=this.x.redMul(Ct),Et=this.x.redSub(At).redMul(this.x.redAdd(At));Et=Et.redAdd(Et).redIAdd(Et);var Rt=dt.redIAdd(dt);Rt=Rt.redIAdd(Rt);var Mt=Rt.redAdd(Rt);ct=Et.redSqr().redISub(Mt),gt=this.y.redAdd(this.z).redSqr().redISub(Ct).redISub(At);var _t=Ct.redSqr();_t=_t.redIAdd(_t),_t=_t.redIAdd(_t),_t=_t.redIAdd(_t),ot=Et.redMul(Rt.redISub(ct)).redISub(_t)}return this.curve.jpoint(ct,ot,gt)},at.prototype._dbl=function(){var ct=this.curve.a,ot=this.x,gt=this.y,ft=this.z,yt=ft.redSqr().redSqr(),vt=ot.redSqr(),rt=gt.redSqr(),bt=vt.redAdd(vt).redIAdd(vt).redIAdd(ct.redMul(yt)),ht=ot.redAdd(ot);ht=ht.redIAdd(ht);var wt=ht.redMul(rt),At=bt.redSqr().redISub(wt.redAdd(wt)),Ct=wt.redISub(At),dt=rt.redSqr();dt=dt.redIAdd(dt),dt=dt.redIAdd(dt),dt=dt.redIAdd(dt);var Et=bt.redMul(Ct).redISub(dt),Rt=gt.redAdd(gt).redMul(ft);return this.curve.jpoint(At,Et,Rt)},at.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var ct=this.x.redSqr(),ot=this.y.redSqr(),gt=this.z.redSqr(),ft=ot.redSqr(),yt=ct.redAdd(ct).redIAdd(ct),vt=yt.redSqr(),rt=this.x.redAdd(ot).redSqr().redISub(ct).redISub(ft);rt=rt.redIAdd(rt),rt=rt.redAdd(rt).redIAdd(rt),rt=rt.redISub(vt);var bt=rt.redSqr(),ht=ft.redIAdd(ft);ht=ht.redIAdd(ht),ht=ht.redIAdd(ht),ht=ht.redIAdd(ht);var wt=yt.redIAdd(rt).redSqr().redISub(vt).redISub(bt).redISub(ht),At=ot.redMul(wt);At=At.redIAdd(At),At=At.redIAdd(At);var Ct=this.x.redMul(bt).redISub(At);Ct=Ct.redIAdd(Ct),Ct=Ct.redIAdd(Ct);var dt=this.y.redMul(wt.redMul(ht.redISub(wt)).redISub(rt.redMul(bt)));dt=dt.redIAdd(dt),dt=dt.redIAdd(dt),dt=dt.redIAdd(dt);var Et=this.z.redAdd(rt).redSqr().redISub(gt).redISub(bt);return this.curve.jpoint(Ct,dt,Et)},at.prototype.mul=function(ct,ot){return ct=new e(ct,ot),this.curve._wnafMul(this,ct)},at.prototype.eq=function(ct){if(ct.type==="affine")return this.eq(ct.toJ());if(this===ct)return!0;var ot=this.z.redSqr(),gt=ct.z.redSqr();if(this.x.redMul(gt).redISub(ct.x.redMul(ot)).cmpn(0)!==0)return!1;var ft=ot.redMul(this.z),yt=gt.redMul(ct.z);return this.y.redMul(yt).redISub(ct.y.redMul(ft)).cmpn(0)===0},at.prototype.eqXToP=function(ct){var ot=this.z.redSqr(),gt=ct.toRed(this.curve.red).redMul(ot);if(this.x.cmp(gt)===0)return!0;for(var ft=ct.clone(),yt=this.curve.redN.redMul(ot);;){if(ft.iadd(this.curve.n),ft.cmp(this.curve.p)>=0)return!1;if(gt.redIAdd(yt),this.x.cmp(gt)===0)return!0}},at.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},at.prototype.isInfinity=function(){return this.z.cmpn(0)===0},short}var mont,hasRequiredMont;function requireMont(){if(hasRequiredMont)return mont;hasRequiredMont=1;var o=requireBn$3(),e=requireInherits_browser(),a=requireBase$1(),c=requireUtils$2();function j(et){a.call(this,"mont",et),this.a=new o(et.a,16).toRed(this.red),this.b=new o(et.b,16).toRed(this.red),this.i4=new o(4).toRed(this.red).redInvm(),this.two=new o(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}e(j,a),mont=j,j.prototype.validate=function(at){var st=at.normalize().x,ct=st.redSqr(),ot=ct.redMul(st).redAdd(ct.redMul(this.a)).redAdd(st),gt=ot.redSqrt();return gt.redSqr().cmp(ot)===0};function d(et,at,st){a.BasePoint.call(this,et,"projective"),at===null&&st===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new o(at,16),this.z=new o(st,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}return e(d,a.BasePoint),j.prototype.decodePoint=function(at,st){return this.point(c.toArray(at,st),1)},j.prototype.point=function(at,st){return new d(this,at,st)},j.prototype.pointFromJSON=function(at){return d.fromJSON(this,at)},d.prototype.precompute=function(){},d.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},d.fromJSON=function(at,st){return new d(at,st[0],st[1]||at.one)},d.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},d.prototype.isInfinity=function(){return this.z.cmpn(0)===0},d.prototype.dbl=function(){var at=this.x.redAdd(this.z),st=at.redSqr(),ct=this.x.redSub(this.z),ot=ct.redSqr(),gt=st.redSub(ot),ft=st.redMul(ot),yt=gt.redMul(ot.redAdd(this.curve.a24.redMul(gt)));return this.curve.point(ft,yt)},d.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},d.prototype.diffAdd=function(at,st){var ct=this.x.redAdd(this.z),ot=this.x.redSub(this.z),gt=at.x.redAdd(at.z),ft=at.x.redSub(at.z),yt=ft.redMul(ct),vt=gt.redMul(ot),rt=st.z.redMul(yt.redAdd(vt).redSqr()),bt=st.x.redMul(yt.redISub(vt).redSqr());return this.curve.point(rt,bt)},d.prototype.mul=function(at){for(var st=at.clone(),ct=this,ot=this.curve.point(null,null),gt=this,ft=[];st.cmpn(0)!==0;st.iushrn(1))ft.push(st.andln(1));for(var yt=ft.length-1;yt>=0;yt--)ft[yt]===0?(ct=ct.diffAdd(ot,gt),ot=ot.dbl()):(ot=ct.diffAdd(ot,gt),ct=ct.dbl());return ot},d.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},d.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},d.prototype.eq=function(at){return this.getX().cmp(at.getX())===0},d.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},d.prototype.getX=function(){return this.normalize(),this.x.fromRed()},mont}var edwards,hasRequiredEdwards;function requireEdwards(){if(hasRequiredEdwards)return edwards;hasRequiredEdwards=1;var o=requireUtils$2(),e=requireBn$3(),a=requireInherits_browser(),c=requireBase$1(),j=o.assert;function d(at){this.twisted=(at.a|0)!==1,this.mOneA=this.twisted&&(at.a|0)===-1,this.extended=this.mOneA,c.call(this,"edwards",at),this.a=new e(at.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new e(at.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new e(at.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),j(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(at.c|0)===1}a(d,c),edwards=d,d.prototype._mulA=function(st){return this.mOneA?st.redNeg():this.a.redMul(st)},d.prototype._mulC=function(st){return this.oneC?st:this.c.redMul(st)},d.prototype.jpoint=function(st,ct,ot,gt){return this.point(st,ct,ot,gt)},d.prototype.pointFromX=function(st,ct){st=new e(st,16),st.red||(st=st.toRed(this.red));var ot=st.redSqr(),gt=this.c2.redSub(this.a.redMul(ot)),ft=this.one.redSub(this.c2.redMul(this.d).redMul(ot)),yt=gt.redMul(ft.redInvm()),vt=yt.redSqrt();if(vt.redSqr().redSub(yt).cmp(this.zero)!==0)throw new Error("invalid point");var rt=vt.fromRed().isOdd();return(ct&&!rt||!ct&&rt)&&(vt=vt.redNeg()),this.point(st,vt)},d.prototype.pointFromY=function(st,ct){st=new e(st,16),st.red||(st=st.toRed(this.red));var ot=st.redSqr(),gt=ot.redSub(this.c2),ft=ot.redMul(this.d).redMul(this.c2).redSub(this.a),yt=gt.redMul(ft.redInvm());if(yt.cmp(this.zero)===0){if(ct)throw new Error("invalid point");return this.point(this.zero,st)}var vt=yt.redSqrt();if(vt.redSqr().redSub(yt).cmp(this.zero)!==0)throw new Error("invalid point");return vt.fromRed().isOdd()!==ct&&(vt=vt.redNeg()),this.point(vt,st)},d.prototype.validate=function(st){if(st.isInfinity())return!0;st.normalize();var ct=st.x.redSqr(),ot=st.y.redSqr(),gt=ct.redMul(this.a).redAdd(ot),ft=this.c2.redMul(this.one.redAdd(this.d.redMul(ct).redMul(ot)));return gt.cmp(ft)===0};function et(at,st,ct,ot,gt){c.BasePoint.call(this,at,"projective"),st===null&&ct===null&&ot===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new e(st,16),this.y=new e(ct,16),this.z=ot?new e(ot,16):this.curve.one,this.t=gt&&new e(gt,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}return a(et,c.BasePoint),d.prototype.pointFromJSON=function(st){return et.fromJSON(this,st)},d.prototype.point=function(st,ct,ot,gt){return new et(this,st,ct,ot,gt)},et.fromJSON=function(st,ct){return new et(st,ct[0],ct[1],ct[2])},et.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},et.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},et.prototype._extDbl=function(){var st=this.x.redSqr(),ct=this.y.redSqr(),ot=this.z.redSqr();ot=ot.redIAdd(ot);var gt=this.curve._mulA(st),ft=this.x.redAdd(this.y).redSqr().redISub(st).redISub(ct),yt=gt.redAdd(ct),vt=yt.redSub(ot),rt=gt.redSub(ct),bt=ft.redMul(vt),ht=yt.redMul(rt),wt=ft.redMul(rt),At=vt.redMul(yt);return this.curve.point(bt,ht,At,wt)},et.prototype._projDbl=function(){var st=this.x.redAdd(this.y).redSqr(),ct=this.x.redSqr(),ot=this.y.redSqr(),gt,ft,yt,vt,rt,bt;if(this.curve.twisted){vt=this.curve._mulA(ct);var ht=vt.redAdd(ot);this.zOne?(gt=st.redSub(ct).redSub(ot).redMul(ht.redSub(this.curve.two)),ft=ht.redMul(vt.redSub(ot)),yt=ht.redSqr().redSub(ht).redSub(ht)):(rt=this.z.redSqr(),bt=ht.redSub(rt).redISub(rt),gt=st.redSub(ct).redISub(ot).redMul(bt),ft=ht.redMul(vt.redSub(ot)),yt=ht.redMul(bt))}else vt=ct.redAdd(ot),rt=this.curve._mulC(this.z).redSqr(),bt=vt.redSub(rt).redSub(rt),gt=this.curve._mulC(st.redISub(vt)).redMul(bt),ft=this.curve._mulC(vt).redMul(ct.redISub(ot)),yt=vt.redMul(bt);return this.curve.point(gt,ft,yt)},et.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},et.prototype._extAdd=function(st){var ct=this.y.redSub(this.x).redMul(st.y.redSub(st.x)),ot=this.y.redAdd(this.x).redMul(st.y.redAdd(st.x)),gt=this.t.redMul(this.curve.dd).redMul(st.t),ft=this.z.redMul(st.z.redAdd(st.z)),yt=ot.redSub(ct),vt=ft.redSub(gt),rt=ft.redAdd(gt),bt=ot.redAdd(ct),ht=yt.redMul(vt),wt=rt.redMul(bt),At=yt.redMul(bt),Ct=vt.redMul(rt);return this.curve.point(ht,wt,Ct,At)},et.prototype._projAdd=function(st){var ct=this.z.redMul(st.z),ot=ct.redSqr(),gt=this.x.redMul(st.x),ft=this.y.redMul(st.y),yt=this.curve.d.redMul(gt).redMul(ft),vt=ot.redSub(yt),rt=ot.redAdd(yt),bt=this.x.redAdd(this.y).redMul(st.x.redAdd(st.y)).redISub(gt).redISub(ft),ht=ct.redMul(vt).redMul(bt),wt,At;return this.curve.twisted?(wt=ct.redMul(rt).redMul(ft.redSub(this.curve._mulA(gt))),At=vt.redMul(rt)):(wt=ct.redMul(rt).redMul(ft.redSub(gt)),At=this.curve._mulC(vt).redMul(rt)),this.curve.point(ht,wt,At)},et.prototype.add=function(st){return this.isInfinity()?st:st.isInfinity()?this:this.curve.extended?this._extAdd(st):this._projAdd(st)},et.prototype.mul=function(st){return this._hasDoubles(st)?this.curve._fixedNafMul(this,st):this.curve._wnafMul(this,st)},et.prototype.mulAdd=function(st,ct,ot){return this.curve._wnafMulAdd(1,[this,ct],[st,ot],2,!1)},et.prototype.jmulAdd=function(st,ct,ot){return this.curve._wnafMulAdd(1,[this,ct],[st,ot],2,!0)},et.prototype.normalize=function(){if(this.zOne)return this;var st=this.z.redInvm();return this.x=this.x.redMul(st),this.y=this.y.redMul(st),this.t&&(this.t=this.t.redMul(st)),this.z=this.curve.one,this.zOne=!0,this},et.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},et.prototype.getX=function(){return this.normalize(),this.x.fromRed()},et.prototype.getY=function(){return this.normalize(),this.y.fromRed()},et.prototype.eq=function(st){return this===st||this.getX().cmp(st.getX())===0&&this.getY().cmp(st.getY())===0},et.prototype.eqXToP=function(st){var ct=st.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(ct)===0)return!0;for(var ot=st.clone(),gt=this.curve.redN.redMul(this.z);;){if(ot.iadd(this.curve.n),ot.cmp(this.curve.p)>=0)return!1;if(ct.redIAdd(gt),this.x.cmp(ct)===0)return!0}},et.prototype.toP=et.prototype.normalize,et.prototype.mixedAdd=et.prototype.add,edwards}var hasRequiredCurve;function requireCurve(){return hasRequiredCurve||(hasRequiredCurve=1,function(o){var e=o;e.base=requireBase$1(),e.short=requireShort(),e.mont=requireMont(),e.edwards=requireEdwards()}(curve)),curve}var curves={},hash={},utils$1={},hasRequiredUtils$1;function requireUtils$1(){if(hasRequiredUtils$1)return utils$1;hasRequiredUtils$1=1;var o=requireMinimalisticAssert(),e=requireInherits_browser();utils$1.inherits=e;function a(s,b){return(s.charCodeAt(b)&64512)!==55296||b<0||b+1>=s.length?!1:(s.charCodeAt(b+1)&64512)===56320}function c(s,b){if(Array.isArray(s))return s.slice();if(!s)return[];var $=[];if(typeof s=="string")if(b){if(b==="hex")for(s=s.replace(/[^a-z0-9]+/ig,""),s.length%2!==0&&(s="0"+s),it=0;it<s.length;it+=2)$.push(parseInt(s[it]+s[it+1],16))}else for(var _e=0,it=0;it<s.length;it++){var pt=s.charCodeAt(it);pt<128?$[_e++]=pt:pt<2048?($[_e++]=pt>>6|192,$[_e++]=pt&63|128):a(s,it)?(pt=65536+((pt&1023)<<10)+(s.charCodeAt(++it)&1023),$[_e++]=pt>>18|240,$[_e++]=pt>>12&63|128,$[_e++]=pt>>6&63|128,$[_e++]=pt&63|128):($[_e++]=pt>>12|224,$[_e++]=pt>>6&63|128,$[_e++]=pt&63|128)}else for(it=0;it<s.length;it++)$[it]=s[it]|0;return $}utils$1.toArray=c;function j(s){for(var b="",$=0;$<s.length;$++)b+=at(s[$].toString(16));return b}utils$1.toHex=j;function d(s){var b=s>>>24|s>>>8&65280|s<<8&16711680|(s&255)<<24;return b>>>0}utils$1.htonl=d;function et(s,b){for(var $="",_e=0;_e<s.length;_e++){var it=s[_e];b==="little"&&(it=d(it)),$+=st(it.toString(16))}return $}utils$1.toHex32=et;function at(s){return s.length===1?"0"+s:s}utils$1.zero2=at;function st(s){return s.length===7?"0"+s:s.length===6?"00"+s:s.length===5?"000"+s:s.length===4?"0000"+s:s.length===3?"00000"+s:s.length===2?"000000"+s:s.length===1?"0000000"+s:s}utils$1.zero8=st;function ct(s,b,$,_e){var it=$-b;o(it%4===0);for(var pt=new Array(it/4),mt=0,lt=b;mt<pt.length;mt++,lt+=4){var _;_e==="big"?_=s[lt]<<24|s[lt+1]<<16|s[lt+2]<<8|s[lt+3]:_=s[lt+3]<<24|s[lt+2]<<16|s[lt+1]<<8|s[lt],pt[mt]=_>>>0}return pt}utils$1.join32=ct;function ot(s,b){for(var $=new Array(s.length*4),_e=0,it=0;_e<s.length;_e++,it+=4){var pt=s[_e];b==="big"?($[it]=pt>>>24,$[it+1]=pt>>>16&255,$[it+2]=pt>>>8&255,$[it+3]=pt&255):($[it+3]=pt>>>24,$[it+2]=pt>>>16&255,$[it+1]=pt>>>8&255,$[it]=pt&255)}return $}utils$1.split32=ot;function gt(s,b){return s>>>b|s<<32-b}utils$1.rotr32=gt;function ft(s,b){return s<<b|s>>>32-b}utils$1.rotl32=ft;function yt(s,b){return s+b>>>0}utils$1.sum32=yt;function vt(s,b,$){return s+b+$>>>0}utils$1.sum32_3=vt;function rt(s,b,$,_e){return s+b+$+_e>>>0}utils$1.sum32_4=rt;function bt(s,b,$,_e,it){return s+b+$+_e+it>>>0}utils$1.sum32_5=bt;function ht(s,b,$,_e){var it=s[b],pt=s[b+1],mt=_e+pt>>>0,lt=(mt<_e?1:0)+$+it;s[b]=lt>>>0,s[b+1]=mt}utils$1.sum64=ht;function wt(s,b,$,_e){var it=b+_e>>>0,pt=(it<b?1:0)+s+$;return pt>>>0}utils$1.sum64_hi=wt;function At(s,b,$,_e){var it=b+_e;return it>>>0}utils$1.sum64_lo=At;function Ct(s,b,$,_e,it,pt,mt,lt){var _=0,tt=b;tt=tt+_e>>>0,_+=tt<b?1:0,tt=tt+pt>>>0,_+=tt<pt?1:0,tt=tt+lt>>>0,_+=tt<lt?1:0;var Tt=s+$+it+mt+_;return Tt>>>0}utils$1.sum64_4_hi=Ct;function dt(s,b,$,_e,it,pt,mt,lt){var _=b+_e+pt+lt;return _>>>0}utils$1.sum64_4_lo=dt;function Et(s,b,$,_e,it,pt,mt,lt,_,tt){var Tt=0,It=b;It=It+_e>>>0,Tt+=It<b?1:0,It=It+pt>>>0,Tt+=It<pt?1:0,It=It+lt>>>0,Tt+=It<lt?1:0,It=It+tt>>>0,Tt+=It<tt?1:0;var Nt=s+$+it+mt+_+Tt;return Nt>>>0}utils$1.sum64_5_hi=Et;function Rt(s,b,$,_e,it,pt,mt,lt,_,tt){var Tt=b+_e+pt+lt+tt;return Tt>>>0}utils$1.sum64_5_lo=Rt;function Mt(s,b,$){var _e=b<<32-$|s>>>$;return _e>>>0}utils$1.rotr64_hi=Mt;function _t(s,b,$){var _e=s<<32-$|b>>>$;return _e>>>0}utils$1.rotr64_lo=_t;function kt(s,b,$){return s>>>$}utils$1.shr64_hi=kt;function nt(s,b,$){var _e=s<<32-$|b>>>$;return _e>>>0}return utils$1.shr64_lo=nt,utils$1}var common$2={},hasRequiredCommon$1;function requireCommon$1(){if(hasRequiredCommon$1)return common$2;hasRequiredCommon$1=1;var o=requireUtils$1(),e=requireMinimalisticAssert();function a(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}return common$2.BlockHash=a,a.prototype.update=function(j,d){if(j=o.toArray(j,d),this.pending?this.pending=this.pending.concat(j):this.pending=j,this.pendingTotal+=j.length,this.pending.length>=this._delta8){j=this.pending;var et=j.length%this._delta8;this.pending=j.slice(j.length-et,j.length),this.pending.length===0&&(this.pending=null),j=o.join32(j,0,j.length-et,this.endian);for(var at=0;at<j.length;at+=this._delta32)this._update(j,at,at+this._delta32)}return this},a.prototype.digest=function(j){return this.update(this._pad()),e(this.pending===null),this._digest(j)},a.prototype._pad=function(){var j=this.pendingTotal,d=this._delta8,et=d-(j+this.padLength)%d,at=new Array(et+this.padLength);at[0]=128;for(var st=1;st<et;st++)at[st]=0;if(j<<=3,this.endian==="big"){for(var ct=8;ct<this.padLength;ct++)at[st++]=0;at[st++]=0,at[st++]=0,at[st++]=0,at[st++]=0,at[st++]=j>>>24&255,at[st++]=j>>>16&255,at[st++]=j>>>8&255,at[st++]=j&255}else for(at[st++]=j&255,at[st++]=j>>>8&255,at[st++]=j>>>16&255,at[st++]=j>>>24&255,at[st++]=0,at[st++]=0,at[st++]=0,at[st++]=0,ct=8;ct<this.padLength;ct++)at[st++]=0;return at},common$2}var sha={},common$1={},hasRequiredCommon;function requireCommon(){if(hasRequiredCommon)return common$1;hasRequiredCommon=1;var o=requireUtils$1(),e=o.rotr32;function a(ot,gt,ft,yt){if(ot===0)return c(gt,ft,yt);if(ot===1||ot===3)return d(gt,ft,yt);if(ot===2)return j(gt,ft,yt)}common$1.ft_1=a;function c(ot,gt,ft){return ot&gt^~ot&ft}common$1.ch32=c;function j(ot,gt,ft){return ot&gt^ot&ft^gt&ft}common$1.maj32=j;function d(ot,gt,ft){return ot^gt^ft}common$1.p32=d;function et(ot){return e(ot,2)^e(ot,13)^e(ot,22)}common$1.s0_256=et;function at(ot){return e(ot,6)^e(ot,11)^e(ot,25)}common$1.s1_256=at;function st(ot){return e(ot,7)^e(ot,18)^ot>>>3}common$1.g0_256=st;function ct(ot){return e(ot,17)^e(ot,19)^ot>>>10}return common$1.g1_256=ct,common$1}var _1,hasRequired_1;function require_1(){if(hasRequired_1)return _1;hasRequired_1=1;var o=requireUtils$1(),e=requireCommon$1(),a=requireCommon(),c=o.rotl32,j=o.sum32,d=o.sum32_5,et=a.ft_1,at=e.BlockHash,st=[1518500249,1859775393,2400959708,3395469782];function ct(){if(!(this instanceof ct))return new ct;at.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}return o.inherits(ct,at),_1=ct,ct.blockSize=512,ct.outSize=160,ct.hmacStrength=80,ct.padLength=64,ct.prototype._update=function(gt,ft){for(var yt=this.W,vt=0;vt<16;vt++)yt[vt]=gt[ft+vt];for(;vt<yt.length;vt++)yt[vt]=c(yt[vt-3]^yt[vt-8]^yt[vt-14]^yt[vt-16],1);var rt=this.h[0],bt=this.h[1],ht=this.h[2],wt=this.h[3],At=this.h[4];for(vt=0;vt<yt.length;vt++){var Ct=~~(vt/20),dt=d(c(rt,5),et(Ct,bt,ht,wt),At,yt[vt],st[Ct]);At=wt,wt=ht,ht=c(bt,30),bt=rt,rt=dt}this.h[0]=j(this.h[0],rt),this.h[1]=j(this.h[1],bt),this.h[2]=j(this.h[2],ht),this.h[3]=j(this.h[3],wt),this.h[4]=j(this.h[4],At)},ct.prototype._digest=function(gt){return gt==="hex"?o.toHex32(this.h,"big"):o.split32(this.h,"big")},_1}var _256,hasRequired_256;function require_256(){if(hasRequired_256)return _256;hasRequired_256=1;var o=requireUtils$1(),e=requireCommon$1(),a=requireCommon(),c=requireMinimalisticAssert(),j=o.sum32,d=o.sum32_4,et=o.sum32_5,at=a.ch32,st=a.maj32,ct=a.s0_256,ot=a.s1_256,gt=a.g0_256,ft=a.g1_256,yt=e.BlockHash,vt=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function rt(){if(!(this instanceof rt))return new rt;yt.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=vt,this.W=new Array(64)}return o.inherits(rt,yt),_256=rt,rt.blockSize=512,rt.outSize=256,rt.hmacStrength=192,rt.padLength=64,rt.prototype._update=function(ht,wt){for(var At=this.W,Ct=0;Ct<16;Ct++)At[Ct]=ht[wt+Ct];for(;Ct<At.length;Ct++)At[Ct]=d(ft(At[Ct-2]),At[Ct-7],gt(At[Ct-15]),At[Ct-16]);var dt=this.h[0],Et=this.h[1],Rt=this.h[2],Mt=this.h[3],_t=this.h[4],kt=this.h[5],nt=this.h[6],s=this.h[7];for(c(this.k.length===At.length),Ct=0;Ct<At.length;Ct++){var b=et(s,ot(_t),at(_t,kt,nt),this.k[Ct],At[Ct]),$=j(ct(dt),st(dt,Et,Rt));s=nt,nt=kt,kt=_t,_t=j(Mt,b),Mt=Rt,Rt=Et,Et=dt,dt=j(b,$)}this.h[0]=j(this.h[0],dt),this.h[1]=j(this.h[1],Et),this.h[2]=j(this.h[2],Rt),this.h[3]=j(this.h[3],Mt),this.h[4]=j(this.h[4],_t),this.h[5]=j(this.h[5],kt),this.h[6]=j(this.h[6],nt),this.h[7]=j(this.h[7],s)},rt.prototype._digest=function(ht){return ht==="hex"?o.toHex32(this.h,"big"):o.split32(this.h,"big")},_256}var _224,hasRequired_224;function require_224(){if(hasRequired_224)return _224;hasRequired_224=1;var o=requireUtils$1(),e=require_256();function a(){if(!(this instanceof a))return new a;e.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}return o.inherits(a,e),_224=a,a.blockSize=512,a.outSize=224,a.hmacStrength=192,a.padLength=64,a.prototype._digest=function(j){return j==="hex"?o.toHex32(this.h.slice(0,7),"big"):o.split32(this.h.slice(0,7),"big")},_224}var _512,hasRequired_512;function require_512(){if(hasRequired_512)return _512;hasRequired_512=1;var o=requireUtils$1(),e=requireCommon$1(),a=requireMinimalisticAssert(),c=o.rotr64_hi,j=o.rotr64_lo,d=o.shr64_hi,et=o.shr64_lo,at=o.sum64,st=o.sum64_hi,ct=o.sum64_lo,ot=o.sum64_4_hi,gt=o.sum64_4_lo,ft=o.sum64_5_hi,yt=o.sum64_5_lo,vt=e.BlockHash,rt=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function bt(){if(!(this instanceof bt))return new bt;vt.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=rt,this.W=new Array(160)}o.inherits(bt,vt),_512=bt,bt.blockSize=1024,bt.outSize=512,bt.hmacStrength=192,bt.padLength=128,bt.prototype._prepareBlock=function($,_e){for(var it=this.W,pt=0;pt<32;pt++)it[pt]=$[_e+pt];for(;pt<it.length;pt+=2){var mt=nt(it[pt-4],it[pt-3]),lt=s(it[pt-4],it[pt-3]),_=it[pt-14],tt=it[pt-13],Tt=_t(it[pt-30],it[pt-29]),It=kt(it[pt-30],it[pt-29]),Nt=it[pt-32],Ut=it[pt-31];it[pt]=ot(mt,lt,_,tt,Tt,It,Nt,Ut),it[pt+1]=gt(mt,lt,_,tt,Tt,It,Nt,Ut)}},bt.prototype._update=function($,_e){this._prepareBlock($,_e);var it=this.W,pt=this.h[0],mt=this.h[1],lt=this.h[2],_=this.h[3],tt=this.h[4],Tt=this.h[5],It=this.h[6],Nt=this.h[7],Ut=this.h[8],Gt=this.h[9],Pt=this.h[10],qt=this.h[11],Kt=this.h[12],jt=this.h[13],Ht=this.h[14],Bt=this.h[15];a(this.k.length===it.length);for(var Jt=0;Jt<it.length;Jt+=2){var sr=Ht,hr=Bt,Ar=Rt(Ut,Gt),gn=Mt(Ut,Gt),Lr=ht(Ut,Gt,Pt,qt,Kt),wr=wt(Ut,Gt,Pt,qt,Kt,jt),En=this.k[Jt],Dr=this.k[Jt+1],Qr=it[Jt],Dn=it[Jt+1],Br=ft(sr,hr,Ar,gn,Lr,wr,En,Dr,Qr,Dn),Gr=yt(sr,hr,Ar,gn,Lr,wr,En,Dr,Qr,Dn);sr=dt(pt,mt),hr=Et(pt,mt),Ar=At(pt,mt,lt,_,tt),gn=Ct(pt,mt,lt,_,tt,Tt);var Ln=st(sr,hr,Ar,gn),Fr=ct(sr,hr,Ar,gn);Ht=Kt,Bt=jt,Kt=Pt,jt=qt,Pt=Ut,qt=Gt,Ut=st(It,Nt,Br,Gr),Gt=ct(Nt,Nt,Br,Gr),It=tt,Nt=Tt,tt=lt,Tt=_,lt=pt,_=mt,pt=st(Br,Gr,Ln,Fr),mt=ct(Br,Gr,Ln,Fr)}at(this.h,0,pt,mt),at(this.h,2,lt,_),at(this.h,4,tt,Tt),at(this.h,6,It,Nt),at(this.h,8,Ut,Gt),at(this.h,10,Pt,qt),at(this.h,12,Kt,jt),at(this.h,14,Ht,Bt)},bt.prototype._digest=function($){return $==="hex"?o.toHex32(this.h,"big"):o.split32(this.h,"big")};function ht(b,$,_e,it,pt){var mt=b&_e^~b&pt;return mt<0&&(mt+=4294967296),mt}function wt(b,$,_e,it,pt,mt){var lt=$&it^~$&mt;return lt<0&&(lt+=4294967296),lt}function At(b,$,_e,it,pt){var mt=b&_e^b&pt^_e&pt;return mt<0&&(mt+=4294967296),mt}function Ct(b,$,_e,it,pt,mt){var lt=$&it^$&mt^it&mt;return lt<0&&(lt+=4294967296),lt}function dt(b,$){var _e=c(b,$,28),it=c($,b,2),pt=c($,b,7),mt=_e^it^pt;return mt<0&&(mt+=4294967296),mt}function Et(b,$){var _e=j(b,$,28),it=j($,b,2),pt=j($,b,7),mt=_e^it^pt;return mt<0&&(mt+=4294967296),mt}function Rt(b,$){var _e=c(b,$,14),it=c(b,$,18),pt=c($,b,9),mt=_e^it^pt;return mt<0&&(mt+=4294967296),mt}function Mt(b,$){var _e=j(b,$,14),it=j(b,$,18),pt=j($,b,9),mt=_e^it^pt;return mt<0&&(mt+=4294967296),mt}function _t(b,$){var _e=c(b,$,1),it=c(b,$,8),pt=d(b,$,7),mt=_e^it^pt;return mt<0&&(mt+=4294967296),mt}function kt(b,$){var _e=j(b,$,1),it=j(b,$,8),pt=et(b,$,7),mt=_e^it^pt;return mt<0&&(mt+=4294967296),mt}function nt(b,$){var _e=c(b,$,19),it=c($,b,29),pt=d(b,$,6),mt=_e^it^pt;return mt<0&&(mt+=4294967296),mt}function s(b,$){var _e=j(b,$,19),it=j($,b,29),pt=et(b,$,6),mt=_e^it^pt;return mt<0&&(mt+=4294967296),mt}return _512}var _384,hasRequired_384;function require_384(){if(hasRequired_384)return _384;hasRequired_384=1;var o=requireUtils$1(),e=require_512();function a(){if(!(this instanceof a))return new a;e.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}return o.inherits(a,e),_384=a,a.blockSize=1024,a.outSize=384,a.hmacStrength=192,a.padLength=128,a.prototype._digest=function(j){return j==="hex"?o.toHex32(this.h.slice(0,12),"big"):o.split32(this.h.slice(0,12),"big")},_384}var hasRequiredSha;function requireSha(){return hasRequiredSha||(hasRequiredSha=1,sha.sha1=require_1(),sha.sha224=require_224(),sha.sha256=require_256(),sha.sha384=require_384(),sha.sha512=require_512()),sha}var ripemd={},hasRequiredRipemd;function requireRipemd(){if(hasRequiredRipemd)return ripemd;hasRequiredRipemd=1;var o=requireUtils$1(),e=requireCommon$1(),a=o.rotl32,c=o.sum32,j=o.sum32_3,d=o.sum32_4,et=e.BlockHash;function at(){if(!(this instanceof at))return new at;et.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}o.inherits(at,et),ripemd.ripemd160=at,at.blockSize=512,at.outSize=160,at.hmacStrength=192,at.padLength=64,at.prototype._update=function(bt,ht){for(var wt=this.h[0],At=this.h[1],Ct=this.h[2],dt=this.h[3],Et=this.h[4],Rt=wt,Mt=At,_t=Ct,kt=dt,nt=Et,s=0;s<80;s++){var b=c(a(d(wt,st(s,At,Ct,dt),bt[gt[s]+ht],ct(s)),yt[s]),Et);wt=Et,Et=dt,dt=a(Ct,10),Ct=At,At=b,b=c(a(d(Rt,st(79-s,Mt,_t,kt),bt[ft[s]+ht],ot(s)),vt[s]),nt),Rt=nt,nt=kt,kt=a(_t,10),_t=Mt,Mt=b}b=j(this.h[1],Ct,kt),this.h[1]=j(this.h[2],dt,nt),this.h[2]=j(this.h[3],Et,Rt),this.h[3]=j(this.h[4],wt,Mt),this.h[4]=j(this.h[0],At,_t),this.h[0]=b},at.prototype._digest=function(bt){return bt==="hex"?o.toHex32(this.h,"little"):o.split32(this.h,"little")};function st(rt,bt,ht,wt){return rt<=15?bt^ht^wt:rt<=31?bt&ht|~bt&wt:rt<=47?(bt|~ht)^wt:rt<=63?bt&wt|ht&~wt:bt^(ht|~wt)}function ct(rt){return rt<=15?0:rt<=31?1518500249:rt<=47?1859775393:rt<=63?2400959708:2840853838}function ot(rt){return rt<=15?1352829926:rt<=31?1548603684:rt<=47?1836072691:rt<=63?2053994217:0}var gt=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],ft=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],yt=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],vt=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return ripemd}var hmac,hasRequiredHmac;function requireHmac(){if(hasRequiredHmac)return hmac;hasRequiredHmac=1;var o=requireUtils$1(),e=requireMinimalisticAssert();function a(c,j,d){if(!(this instanceof a))return new a(c,j,d);this.Hash=c,this.blockSize=c.blockSize/8,this.outSize=c.outSize/8,this.inner=null,this.outer=null,this._init(o.toArray(j,d))}return hmac=a,a.prototype._init=function(j){j.length>this.blockSize&&(j=new this.Hash().update(j).digest()),e(j.length<=this.blockSize);for(var d=j.length;d<this.blockSize;d++)j.push(0);for(d=0;d<j.length;d++)j[d]^=54;for(this.inner=new this.Hash().update(j),d=0;d<j.length;d++)j[d]^=106;this.outer=new this.Hash().update(j)},a.prototype.update=function(j,d){return this.inner.update(j,d),this},a.prototype.digest=function(j){return this.outer.update(this.inner.digest()),this.outer.digest(j)},hmac}var hasRequiredHash;function requireHash(){return hasRequiredHash||(hasRequiredHash=1,function(o){var e=o;e.utils=requireUtils$1(),e.common=requireCommon$1(),e.sha=requireSha(),e.ripemd=requireRipemd(),e.hmac=requireHmac(),e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160}(hash)),hash}var secp256k1,hasRequiredSecp256k1;function requireSecp256k1(){return hasRequiredSecp256k1||(hasRequiredSecp256k1=1,secp256k1={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),secp256k1}var hasRequiredCurves;function requireCurves(){return hasRequiredCurves||(hasRequiredCurves=1,function(o){var e=o,a=requireHash(),c=requireCurve(),j=requireUtils$2(),d=j.assert;function et(ct){ct.type==="short"?this.curve=new c.short(ct):ct.type==="edwards"?this.curve=new c.edwards(ct):this.curve=new c.mont(ct),this.g=this.curve.g,this.n=this.curve.n,this.hash=ct.hash,d(this.g.validate(),"Invalid curve"),d(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}e.PresetCurve=et;function at(ct,ot){Object.defineProperty(e,ct,{configurable:!0,enumerable:!0,get:function(){var gt=new et(ot);return Object.defineProperty(e,ct,{configurable:!0,enumerable:!0,value:gt}),gt}})}at("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:a.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),at("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:a.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),at("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:a.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),at("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:a.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),at("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:a.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),at("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:a.sha256,gRed:!1,g:["9"]}),at("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:a.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var st;try{st=requireSecp256k1()}catch{st=void 0}at("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:a.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",st]})}(curves)),curves}var hmacDrbg,hasRequiredHmacDrbg;function requireHmacDrbg(){if(hasRequiredHmacDrbg)return hmacDrbg;hasRequiredHmacDrbg=1;var o=requireHash(),e=requireUtils$3(),a=requireMinimalisticAssert();function c(j){if(!(this instanceof c))return new c(j);this.hash=j.hash,this.predResist=!!j.predResist,this.outLen=this.hash.outSize,this.minEntropy=j.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var d=e.toArray(j.entropy,j.entropyEnc||"hex"),et=e.toArray(j.nonce,j.nonceEnc||"hex"),at=e.toArray(j.pers,j.persEnc||"hex");a(d.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(d,et,at)}return hmacDrbg=c,c.prototype._init=function(d,et,at){var st=d.concat(et).concat(at);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var ct=0;ct<this.V.length;ct++)this.K[ct]=0,this.V[ct]=1;this._update(st),this._reseed=1,this.reseedInterval=281474976710656},c.prototype._hmac=function(){return new o.hmac(this.hash,this.K)},c.prototype._update=function(d){var et=this._hmac().update(this.V).update([0]);d&&(et=et.update(d)),this.K=et.digest(),this.V=this._hmac().update(this.V).digest(),d&&(this.K=this._hmac().update(this.V).update([1]).update(d).digest(),this.V=this._hmac().update(this.V).digest())},c.prototype.reseed=function(d,et,at,st){typeof et!="string"&&(st=at,at=et,et=null),d=e.toArray(d,et),at=e.toArray(at,st),a(d.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(d.concat(at||[])),this._reseed=1},c.prototype.generate=function(d,et,at,st){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof et!="string"&&(st=at,at=et,et=null),at&&(at=e.toArray(at,st||"hex"),this._update(at));for(var ct=[];ct.length<d;)this.V=this._hmac().update(this.V).digest(),ct=ct.concat(this.V);var ot=ct.slice(0,d);return this._update(at),this._reseed++,e.encode(ot,et)},hmacDrbg}var key$1,hasRequiredKey$1;function requireKey$1(){if(hasRequiredKey$1)return key$1;hasRequiredKey$1=1;var o=requireBn$3(),e=requireUtils$2(),a=e.assert;function c(j,d){this.ec=j,this.priv=null,this.pub=null,d.priv&&this._importPrivate(d.priv,d.privEnc),d.pub&&this._importPublic(d.pub,d.pubEnc)}return key$1=c,c.fromPublic=function(d,et,at){return et instanceof c?et:new c(d,{pub:et,pubEnc:at})},c.fromPrivate=function(d,et,at){return et instanceof c?et:new c(d,{priv:et,privEnc:at})},c.prototype.validate=function(){var d=this.getPublic();return d.isInfinity()?{result:!1,reason:"Invalid public key"}:d.validate()?d.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},c.prototype.getPublic=function(d,et){return typeof d=="string"&&(et=d,d=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),et?this.pub.encode(et,d):this.pub},c.prototype.getPrivate=function(d){return d==="hex"?this.priv.toString(16,2):this.priv},c.prototype._importPrivate=function(d,et){this.priv=new o(d,et||16),this.priv=this.priv.umod(this.ec.curve.n)},c.prototype._importPublic=function(d,et){if(d.x||d.y){this.ec.curve.type==="mont"?a(d.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&a(d.x&&d.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(d.x,d.y);return}this.pub=this.ec.curve.decodePoint(d,et)},c.prototype.derive=function(d){return d.validate()||a(d.validate(),"public point not validated"),d.mul(this.priv).getX()},c.prototype.sign=function(d,et,at){return this.ec.sign(d,this,et,at)},c.prototype.verify=function(d,et,at){return this.ec.verify(d,et,this,void 0,at)},c.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"},key$1}var signature$1,hasRequiredSignature$1;function requireSignature$1(){if(hasRequiredSignature$1)return signature$1;hasRequiredSignature$1=1;var o=requireBn$3(),e=requireUtils$2(),a=e.assert;function c(st,ct){if(st instanceof c)return st;this._importDER(st,ct)||(a(st.r&&st.s,"Signature without r or s"),this.r=new o(st.r,16),this.s=new o(st.s,16),st.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=st.recoveryParam)}signature$1=c;function j(){this.place=0}function d(st,ct){var ot=st[ct.place++];if(!(ot&128))return ot;var gt=ot&15;if(gt===0||gt>4||st[ct.place]===0)return!1;for(var ft=0,yt=0,vt=ct.place;yt<gt;yt++,vt++)ft<<=8,ft|=st[vt],ft>>>=0;return ft<=127?!1:(ct.place=vt,ft)}function et(st){for(var ct=0,ot=st.length-1;!st[ct]&&!(st[ct+1]&128)&&ct<ot;)ct++;return ct===0?st:st.slice(ct)}c.prototype._importDER=function(ct,ot){ct=e.toArray(ct,ot);var gt=new j;if(ct[gt.place++]!==48)return!1;var ft=d(ct,gt);if(ft===!1||ft+gt.place!==ct.length||ct[gt.place++]!==2)return!1;var yt=d(ct,gt);if(yt===!1||ct[gt.place]&128)return!1;var vt=ct.slice(gt.place,yt+gt.place);if(gt.place+=yt,ct[gt.place++]!==2)return!1;var rt=d(ct,gt);if(rt===!1||ct.length!==rt+gt.place||ct[gt.place]&128)return!1;var bt=ct.slice(gt.place,rt+gt.place);if(vt[0]===0)if(vt[1]&128)vt=vt.slice(1);else return!1;if(bt[0]===0)if(bt[1]&128)bt=bt.slice(1);else return!1;return this.r=new o(vt),this.s=new o(bt),this.recoveryParam=null,!0};function at(st,ct){if(ct<128){st.push(ct);return}var ot=1+(Math.log(ct)/Math.LN2>>>3);for(st.push(ot|128);--ot;)st.push(ct>>>(ot<<3)&255);st.push(ct)}return c.prototype.toDER=function(ct){var ot=this.r.toArray(),gt=this.s.toArray();for(ot[0]&128&&(ot=[0].concat(ot)),gt[0]&128&&(gt=[0].concat(gt)),ot=et(ot),gt=et(gt);!gt[0]&&!(gt[1]&128);)gt=gt.slice(1);var ft=[2];at(ft,ot.length),ft=ft.concat(ot),ft.push(2),at(ft,gt.length);var yt=ft.concat(gt),vt=[48];return at(vt,yt.length),vt=vt.concat(yt),e.encode(vt,ct)},signature$1}var ec,hasRequiredEc;function requireEc(){if(hasRequiredEc)return ec;hasRequiredEc=1;var o=requireBn$3(),e=requireHmacDrbg(),a=requireUtils$2(),c=requireCurves(),j=requireBrorand(),d=a.assert,et=requireKey$1(),at=requireSignature$1();function st(ct){if(!(this instanceof st))return new st(ct);typeof ct=="string"&&(d(Object.prototype.hasOwnProperty.call(c,ct),"Unknown curve "+ct),ct=c[ct]),ct instanceof c.PresetCurve&&(ct={curve:ct}),this.curve=ct.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=ct.curve.g,this.g.precompute(ct.curve.n.bitLength()+1),this.hash=ct.hash||ct.curve.hash}return ec=st,st.prototype.keyPair=function(ot){return new et(this,ot)},st.prototype.keyFromPrivate=function(ot,gt){return et.fromPrivate(this,ot,gt)},st.prototype.keyFromPublic=function(ot,gt){return et.fromPublic(this,ot,gt)},st.prototype.genKeyPair=function(ot){ot||(ot={});for(var gt=new e({hash:this.hash,pers:ot.pers,persEnc:ot.persEnc||"utf8",entropy:ot.entropy||j(this.hash.hmacStrength),entropyEnc:ot.entropy&&ot.entropyEnc||"utf8",nonce:this.n.toArray()}),ft=this.n.byteLength(),yt=this.n.sub(new o(2));;){var vt=new o(gt.generate(ft));if(!(vt.cmp(yt)>0))return vt.iaddn(1),this.keyFromPrivate(vt)}},st.prototype._truncateToN=function(ot,gt,ft){var yt;if(o.isBN(ot)||typeof ot=="number")ot=new o(ot,16),yt=ot.byteLength();else if(typeof ot=="object")yt=ot.length,ot=new o(ot,16);else{var vt=ot.toString();yt=vt.length+1>>>1,ot=new o(vt,16)}typeof ft!="number"&&(ft=yt*8);var rt=ft-this.n.bitLength();return rt>0&&(ot=ot.ushrn(rt)),!gt&&ot.cmp(this.n)>=0?ot.sub(this.n):ot},st.prototype.sign=function(ot,gt,ft,yt){typeof ft=="object"&&(yt=ft,ft=null),yt||(yt={}),gt=this.keyFromPrivate(gt,ft),ot=this._truncateToN(ot,!1,yt.msgBitLength);for(var vt=this.n.byteLength(),rt=gt.getPrivate().toArray("be",vt),bt=ot.toArray("be",vt),ht=new e({hash:this.hash,entropy:rt,nonce:bt,pers:yt.pers,persEnc:yt.persEnc||"utf8"}),wt=this.n.sub(new o(1)),At=0;;At++){var Ct=yt.k?yt.k(At):new o(ht.generate(this.n.byteLength()));if(Ct=this._truncateToN(Ct,!0),!(Ct.cmpn(1)<=0||Ct.cmp(wt)>=0)){var dt=this.g.mul(Ct);if(!dt.isInfinity()){var Et=dt.getX(),Rt=Et.umod(this.n);if(Rt.cmpn(0)!==0){var Mt=Ct.invm(this.n).mul(Rt.mul(gt.getPrivate()).iadd(ot));if(Mt=Mt.umod(this.n),Mt.cmpn(0)!==0){var _t=(dt.getY().isOdd()?1:0)|(Et.cmp(Rt)!==0?2:0);return yt.canonical&&Mt.cmp(this.nh)>0&&(Mt=this.n.sub(Mt),_t^=1),new at({r:Rt,s:Mt,recoveryParam:_t})}}}}}},st.prototype.verify=function(ot,gt,ft,yt,vt){vt||(vt={}),ot=this._truncateToN(ot,!1,vt.msgBitLength),ft=this.keyFromPublic(ft,yt),gt=new at(gt,"hex");var rt=gt.r,bt=gt.s;if(rt.cmpn(1)<0||rt.cmp(this.n)>=0||bt.cmpn(1)<0||bt.cmp(this.n)>=0)return!1;var ht=bt.invm(this.n),wt=ht.mul(ot).umod(this.n),At=ht.mul(rt).umod(this.n),Ct;return this.curve._maxwellTrick?(Ct=this.g.jmulAdd(wt,ft.getPublic(),At),Ct.isInfinity()?!1:Ct.eqXToP(rt)):(Ct=this.g.mulAdd(wt,ft.getPublic(),At),Ct.isInfinity()?!1:Ct.getX().umod(this.n).cmp(rt)===0)},st.prototype.recoverPubKey=function(ct,ot,gt,ft){d((3&gt)===gt,"The recovery param is more than two bits"),ot=new at(ot,ft);var yt=this.n,vt=new o(ct),rt=ot.r,bt=ot.s,ht=gt&1,wt=gt>>1;if(rt.cmp(this.curve.p.umod(this.curve.n))>=0&&wt)throw new Error("Unable to find sencond key candinate");wt?rt=this.curve.pointFromX(rt.add(this.curve.n),ht):rt=this.curve.pointFromX(rt,ht);var At=ot.r.invm(yt),Ct=yt.sub(vt).mul(At).umod(yt),dt=bt.mul(At).umod(yt);return this.g.mulAdd(Ct,rt,dt)},st.prototype.getKeyRecoveryParam=function(ct,ot,gt,ft){if(ot=new at(ot,ft),ot.recoveryParam!==null)return ot.recoveryParam;for(var yt=0;yt<4;yt++){var vt;try{vt=this.recoverPubKey(ct,ot,yt)}catch{continue}if(vt.eq(gt))return yt}throw new Error("Unable to find valid recovery factor")},ec}var key,hasRequiredKey;function requireKey(){if(hasRequiredKey)return key;hasRequiredKey=1;var o=requireUtils$2(),e=o.assert,a=o.parseBytes,c=o.cachedProperty;function j(d,et){this.eddsa=d,this._secret=a(et.secret),d.isPoint(et.pub)?this._pub=et.pub:this._pubBytes=a(et.pub)}return j.fromPublic=function(et,at){return at instanceof j?at:new j(et,{pub:at})},j.fromSecret=function(et,at){return at instanceof j?at:new j(et,{secret:at})},j.prototype.secret=function(){return this._secret},c(j,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),c(j,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),c(j,"privBytes",function(){var et=this.eddsa,at=this.hash(),st=et.encodingLength-1,ct=at.slice(0,et.encodingLength);return ct[0]&=248,ct[st]&=127,ct[st]|=64,ct}),c(j,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),c(j,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),c(j,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),j.prototype.sign=function(et){return e(this._secret,"KeyPair can only verify"),this.eddsa.sign(et,this)},j.prototype.verify=function(et,at){return this.eddsa.verify(et,at,this)},j.prototype.getSecret=function(et){return e(this._secret,"KeyPair is public only"),o.encode(this.secret(),et)},j.prototype.getPublic=function(et){return o.encode(this.pubBytes(),et)},key=j,key}var signature,hasRequiredSignature;function requireSignature(){if(hasRequiredSignature)return signature;hasRequiredSignature=1;var o=requireBn$3(),e=requireUtils$2(),a=e.assert,c=e.cachedProperty,j=e.parseBytes;function d(et,at){this.eddsa=et,typeof at!="object"&&(at=j(at)),Array.isArray(at)&&(a(at.length===et.encodingLength*2,"Signature has invalid size"),at={R:at.slice(0,et.encodingLength),S:at.slice(et.encodingLength)}),a(at.R&&at.S,"Signature without R or S"),et.isPoint(at.R)&&(this._R=at.R),at.S instanceof o&&(this._S=at.S),this._Rencoded=Array.isArray(at.R)?at.R:at.Rencoded,this._Sencoded=Array.isArray(at.S)?at.S:at.Sencoded}return c(d,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),c(d,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),c(d,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),c(d,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),d.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},d.prototype.toHex=function(){return e.encode(this.toBytes(),"hex").toUpperCase()},signature=d,signature}var eddsa,hasRequiredEddsa;function requireEddsa(){if(hasRequiredEddsa)return eddsa;hasRequiredEddsa=1;var o=requireHash(),e=requireCurves(),a=requireUtils$2(),c=a.assert,j=a.parseBytes,d=requireKey(),et=requireSignature();function at(st){if(c(st==="ed25519","only tested with ed25519 so far"),!(this instanceof at))return new at(st);st=e[st].curve,this.curve=st,this.g=st.g,this.g.precompute(st.n.bitLength()+1),this.pointClass=st.point().constructor,this.encodingLength=Math.ceil(st.n.bitLength()/8),this.hash=o.sha512}return eddsa=at,at.prototype.sign=function(ct,ot){ct=j(ct);var gt=this.keyFromSecret(ot),ft=this.hashInt(gt.messagePrefix(),ct),yt=this.g.mul(ft),vt=this.encodePoint(yt),rt=this.hashInt(vt,gt.pubBytes(),ct).mul(gt.priv()),bt=ft.add(rt).umod(this.curve.n);return this.makeSignature({R:yt,S:bt,Rencoded:vt})},at.prototype.verify=function(ct,ot,gt){if(ct=j(ct),ot=this.makeSignature(ot),ot.S().gte(ot.eddsa.curve.n)||ot.S().isNeg())return!1;var ft=this.keyFromPublic(gt),yt=this.hashInt(ot.Rencoded(),ft.pubBytes(),ct),vt=this.g.mul(ot.S()),rt=ot.R().add(ft.pub().mul(yt));return rt.eq(vt)},at.prototype.hashInt=function(){for(var ct=this.hash(),ot=0;ot<arguments.length;ot++)ct.update(arguments[ot]);return a.intFromLE(ct.digest()).umod(this.curve.n)},at.prototype.keyFromPublic=function(ct){return d.fromPublic(this,ct)},at.prototype.keyFromSecret=function(ct){return d.fromSecret(this,ct)},at.prototype.makeSignature=function(ct){return ct instanceof et?ct:new et(this,ct)},at.prototype.encodePoint=function(ct){var ot=ct.getY().toArray("le",this.encodingLength);return ot[this.encodingLength-1]|=ct.getX().isOdd()?128:0,ot},at.prototype.decodePoint=function(ct){ct=a.parseBytes(ct);var ot=ct.length-1,gt=ct.slice(0,ot).concat(ct[ot]&-129),ft=(ct[ot]&128)!==0,yt=a.intFromLE(gt);return this.curve.pointFromY(yt,ft)},at.prototype.encodeInt=function(ct){return ct.toArray("le",this.encodingLength)},at.prototype.decodeInt=function(ct){return a.intFromLE(ct)},at.prototype.isPoint=function(ct){return ct instanceof this.pointClass},eddsa}var hasRequiredElliptic;function requireElliptic(){return hasRequiredElliptic||(hasRequiredElliptic=1,function(o){var e=o;e.version=require$$0$1.version,e.utils=requireUtils$2(),e.rand=requireBrorand(),e.curve=requireCurve(),e.curves=requireCurves(),e.ec=requireEc(),e.eddsa=requireEddsa()}(elliptic)),elliptic}var asn1$1={},asn1={},bn$2={exports:{}};bn$2.exports;var hasRequiredBn$2;function requireBn$2(){return hasRequiredBn$2||(hasRequiredBn$2=1,function(o){(function(e,a){function c(nt,s){if(!nt)throw new Error(s||"Assertion failed")}function j(nt,s){nt.super_=s;var b=function(){};b.prototype=s.prototype,nt.prototype=new b,nt.prototype.constructor=nt}function d(nt,s,b){if(d.isBN(nt))return nt;this.negative=0,this.words=null,this.length=0,this.red=null,nt!==null&&((s==="le"||s==="be")&&(b=s,s=10),this._init(nt||0,s||10,b||"be"))}typeof e=="object"?e.exports=d:a.BN=d,d.BN=d,d.wordSize=26;var et;try{typeof window<"u"&&typeof window.Buffer<"u"?et=window.Buffer:et=require$$1$2.Buffer}catch{}d.isBN=function(s){return s instanceof d?!0:s!==null&&typeof s=="object"&&s.constructor.wordSize===d.wordSize&&Array.isArray(s.words)},d.max=function(s,b){return s.cmp(b)>0?s:b},d.min=function(s,b){return s.cmp(b)<0?s:b},d.prototype._init=function(s,b,$){if(typeof s=="number")return this._initNumber(s,b,$);if(typeof s=="object")return this._initArray(s,b,$);b==="hex"&&(b=16),c(b===(b|0)&&b>=2&&b<=36),s=s.toString().replace(/\s+/g,"");var _e=0;s[0]==="-"&&(_e++,this.negative=1),_e<s.length&&(b===16?this._parseHex(s,_e,$):(this._parseBase(s,b,_e),$==="le"&&this._initArray(this.toArray(),b,$)))},d.prototype._initNumber=function(s,b,$){s<0&&(this.negative=1,s=-s),s<67108864?(this.words=[s&67108863],this.length=1):s<4503599627370496?(this.words=[s&67108863,s/67108864&67108863],this.length=2):(c(s<9007199254740992),this.words=[s&67108863,s/67108864&67108863,1],this.length=3),$==="le"&&this._initArray(this.toArray(),b,$)},d.prototype._initArray=function(s,b,$){if(c(typeof s.length=="number"),s.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(s.length/3),this.words=new Array(this.length);for(var _e=0;_e<this.length;_e++)this.words[_e]=0;var it,pt,mt=0;if($==="be")for(_e=s.length-1,it=0;_e>=0;_e-=3)pt=s[_e]|s[_e-1]<<8|s[_e-2]<<16,this.words[it]|=pt<<mt&67108863,this.words[it+1]=pt>>>26-mt&67108863,mt+=24,mt>=26&&(mt-=26,it++);else if($==="le")for(_e=0,it=0;_e<s.length;_e+=3)pt=s[_e]|s[_e+1]<<8|s[_e+2]<<16,this.words[it]|=pt<<mt&67108863,this.words[it+1]=pt>>>26-mt&67108863,mt+=24,mt>=26&&(mt-=26,it++);return this.strip()};function at(nt,s){var b=nt.charCodeAt(s);return b>=65&&b<=70?b-55:b>=97&&b<=102?b-87:b-48&15}function st(nt,s,b){var $=at(nt,b);return b-1>=s&&($|=at(nt,b-1)<<4),$}d.prototype._parseHex=function(s,b,$){this.length=Math.ceil((s.length-b)/6),this.words=new Array(this.length);for(var _e=0;_e<this.length;_e++)this.words[_e]=0;var it=0,pt=0,mt;if($==="be")for(_e=s.length-1;_e>=b;_e-=2)mt=st(s,b,_e)<<it,this.words[pt]|=mt&67108863,it>=18?(it-=18,pt+=1,this.words[pt]|=mt>>>26):it+=8;else{var lt=s.length-b;for(_e=lt%2===0?b+1:b;_e<s.length;_e+=2)mt=st(s,b,_e)<<it,this.words[pt]|=mt&67108863,it>=18?(it-=18,pt+=1,this.words[pt]|=mt>>>26):it+=8}this.strip()};function ct(nt,s,b,$){for(var _e=0,it=Math.min(nt.length,b),pt=s;pt<it;pt++){var mt=nt.charCodeAt(pt)-48;_e*=$,mt>=49?_e+=mt-49+10:mt>=17?_e+=mt-17+10:_e+=mt}return _e}d.prototype._parseBase=function(s,b,$){this.words=[0],this.length=1;for(var _e=0,it=1;it<=67108863;it*=b)_e++;_e--,it=it/b|0;for(var pt=s.length-$,mt=pt%_e,lt=Math.min(pt,pt-mt)+$,_=0,tt=$;tt<lt;tt+=_e)_=ct(s,tt,tt+_e,b),this.imuln(it),this.words[0]+_<67108864?this.words[0]+=_:this._iaddn(_);if(mt!==0){var Tt=1;for(_=ct(s,tt,s.length,b),tt=0;tt<mt;tt++)Tt*=b;this.imuln(Tt),this.words[0]+_<67108864?this.words[0]+=_:this._iaddn(_)}this.strip()},d.prototype.copy=function(s){s.words=new Array(this.length);for(var b=0;b<this.length;b++)s.words[b]=this.words[b];s.length=this.length,s.negative=this.negative,s.red=this.red},d.prototype.clone=function(){var s=new d(null);return this.copy(s),s},d.prototype._expand=function(s){for(;this.length<s;)this.words[this.length++]=0;return this},d.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},d.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},d.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var ot=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],gt=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],ft=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];d.prototype.toString=function(s,b){s=s||10,b=b|0||1;var $;if(s===16||s==="hex"){$="";for(var _e=0,it=0,pt=0;pt<this.length;pt++){var mt=this.words[pt],lt=((mt<<_e|it)&16777215).toString(16);it=mt>>>24-_e&16777215,it!==0||pt!==this.length-1?$=ot[6-lt.length]+lt+$:$=lt+$,_e+=2,_e>=26&&(_e-=26,pt--)}for(it!==0&&($=it.toString(16)+$);$.length%b!==0;)$="0"+$;return this.negative!==0&&($="-"+$),$}if(s===(s|0)&&s>=2&&s<=36){var _=gt[s],tt=ft[s];$="";var Tt=this.clone();for(Tt.negative=0;!Tt.isZero();){var It=Tt.modn(tt).toString(s);Tt=Tt.idivn(tt),Tt.isZero()?$=It+$:$=ot[_-It.length]+It+$}for(this.isZero()&&($="0"+$);$.length%b!==0;)$="0"+$;return this.negative!==0&&($="-"+$),$}c(!1,"Base should be between 2 and 36")},d.prototype.toNumber=function(){var s=this.words[0];return this.length===2?s+=this.words[1]*67108864:this.length===3&&this.words[2]===1?s+=4503599627370496+this.words[1]*67108864:this.length>2&&c(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-s:s},d.prototype.toJSON=function(){return this.toString(16)},d.prototype.toBuffer=function(s,b){return c(typeof et<"u"),this.toArrayLike(et,s,b)},d.prototype.toArray=function(s,b){return this.toArrayLike(Array,s,b)},d.prototype.toArrayLike=function(s,b,$){var _e=this.byteLength(),it=$||Math.max(1,_e);c(_e<=it,"byte array longer than desired length"),c(it>0,"Requested array length <= 0"),this.strip();var pt=b==="le",mt=new s(it),lt,_,tt=this.clone();if(pt){for(_=0;!tt.isZero();_++)lt=tt.andln(255),tt.iushrn(8),mt[_]=lt;for(;_<it;_++)mt[_]=0}else{for(_=0;_<it-_e;_++)mt[_]=0;for(_=0;!tt.isZero();_++)lt=tt.andln(255),tt.iushrn(8),mt[it-_-1]=lt}return mt},Math.clz32?d.prototype._countBits=function(s){return 32-Math.clz32(s)}:d.prototype._countBits=function(s){var b=s,$=0;return b>=4096&&($+=13,b>>>=13),b>=64&&($+=7,b>>>=7),b>=8&&($+=4,b>>>=4),b>=2&&($+=2,b>>>=2),$+b},d.prototype._zeroBits=function(s){if(s===0)return 26;var b=s,$=0;return b&8191||($+=13,b>>>=13),b&127||($+=7,b>>>=7),b&15||($+=4,b>>>=4),b&3||($+=2,b>>>=2),b&1||$++,$},d.prototype.bitLength=function(){var s=this.words[this.length-1],b=this._countBits(s);return(this.length-1)*26+b};function yt(nt){for(var s=new Array(nt.bitLength()),b=0;b<s.length;b++){var $=b/26|0,_e=b%26;s[b]=(nt.words[$]&1<<_e)>>>_e}return s}d.prototype.zeroBits=function(){if(this.isZero())return 0;for(var s=0,b=0;b<this.length;b++){var $=this._zeroBits(this.words[b]);if(s+=$,$!==26)break}return s},d.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},d.prototype.toTwos=function(s){return this.negative!==0?this.abs().inotn(s).iaddn(1):this.clone()},d.prototype.fromTwos=function(s){return this.testn(s-1)?this.notn(s).iaddn(1).ineg():this.clone()},d.prototype.isNeg=function(){return this.negative!==0},d.prototype.neg=function(){return this.clone().ineg()},d.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},d.prototype.iuor=function(s){for(;this.length<s.length;)this.words[this.length++]=0;for(var b=0;b<s.length;b++)this.words[b]=this.words[b]|s.words[b];return this.strip()},d.prototype.ior=function(s){return c((this.negative|s.negative)===0),this.iuor(s)},d.prototype.or=function(s){return this.length>s.length?this.clone().ior(s):s.clone().ior(this)},d.prototype.uor=function(s){return this.length>s.length?this.clone().iuor(s):s.clone().iuor(this)},d.prototype.iuand=function(s){var b;this.length>s.length?b=s:b=this;for(var $=0;$<b.length;$++)this.words[$]=this.words[$]&s.words[$];return this.length=b.length,this.strip()},d.prototype.iand=function(s){return c((this.negative|s.negative)===0),this.iuand(s)},d.prototype.and=function(s){return this.length>s.length?this.clone().iand(s):s.clone().iand(this)},d.prototype.uand=function(s){return this.length>s.length?this.clone().iuand(s):s.clone().iuand(this)},d.prototype.iuxor=function(s){var b,$;this.length>s.length?(b=this,$=s):(b=s,$=this);for(var _e=0;_e<$.length;_e++)this.words[_e]=b.words[_e]^$.words[_e];if(this!==b)for(;_e<b.length;_e++)this.words[_e]=b.words[_e];return this.length=b.length,this.strip()},d.prototype.ixor=function(s){return c((this.negative|s.negative)===0),this.iuxor(s)},d.prototype.xor=function(s){return this.length>s.length?this.clone().ixor(s):s.clone().ixor(this)},d.prototype.uxor=function(s){return this.length>s.length?this.clone().iuxor(s):s.clone().iuxor(this)},d.prototype.inotn=function(s){c(typeof s=="number"&&s>=0);var b=Math.ceil(s/26)|0,$=s%26;this._expand(b),$>0&&b--;for(var _e=0;_e<b;_e++)this.words[_e]=~this.words[_e]&67108863;return $>0&&(this.words[_e]=~this.words[_e]&67108863>>26-$),this.strip()},d.prototype.notn=function(s){return this.clone().inotn(s)},d.prototype.setn=function(s,b){c(typeof s=="number"&&s>=0);var $=s/26|0,_e=s%26;return this._expand($+1),b?this.words[$]=this.words[$]|1<<_e:this.words[$]=this.words[$]&~(1<<_e),this.strip()},d.prototype.iadd=function(s){var b;if(this.negative!==0&&s.negative===0)return this.negative=0,b=this.isub(s),this.negative^=1,this._normSign();if(this.negative===0&&s.negative!==0)return s.negative=0,b=this.isub(s),s.negative=1,b._normSign();var $,_e;this.length>s.length?($=this,_e=s):($=s,_e=this);for(var it=0,pt=0;pt<_e.length;pt++)b=($.words[pt]|0)+(_e.words[pt]|0)+it,this.words[pt]=b&67108863,it=b>>>26;for(;it!==0&&pt<$.length;pt++)b=($.words[pt]|0)+it,this.words[pt]=b&67108863,it=b>>>26;if(this.length=$.length,it!==0)this.words[this.length]=it,this.length++;else if($!==this)for(;pt<$.length;pt++)this.words[pt]=$.words[pt];return this},d.prototype.add=function(s){var b;return s.negative!==0&&this.negative===0?(s.negative=0,b=this.sub(s),s.negative^=1,b):s.negative===0&&this.negative!==0?(this.negative=0,b=s.sub(this),this.negative=1,b):this.length>s.length?this.clone().iadd(s):s.clone().iadd(this)},d.prototype.isub=function(s){if(s.negative!==0){s.negative=0;var b=this.iadd(s);return s.negative=1,b._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(s),this.negative=1,this._normSign();var $=this.cmp(s);if($===0)return this.negative=0,this.length=1,this.words[0]=0,this;var _e,it;$>0?(_e=this,it=s):(_e=s,it=this);for(var pt=0,mt=0;mt<it.length;mt++)b=(_e.words[mt]|0)-(it.words[mt]|0)+pt,pt=b>>26,this.words[mt]=b&67108863;for(;pt!==0&&mt<_e.length;mt++)b=(_e.words[mt]|0)+pt,pt=b>>26,this.words[mt]=b&67108863;if(pt===0&&mt<_e.length&&_e!==this)for(;mt<_e.length;mt++)this.words[mt]=_e.words[mt];return this.length=Math.max(this.length,mt),_e!==this&&(this.negative=1),this.strip()},d.prototype.sub=function(s){return this.clone().isub(s)};function vt(nt,s,b){b.negative=s.negative^nt.negative;var $=nt.length+s.length|0;b.length=$,$=$-1|0;var _e=nt.words[0]|0,it=s.words[0]|0,pt=_e*it,mt=pt&67108863,lt=pt/67108864|0;b.words[0]=mt;for(var _=1;_<$;_++){for(var tt=lt>>>26,Tt=lt&67108863,It=Math.min(_,s.length-1),Nt=Math.max(0,_-nt.length+1);Nt<=It;Nt++){var Ut=_-Nt|0;_e=nt.words[Ut]|0,it=s.words[Nt]|0,pt=_e*it+Tt,tt+=pt/67108864|0,Tt=pt&67108863}b.words[_]=Tt|0,lt=tt|0}return lt!==0?b.words[_]=lt|0:b.length--,b.strip()}var rt=function(s,b,$){var _e=s.words,it=b.words,pt=$.words,mt=0,lt,_,tt,Tt=_e[0]|0,It=Tt&8191,Nt=Tt>>>13,Ut=_e[1]|0,Gt=Ut&8191,Pt=Ut>>>13,qt=_e[2]|0,Kt=qt&8191,jt=qt>>>13,Ht=_e[3]|0,Bt=Ht&8191,Jt=Ht>>>13,sr=_e[4]|0,hr=sr&8191,Ar=sr>>>13,gn=_e[5]|0,Lr=gn&8191,wr=gn>>>13,En=_e[6]|0,Dr=En&8191,Qr=En>>>13,Dn=_e[7]|0,Br=Dn&8191,Gr=Dn>>>13,Ln=_e[8]|0,Fr=Ln&8191,_i=Ln>>>13,Kn=_e[9]|0,Wt=Kn&8191,Lt=Kn>>>13,zt=it[0]|0,Zt=zt&8191,ar=zt>>>13,Or=it[1]|0,vr=Or&8191,Rr=Or>>>13,fr=it[2]|0,tr=fr&8191,yr=fr>>>13,fn=it[3]|0,Nr=fn&8191,zr=fn>>>13,xn=it[4]|0,Kr=xn&8191,nn=xn>>>13,Wn=it[5]|0,Zr=Wn&8191,on=Wn>>>13,Xn=it[6]|0,en=Xn&8191,ln=Xn>>>13,Zn=it[7]|0,$t=Zn&8191,or=Zn>>>13,Yr=it[8]|0,Vr=Yr&8191,Hr=Yr>>>13,Mn=it[9]|0,Ur=Mn&8191,tn=Mn>>>13;$.negative=s.negative^b.negative,$.length=19,lt=Math.imul(It,Zt),_=Math.imul(It,ar),_=_+Math.imul(Nt,Zt)|0,tt=Math.imul(Nt,ar);var jn=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(jn>>>26)|0,jn&=67108863,lt=Math.imul(Gt,Zt),_=Math.imul(Gt,ar),_=_+Math.imul(Pt,Zt)|0,tt=Math.imul(Pt,ar),lt=lt+Math.imul(It,vr)|0,_=_+Math.imul(It,Rr)|0,_=_+Math.imul(Nt,vr)|0,tt=tt+Math.imul(Nt,Rr)|0;var Un=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(Un>>>26)|0,Un&=67108863,lt=Math.imul(Kt,Zt),_=Math.imul(Kt,ar),_=_+Math.imul(jt,Zt)|0,tt=Math.imul(jt,ar),lt=lt+Math.imul(Gt,vr)|0,_=_+Math.imul(Gt,Rr)|0,_=_+Math.imul(Pt,vr)|0,tt=tt+Math.imul(Pt,Rr)|0,lt=lt+Math.imul(It,tr)|0,_=_+Math.imul(It,yr)|0,_=_+Math.imul(Nt,tr)|0,tt=tt+Math.imul(Nt,yr)|0;var ao=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(ao>>>26)|0,ao&=67108863,lt=Math.imul(Bt,Zt),_=Math.imul(Bt,ar),_=_+Math.imul(Jt,Zt)|0,tt=Math.imul(Jt,ar),lt=lt+Math.imul(Kt,vr)|0,_=_+Math.imul(Kt,Rr)|0,_=_+Math.imul(jt,vr)|0,tt=tt+Math.imul(jt,Rr)|0,lt=lt+Math.imul(Gt,tr)|0,_=_+Math.imul(Gt,yr)|0,_=_+Math.imul(Pt,tr)|0,tt=tt+Math.imul(Pt,yr)|0,lt=lt+Math.imul(It,Nr)|0,_=_+Math.imul(It,zr)|0,_=_+Math.imul(Nt,Nr)|0,tt=tt+Math.imul(Nt,zr)|0;var co=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(co>>>26)|0,co&=67108863,lt=Math.imul(hr,Zt),_=Math.imul(hr,ar),_=_+Math.imul(Ar,Zt)|0,tt=Math.imul(Ar,ar),lt=lt+Math.imul(Bt,vr)|0,_=_+Math.imul(Bt,Rr)|0,_=_+Math.imul(Jt,vr)|0,tt=tt+Math.imul(Jt,Rr)|0,lt=lt+Math.imul(Kt,tr)|0,_=_+Math.imul(Kt,yr)|0,_=_+Math.imul(jt,tr)|0,tt=tt+Math.imul(jt,yr)|0,lt=lt+Math.imul(Gt,Nr)|0,_=_+Math.imul(Gt,zr)|0,_=_+Math.imul(Pt,Nr)|0,tt=tt+Math.imul(Pt,zr)|0,lt=lt+Math.imul(It,Kr)|0,_=_+Math.imul(It,nn)|0,_=_+Math.imul(Nt,Kr)|0,tt=tt+Math.imul(Nt,nn)|0;var ro=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(ro>>>26)|0,ro&=67108863,lt=Math.imul(Lr,Zt),_=Math.imul(Lr,ar),_=_+Math.imul(wr,Zt)|0,tt=Math.imul(wr,ar),lt=lt+Math.imul(hr,vr)|0,_=_+Math.imul(hr,Rr)|0,_=_+Math.imul(Ar,vr)|0,tt=tt+Math.imul(Ar,Rr)|0,lt=lt+Math.imul(Bt,tr)|0,_=_+Math.imul(Bt,yr)|0,_=_+Math.imul(Jt,tr)|0,tt=tt+Math.imul(Jt,yr)|0,lt=lt+Math.imul(Kt,Nr)|0,_=_+Math.imul(Kt,zr)|0,_=_+Math.imul(jt,Nr)|0,tt=tt+Math.imul(jt,zr)|0,lt=lt+Math.imul(Gt,Kr)|0,_=_+Math.imul(Gt,nn)|0,_=_+Math.imul(Pt,Kr)|0,tt=tt+Math.imul(Pt,nn)|0,lt=lt+Math.imul(It,Zr)|0,_=_+Math.imul(It,on)|0,_=_+Math.imul(Nt,Zr)|0,tt=tt+Math.imul(Nt,on)|0;var vo=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(vo>>>26)|0,vo&=67108863,lt=Math.imul(Dr,Zt),_=Math.imul(Dr,ar),_=_+Math.imul(Qr,Zt)|0,tt=Math.imul(Qr,ar),lt=lt+Math.imul(Lr,vr)|0,_=_+Math.imul(Lr,Rr)|0,_=_+Math.imul(wr,vr)|0,tt=tt+Math.imul(wr,Rr)|0,lt=lt+Math.imul(hr,tr)|0,_=_+Math.imul(hr,yr)|0,_=_+Math.imul(Ar,tr)|0,tt=tt+Math.imul(Ar,yr)|0,lt=lt+Math.imul(Bt,Nr)|0,_=_+Math.imul(Bt,zr)|0,_=_+Math.imul(Jt,Nr)|0,tt=tt+Math.imul(Jt,zr)|0,lt=lt+Math.imul(Kt,Kr)|0,_=_+Math.imul(Kt,nn)|0,_=_+Math.imul(jt,Kr)|0,tt=tt+Math.imul(jt,nn)|0,lt=lt+Math.imul(Gt,Zr)|0,_=_+Math.imul(Gt,on)|0,_=_+Math.imul(Pt,Zr)|0,tt=tt+Math.imul(Pt,on)|0,lt=lt+Math.imul(It,en)|0,_=_+Math.imul(It,ln)|0,_=_+Math.imul(Nt,en)|0,tt=tt+Math.imul(Nt,ln)|0;var oo=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(oo>>>26)|0,oo&=67108863,lt=Math.imul(Br,Zt),_=Math.imul(Br,ar),_=_+Math.imul(Gr,Zt)|0,tt=Math.imul(Gr,ar),lt=lt+Math.imul(Dr,vr)|0,_=_+Math.imul(Dr,Rr)|0,_=_+Math.imul(Qr,vr)|0,tt=tt+Math.imul(Qr,Rr)|0,lt=lt+Math.imul(Lr,tr)|0,_=_+Math.imul(Lr,yr)|0,_=_+Math.imul(wr,tr)|0,tt=tt+Math.imul(wr,yr)|0,lt=lt+Math.imul(hr,Nr)|0,_=_+Math.imul(hr,zr)|0,_=_+Math.imul(Ar,Nr)|0,tt=tt+Math.imul(Ar,zr)|0,lt=lt+Math.imul(Bt,Kr)|0,_=_+Math.imul(Bt,nn)|0,_=_+Math.imul(Jt,Kr)|0,tt=tt+Math.imul(Jt,nn)|0,lt=lt+Math.imul(Kt,Zr)|0,_=_+Math.imul(Kt,on)|0,_=_+Math.imul(jt,Zr)|0,tt=tt+Math.imul(jt,on)|0,lt=lt+Math.imul(Gt,en)|0,_=_+Math.imul(Gt,ln)|0,_=_+Math.imul(Pt,en)|0,tt=tt+Math.imul(Pt,ln)|0,lt=lt+Math.imul(It,$t)|0,_=_+Math.imul(It,or)|0,_=_+Math.imul(Nt,$t)|0,tt=tt+Math.imul(Nt,or)|0;var mo=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(mo>>>26)|0,mo&=67108863,lt=Math.imul(Fr,Zt),_=Math.imul(Fr,ar),_=_+Math.imul(_i,Zt)|0,tt=Math.imul(_i,ar),lt=lt+Math.imul(Br,vr)|0,_=_+Math.imul(Br,Rr)|0,_=_+Math.imul(Gr,vr)|0,tt=tt+Math.imul(Gr,Rr)|0,lt=lt+Math.imul(Dr,tr)|0,_=_+Math.imul(Dr,yr)|0,_=_+Math.imul(Qr,tr)|0,tt=tt+Math.imul(Qr,yr)|0,lt=lt+Math.imul(Lr,Nr)|0,_=_+Math.imul(Lr,zr)|0,_=_+Math.imul(wr,Nr)|0,tt=tt+Math.imul(wr,zr)|0,lt=lt+Math.imul(hr,Kr)|0,_=_+Math.imul(hr,nn)|0,_=_+Math.imul(Ar,Kr)|0,tt=tt+Math.imul(Ar,nn)|0,lt=lt+Math.imul(Bt,Zr)|0,_=_+Math.imul(Bt,on)|0,_=_+Math.imul(Jt,Zr)|0,tt=tt+Math.imul(Jt,on)|0,lt=lt+Math.imul(Kt,en)|0,_=_+Math.imul(Kt,ln)|0,_=_+Math.imul(jt,en)|0,tt=tt+Math.imul(jt,ln)|0,lt=lt+Math.imul(Gt,$t)|0,_=_+Math.imul(Gt,or)|0,_=_+Math.imul(Pt,$t)|0,tt=tt+Math.imul(Pt,or)|0,lt=lt+Math.imul(It,Vr)|0,_=_+Math.imul(It,Hr)|0,_=_+Math.imul(Nt,Vr)|0,tt=tt+Math.imul(Nt,Hr)|0;var ho=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(ho>>>26)|0,ho&=67108863,lt=Math.imul(Wt,Zt),_=Math.imul(Wt,ar),_=_+Math.imul(Lt,Zt)|0,tt=Math.imul(Lt,ar),lt=lt+Math.imul(Fr,vr)|0,_=_+Math.imul(Fr,Rr)|0,_=_+Math.imul(_i,vr)|0,tt=tt+Math.imul(_i,Rr)|0,lt=lt+Math.imul(Br,tr)|0,_=_+Math.imul(Br,yr)|0,_=_+Math.imul(Gr,tr)|0,tt=tt+Math.imul(Gr,yr)|0,lt=lt+Math.imul(Dr,Nr)|0,_=_+Math.imul(Dr,zr)|0,_=_+Math.imul(Qr,Nr)|0,tt=tt+Math.imul(Qr,zr)|0,lt=lt+Math.imul(Lr,Kr)|0,_=_+Math.imul(Lr,nn)|0,_=_+Math.imul(wr,Kr)|0,tt=tt+Math.imul(wr,nn)|0,lt=lt+Math.imul(hr,Zr)|0,_=_+Math.imul(hr,on)|0,_=_+Math.imul(Ar,Zr)|0,tt=tt+Math.imul(Ar,on)|0,lt=lt+Math.imul(Bt,en)|0,_=_+Math.imul(Bt,ln)|0,_=_+Math.imul(Jt,en)|0,tt=tt+Math.imul(Jt,ln)|0,lt=lt+Math.imul(Kt,$t)|0,_=_+Math.imul(Kt,or)|0,_=_+Math.imul(jt,$t)|0,tt=tt+Math.imul(jt,or)|0,lt=lt+Math.imul(Gt,Vr)|0,_=_+Math.imul(Gt,Hr)|0,_=_+Math.imul(Pt,Vr)|0,tt=tt+Math.imul(Pt,Hr)|0,lt=lt+Math.imul(It,Ur)|0,_=_+Math.imul(It,tn)|0,_=_+Math.imul(Nt,Ur)|0,tt=tt+Math.imul(Nt,tn)|0;var go=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(go>>>26)|0,go&=67108863,lt=Math.imul(Wt,vr),_=Math.imul(Wt,Rr),_=_+Math.imul(Lt,vr)|0,tt=Math.imul(Lt,Rr),lt=lt+Math.imul(Fr,tr)|0,_=_+Math.imul(Fr,yr)|0,_=_+Math.imul(_i,tr)|0,tt=tt+Math.imul(_i,yr)|0,lt=lt+Math.imul(Br,Nr)|0,_=_+Math.imul(Br,zr)|0,_=_+Math.imul(Gr,Nr)|0,tt=tt+Math.imul(Gr,zr)|0,lt=lt+Math.imul(Dr,Kr)|0,_=_+Math.imul(Dr,nn)|0,_=_+Math.imul(Qr,Kr)|0,tt=tt+Math.imul(Qr,nn)|0,lt=lt+Math.imul(Lr,Zr)|0,_=_+Math.imul(Lr,on)|0,_=_+Math.imul(wr,Zr)|0,tt=tt+Math.imul(wr,on)|0,lt=lt+Math.imul(hr,en)|0,_=_+Math.imul(hr,ln)|0,_=_+Math.imul(Ar,en)|0,tt=tt+Math.imul(Ar,ln)|0,lt=lt+Math.imul(Bt,$t)|0,_=_+Math.imul(Bt,or)|0,_=_+Math.imul(Jt,$t)|0,tt=tt+Math.imul(Jt,or)|0,lt=lt+Math.imul(Kt,Vr)|0,_=_+Math.imul(Kt,Hr)|0,_=_+Math.imul(jt,Vr)|0,tt=tt+Math.imul(jt,Hr)|0,lt=lt+Math.imul(Gt,Ur)|0,_=_+Math.imul(Gt,tn)|0,_=_+Math.imul(Pt,Ur)|0,tt=tt+Math.imul(Pt,tn)|0;var bo=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(bo>>>26)|0,bo&=67108863,lt=Math.imul(Wt,tr),_=Math.imul(Wt,yr),_=_+Math.imul(Lt,tr)|0,tt=Math.imul(Lt,yr),lt=lt+Math.imul(Fr,Nr)|0,_=_+Math.imul(Fr,zr)|0,_=_+Math.imul(_i,Nr)|0,tt=tt+Math.imul(_i,zr)|0,lt=lt+Math.imul(Br,Kr)|0,_=_+Math.imul(Br,nn)|0,_=_+Math.imul(Gr,Kr)|0,tt=tt+Math.imul(Gr,nn)|0,lt=lt+Math.imul(Dr,Zr)|0,_=_+Math.imul(Dr,on)|0,_=_+Math.imul(Qr,Zr)|0,tt=tt+Math.imul(Qr,on)|0,lt=lt+Math.imul(Lr,en)|0,_=_+Math.imul(Lr,ln)|0,_=_+Math.imul(wr,en)|0,tt=tt+Math.imul(wr,ln)|0,lt=lt+Math.imul(hr,$t)|0,_=_+Math.imul(hr,or)|0,_=_+Math.imul(Ar,$t)|0,tt=tt+Math.imul(Ar,or)|0,lt=lt+Math.imul(Bt,Vr)|0,_=_+Math.imul(Bt,Hr)|0,_=_+Math.imul(Jt,Vr)|0,tt=tt+Math.imul(Jt,Hr)|0,lt=lt+Math.imul(Kt,Ur)|0,_=_+Math.imul(Kt,tn)|0,_=_+Math.imul(jt,Ur)|0,tt=tt+Math.imul(jt,tn)|0;var ur=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(ur>>>26)|0,ur&=67108863,lt=Math.imul(Wt,Nr),_=Math.imul(Wt,zr),_=_+Math.imul(Lt,Nr)|0,tt=Math.imul(Lt,zr),lt=lt+Math.imul(Fr,Kr)|0,_=_+Math.imul(Fr,nn)|0,_=_+Math.imul(_i,Kr)|0,tt=tt+Math.imul(_i,nn)|0,lt=lt+Math.imul(Br,Zr)|0,_=_+Math.imul(Br,on)|0,_=_+Math.imul(Gr,Zr)|0,tt=tt+Math.imul(Gr,on)|0,lt=lt+Math.imul(Dr,en)|0,_=_+Math.imul(Dr,ln)|0,_=_+Math.imul(Qr,en)|0,tt=tt+Math.imul(Qr,ln)|0,lt=lt+Math.imul(Lr,$t)|0,_=_+Math.imul(Lr,or)|0,_=_+Math.imul(wr,$t)|0,tt=tt+Math.imul(wr,or)|0,lt=lt+Math.imul(hr,Vr)|0,_=_+Math.imul(hr,Hr)|0,_=_+Math.imul(Ar,Vr)|0,tt=tt+Math.imul(Ar,Hr)|0,lt=lt+Math.imul(Bt,Ur)|0,_=_+Math.imul(Bt,tn)|0,_=_+Math.imul(Jt,Ur)|0,tt=tt+Math.imul(Jt,tn)|0;var Cr=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,lt=Math.imul(Wt,Kr),_=Math.imul(Wt,nn),_=_+Math.imul(Lt,Kr)|0,tt=Math.imul(Lt,nn),lt=lt+Math.imul(Fr,Zr)|0,_=_+Math.imul(Fr,on)|0,_=_+Math.imul(_i,Zr)|0,tt=tt+Math.imul(_i,on)|0,lt=lt+Math.imul(Br,en)|0,_=_+Math.imul(Br,ln)|0,_=_+Math.imul(Gr,en)|0,tt=tt+Math.imul(Gr,ln)|0,lt=lt+Math.imul(Dr,$t)|0,_=_+Math.imul(Dr,or)|0,_=_+Math.imul(Qr,$t)|0,tt=tt+Math.imul(Qr,or)|0,lt=lt+Math.imul(Lr,Vr)|0,_=_+Math.imul(Lr,Hr)|0,_=_+Math.imul(wr,Vr)|0,tt=tt+Math.imul(wr,Hr)|0,lt=lt+Math.imul(hr,Ur)|0,_=_+Math.imul(hr,tn)|0,_=_+Math.imul(Ar,Ur)|0,tt=tt+Math.imul(Ar,tn)|0;var $r=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+($r>>>26)|0,$r&=67108863,lt=Math.imul(Wt,Zr),_=Math.imul(Wt,on),_=_+Math.imul(Lt,Zr)|0,tt=Math.imul(Lt,on),lt=lt+Math.imul(Fr,en)|0,_=_+Math.imul(Fr,ln)|0,_=_+Math.imul(_i,en)|0,tt=tt+Math.imul(_i,ln)|0,lt=lt+Math.imul(Br,$t)|0,_=_+Math.imul(Br,or)|0,_=_+Math.imul(Gr,$t)|0,tt=tt+Math.imul(Gr,or)|0,lt=lt+Math.imul(Dr,Vr)|0,_=_+Math.imul(Dr,Hr)|0,_=_+Math.imul(Qr,Vr)|0,tt=tt+Math.imul(Qr,Hr)|0,lt=lt+Math.imul(Lr,Ur)|0,_=_+Math.imul(Lr,tn)|0,_=_+Math.imul(wr,Ur)|0,tt=tt+Math.imul(wr,tn)|0;var dn=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(dn>>>26)|0,dn&=67108863,lt=Math.imul(Wt,en),_=Math.imul(Wt,ln),_=_+Math.imul(Lt,en)|0,tt=Math.imul(Lt,ln),lt=lt+Math.imul(Fr,$t)|0,_=_+Math.imul(Fr,or)|0,_=_+Math.imul(_i,$t)|0,tt=tt+Math.imul(_i,or)|0,lt=lt+Math.imul(Br,Vr)|0,_=_+Math.imul(Br,Hr)|0,_=_+Math.imul(Gr,Vr)|0,tt=tt+Math.imul(Gr,Hr)|0,lt=lt+Math.imul(Dr,Ur)|0,_=_+Math.imul(Dr,tn)|0,_=_+Math.imul(Qr,Ur)|0,tt=tt+Math.imul(Qr,tn)|0;var rn=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(rn>>>26)|0,rn&=67108863,lt=Math.imul(Wt,$t),_=Math.imul(Wt,or),_=_+Math.imul(Lt,$t)|0,tt=Math.imul(Lt,or),lt=lt+Math.imul(Fr,Vr)|0,_=_+Math.imul(Fr,Hr)|0,_=_+Math.imul(_i,Vr)|0,tt=tt+Math.imul(_i,Hr)|0,lt=lt+Math.imul(Br,Ur)|0,_=_+Math.imul(Br,tn)|0,_=_+Math.imul(Gr,Ur)|0,tt=tt+Math.imul(Gr,tn)|0;var Sn=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,lt=Math.imul(Wt,Vr),_=Math.imul(Wt,Hr),_=_+Math.imul(Lt,Vr)|0,tt=Math.imul(Lt,Hr),lt=lt+Math.imul(Fr,Ur)|0,_=_+Math.imul(Fr,tn)|0,_=_+Math.imul(_i,Ur)|0,tt=tt+Math.imul(_i,tn)|0;var In=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(In>>>26)|0,In&=67108863,lt=Math.imul(Wt,Ur),_=Math.imul(Wt,tn),_=_+Math.imul(Lt,Ur)|0,tt=Math.imul(Lt,tn);var Cn=(mt+lt|0)+((_&8191)<<13)|0;return mt=(tt+(_>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,pt[0]=jn,pt[1]=Un,pt[2]=ao,pt[3]=co,pt[4]=ro,pt[5]=vo,pt[6]=oo,pt[7]=mo,pt[8]=ho,pt[9]=go,pt[10]=bo,pt[11]=ur,pt[12]=Cr,pt[13]=$r,pt[14]=dn,pt[15]=rn,pt[16]=Sn,pt[17]=In,pt[18]=Cn,mt!==0&&(pt[19]=mt,$.length++),$};Math.imul||(rt=vt);function bt(nt,s,b){b.negative=s.negative^nt.negative,b.length=nt.length+s.length;for(var $=0,_e=0,it=0;it<b.length-1;it++){var pt=_e;_e=0;for(var mt=$&67108863,lt=Math.min(it,s.length-1),_=Math.max(0,it-nt.length+1);_<=lt;_++){var tt=it-_,Tt=nt.words[tt]|0,It=s.words[_]|0,Nt=Tt*It,Ut=Nt&67108863;pt=pt+(Nt/67108864|0)|0,Ut=Ut+mt|0,mt=Ut&67108863,pt=pt+(Ut>>>26)|0,_e+=pt>>>26,pt&=67108863}b.words[it]=mt,$=pt,pt=_e}return $!==0?b.words[it]=$:b.length--,b.strip()}function ht(nt,s,b){var $=new wt;return $.mulp(nt,s,b)}d.prototype.mulTo=function(s,b){var $,_e=this.length+s.length;return this.length===10&&s.length===10?$=rt(this,s,b):_e<63?$=vt(this,s,b):_e<1024?$=bt(this,s,b):$=ht(this,s,b),$};function wt(nt,s){this.x=nt,this.y=s}wt.prototype.makeRBT=function(s){for(var b=new Array(s),$=d.prototype._countBits(s)-1,_e=0;_e<s;_e++)b[_e]=this.revBin(_e,$,s);return b},wt.prototype.revBin=function(s,b,$){if(s===0||s===$-1)return s;for(var _e=0,it=0;it<b;it++)_e|=(s&1)<<b-it-1,s>>=1;return _e},wt.prototype.permute=function(s,b,$,_e,it,pt){for(var mt=0;mt<pt;mt++)_e[mt]=b[s[mt]],it[mt]=$[s[mt]]},wt.prototype.transform=function(s,b,$,_e,it,pt){this.permute(pt,s,b,$,_e,it);for(var mt=1;mt<it;mt<<=1)for(var lt=mt<<1,_=Math.cos(2*Math.PI/lt),tt=Math.sin(2*Math.PI/lt),Tt=0;Tt<it;Tt+=lt)for(var It=_,Nt=tt,Ut=0;Ut<mt;Ut++){var Gt=$[Tt+Ut],Pt=_e[Tt+Ut],qt=$[Tt+Ut+mt],Kt=_e[Tt+Ut+mt],jt=It*qt-Nt*Kt;Kt=It*Kt+Nt*qt,qt=jt,$[Tt+Ut]=Gt+qt,_e[Tt+Ut]=Pt+Kt,$[Tt+Ut+mt]=Gt-qt,_e[Tt+Ut+mt]=Pt-Kt,Ut!==lt&&(jt=_*It-tt*Nt,Nt=_*Nt+tt*It,It=jt)}},wt.prototype.guessLen13b=function(s,b){var $=Math.max(b,s)|1,_e=$&1,it=0;for($=$/2|0;$;$=$>>>1)it++;return 1<<it+1+_e},wt.prototype.conjugate=function(s,b,$){if(!($<=1))for(var _e=0;_e<$/2;_e++){var it=s[_e];s[_e]=s[$-_e-1],s[$-_e-1]=it,it=b[_e],b[_e]=-b[$-_e-1],b[$-_e-1]=-it}},wt.prototype.normalize13b=function(s,b){for(var $=0,_e=0;_e<b/2;_e++){var it=Math.round(s[2*_e+1]/b)*8192+Math.round(s[2*_e]/b)+$;s[_e]=it&67108863,it<67108864?$=0:$=it/67108864|0}return s},wt.prototype.convert13b=function(s,b,$,_e){for(var it=0,pt=0;pt<b;pt++)it=it+(s[pt]|0),$[2*pt]=it&8191,it=it>>>13,$[2*pt+1]=it&8191,it=it>>>13;for(pt=2*b;pt<_e;++pt)$[pt]=0;c(it===0),c((it&-8192)===0)},wt.prototype.stub=function(s){for(var b=new Array(s),$=0;$<s;$++)b[$]=0;return b},wt.prototype.mulp=function(s,b,$){var _e=2*this.guessLen13b(s.length,b.length),it=this.makeRBT(_e),pt=this.stub(_e),mt=new Array(_e),lt=new Array(_e),_=new Array(_e),tt=new Array(_e),Tt=new Array(_e),It=new Array(_e),Nt=$.words;Nt.length=_e,this.convert13b(s.words,s.length,mt,_e),this.convert13b(b.words,b.length,tt,_e),this.transform(mt,pt,lt,_,_e,it),this.transform(tt,pt,Tt,It,_e,it);for(var Ut=0;Ut<_e;Ut++){var Gt=lt[Ut]*Tt[Ut]-_[Ut]*It[Ut];_[Ut]=lt[Ut]*It[Ut]+_[Ut]*Tt[Ut],lt[Ut]=Gt}return this.conjugate(lt,_,_e),this.transform(lt,_,Nt,pt,_e,it),this.conjugate(Nt,pt,_e),this.normalize13b(Nt,_e),$.negative=s.negative^b.negative,$.length=s.length+b.length,$.strip()},d.prototype.mul=function(s){var b=new d(null);return b.words=new Array(this.length+s.length),this.mulTo(s,b)},d.prototype.mulf=function(s){var b=new d(null);return b.words=new Array(this.length+s.length),ht(this,s,b)},d.prototype.imul=function(s){return this.clone().mulTo(s,this)},d.prototype.imuln=function(s){c(typeof s=="number"),c(s<67108864);for(var b=0,$=0;$<this.length;$++){var _e=(this.words[$]|0)*s,it=(_e&67108863)+(b&67108863);b>>=26,b+=_e/67108864|0,b+=it>>>26,this.words[$]=it&67108863}return b!==0&&(this.words[$]=b,this.length++),this},d.prototype.muln=function(s){return this.clone().imuln(s)},d.prototype.sqr=function(){return this.mul(this)},d.prototype.isqr=function(){return this.imul(this.clone())},d.prototype.pow=function(s){var b=yt(s);if(b.length===0)return new d(1);for(var $=this,_e=0;_e<b.length&&b[_e]===0;_e++,$=$.sqr());if(++_e<b.length)for(var it=$.sqr();_e<b.length;_e++,it=it.sqr())b[_e]!==0&&($=$.mul(it));return $},d.prototype.iushln=function(s){c(typeof s=="number"&&s>=0);var b=s%26,$=(s-b)/26,_e=67108863>>>26-b<<26-b,it;if(b!==0){var pt=0;for(it=0;it<this.length;it++){var mt=this.words[it]&_e,lt=(this.words[it]|0)-mt<<b;this.words[it]=lt|pt,pt=mt>>>26-b}pt&&(this.words[it]=pt,this.length++)}if($!==0){for(it=this.length-1;it>=0;it--)this.words[it+$]=this.words[it];for(it=0;it<$;it++)this.words[it]=0;this.length+=$}return this.strip()},d.prototype.ishln=function(s){return c(this.negative===0),this.iushln(s)},d.prototype.iushrn=function(s,b,$){c(typeof s=="number"&&s>=0);var _e;b?_e=(b-b%26)/26:_e=0;var it=s%26,pt=Math.min((s-it)/26,this.length),mt=67108863^67108863>>>it<<it,lt=$;if(_e-=pt,_e=Math.max(0,_e),lt){for(var _=0;_<pt;_++)lt.words[_]=this.words[_];lt.length=pt}if(pt!==0)if(this.length>pt)for(this.length-=pt,_=0;_<this.length;_++)this.words[_]=this.words[_+pt];else this.words[0]=0,this.length=1;var tt=0;for(_=this.length-1;_>=0&&(tt!==0||_>=_e);_--){var Tt=this.words[_]|0;this.words[_]=tt<<26-it|Tt>>>it,tt=Tt&mt}return lt&&tt!==0&&(lt.words[lt.length++]=tt),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},d.prototype.ishrn=function(s,b,$){return c(this.negative===0),this.iushrn(s,b,$)},d.prototype.shln=function(s){return this.clone().ishln(s)},d.prototype.ushln=function(s){return this.clone().iushln(s)},d.prototype.shrn=function(s){return this.clone().ishrn(s)},d.prototype.ushrn=function(s){return this.clone().iushrn(s)},d.prototype.testn=function(s){c(typeof s=="number"&&s>=0);var b=s%26,$=(s-b)/26,_e=1<<b;if(this.length<=$)return!1;var it=this.words[$];return!!(it&_e)},d.prototype.imaskn=function(s){c(typeof s=="number"&&s>=0);var b=s%26,$=(s-b)/26;if(c(this.negative===0,"imaskn works only with positive numbers"),this.length<=$)return this;if(b!==0&&$++,this.length=Math.min($,this.length),b!==0){var _e=67108863^67108863>>>b<<b;this.words[this.length-1]&=_e}return this.strip()},d.prototype.maskn=function(s){return this.clone().imaskn(s)},d.prototype.iaddn=function(s){return c(typeof s=="number"),c(s<67108864),s<0?this.isubn(-s):this.negative!==0?this.length===1&&(this.words[0]|0)<s?(this.words[0]=s-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(s),this.negative=1,this):this._iaddn(s)},d.prototype._iaddn=function(s){this.words[0]+=s;for(var b=0;b<this.length&&this.words[b]>=67108864;b++)this.words[b]-=67108864,b===this.length-1?this.words[b+1]=1:this.words[b+1]++;return this.length=Math.max(this.length,b+1),this},d.prototype.isubn=function(s){if(c(typeof s=="number"),c(s<67108864),s<0)return this.iaddn(-s);if(this.negative!==0)return this.negative=0,this.iaddn(s),this.negative=1,this;if(this.words[0]-=s,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var b=0;b<this.length&&this.words[b]<0;b++)this.words[b]+=67108864,this.words[b+1]-=1;return this.strip()},d.prototype.addn=function(s){return this.clone().iaddn(s)},d.prototype.subn=function(s){return this.clone().isubn(s)},d.prototype.iabs=function(){return this.negative=0,this},d.prototype.abs=function(){return this.clone().iabs()},d.prototype._ishlnsubmul=function(s,b,$){var _e=s.length+$,it;this._expand(_e);var pt,mt=0;for(it=0;it<s.length;it++){pt=(this.words[it+$]|0)+mt;var lt=(s.words[it]|0)*b;pt-=lt&67108863,mt=(pt>>26)-(lt/67108864|0),this.words[it+$]=pt&67108863}for(;it<this.length-$;it++)pt=(this.words[it+$]|0)+mt,mt=pt>>26,this.words[it+$]=pt&67108863;if(mt===0)return this.strip();for(c(mt===-1),mt=0,it=0;it<this.length;it++)pt=-(this.words[it]|0)+mt,mt=pt>>26,this.words[it]=pt&67108863;return this.negative=1,this.strip()},d.prototype._wordDiv=function(s,b){var $=this.length-s.length,_e=this.clone(),it=s,pt=it.words[it.length-1]|0,mt=this._countBits(pt);$=26-mt,$!==0&&(it=it.ushln($),_e.iushln($),pt=it.words[it.length-1]|0);var lt=_e.length-it.length,_;if(b!=="mod"){_=new d(null),_.length=lt+1,_.words=new Array(_.length);for(var tt=0;tt<_.length;tt++)_.words[tt]=0}var Tt=_e.clone()._ishlnsubmul(it,1,lt);Tt.negative===0&&(_e=Tt,_&&(_.words[lt]=1));for(var It=lt-1;It>=0;It--){var Nt=(_e.words[it.length+It]|0)*67108864+(_e.words[it.length+It-1]|0);for(Nt=Math.min(Nt/pt|0,67108863),_e._ishlnsubmul(it,Nt,It);_e.negative!==0;)Nt--,_e.negative=0,_e._ishlnsubmul(it,1,It),_e.isZero()||(_e.negative^=1);_&&(_.words[It]=Nt)}return _&&_.strip(),_e.strip(),b!=="div"&&$!==0&&_e.iushrn($),{div:_||null,mod:_e}},d.prototype.divmod=function(s,b,$){if(c(!s.isZero()),this.isZero())return{div:new d(0),mod:new d(0)};var _e,it,pt;return this.negative!==0&&s.negative===0?(pt=this.neg().divmod(s,b),b!=="mod"&&(_e=pt.div.neg()),b!=="div"&&(it=pt.mod.neg(),$&&it.negative!==0&&it.iadd(s)),{div:_e,mod:it}):this.negative===0&&s.negative!==0?(pt=this.divmod(s.neg(),b),b!=="mod"&&(_e=pt.div.neg()),{div:_e,mod:pt.mod}):this.negative&s.negative?(pt=this.neg().divmod(s.neg(),b),b!=="div"&&(it=pt.mod.neg(),$&&it.negative!==0&&it.isub(s)),{div:pt.div,mod:it}):s.length>this.length||this.cmp(s)<0?{div:new d(0),mod:this}:s.length===1?b==="div"?{div:this.divn(s.words[0]),mod:null}:b==="mod"?{div:null,mod:new d(this.modn(s.words[0]))}:{div:this.divn(s.words[0]),mod:new d(this.modn(s.words[0]))}:this._wordDiv(s,b)},d.prototype.div=function(s){return this.divmod(s,"div",!1).div},d.prototype.mod=function(s){return this.divmod(s,"mod",!1).mod},d.prototype.umod=function(s){return this.divmod(s,"mod",!0).mod},d.prototype.divRound=function(s){var b=this.divmod(s);if(b.mod.isZero())return b.div;var $=b.div.negative!==0?b.mod.isub(s):b.mod,_e=s.ushrn(1),it=s.andln(1),pt=$.cmp(_e);return pt<0||it===1&&pt===0?b.div:b.div.negative!==0?b.div.isubn(1):b.div.iaddn(1)},d.prototype.modn=function(s){c(s<=67108863);for(var b=(1<<26)%s,$=0,_e=this.length-1;_e>=0;_e--)$=(b*$+(this.words[_e]|0))%s;return $},d.prototype.idivn=function(s){c(s<=67108863);for(var b=0,$=this.length-1;$>=0;$--){var _e=(this.words[$]|0)+b*67108864;this.words[$]=_e/s|0,b=_e%s}return this.strip()},d.prototype.divn=function(s){return this.clone().idivn(s)},d.prototype.egcd=function(s){c(s.negative===0),c(!s.isZero());var b=this,$=s.clone();b.negative!==0?b=b.umod(s):b=b.clone();for(var _e=new d(1),it=new d(0),pt=new d(0),mt=new d(1),lt=0;b.isEven()&&$.isEven();)b.iushrn(1),$.iushrn(1),++lt;for(var _=$.clone(),tt=b.clone();!b.isZero();){for(var Tt=0,It=1;!(b.words[0]&It)&&Tt<26;++Tt,It<<=1);if(Tt>0)for(b.iushrn(Tt);Tt-- >0;)(_e.isOdd()||it.isOdd())&&(_e.iadd(_),it.isub(tt)),_e.iushrn(1),it.iushrn(1);for(var Nt=0,Ut=1;!($.words[0]&Ut)&&Nt<26;++Nt,Ut<<=1);if(Nt>0)for($.iushrn(Nt);Nt-- >0;)(pt.isOdd()||mt.isOdd())&&(pt.iadd(_),mt.isub(tt)),pt.iushrn(1),mt.iushrn(1);b.cmp($)>=0?(b.isub($),_e.isub(pt),it.isub(mt)):($.isub(b),pt.isub(_e),mt.isub(it))}return{a:pt,b:mt,gcd:$.iushln(lt)}},d.prototype._invmp=function(s){c(s.negative===0),c(!s.isZero());var b=this,$=s.clone();b.negative!==0?b=b.umod(s):b=b.clone();for(var _e=new d(1),it=new d(0),pt=$.clone();b.cmpn(1)>0&&$.cmpn(1)>0;){for(var mt=0,lt=1;!(b.words[0]&lt)&&mt<26;++mt,lt<<=1);if(mt>0)for(b.iushrn(mt);mt-- >0;)_e.isOdd()&&_e.iadd(pt),_e.iushrn(1);for(var _=0,tt=1;!($.words[0]&tt)&&_<26;++_,tt<<=1);if(_>0)for($.iushrn(_);_-- >0;)it.isOdd()&&it.iadd(pt),it.iushrn(1);b.cmp($)>=0?(b.isub($),_e.isub(it)):($.isub(b),it.isub(_e))}var Tt;return b.cmpn(1)===0?Tt=_e:Tt=it,Tt.cmpn(0)<0&&Tt.iadd(s),Tt},d.prototype.gcd=function(s){if(this.isZero())return s.abs();if(s.isZero())return this.abs();var b=this.clone(),$=s.clone();b.negative=0,$.negative=0;for(var _e=0;b.isEven()&&$.isEven();_e++)b.iushrn(1),$.iushrn(1);do{for(;b.isEven();)b.iushrn(1);for(;$.isEven();)$.iushrn(1);var it=b.cmp($);if(it<0){var pt=b;b=$,$=pt}else if(it===0||$.cmpn(1)===0)break;b.isub($)}while(!0);return $.iushln(_e)},d.prototype.invm=function(s){return this.egcd(s).a.umod(s)},d.prototype.isEven=function(){return(this.words[0]&1)===0},d.prototype.isOdd=function(){return(this.words[0]&1)===1},d.prototype.andln=function(s){return this.words[0]&s},d.prototype.bincn=function(s){c(typeof s=="number");var b=s%26,$=(s-b)/26,_e=1<<b;if(this.length<=$)return this._expand($+1),this.words[$]|=_e,this;for(var it=_e,pt=$;it!==0&&pt<this.length;pt++){var mt=this.words[pt]|0;mt+=it,it=mt>>>26,mt&=67108863,this.words[pt]=mt}return it!==0&&(this.words[pt]=it,this.length++),this},d.prototype.isZero=function(){return this.length===1&&this.words[0]===0},d.prototype.cmpn=function(s){var b=s<0;if(this.negative!==0&&!b)return-1;if(this.negative===0&&b)return 1;this.strip();var $;if(this.length>1)$=1;else{b&&(s=-s),c(s<=67108863,"Number is too big");var _e=this.words[0]|0;$=_e===s?0:_e<s?-1:1}return this.negative!==0?-$|0:$},d.prototype.cmp=function(s){if(this.negative!==0&&s.negative===0)return-1;if(this.negative===0&&s.negative!==0)return 1;var b=this.ucmp(s);return this.negative!==0?-b|0:b},d.prototype.ucmp=function(s){if(this.length>s.length)return 1;if(this.length<s.length)return-1;for(var b=0,$=this.length-1;$>=0;$--){var _e=this.words[$]|0,it=s.words[$]|0;if(_e!==it){_e<it?b=-1:_e>it&&(b=1);break}}return b},d.prototype.gtn=function(s){return this.cmpn(s)===1},d.prototype.gt=function(s){return this.cmp(s)===1},d.prototype.gten=function(s){return this.cmpn(s)>=0},d.prototype.gte=function(s){return this.cmp(s)>=0},d.prototype.ltn=function(s){return this.cmpn(s)===-1},d.prototype.lt=function(s){return this.cmp(s)===-1},d.prototype.lten=function(s){return this.cmpn(s)<=0},d.prototype.lte=function(s){return this.cmp(s)<=0},d.prototype.eqn=function(s){return this.cmpn(s)===0},d.prototype.eq=function(s){return this.cmp(s)===0},d.red=function(s){return new _t(s)},d.prototype.toRed=function(s){return c(!this.red,"Already a number in reduction context"),c(this.negative===0,"red works only with positives"),s.convertTo(this)._forceRed(s)},d.prototype.fromRed=function(){return c(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},d.prototype._forceRed=function(s){return this.red=s,this},d.prototype.forceRed=function(s){return c(!this.red,"Already a number in reduction context"),this._forceRed(s)},d.prototype.redAdd=function(s){return c(this.red,"redAdd works only with red numbers"),this.red.add(this,s)},d.prototype.redIAdd=function(s){return c(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,s)},d.prototype.redSub=function(s){return c(this.red,"redSub works only with red numbers"),this.red.sub(this,s)},d.prototype.redISub=function(s){return c(this.red,"redISub works only with red numbers"),this.red.isub(this,s)},d.prototype.redShl=function(s){return c(this.red,"redShl works only with red numbers"),this.red.shl(this,s)},d.prototype.redMul=function(s){return c(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.mul(this,s)},d.prototype.redIMul=function(s){return c(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.imul(this,s)},d.prototype.redSqr=function(){return c(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},d.prototype.redISqr=function(){return c(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},d.prototype.redSqrt=function(){return c(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},d.prototype.redInvm=function(){return c(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},d.prototype.redNeg=function(){return c(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},d.prototype.redPow=function(s){return c(this.red&&!s.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,s)};var At={k256:null,p224:null,p192:null,p25519:null};function Ct(nt,s){this.name=nt,this.p=new d(s,16),this.n=this.p.bitLength(),this.k=new d(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Ct.prototype._tmp=function(){var s=new d(null);return s.words=new Array(Math.ceil(this.n/13)),s},Ct.prototype.ireduce=function(s){var b=s,$;do this.split(b,this.tmp),b=this.imulK(b),b=b.iadd(this.tmp),$=b.bitLength();while($>this.n);var _e=$<this.n?-1:b.ucmp(this.p);return _e===0?(b.words[0]=0,b.length=1):_e>0?b.isub(this.p):b.strip!==void 0?b.strip():b._strip(),b},Ct.prototype.split=function(s,b){s.iushrn(this.n,0,b)},Ct.prototype.imulK=function(s){return s.imul(this.k)};function dt(){Ct.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}j(dt,Ct),dt.prototype.split=function(s,b){for(var $=4194303,_e=Math.min(s.length,9),it=0;it<_e;it++)b.words[it]=s.words[it];if(b.length=_e,s.length<=9){s.words[0]=0,s.length=1;return}var pt=s.words[9];for(b.words[b.length++]=pt&$,it=10;it<s.length;it++){var mt=s.words[it]|0;s.words[it-10]=(mt&$)<<4|pt>>>22,pt=mt}pt>>>=22,s.words[it-10]=pt,pt===0&&s.length>10?s.length-=10:s.length-=9},dt.prototype.imulK=function(s){s.words[s.length]=0,s.words[s.length+1]=0,s.length+=2;for(var b=0,$=0;$<s.length;$++){var _e=s.words[$]|0;b+=_e*977,s.words[$]=b&67108863,b=_e*64+(b/67108864|0)}return s.words[s.length-1]===0&&(s.length--,s.words[s.length-1]===0&&s.length--),s};function Et(){Ct.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}j(Et,Ct);function Rt(){Ct.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}j(Rt,Ct);function Mt(){Ct.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}j(Mt,Ct),Mt.prototype.imulK=function(s){for(var b=0,$=0;$<s.length;$++){var _e=(s.words[$]|0)*19+b,it=_e&67108863;_e>>>=26,s.words[$]=it,b=_e}return b!==0&&(s.words[s.length++]=b),s},d._prime=function(s){if(At[s])return At[s];var b;if(s==="k256")b=new dt;else if(s==="p224")b=new Et;else if(s==="p192")b=new Rt;else if(s==="p25519")b=new Mt;else throw new Error("Unknown prime "+s);return At[s]=b,b};function _t(nt){if(typeof nt=="string"){var s=d._prime(nt);this.m=s.p,this.prime=s}else c(nt.gtn(1),"modulus must be greater than 1"),this.m=nt,this.prime=null}_t.prototype._verify1=function(s){c(s.negative===0,"red works only with positives"),c(s.red,"red works only with red numbers")},_t.prototype._verify2=function(s,b){c((s.negative|b.negative)===0,"red works only with positives"),c(s.red&&s.red===b.red,"red works only with red numbers")},_t.prototype.imod=function(s){return this.prime?this.prime.ireduce(s)._forceRed(this):s.umod(this.m)._forceRed(this)},_t.prototype.neg=function(s){return s.isZero()?s.clone():this.m.sub(s)._forceRed(this)},_t.prototype.add=function(s,b){this._verify2(s,b);var $=s.add(b);return $.cmp(this.m)>=0&&$.isub(this.m),$._forceRed(this)},_t.prototype.iadd=function(s,b){this._verify2(s,b);var $=s.iadd(b);return $.cmp(this.m)>=0&&$.isub(this.m),$},_t.prototype.sub=function(s,b){this._verify2(s,b);var $=s.sub(b);return $.cmpn(0)<0&&$.iadd(this.m),$._forceRed(this)},_t.prototype.isub=function(s,b){this._verify2(s,b);var $=s.isub(b);return $.cmpn(0)<0&&$.iadd(this.m),$},_t.prototype.shl=function(s,b){return this._verify1(s),this.imod(s.ushln(b))},_t.prototype.imul=function(s,b){return this._verify2(s,b),this.imod(s.imul(b))},_t.prototype.mul=function(s,b){return this._verify2(s,b),this.imod(s.mul(b))},_t.prototype.isqr=function(s){return this.imul(s,s.clone())},_t.prototype.sqr=function(s){return this.mul(s,s)},_t.prototype.sqrt=function(s){if(s.isZero())return s.clone();var b=this.m.andln(3);if(c(b%2===1),b===3){var $=this.m.add(new d(1)).iushrn(2);return this.pow(s,$)}for(var _e=this.m.subn(1),it=0;!_e.isZero()&&_e.andln(1)===0;)it++,_e.iushrn(1);c(!_e.isZero());var pt=new d(1).toRed(this),mt=pt.redNeg(),lt=this.m.subn(1).iushrn(1),_=this.m.bitLength();for(_=new d(2*_*_).toRed(this);this.pow(_,lt).cmp(mt)!==0;)_.redIAdd(mt);for(var tt=this.pow(_,_e),Tt=this.pow(s,_e.addn(1).iushrn(1)),It=this.pow(s,_e),Nt=it;It.cmp(pt)!==0;){for(var Ut=It,Gt=0;Ut.cmp(pt)!==0;Gt++)Ut=Ut.redSqr();c(Gt<Nt);var Pt=this.pow(tt,new d(1).iushln(Nt-Gt-1));Tt=Tt.redMul(Pt),tt=Pt.redSqr(),It=It.redMul(tt),Nt=Gt}return Tt},_t.prototype.invm=function(s){var b=s._invmp(this.m);return b.negative!==0?(b.negative=0,this.imod(b).redNeg()):this.imod(b)},_t.prototype.pow=function(s,b){if(b.isZero())return new d(1).toRed(this);if(b.cmpn(1)===0)return s.clone();var $=4,_e=new Array(1<<$);_e[0]=new d(1).toRed(this),_e[1]=s;for(var it=2;it<_e.length;it++)_e[it]=this.mul(_e[it-1],s);var pt=_e[0],mt=0,lt=0,_=b.bitLength()%26;for(_===0&&(_=26),it=b.length-1;it>=0;it--){for(var tt=b.words[it],Tt=_-1;Tt>=0;Tt--){var It=tt>>Tt&1;if(pt!==_e[0]&&(pt=this.sqr(pt)),It===0&&mt===0){lt=0;continue}mt<<=1,mt|=It,lt++,!(lt!==$&&(it!==0||Tt!==0))&&(pt=this.mul(pt,_e[mt]),lt=0,mt=0)}_=26}return pt},_t.prototype.convertTo=function(s){var b=s.umod(this.m);return b===s?b.clone():b},_t.prototype.convertFrom=function(s){var b=s.clone();return b.red=null,b},d.mont=function(s){return new kt(s)};function kt(nt){_t.call(this,nt),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new d(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}j(kt,_t),kt.prototype.convertTo=function(s){return this.imod(s.ushln(this.shift))},kt.prototype.convertFrom=function(s){var b=this.imod(s.mul(this.rinv));return b.red=null,b},kt.prototype.imul=function(s,b){if(s.isZero()||b.isZero())return s.words[0]=0,s.length=1,s;var $=s.imul(b),_e=$.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),it=$.isub(_e).iushrn(this.shift),pt=it;return it.cmp(this.m)>=0?pt=it.isub(this.m):it.cmpn(0)<0&&(pt=it.iadd(this.m)),pt._forceRed(this)},kt.prototype.mul=function(s,b){if(s.isZero()||b.isZero())return new d(0)._forceRed(this);var $=s.mul(b),_e=$.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),it=$.isub(_e).iushrn(this.shift),pt=it;return it.cmp(this.m)>=0?pt=it.isub(this.m):it.cmpn(0)<0&&(pt=it.iadd(this.m)),pt._forceRed(this)},kt.prototype.invm=function(s){var b=this.imod(s._invmp(this.m).mul(this.r2));return b._forceRed(this)}})(o,commonjsGlobal)}(bn$2)),bn$2.exports}var api$1={},vmBrowserify={},hasRequiredVmBrowserify;function requireVmBrowserify(){return hasRequiredVmBrowserify||(hasRequiredVmBrowserify=1,function(exports){var indexOf=function(o,e){if(o.indexOf)return o.indexOf(e);for(var a=0;a<o.length;a++)if(o[a]===e)return a;return-1},Object_keys=function(o){if(Object.keys)return Object.keys(o);var e=[];for(var a in o)e.push(a);return e},forEach=function(o,e){if(o.forEach)return o.forEach(e);for(var a=0;a<o.length;a++)e(o[a],a,o)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(o,e,a){Object.defineProperty(o,e,{writable:!0,enumerable:!1,configurable:!0,value:a})}}catch{return function(e,a,c){e[a]=c}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports.Script=function(e){if(!(this instanceof Script))return new Script(e);this.code=e};Script.prototype.runInContext=function(o){if(!(o instanceof Context))throw new TypeError("needs a 'context' argument.");var e=document.createElement("iframe");e.style||(e.style={}),e.style.display="none",document.body.appendChild(e);var a=e.contentWindow,c=a.eval,j=a.execScript;!c&&j&&(j.call(a,"null"),c=a.eval),forEach(Object_keys(o),function(at){a[at]=o[at]}),forEach(globals,function(at){o[at]&&(a[at]=o[at])});var d=Object_keys(a),et=c.call(a,this.code);return forEach(Object_keys(a),function(at){(at in o||indexOf(d,at)===-1)&&(o[at]=a[at])}),forEach(globals,function(at){at in o||defineProp(o,at,a[at])}),document.body.removeChild(e),et},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(o){var e=Script.createContext(o),a=this.runInContext(e);return o&&forEach(Object_keys(e),function(c){o[c]=e[c]}),a},forEach(Object_keys(Script.prototype),function(o){exports[o]=Script[o]=function(e){var a=Script(e);return a[o].apply(a,[].slice.call(arguments,1))}}),exports.isContext=function(o){return o instanceof Context},exports.createScript=function(o){return exports.Script(o)},exports.createContext=Script.createContext=function(o){var e=new Context;return typeof o=="object"&&forEach(Object_keys(o),function(a){e[a]=o[a]}),e}}(vmBrowserify)),vmBrowserify}var hasRequiredApi;function requireApi(){return hasRequiredApi||(hasRequiredApi=1,function(o){var e=requireAsn1$1(),a=requireInherits_browser(),c=o;c.define=function(et,at){return new j(et,at)};function j(d,et){this.name=d,this.body=et,this.decoders={},this.encoders={}}j.prototype._createNamed=function(et){var at;try{at=requireVmBrowserify().runInThisContext("(function "+this.name+`(entity) {
  this._initNamed(entity);
})`)}catch{at=function(ct){this._initNamed(ct)}}return a(at,et),at.prototype._initNamed=function(ct){et.call(this,ct)},new at(this)},j.prototype._getDecoder=function(et){return et=et||"der",this.decoders.hasOwnProperty(et)||(this.decoders[et]=this._createNamed(e.decoders[et])),this.decoders[et]},j.prototype.decode=function(et,at,st){return this._getDecoder(at).decode(et,st)},j.prototype._getEncoder=function(et){return et=et||"der",this.encoders.hasOwnProperty(et)||(this.encoders[et]=this._createNamed(e.encoders[et])),this.encoders[et]},j.prototype.encode=function(et,at,st){return this._getEncoder(at).encode(et,st)}}(api$1)),api$1}var base={},reporter={},hasRequiredReporter;function requireReporter(){if(hasRequiredReporter)return reporter;hasRequiredReporter=1;var o=requireInherits_browser();function e(c){this._reporterState={obj:null,path:[],options:c||{},errors:[]}}reporter.Reporter=e,e.prototype.isError=function(j){return j instanceof a},e.prototype.save=function(){var j=this._reporterState;return{obj:j.obj,pathLen:j.path.length}},e.prototype.restore=function(j){var d=this._reporterState;d.obj=j.obj,d.path=d.path.slice(0,j.pathLen)},e.prototype.enterKey=function(j){return this._reporterState.path.push(j)},e.prototype.exitKey=function(j){var d=this._reporterState;d.path=d.path.slice(0,j-1)},e.prototype.leaveKey=function(j,d,et){var at=this._reporterState;this.exitKey(j),at.obj!==null&&(at.obj[d]=et)},e.prototype.path=function(){return this._reporterState.path.join("/")},e.prototype.enterObject=function(){var j=this._reporterState,d=j.obj;return j.obj={},d},e.prototype.leaveObject=function(j){var d=this._reporterState,et=d.obj;return d.obj=j,et},e.prototype.error=function(j){var d,et=this._reporterState,at=j instanceof a;if(at?d=j:d=new a(et.path.map(function(st){return"["+JSON.stringify(st)+"]"}).join(""),j.message||j,j.stack),!et.options.partial)throw d;return at||et.errors.push(d),d},e.prototype.wrapResult=function(j){var d=this._reporterState;return d.options.partial?{result:this.isError(j)?null:j,errors:d.errors}:j};function a(c,j){this.path=c,this.rethrow(j)}return o(a,Error),a.prototype.rethrow=function(j){if(this.message=j+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,a),!this.stack)try{throw new Error(this.message)}catch(d){this.stack=d.stack}return this},reporter}var buffer={},hasRequiredBuffer;function requireBuffer(){if(hasRequiredBuffer)return buffer;hasRequiredBuffer=1;var o=requireInherits_browser(),e=requireBase().Reporter,a=require$$1$2.Buffer;function c(d,et){if(e.call(this,et),!a.isBuffer(d)){this.error("Input not Buffer");return}this.base=d,this.offset=0,this.length=d.length}o(c,e),buffer.DecoderBuffer=c,c.prototype.save=function(){return{offset:this.offset,reporter:e.prototype.save.call(this)}},c.prototype.restore=function(et){var at=new c(this.base);return at.offset=et.offset,at.length=this.offset,this.offset=et.offset,e.prototype.restore.call(this,et.reporter),at},c.prototype.isEmpty=function(){return this.offset===this.length},c.prototype.readUInt8=function(et){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(et||"DecoderBuffer overrun")},c.prototype.skip=function(et,at){if(!(this.offset+et<=this.length))return this.error(at||"DecoderBuffer overrun");var st=new c(this.base);return st._reporterState=this._reporterState,st.offset=this.offset,st.length=this.offset+et,this.offset+=et,st},c.prototype.raw=function(et){return this.base.slice(et?et.offset:this.offset,this.length)};function j(d,et){if(Array.isArray(d))this.length=0,this.value=d.map(function(at){return at instanceof j||(at=new j(at,et)),this.length+=at.length,at},this);else if(typeof d=="number"){if(!(0<=d&&d<=255))return et.error("non-byte EncoderBuffer value");this.value=d,this.length=1}else if(typeof d=="string")this.value=d,this.length=a.byteLength(d);else if(a.isBuffer(d))this.value=d,this.length=d.length;else return et.error("Unsupported type: "+typeof d)}return buffer.EncoderBuffer=j,j.prototype.join=function(et,at){return et||(et=new a(this.length)),at||(at=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(st){st.join(et,at),at+=st.length}):(typeof this.value=="number"?et[at]=this.value:typeof this.value=="string"?et.write(this.value,at):a.isBuffer(this.value)&&this.value.copy(et,at),at+=this.length)),et},buffer}var node,hasRequiredNode;function requireNode(){if(hasRequiredNode)return node;hasRequiredNode=1;var o=requireBase().Reporter,e=requireBase().EncoderBuffer,a=requireBase().DecoderBuffer,c=requireMinimalisticAssert(),j=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],d=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(j),et=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function at(ct,ot){var gt={};this._baseState=gt,gt.enc=ct,gt.parent=ot||null,gt.children=null,gt.tag=null,gt.args=null,gt.reverseArgs=null,gt.choice=null,gt.optional=!1,gt.any=!1,gt.obj=!1,gt.use=null,gt.useDecoder=null,gt.key=null,gt.default=null,gt.explicit=null,gt.implicit=null,gt.contains=null,gt.parent||(gt.children=[],this._wrap())}node=at;var st=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];return at.prototype.clone=function(){var ot=this._baseState,gt={};st.forEach(function(yt){gt[yt]=ot[yt]});var ft=new this.constructor(gt.parent);return ft._baseState=gt,ft},at.prototype._wrap=function(){var ot=this._baseState;d.forEach(function(gt){this[gt]=function(){var yt=new this.constructor(this);return ot.children.push(yt),yt[gt].apply(yt,arguments)}},this)},at.prototype._init=function(ot){var gt=this._baseState;c(gt.parent===null),ot.call(this),gt.children=gt.children.filter(function(ft){return ft._baseState.parent===this},this),c.equal(gt.children.length,1,"Root node can have only one child")},at.prototype._useArgs=function(ot){var gt=this._baseState,ft=ot.filter(function(yt){return yt instanceof this.constructor},this);ot=ot.filter(function(yt){return!(yt instanceof this.constructor)},this),ft.length!==0&&(c(gt.children===null),gt.children=ft,ft.forEach(function(yt){yt._baseState.parent=this},this)),ot.length!==0&&(c(gt.args===null),gt.args=ot,gt.reverseArgs=ot.map(function(yt){if(typeof yt!="object"||yt.constructor!==Object)return yt;var vt={};return Object.keys(yt).forEach(function(rt){rt==(rt|0)&&(rt|=0);var bt=yt[rt];vt[bt]=rt}),vt}))},et.forEach(function(ct){at.prototype[ct]=function(){var gt=this._baseState;throw new Error(ct+" not implemented for encoding: "+gt.enc)}}),j.forEach(function(ct){at.prototype[ct]=function(){var gt=this._baseState,ft=Array.prototype.slice.call(arguments);return c(gt.tag===null),gt.tag=ct,this._useArgs(ft),this}}),at.prototype.use=function(ot){c(ot);var gt=this._baseState;return c(gt.use===null),gt.use=ot,this},at.prototype.optional=function(){var ot=this._baseState;return ot.optional=!0,this},at.prototype.def=function(ot){var gt=this._baseState;return c(gt.default===null),gt.default=ot,gt.optional=!0,this},at.prototype.explicit=function(ot){var gt=this._baseState;return c(gt.explicit===null&&gt.implicit===null),gt.explicit=ot,this},at.prototype.implicit=function(ot){var gt=this._baseState;return c(gt.explicit===null&&gt.implicit===null),gt.implicit=ot,this},at.prototype.obj=function(){var ot=this._baseState,gt=Array.prototype.slice.call(arguments);return ot.obj=!0,gt.length!==0&&this._useArgs(gt),this},at.prototype.key=function(ot){var gt=this._baseState;return c(gt.key===null),gt.key=ot,this},at.prototype.any=function(){var ot=this._baseState;return ot.any=!0,this},at.prototype.choice=function(ot){var gt=this._baseState;return c(gt.choice===null),gt.choice=ot,this._useArgs(Object.keys(ot).map(function(ft){return ot[ft]})),this},at.prototype.contains=function(ot){var gt=this._baseState;return c(gt.use===null),gt.contains=ot,this},at.prototype._decode=function(ot,gt){var ft=this._baseState;if(ft.parent===null)return ot.wrapResult(ft.children[0]._decode(ot,gt));var yt=ft.default,vt=!0,rt=null;if(ft.key!==null&&(rt=ot.enterKey(ft.key)),ft.optional){var bt=null;if(ft.explicit!==null?bt=ft.explicit:ft.implicit!==null?bt=ft.implicit:ft.tag!==null&&(bt=ft.tag),bt===null&&!ft.any){var ht=ot.save();try{ft.choice===null?this._decodeGeneric(ft.tag,ot,gt):this._decodeChoice(ot,gt),vt=!0}catch{vt=!1}ot.restore(ht)}else if(vt=this._peekTag(ot,bt,ft.any),ot.isError(vt))return vt}var wt;if(ft.obj&&vt&&(wt=ot.enterObject()),vt){if(ft.explicit!==null){var At=this._decodeTag(ot,ft.explicit);if(ot.isError(At))return At;ot=At}var Ct=ot.offset;if(ft.use===null&&ft.choice===null){if(ft.any)var ht=ot.save();var dt=this._decodeTag(ot,ft.implicit!==null?ft.implicit:ft.tag,ft.any);if(ot.isError(dt))return dt;ft.any?yt=ot.raw(ht):ot=dt}if(gt&&gt.track&&ft.tag!==null&&gt.track(ot.path(),Ct,ot.length,"tagged"),gt&&gt.track&&ft.tag!==null&&gt.track(ot.path(),ot.offset,ot.length,"content"),ft.any?yt=yt:ft.choice===null?yt=this._decodeGeneric(ft.tag,ot,gt):yt=this._decodeChoice(ot,gt),ot.isError(yt))return yt;if(!ft.any&&ft.choice===null&&ft.children!==null&&ft.children.forEach(function(Mt){Mt._decode(ot,gt)}),ft.contains&&(ft.tag==="octstr"||ft.tag==="bitstr")){var Et=new a(yt);yt=this._getUse(ft.contains,ot._reporterState.obj)._decode(Et,gt)}}return ft.obj&&vt&&(yt=ot.leaveObject(wt)),ft.key!==null&&(yt!==null||vt===!0)?ot.leaveKey(rt,ft.key,yt):rt!==null&&ot.exitKey(rt),yt},at.prototype._decodeGeneric=function(ot,gt,ft){var yt=this._baseState;return ot==="seq"||ot==="set"?null:ot==="seqof"||ot==="setof"?this._decodeList(gt,ot,yt.args[0],ft):/str$/.test(ot)?this._decodeStr(gt,ot,ft):ot==="objid"&&yt.args?this._decodeObjid(gt,yt.args[0],yt.args[1],ft):ot==="objid"?this._decodeObjid(gt,null,null,ft):ot==="gentime"||ot==="utctime"?this._decodeTime(gt,ot,ft):ot==="null_"?this._decodeNull(gt,ft):ot==="bool"?this._decodeBool(gt,ft):ot==="objDesc"?this._decodeStr(gt,ot,ft):ot==="int"||ot==="enum"?this._decodeInt(gt,yt.args&&yt.args[0],ft):yt.use!==null?this._getUse(yt.use,gt._reporterState.obj)._decode(gt,ft):gt.error("unknown tag: "+ot)},at.prototype._getUse=function(ot,gt){var ft=this._baseState;return ft.useDecoder=this._use(ot,gt),c(ft.useDecoder._baseState.parent===null),ft.useDecoder=ft.useDecoder._baseState.children[0],ft.implicit!==ft.useDecoder._baseState.implicit&&(ft.useDecoder=ft.useDecoder.clone(),ft.useDecoder._baseState.implicit=ft.implicit),ft.useDecoder},at.prototype._decodeChoice=function(ot,gt){var ft=this._baseState,yt=null,vt=!1;return Object.keys(ft.choice).some(function(rt){var bt=ot.save(),ht=ft.choice[rt];try{var wt=ht._decode(ot,gt);if(ot.isError(wt))return!1;yt={type:rt,value:wt},vt=!0}catch{return ot.restore(bt),!1}return!0},this),vt?yt:ot.error("Choice not matched")},at.prototype._createEncoderBuffer=function(ot){return new e(ot,this.reporter)},at.prototype._encode=function(ot,gt,ft){var yt=this._baseState;if(!(yt.default!==null&&yt.default===ot)){var vt=this._encodeValue(ot,gt,ft);if(vt!==void 0&&!this._skipDefault(vt,gt,ft))return vt}},at.prototype._encodeValue=function(ot,gt,ft){var yt=this._baseState;if(yt.parent===null)return yt.children[0]._encode(ot,gt||new o);var ht=null;if(this.reporter=gt,yt.optional&&ot===void 0)if(yt.default!==null)ot=yt.default;else return;var vt=null,rt=!1;if(yt.any)ht=this._createEncoderBuffer(ot);else if(yt.choice)ht=this._encodeChoice(ot,gt);else if(yt.contains)vt=this._getUse(yt.contains,ft)._encode(ot,gt),rt=!0;else if(yt.children)vt=yt.children.map(function(Ct){if(Ct._baseState.tag==="null_")return Ct._encode(null,gt,ot);if(Ct._baseState.key===null)return gt.error("Child should have a key");var dt=gt.enterKey(Ct._baseState.key);if(typeof ot!="object")return gt.error("Child expected, but input is not object");var Et=Ct._encode(ot[Ct._baseState.key],gt,ot);return gt.leaveKey(dt),Et},this).filter(function(Ct){return Ct}),vt=this._createEncoderBuffer(vt);else if(yt.tag==="seqof"||yt.tag==="setof"){if(!(yt.args&&yt.args.length===1))return gt.error("Too many args for : "+yt.tag);if(!Array.isArray(ot))return gt.error("seqof/setof, but data is not Array");var bt=this.clone();bt._baseState.implicit=null,vt=this._createEncoderBuffer(ot.map(function(Ct){var dt=this._baseState;return this._getUse(dt.args[0],ot)._encode(Ct,gt)},bt))}else yt.use!==null?ht=this._getUse(yt.use,ft)._encode(ot,gt):(vt=this._encodePrimitive(yt.tag,ot),rt=!0);var ht;if(!yt.any&&yt.choice===null){var wt=yt.implicit!==null?yt.implicit:yt.tag,At=yt.implicit===null?"universal":"context";wt===null?yt.use===null&&gt.error("Tag could be omitted only for .use()"):yt.use===null&&(ht=this._encodeComposite(wt,rt,At,vt))}return yt.explicit!==null&&(ht=this._encodeComposite(yt.explicit,!1,"context",ht)),ht},at.prototype._encodeChoice=function(ot,gt){var ft=this._baseState,yt=ft.choice[ot.type];return yt||c(!1,ot.type+" not found in "+JSON.stringify(Object.keys(ft.choice))),yt._encode(ot.value,gt)},at.prototype._encodePrimitive=function(ot,gt){var ft=this._baseState;if(/str$/.test(ot))return this._encodeStr(gt,ot);if(ot==="objid"&&ft.args)return this._encodeObjid(gt,ft.reverseArgs[0],ft.args[1]);if(ot==="objid")return this._encodeObjid(gt,null,null);if(ot==="gentime"||ot==="utctime")return this._encodeTime(gt,ot);if(ot==="null_")return this._encodeNull();if(ot==="int"||ot==="enum")return this._encodeInt(gt,ft.args&&ft.reverseArgs[0]);if(ot==="bool")return this._encodeBool(gt);if(ot==="objDesc")return this._encodeStr(gt,ot);throw new Error("Unsupported tag: "+ot)},at.prototype._isNumstr=function(ot){return/^[0-9 ]*$/.test(ot)},at.prototype._isPrintstr=function(ot){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(ot)},node}var hasRequiredBase;function requireBase(){return hasRequiredBase||(hasRequiredBase=1,function(o){var e=o;e.Reporter=requireReporter().Reporter,e.DecoderBuffer=requireBuffer().DecoderBuffer,e.EncoderBuffer=requireBuffer().EncoderBuffer,e.Node=requireNode()}(base)),base}var constants$1={},der={},hasRequiredDer$2;function requireDer$2(){return hasRequiredDer$2||(hasRequiredDer$2=1,function(o){var e=requireConstants();o.tagClass={0:"universal",1:"application",2:"context",3:"private"},o.tagClassByName=e._reverse(o.tagClass),o.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},o.tagByName=e._reverse(o.tag)}(der)),der}var hasRequiredConstants;function requireConstants(){return hasRequiredConstants||(hasRequiredConstants=1,function(o){var e=o;e._reverse=function(c){var j={};return Object.keys(c).forEach(function(d){(d|0)==d&&(d=d|0);var et=c[d];j[et]=d}),j},e.der=requireDer$2()}(constants$1)),constants$1}var decoders={},der_1$1,hasRequiredDer$1;function requireDer$1(){if(hasRequiredDer$1)return der_1$1;hasRequiredDer$1=1;var o=requireInherits_browser(),e=requireAsn1$1(),a=e.base,c=e.bignum,j=e.constants.der;function d(ct){this.enc="der",this.name=ct.name,this.entity=ct,this.tree=new et,this.tree._init(ct.body)}der_1$1=d,d.prototype.decode=function(ot,gt){return ot instanceof a.DecoderBuffer||(ot=new a.DecoderBuffer(ot,gt)),this.tree._decode(ot,gt)};function et(ct){a.Node.call(this,"der",ct)}o(et,a.Node),et.prototype._peekTag=function(ot,gt,ft){if(ot.isEmpty())return!1;var yt=ot.save(),vt=at(ot,'Failed to peek tag: "'+gt+'"');return ot.isError(vt)?vt:(ot.restore(yt),vt.tag===gt||vt.tagStr===gt||vt.tagStr+"of"===gt||ft)},et.prototype._decodeTag=function(ot,gt,ft){var yt=at(ot,'Failed to decode tag of "'+gt+'"');if(ot.isError(yt))return yt;var vt=st(ot,yt.primitive,'Failed to get length of "'+gt+'"');if(ot.isError(vt))return vt;if(!ft&&yt.tag!==gt&&yt.tagStr!==gt&&yt.tagStr+"of"!==gt)return ot.error('Failed to match tag: "'+gt+'"');if(yt.primitive||vt!==null)return ot.skip(vt,'Failed to match body of: "'+gt+'"');var rt=ot.save(),bt=this._skipUntilEnd(ot,'Failed to skip indefinite length body: "'+this.tag+'"');return ot.isError(bt)?bt:(vt=ot.offset-rt.offset,ot.restore(rt),ot.skip(vt,'Failed to match body of: "'+gt+'"'))},et.prototype._skipUntilEnd=function(ot,gt){for(;;){var ft=at(ot,gt);if(ot.isError(ft))return ft;var yt=st(ot,ft.primitive,gt);if(ot.isError(yt))return yt;var vt;if(ft.primitive||yt!==null?vt=ot.skip(yt):vt=this._skipUntilEnd(ot,gt),ot.isError(vt))return vt;if(ft.tagStr==="end")break}},et.prototype._decodeList=function(ot,gt,ft,yt){for(var vt=[];!ot.isEmpty();){var rt=this._peekTag(ot,"end");if(ot.isError(rt))return rt;var bt=ft.decode(ot,"der",yt);if(ot.isError(bt)&&rt)break;vt.push(bt)}return vt},et.prototype._decodeStr=function(ot,gt){if(gt==="bitstr"){var ft=ot.readUInt8();return ot.isError(ft)?ft:{unused:ft,data:ot.raw()}}else if(gt==="bmpstr"){var yt=ot.raw();if(yt.length%2===1)return ot.error("Decoding of string type: bmpstr length mismatch");for(var vt="",rt=0;rt<yt.length/2;rt++)vt+=String.fromCharCode(yt.readUInt16BE(rt*2));return vt}else if(gt==="numstr"){var bt=ot.raw().toString("ascii");return this._isNumstr(bt)?bt:ot.error("Decoding of string type: numstr unsupported characters")}else{if(gt==="octstr")return ot.raw();if(gt==="objDesc")return ot.raw();if(gt==="printstr"){var ht=ot.raw().toString("ascii");return this._isPrintstr(ht)?ht:ot.error("Decoding of string type: printstr unsupported characters")}else return/str$/.test(gt)?ot.raw().toString():ot.error("Decoding of string type: "+gt+" unsupported")}},et.prototype._decodeObjid=function(ot,gt,ft){for(var yt,vt=[],rt=0;!ot.isEmpty();){var bt=ot.readUInt8();rt<<=7,rt|=bt&127,bt&128||(vt.push(rt),rt=0)}bt&128&&vt.push(rt);var ht=vt[0]/40|0,wt=vt[0]%40;if(ft?yt=vt:yt=[ht,wt].concat(vt.slice(1)),gt){var At=gt[yt.join(" ")];At===void 0&&(At=gt[yt.join(".")]),At!==void 0&&(yt=At)}return yt},et.prototype._decodeTime=function(ot,gt){var ft=ot.raw().toString();if(gt==="gentime")var yt=ft.slice(0,4)|0,vt=ft.slice(4,6)|0,rt=ft.slice(6,8)|0,bt=ft.slice(8,10)|0,ht=ft.slice(10,12)|0,wt=ft.slice(12,14)|0;else if(gt==="utctime"){var yt=ft.slice(0,2)|0,vt=ft.slice(2,4)|0,rt=ft.slice(4,6)|0,bt=ft.slice(6,8)|0,ht=ft.slice(8,10)|0,wt=ft.slice(10,12)|0;yt<70?yt=2e3+yt:yt=1900+yt}else return ot.error("Decoding "+gt+" time is not supported yet");return Date.UTC(yt,vt-1,rt,bt,ht,wt,0)},et.prototype._decodeNull=function(ot){return null},et.prototype._decodeBool=function(ot){var gt=ot.readUInt8();return ot.isError(gt)?gt:gt!==0},et.prototype._decodeInt=function(ot,gt){var ft=ot.raw(),yt=new c(ft);return gt&&(yt=gt[yt.toString(10)]||yt),yt},et.prototype._use=function(ot,gt){return typeof ot=="function"&&(ot=ot(gt)),ot._getDecoder("der").tree};function at(ct,ot){var gt=ct.readUInt8(ot);if(ct.isError(gt))return gt;var ft=j.tagClass[gt>>6],yt=(gt&32)===0;if((gt&31)===31){var vt=gt;for(gt=0;(vt&128)===128;){if(vt=ct.readUInt8(ot),ct.isError(vt))return vt;gt<<=7,gt|=vt&127}}else gt&=31;var rt=j.tag[gt];return{cls:ft,primitive:yt,tag:gt,tagStr:rt}}function st(ct,ot,gt){var ft=ct.readUInt8(gt);if(ct.isError(ft))return ft;if(!ot&&ft===128)return null;if(!(ft&128))return ft;var yt=ft&127;if(yt>4)return ct.error("length octect is too long");ft=0;for(var vt=0;vt<yt;vt++){ft<<=8;var rt=ct.readUInt8(gt);if(ct.isError(rt))return rt;ft|=rt}return ft}return der_1$1}var pem$1,hasRequiredPem$1;function requirePem$1(){if(hasRequiredPem$1)return pem$1;hasRequiredPem$1=1;var o=requireInherits_browser(),e=require$$1$2.Buffer,a=requireDer$1();function c(j){a.call(this,j),this.enc="pem"}return o(c,a),pem$1=c,c.prototype.decode=function(d,et){for(var at=d.toString().split(/[\r\n]+/g),st=et.label.toUpperCase(),ct=/^-----(BEGIN|END) ([^-]+)-----$/,ot=-1,gt=-1,ft=0;ft<at.length;ft++){var yt=at[ft].match(ct);if(yt!==null&&yt[2]===st)if(ot===-1){if(yt[1]!=="BEGIN")break;ot=ft}else{if(yt[1]!=="END")break;gt=ft;break}}if(ot===-1||gt===-1)throw new Error("PEM section not found for: "+st);var vt=at.slice(ot+1,gt).join("");vt.replace(/[^a-z0-9\+\/=]+/gi,"");var rt=new e(vt,"base64");return a.prototype.decode.call(this,rt,et)},pem$1}var hasRequiredDecoders;function requireDecoders(){return hasRequiredDecoders||(hasRequiredDecoders=1,function(o){var e=o;e.der=requireDer$1(),e.pem=requirePem$1()}(decoders)),decoders}var encoders={},der_1,hasRequiredDer;function requireDer(){if(hasRequiredDer)return der_1;hasRequiredDer=1;var o=requireInherits_browser(),e=require$$1$2.Buffer,a=requireAsn1$1(),c=a.base,j=a.constants.der;function d(ct){this.enc="der",this.name=ct.name,this.entity=ct,this.tree=new et,this.tree._init(ct.body)}der_1=d,d.prototype.encode=function(ot,gt){return this.tree._encode(ot,gt).join()};function et(ct){c.Node.call(this,"der",ct)}o(et,c.Node),et.prototype._encodeComposite=function(ot,gt,ft,yt){var vt=st(ot,gt,ft,this.reporter);if(yt.length<128){var ht=new e(2);return ht[0]=vt,ht[1]=yt.length,this._createEncoderBuffer([ht,yt])}for(var rt=1,bt=yt.length;bt>=256;bt>>=8)rt++;var ht=new e(2+rt);ht[0]=vt,ht[1]=128|rt;for(var bt=1+rt,wt=yt.length;wt>0;bt--,wt>>=8)ht[bt]=wt&255;return this._createEncoderBuffer([ht,yt])},et.prototype._encodeStr=function(ot,gt){if(gt==="bitstr")return this._createEncoderBuffer([ot.unused|0,ot.data]);if(gt==="bmpstr"){for(var ft=new e(ot.length*2),yt=0;yt<ot.length;yt++)ft.writeUInt16BE(ot.charCodeAt(yt),yt*2);return this._createEncoderBuffer(ft)}else return gt==="numstr"?this._isNumstr(ot)?this._createEncoderBuffer(ot):this.reporter.error("Encoding of string type: numstr supports only digits and space"):gt==="printstr"?this._isPrintstr(ot)?this._createEncoderBuffer(ot):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(gt)?this._createEncoderBuffer(ot):gt==="objDesc"?this._createEncoderBuffer(ot):this.reporter.error("Encoding of string type: "+gt+" unsupported")},et.prototype._encodeObjid=function(ot,gt,ft){if(typeof ot=="string"){if(!gt)return this.reporter.error("string objid given, but no values map found");if(!gt.hasOwnProperty(ot))return this.reporter.error("objid not found in values map");ot=gt[ot].split(/[\s\.]+/g);for(var yt=0;yt<ot.length;yt++)ot[yt]|=0}else if(Array.isArray(ot)){ot=ot.slice();for(var yt=0;yt<ot.length;yt++)ot[yt]|=0}if(!Array.isArray(ot))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(ot));if(!ft){if(ot[1]>=40)return this.reporter.error("Second objid identifier OOB");ot.splice(0,2,ot[0]*40+ot[1])}for(var vt=0,yt=0;yt<ot.length;yt++){var rt=ot[yt];for(vt++;rt>=128;rt>>=7)vt++}for(var bt=new e(vt),ht=bt.length-1,yt=ot.length-1;yt>=0;yt--){var rt=ot[yt];for(bt[ht--]=rt&127;(rt>>=7)>0;)bt[ht--]=128|rt&127}return this._createEncoderBuffer(bt)};function at(ct){return ct<10?"0"+ct:ct}et.prototype._encodeTime=function(ot,gt){var ft,yt=new Date(ot);return gt==="gentime"?ft=[at(yt.getFullYear()),at(yt.getUTCMonth()+1),at(yt.getUTCDate()),at(yt.getUTCHours()),at(yt.getUTCMinutes()),at(yt.getUTCSeconds()),"Z"].join(""):gt==="utctime"?ft=[at(yt.getFullYear()%100),at(yt.getUTCMonth()+1),at(yt.getUTCDate()),at(yt.getUTCHours()),at(yt.getUTCMinutes()),at(yt.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+gt+" time is not supported yet"),this._encodeStr(ft,"octstr")},et.prototype._encodeNull=function(){return this._createEncoderBuffer("")},et.prototype._encodeInt=function(ot,gt){if(typeof ot=="string"){if(!gt)return this.reporter.error("String int or enum given, but no values map");if(!gt.hasOwnProperty(ot))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(ot));ot=gt[ot]}if(typeof ot!="number"&&!e.isBuffer(ot)){var ft=ot.toArray();!ot.sign&&ft[0]&128&&ft.unshift(0),ot=new e(ft)}if(e.isBuffer(ot)){var yt=ot.length;ot.length===0&&yt++;var rt=new e(yt);return ot.copy(rt),ot.length===0&&(rt[0]=0),this._createEncoderBuffer(rt)}if(ot<128)return this._createEncoderBuffer(ot);if(ot<256)return this._createEncoderBuffer([0,ot]);for(var yt=1,vt=ot;vt>=256;vt>>=8)yt++;for(var rt=new Array(yt),vt=rt.length-1;vt>=0;vt--)rt[vt]=ot&255,ot>>=8;return rt[0]&128&&rt.unshift(0),this._createEncoderBuffer(new e(rt))},et.prototype._encodeBool=function(ot){return this._createEncoderBuffer(ot?255:0)},et.prototype._use=function(ot,gt){return typeof ot=="function"&&(ot=ot(gt)),ot._getEncoder("der").tree},et.prototype._skipDefault=function(ot,gt,ft){var yt=this._baseState,vt;if(yt.default===null)return!1;var rt=ot.join();if(yt.defaultBuffer===void 0&&(yt.defaultBuffer=this._encodeValue(yt.default,gt,ft).join()),rt.length!==yt.defaultBuffer.length)return!1;for(vt=0;vt<rt.length;vt++)if(rt[vt]!==yt.defaultBuffer[vt])return!1;return!0};function st(ct,ot,gt,ft){var yt;if(ct==="seqof"?ct="seq":ct==="setof"&&(ct="set"),j.tagByName.hasOwnProperty(ct))yt=j.tagByName[ct];else if(typeof ct=="number"&&(ct|0)===ct)yt=ct;else return ft.error("Unknown tag: "+ct);return yt>=31?ft.error("Multi-octet tag encoding unsupported"):(ot||(yt|=32),yt|=j.tagClassByName[gt||"universal"]<<6,yt)}return der_1}var pem,hasRequiredPem;function requirePem(){if(hasRequiredPem)return pem;hasRequiredPem=1;var o=requireInherits_browser(),e=requireDer();function a(c){e.call(this,c),this.enc="pem"}return o(a,e),pem=a,a.prototype.encode=function(j,d){for(var et=e.prototype.encode.call(this,j),at=et.toString("base64"),st=["-----BEGIN "+d.label+"-----"],ct=0;ct<at.length;ct+=64)st.push(at.slice(ct,ct+64));return st.push("-----END "+d.label+"-----"),st.join(`
`)},pem}var hasRequiredEncoders;function requireEncoders(){return hasRequiredEncoders||(hasRequiredEncoders=1,function(o){var e=o;e.der=requireDer(),e.pem=requirePem()}(encoders)),encoders}var hasRequiredAsn1$1;function requireAsn1$1(){return hasRequiredAsn1$1||(hasRequiredAsn1$1=1,function(o){var e=o;e.bignum=requireBn$2(),e.define=requireApi().define,e.base=requireBase(),e.constants=requireConstants(),e.decoders=requireDecoders(),e.encoders=requireEncoders()}(asn1)),asn1}var certificate,hasRequiredCertificate;function requireCertificate(){if(hasRequiredCertificate)return certificate;hasRequiredCertificate=1;var o=requireAsn1$1(),e=o.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),a=o.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),c=o.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),j=o.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(c),this.key("subjectPublicKey").bitstr())}),d=o.define("RelativeDistinguishedName",function(){this.setof(a)}),et=o.define("RDNSequence",function(){this.seqof(d)}),at=o.define("Name",function(){this.choice({rdnSequence:this.use(et)})}),st=o.define("Validity",function(){this.seq().obj(this.key("notBefore").use(e),this.key("notAfter").use(e))}),ct=o.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),ot=o.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(c),this.key("issuer").use(at),this.key("validity").use(st),this.key("subject").use(at),this.key("subjectPublicKeyInfo").use(j),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(ct).optional())}),gt=o.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(ot),this.key("signatureAlgorithm").use(c),this.key("signatureValue").bitstr())});return certificate=gt,certificate}var hasRequiredAsn1;function requireAsn1(){if(hasRequiredAsn1)return asn1$1;hasRequiredAsn1=1;var o=requireAsn1$1();asn1$1.certificate=requireCertificate();var e=o.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});asn1$1.RSAPrivateKey=e;var a=o.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});asn1$1.RSAPublicKey=a;var c=o.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),j=o.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(c),this.key("subjectPublicKey").bitstr())});asn1$1.PublicKey=j;var d=o.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(c),this.key("subjectPrivateKey").octstr())});asn1$1.PrivateKey=d;var et=o.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});asn1$1.EncryptedPrivateKey=et;var at=o.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});asn1$1.DSAPrivateKey=at,asn1$1.DSAparam=o.define("DSAparam",function(){this.int()});var st=o.define("ECParameters",function(){this.choice({namedCurve:this.objid()})}),ct=o.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(st),this.key("publicKey").optional().explicit(1).bitstr())});return asn1$1.ECPrivateKey=ct,asn1$1.signature=o.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())}),asn1$1}const require$$1={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"};var fixProc,hasRequiredFixProc;function requireFixProc(){if(hasRequiredFixProc)return fixProc;hasRequiredFixProc=1;var o=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,e=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,a=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,c=requireEvp_bytestokey(),j=requireBrowser$6(),d=requireSafeBuffer$1().Buffer;return fixProc=function(et,at){var st=et.toString(),ct=st.match(o),ot;if(ct){var ft="aes"+ct[1],yt=d.from(ct[2],"hex"),vt=d.from(ct[3].replace(/[\r\n]/g,""),"base64"),rt=c(at,yt.slice(0,8),parseInt(ct[1],10)).key,bt=[],ht=j.createDecipheriv(ft,rt,yt);bt.push(ht.update(vt)),bt.push(ht.final()),ot=d.concat(bt)}else{var gt=st.match(a);ot=d.from(gt[2].replace(/[\r\n]/g,""),"base64")}var wt=st.match(e)[1];return{tag:wt,data:ot}},fixProc}var parseAsn1,hasRequiredParseAsn1;function requireParseAsn1(){if(hasRequiredParseAsn1)return parseAsn1;hasRequiredParseAsn1=1;var o=requireAsn1(),e=require$$1,a=requireFixProc(),c=requireBrowser$6(),j=requireBrowser$7(),d=requireSafeBuffer$1().Buffer;function et(st,ct){var ot=st.algorithm.decrypt.kde.kdeparams.salt,gt=parseInt(st.algorithm.decrypt.kde.kdeparams.iters.toString(),10),ft=e[st.algorithm.decrypt.cipher.algo.join(".")],yt=st.algorithm.decrypt.cipher.iv,vt=st.subjectPrivateKey,rt=parseInt(ft.split("-")[1],10)/8,bt=j.pbkdf2Sync(ct,ot,gt,rt,"sha1"),ht=c.createDecipheriv(ft,bt,yt),wt=[];return wt.push(ht.update(vt)),wt.push(ht.final()),d.concat(wt)}function at(st){var ct;typeof st=="object"&&!d.isBuffer(st)&&(ct=st.passphrase,st=st.key),typeof st=="string"&&(st=d.from(st));var ot=a(st,ct),gt=ot.tag,ft=ot.data,yt,vt;switch(gt){case"CERTIFICATE":vt=o.certificate.decode(ft,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(vt||(vt=o.PublicKey.decode(ft,"der")),yt=vt.algorithm.algorithm.join("."),yt){case"1.2.840.113549.1.1.1":return o.RSAPublicKey.decode(vt.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return vt.subjectPrivateKey=vt.subjectPublicKey,{type:"ec",data:vt};case"1.2.840.10040.4.1":return vt.algorithm.params.pub_key=o.DSAparam.decode(vt.subjectPublicKey.data,"der"),{type:"dsa",data:vt.algorithm.params};default:throw new Error("unknown key id "+yt)}case"ENCRYPTED PRIVATE KEY":ft=o.EncryptedPrivateKey.decode(ft,"der"),ft=et(ft,ct);case"PRIVATE KEY":switch(vt=o.PrivateKey.decode(ft,"der"),yt=vt.algorithm.algorithm.join("."),yt){case"1.2.840.113549.1.1.1":return o.RSAPrivateKey.decode(vt.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:vt.algorithm.curve,privateKey:o.ECPrivateKey.decode(vt.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return vt.algorithm.params.priv_key=o.DSAparam.decode(vt.subjectPrivateKey,"der"),{type:"dsa",params:vt.algorithm.params};default:throw new Error("unknown key id "+yt)}case"RSA PUBLIC KEY":return o.RSAPublicKey.decode(ft,"der");case"RSA PRIVATE KEY":return o.RSAPrivateKey.decode(ft,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:o.DSAPrivateKey.decode(ft,"der")};case"EC PRIVATE KEY":return ft=o.ECPrivateKey.decode(ft,"der"),{curve:ft.parameters.value,privateKey:ft.privateKey};default:throw new Error("unknown key type "+gt)}}return at.signature=o.signature,parseAsn1=at,parseAsn1}const require$$4={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"};var hasRequiredSign;function requireSign(){if(hasRequiredSign)return sign.exports;hasRequiredSign=1;var o=requireSafeBuffer$1().Buffer,e=requireBrowser$8(),a=requireBrowserifyRsa(),c=requireElliptic().ec,j=requireBn$4(),d=requireParseAsn1(),et=require$$4,at=1;function st(ht,wt,At,Ct,dt){var Et=d(wt);if(Et.curve){if(Ct!=="ecdsa"&&Ct!=="ecdsa/rsa")throw new Error("wrong private key type");return ct(ht,Et)}else if(Et.type==="dsa"){if(Ct!=="dsa")throw new Error("wrong private key type");return ot(ht,Et,At)}if(Ct!=="rsa"&&Ct!=="ecdsa/rsa")throw new Error("wrong private key type");if(wt.padding!==void 0&&wt.padding!==at)throw new Error("illegal or unsupported padding mode");ht=o.concat([dt,ht]);for(var Rt=Et.modulus.byteLength(),Mt=[0,1];ht.length+Mt.length+1<Rt;)Mt.push(255);Mt.push(0);for(var _t=-1;++_t<ht.length;)Mt.push(ht[_t]);var kt=a(Mt,Et);return kt}function ct(ht,wt){var At=et[wt.curve.join(".")];if(!At)throw new Error("unknown curve "+wt.curve.join("."));var Ct=new c(At),dt=Ct.keyFromPrivate(wt.privateKey),Et=dt.sign(ht);return o.from(Et.toDER())}function ot(ht,wt,At){for(var Ct=wt.params.priv_key,dt=wt.params.p,Et=wt.params.q,Rt=wt.params.g,Mt=new j(0),_t,kt=yt(ht,Et).mod(Et),nt=!1,s=ft(Ct,Et,ht,At);nt===!1;)_t=rt(Et,s,At),Mt=bt(Rt,_t,dt,Et),nt=_t.invm(Et).imul(kt.add(Ct.mul(Mt))).mod(Et),nt.cmpn(0)===0&&(nt=!1,Mt=new j(0));return gt(Mt,nt)}function gt(ht,wt){ht=ht.toArray(),wt=wt.toArray(),ht[0]&128&&(ht=[0].concat(ht)),wt[0]&128&&(wt=[0].concat(wt));var At=ht.length+wt.length+4,Ct=[48,At,2,ht.length];return Ct=Ct.concat(ht,[2,wt.length],wt),o.from(Ct)}function ft(ht,wt,At,Ct){if(ht=o.from(ht.toArray()),ht.length<wt.byteLength()){var dt=o.alloc(wt.byteLength()-ht.length);ht=o.concat([dt,ht])}var Et=At.length,Rt=vt(At,wt),Mt=o.alloc(Et);Mt.fill(1);var _t=o.alloc(Et);return _t=e(Ct,_t).update(Mt).update(o.from([0])).update(ht).update(Rt).digest(),Mt=e(Ct,_t).update(Mt).digest(),_t=e(Ct,_t).update(Mt).update(o.from([1])).update(ht).update(Rt).digest(),Mt=e(Ct,_t).update(Mt).digest(),{k:_t,v:Mt}}function yt(ht,wt){var At=new j(ht),Ct=(ht.length<<3)-wt.bitLength();return Ct>0&&At.ishrn(Ct),At}function vt(ht,wt){ht=yt(ht,wt),ht=ht.mod(wt);var At=o.from(ht.toArray());if(At.length<wt.byteLength()){var Ct=o.alloc(wt.byteLength()-At.length);At=o.concat([Ct,At])}return At}function rt(ht,wt,At){var Ct,dt;do{for(Ct=o.alloc(0);Ct.length*8<ht.bitLength();)wt.v=e(At,wt.k).update(wt.v).digest(),Ct=o.concat([Ct,wt.v]);dt=yt(Ct,ht),wt.k=e(At,wt.k).update(wt.v).update(o.from([0])).digest(),wt.v=e(At,wt.k).update(wt.v).digest()}while(dt.cmp(ht)!==-1);return dt}function bt(ht,wt,At,Ct){return ht.toRed(j.mont(At)).redPow(wt).fromRed().mod(Ct)}return sign.exports=st,sign.exports.getKey=ft,sign.exports.makeKey=rt,sign.exports}var verify_1,hasRequiredVerify;function requireVerify(){if(hasRequiredVerify)return verify_1;hasRequiredVerify=1;var o=requireSafeBuffer$1().Buffer,e=requireBn$4(),a=requireElliptic().ec,c=requireParseAsn1(),j=require$$4;function d(ct,ot,gt,ft,yt){var vt=c(gt);if(vt.type==="ec"){if(ft!=="ecdsa"&&ft!=="ecdsa/rsa")throw new Error("wrong public key type");return et(ct,ot,vt)}else if(vt.type==="dsa"){if(ft!=="dsa")throw new Error("wrong public key type");return at(ct,ot,vt)}if(ft!=="rsa"&&ft!=="ecdsa/rsa")throw new Error("wrong public key type");ot=o.concat([yt,ot]);for(var rt=vt.modulus.byteLength(),bt=[1],ht=0;ot.length+bt.length+2<rt;)bt.push(255),ht+=1;bt.push(0);for(var wt=-1;++wt<ot.length;)bt.push(ot[wt]);bt=o.from(bt);var At=e.mont(vt.modulus);ct=new e(ct).toRed(At),ct=ct.redPow(new e(vt.publicExponent)),ct=o.from(ct.fromRed().toArray());var Ct=ht<8?1:0;for(rt=Math.min(ct.length,bt.length),ct.length!==bt.length&&(Ct=1),wt=-1;++wt<rt;)Ct|=ct[wt]^bt[wt];return Ct===0}function et(ct,ot,gt){var ft=j[gt.data.algorithm.curve.join(".")];if(!ft)throw new Error("unknown curve "+gt.data.algorithm.curve.join("."));var yt=new a(ft),vt=gt.data.subjectPrivateKey.data;return yt.verify(ot,ct,vt)}function at(ct,ot,gt){var ft=gt.data.p,yt=gt.data.q,vt=gt.data.g,rt=gt.data.pub_key,bt=c.signature.decode(ct,"der"),ht=bt.s,wt=bt.r;st(ht,yt),st(wt,yt);var At=e.mont(ft),Ct=ht.invm(yt),dt=vt.toRed(At).redPow(new e(ot).mul(Ct).mod(yt)).fromRed().mul(rt.toRed(At).redPow(wt.mul(Ct).mod(yt)).fromRed()).mod(ft).mod(yt);return dt.cmp(wt)===0}function st(ct,ot){if(ct.cmpn(0)<=0)throw new Error("invalid sig");if(ct.cmp(ot)>=0)throw new Error("invalid sig")}return verify_1=d,verify_1}var browser$5,hasRequiredBrowser$3;function requireBrowser$3(){if(hasRequiredBrowser$3)return browser$5;hasRequiredBrowser$3=1;var o=requireSafeBuffer$1().Buffer,e=requireBrowser$9(),a=requireReadableBrowser(),c=requireInherits_browser(),j=requireSign(),d=requireVerify(),et=require$$6$1;Object.keys(et).forEach(function(gt){et[gt].id=o.from(et[gt].id,"hex"),et[gt.toLowerCase()]=et[gt]});function at(gt){a.Writable.call(this);var ft=et[gt];if(!ft)throw new Error("Unknown message digest");this._hashType=ft.hash,this._hash=e(ft.hash),this._tag=ft.id,this._signType=ft.sign}c(at,a.Writable),at.prototype._write=function(ft,yt,vt){this._hash.update(ft),vt()},at.prototype.update=function(ft,yt){return this._hash.update(typeof ft=="string"?o.from(ft,yt):ft),this},at.prototype.sign=function(ft,yt){this.end();var vt=this._hash.digest(),rt=j(vt,ft,this._hashType,this._signType,this._tag);return yt?rt.toString(yt):rt};function st(gt){a.Writable.call(this);var ft=et[gt];if(!ft)throw new Error("Unknown message digest");this._hash=e(ft.hash),this._tag=ft.id,this._signType=ft.sign}c(st,a.Writable),st.prototype._write=function(ft,yt,vt){this._hash.update(ft),vt()},st.prototype.update=function(ft,yt){return this._hash.update(typeof ft=="string"?o.from(ft,yt):ft),this},st.prototype.verify=function(ft,yt,vt){var rt=typeof yt=="string"?o.from(yt,vt):yt;this.end();var bt=this._hash.digest();return d(rt,bt,ft,this._signType,this._tag)};function ct(gt){return new at(gt)}function ot(gt){return new st(gt)}return browser$5={Sign:ct,Verify:ot,createSign:ct,createVerify:ot},browser$5}var bn$1={exports:{}};bn$1.exports;var hasRequiredBn$1;function requireBn$1(){return hasRequiredBn$1||(hasRequiredBn$1=1,function(o){(function(e,a){function c(nt,s){if(!nt)throw new Error(s||"Assertion failed")}function j(nt,s){nt.super_=s;var b=function(){};b.prototype=s.prototype,nt.prototype=new b,nt.prototype.constructor=nt}function d(nt,s,b){if(d.isBN(nt))return nt;this.negative=0,this.words=null,this.length=0,this.red=null,nt!==null&&((s==="le"||s==="be")&&(b=s,s=10),this._init(nt||0,s||10,b||"be"))}typeof e=="object"?e.exports=d:a.BN=d,d.BN=d,d.wordSize=26;var et;try{typeof window<"u"&&typeof window.Buffer<"u"?et=window.Buffer:et=require$$1$2.Buffer}catch{}d.isBN=function(s){return s instanceof d?!0:s!==null&&typeof s=="object"&&s.constructor.wordSize===d.wordSize&&Array.isArray(s.words)},d.max=function(s,b){return s.cmp(b)>0?s:b},d.min=function(s,b){return s.cmp(b)<0?s:b},d.prototype._init=function(s,b,$){if(typeof s=="number")return this._initNumber(s,b,$);if(typeof s=="object")return this._initArray(s,b,$);b==="hex"&&(b=16),c(b===(b|0)&&b>=2&&b<=36),s=s.toString().replace(/\s+/g,"");var _e=0;s[0]==="-"&&(_e++,this.negative=1),_e<s.length&&(b===16?this._parseHex(s,_e,$):(this._parseBase(s,b,_e),$==="le"&&this._initArray(this.toArray(),b,$)))},d.prototype._initNumber=function(s,b,$){s<0&&(this.negative=1,s=-s),s<67108864?(this.words=[s&67108863],this.length=1):s<4503599627370496?(this.words=[s&67108863,s/67108864&67108863],this.length=2):(c(s<9007199254740992),this.words=[s&67108863,s/67108864&67108863,1],this.length=3),$==="le"&&this._initArray(this.toArray(),b,$)},d.prototype._initArray=function(s,b,$){if(c(typeof s.length=="number"),s.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(s.length/3),this.words=new Array(this.length);for(var _e=0;_e<this.length;_e++)this.words[_e]=0;var it,pt,mt=0;if($==="be")for(_e=s.length-1,it=0;_e>=0;_e-=3)pt=s[_e]|s[_e-1]<<8|s[_e-2]<<16,this.words[it]|=pt<<mt&67108863,this.words[it+1]=pt>>>26-mt&67108863,mt+=24,mt>=26&&(mt-=26,it++);else if($==="le")for(_e=0,it=0;_e<s.length;_e+=3)pt=s[_e]|s[_e+1]<<8|s[_e+2]<<16,this.words[it]|=pt<<mt&67108863,this.words[it+1]=pt>>>26-mt&67108863,mt+=24,mt>=26&&(mt-=26,it++);return this.strip()};function at(nt,s){var b=nt.charCodeAt(s);return b>=65&&b<=70?b-55:b>=97&&b<=102?b-87:b-48&15}function st(nt,s,b){var $=at(nt,b);return b-1>=s&&($|=at(nt,b-1)<<4),$}d.prototype._parseHex=function(s,b,$){this.length=Math.ceil((s.length-b)/6),this.words=new Array(this.length);for(var _e=0;_e<this.length;_e++)this.words[_e]=0;var it=0,pt=0,mt;if($==="be")for(_e=s.length-1;_e>=b;_e-=2)mt=st(s,b,_e)<<it,this.words[pt]|=mt&67108863,it>=18?(it-=18,pt+=1,this.words[pt]|=mt>>>26):it+=8;else{var lt=s.length-b;for(_e=lt%2===0?b+1:b;_e<s.length;_e+=2)mt=st(s,b,_e)<<it,this.words[pt]|=mt&67108863,it>=18?(it-=18,pt+=1,this.words[pt]|=mt>>>26):it+=8}this.strip()};function ct(nt,s,b,$){for(var _e=0,it=Math.min(nt.length,b),pt=s;pt<it;pt++){var mt=nt.charCodeAt(pt)-48;_e*=$,mt>=49?_e+=mt-49+10:mt>=17?_e+=mt-17+10:_e+=mt}return _e}d.prototype._parseBase=function(s,b,$){this.words=[0],this.length=1;for(var _e=0,it=1;it<=67108863;it*=b)_e++;_e--,it=it/b|0;for(var pt=s.length-$,mt=pt%_e,lt=Math.min(pt,pt-mt)+$,_=0,tt=$;tt<lt;tt+=_e)_=ct(s,tt,tt+_e,b),this.imuln(it),this.words[0]+_<67108864?this.words[0]+=_:this._iaddn(_);if(mt!==0){var Tt=1;for(_=ct(s,tt,s.length,b),tt=0;tt<mt;tt++)Tt*=b;this.imuln(Tt),this.words[0]+_<67108864?this.words[0]+=_:this._iaddn(_)}this.strip()},d.prototype.copy=function(s){s.words=new Array(this.length);for(var b=0;b<this.length;b++)s.words[b]=this.words[b];s.length=this.length,s.negative=this.negative,s.red=this.red},d.prototype.clone=function(){var s=new d(null);return this.copy(s),s},d.prototype._expand=function(s){for(;this.length<s;)this.words[this.length++]=0;return this},d.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},d.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},d.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var ot=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],gt=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],ft=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];d.prototype.toString=function(s,b){s=s||10,b=b|0||1;var $;if(s===16||s==="hex"){$="";for(var _e=0,it=0,pt=0;pt<this.length;pt++){var mt=this.words[pt],lt=((mt<<_e|it)&16777215).toString(16);it=mt>>>24-_e&16777215,it!==0||pt!==this.length-1?$=ot[6-lt.length]+lt+$:$=lt+$,_e+=2,_e>=26&&(_e-=26,pt--)}for(it!==0&&($=it.toString(16)+$);$.length%b!==0;)$="0"+$;return this.negative!==0&&($="-"+$),$}if(s===(s|0)&&s>=2&&s<=36){var _=gt[s],tt=ft[s];$="";var Tt=this.clone();for(Tt.negative=0;!Tt.isZero();){var It=Tt.modn(tt).toString(s);Tt=Tt.idivn(tt),Tt.isZero()?$=It+$:$=ot[_-It.length]+It+$}for(this.isZero()&&($="0"+$);$.length%b!==0;)$="0"+$;return this.negative!==0&&($="-"+$),$}c(!1,"Base should be between 2 and 36")},d.prototype.toNumber=function(){var s=this.words[0];return this.length===2?s+=this.words[1]*67108864:this.length===3&&this.words[2]===1?s+=4503599627370496+this.words[1]*67108864:this.length>2&&c(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-s:s},d.prototype.toJSON=function(){return this.toString(16)},d.prototype.toBuffer=function(s,b){return c(typeof et<"u"),this.toArrayLike(et,s,b)},d.prototype.toArray=function(s,b){return this.toArrayLike(Array,s,b)},d.prototype.toArrayLike=function(s,b,$){var _e=this.byteLength(),it=$||Math.max(1,_e);c(_e<=it,"byte array longer than desired length"),c(it>0,"Requested array length <= 0"),this.strip();var pt=b==="le",mt=new s(it),lt,_,tt=this.clone();if(pt){for(_=0;!tt.isZero();_++)lt=tt.andln(255),tt.iushrn(8),mt[_]=lt;for(;_<it;_++)mt[_]=0}else{for(_=0;_<it-_e;_++)mt[_]=0;for(_=0;!tt.isZero();_++)lt=tt.andln(255),tt.iushrn(8),mt[it-_-1]=lt}return mt},Math.clz32?d.prototype._countBits=function(s){return 32-Math.clz32(s)}:d.prototype._countBits=function(s){var b=s,$=0;return b>=4096&&($+=13,b>>>=13),b>=64&&($+=7,b>>>=7),b>=8&&($+=4,b>>>=4),b>=2&&($+=2,b>>>=2),$+b},d.prototype._zeroBits=function(s){if(s===0)return 26;var b=s,$=0;return b&8191||($+=13,b>>>=13),b&127||($+=7,b>>>=7),b&15||($+=4,b>>>=4),b&3||($+=2,b>>>=2),b&1||$++,$},d.prototype.bitLength=function(){var s=this.words[this.length-1],b=this._countBits(s);return(this.length-1)*26+b};function yt(nt){for(var s=new Array(nt.bitLength()),b=0;b<s.length;b++){var $=b/26|0,_e=b%26;s[b]=(nt.words[$]&1<<_e)>>>_e}return s}d.prototype.zeroBits=function(){if(this.isZero())return 0;for(var s=0,b=0;b<this.length;b++){var $=this._zeroBits(this.words[b]);if(s+=$,$!==26)break}return s},d.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},d.prototype.toTwos=function(s){return this.negative!==0?this.abs().inotn(s).iaddn(1):this.clone()},d.prototype.fromTwos=function(s){return this.testn(s-1)?this.notn(s).iaddn(1).ineg():this.clone()},d.prototype.isNeg=function(){return this.negative!==0},d.prototype.neg=function(){return this.clone().ineg()},d.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},d.prototype.iuor=function(s){for(;this.length<s.length;)this.words[this.length++]=0;for(var b=0;b<s.length;b++)this.words[b]=this.words[b]|s.words[b];return this.strip()},d.prototype.ior=function(s){return c((this.negative|s.negative)===0),this.iuor(s)},d.prototype.or=function(s){return this.length>s.length?this.clone().ior(s):s.clone().ior(this)},d.prototype.uor=function(s){return this.length>s.length?this.clone().iuor(s):s.clone().iuor(this)},d.prototype.iuand=function(s){var b;this.length>s.length?b=s:b=this;for(var $=0;$<b.length;$++)this.words[$]=this.words[$]&s.words[$];return this.length=b.length,this.strip()},d.prototype.iand=function(s){return c((this.negative|s.negative)===0),this.iuand(s)},d.prototype.and=function(s){return this.length>s.length?this.clone().iand(s):s.clone().iand(this)},d.prototype.uand=function(s){return this.length>s.length?this.clone().iuand(s):s.clone().iuand(this)},d.prototype.iuxor=function(s){var b,$;this.length>s.length?(b=this,$=s):(b=s,$=this);for(var _e=0;_e<$.length;_e++)this.words[_e]=b.words[_e]^$.words[_e];if(this!==b)for(;_e<b.length;_e++)this.words[_e]=b.words[_e];return this.length=b.length,this.strip()},d.prototype.ixor=function(s){return c((this.negative|s.negative)===0),this.iuxor(s)},d.prototype.xor=function(s){return this.length>s.length?this.clone().ixor(s):s.clone().ixor(this)},d.prototype.uxor=function(s){return this.length>s.length?this.clone().iuxor(s):s.clone().iuxor(this)},d.prototype.inotn=function(s){c(typeof s=="number"&&s>=0);var b=Math.ceil(s/26)|0,$=s%26;this._expand(b),$>0&&b--;for(var _e=0;_e<b;_e++)this.words[_e]=~this.words[_e]&67108863;return $>0&&(this.words[_e]=~this.words[_e]&67108863>>26-$),this.strip()},d.prototype.notn=function(s){return this.clone().inotn(s)},d.prototype.setn=function(s,b){c(typeof s=="number"&&s>=0);var $=s/26|0,_e=s%26;return this._expand($+1),b?this.words[$]=this.words[$]|1<<_e:this.words[$]=this.words[$]&~(1<<_e),this.strip()},d.prototype.iadd=function(s){var b;if(this.negative!==0&&s.negative===0)return this.negative=0,b=this.isub(s),this.negative^=1,this._normSign();if(this.negative===0&&s.negative!==0)return s.negative=0,b=this.isub(s),s.negative=1,b._normSign();var $,_e;this.length>s.length?($=this,_e=s):($=s,_e=this);for(var it=0,pt=0;pt<_e.length;pt++)b=($.words[pt]|0)+(_e.words[pt]|0)+it,this.words[pt]=b&67108863,it=b>>>26;for(;it!==0&&pt<$.length;pt++)b=($.words[pt]|0)+it,this.words[pt]=b&67108863,it=b>>>26;if(this.length=$.length,it!==0)this.words[this.length]=it,this.length++;else if($!==this)for(;pt<$.length;pt++)this.words[pt]=$.words[pt];return this},d.prototype.add=function(s){var b;return s.negative!==0&&this.negative===0?(s.negative=0,b=this.sub(s),s.negative^=1,b):s.negative===0&&this.negative!==0?(this.negative=0,b=s.sub(this),this.negative=1,b):this.length>s.length?this.clone().iadd(s):s.clone().iadd(this)},d.prototype.isub=function(s){if(s.negative!==0){s.negative=0;var b=this.iadd(s);return s.negative=1,b._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(s),this.negative=1,this._normSign();var $=this.cmp(s);if($===0)return this.negative=0,this.length=1,this.words[0]=0,this;var _e,it;$>0?(_e=this,it=s):(_e=s,it=this);for(var pt=0,mt=0;mt<it.length;mt++)b=(_e.words[mt]|0)-(it.words[mt]|0)+pt,pt=b>>26,this.words[mt]=b&67108863;for(;pt!==0&&mt<_e.length;mt++)b=(_e.words[mt]|0)+pt,pt=b>>26,this.words[mt]=b&67108863;if(pt===0&&mt<_e.length&&_e!==this)for(;mt<_e.length;mt++)this.words[mt]=_e.words[mt];return this.length=Math.max(this.length,mt),_e!==this&&(this.negative=1),this.strip()},d.prototype.sub=function(s){return this.clone().isub(s)};function vt(nt,s,b){b.negative=s.negative^nt.negative;var $=nt.length+s.length|0;b.length=$,$=$-1|0;var _e=nt.words[0]|0,it=s.words[0]|0,pt=_e*it,mt=pt&67108863,lt=pt/67108864|0;b.words[0]=mt;for(var _=1;_<$;_++){for(var tt=lt>>>26,Tt=lt&67108863,It=Math.min(_,s.length-1),Nt=Math.max(0,_-nt.length+1);Nt<=It;Nt++){var Ut=_-Nt|0;_e=nt.words[Ut]|0,it=s.words[Nt]|0,pt=_e*it+Tt,tt+=pt/67108864|0,Tt=pt&67108863}b.words[_]=Tt|0,lt=tt|0}return lt!==0?b.words[_]=lt|0:b.length--,b.strip()}var rt=function(s,b,$){var _e=s.words,it=b.words,pt=$.words,mt=0,lt,_,tt,Tt=_e[0]|0,It=Tt&8191,Nt=Tt>>>13,Ut=_e[1]|0,Gt=Ut&8191,Pt=Ut>>>13,qt=_e[2]|0,Kt=qt&8191,jt=qt>>>13,Ht=_e[3]|0,Bt=Ht&8191,Jt=Ht>>>13,sr=_e[4]|0,hr=sr&8191,Ar=sr>>>13,gn=_e[5]|0,Lr=gn&8191,wr=gn>>>13,En=_e[6]|0,Dr=En&8191,Qr=En>>>13,Dn=_e[7]|0,Br=Dn&8191,Gr=Dn>>>13,Ln=_e[8]|0,Fr=Ln&8191,_i=Ln>>>13,Kn=_e[9]|0,Wt=Kn&8191,Lt=Kn>>>13,zt=it[0]|0,Zt=zt&8191,ar=zt>>>13,Or=it[1]|0,vr=Or&8191,Rr=Or>>>13,fr=it[2]|0,tr=fr&8191,yr=fr>>>13,fn=it[3]|0,Nr=fn&8191,zr=fn>>>13,xn=it[4]|0,Kr=xn&8191,nn=xn>>>13,Wn=it[5]|0,Zr=Wn&8191,on=Wn>>>13,Xn=it[6]|0,en=Xn&8191,ln=Xn>>>13,Zn=it[7]|0,$t=Zn&8191,or=Zn>>>13,Yr=it[8]|0,Vr=Yr&8191,Hr=Yr>>>13,Mn=it[9]|0,Ur=Mn&8191,tn=Mn>>>13;$.negative=s.negative^b.negative,$.length=19,lt=Math.imul(It,Zt),_=Math.imul(It,ar),_=_+Math.imul(Nt,Zt)|0,tt=Math.imul(Nt,ar);var jn=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(jn>>>26)|0,jn&=67108863,lt=Math.imul(Gt,Zt),_=Math.imul(Gt,ar),_=_+Math.imul(Pt,Zt)|0,tt=Math.imul(Pt,ar),lt=lt+Math.imul(It,vr)|0,_=_+Math.imul(It,Rr)|0,_=_+Math.imul(Nt,vr)|0,tt=tt+Math.imul(Nt,Rr)|0;var Un=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(Un>>>26)|0,Un&=67108863,lt=Math.imul(Kt,Zt),_=Math.imul(Kt,ar),_=_+Math.imul(jt,Zt)|0,tt=Math.imul(jt,ar),lt=lt+Math.imul(Gt,vr)|0,_=_+Math.imul(Gt,Rr)|0,_=_+Math.imul(Pt,vr)|0,tt=tt+Math.imul(Pt,Rr)|0,lt=lt+Math.imul(It,tr)|0,_=_+Math.imul(It,yr)|0,_=_+Math.imul(Nt,tr)|0,tt=tt+Math.imul(Nt,yr)|0;var ao=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(ao>>>26)|0,ao&=67108863,lt=Math.imul(Bt,Zt),_=Math.imul(Bt,ar),_=_+Math.imul(Jt,Zt)|0,tt=Math.imul(Jt,ar),lt=lt+Math.imul(Kt,vr)|0,_=_+Math.imul(Kt,Rr)|0,_=_+Math.imul(jt,vr)|0,tt=tt+Math.imul(jt,Rr)|0,lt=lt+Math.imul(Gt,tr)|0,_=_+Math.imul(Gt,yr)|0,_=_+Math.imul(Pt,tr)|0,tt=tt+Math.imul(Pt,yr)|0,lt=lt+Math.imul(It,Nr)|0,_=_+Math.imul(It,zr)|0,_=_+Math.imul(Nt,Nr)|0,tt=tt+Math.imul(Nt,zr)|0;var co=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(co>>>26)|0,co&=67108863,lt=Math.imul(hr,Zt),_=Math.imul(hr,ar),_=_+Math.imul(Ar,Zt)|0,tt=Math.imul(Ar,ar),lt=lt+Math.imul(Bt,vr)|0,_=_+Math.imul(Bt,Rr)|0,_=_+Math.imul(Jt,vr)|0,tt=tt+Math.imul(Jt,Rr)|0,lt=lt+Math.imul(Kt,tr)|0,_=_+Math.imul(Kt,yr)|0,_=_+Math.imul(jt,tr)|0,tt=tt+Math.imul(jt,yr)|0,lt=lt+Math.imul(Gt,Nr)|0,_=_+Math.imul(Gt,zr)|0,_=_+Math.imul(Pt,Nr)|0,tt=tt+Math.imul(Pt,zr)|0,lt=lt+Math.imul(It,Kr)|0,_=_+Math.imul(It,nn)|0,_=_+Math.imul(Nt,Kr)|0,tt=tt+Math.imul(Nt,nn)|0;var ro=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(ro>>>26)|0,ro&=67108863,lt=Math.imul(Lr,Zt),_=Math.imul(Lr,ar),_=_+Math.imul(wr,Zt)|0,tt=Math.imul(wr,ar),lt=lt+Math.imul(hr,vr)|0,_=_+Math.imul(hr,Rr)|0,_=_+Math.imul(Ar,vr)|0,tt=tt+Math.imul(Ar,Rr)|0,lt=lt+Math.imul(Bt,tr)|0,_=_+Math.imul(Bt,yr)|0,_=_+Math.imul(Jt,tr)|0,tt=tt+Math.imul(Jt,yr)|0,lt=lt+Math.imul(Kt,Nr)|0,_=_+Math.imul(Kt,zr)|0,_=_+Math.imul(jt,Nr)|0,tt=tt+Math.imul(jt,zr)|0,lt=lt+Math.imul(Gt,Kr)|0,_=_+Math.imul(Gt,nn)|0,_=_+Math.imul(Pt,Kr)|0,tt=tt+Math.imul(Pt,nn)|0,lt=lt+Math.imul(It,Zr)|0,_=_+Math.imul(It,on)|0,_=_+Math.imul(Nt,Zr)|0,tt=tt+Math.imul(Nt,on)|0;var vo=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(vo>>>26)|0,vo&=67108863,lt=Math.imul(Dr,Zt),_=Math.imul(Dr,ar),_=_+Math.imul(Qr,Zt)|0,tt=Math.imul(Qr,ar),lt=lt+Math.imul(Lr,vr)|0,_=_+Math.imul(Lr,Rr)|0,_=_+Math.imul(wr,vr)|0,tt=tt+Math.imul(wr,Rr)|0,lt=lt+Math.imul(hr,tr)|0,_=_+Math.imul(hr,yr)|0,_=_+Math.imul(Ar,tr)|0,tt=tt+Math.imul(Ar,yr)|0,lt=lt+Math.imul(Bt,Nr)|0,_=_+Math.imul(Bt,zr)|0,_=_+Math.imul(Jt,Nr)|0,tt=tt+Math.imul(Jt,zr)|0,lt=lt+Math.imul(Kt,Kr)|0,_=_+Math.imul(Kt,nn)|0,_=_+Math.imul(jt,Kr)|0,tt=tt+Math.imul(jt,nn)|0,lt=lt+Math.imul(Gt,Zr)|0,_=_+Math.imul(Gt,on)|0,_=_+Math.imul(Pt,Zr)|0,tt=tt+Math.imul(Pt,on)|0,lt=lt+Math.imul(It,en)|0,_=_+Math.imul(It,ln)|0,_=_+Math.imul(Nt,en)|0,tt=tt+Math.imul(Nt,ln)|0;var oo=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(oo>>>26)|0,oo&=67108863,lt=Math.imul(Br,Zt),_=Math.imul(Br,ar),_=_+Math.imul(Gr,Zt)|0,tt=Math.imul(Gr,ar),lt=lt+Math.imul(Dr,vr)|0,_=_+Math.imul(Dr,Rr)|0,_=_+Math.imul(Qr,vr)|0,tt=tt+Math.imul(Qr,Rr)|0,lt=lt+Math.imul(Lr,tr)|0,_=_+Math.imul(Lr,yr)|0,_=_+Math.imul(wr,tr)|0,tt=tt+Math.imul(wr,yr)|0,lt=lt+Math.imul(hr,Nr)|0,_=_+Math.imul(hr,zr)|0,_=_+Math.imul(Ar,Nr)|0,tt=tt+Math.imul(Ar,zr)|0,lt=lt+Math.imul(Bt,Kr)|0,_=_+Math.imul(Bt,nn)|0,_=_+Math.imul(Jt,Kr)|0,tt=tt+Math.imul(Jt,nn)|0,lt=lt+Math.imul(Kt,Zr)|0,_=_+Math.imul(Kt,on)|0,_=_+Math.imul(jt,Zr)|0,tt=tt+Math.imul(jt,on)|0,lt=lt+Math.imul(Gt,en)|0,_=_+Math.imul(Gt,ln)|0,_=_+Math.imul(Pt,en)|0,tt=tt+Math.imul(Pt,ln)|0,lt=lt+Math.imul(It,$t)|0,_=_+Math.imul(It,or)|0,_=_+Math.imul(Nt,$t)|0,tt=tt+Math.imul(Nt,or)|0;var mo=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(mo>>>26)|0,mo&=67108863,lt=Math.imul(Fr,Zt),_=Math.imul(Fr,ar),_=_+Math.imul(_i,Zt)|0,tt=Math.imul(_i,ar),lt=lt+Math.imul(Br,vr)|0,_=_+Math.imul(Br,Rr)|0,_=_+Math.imul(Gr,vr)|0,tt=tt+Math.imul(Gr,Rr)|0,lt=lt+Math.imul(Dr,tr)|0,_=_+Math.imul(Dr,yr)|0,_=_+Math.imul(Qr,tr)|0,tt=tt+Math.imul(Qr,yr)|0,lt=lt+Math.imul(Lr,Nr)|0,_=_+Math.imul(Lr,zr)|0,_=_+Math.imul(wr,Nr)|0,tt=tt+Math.imul(wr,zr)|0,lt=lt+Math.imul(hr,Kr)|0,_=_+Math.imul(hr,nn)|0,_=_+Math.imul(Ar,Kr)|0,tt=tt+Math.imul(Ar,nn)|0,lt=lt+Math.imul(Bt,Zr)|0,_=_+Math.imul(Bt,on)|0,_=_+Math.imul(Jt,Zr)|0,tt=tt+Math.imul(Jt,on)|0,lt=lt+Math.imul(Kt,en)|0,_=_+Math.imul(Kt,ln)|0,_=_+Math.imul(jt,en)|0,tt=tt+Math.imul(jt,ln)|0,lt=lt+Math.imul(Gt,$t)|0,_=_+Math.imul(Gt,or)|0,_=_+Math.imul(Pt,$t)|0,tt=tt+Math.imul(Pt,or)|0,lt=lt+Math.imul(It,Vr)|0,_=_+Math.imul(It,Hr)|0,_=_+Math.imul(Nt,Vr)|0,tt=tt+Math.imul(Nt,Hr)|0;var ho=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(ho>>>26)|0,ho&=67108863,lt=Math.imul(Wt,Zt),_=Math.imul(Wt,ar),_=_+Math.imul(Lt,Zt)|0,tt=Math.imul(Lt,ar),lt=lt+Math.imul(Fr,vr)|0,_=_+Math.imul(Fr,Rr)|0,_=_+Math.imul(_i,vr)|0,tt=tt+Math.imul(_i,Rr)|0,lt=lt+Math.imul(Br,tr)|0,_=_+Math.imul(Br,yr)|0,_=_+Math.imul(Gr,tr)|0,tt=tt+Math.imul(Gr,yr)|0,lt=lt+Math.imul(Dr,Nr)|0,_=_+Math.imul(Dr,zr)|0,_=_+Math.imul(Qr,Nr)|0,tt=tt+Math.imul(Qr,zr)|0,lt=lt+Math.imul(Lr,Kr)|0,_=_+Math.imul(Lr,nn)|0,_=_+Math.imul(wr,Kr)|0,tt=tt+Math.imul(wr,nn)|0,lt=lt+Math.imul(hr,Zr)|0,_=_+Math.imul(hr,on)|0,_=_+Math.imul(Ar,Zr)|0,tt=tt+Math.imul(Ar,on)|0,lt=lt+Math.imul(Bt,en)|0,_=_+Math.imul(Bt,ln)|0,_=_+Math.imul(Jt,en)|0,tt=tt+Math.imul(Jt,ln)|0,lt=lt+Math.imul(Kt,$t)|0,_=_+Math.imul(Kt,or)|0,_=_+Math.imul(jt,$t)|0,tt=tt+Math.imul(jt,or)|0,lt=lt+Math.imul(Gt,Vr)|0,_=_+Math.imul(Gt,Hr)|0,_=_+Math.imul(Pt,Vr)|0,tt=tt+Math.imul(Pt,Hr)|0,lt=lt+Math.imul(It,Ur)|0,_=_+Math.imul(It,tn)|0,_=_+Math.imul(Nt,Ur)|0,tt=tt+Math.imul(Nt,tn)|0;var go=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(go>>>26)|0,go&=67108863,lt=Math.imul(Wt,vr),_=Math.imul(Wt,Rr),_=_+Math.imul(Lt,vr)|0,tt=Math.imul(Lt,Rr),lt=lt+Math.imul(Fr,tr)|0,_=_+Math.imul(Fr,yr)|0,_=_+Math.imul(_i,tr)|0,tt=tt+Math.imul(_i,yr)|0,lt=lt+Math.imul(Br,Nr)|0,_=_+Math.imul(Br,zr)|0,_=_+Math.imul(Gr,Nr)|0,tt=tt+Math.imul(Gr,zr)|0,lt=lt+Math.imul(Dr,Kr)|0,_=_+Math.imul(Dr,nn)|0,_=_+Math.imul(Qr,Kr)|0,tt=tt+Math.imul(Qr,nn)|0,lt=lt+Math.imul(Lr,Zr)|0,_=_+Math.imul(Lr,on)|0,_=_+Math.imul(wr,Zr)|0,tt=tt+Math.imul(wr,on)|0,lt=lt+Math.imul(hr,en)|0,_=_+Math.imul(hr,ln)|0,_=_+Math.imul(Ar,en)|0,tt=tt+Math.imul(Ar,ln)|0,lt=lt+Math.imul(Bt,$t)|0,_=_+Math.imul(Bt,or)|0,_=_+Math.imul(Jt,$t)|0,tt=tt+Math.imul(Jt,or)|0,lt=lt+Math.imul(Kt,Vr)|0,_=_+Math.imul(Kt,Hr)|0,_=_+Math.imul(jt,Vr)|0,tt=tt+Math.imul(jt,Hr)|0,lt=lt+Math.imul(Gt,Ur)|0,_=_+Math.imul(Gt,tn)|0,_=_+Math.imul(Pt,Ur)|0,tt=tt+Math.imul(Pt,tn)|0;var bo=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(bo>>>26)|0,bo&=67108863,lt=Math.imul(Wt,tr),_=Math.imul(Wt,yr),_=_+Math.imul(Lt,tr)|0,tt=Math.imul(Lt,yr),lt=lt+Math.imul(Fr,Nr)|0,_=_+Math.imul(Fr,zr)|0,_=_+Math.imul(_i,Nr)|0,tt=tt+Math.imul(_i,zr)|0,lt=lt+Math.imul(Br,Kr)|0,_=_+Math.imul(Br,nn)|0,_=_+Math.imul(Gr,Kr)|0,tt=tt+Math.imul(Gr,nn)|0,lt=lt+Math.imul(Dr,Zr)|0,_=_+Math.imul(Dr,on)|0,_=_+Math.imul(Qr,Zr)|0,tt=tt+Math.imul(Qr,on)|0,lt=lt+Math.imul(Lr,en)|0,_=_+Math.imul(Lr,ln)|0,_=_+Math.imul(wr,en)|0,tt=tt+Math.imul(wr,ln)|0,lt=lt+Math.imul(hr,$t)|0,_=_+Math.imul(hr,or)|0,_=_+Math.imul(Ar,$t)|0,tt=tt+Math.imul(Ar,or)|0,lt=lt+Math.imul(Bt,Vr)|0,_=_+Math.imul(Bt,Hr)|0,_=_+Math.imul(Jt,Vr)|0,tt=tt+Math.imul(Jt,Hr)|0,lt=lt+Math.imul(Kt,Ur)|0,_=_+Math.imul(Kt,tn)|0,_=_+Math.imul(jt,Ur)|0,tt=tt+Math.imul(jt,tn)|0;var ur=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(ur>>>26)|0,ur&=67108863,lt=Math.imul(Wt,Nr),_=Math.imul(Wt,zr),_=_+Math.imul(Lt,Nr)|0,tt=Math.imul(Lt,zr),lt=lt+Math.imul(Fr,Kr)|0,_=_+Math.imul(Fr,nn)|0,_=_+Math.imul(_i,Kr)|0,tt=tt+Math.imul(_i,nn)|0,lt=lt+Math.imul(Br,Zr)|0,_=_+Math.imul(Br,on)|0,_=_+Math.imul(Gr,Zr)|0,tt=tt+Math.imul(Gr,on)|0,lt=lt+Math.imul(Dr,en)|0,_=_+Math.imul(Dr,ln)|0,_=_+Math.imul(Qr,en)|0,tt=tt+Math.imul(Qr,ln)|0,lt=lt+Math.imul(Lr,$t)|0,_=_+Math.imul(Lr,or)|0,_=_+Math.imul(wr,$t)|0,tt=tt+Math.imul(wr,or)|0,lt=lt+Math.imul(hr,Vr)|0,_=_+Math.imul(hr,Hr)|0,_=_+Math.imul(Ar,Vr)|0,tt=tt+Math.imul(Ar,Hr)|0,lt=lt+Math.imul(Bt,Ur)|0,_=_+Math.imul(Bt,tn)|0,_=_+Math.imul(Jt,Ur)|0,tt=tt+Math.imul(Jt,tn)|0;var Cr=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,lt=Math.imul(Wt,Kr),_=Math.imul(Wt,nn),_=_+Math.imul(Lt,Kr)|0,tt=Math.imul(Lt,nn),lt=lt+Math.imul(Fr,Zr)|0,_=_+Math.imul(Fr,on)|0,_=_+Math.imul(_i,Zr)|0,tt=tt+Math.imul(_i,on)|0,lt=lt+Math.imul(Br,en)|0,_=_+Math.imul(Br,ln)|0,_=_+Math.imul(Gr,en)|0,tt=tt+Math.imul(Gr,ln)|0,lt=lt+Math.imul(Dr,$t)|0,_=_+Math.imul(Dr,or)|0,_=_+Math.imul(Qr,$t)|0,tt=tt+Math.imul(Qr,or)|0,lt=lt+Math.imul(Lr,Vr)|0,_=_+Math.imul(Lr,Hr)|0,_=_+Math.imul(wr,Vr)|0,tt=tt+Math.imul(wr,Hr)|0,lt=lt+Math.imul(hr,Ur)|0,_=_+Math.imul(hr,tn)|0,_=_+Math.imul(Ar,Ur)|0,tt=tt+Math.imul(Ar,tn)|0;var $r=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+($r>>>26)|0,$r&=67108863,lt=Math.imul(Wt,Zr),_=Math.imul(Wt,on),_=_+Math.imul(Lt,Zr)|0,tt=Math.imul(Lt,on),lt=lt+Math.imul(Fr,en)|0,_=_+Math.imul(Fr,ln)|0,_=_+Math.imul(_i,en)|0,tt=tt+Math.imul(_i,ln)|0,lt=lt+Math.imul(Br,$t)|0,_=_+Math.imul(Br,or)|0,_=_+Math.imul(Gr,$t)|0,tt=tt+Math.imul(Gr,or)|0,lt=lt+Math.imul(Dr,Vr)|0,_=_+Math.imul(Dr,Hr)|0,_=_+Math.imul(Qr,Vr)|0,tt=tt+Math.imul(Qr,Hr)|0,lt=lt+Math.imul(Lr,Ur)|0,_=_+Math.imul(Lr,tn)|0,_=_+Math.imul(wr,Ur)|0,tt=tt+Math.imul(wr,tn)|0;var dn=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(dn>>>26)|0,dn&=67108863,lt=Math.imul(Wt,en),_=Math.imul(Wt,ln),_=_+Math.imul(Lt,en)|0,tt=Math.imul(Lt,ln),lt=lt+Math.imul(Fr,$t)|0,_=_+Math.imul(Fr,or)|0,_=_+Math.imul(_i,$t)|0,tt=tt+Math.imul(_i,or)|0,lt=lt+Math.imul(Br,Vr)|0,_=_+Math.imul(Br,Hr)|0,_=_+Math.imul(Gr,Vr)|0,tt=tt+Math.imul(Gr,Hr)|0,lt=lt+Math.imul(Dr,Ur)|0,_=_+Math.imul(Dr,tn)|0,_=_+Math.imul(Qr,Ur)|0,tt=tt+Math.imul(Qr,tn)|0;var rn=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(rn>>>26)|0,rn&=67108863,lt=Math.imul(Wt,$t),_=Math.imul(Wt,or),_=_+Math.imul(Lt,$t)|0,tt=Math.imul(Lt,or),lt=lt+Math.imul(Fr,Vr)|0,_=_+Math.imul(Fr,Hr)|0,_=_+Math.imul(_i,Vr)|0,tt=tt+Math.imul(_i,Hr)|0,lt=lt+Math.imul(Br,Ur)|0,_=_+Math.imul(Br,tn)|0,_=_+Math.imul(Gr,Ur)|0,tt=tt+Math.imul(Gr,tn)|0;var Sn=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,lt=Math.imul(Wt,Vr),_=Math.imul(Wt,Hr),_=_+Math.imul(Lt,Vr)|0,tt=Math.imul(Lt,Hr),lt=lt+Math.imul(Fr,Ur)|0,_=_+Math.imul(Fr,tn)|0,_=_+Math.imul(_i,Ur)|0,tt=tt+Math.imul(_i,tn)|0;var In=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(In>>>26)|0,In&=67108863,lt=Math.imul(Wt,Ur),_=Math.imul(Wt,tn),_=_+Math.imul(Lt,Ur)|0,tt=Math.imul(Lt,tn);var Cn=(mt+lt|0)+((_&8191)<<13)|0;return mt=(tt+(_>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,pt[0]=jn,pt[1]=Un,pt[2]=ao,pt[3]=co,pt[4]=ro,pt[5]=vo,pt[6]=oo,pt[7]=mo,pt[8]=ho,pt[9]=go,pt[10]=bo,pt[11]=ur,pt[12]=Cr,pt[13]=$r,pt[14]=dn,pt[15]=rn,pt[16]=Sn,pt[17]=In,pt[18]=Cn,mt!==0&&(pt[19]=mt,$.length++),$};Math.imul||(rt=vt);function bt(nt,s,b){b.negative=s.negative^nt.negative,b.length=nt.length+s.length;for(var $=0,_e=0,it=0;it<b.length-1;it++){var pt=_e;_e=0;for(var mt=$&67108863,lt=Math.min(it,s.length-1),_=Math.max(0,it-nt.length+1);_<=lt;_++){var tt=it-_,Tt=nt.words[tt]|0,It=s.words[_]|0,Nt=Tt*It,Ut=Nt&67108863;pt=pt+(Nt/67108864|0)|0,Ut=Ut+mt|0,mt=Ut&67108863,pt=pt+(Ut>>>26)|0,_e+=pt>>>26,pt&=67108863}b.words[it]=mt,$=pt,pt=_e}return $!==0?b.words[it]=$:b.length--,b.strip()}function ht(nt,s,b){var $=new wt;return $.mulp(nt,s,b)}d.prototype.mulTo=function(s,b){var $,_e=this.length+s.length;return this.length===10&&s.length===10?$=rt(this,s,b):_e<63?$=vt(this,s,b):_e<1024?$=bt(this,s,b):$=ht(this,s,b),$};function wt(nt,s){this.x=nt,this.y=s}wt.prototype.makeRBT=function(s){for(var b=new Array(s),$=d.prototype._countBits(s)-1,_e=0;_e<s;_e++)b[_e]=this.revBin(_e,$,s);return b},wt.prototype.revBin=function(s,b,$){if(s===0||s===$-1)return s;for(var _e=0,it=0;it<b;it++)_e|=(s&1)<<b-it-1,s>>=1;return _e},wt.prototype.permute=function(s,b,$,_e,it,pt){for(var mt=0;mt<pt;mt++)_e[mt]=b[s[mt]],it[mt]=$[s[mt]]},wt.prototype.transform=function(s,b,$,_e,it,pt){this.permute(pt,s,b,$,_e,it);for(var mt=1;mt<it;mt<<=1)for(var lt=mt<<1,_=Math.cos(2*Math.PI/lt),tt=Math.sin(2*Math.PI/lt),Tt=0;Tt<it;Tt+=lt)for(var It=_,Nt=tt,Ut=0;Ut<mt;Ut++){var Gt=$[Tt+Ut],Pt=_e[Tt+Ut],qt=$[Tt+Ut+mt],Kt=_e[Tt+Ut+mt],jt=It*qt-Nt*Kt;Kt=It*Kt+Nt*qt,qt=jt,$[Tt+Ut]=Gt+qt,_e[Tt+Ut]=Pt+Kt,$[Tt+Ut+mt]=Gt-qt,_e[Tt+Ut+mt]=Pt-Kt,Ut!==lt&&(jt=_*It-tt*Nt,Nt=_*Nt+tt*It,It=jt)}},wt.prototype.guessLen13b=function(s,b){var $=Math.max(b,s)|1,_e=$&1,it=0;for($=$/2|0;$;$=$>>>1)it++;return 1<<it+1+_e},wt.prototype.conjugate=function(s,b,$){if(!($<=1))for(var _e=0;_e<$/2;_e++){var it=s[_e];s[_e]=s[$-_e-1],s[$-_e-1]=it,it=b[_e],b[_e]=-b[$-_e-1],b[$-_e-1]=-it}},wt.prototype.normalize13b=function(s,b){for(var $=0,_e=0;_e<b/2;_e++){var it=Math.round(s[2*_e+1]/b)*8192+Math.round(s[2*_e]/b)+$;s[_e]=it&67108863,it<67108864?$=0:$=it/67108864|0}return s},wt.prototype.convert13b=function(s,b,$,_e){for(var it=0,pt=0;pt<b;pt++)it=it+(s[pt]|0),$[2*pt]=it&8191,it=it>>>13,$[2*pt+1]=it&8191,it=it>>>13;for(pt=2*b;pt<_e;++pt)$[pt]=0;c(it===0),c((it&-8192)===0)},wt.prototype.stub=function(s){for(var b=new Array(s),$=0;$<s;$++)b[$]=0;return b},wt.prototype.mulp=function(s,b,$){var _e=2*this.guessLen13b(s.length,b.length),it=this.makeRBT(_e),pt=this.stub(_e),mt=new Array(_e),lt=new Array(_e),_=new Array(_e),tt=new Array(_e),Tt=new Array(_e),It=new Array(_e),Nt=$.words;Nt.length=_e,this.convert13b(s.words,s.length,mt,_e),this.convert13b(b.words,b.length,tt,_e),this.transform(mt,pt,lt,_,_e,it),this.transform(tt,pt,Tt,It,_e,it);for(var Ut=0;Ut<_e;Ut++){var Gt=lt[Ut]*Tt[Ut]-_[Ut]*It[Ut];_[Ut]=lt[Ut]*It[Ut]+_[Ut]*Tt[Ut],lt[Ut]=Gt}return this.conjugate(lt,_,_e),this.transform(lt,_,Nt,pt,_e,it),this.conjugate(Nt,pt,_e),this.normalize13b(Nt,_e),$.negative=s.negative^b.negative,$.length=s.length+b.length,$.strip()},d.prototype.mul=function(s){var b=new d(null);return b.words=new Array(this.length+s.length),this.mulTo(s,b)},d.prototype.mulf=function(s){var b=new d(null);return b.words=new Array(this.length+s.length),ht(this,s,b)},d.prototype.imul=function(s){return this.clone().mulTo(s,this)},d.prototype.imuln=function(s){c(typeof s=="number"),c(s<67108864);for(var b=0,$=0;$<this.length;$++){var _e=(this.words[$]|0)*s,it=(_e&67108863)+(b&67108863);b>>=26,b+=_e/67108864|0,b+=it>>>26,this.words[$]=it&67108863}return b!==0&&(this.words[$]=b,this.length++),this},d.prototype.muln=function(s){return this.clone().imuln(s)},d.prototype.sqr=function(){return this.mul(this)},d.prototype.isqr=function(){return this.imul(this.clone())},d.prototype.pow=function(s){var b=yt(s);if(b.length===0)return new d(1);for(var $=this,_e=0;_e<b.length&&b[_e]===0;_e++,$=$.sqr());if(++_e<b.length)for(var it=$.sqr();_e<b.length;_e++,it=it.sqr())b[_e]!==0&&($=$.mul(it));return $},d.prototype.iushln=function(s){c(typeof s=="number"&&s>=0);var b=s%26,$=(s-b)/26,_e=67108863>>>26-b<<26-b,it;if(b!==0){var pt=0;for(it=0;it<this.length;it++){var mt=this.words[it]&_e,lt=(this.words[it]|0)-mt<<b;this.words[it]=lt|pt,pt=mt>>>26-b}pt&&(this.words[it]=pt,this.length++)}if($!==0){for(it=this.length-1;it>=0;it--)this.words[it+$]=this.words[it];for(it=0;it<$;it++)this.words[it]=0;this.length+=$}return this.strip()},d.prototype.ishln=function(s){return c(this.negative===0),this.iushln(s)},d.prototype.iushrn=function(s,b,$){c(typeof s=="number"&&s>=0);var _e;b?_e=(b-b%26)/26:_e=0;var it=s%26,pt=Math.min((s-it)/26,this.length),mt=67108863^67108863>>>it<<it,lt=$;if(_e-=pt,_e=Math.max(0,_e),lt){for(var _=0;_<pt;_++)lt.words[_]=this.words[_];lt.length=pt}if(pt!==0)if(this.length>pt)for(this.length-=pt,_=0;_<this.length;_++)this.words[_]=this.words[_+pt];else this.words[0]=0,this.length=1;var tt=0;for(_=this.length-1;_>=0&&(tt!==0||_>=_e);_--){var Tt=this.words[_]|0;this.words[_]=tt<<26-it|Tt>>>it,tt=Tt&mt}return lt&&tt!==0&&(lt.words[lt.length++]=tt),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},d.prototype.ishrn=function(s,b,$){return c(this.negative===0),this.iushrn(s,b,$)},d.prototype.shln=function(s){return this.clone().ishln(s)},d.prototype.ushln=function(s){return this.clone().iushln(s)},d.prototype.shrn=function(s){return this.clone().ishrn(s)},d.prototype.ushrn=function(s){return this.clone().iushrn(s)},d.prototype.testn=function(s){c(typeof s=="number"&&s>=0);var b=s%26,$=(s-b)/26,_e=1<<b;if(this.length<=$)return!1;var it=this.words[$];return!!(it&_e)},d.prototype.imaskn=function(s){c(typeof s=="number"&&s>=0);var b=s%26,$=(s-b)/26;if(c(this.negative===0,"imaskn works only with positive numbers"),this.length<=$)return this;if(b!==0&&$++,this.length=Math.min($,this.length),b!==0){var _e=67108863^67108863>>>b<<b;this.words[this.length-1]&=_e}return this.strip()},d.prototype.maskn=function(s){return this.clone().imaskn(s)},d.prototype.iaddn=function(s){return c(typeof s=="number"),c(s<67108864),s<0?this.isubn(-s):this.negative!==0?this.length===1&&(this.words[0]|0)<s?(this.words[0]=s-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(s),this.negative=1,this):this._iaddn(s)},d.prototype._iaddn=function(s){this.words[0]+=s;for(var b=0;b<this.length&&this.words[b]>=67108864;b++)this.words[b]-=67108864,b===this.length-1?this.words[b+1]=1:this.words[b+1]++;return this.length=Math.max(this.length,b+1),this},d.prototype.isubn=function(s){if(c(typeof s=="number"),c(s<67108864),s<0)return this.iaddn(-s);if(this.negative!==0)return this.negative=0,this.iaddn(s),this.negative=1,this;if(this.words[0]-=s,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var b=0;b<this.length&&this.words[b]<0;b++)this.words[b]+=67108864,this.words[b+1]-=1;return this.strip()},d.prototype.addn=function(s){return this.clone().iaddn(s)},d.prototype.subn=function(s){return this.clone().isubn(s)},d.prototype.iabs=function(){return this.negative=0,this},d.prototype.abs=function(){return this.clone().iabs()},d.prototype._ishlnsubmul=function(s,b,$){var _e=s.length+$,it;this._expand(_e);var pt,mt=0;for(it=0;it<s.length;it++){pt=(this.words[it+$]|0)+mt;var lt=(s.words[it]|0)*b;pt-=lt&67108863,mt=(pt>>26)-(lt/67108864|0),this.words[it+$]=pt&67108863}for(;it<this.length-$;it++)pt=(this.words[it+$]|0)+mt,mt=pt>>26,this.words[it+$]=pt&67108863;if(mt===0)return this.strip();for(c(mt===-1),mt=0,it=0;it<this.length;it++)pt=-(this.words[it]|0)+mt,mt=pt>>26,this.words[it]=pt&67108863;return this.negative=1,this.strip()},d.prototype._wordDiv=function(s,b){var $=this.length-s.length,_e=this.clone(),it=s,pt=it.words[it.length-1]|0,mt=this._countBits(pt);$=26-mt,$!==0&&(it=it.ushln($),_e.iushln($),pt=it.words[it.length-1]|0);var lt=_e.length-it.length,_;if(b!=="mod"){_=new d(null),_.length=lt+1,_.words=new Array(_.length);for(var tt=0;tt<_.length;tt++)_.words[tt]=0}var Tt=_e.clone()._ishlnsubmul(it,1,lt);Tt.negative===0&&(_e=Tt,_&&(_.words[lt]=1));for(var It=lt-1;It>=0;It--){var Nt=(_e.words[it.length+It]|0)*67108864+(_e.words[it.length+It-1]|0);for(Nt=Math.min(Nt/pt|0,67108863),_e._ishlnsubmul(it,Nt,It);_e.negative!==0;)Nt--,_e.negative=0,_e._ishlnsubmul(it,1,It),_e.isZero()||(_e.negative^=1);_&&(_.words[It]=Nt)}return _&&_.strip(),_e.strip(),b!=="div"&&$!==0&&_e.iushrn($),{div:_||null,mod:_e}},d.prototype.divmod=function(s,b,$){if(c(!s.isZero()),this.isZero())return{div:new d(0),mod:new d(0)};var _e,it,pt;return this.negative!==0&&s.negative===0?(pt=this.neg().divmod(s,b),b!=="mod"&&(_e=pt.div.neg()),b!=="div"&&(it=pt.mod.neg(),$&&it.negative!==0&&it.iadd(s)),{div:_e,mod:it}):this.negative===0&&s.negative!==0?(pt=this.divmod(s.neg(),b),b!=="mod"&&(_e=pt.div.neg()),{div:_e,mod:pt.mod}):this.negative&s.negative?(pt=this.neg().divmod(s.neg(),b),b!=="div"&&(it=pt.mod.neg(),$&&it.negative!==0&&it.isub(s)),{div:pt.div,mod:it}):s.length>this.length||this.cmp(s)<0?{div:new d(0),mod:this}:s.length===1?b==="div"?{div:this.divn(s.words[0]),mod:null}:b==="mod"?{div:null,mod:new d(this.modn(s.words[0]))}:{div:this.divn(s.words[0]),mod:new d(this.modn(s.words[0]))}:this._wordDiv(s,b)},d.prototype.div=function(s){return this.divmod(s,"div",!1).div},d.prototype.mod=function(s){return this.divmod(s,"mod",!1).mod},d.prototype.umod=function(s){return this.divmod(s,"mod",!0).mod},d.prototype.divRound=function(s){var b=this.divmod(s);if(b.mod.isZero())return b.div;var $=b.div.negative!==0?b.mod.isub(s):b.mod,_e=s.ushrn(1),it=s.andln(1),pt=$.cmp(_e);return pt<0||it===1&&pt===0?b.div:b.div.negative!==0?b.div.isubn(1):b.div.iaddn(1)},d.prototype.modn=function(s){c(s<=67108863);for(var b=(1<<26)%s,$=0,_e=this.length-1;_e>=0;_e--)$=(b*$+(this.words[_e]|0))%s;return $},d.prototype.idivn=function(s){c(s<=67108863);for(var b=0,$=this.length-1;$>=0;$--){var _e=(this.words[$]|0)+b*67108864;this.words[$]=_e/s|0,b=_e%s}return this.strip()},d.prototype.divn=function(s){return this.clone().idivn(s)},d.prototype.egcd=function(s){c(s.negative===0),c(!s.isZero());var b=this,$=s.clone();b.negative!==0?b=b.umod(s):b=b.clone();for(var _e=new d(1),it=new d(0),pt=new d(0),mt=new d(1),lt=0;b.isEven()&&$.isEven();)b.iushrn(1),$.iushrn(1),++lt;for(var _=$.clone(),tt=b.clone();!b.isZero();){for(var Tt=0,It=1;!(b.words[0]&It)&&Tt<26;++Tt,It<<=1);if(Tt>0)for(b.iushrn(Tt);Tt-- >0;)(_e.isOdd()||it.isOdd())&&(_e.iadd(_),it.isub(tt)),_e.iushrn(1),it.iushrn(1);for(var Nt=0,Ut=1;!($.words[0]&Ut)&&Nt<26;++Nt,Ut<<=1);if(Nt>0)for($.iushrn(Nt);Nt-- >0;)(pt.isOdd()||mt.isOdd())&&(pt.iadd(_),mt.isub(tt)),pt.iushrn(1),mt.iushrn(1);b.cmp($)>=0?(b.isub($),_e.isub(pt),it.isub(mt)):($.isub(b),pt.isub(_e),mt.isub(it))}return{a:pt,b:mt,gcd:$.iushln(lt)}},d.prototype._invmp=function(s){c(s.negative===0),c(!s.isZero());var b=this,$=s.clone();b.negative!==0?b=b.umod(s):b=b.clone();for(var _e=new d(1),it=new d(0),pt=$.clone();b.cmpn(1)>0&&$.cmpn(1)>0;){for(var mt=0,lt=1;!(b.words[0]&lt)&&mt<26;++mt,lt<<=1);if(mt>0)for(b.iushrn(mt);mt-- >0;)_e.isOdd()&&_e.iadd(pt),_e.iushrn(1);for(var _=0,tt=1;!($.words[0]&tt)&&_<26;++_,tt<<=1);if(_>0)for($.iushrn(_);_-- >0;)it.isOdd()&&it.iadd(pt),it.iushrn(1);b.cmp($)>=0?(b.isub($),_e.isub(it)):($.isub(b),it.isub(_e))}var Tt;return b.cmpn(1)===0?Tt=_e:Tt=it,Tt.cmpn(0)<0&&Tt.iadd(s),Tt},d.prototype.gcd=function(s){if(this.isZero())return s.abs();if(s.isZero())return this.abs();var b=this.clone(),$=s.clone();b.negative=0,$.negative=0;for(var _e=0;b.isEven()&&$.isEven();_e++)b.iushrn(1),$.iushrn(1);do{for(;b.isEven();)b.iushrn(1);for(;$.isEven();)$.iushrn(1);var it=b.cmp($);if(it<0){var pt=b;b=$,$=pt}else if(it===0||$.cmpn(1)===0)break;b.isub($)}while(!0);return $.iushln(_e)},d.prototype.invm=function(s){return this.egcd(s).a.umod(s)},d.prototype.isEven=function(){return(this.words[0]&1)===0},d.prototype.isOdd=function(){return(this.words[0]&1)===1},d.prototype.andln=function(s){return this.words[0]&s},d.prototype.bincn=function(s){c(typeof s=="number");var b=s%26,$=(s-b)/26,_e=1<<b;if(this.length<=$)return this._expand($+1),this.words[$]|=_e,this;for(var it=_e,pt=$;it!==0&&pt<this.length;pt++){var mt=this.words[pt]|0;mt+=it,it=mt>>>26,mt&=67108863,this.words[pt]=mt}return it!==0&&(this.words[pt]=it,this.length++),this},d.prototype.isZero=function(){return this.length===1&&this.words[0]===0},d.prototype.cmpn=function(s){var b=s<0;if(this.negative!==0&&!b)return-1;if(this.negative===0&&b)return 1;this.strip();var $;if(this.length>1)$=1;else{b&&(s=-s),c(s<=67108863,"Number is too big");var _e=this.words[0]|0;$=_e===s?0:_e<s?-1:1}return this.negative!==0?-$|0:$},d.prototype.cmp=function(s){if(this.negative!==0&&s.negative===0)return-1;if(this.negative===0&&s.negative!==0)return 1;var b=this.ucmp(s);return this.negative!==0?-b|0:b},d.prototype.ucmp=function(s){if(this.length>s.length)return 1;if(this.length<s.length)return-1;for(var b=0,$=this.length-1;$>=0;$--){var _e=this.words[$]|0,it=s.words[$]|0;if(_e!==it){_e<it?b=-1:_e>it&&(b=1);break}}return b},d.prototype.gtn=function(s){return this.cmpn(s)===1},d.prototype.gt=function(s){return this.cmp(s)===1},d.prototype.gten=function(s){return this.cmpn(s)>=0},d.prototype.gte=function(s){return this.cmp(s)>=0},d.prototype.ltn=function(s){return this.cmpn(s)===-1},d.prototype.lt=function(s){return this.cmp(s)===-1},d.prototype.lten=function(s){return this.cmpn(s)<=0},d.prototype.lte=function(s){return this.cmp(s)<=0},d.prototype.eqn=function(s){return this.cmpn(s)===0},d.prototype.eq=function(s){return this.cmp(s)===0},d.red=function(s){return new _t(s)},d.prototype.toRed=function(s){return c(!this.red,"Already a number in reduction context"),c(this.negative===0,"red works only with positives"),s.convertTo(this)._forceRed(s)},d.prototype.fromRed=function(){return c(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},d.prototype._forceRed=function(s){return this.red=s,this},d.prototype.forceRed=function(s){return c(!this.red,"Already a number in reduction context"),this._forceRed(s)},d.prototype.redAdd=function(s){return c(this.red,"redAdd works only with red numbers"),this.red.add(this,s)},d.prototype.redIAdd=function(s){return c(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,s)},d.prototype.redSub=function(s){return c(this.red,"redSub works only with red numbers"),this.red.sub(this,s)},d.prototype.redISub=function(s){return c(this.red,"redISub works only with red numbers"),this.red.isub(this,s)},d.prototype.redShl=function(s){return c(this.red,"redShl works only with red numbers"),this.red.shl(this,s)},d.prototype.redMul=function(s){return c(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.mul(this,s)},d.prototype.redIMul=function(s){return c(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.imul(this,s)},d.prototype.redSqr=function(){return c(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},d.prototype.redISqr=function(){return c(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},d.prototype.redSqrt=function(){return c(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},d.prototype.redInvm=function(){return c(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},d.prototype.redNeg=function(){return c(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},d.prototype.redPow=function(s){return c(this.red&&!s.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,s)};var At={k256:null,p224:null,p192:null,p25519:null};function Ct(nt,s){this.name=nt,this.p=new d(s,16),this.n=this.p.bitLength(),this.k=new d(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Ct.prototype._tmp=function(){var s=new d(null);return s.words=new Array(Math.ceil(this.n/13)),s},Ct.prototype.ireduce=function(s){var b=s,$;do this.split(b,this.tmp),b=this.imulK(b),b=b.iadd(this.tmp),$=b.bitLength();while($>this.n);var _e=$<this.n?-1:b.ucmp(this.p);return _e===0?(b.words[0]=0,b.length=1):_e>0?b.isub(this.p):b.strip!==void 0?b.strip():b._strip(),b},Ct.prototype.split=function(s,b){s.iushrn(this.n,0,b)},Ct.prototype.imulK=function(s){return s.imul(this.k)};function dt(){Ct.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}j(dt,Ct),dt.prototype.split=function(s,b){for(var $=4194303,_e=Math.min(s.length,9),it=0;it<_e;it++)b.words[it]=s.words[it];if(b.length=_e,s.length<=9){s.words[0]=0,s.length=1;return}var pt=s.words[9];for(b.words[b.length++]=pt&$,it=10;it<s.length;it++){var mt=s.words[it]|0;s.words[it-10]=(mt&$)<<4|pt>>>22,pt=mt}pt>>>=22,s.words[it-10]=pt,pt===0&&s.length>10?s.length-=10:s.length-=9},dt.prototype.imulK=function(s){s.words[s.length]=0,s.words[s.length+1]=0,s.length+=2;for(var b=0,$=0;$<s.length;$++){var _e=s.words[$]|0;b+=_e*977,s.words[$]=b&67108863,b=_e*64+(b/67108864|0)}return s.words[s.length-1]===0&&(s.length--,s.words[s.length-1]===0&&s.length--),s};function Et(){Ct.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}j(Et,Ct);function Rt(){Ct.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}j(Rt,Ct);function Mt(){Ct.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}j(Mt,Ct),Mt.prototype.imulK=function(s){for(var b=0,$=0;$<s.length;$++){var _e=(s.words[$]|0)*19+b,it=_e&67108863;_e>>>=26,s.words[$]=it,b=_e}return b!==0&&(s.words[s.length++]=b),s},d._prime=function(s){if(At[s])return At[s];var b;if(s==="k256")b=new dt;else if(s==="p224")b=new Et;else if(s==="p192")b=new Rt;else if(s==="p25519")b=new Mt;else throw new Error("Unknown prime "+s);return At[s]=b,b};function _t(nt){if(typeof nt=="string"){var s=d._prime(nt);this.m=s.p,this.prime=s}else c(nt.gtn(1),"modulus must be greater than 1"),this.m=nt,this.prime=null}_t.prototype._verify1=function(s){c(s.negative===0,"red works only with positives"),c(s.red,"red works only with red numbers")},_t.prototype._verify2=function(s,b){c((s.negative|b.negative)===0,"red works only with positives"),c(s.red&&s.red===b.red,"red works only with red numbers")},_t.prototype.imod=function(s){return this.prime?this.prime.ireduce(s)._forceRed(this):s.umod(this.m)._forceRed(this)},_t.prototype.neg=function(s){return s.isZero()?s.clone():this.m.sub(s)._forceRed(this)},_t.prototype.add=function(s,b){this._verify2(s,b);var $=s.add(b);return $.cmp(this.m)>=0&&$.isub(this.m),$._forceRed(this)},_t.prototype.iadd=function(s,b){this._verify2(s,b);var $=s.iadd(b);return $.cmp(this.m)>=0&&$.isub(this.m),$},_t.prototype.sub=function(s,b){this._verify2(s,b);var $=s.sub(b);return $.cmpn(0)<0&&$.iadd(this.m),$._forceRed(this)},_t.prototype.isub=function(s,b){this._verify2(s,b);var $=s.isub(b);return $.cmpn(0)<0&&$.iadd(this.m),$},_t.prototype.shl=function(s,b){return this._verify1(s),this.imod(s.ushln(b))},_t.prototype.imul=function(s,b){return this._verify2(s,b),this.imod(s.imul(b))},_t.prototype.mul=function(s,b){return this._verify2(s,b),this.imod(s.mul(b))},_t.prototype.isqr=function(s){return this.imul(s,s.clone())},_t.prototype.sqr=function(s){return this.mul(s,s)},_t.prototype.sqrt=function(s){if(s.isZero())return s.clone();var b=this.m.andln(3);if(c(b%2===1),b===3){var $=this.m.add(new d(1)).iushrn(2);return this.pow(s,$)}for(var _e=this.m.subn(1),it=0;!_e.isZero()&&_e.andln(1)===0;)it++,_e.iushrn(1);c(!_e.isZero());var pt=new d(1).toRed(this),mt=pt.redNeg(),lt=this.m.subn(1).iushrn(1),_=this.m.bitLength();for(_=new d(2*_*_).toRed(this);this.pow(_,lt).cmp(mt)!==0;)_.redIAdd(mt);for(var tt=this.pow(_,_e),Tt=this.pow(s,_e.addn(1).iushrn(1)),It=this.pow(s,_e),Nt=it;It.cmp(pt)!==0;){for(var Ut=It,Gt=0;Ut.cmp(pt)!==0;Gt++)Ut=Ut.redSqr();c(Gt<Nt);var Pt=this.pow(tt,new d(1).iushln(Nt-Gt-1));Tt=Tt.redMul(Pt),tt=Pt.redSqr(),It=It.redMul(tt),Nt=Gt}return Tt},_t.prototype.invm=function(s){var b=s._invmp(this.m);return b.negative!==0?(b.negative=0,this.imod(b).redNeg()):this.imod(b)},_t.prototype.pow=function(s,b){if(b.isZero())return new d(1).toRed(this);if(b.cmpn(1)===0)return s.clone();var $=4,_e=new Array(1<<$);_e[0]=new d(1).toRed(this),_e[1]=s;for(var it=2;it<_e.length;it++)_e[it]=this.mul(_e[it-1],s);var pt=_e[0],mt=0,lt=0,_=b.bitLength()%26;for(_===0&&(_=26),it=b.length-1;it>=0;it--){for(var tt=b.words[it],Tt=_-1;Tt>=0;Tt--){var It=tt>>Tt&1;if(pt!==_e[0]&&(pt=this.sqr(pt)),It===0&&mt===0){lt=0;continue}mt<<=1,mt|=It,lt++,!(lt!==$&&(it!==0||Tt!==0))&&(pt=this.mul(pt,_e[mt]),lt=0,mt=0)}_=26}return pt},_t.prototype.convertTo=function(s){var b=s.umod(this.m);return b===s?b.clone():b},_t.prototype.convertFrom=function(s){var b=s.clone();return b.red=null,b},d.mont=function(s){return new kt(s)};function kt(nt){_t.call(this,nt),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new d(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}j(kt,_t),kt.prototype.convertTo=function(s){return this.imod(s.ushln(this.shift))},kt.prototype.convertFrom=function(s){var b=this.imod(s.mul(this.rinv));return b.red=null,b},kt.prototype.imul=function(s,b){if(s.isZero()||b.isZero())return s.words[0]=0,s.length=1,s;var $=s.imul(b),_e=$.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),it=$.isub(_e).iushrn(this.shift),pt=it;return it.cmp(this.m)>=0?pt=it.isub(this.m):it.cmpn(0)<0&&(pt=it.iadd(this.m)),pt._forceRed(this)},kt.prototype.mul=function(s,b){if(s.isZero()||b.isZero())return new d(0)._forceRed(this);var $=s.mul(b),_e=$.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),it=$.isub(_e).iushrn(this.shift),pt=it;return it.cmp(this.m)>=0?pt=it.isub(this.m):it.cmpn(0)<0&&(pt=it.iadd(this.m)),pt._forceRed(this)},kt.prototype.invm=function(s){var b=this.imod(s._invmp(this.m).mul(this.r2));return b._forceRed(this)}})(o,commonjsGlobal)}(bn$1)),bn$1.exports}var browser$4,hasRequiredBrowser$2;function requireBrowser$2(){if(hasRequiredBrowser$2)return browser$4;hasRequiredBrowser$2=1;var o=requireElliptic(),e=requireBn$1();browser$4=function(et){return new c(et)};var a={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};a.p224=a.secp224r1,a.p256=a.secp256r1=a.prime256v1,a.p192=a.secp192r1=a.prime192v1,a.p384=a.secp384r1,a.p521=a.secp521r1;function c(d){this.curveType=a[d],this.curveType||(this.curveType={name:d}),this.curve=new o.ec(this.curveType.name),this.keys=void 0}c.prototype.generateKeys=function(d,et){return this.keys=this.curve.genKeyPair(),this.getPublicKey(d,et)},c.prototype.computeSecret=function(d,et,at){et=et||"utf8",Buffer.isBuffer(d)||(d=new Buffer(d,et));var st=this.curve.keyFromPublic(d).getPublic(),ct=st.mul(this.keys.getPrivate()).getX();return j(ct,at,this.curveType.byteLength)},c.prototype.getPublicKey=function(d,et){var at=this.keys.getPublic(et==="compressed",!0);return et==="hybrid"&&(at[at.length-1]%2?at[0]=7:at[0]=6),j(at,d)},c.prototype.getPrivateKey=function(d){return j(this.keys.getPrivate(),d)},c.prototype.setPublicKey=function(d,et){return et=et||"utf8",Buffer.isBuffer(d)||(d=new Buffer(d,et)),this.keys._importPublic(d),this},c.prototype.setPrivateKey=function(d,et){et=et||"utf8",Buffer.isBuffer(d)||(d=new Buffer(d,et));var at=new e(d);return at=at.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(at),this};function j(d,et,at){Array.isArray(d)||(d=d.toArray());var st=new Buffer(d);if(at&&st.length<at){var ct=new Buffer(at-st.length);ct.fill(0),st=Buffer.concat([ct,st])}return et?st.toString(et):st}return browser$4}var browser$3={},mgf,hasRequiredMgf;function requireMgf(){if(hasRequiredMgf)return mgf;hasRequiredMgf=1;var o=requireBrowser$9(),e=requireSafeBuffer$1().Buffer;mgf=function(c,j){for(var d=e.alloc(0),et=0,at;d.length<j;)at=a(et++),d=e.concat([d,o("sha1").update(c).update(at).digest()]);return d.slice(0,j)};function a(c){var j=e.allocUnsafe(4);return j.writeUInt32BE(c,0),j}return mgf}var xor,hasRequiredXor;function requireXor(){return hasRequiredXor||(hasRequiredXor=1,xor=function(e,a){for(var c=e.length,j=-1;++j<c;)e[j]^=a[j];return e}),xor}var bn={exports:{}};bn.exports;var hasRequiredBn;function requireBn(){return hasRequiredBn||(hasRequiredBn=1,function(o){(function(e,a){function c(nt,s){if(!nt)throw new Error(s||"Assertion failed")}function j(nt,s){nt.super_=s;var b=function(){};b.prototype=s.prototype,nt.prototype=new b,nt.prototype.constructor=nt}function d(nt,s,b){if(d.isBN(nt))return nt;this.negative=0,this.words=null,this.length=0,this.red=null,nt!==null&&((s==="le"||s==="be")&&(b=s,s=10),this._init(nt||0,s||10,b||"be"))}typeof e=="object"?e.exports=d:a.BN=d,d.BN=d,d.wordSize=26;var et;try{typeof window<"u"&&typeof window.Buffer<"u"?et=window.Buffer:et=require$$1$2.Buffer}catch{}d.isBN=function(s){return s instanceof d?!0:s!==null&&typeof s=="object"&&s.constructor.wordSize===d.wordSize&&Array.isArray(s.words)},d.max=function(s,b){return s.cmp(b)>0?s:b},d.min=function(s,b){return s.cmp(b)<0?s:b},d.prototype._init=function(s,b,$){if(typeof s=="number")return this._initNumber(s,b,$);if(typeof s=="object")return this._initArray(s,b,$);b==="hex"&&(b=16),c(b===(b|0)&&b>=2&&b<=36),s=s.toString().replace(/\s+/g,"");var _e=0;s[0]==="-"&&(_e++,this.negative=1),_e<s.length&&(b===16?this._parseHex(s,_e,$):(this._parseBase(s,b,_e),$==="le"&&this._initArray(this.toArray(),b,$)))},d.prototype._initNumber=function(s,b,$){s<0&&(this.negative=1,s=-s),s<67108864?(this.words=[s&67108863],this.length=1):s<4503599627370496?(this.words=[s&67108863,s/67108864&67108863],this.length=2):(c(s<9007199254740992),this.words=[s&67108863,s/67108864&67108863,1],this.length=3),$==="le"&&this._initArray(this.toArray(),b,$)},d.prototype._initArray=function(s,b,$){if(c(typeof s.length=="number"),s.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(s.length/3),this.words=new Array(this.length);for(var _e=0;_e<this.length;_e++)this.words[_e]=0;var it,pt,mt=0;if($==="be")for(_e=s.length-1,it=0;_e>=0;_e-=3)pt=s[_e]|s[_e-1]<<8|s[_e-2]<<16,this.words[it]|=pt<<mt&67108863,this.words[it+1]=pt>>>26-mt&67108863,mt+=24,mt>=26&&(mt-=26,it++);else if($==="le")for(_e=0,it=0;_e<s.length;_e+=3)pt=s[_e]|s[_e+1]<<8|s[_e+2]<<16,this.words[it]|=pt<<mt&67108863,this.words[it+1]=pt>>>26-mt&67108863,mt+=24,mt>=26&&(mt-=26,it++);return this.strip()};function at(nt,s){var b=nt.charCodeAt(s);return b>=65&&b<=70?b-55:b>=97&&b<=102?b-87:b-48&15}function st(nt,s,b){var $=at(nt,b);return b-1>=s&&($|=at(nt,b-1)<<4),$}d.prototype._parseHex=function(s,b,$){this.length=Math.ceil((s.length-b)/6),this.words=new Array(this.length);for(var _e=0;_e<this.length;_e++)this.words[_e]=0;var it=0,pt=0,mt;if($==="be")for(_e=s.length-1;_e>=b;_e-=2)mt=st(s,b,_e)<<it,this.words[pt]|=mt&67108863,it>=18?(it-=18,pt+=1,this.words[pt]|=mt>>>26):it+=8;else{var lt=s.length-b;for(_e=lt%2===0?b+1:b;_e<s.length;_e+=2)mt=st(s,b,_e)<<it,this.words[pt]|=mt&67108863,it>=18?(it-=18,pt+=1,this.words[pt]|=mt>>>26):it+=8}this.strip()};function ct(nt,s,b,$){for(var _e=0,it=Math.min(nt.length,b),pt=s;pt<it;pt++){var mt=nt.charCodeAt(pt)-48;_e*=$,mt>=49?_e+=mt-49+10:mt>=17?_e+=mt-17+10:_e+=mt}return _e}d.prototype._parseBase=function(s,b,$){this.words=[0],this.length=1;for(var _e=0,it=1;it<=67108863;it*=b)_e++;_e--,it=it/b|0;for(var pt=s.length-$,mt=pt%_e,lt=Math.min(pt,pt-mt)+$,_=0,tt=$;tt<lt;tt+=_e)_=ct(s,tt,tt+_e,b),this.imuln(it),this.words[0]+_<67108864?this.words[0]+=_:this._iaddn(_);if(mt!==0){var Tt=1;for(_=ct(s,tt,s.length,b),tt=0;tt<mt;tt++)Tt*=b;this.imuln(Tt),this.words[0]+_<67108864?this.words[0]+=_:this._iaddn(_)}this.strip()},d.prototype.copy=function(s){s.words=new Array(this.length);for(var b=0;b<this.length;b++)s.words[b]=this.words[b];s.length=this.length,s.negative=this.negative,s.red=this.red},d.prototype.clone=function(){var s=new d(null);return this.copy(s),s},d.prototype._expand=function(s){for(;this.length<s;)this.words[this.length++]=0;return this},d.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},d.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},d.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var ot=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],gt=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],ft=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];d.prototype.toString=function(s,b){s=s||10,b=b|0||1;var $;if(s===16||s==="hex"){$="";for(var _e=0,it=0,pt=0;pt<this.length;pt++){var mt=this.words[pt],lt=((mt<<_e|it)&16777215).toString(16);it=mt>>>24-_e&16777215,it!==0||pt!==this.length-1?$=ot[6-lt.length]+lt+$:$=lt+$,_e+=2,_e>=26&&(_e-=26,pt--)}for(it!==0&&($=it.toString(16)+$);$.length%b!==0;)$="0"+$;return this.negative!==0&&($="-"+$),$}if(s===(s|0)&&s>=2&&s<=36){var _=gt[s],tt=ft[s];$="";var Tt=this.clone();for(Tt.negative=0;!Tt.isZero();){var It=Tt.modn(tt).toString(s);Tt=Tt.idivn(tt),Tt.isZero()?$=It+$:$=ot[_-It.length]+It+$}for(this.isZero()&&($="0"+$);$.length%b!==0;)$="0"+$;return this.negative!==0&&($="-"+$),$}c(!1,"Base should be between 2 and 36")},d.prototype.toNumber=function(){var s=this.words[0];return this.length===2?s+=this.words[1]*67108864:this.length===3&&this.words[2]===1?s+=4503599627370496+this.words[1]*67108864:this.length>2&&c(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-s:s},d.prototype.toJSON=function(){return this.toString(16)},d.prototype.toBuffer=function(s,b){return c(typeof et<"u"),this.toArrayLike(et,s,b)},d.prototype.toArray=function(s,b){return this.toArrayLike(Array,s,b)},d.prototype.toArrayLike=function(s,b,$){var _e=this.byteLength(),it=$||Math.max(1,_e);c(_e<=it,"byte array longer than desired length"),c(it>0,"Requested array length <= 0"),this.strip();var pt=b==="le",mt=new s(it),lt,_,tt=this.clone();if(pt){for(_=0;!tt.isZero();_++)lt=tt.andln(255),tt.iushrn(8),mt[_]=lt;for(;_<it;_++)mt[_]=0}else{for(_=0;_<it-_e;_++)mt[_]=0;for(_=0;!tt.isZero();_++)lt=tt.andln(255),tt.iushrn(8),mt[it-_-1]=lt}return mt},Math.clz32?d.prototype._countBits=function(s){return 32-Math.clz32(s)}:d.prototype._countBits=function(s){var b=s,$=0;return b>=4096&&($+=13,b>>>=13),b>=64&&($+=7,b>>>=7),b>=8&&($+=4,b>>>=4),b>=2&&($+=2,b>>>=2),$+b},d.prototype._zeroBits=function(s){if(s===0)return 26;var b=s,$=0;return b&8191||($+=13,b>>>=13),b&127||($+=7,b>>>=7),b&15||($+=4,b>>>=4),b&3||($+=2,b>>>=2),b&1||$++,$},d.prototype.bitLength=function(){var s=this.words[this.length-1],b=this._countBits(s);return(this.length-1)*26+b};function yt(nt){for(var s=new Array(nt.bitLength()),b=0;b<s.length;b++){var $=b/26|0,_e=b%26;s[b]=(nt.words[$]&1<<_e)>>>_e}return s}d.prototype.zeroBits=function(){if(this.isZero())return 0;for(var s=0,b=0;b<this.length;b++){var $=this._zeroBits(this.words[b]);if(s+=$,$!==26)break}return s},d.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},d.prototype.toTwos=function(s){return this.negative!==0?this.abs().inotn(s).iaddn(1):this.clone()},d.prototype.fromTwos=function(s){return this.testn(s-1)?this.notn(s).iaddn(1).ineg():this.clone()},d.prototype.isNeg=function(){return this.negative!==0},d.prototype.neg=function(){return this.clone().ineg()},d.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},d.prototype.iuor=function(s){for(;this.length<s.length;)this.words[this.length++]=0;for(var b=0;b<s.length;b++)this.words[b]=this.words[b]|s.words[b];return this.strip()},d.prototype.ior=function(s){return c((this.negative|s.negative)===0),this.iuor(s)},d.prototype.or=function(s){return this.length>s.length?this.clone().ior(s):s.clone().ior(this)},d.prototype.uor=function(s){return this.length>s.length?this.clone().iuor(s):s.clone().iuor(this)},d.prototype.iuand=function(s){var b;this.length>s.length?b=s:b=this;for(var $=0;$<b.length;$++)this.words[$]=this.words[$]&s.words[$];return this.length=b.length,this.strip()},d.prototype.iand=function(s){return c((this.negative|s.negative)===0),this.iuand(s)},d.prototype.and=function(s){return this.length>s.length?this.clone().iand(s):s.clone().iand(this)},d.prototype.uand=function(s){return this.length>s.length?this.clone().iuand(s):s.clone().iuand(this)},d.prototype.iuxor=function(s){var b,$;this.length>s.length?(b=this,$=s):(b=s,$=this);for(var _e=0;_e<$.length;_e++)this.words[_e]=b.words[_e]^$.words[_e];if(this!==b)for(;_e<b.length;_e++)this.words[_e]=b.words[_e];return this.length=b.length,this.strip()},d.prototype.ixor=function(s){return c((this.negative|s.negative)===0),this.iuxor(s)},d.prototype.xor=function(s){return this.length>s.length?this.clone().ixor(s):s.clone().ixor(this)},d.prototype.uxor=function(s){return this.length>s.length?this.clone().iuxor(s):s.clone().iuxor(this)},d.prototype.inotn=function(s){c(typeof s=="number"&&s>=0);var b=Math.ceil(s/26)|0,$=s%26;this._expand(b),$>0&&b--;for(var _e=0;_e<b;_e++)this.words[_e]=~this.words[_e]&67108863;return $>0&&(this.words[_e]=~this.words[_e]&67108863>>26-$),this.strip()},d.prototype.notn=function(s){return this.clone().inotn(s)},d.prototype.setn=function(s,b){c(typeof s=="number"&&s>=0);var $=s/26|0,_e=s%26;return this._expand($+1),b?this.words[$]=this.words[$]|1<<_e:this.words[$]=this.words[$]&~(1<<_e),this.strip()},d.prototype.iadd=function(s){var b;if(this.negative!==0&&s.negative===0)return this.negative=0,b=this.isub(s),this.negative^=1,this._normSign();if(this.negative===0&&s.negative!==0)return s.negative=0,b=this.isub(s),s.negative=1,b._normSign();var $,_e;this.length>s.length?($=this,_e=s):($=s,_e=this);for(var it=0,pt=0;pt<_e.length;pt++)b=($.words[pt]|0)+(_e.words[pt]|0)+it,this.words[pt]=b&67108863,it=b>>>26;for(;it!==0&&pt<$.length;pt++)b=($.words[pt]|0)+it,this.words[pt]=b&67108863,it=b>>>26;if(this.length=$.length,it!==0)this.words[this.length]=it,this.length++;else if($!==this)for(;pt<$.length;pt++)this.words[pt]=$.words[pt];return this},d.prototype.add=function(s){var b;return s.negative!==0&&this.negative===0?(s.negative=0,b=this.sub(s),s.negative^=1,b):s.negative===0&&this.negative!==0?(this.negative=0,b=s.sub(this),this.negative=1,b):this.length>s.length?this.clone().iadd(s):s.clone().iadd(this)},d.prototype.isub=function(s){if(s.negative!==0){s.negative=0;var b=this.iadd(s);return s.negative=1,b._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(s),this.negative=1,this._normSign();var $=this.cmp(s);if($===0)return this.negative=0,this.length=1,this.words[0]=0,this;var _e,it;$>0?(_e=this,it=s):(_e=s,it=this);for(var pt=0,mt=0;mt<it.length;mt++)b=(_e.words[mt]|0)-(it.words[mt]|0)+pt,pt=b>>26,this.words[mt]=b&67108863;for(;pt!==0&&mt<_e.length;mt++)b=(_e.words[mt]|0)+pt,pt=b>>26,this.words[mt]=b&67108863;if(pt===0&&mt<_e.length&&_e!==this)for(;mt<_e.length;mt++)this.words[mt]=_e.words[mt];return this.length=Math.max(this.length,mt),_e!==this&&(this.negative=1),this.strip()},d.prototype.sub=function(s){return this.clone().isub(s)};function vt(nt,s,b){b.negative=s.negative^nt.negative;var $=nt.length+s.length|0;b.length=$,$=$-1|0;var _e=nt.words[0]|0,it=s.words[0]|0,pt=_e*it,mt=pt&67108863,lt=pt/67108864|0;b.words[0]=mt;for(var _=1;_<$;_++){for(var tt=lt>>>26,Tt=lt&67108863,It=Math.min(_,s.length-1),Nt=Math.max(0,_-nt.length+1);Nt<=It;Nt++){var Ut=_-Nt|0;_e=nt.words[Ut]|0,it=s.words[Nt]|0,pt=_e*it+Tt,tt+=pt/67108864|0,Tt=pt&67108863}b.words[_]=Tt|0,lt=tt|0}return lt!==0?b.words[_]=lt|0:b.length--,b.strip()}var rt=function(s,b,$){var _e=s.words,it=b.words,pt=$.words,mt=0,lt,_,tt,Tt=_e[0]|0,It=Tt&8191,Nt=Tt>>>13,Ut=_e[1]|0,Gt=Ut&8191,Pt=Ut>>>13,qt=_e[2]|0,Kt=qt&8191,jt=qt>>>13,Ht=_e[3]|0,Bt=Ht&8191,Jt=Ht>>>13,sr=_e[4]|0,hr=sr&8191,Ar=sr>>>13,gn=_e[5]|0,Lr=gn&8191,wr=gn>>>13,En=_e[6]|0,Dr=En&8191,Qr=En>>>13,Dn=_e[7]|0,Br=Dn&8191,Gr=Dn>>>13,Ln=_e[8]|0,Fr=Ln&8191,_i=Ln>>>13,Kn=_e[9]|0,Wt=Kn&8191,Lt=Kn>>>13,zt=it[0]|0,Zt=zt&8191,ar=zt>>>13,Or=it[1]|0,vr=Or&8191,Rr=Or>>>13,fr=it[2]|0,tr=fr&8191,yr=fr>>>13,fn=it[3]|0,Nr=fn&8191,zr=fn>>>13,xn=it[4]|0,Kr=xn&8191,nn=xn>>>13,Wn=it[5]|0,Zr=Wn&8191,on=Wn>>>13,Xn=it[6]|0,en=Xn&8191,ln=Xn>>>13,Zn=it[7]|0,$t=Zn&8191,or=Zn>>>13,Yr=it[8]|0,Vr=Yr&8191,Hr=Yr>>>13,Mn=it[9]|0,Ur=Mn&8191,tn=Mn>>>13;$.negative=s.negative^b.negative,$.length=19,lt=Math.imul(It,Zt),_=Math.imul(It,ar),_=_+Math.imul(Nt,Zt)|0,tt=Math.imul(Nt,ar);var jn=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(jn>>>26)|0,jn&=67108863,lt=Math.imul(Gt,Zt),_=Math.imul(Gt,ar),_=_+Math.imul(Pt,Zt)|0,tt=Math.imul(Pt,ar),lt=lt+Math.imul(It,vr)|0,_=_+Math.imul(It,Rr)|0,_=_+Math.imul(Nt,vr)|0,tt=tt+Math.imul(Nt,Rr)|0;var Un=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(Un>>>26)|0,Un&=67108863,lt=Math.imul(Kt,Zt),_=Math.imul(Kt,ar),_=_+Math.imul(jt,Zt)|0,tt=Math.imul(jt,ar),lt=lt+Math.imul(Gt,vr)|0,_=_+Math.imul(Gt,Rr)|0,_=_+Math.imul(Pt,vr)|0,tt=tt+Math.imul(Pt,Rr)|0,lt=lt+Math.imul(It,tr)|0,_=_+Math.imul(It,yr)|0,_=_+Math.imul(Nt,tr)|0,tt=tt+Math.imul(Nt,yr)|0;var ao=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(ao>>>26)|0,ao&=67108863,lt=Math.imul(Bt,Zt),_=Math.imul(Bt,ar),_=_+Math.imul(Jt,Zt)|0,tt=Math.imul(Jt,ar),lt=lt+Math.imul(Kt,vr)|0,_=_+Math.imul(Kt,Rr)|0,_=_+Math.imul(jt,vr)|0,tt=tt+Math.imul(jt,Rr)|0,lt=lt+Math.imul(Gt,tr)|0,_=_+Math.imul(Gt,yr)|0,_=_+Math.imul(Pt,tr)|0,tt=tt+Math.imul(Pt,yr)|0,lt=lt+Math.imul(It,Nr)|0,_=_+Math.imul(It,zr)|0,_=_+Math.imul(Nt,Nr)|0,tt=tt+Math.imul(Nt,zr)|0;var co=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(co>>>26)|0,co&=67108863,lt=Math.imul(hr,Zt),_=Math.imul(hr,ar),_=_+Math.imul(Ar,Zt)|0,tt=Math.imul(Ar,ar),lt=lt+Math.imul(Bt,vr)|0,_=_+Math.imul(Bt,Rr)|0,_=_+Math.imul(Jt,vr)|0,tt=tt+Math.imul(Jt,Rr)|0,lt=lt+Math.imul(Kt,tr)|0,_=_+Math.imul(Kt,yr)|0,_=_+Math.imul(jt,tr)|0,tt=tt+Math.imul(jt,yr)|0,lt=lt+Math.imul(Gt,Nr)|0,_=_+Math.imul(Gt,zr)|0,_=_+Math.imul(Pt,Nr)|0,tt=tt+Math.imul(Pt,zr)|0,lt=lt+Math.imul(It,Kr)|0,_=_+Math.imul(It,nn)|0,_=_+Math.imul(Nt,Kr)|0,tt=tt+Math.imul(Nt,nn)|0;var ro=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(ro>>>26)|0,ro&=67108863,lt=Math.imul(Lr,Zt),_=Math.imul(Lr,ar),_=_+Math.imul(wr,Zt)|0,tt=Math.imul(wr,ar),lt=lt+Math.imul(hr,vr)|0,_=_+Math.imul(hr,Rr)|0,_=_+Math.imul(Ar,vr)|0,tt=tt+Math.imul(Ar,Rr)|0,lt=lt+Math.imul(Bt,tr)|0,_=_+Math.imul(Bt,yr)|0,_=_+Math.imul(Jt,tr)|0,tt=tt+Math.imul(Jt,yr)|0,lt=lt+Math.imul(Kt,Nr)|0,_=_+Math.imul(Kt,zr)|0,_=_+Math.imul(jt,Nr)|0,tt=tt+Math.imul(jt,zr)|0,lt=lt+Math.imul(Gt,Kr)|0,_=_+Math.imul(Gt,nn)|0,_=_+Math.imul(Pt,Kr)|0,tt=tt+Math.imul(Pt,nn)|0,lt=lt+Math.imul(It,Zr)|0,_=_+Math.imul(It,on)|0,_=_+Math.imul(Nt,Zr)|0,tt=tt+Math.imul(Nt,on)|0;var vo=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(vo>>>26)|0,vo&=67108863,lt=Math.imul(Dr,Zt),_=Math.imul(Dr,ar),_=_+Math.imul(Qr,Zt)|0,tt=Math.imul(Qr,ar),lt=lt+Math.imul(Lr,vr)|0,_=_+Math.imul(Lr,Rr)|0,_=_+Math.imul(wr,vr)|0,tt=tt+Math.imul(wr,Rr)|0,lt=lt+Math.imul(hr,tr)|0,_=_+Math.imul(hr,yr)|0,_=_+Math.imul(Ar,tr)|0,tt=tt+Math.imul(Ar,yr)|0,lt=lt+Math.imul(Bt,Nr)|0,_=_+Math.imul(Bt,zr)|0,_=_+Math.imul(Jt,Nr)|0,tt=tt+Math.imul(Jt,zr)|0,lt=lt+Math.imul(Kt,Kr)|0,_=_+Math.imul(Kt,nn)|0,_=_+Math.imul(jt,Kr)|0,tt=tt+Math.imul(jt,nn)|0,lt=lt+Math.imul(Gt,Zr)|0,_=_+Math.imul(Gt,on)|0,_=_+Math.imul(Pt,Zr)|0,tt=tt+Math.imul(Pt,on)|0,lt=lt+Math.imul(It,en)|0,_=_+Math.imul(It,ln)|0,_=_+Math.imul(Nt,en)|0,tt=tt+Math.imul(Nt,ln)|0;var oo=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(oo>>>26)|0,oo&=67108863,lt=Math.imul(Br,Zt),_=Math.imul(Br,ar),_=_+Math.imul(Gr,Zt)|0,tt=Math.imul(Gr,ar),lt=lt+Math.imul(Dr,vr)|0,_=_+Math.imul(Dr,Rr)|0,_=_+Math.imul(Qr,vr)|0,tt=tt+Math.imul(Qr,Rr)|0,lt=lt+Math.imul(Lr,tr)|0,_=_+Math.imul(Lr,yr)|0,_=_+Math.imul(wr,tr)|0,tt=tt+Math.imul(wr,yr)|0,lt=lt+Math.imul(hr,Nr)|0,_=_+Math.imul(hr,zr)|0,_=_+Math.imul(Ar,Nr)|0,tt=tt+Math.imul(Ar,zr)|0,lt=lt+Math.imul(Bt,Kr)|0,_=_+Math.imul(Bt,nn)|0,_=_+Math.imul(Jt,Kr)|0,tt=tt+Math.imul(Jt,nn)|0,lt=lt+Math.imul(Kt,Zr)|0,_=_+Math.imul(Kt,on)|0,_=_+Math.imul(jt,Zr)|0,tt=tt+Math.imul(jt,on)|0,lt=lt+Math.imul(Gt,en)|0,_=_+Math.imul(Gt,ln)|0,_=_+Math.imul(Pt,en)|0,tt=tt+Math.imul(Pt,ln)|0,lt=lt+Math.imul(It,$t)|0,_=_+Math.imul(It,or)|0,_=_+Math.imul(Nt,$t)|0,tt=tt+Math.imul(Nt,or)|0;var mo=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(mo>>>26)|0,mo&=67108863,lt=Math.imul(Fr,Zt),_=Math.imul(Fr,ar),_=_+Math.imul(_i,Zt)|0,tt=Math.imul(_i,ar),lt=lt+Math.imul(Br,vr)|0,_=_+Math.imul(Br,Rr)|0,_=_+Math.imul(Gr,vr)|0,tt=tt+Math.imul(Gr,Rr)|0,lt=lt+Math.imul(Dr,tr)|0,_=_+Math.imul(Dr,yr)|0,_=_+Math.imul(Qr,tr)|0,tt=tt+Math.imul(Qr,yr)|0,lt=lt+Math.imul(Lr,Nr)|0,_=_+Math.imul(Lr,zr)|0,_=_+Math.imul(wr,Nr)|0,tt=tt+Math.imul(wr,zr)|0,lt=lt+Math.imul(hr,Kr)|0,_=_+Math.imul(hr,nn)|0,_=_+Math.imul(Ar,Kr)|0,tt=tt+Math.imul(Ar,nn)|0,lt=lt+Math.imul(Bt,Zr)|0,_=_+Math.imul(Bt,on)|0,_=_+Math.imul(Jt,Zr)|0,tt=tt+Math.imul(Jt,on)|0,lt=lt+Math.imul(Kt,en)|0,_=_+Math.imul(Kt,ln)|0,_=_+Math.imul(jt,en)|0,tt=tt+Math.imul(jt,ln)|0,lt=lt+Math.imul(Gt,$t)|0,_=_+Math.imul(Gt,or)|0,_=_+Math.imul(Pt,$t)|0,tt=tt+Math.imul(Pt,or)|0,lt=lt+Math.imul(It,Vr)|0,_=_+Math.imul(It,Hr)|0,_=_+Math.imul(Nt,Vr)|0,tt=tt+Math.imul(Nt,Hr)|0;var ho=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(ho>>>26)|0,ho&=67108863,lt=Math.imul(Wt,Zt),_=Math.imul(Wt,ar),_=_+Math.imul(Lt,Zt)|0,tt=Math.imul(Lt,ar),lt=lt+Math.imul(Fr,vr)|0,_=_+Math.imul(Fr,Rr)|0,_=_+Math.imul(_i,vr)|0,tt=tt+Math.imul(_i,Rr)|0,lt=lt+Math.imul(Br,tr)|0,_=_+Math.imul(Br,yr)|0,_=_+Math.imul(Gr,tr)|0,tt=tt+Math.imul(Gr,yr)|0,lt=lt+Math.imul(Dr,Nr)|0,_=_+Math.imul(Dr,zr)|0,_=_+Math.imul(Qr,Nr)|0,tt=tt+Math.imul(Qr,zr)|0,lt=lt+Math.imul(Lr,Kr)|0,_=_+Math.imul(Lr,nn)|0,_=_+Math.imul(wr,Kr)|0,tt=tt+Math.imul(wr,nn)|0,lt=lt+Math.imul(hr,Zr)|0,_=_+Math.imul(hr,on)|0,_=_+Math.imul(Ar,Zr)|0,tt=tt+Math.imul(Ar,on)|0,lt=lt+Math.imul(Bt,en)|0,_=_+Math.imul(Bt,ln)|0,_=_+Math.imul(Jt,en)|0,tt=tt+Math.imul(Jt,ln)|0,lt=lt+Math.imul(Kt,$t)|0,_=_+Math.imul(Kt,or)|0,_=_+Math.imul(jt,$t)|0,tt=tt+Math.imul(jt,or)|0,lt=lt+Math.imul(Gt,Vr)|0,_=_+Math.imul(Gt,Hr)|0,_=_+Math.imul(Pt,Vr)|0,tt=tt+Math.imul(Pt,Hr)|0,lt=lt+Math.imul(It,Ur)|0,_=_+Math.imul(It,tn)|0,_=_+Math.imul(Nt,Ur)|0,tt=tt+Math.imul(Nt,tn)|0;var go=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(go>>>26)|0,go&=67108863,lt=Math.imul(Wt,vr),_=Math.imul(Wt,Rr),_=_+Math.imul(Lt,vr)|0,tt=Math.imul(Lt,Rr),lt=lt+Math.imul(Fr,tr)|0,_=_+Math.imul(Fr,yr)|0,_=_+Math.imul(_i,tr)|0,tt=tt+Math.imul(_i,yr)|0,lt=lt+Math.imul(Br,Nr)|0,_=_+Math.imul(Br,zr)|0,_=_+Math.imul(Gr,Nr)|0,tt=tt+Math.imul(Gr,zr)|0,lt=lt+Math.imul(Dr,Kr)|0,_=_+Math.imul(Dr,nn)|0,_=_+Math.imul(Qr,Kr)|0,tt=tt+Math.imul(Qr,nn)|0,lt=lt+Math.imul(Lr,Zr)|0,_=_+Math.imul(Lr,on)|0,_=_+Math.imul(wr,Zr)|0,tt=tt+Math.imul(wr,on)|0,lt=lt+Math.imul(hr,en)|0,_=_+Math.imul(hr,ln)|0,_=_+Math.imul(Ar,en)|0,tt=tt+Math.imul(Ar,ln)|0,lt=lt+Math.imul(Bt,$t)|0,_=_+Math.imul(Bt,or)|0,_=_+Math.imul(Jt,$t)|0,tt=tt+Math.imul(Jt,or)|0,lt=lt+Math.imul(Kt,Vr)|0,_=_+Math.imul(Kt,Hr)|0,_=_+Math.imul(jt,Vr)|0,tt=tt+Math.imul(jt,Hr)|0,lt=lt+Math.imul(Gt,Ur)|0,_=_+Math.imul(Gt,tn)|0,_=_+Math.imul(Pt,Ur)|0,tt=tt+Math.imul(Pt,tn)|0;var bo=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(bo>>>26)|0,bo&=67108863,lt=Math.imul(Wt,tr),_=Math.imul(Wt,yr),_=_+Math.imul(Lt,tr)|0,tt=Math.imul(Lt,yr),lt=lt+Math.imul(Fr,Nr)|0,_=_+Math.imul(Fr,zr)|0,_=_+Math.imul(_i,Nr)|0,tt=tt+Math.imul(_i,zr)|0,lt=lt+Math.imul(Br,Kr)|0,_=_+Math.imul(Br,nn)|0,_=_+Math.imul(Gr,Kr)|0,tt=tt+Math.imul(Gr,nn)|0,lt=lt+Math.imul(Dr,Zr)|0,_=_+Math.imul(Dr,on)|0,_=_+Math.imul(Qr,Zr)|0,tt=tt+Math.imul(Qr,on)|0,lt=lt+Math.imul(Lr,en)|0,_=_+Math.imul(Lr,ln)|0,_=_+Math.imul(wr,en)|0,tt=tt+Math.imul(wr,ln)|0,lt=lt+Math.imul(hr,$t)|0,_=_+Math.imul(hr,or)|0,_=_+Math.imul(Ar,$t)|0,tt=tt+Math.imul(Ar,or)|0,lt=lt+Math.imul(Bt,Vr)|0,_=_+Math.imul(Bt,Hr)|0,_=_+Math.imul(Jt,Vr)|0,tt=tt+Math.imul(Jt,Hr)|0,lt=lt+Math.imul(Kt,Ur)|0,_=_+Math.imul(Kt,tn)|0,_=_+Math.imul(jt,Ur)|0,tt=tt+Math.imul(jt,tn)|0;var ur=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(ur>>>26)|0,ur&=67108863,lt=Math.imul(Wt,Nr),_=Math.imul(Wt,zr),_=_+Math.imul(Lt,Nr)|0,tt=Math.imul(Lt,zr),lt=lt+Math.imul(Fr,Kr)|0,_=_+Math.imul(Fr,nn)|0,_=_+Math.imul(_i,Kr)|0,tt=tt+Math.imul(_i,nn)|0,lt=lt+Math.imul(Br,Zr)|0,_=_+Math.imul(Br,on)|0,_=_+Math.imul(Gr,Zr)|0,tt=tt+Math.imul(Gr,on)|0,lt=lt+Math.imul(Dr,en)|0,_=_+Math.imul(Dr,ln)|0,_=_+Math.imul(Qr,en)|0,tt=tt+Math.imul(Qr,ln)|0,lt=lt+Math.imul(Lr,$t)|0,_=_+Math.imul(Lr,or)|0,_=_+Math.imul(wr,$t)|0,tt=tt+Math.imul(wr,or)|0,lt=lt+Math.imul(hr,Vr)|0,_=_+Math.imul(hr,Hr)|0,_=_+Math.imul(Ar,Vr)|0,tt=tt+Math.imul(Ar,Hr)|0,lt=lt+Math.imul(Bt,Ur)|0,_=_+Math.imul(Bt,tn)|0,_=_+Math.imul(Jt,Ur)|0,tt=tt+Math.imul(Jt,tn)|0;var Cr=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,lt=Math.imul(Wt,Kr),_=Math.imul(Wt,nn),_=_+Math.imul(Lt,Kr)|0,tt=Math.imul(Lt,nn),lt=lt+Math.imul(Fr,Zr)|0,_=_+Math.imul(Fr,on)|0,_=_+Math.imul(_i,Zr)|0,tt=tt+Math.imul(_i,on)|0,lt=lt+Math.imul(Br,en)|0,_=_+Math.imul(Br,ln)|0,_=_+Math.imul(Gr,en)|0,tt=tt+Math.imul(Gr,ln)|0,lt=lt+Math.imul(Dr,$t)|0,_=_+Math.imul(Dr,or)|0,_=_+Math.imul(Qr,$t)|0,tt=tt+Math.imul(Qr,or)|0,lt=lt+Math.imul(Lr,Vr)|0,_=_+Math.imul(Lr,Hr)|0,_=_+Math.imul(wr,Vr)|0,tt=tt+Math.imul(wr,Hr)|0,lt=lt+Math.imul(hr,Ur)|0,_=_+Math.imul(hr,tn)|0,_=_+Math.imul(Ar,Ur)|0,tt=tt+Math.imul(Ar,tn)|0;var $r=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+($r>>>26)|0,$r&=67108863,lt=Math.imul(Wt,Zr),_=Math.imul(Wt,on),_=_+Math.imul(Lt,Zr)|0,tt=Math.imul(Lt,on),lt=lt+Math.imul(Fr,en)|0,_=_+Math.imul(Fr,ln)|0,_=_+Math.imul(_i,en)|0,tt=tt+Math.imul(_i,ln)|0,lt=lt+Math.imul(Br,$t)|0,_=_+Math.imul(Br,or)|0,_=_+Math.imul(Gr,$t)|0,tt=tt+Math.imul(Gr,or)|0,lt=lt+Math.imul(Dr,Vr)|0,_=_+Math.imul(Dr,Hr)|0,_=_+Math.imul(Qr,Vr)|0,tt=tt+Math.imul(Qr,Hr)|0,lt=lt+Math.imul(Lr,Ur)|0,_=_+Math.imul(Lr,tn)|0,_=_+Math.imul(wr,Ur)|0,tt=tt+Math.imul(wr,tn)|0;var dn=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(dn>>>26)|0,dn&=67108863,lt=Math.imul(Wt,en),_=Math.imul(Wt,ln),_=_+Math.imul(Lt,en)|0,tt=Math.imul(Lt,ln),lt=lt+Math.imul(Fr,$t)|0,_=_+Math.imul(Fr,or)|0,_=_+Math.imul(_i,$t)|0,tt=tt+Math.imul(_i,or)|0,lt=lt+Math.imul(Br,Vr)|0,_=_+Math.imul(Br,Hr)|0,_=_+Math.imul(Gr,Vr)|0,tt=tt+Math.imul(Gr,Hr)|0,lt=lt+Math.imul(Dr,Ur)|0,_=_+Math.imul(Dr,tn)|0,_=_+Math.imul(Qr,Ur)|0,tt=tt+Math.imul(Qr,tn)|0;var rn=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(rn>>>26)|0,rn&=67108863,lt=Math.imul(Wt,$t),_=Math.imul(Wt,or),_=_+Math.imul(Lt,$t)|0,tt=Math.imul(Lt,or),lt=lt+Math.imul(Fr,Vr)|0,_=_+Math.imul(Fr,Hr)|0,_=_+Math.imul(_i,Vr)|0,tt=tt+Math.imul(_i,Hr)|0,lt=lt+Math.imul(Br,Ur)|0,_=_+Math.imul(Br,tn)|0,_=_+Math.imul(Gr,Ur)|0,tt=tt+Math.imul(Gr,tn)|0;var Sn=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,lt=Math.imul(Wt,Vr),_=Math.imul(Wt,Hr),_=_+Math.imul(Lt,Vr)|0,tt=Math.imul(Lt,Hr),lt=lt+Math.imul(Fr,Ur)|0,_=_+Math.imul(Fr,tn)|0,_=_+Math.imul(_i,Ur)|0,tt=tt+Math.imul(_i,tn)|0;var In=(mt+lt|0)+((_&8191)<<13)|0;mt=(tt+(_>>>13)|0)+(In>>>26)|0,In&=67108863,lt=Math.imul(Wt,Ur),_=Math.imul(Wt,tn),_=_+Math.imul(Lt,Ur)|0,tt=Math.imul(Lt,tn);var Cn=(mt+lt|0)+((_&8191)<<13)|0;return mt=(tt+(_>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,pt[0]=jn,pt[1]=Un,pt[2]=ao,pt[3]=co,pt[4]=ro,pt[5]=vo,pt[6]=oo,pt[7]=mo,pt[8]=ho,pt[9]=go,pt[10]=bo,pt[11]=ur,pt[12]=Cr,pt[13]=$r,pt[14]=dn,pt[15]=rn,pt[16]=Sn,pt[17]=In,pt[18]=Cn,mt!==0&&(pt[19]=mt,$.length++),$};Math.imul||(rt=vt);function bt(nt,s,b){b.negative=s.negative^nt.negative,b.length=nt.length+s.length;for(var $=0,_e=0,it=0;it<b.length-1;it++){var pt=_e;_e=0;for(var mt=$&67108863,lt=Math.min(it,s.length-1),_=Math.max(0,it-nt.length+1);_<=lt;_++){var tt=it-_,Tt=nt.words[tt]|0,It=s.words[_]|0,Nt=Tt*It,Ut=Nt&67108863;pt=pt+(Nt/67108864|0)|0,Ut=Ut+mt|0,mt=Ut&67108863,pt=pt+(Ut>>>26)|0,_e+=pt>>>26,pt&=67108863}b.words[it]=mt,$=pt,pt=_e}return $!==0?b.words[it]=$:b.length--,b.strip()}function ht(nt,s,b){var $=new wt;return $.mulp(nt,s,b)}d.prototype.mulTo=function(s,b){var $,_e=this.length+s.length;return this.length===10&&s.length===10?$=rt(this,s,b):_e<63?$=vt(this,s,b):_e<1024?$=bt(this,s,b):$=ht(this,s,b),$};function wt(nt,s){this.x=nt,this.y=s}wt.prototype.makeRBT=function(s){for(var b=new Array(s),$=d.prototype._countBits(s)-1,_e=0;_e<s;_e++)b[_e]=this.revBin(_e,$,s);return b},wt.prototype.revBin=function(s,b,$){if(s===0||s===$-1)return s;for(var _e=0,it=0;it<b;it++)_e|=(s&1)<<b-it-1,s>>=1;return _e},wt.prototype.permute=function(s,b,$,_e,it,pt){for(var mt=0;mt<pt;mt++)_e[mt]=b[s[mt]],it[mt]=$[s[mt]]},wt.prototype.transform=function(s,b,$,_e,it,pt){this.permute(pt,s,b,$,_e,it);for(var mt=1;mt<it;mt<<=1)for(var lt=mt<<1,_=Math.cos(2*Math.PI/lt),tt=Math.sin(2*Math.PI/lt),Tt=0;Tt<it;Tt+=lt)for(var It=_,Nt=tt,Ut=0;Ut<mt;Ut++){var Gt=$[Tt+Ut],Pt=_e[Tt+Ut],qt=$[Tt+Ut+mt],Kt=_e[Tt+Ut+mt],jt=It*qt-Nt*Kt;Kt=It*Kt+Nt*qt,qt=jt,$[Tt+Ut]=Gt+qt,_e[Tt+Ut]=Pt+Kt,$[Tt+Ut+mt]=Gt-qt,_e[Tt+Ut+mt]=Pt-Kt,Ut!==lt&&(jt=_*It-tt*Nt,Nt=_*Nt+tt*It,It=jt)}},wt.prototype.guessLen13b=function(s,b){var $=Math.max(b,s)|1,_e=$&1,it=0;for($=$/2|0;$;$=$>>>1)it++;return 1<<it+1+_e},wt.prototype.conjugate=function(s,b,$){if(!($<=1))for(var _e=0;_e<$/2;_e++){var it=s[_e];s[_e]=s[$-_e-1],s[$-_e-1]=it,it=b[_e],b[_e]=-b[$-_e-1],b[$-_e-1]=-it}},wt.prototype.normalize13b=function(s,b){for(var $=0,_e=0;_e<b/2;_e++){var it=Math.round(s[2*_e+1]/b)*8192+Math.round(s[2*_e]/b)+$;s[_e]=it&67108863,it<67108864?$=0:$=it/67108864|0}return s},wt.prototype.convert13b=function(s,b,$,_e){for(var it=0,pt=0;pt<b;pt++)it=it+(s[pt]|0),$[2*pt]=it&8191,it=it>>>13,$[2*pt+1]=it&8191,it=it>>>13;for(pt=2*b;pt<_e;++pt)$[pt]=0;c(it===0),c((it&-8192)===0)},wt.prototype.stub=function(s){for(var b=new Array(s),$=0;$<s;$++)b[$]=0;return b},wt.prototype.mulp=function(s,b,$){var _e=2*this.guessLen13b(s.length,b.length),it=this.makeRBT(_e),pt=this.stub(_e),mt=new Array(_e),lt=new Array(_e),_=new Array(_e),tt=new Array(_e),Tt=new Array(_e),It=new Array(_e),Nt=$.words;Nt.length=_e,this.convert13b(s.words,s.length,mt,_e),this.convert13b(b.words,b.length,tt,_e),this.transform(mt,pt,lt,_,_e,it),this.transform(tt,pt,Tt,It,_e,it);for(var Ut=0;Ut<_e;Ut++){var Gt=lt[Ut]*Tt[Ut]-_[Ut]*It[Ut];_[Ut]=lt[Ut]*It[Ut]+_[Ut]*Tt[Ut],lt[Ut]=Gt}return this.conjugate(lt,_,_e),this.transform(lt,_,Nt,pt,_e,it),this.conjugate(Nt,pt,_e),this.normalize13b(Nt,_e),$.negative=s.negative^b.negative,$.length=s.length+b.length,$.strip()},d.prototype.mul=function(s){var b=new d(null);return b.words=new Array(this.length+s.length),this.mulTo(s,b)},d.prototype.mulf=function(s){var b=new d(null);return b.words=new Array(this.length+s.length),ht(this,s,b)},d.prototype.imul=function(s){return this.clone().mulTo(s,this)},d.prototype.imuln=function(s){c(typeof s=="number"),c(s<67108864);for(var b=0,$=0;$<this.length;$++){var _e=(this.words[$]|0)*s,it=(_e&67108863)+(b&67108863);b>>=26,b+=_e/67108864|0,b+=it>>>26,this.words[$]=it&67108863}return b!==0&&(this.words[$]=b,this.length++),this},d.prototype.muln=function(s){return this.clone().imuln(s)},d.prototype.sqr=function(){return this.mul(this)},d.prototype.isqr=function(){return this.imul(this.clone())},d.prototype.pow=function(s){var b=yt(s);if(b.length===0)return new d(1);for(var $=this,_e=0;_e<b.length&&b[_e]===0;_e++,$=$.sqr());if(++_e<b.length)for(var it=$.sqr();_e<b.length;_e++,it=it.sqr())b[_e]!==0&&($=$.mul(it));return $},d.prototype.iushln=function(s){c(typeof s=="number"&&s>=0);var b=s%26,$=(s-b)/26,_e=67108863>>>26-b<<26-b,it;if(b!==0){var pt=0;for(it=0;it<this.length;it++){var mt=this.words[it]&_e,lt=(this.words[it]|0)-mt<<b;this.words[it]=lt|pt,pt=mt>>>26-b}pt&&(this.words[it]=pt,this.length++)}if($!==0){for(it=this.length-1;it>=0;it--)this.words[it+$]=this.words[it];for(it=0;it<$;it++)this.words[it]=0;this.length+=$}return this.strip()},d.prototype.ishln=function(s){return c(this.negative===0),this.iushln(s)},d.prototype.iushrn=function(s,b,$){c(typeof s=="number"&&s>=0);var _e;b?_e=(b-b%26)/26:_e=0;var it=s%26,pt=Math.min((s-it)/26,this.length),mt=67108863^67108863>>>it<<it,lt=$;if(_e-=pt,_e=Math.max(0,_e),lt){for(var _=0;_<pt;_++)lt.words[_]=this.words[_];lt.length=pt}if(pt!==0)if(this.length>pt)for(this.length-=pt,_=0;_<this.length;_++)this.words[_]=this.words[_+pt];else this.words[0]=0,this.length=1;var tt=0;for(_=this.length-1;_>=0&&(tt!==0||_>=_e);_--){var Tt=this.words[_]|0;this.words[_]=tt<<26-it|Tt>>>it,tt=Tt&mt}return lt&&tt!==0&&(lt.words[lt.length++]=tt),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},d.prototype.ishrn=function(s,b,$){return c(this.negative===0),this.iushrn(s,b,$)},d.prototype.shln=function(s){return this.clone().ishln(s)},d.prototype.ushln=function(s){return this.clone().iushln(s)},d.prototype.shrn=function(s){return this.clone().ishrn(s)},d.prototype.ushrn=function(s){return this.clone().iushrn(s)},d.prototype.testn=function(s){c(typeof s=="number"&&s>=0);var b=s%26,$=(s-b)/26,_e=1<<b;if(this.length<=$)return!1;var it=this.words[$];return!!(it&_e)},d.prototype.imaskn=function(s){c(typeof s=="number"&&s>=0);var b=s%26,$=(s-b)/26;if(c(this.negative===0,"imaskn works only with positive numbers"),this.length<=$)return this;if(b!==0&&$++,this.length=Math.min($,this.length),b!==0){var _e=67108863^67108863>>>b<<b;this.words[this.length-1]&=_e}return this.strip()},d.prototype.maskn=function(s){return this.clone().imaskn(s)},d.prototype.iaddn=function(s){return c(typeof s=="number"),c(s<67108864),s<0?this.isubn(-s):this.negative!==0?this.length===1&&(this.words[0]|0)<s?(this.words[0]=s-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(s),this.negative=1,this):this._iaddn(s)},d.prototype._iaddn=function(s){this.words[0]+=s;for(var b=0;b<this.length&&this.words[b]>=67108864;b++)this.words[b]-=67108864,b===this.length-1?this.words[b+1]=1:this.words[b+1]++;return this.length=Math.max(this.length,b+1),this},d.prototype.isubn=function(s){if(c(typeof s=="number"),c(s<67108864),s<0)return this.iaddn(-s);if(this.negative!==0)return this.negative=0,this.iaddn(s),this.negative=1,this;if(this.words[0]-=s,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var b=0;b<this.length&&this.words[b]<0;b++)this.words[b]+=67108864,this.words[b+1]-=1;return this.strip()},d.prototype.addn=function(s){return this.clone().iaddn(s)},d.prototype.subn=function(s){return this.clone().isubn(s)},d.prototype.iabs=function(){return this.negative=0,this},d.prototype.abs=function(){return this.clone().iabs()},d.prototype._ishlnsubmul=function(s,b,$){var _e=s.length+$,it;this._expand(_e);var pt,mt=0;for(it=0;it<s.length;it++){pt=(this.words[it+$]|0)+mt;var lt=(s.words[it]|0)*b;pt-=lt&67108863,mt=(pt>>26)-(lt/67108864|0),this.words[it+$]=pt&67108863}for(;it<this.length-$;it++)pt=(this.words[it+$]|0)+mt,mt=pt>>26,this.words[it+$]=pt&67108863;if(mt===0)return this.strip();for(c(mt===-1),mt=0,it=0;it<this.length;it++)pt=-(this.words[it]|0)+mt,mt=pt>>26,this.words[it]=pt&67108863;return this.negative=1,this.strip()},d.prototype._wordDiv=function(s,b){var $=this.length-s.length,_e=this.clone(),it=s,pt=it.words[it.length-1]|0,mt=this._countBits(pt);$=26-mt,$!==0&&(it=it.ushln($),_e.iushln($),pt=it.words[it.length-1]|0);var lt=_e.length-it.length,_;if(b!=="mod"){_=new d(null),_.length=lt+1,_.words=new Array(_.length);for(var tt=0;tt<_.length;tt++)_.words[tt]=0}var Tt=_e.clone()._ishlnsubmul(it,1,lt);Tt.negative===0&&(_e=Tt,_&&(_.words[lt]=1));for(var It=lt-1;It>=0;It--){var Nt=(_e.words[it.length+It]|0)*67108864+(_e.words[it.length+It-1]|0);for(Nt=Math.min(Nt/pt|0,67108863),_e._ishlnsubmul(it,Nt,It);_e.negative!==0;)Nt--,_e.negative=0,_e._ishlnsubmul(it,1,It),_e.isZero()||(_e.negative^=1);_&&(_.words[It]=Nt)}return _&&_.strip(),_e.strip(),b!=="div"&&$!==0&&_e.iushrn($),{div:_||null,mod:_e}},d.prototype.divmod=function(s,b,$){if(c(!s.isZero()),this.isZero())return{div:new d(0),mod:new d(0)};var _e,it,pt;return this.negative!==0&&s.negative===0?(pt=this.neg().divmod(s,b),b!=="mod"&&(_e=pt.div.neg()),b!=="div"&&(it=pt.mod.neg(),$&&it.negative!==0&&it.iadd(s)),{div:_e,mod:it}):this.negative===0&&s.negative!==0?(pt=this.divmod(s.neg(),b),b!=="mod"&&(_e=pt.div.neg()),{div:_e,mod:pt.mod}):this.negative&s.negative?(pt=this.neg().divmod(s.neg(),b),b!=="div"&&(it=pt.mod.neg(),$&&it.negative!==0&&it.isub(s)),{div:pt.div,mod:it}):s.length>this.length||this.cmp(s)<0?{div:new d(0),mod:this}:s.length===1?b==="div"?{div:this.divn(s.words[0]),mod:null}:b==="mod"?{div:null,mod:new d(this.modn(s.words[0]))}:{div:this.divn(s.words[0]),mod:new d(this.modn(s.words[0]))}:this._wordDiv(s,b)},d.prototype.div=function(s){return this.divmod(s,"div",!1).div},d.prototype.mod=function(s){return this.divmod(s,"mod",!1).mod},d.prototype.umod=function(s){return this.divmod(s,"mod",!0).mod},d.prototype.divRound=function(s){var b=this.divmod(s);if(b.mod.isZero())return b.div;var $=b.div.negative!==0?b.mod.isub(s):b.mod,_e=s.ushrn(1),it=s.andln(1),pt=$.cmp(_e);return pt<0||it===1&&pt===0?b.div:b.div.negative!==0?b.div.isubn(1):b.div.iaddn(1)},d.prototype.modn=function(s){c(s<=67108863);for(var b=(1<<26)%s,$=0,_e=this.length-1;_e>=0;_e--)$=(b*$+(this.words[_e]|0))%s;return $},d.prototype.idivn=function(s){c(s<=67108863);for(var b=0,$=this.length-1;$>=0;$--){var _e=(this.words[$]|0)+b*67108864;this.words[$]=_e/s|0,b=_e%s}return this.strip()},d.prototype.divn=function(s){return this.clone().idivn(s)},d.prototype.egcd=function(s){c(s.negative===0),c(!s.isZero());var b=this,$=s.clone();b.negative!==0?b=b.umod(s):b=b.clone();for(var _e=new d(1),it=new d(0),pt=new d(0),mt=new d(1),lt=0;b.isEven()&&$.isEven();)b.iushrn(1),$.iushrn(1),++lt;for(var _=$.clone(),tt=b.clone();!b.isZero();){for(var Tt=0,It=1;!(b.words[0]&It)&&Tt<26;++Tt,It<<=1);if(Tt>0)for(b.iushrn(Tt);Tt-- >0;)(_e.isOdd()||it.isOdd())&&(_e.iadd(_),it.isub(tt)),_e.iushrn(1),it.iushrn(1);for(var Nt=0,Ut=1;!($.words[0]&Ut)&&Nt<26;++Nt,Ut<<=1);if(Nt>0)for($.iushrn(Nt);Nt-- >0;)(pt.isOdd()||mt.isOdd())&&(pt.iadd(_),mt.isub(tt)),pt.iushrn(1),mt.iushrn(1);b.cmp($)>=0?(b.isub($),_e.isub(pt),it.isub(mt)):($.isub(b),pt.isub(_e),mt.isub(it))}return{a:pt,b:mt,gcd:$.iushln(lt)}},d.prototype._invmp=function(s){c(s.negative===0),c(!s.isZero());var b=this,$=s.clone();b.negative!==0?b=b.umod(s):b=b.clone();for(var _e=new d(1),it=new d(0),pt=$.clone();b.cmpn(1)>0&&$.cmpn(1)>0;){for(var mt=0,lt=1;!(b.words[0]&lt)&&mt<26;++mt,lt<<=1);if(mt>0)for(b.iushrn(mt);mt-- >0;)_e.isOdd()&&_e.iadd(pt),_e.iushrn(1);for(var _=0,tt=1;!($.words[0]&tt)&&_<26;++_,tt<<=1);if(_>0)for($.iushrn(_);_-- >0;)it.isOdd()&&it.iadd(pt),it.iushrn(1);b.cmp($)>=0?(b.isub($),_e.isub(it)):($.isub(b),it.isub(_e))}var Tt;return b.cmpn(1)===0?Tt=_e:Tt=it,Tt.cmpn(0)<0&&Tt.iadd(s),Tt},d.prototype.gcd=function(s){if(this.isZero())return s.abs();if(s.isZero())return this.abs();var b=this.clone(),$=s.clone();b.negative=0,$.negative=0;for(var _e=0;b.isEven()&&$.isEven();_e++)b.iushrn(1),$.iushrn(1);do{for(;b.isEven();)b.iushrn(1);for(;$.isEven();)$.iushrn(1);var it=b.cmp($);if(it<0){var pt=b;b=$,$=pt}else if(it===0||$.cmpn(1)===0)break;b.isub($)}while(!0);return $.iushln(_e)},d.prototype.invm=function(s){return this.egcd(s).a.umod(s)},d.prototype.isEven=function(){return(this.words[0]&1)===0},d.prototype.isOdd=function(){return(this.words[0]&1)===1},d.prototype.andln=function(s){return this.words[0]&s},d.prototype.bincn=function(s){c(typeof s=="number");var b=s%26,$=(s-b)/26,_e=1<<b;if(this.length<=$)return this._expand($+1),this.words[$]|=_e,this;for(var it=_e,pt=$;it!==0&&pt<this.length;pt++){var mt=this.words[pt]|0;mt+=it,it=mt>>>26,mt&=67108863,this.words[pt]=mt}return it!==0&&(this.words[pt]=it,this.length++),this},d.prototype.isZero=function(){return this.length===1&&this.words[0]===0},d.prototype.cmpn=function(s){var b=s<0;if(this.negative!==0&&!b)return-1;if(this.negative===0&&b)return 1;this.strip();var $;if(this.length>1)$=1;else{b&&(s=-s),c(s<=67108863,"Number is too big");var _e=this.words[0]|0;$=_e===s?0:_e<s?-1:1}return this.negative!==0?-$|0:$},d.prototype.cmp=function(s){if(this.negative!==0&&s.negative===0)return-1;if(this.negative===0&&s.negative!==0)return 1;var b=this.ucmp(s);return this.negative!==0?-b|0:b},d.prototype.ucmp=function(s){if(this.length>s.length)return 1;if(this.length<s.length)return-1;for(var b=0,$=this.length-1;$>=0;$--){var _e=this.words[$]|0,it=s.words[$]|0;if(_e!==it){_e<it?b=-1:_e>it&&(b=1);break}}return b},d.prototype.gtn=function(s){return this.cmpn(s)===1},d.prototype.gt=function(s){return this.cmp(s)===1},d.prototype.gten=function(s){return this.cmpn(s)>=0},d.prototype.gte=function(s){return this.cmp(s)>=0},d.prototype.ltn=function(s){return this.cmpn(s)===-1},d.prototype.lt=function(s){return this.cmp(s)===-1},d.prototype.lten=function(s){return this.cmpn(s)<=0},d.prototype.lte=function(s){return this.cmp(s)<=0},d.prototype.eqn=function(s){return this.cmpn(s)===0},d.prototype.eq=function(s){return this.cmp(s)===0},d.red=function(s){return new _t(s)},d.prototype.toRed=function(s){return c(!this.red,"Already a number in reduction context"),c(this.negative===0,"red works only with positives"),s.convertTo(this)._forceRed(s)},d.prototype.fromRed=function(){return c(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},d.prototype._forceRed=function(s){return this.red=s,this},d.prototype.forceRed=function(s){return c(!this.red,"Already a number in reduction context"),this._forceRed(s)},d.prototype.redAdd=function(s){return c(this.red,"redAdd works only with red numbers"),this.red.add(this,s)},d.prototype.redIAdd=function(s){return c(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,s)},d.prototype.redSub=function(s){return c(this.red,"redSub works only with red numbers"),this.red.sub(this,s)},d.prototype.redISub=function(s){return c(this.red,"redISub works only with red numbers"),this.red.isub(this,s)},d.prototype.redShl=function(s){return c(this.red,"redShl works only with red numbers"),this.red.shl(this,s)},d.prototype.redMul=function(s){return c(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.mul(this,s)},d.prototype.redIMul=function(s){return c(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.imul(this,s)},d.prototype.redSqr=function(){return c(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},d.prototype.redISqr=function(){return c(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},d.prototype.redSqrt=function(){return c(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},d.prototype.redInvm=function(){return c(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},d.prototype.redNeg=function(){return c(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},d.prototype.redPow=function(s){return c(this.red&&!s.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,s)};var At={k256:null,p224:null,p192:null,p25519:null};function Ct(nt,s){this.name=nt,this.p=new d(s,16),this.n=this.p.bitLength(),this.k=new d(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Ct.prototype._tmp=function(){var s=new d(null);return s.words=new Array(Math.ceil(this.n/13)),s},Ct.prototype.ireduce=function(s){var b=s,$;do this.split(b,this.tmp),b=this.imulK(b),b=b.iadd(this.tmp),$=b.bitLength();while($>this.n);var _e=$<this.n?-1:b.ucmp(this.p);return _e===0?(b.words[0]=0,b.length=1):_e>0?b.isub(this.p):b.strip!==void 0?b.strip():b._strip(),b},Ct.prototype.split=function(s,b){s.iushrn(this.n,0,b)},Ct.prototype.imulK=function(s){return s.imul(this.k)};function dt(){Ct.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}j(dt,Ct),dt.prototype.split=function(s,b){for(var $=4194303,_e=Math.min(s.length,9),it=0;it<_e;it++)b.words[it]=s.words[it];if(b.length=_e,s.length<=9){s.words[0]=0,s.length=1;return}var pt=s.words[9];for(b.words[b.length++]=pt&$,it=10;it<s.length;it++){var mt=s.words[it]|0;s.words[it-10]=(mt&$)<<4|pt>>>22,pt=mt}pt>>>=22,s.words[it-10]=pt,pt===0&&s.length>10?s.length-=10:s.length-=9},dt.prototype.imulK=function(s){s.words[s.length]=0,s.words[s.length+1]=0,s.length+=2;for(var b=0,$=0;$<s.length;$++){var _e=s.words[$]|0;b+=_e*977,s.words[$]=b&67108863,b=_e*64+(b/67108864|0)}return s.words[s.length-1]===0&&(s.length--,s.words[s.length-1]===0&&s.length--),s};function Et(){Ct.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}j(Et,Ct);function Rt(){Ct.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}j(Rt,Ct);function Mt(){Ct.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}j(Mt,Ct),Mt.prototype.imulK=function(s){for(var b=0,$=0;$<s.length;$++){var _e=(s.words[$]|0)*19+b,it=_e&67108863;_e>>>=26,s.words[$]=it,b=_e}return b!==0&&(s.words[s.length++]=b),s},d._prime=function(s){if(At[s])return At[s];var b;if(s==="k256")b=new dt;else if(s==="p224")b=new Et;else if(s==="p192")b=new Rt;else if(s==="p25519")b=new Mt;else throw new Error("Unknown prime "+s);return At[s]=b,b};function _t(nt){if(typeof nt=="string"){var s=d._prime(nt);this.m=s.p,this.prime=s}else c(nt.gtn(1),"modulus must be greater than 1"),this.m=nt,this.prime=null}_t.prototype._verify1=function(s){c(s.negative===0,"red works only with positives"),c(s.red,"red works only with red numbers")},_t.prototype._verify2=function(s,b){c((s.negative|b.negative)===0,"red works only with positives"),c(s.red&&s.red===b.red,"red works only with red numbers")},_t.prototype.imod=function(s){return this.prime?this.prime.ireduce(s)._forceRed(this):s.umod(this.m)._forceRed(this)},_t.prototype.neg=function(s){return s.isZero()?s.clone():this.m.sub(s)._forceRed(this)},_t.prototype.add=function(s,b){this._verify2(s,b);var $=s.add(b);return $.cmp(this.m)>=0&&$.isub(this.m),$._forceRed(this)},_t.prototype.iadd=function(s,b){this._verify2(s,b);var $=s.iadd(b);return $.cmp(this.m)>=0&&$.isub(this.m),$},_t.prototype.sub=function(s,b){this._verify2(s,b);var $=s.sub(b);return $.cmpn(0)<0&&$.iadd(this.m),$._forceRed(this)},_t.prototype.isub=function(s,b){this._verify2(s,b);var $=s.isub(b);return $.cmpn(0)<0&&$.iadd(this.m),$},_t.prototype.shl=function(s,b){return this._verify1(s),this.imod(s.ushln(b))},_t.prototype.imul=function(s,b){return this._verify2(s,b),this.imod(s.imul(b))},_t.prototype.mul=function(s,b){return this._verify2(s,b),this.imod(s.mul(b))},_t.prototype.isqr=function(s){return this.imul(s,s.clone())},_t.prototype.sqr=function(s){return this.mul(s,s)},_t.prototype.sqrt=function(s){if(s.isZero())return s.clone();var b=this.m.andln(3);if(c(b%2===1),b===3){var $=this.m.add(new d(1)).iushrn(2);return this.pow(s,$)}for(var _e=this.m.subn(1),it=0;!_e.isZero()&&_e.andln(1)===0;)it++,_e.iushrn(1);c(!_e.isZero());var pt=new d(1).toRed(this),mt=pt.redNeg(),lt=this.m.subn(1).iushrn(1),_=this.m.bitLength();for(_=new d(2*_*_).toRed(this);this.pow(_,lt).cmp(mt)!==0;)_.redIAdd(mt);for(var tt=this.pow(_,_e),Tt=this.pow(s,_e.addn(1).iushrn(1)),It=this.pow(s,_e),Nt=it;It.cmp(pt)!==0;){for(var Ut=It,Gt=0;Ut.cmp(pt)!==0;Gt++)Ut=Ut.redSqr();c(Gt<Nt);var Pt=this.pow(tt,new d(1).iushln(Nt-Gt-1));Tt=Tt.redMul(Pt),tt=Pt.redSqr(),It=It.redMul(tt),Nt=Gt}return Tt},_t.prototype.invm=function(s){var b=s._invmp(this.m);return b.negative!==0?(b.negative=0,this.imod(b).redNeg()):this.imod(b)},_t.prototype.pow=function(s,b){if(b.isZero())return new d(1).toRed(this);if(b.cmpn(1)===0)return s.clone();var $=4,_e=new Array(1<<$);_e[0]=new d(1).toRed(this),_e[1]=s;for(var it=2;it<_e.length;it++)_e[it]=this.mul(_e[it-1],s);var pt=_e[0],mt=0,lt=0,_=b.bitLength()%26;for(_===0&&(_=26),it=b.length-1;it>=0;it--){for(var tt=b.words[it],Tt=_-1;Tt>=0;Tt--){var It=tt>>Tt&1;if(pt!==_e[0]&&(pt=this.sqr(pt)),It===0&&mt===0){lt=0;continue}mt<<=1,mt|=It,lt++,!(lt!==$&&(it!==0||Tt!==0))&&(pt=this.mul(pt,_e[mt]),lt=0,mt=0)}_=26}return pt},_t.prototype.convertTo=function(s){var b=s.umod(this.m);return b===s?b.clone():b},_t.prototype.convertFrom=function(s){var b=s.clone();return b.red=null,b},d.mont=function(s){return new kt(s)};function kt(nt){_t.call(this,nt),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new d(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}j(kt,_t),kt.prototype.convertTo=function(s){return this.imod(s.ushln(this.shift))},kt.prototype.convertFrom=function(s){var b=this.imod(s.mul(this.rinv));return b.red=null,b},kt.prototype.imul=function(s,b){if(s.isZero()||b.isZero())return s.words[0]=0,s.length=1,s;var $=s.imul(b),_e=$.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),it=$.isub(_e).iushrn(this.shift),pt=it;return it.cmp(this.m)>=0?pt=it.isub(this.m):it.cmpn(0)<0&&(pt=it.iadd(this.m)),pt._forceRed(this)},kt.prototype.mul=function(s,b){if(s.isZero()||b.isZero())return new d(0)._forceRed(this);var $=s.mul(b),_e=$.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),it=$.isub(_e).iushrn(this.shift),pt=it;return it.cmp(this.m)>=0?pt=it.isub(this.m):it.cmpn(0)<0&&(pt=it.iadd(this.m)),pt._forceRed(this)},kt.prototype.invm=function(s){var b=this.imod(s._invmp(this.m).mul(this.r2));return b._forceRed(this)}})(o,commonjsGlobal)}(bn)),bn.exports}var withPublic_1,hasRequiredWithPublic;function requireWithPublic(){if(hasRequiredWithPublic)return withPublic_1;hasRequiredWithPublic=1;var o=requireBn(),e=requireSafeBuffer$1().Buffer;function a(c,j){return e.from(c.toRed(o.mont(j.modulus)).redPow(new o(j.publicExponent)).fromRed().toArray())}return withPublic_1=a,withPublic_1}var publicEncrypt,hasRequiredPublicEncrypt;function requirePublicEncrypt(){if(hasRequiredPublicEncrypt)return publicEncrypt;hasRequiredPublicEncrypt=1;var o=requireParseAsn1(),e=requireBrowser$b(),a=requireBrowser$9(),c=requireMgf(),j=requireXor(),d=requireBn(),et=requireWithPublic(),at=requireBrowserifyRsa(),st=requireSafeBuffer$1().Buffer;publicEncrypt=function(yt,vt,rt){var bt;yt.padding?bt=yt.padding:rt?bt=1:bt=4;var ht=o(yt),wt;if(bt===4)wt=ct(ht,vt);else if(bt===1)wt=ot(ht,vt,rt);else if(bt===3){if(wt=new d(vt),wt.cmp(ht.modulus)>=0)throw new Error("data too long for modulus")}else throw new Error("unknown padding");return rt?at(wt,ht):et(wt,ht)};function ct(ft,yt){var vt=ft.modulus.byteLength(),rt=yt.length,bt=a("sha1").update(st.alloc(0)).digest(),ht=bt.length,wt=2*ht;if(rt>vt-wt-2)throw new Error("message too long");var At=st.alloc(vt-rt-wt-2),Ct=vt-ht-1,dt=e(ht),Et=j(st.concat([bt,At,st.alloc(1,1),yt],Ct),c(dt,Ct)),Rt=j(dt,c(Et,ht));return new d(st.concat([st.alloc(1),Rt,Et],vt))}function ot(ft,yt,vt){var rt=yt.length,bt=ft.modulus.byteLength();if(rt>bt-11)throw new Error("message too long");var ht;return vt?ht=st.alloc(bt-rt-3,255):ht=gt(bt-rt-3),new d(st.concat([st.from([0,vt?1:2]),ht,st.alloc(1),yt],bt))}function gt(ft){for(var yt=st.allocUnsafe(ft),vt=0,rt=e(ft*2),bt=0,ht;vt<ft;)bt===rt.length&&(rt=e(ft*2),bt=0),ht=rt[bt++],ht&&(yt[vt++]=ht);return yt}return publicEncrypt}var privateDecrypt,hasRequiredPrivateDecrypt;function requirePrivateDecrypt(){if(hasRequiredPrivateDecrypt)return privateDecrypt;hasRequiredPrivateDecrypt=1;var o=requireParseAsn1(),e=requireMgf(),a=requireXor(),c=requireBn(),j=requireBrowserifyRsa(),d=requireBrowser$9(),et=requireWithPublic(),at=requireSafeBuffer$1().Buffer;privateDecrypt=function(ft,yt,vt){var rt;ft.padding?rt=ft.padding:vt?rt=1:rt=4;var bt=o(ft),ht=bt.modulus.byteLength();if(yt.length>ht||new c(yt).cmp(bt.modulus)>=0)throw new Error("decryption error");var wt;vt?wt=et(new c(yt),bt):wt=j(yt,bt);var At=at.alloc(ht-wt.length);if(wt=at.concat([At,wt],ht),rt===4)return st(bt,wt);if(rt===1)return ct(bt,wt,vt);if(rt===3)return wt;throw new Error("unknown padding")};function st(gt,ft){var yt=gt.modulus.byteLength(),vt=d("sha1").update(at.alloc(0)).digest(),rt=vt.length;if(ft[0]!==0)throw new Error("decryption error");var bt=ft.slice(1,rt+1),ht=ft.slice(rt+1),wt=a(bt,e(ht,rt)),At=a(ht,e(wt,yt-rt-1));if(ot(vt,At.slice(0,rt)))throw new Error("decryption error");for(var Ct=rt;At[Ct]===0;)Ct++;if(At[Ct++]!==1)throw new Error("decryption error");return At.slice(Ct)}function ct(gt,ft,yt){for(var vt=ft.slice(0,2),rt=2,bt=0;ft[rt++]!==0;)if(rt>=ft.length){bt++;break}var ht=ft.slice(2,rt-1);if((vt.toString("hex")!=="0002"&&!yt||vt.toString("hex")!=="0001"&&yt)&&bt++,ht.length<8&&bt++,bt)throw new Error("decryption error");return ft.slice(rt)}function ot(gt,ft){gt=at.from(gt),ft=at.from(ft);var yt=0,vt=gt.length;gt.length!==ft.length&&(yt++,vt=Math.min(gt.length,ft.length));for(var rt=-1;++rt<vt;)yt+=gt[rt]^ft[rt];return yt}return privateDecrypt}var hasRequiredBrowser$1;function requireBrowser$1(){return hasRequiredBrowser$1||(hasRequiredBrowser$1=1,function(o){o.publicEncrypt=requirePublicEncrypt(),o.privateDecrypt=requirePrivateDecrypt(),o.privateEncrypt=function(a,c){return o.publicEncrypt(a,c,!0)},o.publicDecrypt=function(a,c){return o.privateDecrypt(a,c,!0)}}(browser$3)),browser$3}var browser$2={},hasRequiredBrowser;function requireBrowser(){if(hasRequiredBrowser)return browser$2;hasRequiredBrowser=1;function o(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var e=requireSafeBuffer$1(),a=requireBrowser$b(),c=e.Buffer,j=e.kMaxLength,d=commonjsGlobal.crypto||commonjsGlobal.msCrypto,et=Math.pow(2,32)-1;function at(ft,yt){if(typeof ft!="number"||ft!==ft)throw new TypeError("offset must be a number");if(ft>et||ft<0)throw new TypeError("offset must be a uint32");if(ft>j||ft>yt)throw new RangeError("offset out of range")}function st(ft,yt,vt){if(typeof ft!="number"||ft!==ft)throw new TypeError("size must be a number");if(ft>et||ft<0)throw new TypeError("size must be a uint32");if(ft+yt>vt||ft>j)throw new RangeError("buffer too small")}d&&d.getRandomValues||!process$1.browser?(browser$2.randomFill=ct,browser$2.randomFillSync=gt):(browser$2.randomFill=o,browser$2.randomFillSync=o);function ct(ft,yt,vt,rt){if(!c.isBuffer(ft)&&!(ft instanceof commonjsGlobal.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof yt=="function")rt=yt,yt=0,vt=ft.length;else if(typeof vt=="function")rt=vt,vt=ft.length-yt;else if(typeof rt!="function")throw new TypeError('"cb" argument must be a function');return at(yt,ft.length),st(vt,yt,ft.length),ot(ft,yt,vt,rt)}function ot(ft,yt,vt,rt){if(process$1.browser){var bt=ft.buffer,ht=new Uint8Array(bt,yt,vt);if(d.getRandomValues(ht),rt){process$1.nextTick(function(){rt(null,ft)});return}return ft}if(rt){a(vt,function(At,Ct){if(At)return rt(At);Ct.copy(ft,yt),rt(null,ft)});return}var wt=a(vt);return wt.copy(ft,yt),ft}function gt(ft,yt,vt){if(typeof yt>"u"&&(yt=0),!c.isBuffer(ft)&&!(ft instanceof commonjsGlobal.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return at(yt,ft.length),vt===void 0&&(vt=ft.length-yt),st(vt,yt,ft.length),ot(ft,yt,vt)}return browser$2}var hasRequiredCryptoBrowserify;function requireCryptoBrowserify(){if(hasRequiredCryptoBrowserify)return cryptoBrowserify;hasRequiredCryptoBrowserify=1,cryptoBrowserify.randomBytes=cryptoBrowserify.rng=cryptoBrowserify.pseudoRandomBytes=cryptoBrowserify.prng=requireBrowser$b(),cryptoBrowserify.createHash=cryptoBrowserify.Hash=requireBrowser$9(),cryptoBrowserify.createHmac=cryptoBrowserify.Hmac=requireBrowser$8();var o=requireAlgos(),e=Object.keys(o),a=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(e);cryptoBrowserify.getHashes=function(){return a};var c=requireBrowser$7();cryptoBrowserify.pbkdf2=c.pbkdf2,cryptoBrowserify.pbkdf2Sync=c.pbkdf2Sync;var j=requireBrowser$5();cryptoBrowserify.Cipher=j.Cipher,cryptoBrowserify.createCipher=j.createCipher,cryptoBrowserify.Cipheriv=j.Cipheriv,cryptoBrowserify.createCipheriv=j.createCipheriv,cryptoBrowserify.Decipher=j.Decipher,cryptoBrowserify.createDecipher=j.createDecipher,cryptoBrowserify.Decipheriv=j.Decipheriv,cryptoBrowserify.createDecipheriv=j.createDecipheriv,cryptoBrowserify.getCiphers=j.getCiphers,cryptoBrowserify.listCiphers=j.listCiphers;var d=requireBrowser$4();cryptoBrowserify.DiffieHellmanGroup=d.DiffieHellmanGroup,cryptoBrowserify.createDiffieHellmanGroup=d.createDiffieHellmanGroup,cryptoBrowserify.getDiffieHellman=d.getDiffieHellman,cryptoBrowserify.createDiffieHellman=d.createDiffieHellman,cryptoBrowserify.DiffieHellman=d.DiffieHellman;var et=requireBrowser$3();cryptoBrowserify.createSign=et.createSign,cryptoBrowserify.Sign=et.Sign,cryptoBrowserify.createVerify=et.createVerify,cryptoBrowserify.Verify=et.Verify,cryptoBrowserify.createECDH=requireBrowser$2();var at=requireBrowser$1();cryptoBrowserify.publicEncrypt=at.publicEncrypt,cryptoBrowserify.privateEncrypt=at.privateEncrypt,cryptoBrowserify.publicDecrypt=at.publicDecrypt,cryptoBrowserify.privateDecrypt=at.privateDecrypt;var st=requireBrowser();return cryptoBrowserify.randomFill=st.randomFill,cryptoBrowserify.randomFillSync=st.randomFillSync,cryptoBrowserify.createCredentials=function(){throw new Error(`sorry, createCredentials is not implemented yet
we accept pull requests
https://github.com/browserify/crypto-browserify`)},cryptoBrowserify.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6},cryptoBrowserify}(function(o){(function(){var e="input is invalid type",a=typeof window=="object",c=a?window:{};c.JS_SHA256_NO_WINDOW&&(a=!1);var j=!a&&typeof self=="object",d=!c.JS_SHA256_NO_NODE_JS&&typeof process$1=="object"&&process$1.versions&&process$1.versions.node;d?c=commonjsGlobal:j&&(c=self);var et=!c.JS_SHA256_NO_COMMON_JS&&!0&&o.exports,at=!c.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",st="0123456789abcdef".split(""),ct=[-2147483648,8388608,32768,128],ot=[24,16,8,0],gt=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],ft=["hex","array","digest","arrayBuffer"],yt=[];(c.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(Et){return Object.prototype.toString.call(Et)==="[object Array]"}),at&&(c.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(Et){return typeof Et=="object"&&Et.buffer&&Et.buffer.constructor===ArrayBuffer});var vt=function(Et,Rt){return function(Mt){return new At(Rt,!0).update(Mt)[Et]()}},rt=function(Et){var Rt=vt("hex",Et);d&&(Rt=bt(Rt,Et)),Rt.create=function(){return new At(Et)},Rt.update=function(kt){return Rt.create().update(kt)};for(var Mt=0;Mt<ft.length;++Mt){var _t=ft[Mt];Rt[_t]=vt(_t,Et)}return Rt},bt=function(Et,Rt){var Mt=requireCryptoBrowserify(),_t=require$$1$2.Buffer,kt=Rt?"sha224":"sha256",nt;_t.from&&!c.JS_SHA256_NO_BUFFER_FROM?nt=_t.from:nt=function(b){return new _t(b)};var s=function(b){if(typeof b=="string")return Mt.createHash(kt).update(b,"utf8").digest("hex");if(b==null)throw new Error(e);return b.constructor===ArrayBuffer&&(b=new Uint8Array(b)),Array.isArray(b)||ArrayBuffer.isView(b)||b.constructor===_t?Mt.createHash(kt).update(nt(b)).digest("hex"):Et(b)};return s},ht=function(Et,Rt){return function(Mt,_t){return new Ct(Mt,Rt,!0).update(_t)[Et]()}},wt=function(Et){var Rt=ht("hex",Et);Rt.create=function(kt){return new Ct(kt,Et)},Rt.update=function(kt,nt){return Rt.create(kt).update(nt)};for(var Mt=0;Mt<ft.length;++Mt){var _t=ft[Mt];Rt[_t]=ht(_t,Et)}return Rt};function At(Et,Rt){Rt?(yt[0]=yt[16]=yt[1]=yt[2]=yt[3]=yt[4]=yt[5]=yt[6]=yt[7]=yt[8]=yt[9]=yt[10]=yt[11]=yt[12]=yt[13]=yt[14]=yt[15]=0,this.blocks=yt):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Et?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=Et}At.prototype.update=function(Et){if(!this.finalized){var Rt,Mt=typeof Et;if(Mt!=="string"){if(Mt==="object"){if(Et===null)throw new Error(e);if(at&&Et.constructor===ArrayBuffer)Et=new Uint8Array(Et);else if(!Array.isArray(Et)&&(!at||!ArrayBuffer.isView(Et)))throw new Error(e)}else throw new Error(e);Rt=!0}for(var _t,kt=0,nt,s=Et.length,b=this.blocks;kt<s;){if(this.hashed&&(this.hashed=!1,b[0]=this.block,this.block=b[16]=b[1]=b[2]=b[3]=b[4]=b[5]=b[6]=b[7]=b[8]=b[9]=b[10]=b[11]=b[12]=b[13]=b[14]=b[15]=0),Rt)for(nt=this.start;kt<s&&nt<64;++kt)b[nt>>>2]|=Et[kt]<<ot[nt++&3];else for(nt=this.start;kt<s&&nt<64;++kt)_t=Et.charCodeAt(kt),_t<128?b[nt>>>2]|=_t<<ot[nt++&3]:_t<2048?(b[nt>>>2]|=(192|_t>>>6)<<ot[nt++&3],b[nt>>>2]|=(128|_t&63)<<ot[nt++&3]):_t<55296||_t>=57344?(b[nt>>>2]|=(224|_t>>>12)<<ot[nt++&3],b[nt>>>2]|=(128|_t>>>6&63)<<ot[nt++&3],b[nt>>>2]|=(128|_t&63)<<ot[nt++&3]):(_t=65536+((_t&1023)<<10|Et.charCodeAt(++kt)&1023),b[nt>>>2]|=(240|_t>>>18)<<ot[nt++&3],b[nt>>>2]|=(128|_t>>>12&63)<<ot[nt++&3],b[nt>>>2]|=(128|_t>>>6&63)<<ot[nt++&3],b[nt>>>2]|=(128|_t&63)<<ot[nt++&3]);this.lastByteIndex=nt,this.bytes+=nt-this.start,nt>=64?(this.block=b[16],this.start=nt-64,this.hash(),this.hashed=!0):this.start=nt}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},At.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var Et=this.blocks,Rt=this.lastByteIndex;Et[16]=this.block,Et[Rt>>>2]|=ct[Rt&3],this.block=Et[16],Rt>=56&&(this.hashed||this.hash(),Et[0]=this.block,Et[16]=Et[1]=Et[2]=Et[3]=Et[4]=Et[5]=Et[6]=Et[7]=Et[8]=Et[9]=Et[10]=Et[11]=Et[12]=Et[13]=Et[14]=Et[15]=0),Et[14]=this.hBytes<<3|this.bytes>>>29,Et[15]=this.bytes<<3,this.hash()}},At.prototype.hash=function(){var Et=this.h0,Rt=this.h1,Mt=this.h2,_t=this.h3,kt=this.h4,nt=this.h5,s=this.h6,b=this.h7,$=this.blocks,_e,it,pt,mt,lt,_,tt,Tt,It,Nt,Ut;for(_e=16;_e<64;++_e)lt=$[_e-15],it=(lt>>>7|lt<<25)^(lt>>>18|lt<<14)^lt>>>3,lt=$[_e-2],pt=(lt>>>17|lt<<15)^(lt>>>19|lt<<13)^lt>>>10,$[_e]=$[_e-16]+it+$[_e-7]+pt<<0;for(Ut=Rt&Mt,_e=0;_e<64;_e+=4)this.first?(this.is224?(Tt=300032,lt=$[0]-1413257819,b=lt-150054599<<0,_t=lt+24177077<<0):(Tt=704751109,lt=$[0]-210244248,b=lt-1521486534<<0,_t=lt+143694565<<0),this.first=!1):(it=(Et>>>2|Et<<30)^(Et>>>13|Et<<19)^(Et>>>22|Et<<10),pt=(kt>>>6|kt<<26)^(kt>>>11|kt<<21)^(kt>>>25|kt<<7),Tt=Et&Rt,mt=Tt^Et&Mt^Ut,tt=kt&nt^~kt&s,lt=b+pt+tt+gt[_e]+$[_e],_=it+mt,b=_t+lt<<0,_t=lt+_<<0),it=(_t>>>2|_t<<30)^(_t>>>13|_t<<19)^(_t>>>22|_t<<10),pt=(b>>>6|b<<26)^(b>>>11|b<<21)^(b>>>25|b<<7),It=_t&Et,mt=It^_t&Rt^Tt,tt=b&kt^~b&nt,lt=s+pt+tt+gt[_e+1]+$[_e+1],_=it+mt,s=Mt+lt<<0,Mt=lt+_<<0,it=(Mt>>>2|Mt<<30)^(Mt>>>13|Mt<<19)^(Mt>>>22|Mt<<10),pt=(s>>>6|s<<26)^(s>>>11|s<<21)^(s>>>25|s<<7),Nt=Mt&_t,mt=Nt^Mt&Et^It,tt=s&b^~s&kt,lt=nt+pt+tt+gt[_e+2]+$[_e+2],_=it+mt,nt=Rt+lt<<0,Rt=lt+_<<0,it=(Rt>>>2|Rt<<30)^(Rt>>>13|Rt<<19)^(Rt>>>22|Rt<<10),pt=(nt>>>6|nt<<26)^(nt>>>11|nt<<21)^(nt>>>25|nt<<7),Ut=Rt&Mt,mt=Ut^Rt&_t^Nt,tt=nt&s^~nt&b,lt=kt+pt+tt+gt[_e+3]+$[_e+3],_=it+mt,kt=Et+lt<<0,Et=lt+_<<0,this.chromeBugWorkAround=!0;this.h0=this.h0+Et<<0,this.h1=this.h1+Rt<<0,this.h2=this.h2+Mt<<0,this.h3=this.h3+_t<<0,this.h4=this.h4+kt<<0,this.h5=this.h5+nt<<0,this.h6=this.h6+s<<0,this.h7=this.h7+b<<0},At.prototype.hex=function(){this.finalize();var Et=this.h0,Rt=this.h1,Mt=this.h2,_t=this.h3,kt=this.h4,nt=this.h5,s=this.h6,b=this.h7,$=st[Et>>>28&15]+st[Et>>>24&15]+st[Et>>>20&15]+st[Et>>>16&15]+st[Et>>>12&15]+st[Et>>>8&15]+st[Et>>>4&15]+st[Et&15]+st[Rt>>>28&15]+st[Rt>>>24&15]+st[Rt>>>20&15]+st[Rt>>>16&15]+st[Rt>>>12&15]+st[Rt>>>8&15]+st[Rt>>>4&15]+st[Rt&15]+st[Mt>>>28&15]+st[Mt>>>24&15]+st[Mt>>>20&15]+st[Mt>>>16&15]+st[Mt>>>12&15]+st[Mt>>>8&15]+st[Mt>>>4&15]+st[Mt&15]+st[_t>>>28&15]+st[_t>>>24&15]+st[_t>>>20&15]+st[_t>>>16&15]+st[_t>>>12&15]+st[_t>>>8&15]+st[_t>>>4&15]+st[_t&15]+st[kt>>>28&15]+st[kt>>>24&15]+st[kt>>>20&15]+st[kt>>>16&15]+st[kt>>>12&15]+st[kt>>>8&15]+st[kt>>>4&15]+st[kt&15]+st[nt>>>28&15]+st[nt>>>24&15]+st[nt>>>20&15]+st[nt>>>16&15]+st[nt>>>12&15]+st[nt>>>8&15]+st[nt>>>4&15]+st[nt&15]+st[s>>>28&15]+st[s>>>24&15]+st[s>>>20&15]+st[s>>>16&15]+st[s>>>12&15]+st[s>>>8&15]+st[s>>>4&15]+st[s&15];return this.is224||($+=st[b>>>28&15]+st[b>>>24&15]+st[b>>>20&15]+st[b>>>16&15]+st[b>>>12&15]+st[b>>>8&15]+st[b>>>4&15]+st[b&15]),$},At.prototype.toString=At.prototype.hex,At.prototype.digest=function(){this.finalize();var Et=this.h0,Rt=this.h1,Mt=this.h2,_t=this.h3,kt=this.h4,nt=this.h5,s=this.h6,b=this.h7,$=[Et>>>24&255,Et>>>16&255,Et>>>8&255,Et&255,Rt>>>24&255,Rt>>>16&255,Rt>>>8&255,Rt&255,Mt>>>24&255,Mt>>>16&255,Mt>>>8&255,Mt&255,_t>>>24&255,_t>>>16&255,_t>>>8&255,_t&255,kt>>>24&255,kt>>>16&255,kt>>>8&255,kt&255,nt>>>24&255,nt>>>16&255,nt>>>8&255,nt&255,s>>>24&255,s>>>16&255,s>>>8&255,s&255];return this.is224||$.push(b>>>24&255,b>>>16&255,b>>>8&255,b&255),$},At.prototype.array=At.prototype.digest,At.prototype.arrayBuffer=function(){this.finalize();var Et=new ArrayBuffer(this.is224?28:32),Rt=new DataView(Et);return Rt.setUint32(0,this.h0),Rt.setUint32(4,this.h1),Rt.setUint32(8,this.h2),Rt.setUint32(12,this.h3),Rt.setUint32(16,this.h4),Rt.setUint32(20,this.h5),Rt.setUint32(24,this.h6),this.is224||Rt.setUint32(28,this.h7),Et};function Ct(Et,Rt,Mt){var _t,kt=typeof Et;if(kt==="string"){var nt=[],s=Et.length,b=0,$;for(_t=0;_t<s;++_t)$=Et.charCodeAt(_t),$<128?nt[b++]=$:$<2048?(nt[b++]=192|$>>>6,nt[b++]=128|$&63):$<55296||$>=57344?(nt[b++]=224|$>>>12,nt[b++]=128|$>>>6&63,nt[b++]=128|$&63):($=65536+(($&1023)<<10|Et.charCodeAt(++_t)&1023),nt[b++]=240|$>>>18,nt[b++]=128|$>>>12&63,nt[b++]=128|$>>>6&63,nt[b++]=128|$&63);Et=nt}else if(kt==="object"){if(Et===null)throw new Error(e);if(at&&Et.constructor===ArrayBuffer)Et=new Uint8Array(Et);else if(!Array.isArray(Et)&&(!at||!ArrayBuffer.isView(Et)))throw new Error(e)}else throw new Error(e);Et.length>64&&(Et=new At(Rt,!0).update(Et).array());var _e=[],it=[];for(_t=0;_t<64;++_t){var pt=Et[_t]||0;_e[_t]=92^pt,it[_t]=54^pt}At.call(this,Rt,Mt),this.update(it),this.oKeyPad=_e,this.inner=!0,this.sharedMemory=Mt}Ct.prototype=new At,Ct.prototype.finalize=function(){if(At.prototype.finalize.call(this),this.inner){this.inner=!1;var Et=this.array();At.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(Et),At.prototype.finalize.call(this)}};var dt=rt();dt.sha256=dt,dt.sha224=rt(!0),dt.sha256.hmac=wt(),dt.sha224.hmac=wt(!0),et?o.exports=dt:(c.sha256=dt.sha256,c.sha224=dt.sha224)})()})(sha256$2);class InvalidTokenError extends Error{}InvalidTokenError.prototype.name="InvalidTokenError";if(typeof Promise>"u")throw Error("Keycloak requires an environment that supports Promises. Make sure that you include the appropriate polyfill.");/*! js-cookie v3.0.5 | MIT */function assign(o){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var c in a)o[c]=a[c]}return o}var defaultConverter={read:function(o){return o[0]==='"'&&(o=o.slice(1,-1)),o.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(o){return encodeURIComponent(o).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function init(o,e){function a(j,d,et){if(!(typeof document>"u")){et=assign({},e,et),typeof et.expires=="number"&&(et.expires=new Date(Date.now()+et.expires*864e5)),et.expires&&(et.expires=et.expires.toUTCString()),j=encodeURIComponent(j).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var at="";for(var st in et)et[st]&&(at+="; "+st,et[st]!==!0&&(at+="="+et[st].split(";")[0]));return document.cookie=j+"="+o.write(d,j)+at}}function c(j){if(!(typeof document>"u"||arguments.length&&!j)){for(var d=document.cookie?document.cookie.split("; "):[],et={},at=0;at<d.length;at++){var st=d[at].split("="),ct=st.slice(1).join("=");try{var ot=decodeURIComponent(st[0]);if(et[ot]=o.read(ct,ot),j===ot)break}catch{}}return j?et[j]:et}}return Object.create({set:a,get:c,remove:function(j,d){a(j,"",assign({},d,{expires:-1}))},withAttributes:function(j){return init(this.converter,assign({},this.attributes,j))},withConverter:function(j){return init(assign({},this.converter,j),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(o)}})}var api=init(defaultConverter,{path:"/"});const getAuthToken=()=>api.get("authToken");class Http{static async get(e){const a=await getAuthToken(),c={};a&&(c.Authorization=`Bearer ${a}`);const j=await fetch(e,{headers:c}),d=await j.json();return{status:j.status,data:d}}static async post(e,a){const c=await getAuthToken(),j={"Content-Type":"application/json"};c&&(j.Authorization=`Bearer ${c}`);const d=await fetch(e,{method:"POST",headers:j,body:JSON.stringify(a)}),et=await d.json();return{status:d.status,data:et}}static async del(e,a){const c=await getAuthToken(),j={"Content-Type":"application/json"};c&&(j.Authorization=`Bearer ${c}`);const d=await fetch(e,{method:"DELETE",headers:j,body:JSON.stringify(a)});if(!d.ok)return{status:d.status};const et=await d.text();return et?{detail:et,status:d.status}:{status:d.status}}}async function getStreamingSessions(o){const e=`${o}/streaming/stream`;return await Http.get(e)}async function getStreamingSessionInfo(o,e){const a=`${o}/streaming/stream/${e}`;return await Http.get(a)}async function createStreamingSession(o,e,a,c,j){const d=`${o}/streaming/stream`;console.log(`Requesting session with asset url: ${j}`);const et={arguments:{usd_stage_uri:j??""},id:e,version:a,profile:c};return await Http.post(d,et)}async function destroyStreamingSession(o,e){const a=`${o}/streaming/stream`,c={id:e};return await Http.del(a,c)}const ServiceComponent=()=>{const o=useDispatch(),e=useSelector(gt=>gt.service.sessionService),a=useSelector(gt=>gt.service.appId),c=useSelector(gt=>gt.service.version),j=useSelector(gt=>gt.service.profile),d=useSelector(gt=>gt.service.sessionId),et=useSelector(gt=>gt.usdStorage.url),at=async()=>{console.log(`Requesting streaming session from ${e.address}`),et&&o(setLoadingState("loading"));const gt=await createStreamingSession(e.address,a,c,j,et);if(gt.status>400){o(setStatus$1(gt.status)),console.log({connectionText:`Failed to create a new streaming session for ${a} ${c}. Error code ${gt.status}`,loadingText:"Failed to create stream"});return}o(setSessionId(gt.data.id)),o(setStatus$1(gt.status)),gt.status===202?await st(gt.data.id):ct(gt.data)},st=async gt=>{console.log(`Polling ${gt}`);const ft=await getStreamingSessionInfo(e.address,gt);if(ft.status===200){ct(ft.data),o(setStatus$1(ft.status));return}setTimeout(()=>st(gt),6e4)},ct=gt=>{console.log("Applying stream configuration.");const ft=Object.keys(gt.routes)[0],yt=gt.routes[ft].routes,vt=yt.find(bt=>bt.description==="signaling"),rt=yt.find(bt=>bt.description==="media");if(!vt||!rt){console.error("Signaling or media data is missing");return}o(setRemoteStream({signalingserver:ft,signalingport:vt.source_port,mediaserver:ft,mediaport:rt.source_port,accessToken:"invalid-token",sessionid:gt.id}))},ot=async gt=>{console.log(`Destroying session ${gt}`);const ft=await destroyStreamingSession(e.address,gt);o(setSessionId("")),o(setStatus$1(0)),o(setServer("")),console.log(ft)};return reactExports.useEffect(()=>{e.address&&(e.desiredState==="connected"&&!d?at():e.desiredState==="destroyed"&&d&&ot(d))},[e,d]),null};var dist={exports:{}};/*! For license information please see index.js.LICENSE.txt */(function(o,e){(function(a,c){o.exports=c()})(commonjsGlobal,()=>(()=>{var a={355:function(et,at,st){var ct=this&&this.__createBinding||(Object.create?function(gt,ft,yt,vt){vt===void 0&&(vt=yt);var rt=Object.getOwnPropertyDescriptor(ft,yt);rt&&!("get"in rt?!ft.__esModule:rt.writable||rt.configurable)||(rt={enumerable:!0,get:function(){return ft[yt]}}),Object.defineProperty(gt,vt,rt)}:function(gt,ft,yt,vt){vt===void 0&&(vt=yt),gt[vt]=ft[yt]}),ot=this&&this.__exportStar||function(gt,ft){for(var yt in gt)yt==="default"||Object.prototype.hasOwnProperty.call(ft,yt)||ct(ft,gt,yt)};Object.defineProperty(at,"__esModule",{value:!0}),ot(st(11),at)},11:(et,at)=>{Object.defineProperty(at,"__esModule",{value:!0}),at.LogImpl=void 0;class st{constructor(ot,gt){this.module=ot,this.enabled=!0,this.shouldLogToConsole=!1,this.queue=[],gt&&(gt.enable!==void 0&&(this.enabled=gt.enable),gt.enableConsoleLogging!==void 0&&(this.shouldLogToConsole=gt.enableConsoleLogging)),this._nop=(ft,yt,...vt)=>{},this._d=(ft,yt,...vt)=>this.handleLog("DEBUG",ft,yt,vt),this._i=(ft,yt,...vt)=>this.handleLog("INFO",ft,yt,vt),this._w=(ft,yt,...vt)=>this.handleLog("WARN",ft,yt,vt),this._e=(ft,yt,...vt)=>this.handleLog("ERROR",ft,yt,vt)}get d(){return this.enabled?this.shouldLogToConsole?console.debug.bind(console,"%s DEBUG [%s] %s@@",this.renderDate(new Date)):this._d:this._nop}get w(){return this.enabled?this.shouldLogToConsole?console.warn.bind(console,"%s WARN  [%s] %s@@",this.renderDate(new Date)):this._w:this._nop}get i(){return this.enabled?this.shouldLogToConsole?console.info.bind(console,"%s INFO  [%s] %s@@",this.renderDate(new Date)):this._i:this._nop}get e(){return this.shouldLogToConsole?console.error.bind(console,"%s ERROR [%s] %s@@",this.renderDate(new Date)):this._e}setLogCallback(ot){this.callback=ot,this.callback&&this.queue.length&&window.setTimeout(()=>{this.executeLogCallback(!0)})}isCallbackRegistered(){return!!this.callback}sanitize(ot){if(!ot)return ot;const gt=[{secretBlock:/(partnerCustomData" *: *")((\\"|[^"])*)(?=")/g,replaceStr:"$1***"},{secretBlock:/("clientIp" *: *")(\b\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})(?=")/g,replaceStr:"$1***"}];for(const ft of gt)ot=ot.replace(ft.secretBlock,ft.replaceStr);return ot}stringifyArgs(...ot){return ot.length?`##${JSON.stringify(ot)}`:""}executeLogCallback(ot){this.callback&&this.queue.length&&(this.callback(this.queue[0]),this.queue.shift(),ot&&this.queue.length&&window.setTimeout(()=>{this.executeLogCallback(!0)}))}handleLog(ot,gt,ft,yt){let vt=`${ft}${this.stringifyArgs(...yt)}`,rt={timestamp:this.renderDate(new Date),level:ot,tag:this.module+"/"+gt,message:vt};this.queue.push(rt),this.callback?window.setTimeout(()=>{this.executeLogCallback(!1)}):this.queue.length>st.MAX_QUEUE_SIZE&&this.queue.shift()}renderDate(ot){const gt=(yt,vt,rt)=>{const bt=vt-yt.length;if(bt>0){let ht="";for(let wt=0;wt<bt;wt++)ht+=rt;return ht+=yt,ht}return yt};let ft="";return ft=gt(ot.getFullYear().toString(),4,"0")+"-"+gt((ot.getMonth()+1).toString(),2,"0")+"-"+(yt=>gt(yt.getDate().toString(),2,"0"))(ot)+" "+(yt=>gt(yt.getHours().toString(),2,"0"))(ot)+":"+(yt=>gt(yt.getMinutes().toString(),2,"0"))(ot)+":"+(yt=>gt(yt.getSeconds().toString(),2,"0"))(ot)+"."+(yt=>gt(yt.getMilliseconds().toString(),3,"0"))(ot),ft}}at.LogImpl=st,st.MAX_QUEUE_SIZE=50},271:(et,at,st)=>{(()=>{var ct={393:(yt,vt,rt)=>{var bt=!0,ht=!1;function wt(h){if(h)switch(h){case"enable":case"on":case"1":case"true":return!0;case"disable":case"off":case"0":case"false":return!1}}var At=rt(778),Ct=rt(754),dt=new At.LogImpl("R",{enable:bt,Sg:ht});function Et(){return Mt||(Mt=new _t),Mt}function Rt(h,ut,St){const xt=h.g.startSpan(ut);return Ct.context.with(Ct.trace.setSpan(Ct.context.active(),xt),async()=>{try{const Ot=St();return Ot instanceof Promise?await Ot:Ot}finally{xt.end()}})}var Mt,_t=class{constructor(){this.g=Ct.trace.getTracer("gfn-web-gamestream","2.0")}},kt=class{constructor(h,ut){var St;this.g=0,this.h=this.o=!1,this.promise=new Promise((xt,Ot)=>{this.C=xt,this.m=Ot}),ut!=null&&ut.aborted?(this.h=!0,this.m()):(this.j=ut,this.l=this.s.bind(this),(St=this.j)===null||St===void 0||St.addEventListener("abort",this.l),this.g=window.setTimeout(this.v.bind(this),h))}cancel(){var h;(h=this.j)===null||h===void 0||h.removeEventListener("abort",this.l),this.g&&(window.clearTimeout(this.g),this.g=0),this.j=void 0}s(){this.h=!0,this.m(),this.cancel()}v(){this.o=!0,this.C(),this.g=0,this.cancel()}};function nt(h){return h.os==="Xbox"&&h.browser==="Edge"}function s(h){return h.os==="iOS"||h.os==="iPadOS"}function b(h){return!!/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(h)}function $(h){return"0x"+("00000000"+(h>>>0).toString(16).toUpperCase()).slice(-8)}function _e(h){return h?h.os==="iOS":/iPhone|iPod/.test(navigator.userAgent)}function it(h){return h.os==="WebOS"}function pt(h){return h.os==="ChromeOS"}function mt(h){return h.os==="Windows"}function lt(h){return h.os==="macOS"}function _(h){return h.os==="Tizen"}var tt={method:"GET",headers:{},body:"",retryCount:0,timeout:0,keepalive:!1};function Tt(){const h=Ct.trace.getActiveSpan();h&&h.setAttribute("error","true")}function It(h,ut=tt,St,xt){var Ot;const Vt=(Ot=ut.method)!==null&&Ot!==void 0?Ot:"GET";return Rt(Et(),Vt,()=>{var Dt=ut.headers;const Ft=Ct.trace.getActiveSpan();if(Ft){var Qt=new Map([["component","rtcutils-core"],["component.version","2.0"],["http.method",Vt],["http.url",h],["type",""],["http.hostname",""],["http.path",""]]);try{const rr=new URL(h);Qt.set("type",rr.protocol),Qt.set("http.hostname",rr.hostname),Qt.set("http.path",rr.pathname)}catch{dt.e("{d988e7f}","{997fb3a}")}for(const[rr,nr]of Qt)Ft.setAttribute(rr,nr);Ft.setAttributes(Dt)}return function(rr,nr=tt,lr,Yt){var dr,ir;let Xt=nr.retryCount===void 0?1:nr.retryCount+1;const br=Xt,Tr=(dr=nr.hg)!==null&&dr!==void 0?dr:500;let Sr=Tr;const Mr=(ir=nr.method)!==null&&ir!==void 0?ir:"GET";let gr=new Headers;const _r=Yt??new AbortController;return(Er=>{if(Er)switch(Er.type){case 1:Er.token&&gr.set("authorization","GFNJWT "+Er.token);break;case 2:Er.token&&gr.set("authorization","GFNPartnerJWT auth="+Er.token)}nr.headers!==void 0&&Object.keys(nr.headers).forEach(cr=>{gr.set(cr,nr.headers[cr])}),Er={},Ct.propagation.inject(Ct.context.active(),Er);for(const[cr,kr]of Object.entries(Er))gr.set(cr,kr)})(lr),new Promise((Er,cr)=>{const kr=mn=>{Tt(),cr(mn)},Wr=()=>{if(navigator.onLine){let mn,vn={method:Mr,headers:gr,mode:"cors",keepalive:nr.keepalive,signal:_r.signal,cache:"no-store"};Mr!=="GET"&&Mr!=="HEAD"&&(vn.body=nr.body);const Pn=[0,DOMException.NETWORK_ERR,DOMException.TIMEOUT_ERR,503],Gn=nr.timeout?new kt(nr.timeout):void 0,sn=[];sn.push(fetch(rr,vn)),Gn&&sn.push(Gn.promise),Promise.race(sn).then(kn=>{if(Gn!=null&&Gn.o)throw dt.w("{d988e7f}","{5a69b89}",rr),{code:DOMException.TIMEOUT_ERR,message:"Timeout while performing HTTP request"};if(kn instanceof globalThis.Response)return mn=kn.status,kn.text()}).then(kn=>{if(!kn&&Pn.includes(mn)){if(1<Xt)throw{code:mn,message:"Internal server error."};dt.w("{d988e7f}","{d639e52}",mn,br)}var Fn=(kn={status:mn,data:kn??"",Kc:br-Xt}).status;const Tn=Ct.trace.getActiveSpan();Tn&&(Tn.setAttribute("error","false"),Tn.setAttribute("http.status_code",Fn.toString())),Er(kn)}).catch(kn=>{const Fn=Tn=>[0,DOMException.NETWORK_ERR,DOMException.TIMEOUT_ERR].includes(Tn)?(dt.d("{d988e7f}","{0a9fabe}"),3237089282):Tn==DOMException.ABORT_ERR?(dt.d("{d988e7f}","{235387a}"),15867905):(dt.w("{d988e7f}","{f116c88}",Tn),3237089284);kn instanceof Error?dt.d("{d988e7f}","{b6e778a}",kn.message):dt.d("{d988e7f}","{ec768a1}",JSON.stringify(kn),kn),(kn=(Tn=>{let so=0;return Tn!=null&&Tn.code?so=Tn==null?void 0:Tn.code:Tn!=null&&Tn.name&&(Tn.name==="AbortError"?so=DOMException.ABORT_ERR:Tn.name==="NetworkError"?so=DOMException.NETWORK_ERR:Tn.name==="TimeoutError"&&(so=DOMException.TIMEOUT_ERR)),so})(kn))==0&&nr.keepalive&&(nr.keepalive=!1),Pn.includes(kn)?(Tn=>{if(1<Xt){Xt--,dt.d("{d988e7f}","{97555ed}",Tn,Xt);const so=new kt(Sr,_r.signal);return so.promise.then(Wr).catch(no=>{so.h?(no={code:15867905,Kc:br-Xt},Tt(),cr(no)):(dt.w("{d988e7f}","{d3ca39d}",JSON.stringify(no)),no={code:3237089284,Kc:br-Xt},Tt(),cr(no))}),Sr+=Tr,!0}return!1})(kn)||(dt.w("{d988e7f}","{dff1a05}",br,kn),kr({code:Fn(kn),Kc:br-Xt})):kr({code:Fn(kn),Kc:br-Xt})}).finally(()=>{Gn==null||Gn.cancel()})}else kr({code:3237089281,description:"No network",Kc:br-Xt})};Wr()})}(h,ut,St,xt)})}function Nt(){var h,ut;return(ut=(h=window.matchMedia)===null||h===void 0?void 0:h.call(window,"(pointer:coarse)"))===null||ut===void 0?void 0:ut.matches}function Ut(){var h,ut;return!!window.TouchEvent&&((ut=(h=window.matchMedia)===null||h===void 0?void 0:h.call(window,"(any-pointer:coarse)"))===null||ut===void 0?void 0:ut.matches)}function Gt(h){return h.os==="Tizen"||h.os==="WebOS"}function Pt(){let h=new Uint8Array(36);window.crypto.getRandomValues(h);let ut="";for(let St=0;36>St;St++){let xt=h[St]%16;St==8||St==13||St==18||St==23?ut+="-":St==14?ut+="4":(St==19&&(xt=3&xt|8),ut+=xt.toString(16))}return dt.i("{d988e7f}","{534eaf4}",ut),ut}function qt(h,ut){for(let St=0;St<ut.length&&St<h.length;++St){const xt=h[St],Ot=ut[St];if(xt>Ot)return!0;if(xt<Ot)return!1}if(h.length<ut.length){for(h=h.length;h<ut.length;++h)if(0<ut[h])return!1}return!0}function Kt(h,ut,St,xt,Ot){if(h.browser!="Chrome")return!1;ut=[ut,St??0,xt??0,Ot??0];try{return qt(h.browserBestVer.split(".").map(Vt=>Number.parseInt(Vt)),ut)}catch{dt.w("{d988e7f}","{bcd8f94}")}return!0}function jt(h,ut,St,xt){if(!s(h))return!1;try{return Ht(h.osVer,ut,St,xt)}catch{dt.w("{d988e7f}","{cf4149f}")}return!ut}function Ht(h,ut,St,xt){h=h.replace(/[^0-9.]/,"").split(".").map(Vt=>Number.parseInt(Vt));const Ot=[St,xt??0];return h.length===1&&h.push(0),ut?h.every((Vt,Dt)=>Vt===Ot[Dt]):qt(h,Ot)}function Bt(h,ut=500){const St=new AbortController;return window.setTimeout(()=>{St.abort()},ut),fetch(h,{method:"OPTIONS",signal:St.signal}).then(xt=>xt).catch(xt=>{throw xt})}function Jt(h,ut,St){return{code:h,description:ut,error:St!==null?St:void 0}}function sr(h){switch(h){case"ETHERNET":return"ETHERNET";case"WIFI":case"WIFI_2_4":return"WIFI_2_4";case"WIFI_5_0":return"WIFI_5_0";case"MOBILE":return"MOBILE";case"MOBILE_2G":return"MOBILE_2G";case"MOBILE_3G":return"MOBILE_3G";case"MOBILE_4G":return"MOBILE_4G";case"MOBILE_5G":return"MOBILE_5G";case"OTHER":case"BLUETOOTH":case"WIMAX":return"OTHER";default:return"UNKNOWN"}}function hr(h){return h.replace(/(partnerCustomData" *: *")((\\"|[^"])*)(?=")/g,"$1***")}var Ar=class{constructor(h){this.s=new Map,this.sa=h}addListener(h,ut){var St=this.s.get(h);St!==void 0?St.add(ut):((St=new Set).add(ut),this.s.set(h,St))}removeListener(h,ut){(h=this.s.get(h))==null||h.delete(ut)}removeAllListenersOfEvent(h){this.s.delete(h)}removeAllListeners(){this.s.clear()}hasListener(h){return(h=this.s.get(h))!==void 0&&0<h.size}emit(h,...ut){try{let St=this.s.get(h);if(St)for(const xt of St)this.sa?xt(...ut):window.setTimeout(xt,0,...ut)}catch(St){console.log("Exception in emit: "+St)}}};function gn(h,ut){var St=Br,xt=Gr;let Ot=[];var Vt=h;let Dt=[];do Dt.push(Vt),Vt=Object.getPrototypeOf(Vt);while(Vt.name!="");Dt.reverse();for(let Ft of Dt)Ot.push(Ft.toString().replace(/(extends )[^ {]*\.([^ ]*[ {])/,"$1$2"));return Ot.push(`${St.toString()}`),ut?(Ot.push(`${ut.toString()}`),Ot.push(`onconnect = (event) => { ${ut.name}(${h.name}, event, ${St.name}); };`)):Ot.push(`onmessage = (event) => { ${St.name}(${h.name}, event); };`),Ot.push(`${xt.toString()}`),Ot.push(`onerror = (event) => { ${xt.name}(event); };`),URL.createObjectURL(new Blob(Ot,{type:"text/javascript"}))}function Lr(h,ut,St){if(!h.prototype.nb)throw Error("Invalid Worker class provided");h=gn(h);const xt=new Worker(h);URL.revokeObjectURL(h),Qr(xt,ut,St)}function wr(h,ut,St){var xt=window;if(xt.SharedWorker===void 0)throw Error("SharedWorker not supported");if(!h.prototype.nb)throw Error("Invalid Worker class provided");return h=gn(h,Dn),xt=new xt.SharedWorker(h),URL.revokeObjectURL(h),Qr(xt,ut,St),xt}const En=new Map;function Dr(h){if(!En.has(h)){h.postMessage.bind(h)({Rb:2,data:null});var ut=window.setTimeout(()=>{const St=En.get(h);St&&(clearTimeout(St),En.delete(h)),h instanceof Worker?h.terminate():h instanceof MessagePort&&h.close()},150);En.set(h,ut)}}function Qr(h,ut,St){const xt="port"in h?h.port:h,Ot=xt.postMessage.bind(xt);let Vt=!1;const Dt=Ft=>{Vt||(Vt=!0,dt.e("{10ca8e2}","{03baf25}",Ft,typeof Ft),Dr(xt),St(Ft))};xt.onmessage=Ft=>{let Qt=(Ft=Ft.data).data;switch(Ft.Rb){case 1:Ot({Rb:3,data:null});break;case 4:ut(Qt),Dr(xt);break;case 5:Dt(Qt)}},"onmessageerror"in xt&&(xt.onmessageerror=Dt),h.onerror=Dt,Ot({Rb:0,data:null})}function Dn(h,ut,St){const xt=globalThis;xt.port=ut.ports[0],xt.port.onmessage=St.bind(self,h)}function Br(h,ut){var St;const xt=globalThis;xt.Od=(St=xt.Od)!==null&&St!==void 0?St:{},ut=(St=ut.data).Rb,St=St.data;let Ot="port"in xt?xt.port:self;switch(ut){case 0:var Vt=new h;xt.Od[h.name]=Vt,Ot.postMessage({Rb:1,data:null});break;case 2:(Vt=self==null?void 0:self.close)===null||Vt===void 0||Vt.call(self);break;case 3:Promise.resolve(xt.Od[h.name].nb()).then(Dt=>{Ot.postMessage({Rb:4,data:Dt})});break;default:throw Error(`Unknown message: ${ut}:${St}`)}}function Gr(h){const ut=globalThis;("port"in ut?ut.port:self).postMessage({Rb:5,data:h})}function Ln(h){return h.start=performance.now(),new Promise(ut=>{h.Kf?ut(h.u):async function(St){var xt=Promise,Ot=xt.all,Vt=function(Xt){return new Promise(br=>{let Tr=!1;const Sr=cr=>{if(Xt.ka)clearTimeout(Xt.ka),Xt.ka=0;else if(Tr)return dt.w("{3c72abb}","{c1bb269}"),void Wt(Xt,"GL",Xt.De-performance.now());if(!Xt.rc){var kr=cr.Qf;if(kr.startsWith("ANGLE")){var Wr=kr.split(",");1<(Wr==null?void 0:Wr.length)&&(Xt.gpuDetail=Wr[1].trim())}else Xt.gpuDetail=kr;Wr=kr.toLowerCase(),kr.includes("SraKmd")?(Xt.I=!0,kr.includes("SraKmd_arden")&&(Xt.Da=!0),(kr=/D3D11-(\d{2,}\.\d{1,}\.\d{5,}\.\d{4,})/.exec(kr))&&1<kr.length&&(Xt.v=kr[1])):kr.includes("AMD")&&Wr.includes("vangogh")&&(Xt.Bb=!0),Xt.Fe=cr.Gf,Xt.rc=!0}br()};let Mr=!1,gr=!1;const _r=cr=>{typeof cr=="string"?Lt(Xt,"GL",cr):"data"in cr?zt(Xt,"GL",cr):Zt(Xt,"GL",cr),gr=!0,dt.e("{3c72abb}","{9e45306}",cr)};let Er=0;try{self.OffscreenCanvas&&(Mr=!0,Lr(on,Sr,_r),Er=150)}catch(cr){gr=!0,ar(Xt,"GL",cr),dt.w("{3c72abb}","{caf8cd7}",cr)}window.setTimeout(()=>{Xt.rc||(Xt.ka=window.setTimeout(()=>{Xt.ka=0,Xt.De=performance.now(),gr?dt.w("{3c72abb}","{fbe663c}"):Mr?(dt.w("{3c72abb}","{2577061}"),Or(Xt,"GL")):(dt.i("{3c72abb}","{95c252e}"),vr(Xt,"GL"));const cr=new on().nb();Sr(cr),Tr=!0},Er))},0)})}(St),Dt=function(Xt){return new Promise(br=>{if(navigator.userAgentData){var Tr=Er=>{Er&&(Xt.sa&&(clearTimeout(Xt.sa),Xt.sa=0),(cr=>{var kr;if(!Xt.Rf){var Wr=cr.model,mn=cr.platform,vn=cr.platformVersion,Pn=cr.uaFullVersion,Gn=cr.bitness;Wr==""&&mn==""&&vn==""&&Pn==""?Xt.lb&&Xt.R||Xt.Ka||Gn==null||Xt.R&&!Xt.$||(Xt.o=!0):Gn==""&&mn!="Android"&&(Xt.o=!0),Wr&&(Wr==="Xbox"?Xt.ca=!0:Wr.startsWith("AFT")?(Xt.ef=!0,Xt.N=!0):Wr.includes("BRAVIA")?(Xt.N=!0,Xt.Ye=!0):Wr==="Chromecast"?(Xt.N=!0,Xt.cf=!0,Xt.deviceName="CHROMECAST"):Wr==="SHIELD Android TV"?(Xt.N=!0,Xt.mf=!0,Xt.deviceName="SHIELDTV"):Wr.startsWith("MiTV")?(Xt.N=!0,Xt.hf=!0,Xt.deviceName="MITV"):Wr.startsWith("TVision")&&(Xt.N=!0,Xt.uf=!0,Xt.deviceName="TVISION")),mn==="Windows"?Xt.P=!0:mn==="macOS"?Xt.L=!0:mn==="Chrome OS"||mn==="ChromeOS"?Xt.O=!0:mn==="Chromium OS"?Xt.ea=!0:mn==="Android"?Xt.da=!0:mn==="Linux"&&(vn==""?(Xt.da=!0,Xt.vf=!0):Xt.na=!0),Wr=sn=>{if(sn&&typeof sn=="string")return sn.replace(/[-._,:;|#@]/g,".")},mn=sn=>Xt.P&&!Xt.ca?(kn=>{if(!kn||!Xt.qa||95>+Xt.qa)return kn;switch(kn.split(".").map(Fn=>Number.parseInt(Fn))[0]){case 0:return"8-";case 1:return"10.0.10240";case 2:return"10.0.10586";case 3:return"10.0.14393";case 4:return"10.0.15063";case 5:return"10.0.16299";case 6:return"10.0.17134";case 7:return"10.0.17763";case 8:return"10.0.18362+";case 9:return"10.0.9";case 10:return"10.0.19041+";case 11:return"10.0.11";case 12:return"10.0.12";case 13:return"11.0.0";case 14:return"11.0.22000.0";case 15:return"11.0.22621.0";default:return"11.0.22621.0+"}})(sn):sn,cr.brands&&0<cr.brands.length&&function(sn,kn){var Fn;sn.ra=!0,kn.mobile&&(sn.Cb=!0);var Tn=kn.brands||[];kn=0;for(const so of Tn){Tn=so.brand;const no=so.version;Tn==="Google Chrome"?(sn.ta=!0,sn.m=no):Tn==="Microsoft Edge"?(sn.$a=!0,sn.m=no):Tn==="Opera"?(sn.ua=!0,sn.m=no):Tn==="Yandex"?(sn.ab=!0,sn.m=no):Tn==="Chromium"?(sn.Z=!0,sn.m=(Fn=sn.m)!==null&&Fn!==void 0?Fn:no,sn.qa=no):Tn==="Android WebView"?(sn.Je=!0,sn.m=no):kn++}2<kn&&(sn.He=!0)}(Xt,cr),Xt.browserFullVer=Wr(Pn),Xt.sg=vn,Xt.v=(kr=Xt.v)!==null&&kr!==void 0?kr:mn(Wr(vn)),Xt.Rf=!0}})(Er),br())},Sr=!1,Mr=!1,gr=0;try{if(self.SharedWorker){Sr=!0;var _r=wr(Xn,Tr,Er=>{typeof Er=="string"?Lt(Xt,"HE",Er):"data"in Er?zt(Xt,"HE",Er):Zt(Xt,"HE",Er),Mr=!0,dt.e("{3c72abb}","{217e106}",Er)});gr=300}}catch(Er){Mr=!0,dt.w("{3c72abb}","{a583546}",Er),ar(Xt,"HE",Er)}Xt.sa=window.setTimeout(()=>{_r&&Dr("port"in _r?_r.port:_r),Mr?dt.w("{3c72abb}","{dbf4b42}"):Sr?(dt.w("{3c72abb}","{0bf7a38}"),Or(Xt,"HE"),Xt.Ze=!0):(dt.i("{3c72abb}","{7a82b59}"),vr(Xt,"HE")),new Xn().nb().then(Er=>{Tr(Er)})},gr)}else br()})}(St),Ft=async function(Xt){Xt.uc=!!window.chrome&&await async function(){if(!window.createImageBitmap)return!1;const br=await fetch("data:image/avif;base64,AAAAGGZ0eXBhdmlmAAAAAGF2aWZtaWYxAAADm21ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAHBpY3QAAAAAAAAAAAAAAAAAAAAADnBpdG0AAAAAAAEAAAAiaWxvYwAAAABEQAABAAEAAAAAA7sAAQAAAAAAAAAjAAAAI2lpbmYAAAAAAAEAAAAVaW5mZQIAAAAAAQAAYXYwMQAAAAMbaXBycAAAAvxpcGNvAAACrGNvbHJwcm9mAAACoGxjbXMEMAAAbW50clJHQiBYWVogB+UACAAJAAsAEAAFYWNzcE1TRlQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPbWAAEAAAAA0y1sY21zAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANZGVzYwAAASAAAABAY3BydAAAAWAAAAA2d3RwdAAAAZgAAAAUY2hhZAAAAawAAAAsclhZWgAAAdgAAAAUYlhZWgAAAewAAAAUZ1hZWgAAAgAAAAAUclRSQwAAAhQAAAAgZ1RSQwAAAhQAAAAgYlRSQwAAAhQAAAAgY2hybQAAAjQAAAAkZG1uZAAAAlgAAAAkZG1kZAAAAnwAAAAkbWx1YwAAAAAAAAABAAAADGVuVVMAAAAkAAAAHABHAEkATQBQACAAYgB1AGkAbAB0AC0AaQBuACAAcwBSAEcAQm1sdWMAAAAAAAAAAQAAAAxlblVTAAAAGgAAABwAUAB1AGIAbABpAGMAIABEAG8AbQBhAGkAbgAAWFlaIAAAAAAAAPbWAAEAAAAA0y1zZjMyAAAAAAABDEIAAAXe///zJQAAB5MAAP2Q///7of///aIAAAPcAADAblhZWiAAAAAAAABvoAAAOPUAAAOQWFlaIAAAAAAAACSfAAAPhAAAtsRYWVogAAAAAAAAYpcAALeHAAAY2XBhcmEAAAAAAAMAAAACZmYAAPKnAAANWQAAE9AAAApbY2hybQAAAAAAAwAAAACj1wAAVHwAAEzNAACZmgAAJmcAAA9cbWx1YwAAAAAAAAABAAAADGVuVVMAAAAIAAAAHABHAEkATQBQbWx1YwAAAAAAAAABAAAADGVuVVMAAAAIAAAAHABzAFIARwBCAAAADGF2MUOBDQwAAAAAFGlzcGUAAAAAAAAAEAAAABAAAAAoY2xhcAAAAAEAAAABAAAAAQAAAAH////xAAAAAv////EAAAACAAAAF2lwbWEAAAAAAAAAAQABBIGCA4QAAAArbWRhdBIACgkfzP/IIEBA0oAyFGW+OwPr0bIHHHHBATZPtaQ3RWTA").then(Tr=>Tr.blob());return createImageBitmap(br).then(()=>!0,()=>!1)}()}(St),Qt=function(Xt){const br=window.speechSynthesis;if(br){const Tr=br.getVoices;let Sr=(Tr==null?void 0:Tr.call(br))||[];return new Promise(Mr=>{if(!Tr||Sr.length)Fr(Xt,Sr),Mr();else{let gr=0;const _r=()=>{Sr=Tr.call(br);const Er=performance.now();Sr.length==0&&(gr==0||600>Er-gr)?(Xt.T&&clearTimeout(Xt.T),Xt.T=window.setTimeout(_r,150)):(Xt.T&&(clearTimeout(Xt.T),Xt.T=0),Fr(Xt,Sr),Mr())};br.onvoiceschanged!==void 0&&(br.onvoiceschanged=_r),window.setTimeout(()=>{Sr=Tr.call(br),Sr.length?_r():(Xt.T=window.setTimeout(_r,150),gr=performance.now())},0)}})}return new Promise(Tr=>{Tr()})}(St),rr=function(Xt){return new Promise(br=>{var Tr=navigator.userAgent;Tr&&(Tr=Tr.match(Xt.ze))&&(Xt.rg=Tr==null?void 0:Tr[1],Xt.mg=Tr==null?void 0:Tr[2]),br()})}(St),nr=function(Xt){var br,Tr,Sr,Mr,gr,_r,Er,cr,kr,Wr,mn,vn,Pn,Gn;const sn=window,kn=sn.hasOwnProperty,Fn=sn.navigator;kn.call(sn,"MSMediaKeys")?Xt.Le=!0:kn.call(sn,"_firefoxTV_cachedScrollPosition")?Xt.Ne=!0:sn.__edgeActiveElement!==void 0||sn.__edgeTrackingPreventionStatistics?Xt.bb=!0:sn.safari?Xt.Ve=!0:sn.opr?Xt.Pe=!0:sn.oprt?Xt.ge=!0:Fn.brave?Xt.va=!0:sn.OperaTouch!==void 0||sn.ethereum?(Xt.lb=!0,Xt.R=!0):sn.yandex?Xt.ya=!0:sn.QuickAccess?Xt.xa=!0:sn.chrome?Xt.$=!0:sn.netscape?Xt.wa=!0:sn.__firefox__?Xt.cb=!0:sn.__gCrWeb?Xt.Va=!0:sn.ReactNativeWebView&&(Xt.Re=!0),sn.contacts!==void 0||sn.ContactsManager!==void 0?Xt.R=!0:kn.call(sn,"onwebOSAccessibilityAlertDone")||sn.webOSSystem||kn.call(sn,"onwebosaccessibilityalertdone")?Xt.Af=!0:sn.tizen||sn.TizenTVApiInfo||sn.addEdgeEffectONSCROLLTizenUIF||sn.tizentvwasm?Xt.Ka=!0:sn.HardkeyEvent&&(Xt.xf=!0);const Tn=sn.Intl;(br=Fn.mediaCapabilities)!==null&&br!==void 0&&br.decodingInfo&&(Xt.pe=!0),sn.BigInt&&(Xt.fg=!0,sn.BigInt64Array&&(Xt.ie=!0)),sn.PerformanceNavigationTiming&&(Xt.Ae=!0),sn.WebAssembly&&sn.WebAssembly.Exception&&(Xt.Me=!0),sn.BroadcastChannel&&(Xt.je=!0),sn.GPUBuffer&&(Xt.te=!0),sn.SharedWorker&&(Xt.Ge=!0),sn.MediaRecorder&&(Xt.xe=!0),sn.CSSCounterStyleRule&&(Xt.ke=!0),(br=(Tr=sn.ArrayBuffer)===null||Tr===void 0?void 0:Tr.prototype)!=null&&br.hasOwnProperty("transfer")&&(Xt.cg=!0),kn.call(sn,"ondevicelight")&&(Xt.qe=!0),(Sr=sn.AbortSignal)!==null&&Sr!==void 0&&Sr.abort&&(Xt.bg=!0),kn.call(sn,"onbeforeinput")&&(Xt.eg=!0),Tn&&(Tn.DisplayNames&&(Xt.Pa=!0),Xt.ue=((Mr=new Tn.Collator("zh",{collation:"pinyin"}).resolvedOptions())===null||Mr===void 0?void 0:Mr.collation)=="pinyin"),sn.Credential&&(Xt.oe=!0),sn.LargestContentfulPaint&&(Xt.we=!0),(gr=sn.CSS)!==null&&gr!==void 0&&gr.registerProperty&&(Xt.me=!0),(Tr=(_r=sn.HTMLElement)===null||_r===void 0?void 0:_r.prototype)!=null&&Tr.hasOwnProperty("autofocus")&&(Xt.se=!0),Fn.contacts&&(Xt.ne=!0),sn.TrustedHTML&&(Xt.Ie=!0),sn.WakeLock&&(Xt.Ke=!0),(Er=sn.Promise)!==null&&Er!==void 0&&Er.any&&(Xt.Ce=!0),sn.FileSystemHandle&&(Xt.re=!0),(cr=sn.Atomics)!==null&&cr!==void 0&&cr.waitAsync&&(Xt.dg=!0),(Wr=(kr=sn.CSS)===null||kr===void 0?void 0:kr.supports)!==null&&Wr!==void 0&&Wr.call(kr,"aspect-ratio: auto")&&(Xt.le=!0),sn.ReadableStreamBYOBReader&&(Xt.Ee=!0),(vn=(mn=sn.CSS)===null||mn===void 0?void 0:mn.supports)!==null&&vn!==void 0&&vn.call(mn,"overflow: clip")&&(Xt.ye=!0),(_r=(Pn=sn.InputEvent)===null||Pn===void 0?void 0:Pn.prototype)!=null&&_r.hasOwnProperty("isComposing")&&(Xt.ve=!0),Pn=(Gn=sn.HTMLVideoElement)===null||Gn===void 0?void 0:Gn.prototype,Xt.Oe=Pn==null?void 0:Pn.hasOwnProperty("webkitSupportsPresentationMode")}(St),lr=function(Xt){var br,Tr,Sr,Mr;const gr=window.RequestCrowNativeApi;if(gr){let _r=0;const Er=new Promise((vn,Pn)=>{_r=window.setTimeout(()=>{Pn("timeout")},100)}),cr=window.zoneless,kr=(Tr=(br=cr==null?void 0:cr.windowAddEventListener)===null||br===void 0?void 0:br.bind(window))!==null&&Tr!==void 0?Tr:window.addEventListener.bind(window),Wr=(Mr=(Sr=cr==null?void 0:cr.windowRemoveEventListener)===null||Sr===void 0?void 0:Sr.bind(window))!==null&&Mr!==void 0?Mr:window.removeEventListener.bind(window);let mn;return br=new Promise(vn=>{mn=Pn=>{vn(Pn.detail)},kr("CrowNativeApiEvent",mn),gr(JSON.stringify({Wg:"RequestBrowserVersion"}))}).then(vn=>{var Pn;(vn=(Pn=vn.browserVersion)===null||Pn===void 0?void 0:Pn.match(Xt.ze))&&(Xt.browserFullVer=vn==null?void 0:vn[1],Xt.m=vn==null?void 0:vn[2])}),Promise.race([br,Er]).catch(()=>{dt.d("{3c72abb}","{841bf6f}")}).finally(()=>{window.clearTimeout(_r),Wr("CrowNativeApiEvent",mn)})}return Promise.resolve()}(St),Yt=function(Xt){return new Promise(br=>{let Tr=!1;const Sr=cr=>{if(Xt.pa)clearTimeout(Xt.pa),Xt.pa=0;else if(Tr)return dt.w("{3c72abb}","{b02109c}"),void Wt(Xt,"Plat",Xt.ag-performance.now());Xt.sc||((cr=cr.platform)==="MacIntel"?Xt.ga=!0:cr==="iPhone"?Xt.Na=!0:cr==="Win32"?Xt.ja=!0:cr==="iPad"?Xt.Nb=!0:cr==="FreeBSD amd64"?Xt.oa=!0:cr==="Windows"&&(Xt.ja=!0,Xt.aa=!0),cr.startsWith("Linux")&&(Xt.S=!0),Xt.sc=!0),br()};let Mr=!1,gr=!1;const _r=cr=>{typeof cr=="string"?Lt(Xt,"Plat",cr):"data"in cr?zt(Xt,"Plat",cr):Zt(Xt,"Plat",cr),gr=!0,dt.e("{3c72abb}","{6350135}",cr)};let Er=0;try{Mr=!0,Lr(ln,Sr,_r),Er=150}catch(cr){gr=!0,ar(Xt,"Plat",cr),dt.w("{3c72abb}","{79668e5}",cr)}window.setTimeout(()=>{Xt.sc||(Xt.pa=window.setTimeout(()=>{Xt.pa=0,Xt.ag=performance.now(),gr?dt.w("{3c72abb}","{d9e1e01}"):Mr?(dt.w("{3c72abb}","{a8d68cb}"),Or(Xt,"Plat")):(dt.i("{3c72abb}","{53e2225}"),vr(Xt,"Plat"));const cr=new ln().nb();Sr(cr),Tr=!0},Er))},0)})}(St),dr=function(Xt){const br=window;br.ApplePaySession&&br.ApplePaySession.canMakePayments&&(Xt.tc=!0)}(St),ir=function(Xt){var br=navigator.plugins;for(const Tr of br)(br=Tr.name)!=="Native Client"&&(br.startsWith("Microsoft Edge PDF")?Xt.If=!0:br.startsWith("Chrome PDF")?Xt.Bf=!0:br.startsWith("Chromium PDF")?Xt.Ef=!0:br.startsWith("PPAPI SAMSUNGHEALTH")&&(Xt.Ka=!0))}(St);navigator.maxTouchPoints&&0<navigator.maxTouchPoints&&(St.fa=!0),await Ot.call(xt,[Vt,Dt,Ft,Qt,rr,nr,lr,Yt,dr,ir,void 0,_i(St),Kn(St)]).then(()=>{var Xt,br,Tr,Sr,Mr,gr,_r,Er,cr,kr,Wr,mn,vn,Pn,Gn,sn,kn,Fn,Tn,so;if(St.ra&&(St.ga==St.L&&St.ja==St.P||(St.o=!0),(St.O||St.ea||St.da||St.na)&&!St.S&&(St.o=!0),St.m&&St.browserFullVer&&!Rr(St.m,St.browserFullVer)&&(St.ua?St.qa&&!Rr(St.qa,St.browserFullVer)&&(St.o=!0):St.o=!0),(St.O&&!St.ta||St.ea&&!St.Z)&&(St.o=!0),St.Sa?(St.U&&!St.P||St.F&&!St.L)&&(St.o=!0):St.Ta?St.O||(St.o=!0):St.Ua?St.o=!0:St.U||!St.F||St.L||(St.o=!0),St.s=St.ra&&!St.o,St.W=St.ra&&St.o),!St.Fe&&St.$)St.g="Unknown",St.h="Unknown",St.aa=!0,St.l=3,St.v="0",St.m="0",St.browserFullVer="0",dt.d("{3c72abb}","{049d298}");else if(St.Ta)St.g="ChromeOS",fr(St);else if(St.Sa)fr(St),St.U?St.g="Windows":St.F?(St.g="macOS",St.j="APPLE"):St.s?St.P?St.g="Windows":St.L?(St.g="macOS",St.j="APPLE"):St.O||St.ea?(St.g="ChromeOS",St.aa=!0,St.l=7):St.na&&(St.g=tr(St)):St.ja?St.g="Windows":St.ga?(St.g="macOS",St.j="APPLE"):St.S?St.g=tr(St):St.oa?St.g="FreeBSD":(St.g="Unknown",St.l=5,dt.d("{3c72abb}","{101497c}"));else if(St.Ua)yr(St),St.U?St.g="Windows":St.F?(St.g="macOS",St.j="APPLE"):St.Se?(St.g="Android",fn(St)):St.S?St.g=tr(St):St.oa?St.g="FreeBSD":(St.g="Unknown",St.l=5,dt.d("{3c72abb}","{49fcccb}"));else if(St.he)St.h="Edge",St.vc?St.s&&St.ca||St.I?(St.g="Xbox",St.j="MICROSOFT",St.Da?St.M="XBOXSERIES":St.I&&(St.M="XBOXONE")):St.g="Windows":St.F?(St.g="macOS",St.j="APPLE"):St.Qa?(St.g="Android",fn(St)):St.s?St.ca?(St.g="Xbox",St.j="MICROSOFT",St.Da?St.M="XBOXSERIES":St.I&&(St.M="XBOXONE")):St.P?St.g="Windows":St.L?(St.g="macOS",St.j="APPLE"):St.O||St.ea?(St.g="ChromeOS",St.aa=!0,St.l=7):St.da?(St.g="Android",fn(St)):St.na&&(St.g=tr(St)):St.ja?St.g="Windows":St.ga?(St.g="macOS",St.j="APPLE"):St.R?(St.g="Android",fn(St)):St.S?St.g=tr(St):St.oa?St.g="FreeBSD":(St.g="Unknown",St.l=5);else if(St.U)St.vc?Nr(St):(Nr(St),St.aa=!0,St.l=5);else if(St.F)zr(St);else if(St.Qa)xn(St);else if(St.s&&(St.ca||St.P)||St.ja||St.I)Nr(St);else if(St.s&&St.L||St.Nb||St.Na||St.ga)zr(St);else if(St.s&&(St.O||St.ea))St.g="ChromeOS",fr(St);else if(St.xf)St.g="ccOS",St.j="HKMC",St.h="Chromium";else if(St.s&&St.da||St.R)xn(St);else if(St.s&&St.na)St.g=tr(St),St.Cb||St.fa?(St.h="Unknown",St.l=3):Kr(St)||(St.h="Unknown",St.l=5,dt.d("{3c72abb}","{54c6569}"));else if(St.Af)St.g="WebOS",St.j="LG",St.h="Chromium",St.browserFullVer=(Fn=St.browserFullVer)!==null&&Fn!==void 0?Fn:St.rg,St.m=(Tn=St.m)!==null&&Tn!==void 0?Tn:St.mg,St.W=!1;else if(St.Ka){if(St.g="Tizen",St.h="Samsung",(so=window.webapis)!==null&&so!==void 0&&so.productinfo)try{St.v=window.webapis.productinfo.getFirmware(),St.deviceName=window.webapis.productinfo.getRealModel(),St.Za=window.webapis.productinfo.getLicensedVendor()}catch{dt.e("{3c72abb}","{bc7dd9b}")}else dt.e("{3c72abb}","{844af47}"),St.v="0",St.deviceName="";St.j=St.Za!=="Samsung"&&St.Za?"TIZENLICENSED":"SAMSUNG",Fn=/(([0-9]+\.)*[0-9]+)\/(([0-9]+\.)*[0-9]+)/,(Tn=navigator.userAgent)&&(Fn=Tn.match(Fn),St.browserFullVer=Fn==null?void 0:Fn[0],(Fn=Fn==null?void 0:Fn[1])&&(Fn=Fn.split("."),St.m=Fn==null?void 0:Fn[0]))}else St.S?St.Ne?(St.g="Android",St.j="AMAZON",yr(St),St.H="TV"):St.xa?(St.g="Android",St.j="SAMSUNG",St.h="Samsung",fn(St)):Kr(St)?St.W?St.g=tr(St):!St.Ef||St.Bf||St.If?St.S&&(St.g="Linux"):(St.g=tr(St),St.h="Chromium",St.l=7):(St.g="Unknown",St.h="Unknown",St.l=0,dt.d("{3c72abb}","{be86380}")):St.oa?(St.g="FreeBSD",St.$?St.h="Chrome":St.wa?yr(St):(St.h="Unknown",St.l=3,dt.d("{3c72abb}","{a2c16e4}"))):St.Va||St.cb||St.bb?(St.Na=!0,zr(St),St.l=7):St.xa?(xn(St),St.l=7):(St.g="Unknown",St.h="Unknown",St.l=0,dt.d("{3c72abb}","{f2eecc9}"));switch(St.W&&(St.v="0",St.m="0",St.browserFullVer="0"),St.Qc=performance.now(),St.u.os=(Xt=St.g)!==null&&Xt!==void 0?Xt:"Unknown",St.u.browser=(br=St.h)!==null&&br!==void 0?br:"Unknown",St.u.osRawVer=(Tr=St.sg)!==null&&Tr!==void 0?Tr:"0",St.u.osVer=(Sr=St.v)!==null&&Sr!==void 0?Sr:"0",St.u.browserVer=(Mr=St.m)!==null&&Mr!==void 0?Mr:"0",Xt=(gr=St.browserFullVer)!==null&&gr!==void 0?gr:void 0,St.u.browserFullVer=Xt??"0",St.u.browserBestVer=(_r=Xt??St.u.browserVer)!==null&&_r!==void 0?_r:"0",St.u.confidence=(mn=(Wr=(kr=(cr=(Er=St.l)!==null&&Er!==void 0?Er:St.g==="Unknown"?0:void 0)!==null&&cr!==void 0?cr:St.h==="Unknown"?5:void 0)!==null&&kr!==void 0?kr:St.Ze?6:void 0)!==null&&Wr!==void 0?Wr:St.W?8:void 0)!==null&&mn!==void 0?mn:10,St.u.forging=(vn=St.aa)!==null&&vn!==void 0&&vn,St.u.spoofing=(Pn=St.W)!==null&&Pn!==void 0&&Pn,St.u.vendor=(Gn=St.j)!==null&&Gn!==void 0?Gn:"",St.u.vendorFull=(sn=St.Za)!==null&&sn!==void 0?sn:St.u.vendor,gr=void 0,St.u.os){case"ChromeOS":gr="CHROMEOS";break;case"Windows":gr="WINDOWS";break;case"macOS":gr="MACOS";break;case"Linux":gr="LINUX";break;case"iOS":gr="IOS";break;case"iPadOS":gr="IPADOS";break;case"Tizen":gr="TIZEN";break;case"WebOS":gr="WEBOS";break;case"Android":gr="ANDROID";break;case"Xbox":gr="XBOX";break;case"SteamOS":gr="STEAMOS";break;case"ccOS":gr="CCOS"}St.u.deviceOS=gr,St.u.os!=="iPadOS"||St.Oe?St.Bb?St.u.deviceModel="STEAMDECK":St.M&&(St.u.deviceModel=St.M):St.u.deviceModel="VISIONPRO",St.u.deviceType=(kn=St.H)!==null&&kn!==void 0?kn:function(no,Mo){if(Mo==="STEAMDECK")return"CONSOLE";switch(no){case"iOS":return"PHONE";case"iPadOS":return"TABLET";case"Xbox":return"CONSOLE";case"WebOS":case"Tizen":return"TV";default:return"DESKTOP"}}(St.u.os,St.u.deviceModel),St.u.totalTime=St.Qc-St.start,St.u.gpuDetail=St.gpuDetail})}(h).then(()=>{h.Kf=!0,ut(h.u)})})}function Fr(h,ut){if(!h.$f){for(const St of ut)(ut=St.voiceURI||"").startsWith("Chrome OS")?h.Ta=!0:ut.startsWith("Google")?h.Sa=!0:ut.includes("moz-tts")?(ut.includes("android")&&(h.Se=!0,h.R=!0),h.Ua=!0):ut=="English United States"&&(h.Qa=!0),ut.includes("Microsoft")?(h.U=!0,ut.includes("Online")?h.he=!0:h.vc=!0):ut.includes("com.apple")?(h.F=!0,ut.includes("Ellen")&&(h.Qe=!0)):ut=="Zuzana"&&(h.F=!0);h.We=h.F||h.U||h.Sa||h.Ta||h.Ua||h.Qa,h.$f=!0}}function _i(h){const ut=window;h.pc=ut.matchMedia("(hover: hover)").matches,h.qc=ut.matchMedia("(hover: none)").matches,h.nc=ut.matchMedia("(pointer: coarse)").matches,h.oc=ut.matchMedia("(pointer: fine)").matches}function Kn(h){return new Promise(ut=>{const St=Qt=>{h.Oa&&(clearTimeout(h.Oa),h.Oa=0),Qt.Id&&(h.wf=Qt.Id,h.kg=Qt.sd,h.jg=Qt.Nd),ut()};let xt=!1,Ot=!1;const Vt=Qt=>{typeof Qt=="string"?Lt(h,"TV",Qt):"data"in Qt?zt(h,"TV",Qt):Zt(h,"TV",Qt),Ot=!0,dt.e("{3c72abb}","{f49e1b4}",Qt)};let Dt,Ft=0;try{self.SharedWorker&&(xt=!0,Dt=wr(en,St,Vt),Ft=150)}catch(Qt){Ot=!0,dt.w("{3c72abb}","{2066dd6}",Qt),ar(h,"TV",Qt)}h.Oa=window.setTimeout(()=>{Dt&&Dr("port"in Dt?Dt.port:Dt),Ot?dt.w("{3c72abb}","{cdb3848}"):xt?(dt.w("{3c72abb}","{f01188c}"),Or(h,"TV")):(dt.i("{3c72abb}","{db9e3f4}"),vr(h,"TV")),new en().nb().then(Qt=>{St(Qt)})},Ft)})}function Wt(h,ut,St){h.G?qo(h.G,"WorkerOverlongDelay",ut,St.toString()):h.C.push({type:"WorkerOverlongDelay",name:ut,data:St})}function Lt(h,ut,St){h.G?qo(h.G,"WebWorkerProblem",ut,St):h.C.push({type:"ErrorString",name:ut,data:St})}function zt(h,ut,St){h.G?qo(h.G,"WorkerMessageProblem",JSON.stringify(St)):h.C.push({type:"MessageEvent",name:ut,data:St})}function Zt(h,ut,St){h.G?qo(h.G,"WorkerProblem",ut,`${St.message} in ${St.filename}@${St.lineno}:${St.colno}`,JSON.stringify(St.error)):h.C.push({type:"ErrorEvent",name:ut,data:St})}function ar(h,ut,St){var xt;h.G?qo(h.G,"WorkerCreateFailure",ut,(xt=St==null?void 0:St.stack)!==null&&xt!==void 0?xt:"",JSON.stringify(St)):h.C.push({type:"WorkerCreateFailure",name:ut,data:St})}function Or(h,ut){h.G?qo(h.G,"WorkerTimeout",ut):h.C.push({type:"WorkerTimeout",name:ut})}function vr(h,ut){h.G?qo(h.G,"WorkerUnused",ut):h.C.push({type:"WorkerUnused",name:ut})}function Rr(h,ut){if(h==ut)return!1;let St=/^(\d+)[.]?(.*)/;if(h=St.exec(h),ut=St.exec(ut),h==null){if(ut==null)return!0}else if(ut!=null&&h[1]==ut[1]&&h[2]=="")return!0;return!1}function fr(h){h.h="Chrome",!h.m&&h.we&&(h.m=h.me?h.se?h.ne?h.Pa?h.Ie?h.Ke?h.Ce?h.re?h.dg?h.le?h.Ee?h.ye?"90+":"89":"88":"87":"86":"85":"84":"83":"81":"80":"79":"78":"77")}function tr(h){return h.Bb?"SteamOS":"Linux"}function yr(h){h.h="Firefox",h.m=h.ue?h.Pa?h.eg?h.bg?h.qe?"88":"89+":"87":"86":"85":"84-"}function fn(h){var ut,St,xt,Ot;h.s&&h.N?h.H="TV":h.Cb||h.fa||!h.wf?h.pc&&!h.oc||(h.da?h.vf?h.qc&&h.nc||(h.H="DESKTOP"):h.pc&&h.oc&&(h.H="DESKTOP"):h.qc&&h.nc||(h.H="DESKTOP")):(h.H="TV",h.j=(St=(ut=h.j)!==null&&ut!==void 0?ut:h.kg)!==null&&St!==void 0?St:"",h.deviceName=(Ot=(xt=h.deviceName)!==null&&xt!==void 0?xt:h.jg)!==null&&Ot!==void 0?Ot:"UNKNOWN",h.l=7),h.H||(h.H=600<=(screen.width<screen.height?screen.width:screen.height)?"TABLET":"PHONE")}function Nr(h){h.g="Windows",Kr(h)||(h.h="Unknown",h.l=5,dt.d("{3c72abb}","{44ce1e0}"))}function zr(h){h.j="APPLE",h.s&&h.L?(h.g="macOS",Kr(h)||(h.h="Unknown",h.l=5,dt.d("{3c72abb}","{b80b712}"))):h.ga?h.fa?(h.g="iPadOS",Wn(h)):(h.g="macOS",Kr(h)||(h.h="Unknown",h.l=5,dt.d("{3c72abb}","{0f3296f}")),h.h=="Safari"&&(h.m=h.ve?"16.4+":"16.3-")):h.Na?(h.g="iOS",Wn(h)):h.Nb?(h.g="iPadOS",Wn(h)):(h.aa=!0,h.l=5,h.fa?(h.g="iOS",Wn(h),dt.d("{3c72abb}","{cf1c572}")):(h.g="macOS",h.h="Unknown",dt.d("{3c72abb}","{1eb1815}")))}function xn(h){h.g="Android",h.wa?yr(h):h.xa?(h.h="Samsung",h.j="SAMSUNG"):h.va?h.h="Brave":h.ya?h.h="Yandex":h.lb?h.h="Opera":h.s?h.$a?h.h="Edge":h.ua?h.h="Opera":h.ab?h.h="Yandex":h.ta||h.Je?(fr(h),nn(h)):h.Z&&(h.h="Chromium",nn(h)):h.$?h.uc?fr(h):h.h=h.fa?"Edge":"Silk":(fr(h),h.l=7),fn(h)}function Kr(h){var ut;if(h.wa)yr(h);else if(h.Pe)h.h="Opera";else if(h.va)h.h="Brave";else if(h.ya)h.h="Yandex";else if(h.$)h.I?(h.g="Xbox",h.j="MICROSOFT",h.h="Edge",h.Da?h.M="XBOXSERIES":h.I&&(h.M="XBOXONE")):h.s?h.ca?(h.g="Xbox",h.j="MICROSOFT",h.h="Edge"):h.$a?h.h="Edge":h.ua?h.h="Opera":h.ab?h.h="Yandex":h.ta?fr(h):h.Z&&!h.He&&(h.h="Chromium"):h.uc?h.s&&h.Z?(h.h="Chromium",h.l=9):h.We?h.h="Chromium":(h.h="Chromium",h.l=7):(h.h="Edge",h.g=(ut=h.g)!==null&&ut!==void 0?ut:"Unknown",h.l=7);else if(h.Ve||h.tc)h.h="Safari";else{if(!h.Le)return!1;h.I&&(h.g="Xbox",h.j="MICROSOFT"),h.h="Edge_Legacy"}return!0}function nn(h){h.ef?(h.j="AMAZON",h.Z&&(h.h="Silk")):h.Ye?h.j="SONY":h.cf?h.j="GOOGLE":h.mf?h.j="NVIDIA":h.hf?h.j="XIAOMI":h.uf&&(h.j="TVISION")}function Wn(h){h.v=h.fg?h.Pa?h.ie?h.ke?h.cg?"17.4+":"17+":h.Ge?"16+":h.te?h.Qe?"15.6+":"15.5+":h.je?"15.4+":h.Me?"15.2+":h.Ae?"15.1+":"15+":"14.5+":h.xe?"14.3+":"14+":h.pe?"13+":"12-";var ut=h.v;ut=!h.oe&&!(ut.startsWith("12")||ut.startsWith("13")),h.cb?h.h="Firefox":h.ge?h.h="Opera":h.va?h.h="Brave":h.ya?h.h="Yandex":h.bb?h.h="Edge":h.Va?h.h="Chrome":h.tc&&!ut?h.h="Safari":h.Re?h.h="ReactNative":ut?(h.h="Unknown",h.l=7,dt.d("{3c72abb}","{5a39f60}")):(h.h="Unknown",h.l=5,dt.d("{3c72abb}","{147d6b4}"))}function Zr(h){var ut,St=Zn;(ut=St.G)===null||ut===void 0||qo(ut,"TelemetryHandlerChanged"),St.G=h;for(const xt of St.C)switch(h=xt.name,ut=xt.data,xt.type){case"ErrorEvent":Zt(St,h,ut);break;case"MessageEvent":zt(St,h,ut);break;case"WorkerUnused":vr(St,h);break;case"WorkerTimeout":Or(St,h);break;case"WorkerCreateFailure":ar(St,h,ut);break;case"ErrorString":Lt(St,h,ut);break;case"WorkerOverlongDelay":Wt(St,h,ut)}St.C=[]}class on{nb(){const ut=(self.OffscreenCanvas?new OffscreenCanvas(1,1):document.createElement("canvas")).getContext("webgl"),St=ut&&ut.getExtension("WEBGL_debug_renderer_info");return St?{sd:ut&&ut.getParameter(St.UNMASKED_VENDOR_WEBGL),Qf:ut&&ut.getParameter(St.UNMASKED_RENDERER_WEBGL),Gf:!0}:{sd:"",Qf:"",Gf:!1}}}class Xn{nb(){const ut=navigator.userAgentData;return ut?ut.getHighEntropyValues("platform architecture uaFullVersion platformVersion model bitness".split(" ")).then(St=>(St||(St={}),St.brands||(St.brands=ut.brands),St.mobile||(St.mobile=ut.mobile),St)):Promise.resolve(void 0)}}class en{nb(){let ut={Id:!1,Nd:"",sd:""};if(navigator.userAgent){var St=navigator.userAgent.toUpperCase();const xt="BRAVIA TIZEN PHILIPSTV GOOGLETV CRKEY CHROMECAST SHIELDTV".split(" "),Ot="SONY SAMSUNG PHILIPS GOOGLE GOOGLE GOOGLE NVIDIA".split(" ");if(RegExp("BRAVIA|SMARTTV|SMART-TV|PHILIPSTV|GOOGLETV|CRKEY|CHROMECAST|SHIELD Android TV","i").test(St)&&(ut.Id=!0,St=St.match(xt.join("|"))))for(let Vt=0;Vt<xt.length;Vt++)St[0]==xt[Vt]&&(ut.Nd=xt[Vt],ut.sd=Ot[Vt],St[0]=="CRKEY"&&(ut.Nd="CHROMECAST"))}return Promise.resolve(ut)}}class ln{nb(){return{platform:navigator.platform}}}const Zn=new class{constructor(){this.Qc=this.start=0,this.vc=this.he=this.F=this.U=this.Qa=this.Se=this.Ua=this.Sa=this.Ta=!1,this.Qe=!0,this.sc=this.Rf=this.rc=this.$f=this.Kf=this.Ze=this.W=this.s=this.o=this.ra=this.Fe=this.oc=this.nc=this.qc=this.pc=this.ve=this.Oe=this.ye=this.Ee=this.le=this.dg=this.re=this.Ce=this.Ke=this.Ie=this.ne=this.se=this.me=this.we=this.cg=this.ke=this.Ge=this.oe=this.tc=this.ue=this.Pa=this.eg=this.bg=this.qe=this.xe=this.te=this.je=this.Me=this.Ae=this.pe=this.ie=this.fg=this.uc=this.wf=this.N=this.vf=this.na=this.da=this.ea=this.O=this.L=this.P=this.uf=this.hf=this.mf=this.cf=this.Ye=this.ef=this.ca=this.Bb=this.Da=this.I=this.fa=this.Cb=this.He=this.Je=this.Z=this.ab=this.ua=this.$a=this.ta=this.If=this.Ef=this.Bf=this.xf=this.Ka=this.Af=this.R=this.oa=this.S=this.Nb=this.ja=this.Na=this.ga=this.Re=this.xa=this.ya=this.va=this.lb=this.ge=this.Pe=this.Ne=this.cb=this.wa=this.Va=this.$=this.Ve=this.bb=this.Le=this.We=!1,this.ag=this.De=this.pa=this.Oa=this.sa=this.ka=this.T=0,this.gpuDetail="",this.u={os:"Unknown",osRawVer:"0",osVer:"0",browser:"Unknown",browserVer:"0",browserFullVer:"0",browserBestVer:"0",forging:!0,spoofing:!0,confidence:0,totalTime:0,vendor:"",gpuDetail:""},this.C=[],this.ze=/Chrome\/(([0-9]+)\.[0-9]+\.[0-9]+\.[0-9]+)/}};function $t(){performance.mark("platformBegin");var h=Zn;return h.Be||(h.Be=Ln(h)),h.Be}var or=class extends Ar{constructor(h){super(h),this.U=[]}$(h){h={logModule:"R",timeStamp:h.timestamp,logLevel:h.level,logtag:h.tag,logstr:h.message},this.hasListener("Log")?this.emit("Log",h):this.U.push(h)}addListener(h,ut){if(super.addListener(h,ut),h=="Log"&&0<this.U.length){for(const St of this.U)this.emit("Log",St);this.U=[]}}};function Yr(h){switch(h){case"CONSOLE":return"Console";case"TABLET":return"Tablet";case"PHONE":return"Phone";case"TV":return"TV";case"LAPTOP":return"Laptop";case"DESKTOP":return"Desktop";default:return"undefined"}}function Vr(h){switch(h){case"Chrome":return"Chrome";case"Safari":return"Safari";case"Yandex":return"Yandex";case"Edge":return"Edge";case"Edge_Legacy":return"Edge_legacy";case"Firefox":return"Firefox";case"Samsung":return"Samsung";case"Chromium":return"Chromium";case"Opera":return"Opera";case"Brave":return"Brave";case"Silk":return"Silk";default:return"undefined"}}function Hr(h){switch(h){case"Windows":return"Windows";case"macOS":return"MacOS";case"ChromeOS":return"ChromeOS";case"Linux":return"Linux";case"iOS":return"iOS";case"iPadOS":return"iPadOS";case"Tizen":return"Tizen";case"WebOS":return"WebOS";case"Xbox":return"Xbox";case"Android":return"Android";case"SteamOS":return"SteamOS";default:return"undefined"}}class Mn{constructor(ut){ut=this.g=ut,this.j={os:Hr(ut.os),browser:Vr(ut.browser),deviceType:Yr(ut.deviceType)},ut=this.g,this.l={os:Ur(Hr(ut.os)),browser:jn(Vr(ut.browser)),deviceType:tn(Yr(ut.deviceType))}}get m(){return this.j}get o(){return this.l}get h(){return this.g}}var Ur=h=>{switch(h){case"Windows":return"WINDOWS";case"MacOS":return"MACOS";case"Linux":return"LINUX";case"ChromeOS":return"CHROMEOS";case"iOS":return"IOS";case"iPadOS":return"IPADOS";case"WebOS":return"WEBOS";case"Tizen":return"TIZEN";case"Xbox":return"XBOX";case"Android":return"ANDROID";case"SteamOS":return"STEAMOS";case"Shield":return"SHIELD";default:return"UNKNOWN"}},tn=h=>{switch(h){case"Desktop":default:return"DESKTOP";case"Laptop":return"LAPTOP";case"TV":return"TV";case"Phone":return"PHONE";case"Tablet":return"TABLET";case"Console":return"CONSOLE"}},jn=h=>{switch(h){case"Chrome":return"CHROME";case"Safari":return"SAFARI";case"Yandex":return"YANDEX";case"Edge":return"EDGE";case"Edge_legacy":return"EDGE_LEGACY";case"Firefox":return"FIREFOX";case"Samsung":return"SAMSUNG";case"Chromium":return"CHROMIUM";case"Opera":return"OPERA";case"Brave":return"BRAVE";case"Silk":return"SILK";default:return"UNKNOWN"}};let Un;function ao(h){h.splice(0,h.length)}var co=class extends Array{constructor(){super(),this.push=this.h}h(...h){return h=Array.prototype.push.apply(this,h),this.g&&this.g(),h}},ro=class{constructor(h){this.name="",this.gdprLevel="behavioral",this.parameters=h,this.ts=new Date().toISOString()}},vo=class extends ro{constructor(h){super(h),this.name="GS_DebugInfo",this.gdprLevel="technical"}},oo=class extends ro{constructor(h){super(h),this.name="GS_ExceptionInfo",this.gdprLevel="technical"}},mo=class extends ro{constructor(h){super(h),this.name="GS_ClientMetricEvent",this.gdprLevel="functional"}},ho=class extends ro{constructor(h){super(h),this.name="GS_Sleep_Event",this.gdprLevel="technical"}},go=class extends ro{constructor(h){super(h),this.name="GS_WsCallResult",this.gdprLevel="functional"}},bo=class extends ro{constructor(h){super(h),this.name="GS_HttpCallResult",this.gdprLevel="functional"}};function ur(h,ut){h.l.length&&!h.o&&(h.o=window.setTimeout(()=>function(St){if(St.l.length&&St.m){var xt=$r(St,St.l);St.l=[],It(St.m,{...St.L,body:xt}).then(Ot=>{200<=Ot.status&&299>=Ot.status||dt.e("{95feb49}","{1dc64ee}",Ot.status)}).catch(Ot=>{dt.e("{95feb49}","{a0b4bea}",Ot)}).finally(()=>{St.o=0,St.l.length&&ur(St,2e3)})}else St.o=0}(h),ut))}function Cr(h,ut){if(h.g)switch(ut.gdprLevel){case"functional":return h.g.deviceGdprFuncOptIn==="Full"||h.g.deviceGdprFuncOptIn==="Temp";case"technical":return h.g.gdprTechOptIn==="Full";case"behavioral":return h.g.gdprBehOptIn==="Full"}return!1}function $r(h,ut){var St;(h={...h.g,events:[]}).sentTs=new Date().toISOString();for(const xt of ut)ut={name:xt.name,ts:xt.ts,parameters:xt.parameters},(St=h.events)===null||St===void 0||St.push(ut);return JSON.stringify(h)}var dn=class{constructor(h){this.telemetryEventIds={},this.m="",this.l=[],this.o=0,this.L={method:"POST",headers:{"Content-Type":"application/json"},body:"",retryCount:3,timeout:2e3},this.F=h}configure(h){if(!h.option)return dt.e("{95feb49}","{e936979}"),!1;if(typeof h.option=="function"){dt.i("{95feb49}","{01ded8b}"),this.s=h.option,this.m=void 0,this.o&&(window.clearTimeout(this.o),this.o=0);for(const ut of this.l)this.s(ut);this.l=[]}else{if(typeof h.option!="string")return dt.e("{95feb49}","{328a30f}"),!1;dt.i("{95feb49}","{c76ea37}"),this.m=h.option,this.s=void 0,this.g&&ur(this)}return!0}updateTelemetryCommonData(h){var ut,St,xt,Ot,Vt,Dt,Ft,Qt,rr,nr;const lr=(ut=this.g)===null||ut===void 0?void 0:ut.sessionId;this.g={...h,events:[]},this.g.clientId=this.F.clientId,this.g.eventSchemaVer=this.F.eventSchemaVer,this.g.deviceMake=(St=this.g.deviceMake)!==null&&St!==void 0?St:"undefined",this.g.deviceModel=(xt=this.g.deviceModel)!==null&&xt!==void 0?xt:"undefined",this.g.integrationId=(Ot=this.g.integrationId)!==null&&Ot!==void 0?Ot:"undefined",this.g.userId=(Vt=this.g.userId)!==null&&Vt!==void 0?Vt:"undefined",this.g.externalUserId=(Dt=this.g.externalUserId)!==null&&Dt!==void 0?Dt:"undefined",this.g.idpId=(Ft=this.g.idpId)!==null&&Ft!==void 0?Ft:"undefined",this.g.eventProtocol=(rr=(Qt=this.g)===null||Qt===void 0?void 0:Qt.eventProtocol)!==null&&rr!==void 0?rr:"1.5",this.g.eventSysVer="2.0",this.g.sessionId=(nr=this.g.sessionId)!==null&&nr!==void 0?nr:lr,this.g.sessionId||(this.g.sessionId=Pt(),dt.i("{95feb49}","{7d66b6c}",this.g.sessionId)),this.L.headers["X-Event-Protocol"]=this.g.eventProtocol,this.m&&(this.l=this.l.filter(Yt=>Cr(this,Yt)),ur(this))}updateTelemetryEventIds(h){this.telemetryEventIds={...h}}h(h,ut){h={name:h.name,parameters:h.parameters,gdprLevel:h.gdprLevel,ts:h.ts,clientConfig:this.F},this.s?this.s(h):this.m&&this.g?Cr(this,h)&&(ut?(ut=$r(this,[h]),h=navigator.sendBeacon(this.m,new Blob([ut],{type:"text/plain"})),dt.i("{95feb49}","{6267b70}",h,ut)):(this.l.push(h),ur(this))):this.l.push(h)}};window.RtcUtils=window.RtcUtils||{};var rn={Ga:{},Vb:{type:"UNKNOWN",version:""},Md:!0,$e:!1,fe:!0,ee:!1};function Sn(h){var ut,St,xt,Ot,Vt;if(dt.i("{11b33a0}","{e65e133}",JSON.stringify(h)),function(Dt){var Ft,Qt;if(Dt.overrideData){const rr=new URLSearchParams(Dt.overrideData.toLowerCase());rr.get("mode")==="lean"&&(bt=!1),ht=(bt=(Ft=(Dt=nr=>wt(nr=rr.get(nr)))("log"))!==null&&Ft!==void 0?Ft:bt)&&((Qt=Dt("console"))!==null&&Qt!==void 0?Qt:ht)}}(h),h.gxtOverrideData){const Dt=JSON.parse(h.gxtOverrideData);if(Dt.params)for(const Ft of Dt.params)Ft.name==="pmCommunication"&&(rn.Ga.pmCommunication=Ft.value,rn.Vb={type:"GXT",version:Ft.version})}if(h.overrideData){const Dt=new URLSearchParams(h.overrideData.toLowerCase());h=Ft=>wt(Ft=Dt.get(Ft)),rn.Md=(ut=h("log"))!==null&&ut!==void 0?ut:rn.Md,rn.$e=rn.Md&&((St=h("console"))!==null&&St!==void 0?St:rn.$e),rn.fe=(xt=h("websocketsignaling"))!==null&&xt!==void 0?xt:rn.fe,rn.ee=(Ot=h("webrtcstreamer"))!==null&&Ot!==void 0?Ot:rn.ee,rn.hdr=(Vt=h("hdr"))!==null&&Vt!==void 0?Vt:rn.hdr}}var In=class extends ro{constructor(h){super(h),this.name="GridServer_GameLaunch_Request",this.gdprLevel="functional"}};const Cn={clientName:"GFN_GridServer",clientId:"93289439828086895",eventSchemaVer:"2.1"};function qn(h,ut,St){var xt,Ot,Vt,Dt=uo;return{requestedZoneAddress:h,zoneName:"",networkSessionId:(xt=Dt.telemetryEventIds.networkTestId)!==null&&xt!==void 0?xt:"",sessionId:St??"",subSessionId:"",resumeType:ut?"MANUAL":"NONE",overrideConfigType:rn.Vb.type,overrideConfigVersion:rn.Vb.version,result:"",codec:"UNKNOWN",ipVersion:"UNKNOWN",launchDuration:0,networkType:Dt.networkType,streamingProfileGuid:(Ot=Dt.telemetryEventIds.streamingProfileGuid)!==null&&Ot!==void 0?Ot:"",systemInfoGuid:(Vt=Dt.telemetryEventIds.systemInfoGuid)!==null&&Vt!==void 0?Vt:"",cmsId:String(Dt.cmsId)}}function Vn(h){var ut=uo;h=new bo({callDuration:h.callDuration,verb:h.verb,sessionId:h.sessionId,subSessionId:h.subSessionId,serverId:h.serverId,url:h.url,overrideConfigType:rn.Vb.type,overrideConfigVersion:rn.Vb.version,requestStatusCode:h.requestStatusCode,requestId:h.requestId,networkType:ut.networkType,statusCode:h.statusCode,cmsId:String(ut.cmsId),moduleName:"GRID_SERVER",response:h.response}),ut.h(h)}function Hn(h){var ut,St,xt=uo;h.launchDuration=Math.round(h.launchDuration),(h=new In(h)).parameters.sessionId||(h.parameters.sessionId=xt.sessionId),h.parameters.subSessionId||(h.parameters.subSessionId=xt.subSessionId),h.parameters.systemInfoGuid=(ut=xt.telemetryEventIds.systemInfoGuid)!==null&&ut!==void 0?ut:"",h.parameters.streamingProfileGuid=(St=xt.telemetryEventIds.streamingProfileGuid)!==null&&St!==void 0?St:"",xt.h(h)}function Yn(h,ut,St){var xt,Ot,Vt=uo;if(50<=Vt.v)var Dt=!1;else{var Ft=(Dt=Vt.j.get(ut))!==null&&Dt!==void 0?Dt:0;10<=Ft?Dt=!1:(Vt.v++,Vt.j.set(ut,Ft+1),Dt=!0)}Dt&&(!xt&&h&&(xt=h.name+": "+h.message),h=new oo({filename:St,lineno:0,stacktrace:(Ot=h==null?void 0:h.stack)!==null&&Ot!==void 0?Ot:"",colno:0,handled:"TRUE",category:xt??"",message:ut,moduleName:"GRID_SERVER",sessionId:Vt.sessionId,subSessionId:Vt.subSessionId}),Vt.h(h))}function Ao(h){var ut=uo;ut.subSessionId=h,ut.j.clear(),ut.v=0}var uo=new class extends dn{constructor(){super(Cn),this.networkType="UNKNOWN",this.subSessionId=this.sessionId=this.cmsId="",this.j=new Map,this.v=0}setNetworkType(h){this.networkType=sr(h)}};function Fo(h){switch(h){case 15867905:case 15867906:case 15867907:return!0;default:return!1}}function Es(h){switch(h){case"ready_for_connection":case"streaming":case"paused":return!0;default:return!1}}function Fs(h){switch(h){case 1:return"initializing";case 2:return"ready_for_connection";case 3:return"streaming";case 4:case 5:return"paused";case 6:return"resuming";case 7:return"finished";default:return"unknown"}}function Uo(h){switch(h){case 3237085186:return"invalid operation";case 15859712:return"success";case 3237093379:case 3237093381:return"Invalid server response";case 3237093384:return"Exception";case 15867907:case 15867905:case 15867906:return"cancelled";case 15868417:return"no network";case 3237089282:return"network error";default:return"server error"}}function wl(h,ut){var St,xt;return function(Ot,Vt){if(Ot["content-type"]="application/json",Vt.deviceOs!==void 0&&(Ot["nv-device-os"]=Vt.deviceOs),Vt.deviceType!==void 0&&(Ot["nv-device-type"]=Vt.deviceType),Vt.deviceMake!==void 0&&(Ot["nv-device-make"]=Vt.deviceMake),Vt.deviceModel!==void 0&&(Ot["nv-device-model"]=Vt.deviceModel),Vt.clientType!==void 0&&(Ot["nv-client-type"]=Vt.clientType),Vt.clientAppVersion!==void 0&&(Ot["nv-client-version"]=Vt.clientAppVersion),Vt.clientStreamer!==void 0&&(Ot["nv-client-streamer"]=Vt.clientStreamer),Vt.clientId!==void 0&&(Ot["nv-client-id"]=Vt.clientId),Vt.deviceId!==void 0&&(Ot["x-device-id"]=Vt.deviceId),Vt.browserType!==void 0&&(Ot["nv-browser-type"]=Vt.browserType),Vt.clientHeaders)for(const[Dt,Ft]of Vt.clientHeaders)(Vt=Dt).toLowerCase()!=="x-nv-client-identity"&&(Ot[Vt.toLowerCase()]=Ft)}(h.o.headers,ut),h.s.set("component","gridserver-core"),h.s.set("component.version","2.0"),h.s.set("client.name","GFN-PC"),h.s.set("client.version","29.0"),h.s.set("client.os",(St=ut.deviceOs)!==null&&St!==void 0?St:""),h.s.set("client.os.version",(xt=ut.deviceOsVer)!==null&&xt!==void 0?xt:""),h.serverAddress=ut.serverAddress,h.clientPlatformName=ut.clientPlatformName,h.deviceId=ut.deviceId,(h.serverAddress.startsWith("mockpm://")||h.serverAddress.toLocaleLowerCase()==="mockpm.com")&&(h.serverAddress=h.serverAddress.replace("mockpm://",""),h.protocol="http://"),h.u||h.clientPlatformName!=="browser"||$t().then(Ot=>{h.u=Ot}),!0}function rs(h){const ut=Ct.trace.getActiveSpan();if(ut)for(const[St,xt]of h.s)ut.setAttribute(St,xt)}function $s(h,ut,St,xt,Ot){const Vt=Pt();return new Promise((Dt,Ft)=>{const Qt=!!Ot;var rr=()=>{var lr;const Yt={code:3237085186,subSessionId:Vt};Oo(Yt.code);const dr=qn((lr=ut.serverAddress)!==null&&lr!==void 0?lr:"",Qt,Ot);dr.result=$(Yt.code),dr.subSessionId=Vt,Hn(dr),Dt(Yt)};if(qs(h))if(h.I())dt.e("{1daeef1}","{3753849}"),rr();else{uo.cmsId=ut.appId,Ao(Vt),rr=El(h,ut,Ot);var nr=new URL(rr).hostname;h.g={resolve:Dt,reject:Ft,sessionId:Ot,subSessionId:Vt,Uf:xt,Jd:Number.MAX_VALUE,dd:!1,Tc:St,Kd:qn(nr,Qt),startTime:performance.now()},Ft=_l(h,ut,Qt,Vt),Go(h,Qt?1:0,rr,Ft,St).then(lr=>{!Qt&&lr.result===15859712&&lr.session&&dt.i("{1daeef1}","{7c01bce}",lr.session.sessionId),h.O(lr)}).catch(lr=>{h.N(lr)})}else dt.e("{1daeef1}","{3781843}"),rr()}).catch(Dt=>(h.l.clear(),ao(h.h),h.g=void 0,as(Dt,"startOrResumeSession"),Oo(3237093384),{code:3237093384,subSessionId:Vt}))}function qs(h){return h.C.type===-1||!!h.C.token}function Oo(h,ut){const St=Ct.trace.getActiveSpan();St&&(Fo(h)?(St.setAttribute("error",!1),St.setAttribute("error.description",Uo(h))):h==15859712?St.setAttribute("error",!1):(St.setAttribute("error",!0),St.setAttribute("error.description",ut??Uo(h))))}function ns(h,ut){let St=h.protocol;return ut&&h.v.has(ut)?(h=h.v.get(ut))!==void 0&&(St+=h.server,h.port!=0&&(St+=":"+h.port)):St+=h.serverAddress,St+"/v2/session/"+ut}function Go(h,ut,St,xt,Ot,Vt){var Dt;const Ft=Yt=>!Fo(Yt)&&(Yt!==15859712||ut!==3);let Qt={method:(()=>{switch(ut){case 0:return"POST";case 2:return"DELETE";case 1:case 4:return"PUT";default:return"GET"}})(),headers:h.o.headers,body:xt,retryCount:h.o.retryCount,timeout:h.o.timeout};ut!==2&&ut!==4||(Qt.keepalive=!0,h.u&&h.u.browser=="Chrome"&&!Kt(h.u,81)&&(Qt.keepalive=!1));const rr=performance.now();let nr=function(Yt,dr,ir){return{url:Yt,verb:dr,statusCode:"0",requestStatusCode:"",sessionId:ir??"",subSessionId:uo.subSessionId,requestId:"",serverId:"",callDuration:0,response:"None"}}(St,(Dt=Qt.method)!==null&&Dt!==void 0?Dt:"",Vt);nr.statusCode="0";let lr="";return It(St,Qt,h.C,Ot).then(Yt=>{lr=Yt.data;var dr=performance.now();if(nr.statusCode=Yt.status.toString(),nr.callDuration=Math.round(dr-rr),!Yt.data)throw dt.e("{1daeef1}","{ea40865}"),new SyntaxError("The response from server does not contain any data");try{var ir=JSON.parse(Yt.data)}catch(_r){throw nr.response=Yt.data,_r}if(!ir.requestStatus)throw dt.e("{1daeef1}","{862f264}",js(Yt.data)),new SyntaxError("RequestStatus missing in response");Yt=ir.requestStatus.serverId.toUpperCase(),nr.requestId=ir.requestStatus.requestId,nr.serverId=Yt,nr.requestStatusCode=ir.requestStatus.statusDescription;var Xt,br,Tr,Sr=3237093632;if((dr=ir.requestStatus).statusCode!==void 0){var Mr=dr.statusCode;Mr==1?Sr=15859712:0<Mr&&255>Mr&&(Sr=3237093632+Mr),Sr!=3237093636&&Sr!=3237093672||!dr.unifiedErrorCode||(Sr=dr.unifiedErrorCode)}if(dr.unifiedErrorCode&&dt.i("{1daeef1}","{d2c9cc8}",$(dr.unifiedErrorCode)),Yt={result:Sr,kd:ir,serverId:Yt},dr=ir.requestStatus,Sr=Ct.trace.getActiveSpan()){Mr=new Map([["host.dc",(Xt=dr.serverId)!==null&&Xt!==void 0?Xt:""],["request.id",(br=dr.requestId)!==null&&br!==void 0?br:""],["request.status",(Tr=dr.statusDescription)!==null&&Tr!==void 0?Tr:""]]);for(const[_r,Er]of Mr)Sr.setAttribute(_r,Er)}if(ut===5)(ir=ir.sessions)&&(Yt.activeSessions=Al(h,ir));else if(ut!==2){var gr;(Xt=ir.session)&&(Yt.session=Sl(h,Xt),(br=Ct.trace.getActiveSpan())==null||br.setAttribute("session.status",(gr=Xt.status)!==null&&gr!==void 0?gr:""),nr.sessionId=Yt.session.sessionId),(ir=ir.otherUserSessions)&&(Yt.activeSessions=Al(h,ir),Yt.activeSessions.length&&dt.d("{1daeef1}","{ba4be1c}",Yt.activeSessions.length))}return nr&&Ft(Yt.result)&&(Vn(nr),nr=void 0),Yt}).catch(Yt=>{let dr={result:3237089282};const ir=performance.now();if(Yt.code){var Xt=3237093384;(Yt=Yt.code)===3237089281?Xt=15868417:Yt===3237089282?Xt=3237089282:Yt===3237093377?Xt=3237093377:Yt===3237093379?Xt=3237093379:Yt===3237089283?Xt=3237089283:Yt==15867905&&(Xt=15867907),dr.result=Xt}else Xt=!1,(Yt instanceof SyntaxError||Yt instanceof TypeError&&Yt.message&&Yt.message.includes("Cannot read property"))&&(Xt=!0,dt.e("{1daeef1}","{d8979bb}",Yt.name,Yt.message)),Xt?(dr.result=3237093379,dt.e("{1daeef1}","{04bcd6f}",js(lr))):(dr.result=3237093384,dt.e("{1daeef1}","{94d55bb}",Yt,Yt.stack),Yn(Yt,"performSessionRequest","sessioncontrolimpl.ts"));return nr&&Ft(dr.result)&&(nr.callDuration=Math.round(ir-rr),Vn(nr)),dt.e("{1daeef1}","{9c647aa}",Qt.method,St),dt.e("{1daeef1}","{200d7ba}",dr.result,Uo(dr.result)),dr})}function as(h,ut){dt.e("{1daeef1}","{32f1296}",ut,h.message),dt.e("{1daeef1}","{94d55bb}",h,h.stack),Yn(h,ut,"sessioncontrolimpl.ts")}function Sl(h,ut){var St;let xt={sessionId:ut.sessionId,subSessionId:"",appId:0,appLaunchMode:0,state:Fs(ut.status),zoneAddress:"",zoneName:"",deviceId:"",gpuType:"",monitorSettings:[],connectionInfo:[],finalizedStreamingFeatures:ut.finalizedStreamingFeatures};if(xt.appId=ut.sessionRequestData?ut.sessionRequestData.appId:0,ut.connectionInfo){var Ot=ut.connectionInfo;if(h.clientPlatformName==="browser"){let Dt=!1;for(var Vt of Ot)if(Vt.usage===2){Dt=!0,xt.connectionInfo.push(Vt);const Ft={ip:"",port:49100,appLevelProtocol:5,protocol:1,usage:14};Vt=Vt.ip.split("."),Ft.ip=Vt[0]+"-"+Vt[1]+"-"+Vt[2]+"-"+Vt[3],Ft.ip+=ut.sessionControlInfo.ip.substring(ut.sessionControlInfo.ip.indexOf(".")),dt.d("{1daeef1}","{cf7d7ea}",Ft.ip),xt.connectionInfo.push(Ft);break}Dt||(xt.connectionInfo=Ot)}else xt.connectionInfo=Ot}switch(ut.monitorSettings&&(xt.monitorSettings=ut.monitorSettings),ut.gpuType&&(xt.gpuType=ut.gpuType),(St=ut.sessionRequestData)===null||St===void 0?void 0:St.appLaunchMode){case 3:xt.appLaunchMode=2;break;case 2:xt.appLaunchMode=1}return ut.sessionControlInfo&&(St=ut.sessionControlInfo.ip,ut=ut.sessionControlInfo.port,St&&ut&&(h.v.has(xt.sessionId)&&(((Ot=h.v.get(xt.sessionId))==null?void 0:Ot.server)===St&&(Ot==null?void 0:Ot.port)===ut||dt.i("{1daeef1}","{f09f5be}",xt.sessionId,Ot==null?void 0:Ot.server,Ot==null?void 0:Ot.port,St,ut)),h.v.set(xt.sessionId,{server:St,port:ut})),xt.zoneAddress=St,xt.zoneName=St.split(".")[0].toUpperCase()),xt}function Al(h,ut){return ut.map(St=>Sl(h,St))}function ss(h,ut,St,xt,Ot,Vt,Dt){const Ft=()=>{rs(h);let lr=ns(h,ut),Yt={action:6,adUpdates:Array.from(h.h)};dt.d("{1daeef1}","{dbca4b1}",JSON.stringify(Yt)),ao(h.h),Go(h,4,lr,JSON.stringify(Yt),St,ut).then(dr=>{xt(dr)}).catch(dr=>Ot(dr))};for(var Qt=h.h.length-1,rr=0;1<=Qt;)h.h[Qt].adAction===3&&h.h[Qt-1].adAction===2?(h.h.splice(Qt-1,2),rr++,Qt-=2):h.h[Qt-1].adAction===3?Qt--:Qt-=2;rr&&dt.d("{1daeef1}","{98a2816}",rr),rr=!1,Qt=1e3*h.m.adsWaitTimeoutS;const nr=h.h.length;if(nr&&(h.h[nr-1].adAction===4&&1<h.l.size||h.h[nr-1].adAction===2?Qt=h.m.adsThrottleIntervalMS:rr=!0),rr)Rt(Et(),"AdUpdateRequest",Ft);else{rr=new Promise(Yt=>{h.h.g=Yt});const lr=new kt(Qt,St.signal);Promise.race([lr.promise,rr]).then(()=>{h.h.g=void 0,lr.cancel(),h.h.length?h.h.length==nr?Rt(Et(),"AdUpdateRequest",Ft):ss(h,ut,St,xt,Ot,Vt,Dt):(dt.w("{1daeef1}","{5e1dfd0}"),Dt())}).catch(Yt=>{h.h.g=void 0,lr.h?(dt.i("{1daeef1}","{d7114d7}"),Vt()):Ot(Yt)})}}function El(h,ut,St){var xt,Ot,Vt;return St?h=ns(h,St):(St=(xt=ut.serverAddress)!==null&&xt!==void 0?xt:h.serverAddress,h=h.protocol+St+"/v2/session"),(h+="?keyboardLayout="+((Ot=ut.keyboardLayout)!==null&&Ot!==void 0?Ot:"en_US"))+"&languageCode="+((Vt=ut.clientLocale)!==null&&Vt!==void 0?Vt:"en_US")}function _l(h,ut,St,xt){var Ot,Vt,Dt,Ft,Qt,rr,nr,lr,Yt;let dr;switch(ut.appLaunchMode){case 2:dt.d("{1daeef1}","{6d5cf87}"),dr=3;break;case 1:dr=2;break;default:dr=1}let ir=(Dt=(Vt=(Ot=ut.monitorSettings)===null||Ot===void 0?void 0:Ot[0])===null||Vt===void 0?void 0:Vt.sdrHdrMode)!==null&&Dt!==void 0?Dt:0;if(rn.hdr){ir=1;for(const Xt of ut.monitorSettings)Xt.sdrHdrMode=1}Ot={audioMode:2,remoteControllersBitmap:(Ft=ut.remoteControllersBitmap)!==null&&Ft!==void 0?Ft:0,sdrHdrMode:ir,networkTestSessionId:null,availableSupportedControllers:[],clientVersion:"29.0",deviceHashId:h.deviceId,internalTitle:null,clientPlatformName:h.clientPlatformName,metaData:[{key:"SubSessionId",value:xt},{key:"wssignaling",value:rn.fe?"1":"0"}],surroundAudioInfo:0,clientTimezoneOffset:(Qt=ut.clientTimeZoneOffset)!==null&&Qt!==void 0?Qt:-6e4*new Date().getTimezoneOffset(),clientIdentification:"GFN-PC",parentSessionId:null,appId:ut.appId,streamerVersion:1,clientRequestMonitorSettings:ut.monitorSettings,appLaunchMode:dr,sdkVersion:"1.0",enhancedStreamMode:1,useOps:!0,clientDisplayHdrCapabilities:null,accountLinked:(rr=ut.accountLinked)!==null&&rr!==void 0&&rr,partnerCustomData:(nr=ut.partnerCustomData)!==null&&nr!==void 0?nr:"",enablePersistingInGameSettings:(lr=ut.enablePersistingInGameSettings)!==null&&lr!==void 0&&lr,secureRTSPSupported:!1,userAge:(Yt=ut.userAge)!==null&&Yt!==void 0?Yt:0,requestedStreamingFeatures:ut.streamingFeatures},rn.ee||h.clientPlatformName==="browser"?Ot.metaData.push({key:"GSStreamerType",value:"WebRTC"}):Ot.secureRTSPSupported=!0;for(const Xt in ut.metaData)Ot.metaData.push({key:Xt,value:ut.metaData[Xt]});return h=JSON.stringify(St?{action:2,data:"RESUME",sessionRequestData:Ot,metaData:[]}:{sessionRequestData:Ot}),dt.i("{1daeef1}","{c6c3ed4}",St?"PUT":"POST",hr(h)),h}function _s(h,ut,St,xt){var Ot,Vt,Dt;if(h.g)try{const Ft={code:ut,subSessionId:(Ot=h.g.subSessionId)!==null&&Ot!==void 0?Ot:"",session:h.g.ug,zoneName:St,activeSessions:xt},Qt=h.g.Kd;Qt.result=$(ut),Qt.zoneName=St??"",Qt.sessionId=(Vt=h.g.sessionId)!==null&&Vt!==void 0?Vt:"",Qt.launchDuration+=performance.now()-h.g.startTime,Hn(h.g.Kd),Oo(ut),dt.d("{1daeef1}","{c4902fa}",$(ut),(Dt=h.g.sessionId)!==null&&Dt!==void 0?Dt:""),h.g.resolve(Ft),h.g=void 0,h.l.clear(),ao(h.h)}catch(Ft){h.g&&(h.g.reject(Ft),h.g=void 0)}}var Cl=class{constructor(){var h,ut,St,xt,Ot,Vt,Dt,Ft,Qt,rr,nr,lr,Yt,dr,ir,Xt,br,Tr,Sr,Mr,gr,_r;let Er;this.v=new Map,this.o={...tt},this.C={type:1},this.s=new Map,this.protocol="https://",this.h=new co,this.l=new Map,this.clientPlatformName=this.deviceId=this.serverAddress="",Er=0+((ut=(h=rn.Ga.pmCommunication)===null||h===void 0?void 0:h.httpConnectionTimeout)!==null&&ut!==void 0?ut:0),Er+=(xt=(St=rn.Ga.pmCommunication)===null||St===void 0?void 0:St.httpDataReceiveTimeout)!==null&&xt!==void 0?xt:0,this.o.timeout=Er?1e3*Er:13e3,this.o.retryCount=(Vt=(Ot=rn.Ga.pmCommunication)===null||Ot===void 0?void 0:Ot.httpRetryCount)!==null&&Vt!==void 0?Vt:3,this.o.hg=(Ft=(Dt=rn.Ga.pmCommunication)===null||Dt===void 0?void 0:Dt.httpBackOffDelay)!==null&&Ft!==void 0?Ft:500,this.m={wg:(rr=(Qt=rn.Ga.pmCommunication)===null||Qt===void 0?void 0:Qt.pollingIntervalMin)!==null&&rr!==void 0?rr:1e3,vg:(lr=(nr=rn.Ga.pmCommunication)===null||nr===void 0?void 0:nr.pollingIntervalMax)!==null&&lr!==void 0?lr:1e4,step:(dr=(Yt=rn.Ga.pmCommunication)===null||Yt===void 0?void 0:Yt.pollingIntervalStep)!==null&&dr!==void 0?dr:1e3,Jf:(Xt=(ir=rn.Ga.pmCommunication)===null||ir===void 0?void 0:ir.pollingQueueSizePerStep)!==null&&Xt!==void 0?Xt:50,adsPollingIntervalMinMS:(Tr=(br=rn.Ga.pmCommunication)===null||br===void 0?void 0:br.adsPollingIntervalMinMS)!==null&&Tr!==void 0?Tr:3e3,adsThrottleIntervalMS:(Mr=(Sr=rn.Ga.pmCommunication)===null||Sr===void 0?void 0:Sr.adsThrottleIntervalMS)!==null&&Mr!==void 0?Mr:2e3,adsWaitTimeoutS:(_r=(gr=rn.Ga.pmCommunication)===null||gr===void 0?void 0:gr.adsWaitTimeoutS)!==null&&_r!==void 0?_r:600}}setAuthInfo(h){this.C=h}setNetworkType(h){uo.setNetworkType(h)}startSession(h,ut,St){return Rt(Et(),"StartSession",()=>(rs(this),$s(this,h,ut,St)))}resumeSession(h,ut,St,xt){return Rt(Et(),"ResumeSession",()=>(rs(this),$s(this,ut,St,xt,h)))}deleteSession(h,ut){return Rt(Et(),"DeleteSession",()=>(rs(this),qs(this)?Go(this,2,ns(this,h),"",ut,h).then(St=>(St.result==15859712?(this.v.delete(h),dt.d("{1daeef1}","{6206c13}",h)):dt.e("{1daeef1}","{4de47e3}",h,$(St.result)),Oo(St.result),St.result)).catch(St=>(as(St,"deleteSession"),Oo(3237093384),3237093384)):(dt.e("{1daeef1}","{4fed44a}"),Oo(3237085186),Promise.resolve(3237085186))))}getActiveSessions(h){return Rt(Et(),"GetSessionList",()=>(rs(this),qs(this)?Go(this,5,this.protocol+this.serverAddress+"/v2/session","",h).then(ut=>(Oo((ut={code:ut.result,activeSessions:ut.activeSessions,zoneName:ut.serverId}).code),ut.code!==15859712?dt.e("{1daeef1}","{9d2bb75}",$(ut.code)):dt.d("{1daeef1}","{081857f}"),ut)).catch(ut=>(as(ut,"getActiveSessions"),Oo((ut={code:3237093384}).code),ut)):(dt.e("{1daeef1}","{dc27839}"),Oo(3237085186),Promise.resolve({code:3237085186}))))}getSessionInfo(h,ut){return Rt(Et(),"GetSession",()=>Go(this,3,ns(this,h),"",ut,h).then(St=>((St={code:St.result,session:St.session,zoneName:St.serverId}).code!==15859712?dt.e("{1daeef1}","{021d0f4}",$(St.code)):dt.d("{1daeef1}","{fa53c7c}"),St)).catch(St=>(as(St,"getSessionInfo"),Oo((St={code:3237093384}).code),St)))}I(){return!!this.g}updateAdState(h){if(!this.I())return dt.e("{1daeef1}","{20d9281}"),3237085186;const ut=this.l.get(h.adId);if(!ut)return dt.e("{1daeef1}","{74daa9c}",h.adId),3237093386;const St=function(xt){switch(xt){case 1:return 2;case 2:return 3;case 3:return 4;case 4:return 5;case 5:return 6;default:return 0}}(h.adAction);if(!function(xt,Ot){switch(Ot){case 2:return xt==1||xt==0;case 3:case 5:return xt==2||xt==4;case 4:return xt==3;case 6:return xt!=5;default:return!1}}(ut.ed,St))return dt.e("{1daeef1}","{09d8184}",h.adAction,h.adId,ut.ed),3237093386;if(this.h.length){const xt=this.h[this.h.length-1].adId;if(xt!==h.adId){const Ot=this.h[this.h.length-1].adAction;if(Ot!=4&&Ot!=5)return dt.e("{1daeef1}","{c161587}",xt),3237093386}}return h.clientTimestamp||(h.clientTimestamp=Math.round(Date.now()/1e3)),this.h.push(h),ut.ed=St,this.l.set(h.adId,ut),15859712}M(){var h,ut;this.g&&Go(this,3,ns(this,(h=this.g.sessionId)!==null&&h!==void 0?h:""),"",this.g.Tc,(ut=this.g.sessionId)!==null&&ut!==void 0?ut:"").then(St=>{this.O(St)}).catch(St=>{this.N(St)})}N(h){dt.e("{1daeef1}","{e3be7ea}",h.message),Yn(h,"processSessionSetupException","sessioncontrolimpl.ts"),_s(this,3237093384)}O(h){var ut,St,xt;if(this.g){var Ot=()=>{_s(this,Vt.dd?15867906:15867905)},Vt=this.g;if(h.session&&(h.session.subSessionId=this.g.subSessionId,this.g.ug=h.session,this.g.sessionId=h.session.sessionId,Vt.dd=h.kd.session.seatSetupInfo.seatSetupStep==1),h.result===15859712&&h.session){const Dt=h.session;Dt.state==="ready_for_connection"||Dt.state==="streaming"?(Dt.state=="streaming"&&function(){var Ft=uo;const Qt=new vo({key1:"InvalidSessionStateTransition",key2:"Streaming",key3:"",key4:"",key5:"",moduleName:"GRID_SERVER",networkType:Ft.networkType,overrideConfigType:rn.Vb.type,overrideConfigVersion:rn.Vb.version,cmsId:String(Ft.cmsId),sessionId:Ft.sessionId,subSessionId:Ft.subSessionId});Ft.h(Qt)}(),dt.i("{1daeef1}","{30d6f44}",(ut=this.g.sessionId)!==null&&ut!==void 0?ut:""),_s(this,15859712,h.serverId)):Dt.state=="initializing"||Dt.state=="resuming"?(ut=function(Ft,Qt,rr,nr){var lr,Yt,dr,ir,Xt,br,Tr="Configuring",Sr=0;if(Qt.seatSetupInfo)switch(Qt.seatSetupInfo.seatSetupStep){case 0:Tr="Connecting";break;case 1:Tr="InQueue",Sr=Qt.seatSetupInfo.queuePosition<rr?Qt.seatSetupInfo.queuePosition:rr;break;case 5:Tr="PreviousSessionCleanup";break;default:Sr=0}if(rr={sessionId:Qt.sessionId,subSessionId:nr,queuePosition:Sr,eta:(Yt=(lr=Qt.seatSetupInfo)===null||lr===void 0?void 0:lr.seatSetupEta)!==null&&Yt!==void 0?Yt:0,progressState:Tr,isAdsRequired:Qt.sessionAdsRequired,ads:[]},lr=new Map(Ft.l),Ft.l.clear(),Qt.sessionAds)for(Yt=Qt.sessionAds.length,Tr=0;Tr<Yt;Tr++){if((nr=Qt.sessionAds[Tr]).adState==5||nr.adState==6)continue;Sr=nr.adId,Ft.l.set(Sr,{Xg:nr.adState,ed:(ir=(dr=lr.get(Sr))===null||dr===void 0?void 0:dr.ed)!==null&&ir!==void 0?ir:0}),Sr={adId:Sr,adState:nr.adState,adUrl:nr.adUrl,adLengthInSeconds:nr.adLengthInSeconds,adMediaFiles:[]};const Mr=(br=(Xt=nr.adMediaFiles)===null||Xt===void 0?void 0:Xt.length)!==null&&br!==void 0?br:0;for(let gr=0;gr<Mr;gr++){const _r=nr.adMediaFiles[gr];Sr.adMediaFiles.push({mediaFileUrl:_r.mediaFileUrl,encodingProfile:_r.encodingProfile})}rr.ads.push(Sr)}return rr}(this,h.kd.session,this.g.Jd,this.g.subSessionId),this.g.Uf(ut),Vt.dd&&(this.g.Jd=ut.queuePosition),ut.ads.length?ss(this,(St=Vt.sessionId)!==null&&St!==void 0?St:"",Vt.Tc,this.O.bind(this),this.N.bind(this),Ot,this.M.bind(this)):new kt(function(Ft,Qt){let rr=Ft.m.wg;return Qt.seatSetupInfo.seatSetupStep===1&&Ft.m.Jf!=0&&(rr+=Math.floor(Qt.seatSetupInfo.queuePosition/Ft.m.Jf)*Ft.m.step),Qt.sessionAdsRequired&&(rr=Math.max(rr,Ft.m.adsPollingIntervalMinMS)),Math.min(rr,Ft.m.vg)}(this,h.kd.session),(xt=this.g.Tc)===null||xt===void 0?void 0:xt.signal).promise.then(this.M.bind(this)).catch(Ot)):(dt.e("{1daeef1}","{ce47cd1}",js(JSON.stringify(h.kd))),_s(this,3237093378,h.serverId))}else h.result===15867907?Ot():_s(this,h.result,h.serverId,h.activeSessions)}}};function js(h){return hr(h).replace(/("clientIp" *: *")(\b\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\b)(?=")/g,"$1***")}var ds={Success:15859712,InvalidOperation:3237085186,NetworkError:3237089282,GetActiveSessionServerError:3237089283,AuthTokenNotUpdated:3237093377,SessionFinishedState:3237093378,ResponseParseFailure:3237093379,InvalidServerResponse:3237093381,PutOrPostInProgress:3237093382,GridServerNotInitialized:3237093383,DOMExceptionInSessionControl:3237093384,InvalidAdStateTransition:3237093386,SessionServerErrorBegin:3237093632,RequestForbidden:3237093634,ServerInternalTimeout:3237093635,ServerInternalError:3237093636,ServerInvalidRequest:3237093637,ServerInvalidRequestVersion:3237093638,SessionListLimitExceeded:3237093639,InvalidRequestDataMalformed:3237093640,InvalidRequestDataMissing:3237093641,RequestLimitExceeded:3237093642,SessionLimitExceeded:3237093643,InvalidRequestVersionOutOfDate:3237093644,SessionEntitledTimeExceeded:3237093645,AuthFailure:3237093646,InvalidAuthenticationMalformed:3237093647,InvalidAuthenticationExpired:3237093648,InvalidAuthenticationNotFound:3237093649,EntitlementFailure:3237093650,InvalidAppIdNotAvailable:3237093651,InvalidAppIdNotFound:3237093652,InvalidSessionIdMalformed:3237093653,InvalidSessionIdNotFound:3237093654,EulaUnAccepted:3237093655,MaintenanceStatus:3237093656,ServiceUnAvailable:3237093657,SteamGuardRequired:3237093658,SteamLoginRequired:3237093659,SteamGuardInvalid:3237093660,SteamProfilePrivate:3237093661,InvalidCountryCode:3237093662,InvalidLanguageCode:3237093663,MissingCountryCode:3237093664,MissingLanguageCode:3237093665,SessionNotPaused:3237093666,EmailNotVerified:3237093667,InvalidAuthenticationUnsupportedProtocol:3237093668,InvalidAuthenticationUnknownToken:3237093669,InvalidAuthenticationCredentials:3237093670,SessionNotPlaying:3237093671,InvalidServiceResponse:3237093672,AppPatching:3237093673,GameNotFound:3237093674,NotEnoughCredits:3237093675,InvitationOnlyRegistration:3237093676,RegionNotSupportedForRegistration:3237093677,SessionTerminatedByAnotherClient:3237093678,DeviceIdAlreadyUsed:3237093679,ServiceNotExist:3237093680,SessionExpired:3237093681,SessionLimitPerDeviceReached:3237093682,ForwardingZoneOutOfCapacity:3237093683,RegionNotSupportedIndefinitely:3237093684,RegionBanned:3237093685,RegionOnHoldForFree:3237093686,RegionOnHoldForPaid:3237093687,AppMaintenanceStatus:3237093688,ResourcePoolNotConfigured:3237093689,InsufficientVmCapacity:3237093690,InsufficientRouteCapacity:3237093691,InsufficientScratchSpaceCapacity:3237093692,RequiredSeatInstanceTypeNotSupported:3237093693,ServerSessionQueueLengthExceeded:3237093694,RegionNotSupportedForStreaming:3237093695,SessionForwardRequestAllocationTimeExpired:3237093696,SessionForwardGameBinariesNotAvailable:3237093697,GameBinariesNotAvailableInRegion:3237093698,UekRetrievalFailed:3237093699,EntitlementFailureForResource:3237093700,SessionInQueueAbandoned:3237093701,MemberTerminated:3237093702,SessionRemovedFromQueueMaintenance:3237093703,ZoneMaintenanceStatus:3237093704,GuestModeCampaignDisabled:3237093705,RegionNotSupportedAnonymousAccess:3237093706,InstanceTypeNotSupportedInSingleRegion:3237093707,InvalidZoneForQueuedSession:3237093710,SessionWaitingAdsTimeExpired:3237093711,UserCancelledWatchingAds:3237093712,StreamingNotAllowedInLimitedMode:3237093713,ForwardRequestJPMFailed:3237093714,MaxSessionNumberLimitExceeded:3237093715,GuestModePartnerCapacityDisabled:3237093716,SessionRejectedNoCapacity:3237093717,SessionServerErrorEnd:3237093887,SessionSetupCancelled:15867905,SessionSetupCancelledDuringQueuing:15867906,RequestCancelled:15867907,NoInternetDuringSessionSetup:15868417},Tl=At.Og;function Us(h){var ut={ip:"",port:0,protocol:""};for(const St of h.connectionInfo)if(St.usage===14){ut.ip=St.ip,ut.port=St.port,ut.protocol=St.appLevelProtocol===5?"https":"http",ut.resourcePath=St.resourcePath;break}ut={signalConnectionInfo:ut,mediaConnectionInfo:h.connectionInfo,streamInfo:[],clientLocale:"",...h};for(const St of h.monitorSettings)ut.streamInfo.push({width:St.widthInPixels,height:St.heightInPixels,fps:St.framesPerSecond,sdrHdrMode:St.sdrHdrMode});return ut}function Cs(h){let ut=[];if(h)for(const St of h)ut.push({sessionId:St.sessionId,appId:St.appId,state:St.state,appLaunchMode:St.appLaunchMode});return ut}function Hs(h,ut,St=""){dt.d("{6bae601}","{1e04fe6}",St,ut),h.subSessionId=ut,uo.sessionId=St,Ao(ut);const xt=h.P.get(ut);xt===void 0||xt===""?h.P.set(ut,St):dt.w("{6bae601}","{7dd264b}",St)}function vs(h){return Oo(h.code,h.description),Promise.reject(h)}function Ml(h,ut){h.zoneAddress=ut.zoneAddress||h.zoneAddress,h.zoneName=ut.zoneName||h.zoneName,h.gpuType=ut.gpuType||h.gpuType}var Ps=class extends Cl{constructor(h,ut){super(),this.subSessionId="",this.P=new Map,this.R=!1,this.L=new Map,this.S=St=>{this.j.emit("TelemetryEvent",St)},this.T=St=>{this.j.emit("SessionUpdate",St),this.j.emit("ProgressUpdate",{sessionId:St.sessionId,subSessionId:St.subSessionId,queuePosition:St.queuePosition,eta:St.eta,state:St.progressState})},this.u=h,this.j=new or(ut),dt.isCallbackRegistered()||(this.R=!0,dt.setLogCallback(this.j.$.bind(this.j))),uo.configure({option:this.S})}initialize(h){var ut;dt.i("{6bae601}","{6802390}","0.66.9"),wl(this,{deviceId:(ut=h.deviceHashId)!==null&&ut!==void 0?ut:"",...h,clientStreamer:h.clientStreamer.toString()}),(h=uo).telemetryEventIds={},h.sessionId="",h.subSessionId="",h.cmsId="",dt.d("{6bae601}","{5af3344}")}uninitialize(){this.cancelSessionSetup(),this.R&&dt.setLogCallback(),this.j.removeAllListeners()}addListener(h,ut){this.j.addListener(h,ut)}removeListener(h,ut){this.j.removeListener(h,ut)}updateTelemetryEventIds(h){uo.updateTelemetryEventIds(h)}getAllActiveSessions(){Rt(Et(),"GetSessionList",()=>(rs(this),async function(h){dt.d("{6bae601}","{1aef200}"),h.serverAddress?(await Go(h,5,h.protocol+h.serverAddress+"/v2/session","").then(ut=>{let St={sessionList:Cs(ut.activeSessions)};if(ut.result!=15859712){let xt={code:ut.result,description:Uo(ut.result)};St.error=xt,dt.e("{6bae601}","{9d2bb75}",$(xt.code))}else dt.d("{6bae601}","{081857f}");Oo(ut.result),h.j.emit("ActiveSessionsResult",St)}).catch(ut=>{dt.e("{6bae601}","{63f9b57}",ut.message),dt.e("{6bae601}","{94d55bb}",ut,ut.stack),Yn(ut,"getAllActiveSessions","gridserver.ts"),ut={sessionList:[],error:{code:3237093384,description:Uo(3237093384)}},Oo(3237093384),h.j.emit("ActiveSessionsResult",ut)}),dt.d("{6bae601}","{a9e5439}")):(h.j.emit("ActiveSessionsResult",{sessionList:[],error:{code:3237093383,description:"GridServer not initialized"}}),Oo(3237093383))}(this)))}getSessionId(){var h;return(h=this.P.get(this.subSessionId))!==null&&h!==void 0?h:""}getSubSessionId(){return this.subSessionId}putOrPostSession(h,ut,St){return Rt(Et(),St?"PutSession":"PostSession",()=>(rs(this),function(xt,Ot,Vt){var Dt;const Ft=!!Vt;if(Hs(xt,Pt(),Vt),!xt.serverAddress)return vs({code:3237093383,description:"GridServer not initialized"});if(xt.F)return vs({code:3237093382,description:"Previous PutOrPost call is still in progress"});uo.cmsId=Ot.appId,xt.zoneName=void 0,xt.zoneAddress=void 0,xt.gpuType=void 0;const Qt=qn(xt.serverAddress,Ft,Vt);Qt.networkSessionId=(Dt=Ot.networkSessionId)!==null&&Dt!==void 0?Dt:"",Ot=function(Yt){var dr;const ir={monitorSettings:[],...Yt};if(ir.monitorSettings.length===0)for(const Xt of(dr=Yt.streamParams)!==null&&dr!==void 0?dr:[])ir.monitorSettings.push({heightInPixels:Xt.height,framesPerSecond:Xt.fps,widthInPixels:Xt.width});return ir}(Ot);let rr=El(xt,Ot,Vt),nr=_l(xt,Ot,Ft,xt.subSessionId),lr=performance.now();return new Promise((Yt,dr)=>{const ir=new AbortController;xt.F=ir,Go(xt,Ft?1:0,rr,nr,ir,Vt).then(Xt=>{var br,Tr,Sr,Mr,gr;let _r;Qt.launchDuration=Math.round(performance.now()-lr),(br=Xt.session)!==null&&br!==void 0&&br.sessionId&&(Qt.sessionId=(Tr=Xt.session)===null||Tr===void 0?void 0:Tr.sessionId,Vt=(Sr=Xt.session)===null||Sr===void 0?void 0:Sr.sessionId),xt.zoneName=Xt.serverId||xt.zoneName,Xt.session&&(_r=Us(Xt.session),_r.subSessionId=xt.subSessionId,Ml(xt,_r)),Qt.zoneName=(Mr=xt.zoneName)!==null&&Mr!==void 0?Mr:"",ir.signal.aborted&&!Fo(Xt.result)&&(Xt.result=15867905,dt.d("{6bae601}","{3ec0e11}")),Xt.result==15859712?(dt.d("{6bae601}","{30536f4}",Vt),Hs(xt,xt.getSubSessionId(),Vt),((gr=Xt.session)===null||gr===void 0?void 0:gr.state)=="ready_for_connection"?(Qt.result=$(15859712),Hn(Qt)):xt.L.set(Qt.sessionId,Qt),Oo(Xt.result),Yt(_r)):(Xt.result===15867907&&(Xt.result=15867905),Xt={code:Xt.result,sessionId:Vt,description:Uo(Xt.result),sessionList:Cs(Xt.activeSessions)},dt.e("{6bae601}","{17f93f3}",$(Xt.code)),Qt.result=$(Xt.code),Hn(Qt),Oo(Xt.code),dr(Xt))}).catch(Xt=>{let br={code:3237093384,sessionId:Vt,description:Uo(3237093384)};dt.e("{6bae601}","{4318505}",Xt.message),dt.e("{6bae601}","{94d55bb}",Xt,Xt.stack),Yn(Xt,"putOrPostSession","gridserver.ts"),Qt.result=$(br.code),Hn(Qt),Oo(br.code),dr(br)})}).finally(()=>{xt.F=void 0})}(this,h,St)))}getSession(h,ut){return Rt(Et(),"GetSession",()=>(rs(this),function(St,xt,Ot){return St.serverAddress?Ot?new Promise((Vt,Dt)=>{var Ft=ns(St,xt),Qt=new URL(Ft).hostname;(Ft=St.L.get(xt))?St.L.delete(xt):(dt.e("{6bae601}","{bb9b2e3}",xt),Ft=qn(Qt,!1,xt)),Qt=new AbortController,St.H=Qt,St.g={resolve:Vt,reject:Dt,sessionId:xt,subSessionId:St.subSessionId,Uf:St.T,Jd:Number.MAX_VALUE,dd:!1,Tc:Qt,startTime:performance.now(),Kd:Ft},St.M()}).then(Vt=>{let Dt;if(Vt.session&&(Dt=Us(Vt.session),Ml(St,Dt)),Vt.code===15859712&&Dt)return Dt;throw{code:Vt.code,description:Uo(Vt.code)}}).finally(()=>{St.l.clear(),ao(St.h),St.g=void 0}):(Ot=ns(St,xt),Go(St,3,Ot,"",void 0,xt).then(Vt=>{if(Oo(Vt.result),Vt.result===15859712&&Vt.session)return Us(Vt.session);throw{code:Vt.result,description:Uo(Vt.result)}})):vs({code:3237093383,description:"GridServer not initialized"})}(this,h,ut)))}sendDeleteRequest(h){return Rt(Et(),"DeleteSession",()=>(rs(this),function(ut,St){if(!ut.serverAddress)return vs({code:3237093383,description:"Gridserver not initialized"});let xt=ns(ut,St);return new Promise((Ot,Vt)=>{dt.d("{6bae601}","{bbad3ce}",St),Go(ut,2,xt,"",void 0,St).then(Dt=>{if(Dt.result==15859712)dt.d("{6bae601}","{6206c13}",St),Ot();else{let Ft={code:Dt.result,description:Uo(Dt.result),sessionId:St};dt.e("{6bae601}","{4de47e3}",St,$(Dt.result)),Vt(Ft)}Oo(Dt.result)}).catch(Dt=>{const Ft={code:3237093384,description:Uo(3237093384)};dt.e("{6bae601}","{c4f620c}",Dt.message),dt.e("{6bae601}","{94d55bb}",Dt,Dt.stack),Yn(Dt,"sendDeleteRequestImpl","gridserver.ts"),Vt(Ft)})})}(this,h)))}cancelSessionSetup(){var h,ut;dt.i("{6bae601}","{c73e640}"),(h=this.F)===null||h===void 0||h.abort(),(ut=this.H)===null||ut===void 0||ut.abort(),this.H=this.F=void 0}getZoneName(){var h;return(h=this.zoneName)!==null&&h!==void 0?h:""}getZoneAddress(){var h;return(h=this.zoneAddress)!==null&&h!==void 0?h:""}getGpuType(){var h;return(h=this.gpuType)!==null&&h!==void 0?h:""}I(){return!!this.H}},zs=class extends Ps{constructor(){super()}getAllActiveSessions(){window.setTimeout(()=>{dt.d("{6bae601}","{b575263}"),this.j.emit("ActiveSessionsResult",{sessionList:[]})},1)}putOrPostSession(h){var ut;return dt.d("{6bae601}","{71c010f}"),Hs(this,Pt(),(ut=h.sessionId)!==null&&ut!==void 0?ut:"PassThruSessionId"),new Promise(St=>{window.setTimeout(()=>{var xt;let Ot={sessionId:this.getSessionId(),subSessionId:this.getSubSessionId(),appId:parseInt(h.appId),state:"ready_for_connection",signalConnectionInfo:{ip:"",port:49100,protocol:"http"},mediaConnectionInfo:[],streamInfo:[],appLaunchMode:h.appLaunchMode?h.appLaunchMode:0,zoneName:this.getZoneName(),zoneAddress:this.getZoneAddress(),gpuType:this.getGpuType(),clientLocale:"",finalizedStreamingFeatures:(xt=h.streamingFeatures)!==null&&xt!==void 0?xt:{}};if(this.serverAddress&&(Ot.signalConnectionInfo.ip=this.serverAddress),h.connectionInfo){Ot.mediaConnectionInfo=h.connectionInfo;for(const Vt of Ot.mediaConnectionInfo)Vt.usage===14&&(Ot.signalConnectionInfo.ip=Vt.ip,Ot.signalConnectionInfo.port=Vt.port,Ot.signalConnectionInfo.protocol=Vt.appLevelProtocol===5?"https":"http",Ot.signalConnectionInfo.resourcePath=Vt.resourcePath,dt.d("{6bae601}","{c6b8e0f}",Vt.ip,Vt.port))}if(Ot.signalConnectionInfo.ip||dt.e("{6bae601}","{a43f57e}"),h.monitorSettings)for(const Vt of h.monitorSettings)Ot.streamInfo.push({width:Vt.widthInPixels,height:Vt.heightInPixels,fps:Vt.framesPerSecond,sdrHdrMode:Vt.sdrHdrMode});else for(const Vt of h.streamParams)Ot.streamInfo.push({width:Vt.width,height:Vt.height,fps:Vt.fps});dt.d("{6bae601}","{07dc276}",Ot.sessionId),St(Ot)},1)})}getSession(){return new Promise((h,ut)=>{ut({code:-1,description:"PassthruPollingNotSupported"})})}sendDeleteRequest(){return new Promise(h=>{h()})}updateAdState(){return-1}},Ks={VIDEO:"video",AUDIO:"audio"},gs={Unknown:0,ApproachingEntitlementTimeout:1,ApproachingIdleTimeout:2,ApproachingSessionMaxTimeLimit:3,ClearUserIdleTimeOut:4},Ts={allowUnconfined:!1,preventNavigation:!1};function Gl(h){if(!((15868672^h)>>8))return 256;let ut=32769;switch(h){case 15859712:case 15867908:case 15868418:ut=0;break;case 3237093894:case 3237093899:ut=32776;break;case 3237093898:ut=32772;break;case 3237093900:ut=32773;break;case 3237093901:ut=32770;break;case 15867910:ut=1;break;default:dt.d("{c00be32}","{233ad08}",$(h))}return ut}function Rl(h){let ut=15868672;switch(h){case 256:ut=15868704;break;case 257:ut=15868705;break;case 258:ut=15868706;break;case 259:ut=15868707;break;case 260:ut=15868708;break;case 261:ut=15868709;break;case 262:ut=15868710;break;case 263:ut=15868711;break;case 264:ut=15868712;break;case 265:ut=15868713;break;case 266:ut=15868714;break;case 267:ut=15868715;break;case 268:ut=15868716;break;case 269:ut=15868719;break;case 270:ut=15868688;break;case 512:ut=15868736;break;case 513:ut=15868737;break;case 514:ut=15868738;break;case 515:ut=15868739;break;case 516:ut=15868740;break;case 517:ut=15868741;break;case 518:ut=15868742;break;case 519:ut=15868743;break;case 520:ut=15868744;break;case 521:ut=15868745;break;case 33025:ut=3237094145;break;case 33026:ut=3237094146;break;case 33027:ut=3237094147;break;case 33028:ut=3237094148;break;case 33029:ut=3237094149;break;case 33030:ut=3237094150;break;case 33031:ut=3237094151;break;case 33032:ut=3237094152;break;case 33034:ut=3237094153;break;case 33035:ut=3237094154;break;case 33040:ut=3237094155;break;case 33041:ut=3237094156;break;case 33042:ut=3237094157;break;case 37634:ut=15868718;break;case 32768:ut=3237094158;break;case 768:ut=15868717;break;case 0:ut=15868752;break;default:dt.d("{c00be32}","{1be40ed}",$(h))}return ut}function Jo(){return qr||(qr=new qy),qr}function pr(h){h.h==="white"?h.g&&(h.g.clearColor(1,0,0,1),h.g.clear(h.g.COLOR_BUFFER_BIT),h.h="red"):h.g&&(h.g.clearColor(1,1,1,1),h.g.clear(h.g.COLOR_BUFFER_BIT),h.h="white")}var qr,hn,Nn,Eo,to,Ro,Io,ko,_o,Lo,$o,No,Ho,Bo,ga,Xo,er,Pr,xr,jr,Jr,an,Xr,yn,cn,wn,Bn,zn,wo,ls,Wl,du,fu,Ju,Xu,Zu,_f,_h,x0,qy=class{constructor(){this.g=null,this.h=""}initialize(h,ut){this.u=ut,ut="ragnarok-latency-indicator";var St=document.getElementById(ut);if(St&&St instanceof HTMLCanvasElement&&St.parentElement===h.parentElement)h=St;else{if(St)do ut="ragnarok-latency-indicator"+Math.round(1e4*Math.random()),St=document.getElementById(ut);while(St);(St=document.createElement("canvas")).id=ut,St.style.position="fixed",s(this.u)?(St.style.bottom="env(safe-area-inset-bottom, 0)",St.style.right="max(24px, env(safe-area-inset-right, 0))"):(St.style.bottom="0",St.style.right="0"),St.style.width="40px",St.style.height="40px",St.style.zIndex="300",St.style.pointerEvents="none",h.insertAdjacentElement("afterend",St),h=St}this.j=h,this.j.style.display="block",this.g=this.j.getContext("webgl"),pr(this)}},Qn={},k0="",ba={type:"UNKNOWN",version:""},ep=!1,tp=!0,I0=!1,xl=!0,hu=!0,pu=!0,Il=0,Os=0,Vs=0,vu=!1,xa=!0,Ql=!1,rp=!0,Ms=!1,ip=!1,np=!1,Yl=!1,op=!0,ap=!1,Jl=!0,ys=!0,Xl=!0,sp=!0,lp=!0,Rs=0,cp=!0,up=!0,dp={};function P0(h){if(h&&(h=Number.parseInt(h),!Number.isNaN(h)))return h}function O0(h){var ut,St,xt,Ot,Vt,Dt,Ft,Qt,rr,nr,lr,Yt,dr,ir,Xt,br,Tr,Sr,Mr,gr,_r,Er,cr,kr,Wr,mn,vn,Pn,Gn,sn,kn,Fn,Tn,so,no,Mo,Yo,cs,Ir,pn,un,An,_n,On,$n,Rn,io,So,lo,Jn,eo,fo,po,na,Do;if(dt.i("{fbd6ce8}","{4acfb3a}",JSON.stringify(h)),h.clientConfigOverride&&(k0=h.clientConfigOverride),h.gxtOverrideData){var yo=JSON.parse(h.gxtOverrideData);if(yo.params)for(var Qo of yo.params)Qo.name==="ragnarok"&&(Qn=Qo.value,ba={type:"GXT",version:Qo.version})}else h.remoteConfigData&&h.remoteConfigData.ragnarok&&(Qn=JSON.parse(h.remoteConfigData.ragnarok),ba={type:"RCONFIG",version:(yo=h.remoteConfigData.version)!==null&&yo!==void 0?yo:""});if(h.isInternalUser&&(hn=h.isInternalUser),h.overrideData){Qo=new URLSearchParams(h.overrideData);let us=new URLSearchParams;for(const[xo,R0]of Qo.entries())us.append(xo.toLowerCase(),R0);if(((ut=us.get("mode"))===null||ut===void 0?void 0:ut.toLowerCase())==="lean"?(ep=!0,Nn=pu=hu=xl=tp=!1,hn=Eo=!0):((St=us.get("mode"))===null||St===void 0?void 0:St.toLowerCase())==="dev"&&(hn=Eo=!0),ut=xo=>{e:{if(xo=us.get(xo))switch(xo.toLowerCase()){case"enable":case"on":case"1":case"true":xo=!0;break e;case"disable":case"off":case"0":case"false":xo=!1;break e}xo=void 0}return xo},yo=xo=>P0(xo=us.get(xo)),St=xo=>((xo=us.get(xo))&&(xo=Number.parseFloat(xo),!Number.isNaN(xo))||(xo=void 0),xo),Qo=(xo,R0)=>(xo=us.get(xo))===null?R0:xo||void 0,I0=(tp=(xt=ut("log"))!==null&&xt!==void 0?xt:tp)&&((Ot=ut("console"))!==null&&Ot!==void 0?Ot:I0),xl=(Vt=ut("gamepad"))!==null&&Vt!==void 0?Vt:xl,hu=(Dt=ut("webrtcstats"))!==null&&Dt!==void 0?Dt:hu,pu=(Ft=ut("statsupload"))!==null&&Ft!==void 0?Ft:pu,Nn=(Qt=ut("mic"))!==null&&Qt!==void 0?Qt:Nn,to=(rr=ut("mousefilter"))!==null&&rr!==void 0?rr:to,Ro=(nr=ut("unadjustedmovement"))!==null&&nr!==void 0?nr:Ro,0<(Il=(lr=yo("bitrate"))!==null&&lr!==void 0?lr:Il)&&100>=Il&&(Il*=1e3),Yl=(Yt=ut("gamepadtest"))!==null&&Yt!==void 0?Yt:Yl,(xt=us.get("resolution"))&&((Vt=xt.toLowerCase().split("x")).length==2?(Ot=parseInt(Vt[0]),Vt=parseInt(Vt[1]),Ot&&Vt?(Os=Ot,Vs=Vt):dt.e("{fbd6ce8}","{c87835d}",xt)):dt.e("{fbd6ce8}","{c87835d}",xt)),Rs=(dr=yo("fps"))!==null&&dr!==void 0?dr:Rs,vu=(ir=ut("gamepadraf"))!==null&&ir!==void 0?ir:vu,Io=(Xt=yo("gamepadpoll"))!==null&&Xt!==void 0?Xt:Io,xa=(br=ut("advancedgestures"))!==null&&br!==void 0?br:xa,Ql=(Tr=ut("forcetouchdevice"))!==null&&Tr!==void 0?Tr:Ql,(dr=ut("touch"))!==void 0&&(ko=dr?2:0,Ql=dr),Ms=(Sr=ut("storetouch"))!==null&&Sr!==void 0?Sr:Ms,ip=(Mr=ut("storetouchgesture"))!==null&&Mr!==void 0?Mr:ip,rp=(gr=ut("touchwarp"))!==null&&gr!==void 0?gr:rp,np=(_r=ut("latency"))!==null&&_r!==void 0?_r:np,_o=Qo("deviceos",_o),Lo=Qo("devicetype",Lo),$o=Qo("clientstreamer",$o),No=Qo("clienttype",No),Ho=Qo("clientplatformname",Ho),Bo=Qo("clientid",Bo),(Sr=us.get("applaunchmode"))!==null&&(ko=P0(Sr)),op=(Er=ut("rsdmm"))!==null&&Er!==void 0?Er:op,ap=(cr=ut("rsdmmtoggle"))!==null&&cr!==void 0?cr:ap,(kr=ut("ioswars"))===null||kr===void 0||kr||(lp=sp=Jl=Xl=ys=!1),ys=(Wr=ut("audioreset"))!==null&&Wr!==void 0?Wr:ys,Jl=(mn=ut("sourcereset"))!==null&&mn!==void 0?mn:Jl,Xl=(vn=ut("autoplaychange"))!==null&&vn!==void 0?vn:Xl,ga=(Pn=St("bitsperpixel"))!==null&&Pn!==void 0?Pn:ga,Xo=(Gn=St("bitsperpixel1440p"))!==null&&Gn!==void 0?Gn:Xo,er=(sn=ut("1440p"))!==null&&sn!==void 0?sn:er,Eo=(kn=ut("stutter"))!==null&&kn!==void 0?kn:Eo,us.has("meta")){Pr={};for(const xo of us.getAll("meta"))(Er=xo.split("~")).length===2&&(Pr[Er[0]]=Er[1])}xr=(Fn=ut("haptics"))!==null&&Fn!==void 0?Fn:xr,jr=(Tn=ut("av1"))!==null&&Tn!==void 0?Tn:jr,Jr=(Do="codeclist",(so=Do=(Do=us.get(Do))?Do.split(","):void 0)!==null&&so!==void 0?so:Jr),hn=(no=ut("internaluser"))!==null&&no!==void 0?no:hn,an=(Mo=ut("hdr"))!==null&&Mo!==void 0?Mo:an,Xr=(Yo=ut("sdr10"))!==null&&Yo!==void 0?Yo:Xr,cp=(cs=ut("hotkeys"))!==null&&cs!==void 0?cs:cp,yn=(Ir=ut("forcehotkeys"))!==null&&Ir!==void 0?Ir:yn,cn=(pn=ut("synthesizegamepadhid"))!==null&&pn!==void 0?pn:cn,wn=(un=ut("synthesizedds4disabled"))!==null&&un!==void 0?un:wn,Bn=(An=ut("synthesizedds5disabled"))!==null&&An!==void 0?An:Bn,zn=(_n=ut("synthesizedds4fromds5disabled"))!==null&&_n!==void 0?_n:zn,wo=(On=ut("synthesizedds5fromds4disabled"))!==null&&On!==void 0?On:wo,ls=($n=ut("synthesizedds4fromgenericenabled"))!==null&&$n!==void 0?$n:ls,Wl=(Rn=ut("synthesizedds5fromgenericenabled"))!==null&&Rn!==void 0?Rn:Wl,du=(io=ut("synthesizedds4allgamesenabled"))!==null&&io!==void 0?io:du,fu=(So=ut("synthesizedds5allgamesenabled"))!==null&&So!==void 0?So:fu,Ju=(lo=ut("forceserverds4"))!==null&&lo!==void 0?lo:Ju,Xu=(Jn=ut("forceserverds5"))!==null&&Jn!==void 0?Jn:Xu,Zu=(eo=us.get("cursor"))!==null&&eo!==void 0?eo:Zu,_f=(fo=ut("pointerlockescape"))!==null&&fo!==void 0?fo:_f,up=(po=ut("computepressure"))!==null&&po!==void 0?po:up,_h=(na=ut("disableworkerws"))!==null&&na!==void 0?na:_h}Sn(h),x0&&V0()}function V0(){var h=Qn.avp;h&&(Qn={...Qn,...h}),(h=rn.Ga.pmCommunication)&&(h=h.avp)&&(rn.Ga.pmCommunication={...rn.Ga.pmCommunication,...h})}function N0(h,ut){var St,xt,Ot,Vt;h.G.za(void 0,(St=ut==null?void 0:ut.message)!==null&&St!==void 0?St:"",(xt=ut==null?void 0:ut.filename)!==null&&xt!==void 0?xt:"",(Ot=ut==null?void 0:ut.lineno)!==null&&Ot!==void 0?Ot:0,(Vt=ut==null?void 0:ut.colno)!==null&&Vt!==void 0?Vt:0,!0,"WorkerError")}function L0(h){h.perf.RAFTS=0,h.perf.DCSend=0,h.perf.GetStats=0,h.perf.FrameInfo=0}function D0(){var h=Co;h.h=!1,h.g&&(dt.d("{1f5ec29}","{76b05dd}"),h.g.postMessage({stopStats:!0}))}function $a(h){return performance.now()-h.j}function Gs(h,ut){var St,xt=Co;xt.h&&(ut={webrtcStats:{type:ut,stats:h},ackid:(St=xt.s)===null||St===void 0?void 0:St.g++},xt.g&&xt.g.postMessage(ut,h))}var Co=new class{constructor(){this.h=!1,this.g=null,this.j=0,this.o=[],this.m=[],this.v=!1,this.perf={RAFTS:0,DCSend:0,GetStats:0,FrameInfo:0},dt.i("{1f5ec29}","{139da36}");try{const h=URL.createObjectURL(new Blob([`
var p={size:70,version:1,name:"DEPR"},r={size:80,version:3,name:"RTPV"},t={size:48,version:1,name:"RTPA"},aa={size:88,version:1,name:"TRAA"},ba={size:44,version:1,name:"TRAV"},ca={size:12,version:1,name:"VFMD"},da={size:20,version:1,name:"PFDA"},ea={size:0,version:1,name:""};function u(a,b=!1){const d=a.m+1;try{let f;a.sessionId&&(f="x-nv-sessionid."+a.sessionId);let l=a.url;b&&(l+="&reconnect=1");let e=new WebSocket(l,f);e.onopen=()=>{var c;a.h("{48fa30b}"+d);if(e===a.g){null===(c=a.j)||void 0===c?void 0:c.F();for(const g of a.l)g.stats?e.send(g.stats):e.send(JSON.stringify(g));for(const g of a.s)w(a,g);a.s=[]}};e.onclose=c=>{var g;a.h("{6406bff}"+d);e===a.g&&(null===(g=a.j)||void 0===g?void 0:g.D({error:a.u,code:c.code,reason:c.reason,wasClean:c.wasClean}),x(a),a.u=
!1)};e.onerror=()=>{a.h("{7605058}"+d);e===a.g&&(a.u=!0)};e.onmessage=c=>{if(a.j)try{let h=JSON.parse(c.data);a.o||a.h("{523f5b9}");y(a);if(!h.hb){if(void 0!==h.ack){var g=h.ack;for(let m=a.l.length-1;0<=m;m--)a.l[m].ackid<=g&&a.l.splice(m,1)}if(void 0!==h.ackid){if(a.maxReceivedAckId<h.ackid&&(a.j.v(h),a.maxReceivedAckId=h.ackid),a.g){let m=JSON.stringify({ack:a.maxReceivedAckId});a.h("{903be10}"+m);a.g.send(m)}}else void 0===h.ack&&a.j.v(h)}}catch(h){a.C("Error in local websocket message handling: "+
h+' "'+c.data+'"')}};a.g=e}catch(f){a.g=void 0,a.C("WebSocket creation exception: "+f+" for socket "+a.m)}a.m=d}function z(a){0!==a.o&&(self.clearTimeout(a.o),a.o=0)}function x(a){a.g&&(a.g.onclose=null,a.g.onerror=null,a.g.onmessage=null,a.g.onopen=null,a.g=void 0)}function y(a){z(a);a.o=self.setTimeout(()=>{var b;a.h("{6c3505a}"+(null===(b=a.g)||void 0===b?void 0:b.readyState)+"{754f60b}"+a.m);a.g||u(a,!0);y(a)},3E3)}
function w(a,b){void 0!==b.ackid&&void 0!==b.ackid&&a.l.push(b);a.g&&(b.stats?a.g.send(b.stats):a.g.send(JSON.stringify(b)))}
var fa=class{constructor(){var a=A,b=B;this.sessionId=C;this.u=!1;this.l=[];this.s=[];this.maxReceivedAckId=this.o=0;this.url="";this.m=0;this.h=a;this.C=b}initialize(a,b,d,f=!1){this.url=a;this.maxReceivedAckId=b;this.j=d;u(this,f);this.h("{fcf6f89}"+this.m)}uninitialize(a){var b;this.maxReceivedAckId=0;this.l=[];this.s=[];this.j=void 0;z(this);null===(b=this.g)||void 0===b?void 0:b.close(a);x(this);this.h("{986b258}"+a+"{754f60b}"+this.m)}send(a){this.j&&(this.g||u(this,!0),this.g&&this.g.readyState===
WebSocket.OPEN?w(this,a):this.s.push(a))}};const E=self;let F=[],I=[];function J(a){a.h&&(a.j("{890d3ae}"+a.h),a.h=0);a.g.clear()}function ha(a){var b=K;let d=b.g.get(a.type);d||(d=[],b.g.set(a.type,d));for(const f of a.stats)d.push(f)}function ia(a){switch(a){case 0:return p;case 1:return r;case 2:return t;case 3:return ba;case 4:return aa;case 5:return ca;case 6:return da;default:return ea}}
let K=new class{constructor(a){this.j=a;this.g=new Map;this.h=0;J(this)}size(){let a=0;for(let [,b]of this.g){let d=b;for(let f of d)a+=f.byteLength}return a+=9*this.g.size}write(a,b){var d=b;for(let [g,h]of this.g){b=g;var f=h,l=d,e=d;d=f.length;var c=ia(b);let m=c.name,q=new DataView(a.buffer);for(let k=0;4>k;k++)q.setUint8(e+k,m.charCodeAt(k));q.setUint8(e+4,c.version);q.setUint16(e+5,d,!0);q.setUint16(e+7,c.size,!0);l=d=l+9;e=a;c=0;for(let k of f)f=new Uint8Array(k),e.set(f,d+c),c+=k.byteLength;
d=l+c;1===b&&this.h++}return d}}(A),C="",L="",M=null,N=void 0,O=0,P=[],Q=[],R=[],S=[],T=[],U=0;function A(a){E.postMessage({log:a})}function B(a){E.postMessage({exception:a})}function V(){F=[];I=[];J(K);P=[];Q=[];R=[];S=[];T=[]}function W(a,b,d,f,l,e){for(let c=0;4>c;c++)a.setUint8(b+c,d.charCodeAt(c));a.setUint8(b+4,f);a.setUint16(b+5,l,!0);a.setUint16(b+7,e,!0)}function X(a){return 0>a?Math.max(a,-2147483648):Math.min(a,4294967295)}
function Y(){if((F.length||I.length||K.size())&&M)try{M.ackid=U;var a=JSON.stringify(M),b=a.length,d=b+2,f=new ArrayBuffer(d);const D=new DataView(f);D.setUint16(0,b);for(b=2;b<d;++b)D.setUint8(b,a.charCodeAt(b-2));var l=new Uint8Array(f),e=13*F.length,c=72*I.length,g=12*P.length,h=10*Q.length,m=12*R.length,q=16*S.length;const G=8*T.length;let v=9+l.length;e&&(v+=9+e);c&&(v+=9+c);g&&(v+=9+g);h&&(v+=9+h);m&&(v+=9+m);q&&(v+=9+q);G&&(v+=9+G);v+=K.size();const H=new ArrayBuffer(v);var k=new DataView(H);
a=0;(new Uint8Array(H)).set(l);a+=l.length;W(k,a,"BPRF",1,0,0);a+=9;if(e){W(k,a,"PERF",2,F.length,13);a+=9;l=k;d=a;for(f=0;f<F.length;f++)l.setFloat64(d,F[f].RAFTS,!0),l.setUint16(d+8,Math.min(1E3*F[f].DCSend,65535),!0),l.setUint16(d+10,Math.min(1E3*F[f].GetStats,65535),!0),l.setUint8(d+12,F[f].FrameInfo),d+=13;a+=e}if(c){W(k,a,"EVNT",1,I.length,72);a+=9;e=k;l=a;for(d=0;d<I.length;d++){e.setFloat64(l,I[d].TS,!0);l+=8;var n=I[d].eventtype;for(f=0;f<n.length&&63>f;f++)e.setUint8(l+f,n.charCodeAt(f));
e.setUint8(l+f,0);l+=64}a+=c}if(g){W(k,a,"SQEV",1,P.length,12);a+=9;c=k;n=a;for(e=0;e<P.length;e++)c.setUint8(n,P[e].qualityScore),c.setUint8(n+1,P[e].bandwidthScore),c.setUint8(n+2,P[e].latencyScore),c.setUint8(n+3,P[e].networkLossScore),c.setFloat64(n+4,P[e].timestamp,!0),n+=12;a+=g}if(h){W(k,a,"MTBD",1,Q.length,10);a+=9;g=k;c=a;for(n=0;n<Q.length;n++)g.setFloat64(c,Q[n].timestamp,!0),g.setUint16(c+8,Math.min(Q[n].duration,65535),!0),c+=10;a+=h}if(m){W(k,a,"INPT",1,R.length,12);a+=9;h=k;g=a;for(c=
0;c<R.length;c++)h.setFloat64(g,R[c].timestamp,!0),h.setUint16(g+8,Math.min(R[c].bufferedAmount,65535),!0),h.setUint16(g+10,Math.min(R[c].maxSchedulingDelay,65535),!0),g+=12;a+=m}if(q){W(k,a,"GRBG",1,S.length,16);a+=9;m=k;h=a;for(g=0;g<S.length;g++)m.setFloat64(h,S[g].timestamp,!0),m.setInt32(h+8,X(S[g].deltaUsedHeapSize),!0),m.setInt32(h+12,X(S[g].deltaTotalHeapSize),!0),h+=16;a+=q}if(G){W(k,a,"MKPT",1,T.length,8);a+=9;q=k;k=a;for(m=0;m<T.length;m++)q.setFloat64(k,T[m],!0),k+=8;a+=G}let ja=new Uint8Array(H);
K.write(ja,a);null===N||void 0===N?void 0:N.send({stats:H,ackid:U})}catch(D){B("Exception in perf/stats upload. Error : "+D.message+" stack: "+D.stack)}V()}function ka(a){E.postMessage({wsMessage:a})}function la(a){E.postMessage({wsClose:a})}function ma(){E.postMessage({wsOpen:!0})}function Z(){E.postMessage({wsOpening:!0})}function na(a,b){N=new fa;N.initialize(L,a,{v:ka,F:ma,D:la,G:Z},b);Z()}
E.onmessage=function(a){try{const b=a.data;b.initMessage?(C=b.initMessage.sessionId,E.postMessage({initialized:!0})):b.perf?F.push(b.perf):b.clientEvent?I.push(b.clientEvent):b.startStats?(M=b.startStats.statsHeader,O=self.setInterval(()=>Y(),5E3),E.postMessage({statsStarted:!0}),A("{5209d98}")):b.stopStats?(self.clearInterval(O),Y(),V(),A("{b58b6ad}")):b.webrtcStats?(b.ackid&&(U=b.ackid),b.webrtcStats.stats&&ha(b.webrtcStats)):b.sq?P.push(b.sq):b.startWebSocket?(L=b.startWebSocket.signInURL,na(b.startWebSocket.maxReceivedAckId,
b.startWebSocket.reconnect)):b.stopWebSocket?(null===N||void 0===N?void 0:N.uninitialize(),N=void 0):b.send?null===N||void 0===N?void 0:N.send(b.send):b.duration?Q.push(b.duration):b.inputChannelStats?R.push(b.inputChannelStats):b.garbageCollectionStats?S.push(b.garbageCollectionStats):b.qosMarker&&T.push(b.qosMarker)}catch(b){B("Worker onmessage exception: "+b)}};


`],{type:"text/javascript"}));this.g=new Worker(h),URL.revokeObjectURL(h),this.g.onmessage=this.F.bind(this),this.g.onerror=this.C.bind(this),dt.i("{1f5ec29}","{62dee75}")}catch(h){dt.e("{1f5ec29}","{50fa2e5}",h.message),this.m.push({name:"RagnarokWorkerProblem",error:JSON.stringify(h)})}}startWebSocket(h,ut,St,xt){this.l=St,h={startWebSocket:{signInURL:h,maxReceivedAckId:ut,reconnect:xt}},this.g&&(this.g.postMessage(h),dt.d("{1f5ec29}","{b3f6faa}"))}stopWebSocket(){this.g&&(dt.d("{1f5ec29}","{7ac815d}"),this.g.postMessage({stopWebSocket:!0})),this.l=void 0}initialize(h,ut,St){if(this.G=ut,this.s=St,0<this.m.length){for(const xt of this.m)qo(ut,xt.name,xt.error);this.m=[]}if(0<this.o.length){for(const xt of this.o)N0(this,xt);this.o=[]}this.h=!1,L0(this),this.j===0&&(this.j=performance.now()),this.g?(this.g.postMessage({initMessage:{sessionId:h}}),dt.d("{1f5ec29}","{404f264}")):dt.e("{1f5ec29}","{c62bf29}")}F(h){(h=h.data).initialized?(dt.i("{1f5ec29}","{6ccab8d}"),this.v=!0):h.statsStarted?(this.h=!0,dt.d("{1f5ec29}","{e98d45f}")):h.log?dt.i("{cbf9f59}","{0b0c6f9}",h.log):h.exception?dt.i("{cbf9f59}","{0b0c6f9}",h.exception):h.wsClose?this.l?Gm(this.l,h.wsClose):dt.e("{1f5ec29}","{900a6f2}"):h.wsMessage?this.l?s0(this.l,h.wsMessage):dt.e("{1f5ec29}","{900a6f2}"):h.wsOpening?this.l?dt.i("{93c7910}","{6423101}"):dt.e("{1f5ec29}","{900a6f2}"):h.wsOpen&&(this.l?Wm(this.l):dt.e("{1f5ec29}","{900a6f2}"))}C(h){this.G?N0(this,h):this.o.push(h)}};function B0(){const h=K0();if(h){const ut=h.destination.maxChannelCount;return h.close(),dt.i("{d988e7f}","{fa78e0a}",ut),ut}return dt.w("{d988e7f}","{d018fac}"),2}function mu(h){return h[0]<h[1]?[h[1],h[0]]:h}function F0(h,ut,St){var xt=screen.width,Ot=screen.height,Vt=!!(1&St);const Dt=!!(2&St);var Ft=!!(4&St);if((Ft||8&St)&&(xt=3840,Ot=2160),ut&&0<ut.length){[xt,Ot]=mu([xt,Ot]),Dt&&1366<=xt&&h===0&&(xt=1600,Ot=1200);const Qt=xt/Ot,rr=xt*Ot;return(xt=ut.filter(nr=>120>nr.frameRate)).length&&(ut=xt),ut.sort((nr,lr)=>{var Yt=nr.resolution,dr=lr.resolution,ir=Math.abs(Yt.width/Yt.height-Qt)-Math.abs(dr.width/dr.height-Qt);if(.05<Math.abs(ir))return ir;ir=h===0?-1:1;const Xt=(h===1?1:-1)*(nr.frameRate-lr.frameRate),br=(Yt=Yt.width*Yt.height)-(dr=dr.width*dr.height);return Yt<=rr?dr<=rr?nr.frameRate!==lr.frameRate?Xt:ir*br:-1:dr<=rr?1:br||Xt}),ut[0]}if(ut={resolution:{width:1280,height:720},frameRate:60},Vt){let[Qt,rr]=mu([xt,Ot]);2<Qt/rr&&(ut.resolution={width:1376,height:640})}else Dt?h!=0?ut.resolution={width:1024,height:768}:([xt]=mu([xt,Ot]),ut.resolution=1024>=xt?{width:1024,height:768}:1366>xt?{width:1112,height:834}:{width:1600,height:1200}):(Vt=[[1920,1200],[1920,1080],[1280,1024],[1600,1200]],Ft&&Vt.unshift([3840,2160]),Ft=[[1280,800],[1280,720],[1280,1024],[1024,768]],xt=function(Qt,rr){if(rr.length==0)return Qt;class nr{constructor(dr,ir){this.w=dr,this.g=ir,this.a=dr/ir}j(dr){return .05>Math.abs(dr.a-this.a)?dr:dr.a>this.a?new nr(Math.floor(this.a/dr.a*dr.w),dr.g):new nr(dr.w,Math.floor(dr.a/this.a*dr.g))}h(){return[this.w,this.g]}}rr=rr.map(Yt=>new nr(Yt[0],Yt[1]));const lr=new nr(Qt[0],Qt[1]);Qt=rr[0];for(let Yt=1;Yt<rr.length;Yt++){let dr=rr[Yt];Math.abs(lr.a-dr.a)<Math.abs(lr.a-Qt.a)&&(Qt=dr)}return(rr=Qt.j(lr)).w>Qt.w?Qt.h():rr.h()}(xt=[xt,Ot],h==0?Vt:Ft),ut.resolution={width:xt[0],height:xt[1]});return ut}function $0(h){var ut;let St=0;return _e(h)&&(St|=1),(h?h.os==="iPadOS":/^(?!.*chrome).*safari/i.test(navigator.userAgent)&&!_e()&&Nt())&&(St|=2),(ut=window.webapis)!==null&&ut!==void 0&&ut.productinfo&&window.webapis.productinfo.isUdPanelSupported()&&(St|=4),window.lge_webrtc_hevc_support&&(St|=8),St}function q0(){return getComputedStyle(document.documentElement)?(getComputedStyle(document.documentElement).getPropertyValue("--sat")||(document.documentElement.style.setProperty("--sat","env(safe-area-inset-top)"),document.documentElement.style.setProperty("--sar","env(safe-area-inset-right)"),document.documentElement.style.setProperty("--sab","env(safe-area-inset-bottom)"),document.documentElement.style.setProperty("--sal","env(safe-area-inset-left)")),{top:parseInt(getComputedStyle(document.documentElement).getPropertyValue("--sat")),left:parseInt(getComputedStyle(document.documentElement).getPropertyValue("--sal")),bottom:parseInt(getComputedStyle(document.documentElement).getPropertyValue("--sab")),right:parseInt(getComputedStyle(document.documentElement).getPropertyValue("--sar"))}):{top:0,left:0,bottom:0,right:0}}function gu(h,ut){return 0>h?0:h>ut?ut:h}function j0(h){var ut=q0();ut.top=Math.max(ut.top,21),ut.bottom=gu(ut.bottom,10);let St={x:h.clientX,y:h.clientY},xt=.5;return 0<ut.top&&h.clientY-h.radiusY<ut.top?xt-=.5*(ut=gu(ut=(ut.top-(h.clientY-Math.min(h.radiusY,21)))/h.radiusY,1))*ut:0<ut.bottom&&h.clientY+h.radiusY>window.innerHeight-ut.bottom&&(xt+=.5*(ut=gu(ut=(h.clientY+Math.min(h.radiusY,10)-(window.innerHeight-ut.bottom))/h.radiusY,1))*ut),St.y=gu(St.y-h.radiusY+2*xt*h.radiusY,window.innerHeight),St}function U0(h){let ut=h;if(Qn.offlineErrorsStreaming&&Qn.offlineErrorsStreaming.includes($(h)))ut=15868418;else if(Qn.offlineErrorsSessionSetup&&Qn.offlineErrorsSessionSetup.includes($(h)))ut=15868417;else switch(h){case 3237093906:case 3237093899:ut=15868418;break;case 3237089282:ut=15868417}return ut!==h&&dt.i("{d988e7f}","{b84d4c8}",$(h),$(ut)),ut}function fp(h,ut){let St=h;if(Qn.sleepErrorsStreaming&&Qn.sleepErrorsStreaming.includes($(h)))St=15867908;else if(Qn.sleepErrorsSessionSetup&&Qn.sleepErrorsSessionSetup.includes($(h)))St=15867909;else switch(h){case 3237093906:s(ut)&&(St=15867908);break;case 3237094159:St=15867908;break;case 3237093654:St=15867909}return St!==h&&dt.i("{d988e7f}","{49e2182}",$(h),$(St)),St}function Po(h,ut,St,xt,Ot=1){const Vt=4294967295&Math.floor(h*Ot);h=Math.floor(h/4294967296*Ot),xt?(ut.setUint32(St,Vt,!0),ut.setUint32(St+4,h,!0)):(ut.setUint32(St,h,!1),ut.setUint32(St+4,Vt,!1))}function H0(h,ut){let St=!1;switch(h){case 3237093896:case 3237093897:case 3237093898:case 3237093906:case 3237093899:case 3237093901:case 15868418:case 3237094159:St=!0;break;case 15867908:s(ut)&&(St=!0)}return St}function hp(h,ut){return 2764800<=(h*=ut)&&4953600>h}function yu(h){switch(h){case"H264":return"H264";case"H265":return"HEVC";case"AV1":return"AV1";default:return"UNKNOWN"}}function z0(h){var ut;return h=pt(h)||mt(h)||lt(h)||h.os==="Linux"||s(h),(ut=Qn.enableCpm)!==null&&ut!==void 0?ut:h}function pp(h){return h!==void 0?h?"TRUE":"FALSE":"UNDEFINED"}function bu(h){return h?"MANUAL":"NONE"}let wu=[];function Pl(h){return`${h.width.toFixed()}x${h.height.toFixed()}`}function vp(h,ut,St){try{const xt=document.createElement("a");xt.style.display="none";const Ot=URL.createObjectURL(new Blob(h,{type:St}));return xt.href=Ot,xt.download=ut,document.body.appendChild(xt),xt.click(),URL.revokeObjectURL(Ot),document.body.removeChild(xt),!0}catch(xt){return dt.e("{d988e7f}","{8d57ba9}",xt),!1}}function K0(h){const ut=window.AudioContext||window.webkitAudioContext||void 0;if(ut)return h?new ut({sampleRate:h}):new ut;dt.w("{d988e7f}","{b74c037}")}function G0(){var h;return!((h=globalThis.PointerEvent)===null||h===void 0||!h.prototype)}async function W0(h,ut,St){var xt;const Ot=new RTCPeerConnection;try{await Ot.setRemoteDescription({type:"offer",sdp:ut}).catch(Qt=>{throw Error("Audio munging setRemoteDescription failed. "+Qt)});const Vt=await Ot.createAnswer();await Ot.setLocalDescription({type:"answer",sdp:(xt=Vt.sdp)===null||xt===void 0?void 0:xt.replace("opus/48000/2","multiopus/48000/"+h).replace("useinbandfec=1",St)}).catch(Qt=>{throw Error("Audio munging setLocalDescription failed. "+Qt)});const Dt=Ot.getReceivers()[0];if(!Dt.getParameters)return dt.w("{d988e7f}","{4be0bf6}"),2;const{codecs:Ft}=Dt.getParameters();if(Ft.length!==1||Ft[0].mimeType!=="audio/multiopus"||Ft[0].channels!==h)throw Error("Audio munging failed "+Ft[0]);return dt.i("{d988e7f}","{8919816}",h,Ft[0]),h}catch(Vt){return dt.e("{d988e7f}","{4984c00}",h,Vt),2}finally{Ot.close()}}function Zo(h){var ut;return((ut=Qn.usePerfNowCaptureTimestamp)!==null&&ut!==void 0?ut:!window.chrome)?$a(Co):h-Co.j}function jy(h){if(!h)return 8;switch(h==null?void 0:h.bitDepth){case 1:return 10;case 0:return 8;default:return dt.w("{d988e7f}","{6f291f9}",h.bitDepth),8}}function mp(h,ut=!1){return ut=ut?j0(h):{x:h.clientX,y:h.clientY},{identifier:h.identifier,clientX:ut.x,clientY:ut.y,deltaX:0,deltaY:0}}function Q0(h,ut,St){let xt=!1;const Ot=ut.changedTouches,Vt=Zo(ut.timeStamp);for(let Dt=0;Dt<Ot.length;Dt++){const Ft=Ot[Dt],Qt=h.h.findIndex(rr=>rr.identifier==Ft.identifier);Qt!=-1&&(xt=!0,pr(Jo()),h.h.splice(Qt,1),h.h.length===0?(h.l!==0?(window.clearTimeout(h.l),h.l=0,St&&Xy(h.j,h.target,Vt,mp(Ft,!0),h.m)):(h.g===2||h.g===4)&&xa&&Op(h.j,Vt),h.m=0,h.g=0):h.g===5?h.g=0:h.g===6&&(xa&&Vp(h.j),h.g=0))}Dl(h.j)&&xt&&ut.preventDefault()}function Y0(h,ut){h.clientX=ut.pageX-h.j.pb,h.clientY=ut.pageY-h.j.vertical,h.radiusX=ut.radiusX,h.radiusY=ut.radiusY}function J0(h){const ut=j0(h);h.h=.01<Math.abs(ut.y-h.clientY),h.clientX=ut.x,h.clientY=ut.y}class Uy{constructor(ut,St,xt){this.radiusY=this.radiusX=this.clientY=this.clientX=0,this.h=!1,this.identifier=ut.identifier,this.g=St,this.j=xt,Y0(this,ut),rp?J0(this):this.h=!1}update(ut){Y0(this,ut),this.h&&J0(this)}}class gp{constructor(ut,St,xt,Ot,Vt){this.h=St,this.id=ut.identifier,this.v=xt,this.l=ut.pageX,this.m=ut.pageY,this.o=ut.radiusX,this.s=ut.radiusY,this.g=Ot,this.j=Vt}}function Su(h,ut,St,xt){var Ot,Vt=0;for(let ir of ut){if(40<Vt)return void dt.e("{ec05004}","{2faaf33}",ut.length-Vt);var Dt=(Ot=h.g.get(ir.identifier))===null||Ot===void 0?void 0:Ot.g;if(Dt===void 0)dt.e("{ec05004}","{960ee4f}",ir.identifier);else{var Ft=h.m*ir.clientX,Qt=h.o*ir.clientY,rr=h.m*ir.radiusX,nr=h.o*ir.radiusY,lr=65535+rr,Yt=-nr;if(nr=65535+nr,Ft<-rr||Ft>lr||Qt<Yt||Qt>nr)switch(St){case 2:case 8:break;default:continue}Ft=Math.min(Math.max(Ft,0),65535),Qt=Math.min(Math.max(Qt,0),65535);e:{rr=h.P,lr=St,Yt=ir.radiusX,nr=ir.radiusY;var dr=xt;if(40<=Vt){Dt=!1;break e}const Xt=18+16*Vt;rr.gb.setUint8(Xt,Dt),rr.gb.setUint8(Xt+1,lr),rr.gb.setUint16(Xt+2,Ft,!1),rr.gb.setUint16(Xt+4,Qt,!1),rr.gb.setUint8(Xt+6,Yt),rr.gb.setUint8(Xt+7,nr),Po(dr,rr.gb,Xt+8,!1,1e3),Dt=!0}if(!Dt){h.l+=ut.length-Vt;break}Vt++}}Vt!=0&&(Vt>ut.length?dt.w("{ec05004}","{4e60a66}",Vt,ut.length):(Vt=8+16*(ut=Vt),(h=h.P).gb.setUint16(14,Vt,!1),h.gb.setUint16(16,ut,!1),ut=10,3<=h.La&&(Vt++,ut--),Vt=new DataView(h.gb.buffer,ut,Vt),Vo(h),Vo(h,Vt)||dt.e("{ec05004}","{56a8404}")))}function X0(h,ut,St){var xt=performance.now(),Ot=Zo(ut.timeStamp);let Vt=!1,Dt=[];const Ft=ut.changedTouches;let Qt=[];for(let rr=0;rr<Ft.length;rr++){const nr=Ft[rr];if(nr.target===h.target){let lr=h.g.get(nr.identifier);Dt.push(nr.identifier),lr&&(Vt=!0,pr(Jo()),lr.update(nr),Qt.push(lr),Ms&&h.h.push(new gp(nr,lr.g,St,xt,ut.timeStamp)))}}Su(h,Qt,St,Ot);for(const rr of Dt)xt=rr,(Ot=(St=h).g.get(xt))&&(St.g.delete(xt),St.s.delete(Ot.g));Ms&&(h.N=h.g.size==0),Dl(h.j)&&Vt&&ut.preventDefault()}var Zl=new Map([["Escape",27],["Digit0",48],["Digit1",49],["Digit2",50],["Digit3",51],["Digit4",52],["Digit5",53],["Digit6",54],["Digit7",55],["Digit8",56],["Digit9",57],["Minus",189],["Equal",187],["Backspace",8],["Tab",9],["KeyQ",81],["KeyW",87],["KeyE",69],["KeyR",82],["KeyT",84],["KeyY",89],["KeyU",85],["KeyI",73],["KeyO",79],["KeyP",80],["BracketLeft",219],["BracketRight",221],["Enter",13],["ControlLeft",162],["KeyA",65],["KeyS",83],["KeyD",68],["KeyF",70],["KeyG",71],["KeyH",72],["KeyJ",74],["KeyK",75],["KeyL",76],["Semicolon",186],["Quote",222],["Backquote",192],["ShiftLeft",160],["Backslash",220],["KeyZ",90],["KeyX",88],["KeyC",67],["KeyV",86],["KeyB",66],["KeyN",78],["KeyM",77],["Comma",188],["Period",190],["Slash",191],["ShiftRight",161],["NumpadMultiply",106],["AltLeft",164],["Space",32],["CapsLock",20],["F1",112],["F2",113],["F3",114],["F4",115],["F5",116],["F6",117],["F7",118],["F8",119],["F9",120],["F10",121],["Pause",19],["ScrollLock",145],["Numpad7",103],["Numpad8",104],["Numpad9",105],["NumpadSubtract",109],["Numpad4",100],["Numpad5",101],["Numpad6",102],["NumpadAdd",107],["Numpad1",97],["Numpad2",98],["Numpad3",99],["Numpad0",96],["NumpadDecimal",110],["PrintScreen",42],["IntlBackslash",226],["F11",122],["F12",123],["NumpadEqual",187],["F13",124],["F14",125],["F15",126],["F16",127],["F17",128],["F18",129],["F19",130],["F20",131],["F21",132],["F22",133],["F23",134],["F24",135],["KanaMode",233],["Lang2",25],["Lang1",21],["IntlRo",194],["Convert",234],["NonConvert",235],["IntlYen",193],["NumpadComma",188],["NumpadEnter",13],["ControlRight",163],["NumpadDivide",111],["PrintScreen",42],["AltRight",165],["NumLock",144],["Pause",19],["Home",36],["ArrowUp",38],["PageUp",33],["ArrowLeft",37],["ArrowRight",39],["End",35],["ArrowDown",40],["PageDown",34],["Insert",45],["Delete",46],["MetaLeft",91],["OSLeft",91],["MetaRight",92],["OSRight",92],["Lang2",25],["Lang1",21],["NumpadClear",12],["NumpadClearEntry",12]]),Hy=new Map([["HanjaMode",25],["HangulMode",21]]),Z0=new Map([["1",{vkCode:49,shift:!1}],["2",{vkCode:50,shift:!1}],["3",{vkCode:51,shift:!1}],["4",{vkCode:52,shift:!1}],["5",{vkCode:53,shift:!1}],["6",{vkCode:54,shift:!1}],["7",{vkCode:55,shift:!1}],["8",{vkCode:56,shift:!1}],["9",{vkCode:57,shift:!1}],["0",{vkCode:48,shift:!1}],["!",{vkCode:49,shift:!0}],["@",{vkCode:50,shift:!0}],["#",{vkCode:51,shift:!0}],["$",{vkCode:52,shift:!0}],["%",{vkCode:53,shift:!0}],["^",{vkCode:54,shift:!0}],["&",{vkCode:55,shift:!0}],["*",{vkCode:56,shift:!0}],["(",{vkCode:57,shift:!0}],[")",{vkCode:48,shift:!0}],["-",{vkCode:189,shift:!1}],["_",{vkCode:189,shift:!0}],["=",{vkCode:187,shift:!1}],["+",{vkCode:187,shift:!0}],[",",{vkCode:188,shift:!1}],["<",{vkCode:188,shift:!0}],[".",{vkCode:190,shift:!1}],[">",{vkCode:190,shift:!0}],[";",{vkCode:186,shift:!1}],[":",{vkCode:186,shift:!0}],["/",{vkCode:191,shift:!1}],["?",{vkCode:191,shift:!0}],["`",{vkCode:192,shift:!1}],["~",{vkCode:192,shift:!0}],["[",{vkCode:219,shift:!1}],["{",{vkCode:219,shift:!0}],["\\",{vkCode:220,shift:!1}],["|",{vkCode:220,shift:!0}],["]",{vkCode:221,shift:!1}],["}",{vkCode:221,shift:!0}],["'",{vkCode:222,shift:!1}],['"',{vkCode:222,shift:!0}],[" ",{vkCode:32,shift:!1}],["A",{vkCode:65,shift:!0}],["B",{vkCode:66,shift:!0}],["C",{vkCode:67,shift:!0}],["D",{vkCode:68,shift:!0}],["E",{vkCode:69,shift:!0}],["F",{vkCode:70,shift:!0}],["G",{vkCode:71,shift:!0}],["H",{vkCode:72,shift:!0}],["I",{vkCode:73,shift:!0}],["J",{vkCode:74,shift:!0}],["K",{vkCode:75,shift:!0}],["L",{vkCode:76,shift:!0}],["M",{vkCode:77,shift:!0}],["N",{vkCode:78,shift:!0}],["O",{vkCode:79,shift:!0}],["P",{vkCode:80,shift:!0}],["Q",{vkCode:81,shift:!0}],["R",{vkCode:82,shift:!0}],["S",{vkCode:83,shift:!0}],["T",{vkCode:84,shift:!0}],["U",{vkCode:85,shift:!0}],["V",{vkCode:86,shift:!0}],["W",{vkCode:87,shift:!0}],["X",{vkCode:88,shift:!0}],["Y",{vkCode:89,shift:!0}],["Z",{vkCode:90,shift:!0}],["a",{vkCode:65,shift:!1}],["b",{vkCode:66,shift:!1}],["c",{vkCode:67,shift:!1}],["d",{vkCode:68,shift:!1}],["e",{vkCode:69,shift:!1}],["f",{vkCode:70,shift:!1}],["g",{vkCode:71,shift:!1}],["h",{vkCode:72,shift:!1}],["i",{vkCode:73,shift:!1}],["j",{vkCode:74,shift:!1}],["k",{vkCode:75,shift:!1}],["l",{vkCode:76,shift:!1}],["m",{vkCode:77,shift:!1}],["n",{vkCode:78,shift:!1}],["o",{vkCode:79,shift:!1}],["p",{vkCode:80,shift:!1}],["q",{vkCode:81,shift:!1}],["r",{vkCode:82,shift:!1}],["s",{vkCode:83,shift:!1}],["t",{vkCode:84,shift:!1}],["u",{vkCode:85,shift:!1}],["v",{vkCode:86,shift:!1}],["w",{vkCode:87,shift:!1}],["x",{vkCode:88,shift:!1}],["y",{vkCode:89,shift:!1}],["z",{vkCode:90,shift:!1}]]);class ev extends DataView{constructor(ut,St,xt,Ot){super(ut,St,xt),this.shift=0,this.setUint8=(Vt,Dt)=>super.setUint8(Vt+this.shift,Dt),this.setUint16=(Vt,Dt,Ft)=>super.setUint16(Vt+this.shift,Dt,Ft),this.setUint32=(Vt,Dt,Ft)=>super.setUint32(Vt+this.shift,Dt,Ft),this.setInt8=(Vt,Dt)=>super.setInt8(Vt+this.shift,Dt),this.setInt16=(Vt,Dt,Ft)=>super.setInt16(Vt+this.shift,Dt,Ft),this.setInt32=(Vt,Dt,Ft)=>super.setInt32(Vt+this.shift,Dt,Ft),this.setFloat32=(Vt,Dt,Ft)=>super.setFloat32(Vt+this.shift,Dt,Ft),this.setFloat64=(Vt,Dt,Ft)=>super.setFloat64(Vt+this.shift,Dt,Ft),this.shift=Ot??0}}function Vo(h,ut,St=!0,xt="input_channel_v1"){if(xt!="gamepad_channel_v1"&&0<h.ia.h&&(ut=h.Ff(ut)),ut===void 0)return!1;const Ot=window.performance.now();var Vt=h.Ba;if(Vt.aa?($p(Vt),Vt=!1):Vt=!0,!Vt)return!1;if(Vt=!1,2<h.La&&St&&(9>ut.byteOffset?dt.w("{57a6a4d}","{0fc6121}"):((ut=new DataView(ut.buffer,ut.byteOffset-9,9+ut.byteLength)).setUint8(0,35),Po($a(Co),ut,1,!1,1e3))),St=-1,xt==="gamepad_channel_v1"&&h.Zc!==void 0&&(St=h.Zc,h.Zc=(h.Zc+1)%65536),0<=St){if(3>ut.byteOffset)return dt.e("{57a6a4d}","{e9ac06c}"),!1;(ut=new DataView(ut.buffer,ut.byteOffset-3,3+ut.byteLength)).setUint8(0,37),ut.setUint16(1,St)}try{let Dt=performance.now();switch(xt){case"gamepad_channel_v1":h.Aa.send(ut);break;case"input_channel_v1":h.Ja.send(ut);break;default:throw Error(`Invalid input channel ${xt}`)}Qm(h.D,performance.now()-Dt);const Ft=window.performance.now();h.V.ld+=1,5<(ut=Ft-Ot)&&(h.V.nd+=1),10<ut&&(h.V.md+=1),Vt=!0}catch(Dt){Dt.stack&&!Dt.stack.includes("Could not send data")&&(dt.e("{57a6a4d}","{7a6bf7c}",Dt),Eu(h)&&h.G.za(Dt,"sendinput exception","{57a6a4d}.ts",0,0,!0))}return Vt}function tv(h,ut,St){const xt=h.fb(22);xt.setUint32(0,10,!0),xt.setUint16(4,0,!1),xt.setUint16(6,-ut,!1),xt.setUint16(8,0,!1),xt.setUint32(10,0),Po(St,xt,14,!1,1e3);try{Vo(h,xt)}catch(Ot){dt.e("{57a6a4d}","{3d81a57}",Ot),h.G.za(Ot,"send mousewheel exception","{57a6a4d}.ts",0,0,!0)}}function Au(h,ut,St,xt,Ot,Vt,Dt=0){let Ft=h.J.eb;h=h.J.Wa;let Qt=7;xt&&(Qt=5);let rr=0;return Qt==5&&(rr=4),ut.setUint32(St,Qt,!0),ut.setUint16(St+4,Ot,!1),ut.setUint16(St+6,Vt,!1),ut.setUint16(St+8,0,!1),ut.setUint32(St+10+rr,0,!1),Po(Dt,ut,St+14+rr,!1,1e3),rr&&(ut.setUint16(St+10,Ft,!1),ut.setUint16(St+12,h,!1)),St+(xt?26:22)}function Eu(h){return h.Ja.readyState==="open"&&(!h.Aa||h.Aa.readyState==="open")}function yp(h,ut,St,xt=0){const Ot=h.fb(26);Au(h,Ot,0,!0,ut,St,xt);try{Eu(h)&&Vo(h,Ot)}catch(Vt){dt.e("{57a6a4d}","{dba1265}",Vt),h.G.za(Vt,"send CursorPos exception","{57a6a4d}.ts",0,0,!0)}}function zo(h,ut,St,xt,Ot=0){if(ut!==4&&ut!==3)dt.e("{57a6a4d}","{66e269d}",ut);else{var Vt=h.fb(18);Vt.setUint32(0,ut,!0),Vt.setUint16(4,St,!1),Vt.setUint16(6,xt,!1),Vt.setUint16(8,0,!1),Po(Ot,Vt,10,!1,1e3),Vo(h,Vt)}}function bp(h,ut,St,xt,Ot,Vt,Dt=0,Ft=0){h.setUint32(ut,12,!0),h.setUint16(ut+4,26,!0),h.setUint16(ut+6,St,!0),h.setUint16(ut+8,Ft,!0),h.setUint16(ut+10,20,!0),h.setUint16(ut+12,xt,!0),h.setUint16(ut+14,Ot,!0),h.setInt16(ut+16,Math.round(32767.5*(Vt[0]+1))-32768,!0),h.setInt16(ut+18,Math.round(32767.5*(1-Vt[1]))-32768,!0),h.setInt16(ut+20,Math.round(32767.5*(Vt[2]+1))-32768,!0),h.setInt16(ut+22,Math.round(32767.5*(1-Vt[3]))-32768,!0),h.setUint16(ut+24,0,!0),h.setUint16(ut+26,85,!0),h.setUint16(ut+28,0,!0),Po(Dt,h,ut+30,!0,1e3)}function wp(h,ut,St,xt,Ot,Vt=0,Dt=0){return bp(h=h.fb(38),0,xt,ut,St,Ot,Vt,Dt),h}function rv(h,ut,St){return(h=h.fb(10)).setUint32(0,18,!0),h.setUint8(4,ut),h.setUint8(5,St),h.setUint32(6,1),h}var iv=class{constructor(h){this.g=h}enable(){this.g.Nc=!0}disable(){this.g.Nc=!1}updateInput(h,ut,St){this.g.Nc&&(pr(Jo()),this.g.$d=h,this.g.ae=ut,this.g.Zd=St,this.g.be=!0)}};class zy{constructor(ut){this.buttons=ut.Hb(ut.ba),this.axes=ut.Gb(ut.ba),this.Lb=ut.Ib(ut.ba),this.timestamp=performance.now()}}const nv={startDelay:0,duration:0,weakMagnitude:0,strongMagnitude:0};function Ws(h){var ut,St,xt,Ot,Vt,Dt,Ft=(St=(ut=Io)!==null&&ut!==void 0?ut:Qn.gamepadPollInterval)!==null&&St!==void 0?St:4;h.qa=Ft,Ft=(Ot=(xt=xr)!==null&&xt!==void 0?xt:Qn.allowHaptics)===null||Ot===void 0||Ot,h.allowHaptics=Ft,xt=(Dt=(Vt=cn)!==null&&Vt!==void 0?Vt:Qn.synthesizeGamepadHid)!==null&&Dt!==void 0&&Dt,h.T=xt}function Sp(h,ut){var St,xt;Ws(h),ut=ut??0,du&&(ut|=1),fu&&(ut|=2),h.T&&ut?(h.L=(St=du)!==null&&St!==void 0?St:!!(1&ut),h.W=(xt=fu)!==null&&xt!==void 0?xt:!!(2&ut),Ol(h,!0)):(h.L=!1,h.W=!1)}function Ol(h,ut=!1){var St=!1;if(h.g.Nc&&!h.g.qb)h.g.qb?St=!1:(dt.i("{515a922}","{132d93a}",h.g.Mb),h.g.qb=!0,h.C={Dd:"Nvidia Virtual Gamepad",state:0,buttons:0,Lb:0,axes:[]},Ap(h,h.g.Mb,!1),St=!0);else if(!h.g.Nc&&h.g.qb)e:if(h.g.qb){dt.i("{515a922}","{98ac7c2}",h.g.Mb),h.g.qb=!1,av(h);var xt=h.g.Mb;for(var Ot of h.h)if(Ot&&Ot.Ca==1&&Ot.ha===xt){St=!1;break e}St=Ep(h,xt)}else St=!1;for(Ot=navigator.getGamepads(),xt=0;xt<Ot.length;xt++){let Ft=Ot[xt];if(Ft)if(pv(h,Ft,xt)){var Vt=h,Dt=Ft;Vt.h[xt].ba=Dt,Vt.hapticsSupported=Vt.hapticsSupported||Mp(Dt),tu(Vt),ut&&((Vt=(St=h.h[xt]).Ca)!==(Dt=Ls(h,Ft))&&(Vt===1?(Ep(h,St.ha),St.Ca=Dt,St.ha=xs(h,Dt),Rp(h,St)):(vv(h,St),St.Ca=Dt,St.ha=xs(h,Dt),Ap(h,xt,hv(Ft)))),St=!0)}else Vl(h,xt,!0),fv(h,Ft,xt)&&(St=!0);else Vl(h,xt,!0)&&(St=!0)}if(St){h.Eb();for(const Ft of h.h)(Ft==null?void 0:Ft.Ca)==2&&Rp(h,Ft)}h.Z=!0}function Ap(h,ut,St){ut=h.g.qb&&ut===h.g.Mb?h.g.Mb:h.h[ut].ha,h.j|=4>ut?1<<ut:0,ut=4>ut?1<<ut+8:0,h.j=St?h.j|ut:h.j&~ut}function ov(h){const ut=h.buttons,St=h.Lb;return"A:"+(4096&ut?"1":"0")+"_B:"+(8192&ut?"1":"0")+"_X:"+(16384&ut?"1":"0")+"_Y:"+(32768&ut?"1":"0")+"_LB:"+(256&ut?"1":"0")+"_LSB:"+(64&ut?"1":"0")+"_RB:"+(512&ut?"1":"0")+"_RSB:"+(128&ut?"1":"0")+"_LT:"+(255&St?"1":"0")+"_RT:"+(65280&St?"1":"0")+"_DU:"+(1&ut?"1":"0")+"_DD:"+(2&ut?"1":"0")+"_DL:"+(4&ut?"1":"0")+"_DR:"+(8&ut?"1":"0")+"_ST:"+(16&ut?"1":"0")+"_BA:"+(32&ut?"1":"0")+"_LS:"+(2<=(h=h.axes).length&&(h[0]===2||h[1]===2)?"1":"0")+"_RS:"+(h.length!==4||h[2]!==2&&h[3]!==2?"0":"1")}function av(h){var ut;h.C&&((ut=h.G)===null||ut===void 0||tm(ut,h.C.Dd,"0","0",0,!1,!0,h.C.state,ov(h.C)),h.C=void 0)}function Ep(h,ut){return!(ut===h.g.Mb&&h.g.qb||(h.j&=~(4>ut?1<<ut:0),h.j&=~(4>ut?1<<ut+8:0),0))}function xs(h,ut){let St=[];for(let xt of h.h)xt&&xt.Ca==ut&&(St[xt.ha]=!0);for(h=0;St[h];)h++;return h}function Ns(h,ut){-1<(ut=h.l.indexOf(ut))&&h.l.splice(ut,1)}function _p(h,ut){return!!(ut.mapping=="standard"||h.fa||h.ea||cv(h,ut)||uv(ut)||dv(h,ut))}function Cp(h,ut){var St;for(let xt of h.h){if(!xt)continue;let Ot=xt.ba;_p(h,Ot)&&(xt.Ca===1?(ut.$c(0,Ot.index,xt.ha,0,0,[0,0,0,0],performance.now(),h.j,Ot.id),ut.Yc(1)):(St=ut.Wc)===null||St===void 0||St.call(ut,Ot.index,xt.ha,0,0,[0,0,0,0],performance.now(),h.j,Ot.id))}}function Tp(h,ut){const St=h.F;ut!=St&&(St?(h.m&&(h.m.stop(),h.m.reset(),Ns(h,h.m),h.F=!1),h.o&&h.l.push(h.o)):(h.o&&(Ns(h,h.o),Cp(h,h.o)),h.m&&(h.l.push(h.m),h.H&&h.m.start(),h.F=!0)))}function sv(h,ut,St=!1){return h.Z||(ut|=2),St&&(ut|=1),ut}function Qs(h,ut,St){return{Dd:St,state:h.h[ut.index]?h.h[ut.index].Fa.state:sv(h,0),buttons:h.h[ut.index]?h.h[ut.index].Fa.buttons:0,Lb:h.h[ut.index]?h.h[ut.index].Fa.Lb:0,axes:h.h[ut.index]?h.h[ut.index].Fa.axes:[]}}function Ls(h,ut){if(!h.T)return 1;if(h=h.Ka&&h.L&&h.Da&&!h.na){const St=ls,xt=Wl;if(!((ut.id.includes("Vendor: 054c")||ut.id.includes("Wireless Controller")&&ut.id.includes("054c")||St||xt)&&18<=ut.buttons.length))return 1;const Ot=ut.id.includes("Product: 09cc")||ut.id.includes("Product: 05c4")||ut.id.includes("Product: 0ba0")||ut.id.includes("Wireless Controller")&&ut.id.includes("09cc");if(ut=(ut.id.includes("Product: 0ce6")||ut.id.includes("Product: 0df2")||xt)&&!zn,h&&(Ot||ut||St))return 2}return 1}function lv(h,ut){const St=Ls(h,ut);return{ba:ut,mc:!0,Ca:St,Hb:h.ca,Ib:h.da,Gb:h.aa,Fa:Qs(h,ut,"Standard Gamepad"),ha:xs(h,St)}}function cv(h,ut){return!h.ua&&ut.mapping!="standard"&&ut.id.includes("Vendor: 054c")&&ut.id.includes("Product: 0ce6")}function uv(h){return h.mapping!="standard"&&h.id.includes("Vendor: 045e")&&h.id.includes("Product: 0b13")}function dv(h,ut){return h.S&&ut.mapping!="standard"&&ut.id.includes("Vendor: 045e")&&ut.id.includes("Product: 0b12")}function fv(h,ut,St){if(_p(h,ut)){var xt=function(Dt,Ft){if(Dt.fa)return lv(Dt,Ft);if(Dt.ea){var Qt=Ls(Dt,Ft);return{ba:Ft,mc:!0,Ca:Qt,Hb:Dt.Za,Ib:Dt.da,Gb:Dt.Ua,Fa:Qs(Dt,Ft,"Standard Gamepad"),ha:xs(Dt,Qt)}}return Dt.va?null:Ft.mapping!="standard"||!Ft.id.includes("Vendor: 0955")||Dt.xa||Dt.wa?Ft.id.includes("Vendor: 045e")&&(Ft.id.includes("Product: 0b13")||Ft.id.includes("Product: 0b20")||Ft.id.includes("Product: 0b05")||Ft.id.includes("Product: 02e0")||Ft.id.includes("Product: 02fd"))?{ba:Ft,mc:!0,Ca:Qt=Ls(Dt,Ft),Hb:Dt.ca,Ib:Dt.da,Gb:Dt.aa,Fa:Qs(Dt,Ft,"Standard Gamepad"),Gg:!0,ha:xs(Dt,Qt)}:Ft.mapping=="standard"?lv(Dt,Ft):cv(Dt,Ft)?{ba:Ft,mc:!1,Ca:Qt=Ls(Dt,Ft),Hb:Dt.Ta.bind(Dt),Ib:Dt.$.bind(Dt,3,4),Gb:Dt.sa,Fa:Qs(Dt,Ft,"Dual Sense Gamepad"),ha:xs(Dt,Qt)}:uv(Ft)?{ba:Ft,mc:!1,Ca:Qt=Ls(Dt,Ft),Hb:Dt.ab.bind(Dt),Ib:Dt.$.bind(Dt,3,4),Gb:Dt.sa,Fa:Qs(Dt,Ft,"Xbox Series Gamepad"),ha:xs(Dt,Qt)}:dv(Dt,Ft)?{ba:Ft,mc:!1,Ca:Qt=Ls(Dt,Ft),Hb:Dt.Va.bind(Dt),Ib:Dt.$.bind(Dt,2,5),Gb:Dt.Sa,Fa:Qs(Dt,Ft,"Xbox Series Wired Gamepad"),ha:xs(Dt,Qt)}:(dt.e("{515a922}","{be4bfd9}",Ft),null):{ba:Ft,mc:!0,Ca:Qt=Ls(Dt,Ft),Hb:Dt.ca,Ib:Dt.$a,Gb:Dt.aa,Fa:Qs(Dt,Ft,"Nvidia Shield Gamepad"),ha:xs(Dt,Qt)}}(h,ut);if(xt){h.hapticsSupported=h.hapticsSupported||Mp(xt.ba),tu(h);const Dt=h.j;var Ot=h.h[St],Vt=h.s;const Ft=hv(ut);return h.h[St]=xt,h.I[St]===void 0&&(h.I[St]=0),Ot&&pv(h,ut,St)?h.h[St].ha=Ot.ha:(h.s==0&&(h.gamepadPollInterval=h.qa,eu(h)),h.s++,xt.Ca===2?(Rp(h,xt),h.U.set(xt.ha,St)):(Ap(h,St,Ft),h.Zb.set(xt.ha,St))),Ot=Ot?"Changing":"Adding",(ut=Dt!==h.j)?dt.i("{515a922}","{96051ae}",Ot,St,Ft,xt.ba.id):Vt!=h.s&&dt.i("{515a922}","{98be0dd}",Ot,St,xt.ba.id),ut}for(Vt of h.l)Vt.Uc(ut);return Vl(h,St)}for(xt of h.l)xt.Uc(ut);return Vl(h,St)}function Vl(h,ut,St=!1,xt){var Ot,Vt;let Dt=h.h[ut];if(Dt){dt.i("{515a922}","{1b26b8a}",ut,Dt.ba.id);const Ft=Dt.Ca,Qt=h.M[ut];if(Qt){const rr=performance.now()-Qt.timestamp;3e3<=rr&&Qt.axes.some(nr=>.5<Math.abs(nr))&&(dt.w("{515a922}","{fde5612}",rr,Qt.axes.join()),(Ot=h.G)===null||Ot===void 0||qo(Ot,"GamepadStuck",Dt.ba.id,rr.toString(),Qt.axes.join()))}if(St){const[rr,nr]=function(lr){let Yt=["-1","-1"];return(lr=/Vendor:[ ]+([\w\d]+).+Product:[ ]+([\w\d]+)/.exec(lr))&&3<=lr.length&&(Yt=[lr[1],lr[2]]),Yt}(Dt.ba.id);(Vt=h.G)===null||Vt===void 0||tm(Vt,Dt.Fa.Dd,rr,nr,Dt.ba.index,!!Dt.ba.g&&0<Dt.ba.g.length,xt??function(lr,Yt){let dr=!1;for(const ir of lr.h)if(ir){Yt===ir.ba.index&&(dr=!0);break}return dr}(h,Dt.ba.index),Dt.Fa.state,ov(Dt.Fa))}if(delete h.h[ut],delete h.I[ut],delete h.M[ut],h.hapticsSupported=function(rr){let nr=!1;for(let lr of rr.h)lr&&(nr=nr||Mp(lr.ba));return nr}(h),tu(h),h.s--,h.s==0&&(h.gamepadPollInterval=100,eu(h)),Ft!==2)return h.Zb.delete(Dt.ha),Ep(h,Dt.ha);vv(h,Dt),h.U.delete(Dt.ha)}return!1}function eu(h){h.N!=0&&(clearInterval(h.N),h.N=0),h.N=h.H&&!vu?window.setInterval(h.Qa,h.gamepadPollInterval):0}function hv(h){return h.id.includes("Xbox")||h.id.includes("xinput")}function Mp(h){var ut;return((ut=h.vibrationActuator)===null||ut===void 0?void 0:ut.type)=="dual-rumble"}function tu(h){var ut,St;h.O=h.H&&h.hapticsSupported;var xt,Ot=h.O;if(h.ta!=Ot&&(h.ta=Ot,h.allowHaptics))for(const Vt of h.l)(xt=Vt.Fg)===null||xt===void 0||xt.call(Vt,Ot);if(!h.O){Ot=navigator.getGamepads();for(let Vt of Ot)Vt&&(h.P[Vt.index]=0,h.R[Vt.index]=0,(St=(ut=Vt.vibrationActuator)===null||ut===void 0?void 0:ut.playEffect)===null||St===void 0||St.call(ut,"dual-rumble",nv))}}function pv(h,ut,St){var xt,Ot;return ut.id!=null&&ut.id==((Ot=(xt=h.h[St])===null||xt===void 0?void 0:xt.ba)===null||Ot===void 0?void 0:Ot.id)}function Rp(h,ut){var St;switch(ut.Ca){case 3:dt.e("{515a922}","{ea001a4}",ut.ba.id);break;case 2:for(const xt of h.l)(St=xt.gg)===null||St===void 0||St.call(xt,ut.ha);break;default:dt.e("{515a922}","{36eeed4}",ut.ba.id)}}function vv(h,ut){var St;switch(ut.Ca){case 3:dt.e("{515a922}","{2b2d286}",ut.ba.id);break;case 2:for(const xt of h.l)(St=xt.Of)===null||St===void 0||St.call(xt,ut.ha);break;default:dt.e("{515a922}","{fafe5f9}",ut.ba.id)}}function mv(h){switch(Number.parseFloat((h??0).toFixed(5))){case .71429:return 4;case-.42857:return 8;case-1:return 1;case .14286:return 2;case 1.28571:return 0;case 1:return 5;case-.71429:return 9;case .42857:return 6;case-.14286:return 10;default:return 0}}function gv(h,ut){return(0>ut?1:0)|(0<ut?2:0)|(0>h?4:0)|(0<h?8:0)}function yv(h,ut,St,xt){h.buttons|=ut,h.Lb|=St,h.axes.length===0?h.axes=[xt[0],xt[1],xt[2],xt[3]]:(h.axes[0]=h.axes[0]==2||h.axes[0]!==xt[0]?2:h.axes[0],h.axes[1]=h.axes[1]==2||h.axes[1]!==xt[1]?2:h.axes[1],h.axes[2]=h.axes[2]==2||h.axes[2]!==xt[2]?2:h.axes[2],h.axes[3]=h.axes[3]==2||h.axes[3]!==xt[3]?2:h.axes[3])}function _u(h,ut){e:{for(let St=0;St<h.v.length;St++){const xt=h.v[St];if(xt.$b===ut.$b&&xt.ic===ut.ic&&xt.jc===ut.jc&&xt.mb===ut.mb){ut=St;break e}}ut=-1}ut!==-1&&h.v.splice(ut,1)}function xp(h){h.H=!0,Ws(h),tu(h),xl&&(h.windowAddEventListener("gamepadconnected",h.oa),h.windowAddEventListener("gamepaddisconnected",h.pa),eu(h),h.F&&h.m.start(),Ol(h,!0))}function bv(h,ut,St,xt){if(h.O){var Ot=h.h[ut];if(Ot){let rr=Ot.ba;if(rr)if(St!=0||xt!=0){var Vt,Dt,Ft=performance.now(),Qt=Ft-h.ga[ut];h.P[ut]=St/65535,h.R[ut]=xt/65535,(!Ot.Gg||500<Qt)&&(h.ga[ut]=Ft,(Dt=(Vt=rr.vibrationActuator)===null||Vt===void 0?void 0:Vt.playEffect)===null||Dt===void 0||Dt.call(Vt,"dual-rumble",{startDelay:0,duration:1e3,weakMagnitude:h.R[ut],strongMagnitude:h.P[ut]}))}else h.ga[ut]=performance.now(),h.P[ut]=0,h.R[ut]=0,(Qt=(Ft=rr.vibrationActuator)===null||Ft===void 0?void 0:Ft.playEffect)===null||Qt===void 0||Qt.call(Ft,"dual-rumble",nv)}}}function wv(h){return Ws(h),Ol(h),h.j}var Sv=class{constructor(h,ut){this.N=this.s=this.j=0,this.gamepadPollInterval=100,this.qa=4,this.P=[],this.R=[],this.ga=[],this.ta=this.O=this.hapticsSupported=!1,this.allowHaptics=!0,this.F=this.H=!1,this.ja=0,this.Z=this.ua=this.wa=this.xa=this.S=this.fa=this.ea=this.va=this.ka=!1,this.maxSchedulingDelay=0,this.v=[],this.W=this.L=this.T=!1,this.Da=!0,this.na=this.bb=!1,this.Zb=new Map,this.U=new Map,this.windowAddEventListener=ut&&ut.windowAddEventListener?ut.windowAddEventListener.bind(window):window.addEventListener.bind(window),this.windowRemoveEventListener=ut&&ut.windowRemoveEventListener?ut.windowRemoveEventListener.bind(window):window.removeEventListener.bind(window),this.oa=this.Na.bind(this),this.pa=this.Oa.bind(this),this.Qa=this.ra.bind(this),this.h=[],this.M=[],this.I=[],this.l=[],this.u=h,ut=h.os;const St=h.osVer;this.ea=(h=(ut=="iOS"||ut=="iPadOS")&&h.browser=="Safari")&&St.startsWith("13"),this.fa=h&&St.startsWith("14"),this.va=h&&St=="12-",this.S=ut=="ChromeOS",this.xa=ut=="WebOS",this.wa=ut=="Tizen",this.ua=ut=="Android",this.g={Mb:0,Nc:!1,qb:!1,$d:0,ae:0,Zd:[],be:!1},this.cb=new iv(this.g),Ws(this),this.Ka=!wn,Sp(this),dt.d("{515a922}","{b0c674b}")}cd(){return this.F}Eb(){for(const h of this.l)h.Eb(this.j)}Na(h){fv(this,h.gamepad,h.gamepad.index)&&this.Eb()}Oa(h){Vl(this,h.gamepad.index,!0)&&this.Eb()}ca(h){return((h=h.buttons)[0].value?4096:0)|(h[1].value?8192:0)|(h[2].value?16384:0)|(h[3].value?32768:0)|(h[4].value?256:0)|(h[5].value?512:0)|(h[8]&&h[8].value?32:0)|(h[9]&&h[9].value?16:0)|(h[10]&&h[10].value?64:0)|(h[11]&&h[11].value?128:0)|(h[12]&&h[12].value?1:0)|(h[13]&&h[13].value?2:0)|(h[14]&&h[14].value?4:0)|(h[15]&&h[15].value?8:0)|(h[16]&&h[16].value?65536:0)|(h[17]&&h[17].value?131072:0)}da(h){var ut,St;h=h.buttons;let xt=Math.round(255*((ut=h[6])===null||ut===void 0?NaN:ut.value));return(255&Math.round(255*((St=h[7])===null||St===void 0?NaN:St.value)))<<8|255&xt}$a(h){var ut,St;h=h.buttons;let xt=Math.round(255*((ut=h[7])===null||ut===void 0?NaN:ut.value));return(255&Math.round(255*((St=h[6])===null||St===void 0?NaN:St.value)))<<8|255&xt}$(h,ut,St){return(255&Math.round(127.5*(St.axes[ut]+1)))<<8|255&Math.round(127.5*(St.axes[h]+1))}aa(h){return h.axes}Ua(h){return[h.axes[0],-h.axes[1],h.axes[2],-h.axes[3]]}sa(h){return[h.axes[0],h.axes[1],h.axes[2],h.axes[5]]}Sa(h){return[h.axes[0],h.axes[1],h.axes[3],h.axes[4]]}Za(h){var ut,St,xt,Ot,Vt,Dt;let Ft=h.buttons;return h=h.axes,((ut=Ft[0])!==null&&ut!==void 0&&ut.value?4096:0)|((St=Ft[1])!==null&&St!==void 0&&St.value?8192:0)|((xt=Ft[2])!==null&&xt!==void 0&&xt.value?16384:0)|((Ot=Ft[3])!==null&&Ot!==void 0&&Ot.value?32768:0)|((Vt=Ft[4])!==null&&Vt!==void 0&&Vt.value?256:0)|((Dt=Ft[5])!==null&&Dt!==void 0&&Dt.value?512:0)|(0<h[5]?1:0)|(0>h[5]?2:0)|(0>h[4]?4:0)|(0<h[4]?8:0)}Ta(h){var ut,St,xt,Ot,Vt,Dt,Ft,Qt,rr,nr;let lr=h.buttons;return h=this.S?gv(h.axes[6],h.axes[7]):mv(h.axes[9]),((ut=lr[1])!==null&&ut!==void 0&&ut.value?4096:0)|((St=lr[2])!==null&&St!==void 0&&St.value?8192:0)|((xt=lr[0])!==null&&xt!==void 0&&xt.value?16384:0)|((Ot=lr[3])!==null&&Ot!==void 0&&Ot.value?32768:0)|((Vt=lr[4])!==null&&Vt!==void 0&&Vt.value?256:0)|((Dt=lr[5])!==null&&Dt!==void 0&&Dt.value?512:0)|((Ft=lr[8])!==null&&Ft!==void 0&&Ft.value?32:0)|((Qt=lr[9])!==null&&Qt!==void 0&&Qt.value?16:0)|((rr=lr[10])!==null&&rr!==void 0&&rr.value?64:0)|((nr=lr[11])!==null&&nr!==void 0&&nr.value?128:0)|h}ab(h){var ut,St,xt,Ot,Vt,Dt,Ft,Qt,rr,nr;let lr=h.buttons;return h=mv(h.axes[9]),((ut=lr[0])!==null&&ut!==void 0&&ut.value?4096:0)|((St=lr[1])!==null&&St!==void 0&&St.value?8192:0)|((xt=lr[3])!==null&&xt!==void 0&&xt.value?16384:0)|((Ot=lr[4])!==null&&Ot!==void 0&&Ot.value?32768:0)|((Vt=lr[6])!==null&&Vt!==void 0&&Vt.value?256:0)|((Dt=lr[7])!==null&&Dt!==void 0&&Dt.value?512:0)|((Ft=lr[10])!==null&&Ft!==void 0&&Ft.value?32:0)|((Qt=lr[11])!==null&&Qt!==void 0&&Qt.value?16:0)|((rr=lr[13])!==null&&rr!==void 0&&rr.value?64:0)|((nr=lr[14])!==null&&nr!==void 0&&nr.value?128:0)|h}Va(h){var ut,St,xt,Ot,Vt,Dt,Ft,Qt,rr,nr;let lr=h.buttons;return h=gv(h.axes[6],h.axes[7]),((ut=lr[0])!==null&&ut!==void 0&&ut.value?4096:0)|((St=lr[1])!==null&&St!==void 0&&St.value?8192:0)|((xt=lr[2])!==null&&xt!==void 0&&xt.value?16384:0)|((Ot=lr[3])!==null&&Ot!==void 0&&Ot.value?32768:0)|((Vt=lr[4])!==null&&Vt!==void 0&&Vt.value?256:0)|((Dt=lr[5])!==null&&Dt!==void 0&&Dt.value?512:0)|((Ft=lr[6])!==null&&Ft!==void 0&&Ft.value?32:0)|((Qt=lr[7])!==null&&Qt!==void 0&&Qt.value?16:0)|((rr=lr[9])!==null&&rr!==void 0&&rr.value?64:0)|((nr=lr[10])!==null&&nr!==void 0&&nr.value?128:0)|h}Yb(){for(const h of this.l)h.Yb(this.g.$d,this.g.ae,this.g.Mb,this.g.Zd,this.j)}ra(){var h,ut=performance.now();this.ya&&(this.maxSchedulingDelay=Math.max(this.maxSchedulingDelay,ut-this.ya-this.gamepadPollInterval)),this.ya=ut,Ol(this);let St=ut=0;for(let rr of this.h){if(!rr)continue;const nr=Zo(rr.ba.timestamp);let lr=rr.ba;if(!_p(this,lr))continue;if(rr.ba.timestamp<=this.I[lr.index]){this.Pa&&5e3<=performance.now()-rr.ba.timestamp&&this.Pa();continue}this.I[lr.index]=rr.ba.timestamp;const Yt=this.M[lr.index];var xt,Ot=new zy(rr);if((xt=Yt)&&(xt=Yt.buttons==Ot.buttons&&Yt.Lb==Ot.Lb)){e:{xt=Yt.axes;for(var Vt=0;Vt<xt.length;Vt++)if(.01<Math.abs(xt[Vt]-Ot.axes[Vt])){xt=!0;break e}xt=!1}xt=!xt}if(!xt){if(this.M[lr.index]=Ot,Ot=rr.Ib(lr),xt=rr.Hb(lr),Vt=rr.Gb(lr),ap)if(xt&(nt(this.u)?64:128)){if(this.ka){this.ka=!1;var Dt=performance.now();Dt<this.ja+500?(Tp(this),this.ja=0):this.ja=Dt}}else this.ka=!0;for(let dr of this.v){Dt=void 0;var Ft=dr.$b,Qt=dr.jc;const ir=(dr.ic|Ft)===xt;Qt=!!(255&Qt)==229.5<=(255&Ot)&&!!(65280&Qt)==58752<=(65280&Ot);const Xt=!(((Dt=Yt==null?void 0:Yt.buttons)!==null&&Dt!==void 0?Dt:0)&Ft||!(xt&Ft));ir&&Qt&&Xt&&dr.mb()}switch(rr.Ca){case 1:for(const dr of this.l)dr.$c(St,lr.index,rr.ha,xt,Ot,Vt,nr,this.j,lr.id);St++;break;case 2:for(const dr of this.l)(h=dr.Wc)===null||h===void 0||h.call(dr,lr.index,rr.ha,xt,Ot,Vt,rr.ba.timestamp,this.j,lr.id)}ut++,yv(rr.Fa,xt,Ot,Vt)}}if(ut&&pr(Jo()),St)for(const rr of this.l)rr.Yc(St);this.g.qb&&this.g.be&&(this.Yb(),this.g.be=!1,this.C&&yv(this.C,this.g.$d,this.g.ae,this.g.Zd))}getVirtualGamepadHandler(){return this.cb}};function Av(h,ut,St,xt){var Ot=[];Ot[0]=-.1<xt[0]&&.1>xt[0]?0:xt[0],Ot[1]=-.1<xt[1]&&.1>xt[1]?0:xt[1],Ot[2]=-.1<xt[2]&&.1>xt[2]?0:xt[2],Ot[3]=-.1<xt[3]&&.1>xt[3]?0:xt[3],xt=Ot[h.Vf],Ot=Ot[h.Wf];const Vt=4-3*Math.min(1,Math.sqrt(xt*xt+Ot*Ot));h.Hc=xt*h.scale/Vt,h.Ic=Ot*h.scale/Vt,ut=!!(4224&ut)||58752<=(65280&St),St=229.5<=(255&St),xt=h.wc,Ot=h.xc,h.wc=ut,h.xc=St,!ut&&xt&&Nl(h,0,!1),!St&&Ot&&Nl(h,2,!1),ut&&!xt&&Nl(h,0,!0),St&&!Ot&&Nl(h,2,!0)}function Nl(h,ut,St){ut=new MouseEvent(St?h.Bd:h.Yd,{button:ut,buttons:(h.wc?1:0)|(h.xc?2:0)}),h.df.dispatchEvent(ut)}var Ky=class{constructor(h,ut){this.Lc=0,this.Bg=8,this.vb=this.ub=this.Ic=this.Hc=0,this.xc=this.wc=!1,this.scale=12,this.kc="mousemove",this.Bd="mousedown",this.Yd="mouseup",this.Vf=2,this.Wf=3,this.u=ut,this.df=h,this.Dg=this.Cg.bind(this),nt(this.u)&&(this.Vf=0,this.Wf=1)}$c(h,ut,St,xt,Ot,Vt){Av(this,xt,Ot,Vt)}Wc(h,ut,St,xt,Ot){Av(this,St,xt,Ot)}Cg(){this.ub=Math.sign(this.ub)!=Math.sign(this.Hc)?this.Hc:this.ub+this.Hc,this.vb=Math.sign(this.vb)!=Math.sign(this.Ic)?this.Ic:this.vb+this.Ic;var h=0;let ut=0;if((1<=this.ub||-1>=this.ub)&&(h=Math.trunc(this.ub),this.ub-=h),(1<=this.vb||-1>=this.vb)&&(ut=Math.trunc(this.vb),this.vb-=ut),h!=0||ut!=0){let St;h={movementX:h,movementY:ut,isPrimary:!0},St=this.kc=="pointerrawupdate"||this.kc=="pointermove"?new PointerEvent(this.kc,h):new MouseEvent("mousemove",h),this.df.dispatchEvent(St)}}start(){this.Lc&&this.stop(),this.Lc=window.setInterval(this.Dg,this.Bg)}stop(){this.Lc&&(clearInterval(this.Lc),this.Lc=0)}reset(){this.wc&&Nl(this,0,!1),this.xc&&Nl(this,2,!1),this.ub=this.vb=this.Hc=this.Ic=0,this.wc=this.xc=!1}Eb(){}Yc(){}Yb(){}Uc(){}};function Gy(h){return{zf:"image/x-icon",scale:1,...h}}const Ev={style:"default",Ma:"AAABAAEAICACAAEAAQAwAQAAFgAAACgAAAAgAAAAQAAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAOAAAADAAAABwAAAAYAAAAOAAABDAAAAZwAAAHYAAAB4AAAAf+AAAH/AAAB/gAAAfwAAAH4AAAB8AAAAeAAAAHAAAABgAAAAQAAAAAAAAAAAAAAAAAAAA////////////////////////////////////////////5////8P///+D////h////wf//98P///OD///xh///8Af///AP///wAH//8AD///AB///wA///8Af///AP///wH///8D////B////w////8f////P////3/////////8=",Ha:2,Ia:1},Wy=[{style:"none",Ma:"",Ha:0,Ia:0},Ev,{style:"text",Ma:"AAABAAEAICACAAEAAQAwAQAAFgAAACgAAAAgAAAAQAAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAfvwAAAAAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAfPwAAAAAAAAAAAAAAAAAA/////////////////////////////////////+BA///Agf///z////8/////P////z////8/////P////z////8/////P////z////8/////P////z////8/////P////z////8/////P////z///+BA///Agf////////////8=",Ha:8,Ia:13},{style:"wait",Ma:"AAABAAEAICACAAEAAQAwAQAAFgAAACgAAAAgAAAAQAAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/8AAAzzAAAHDgAABfoAAAb2AAADbAAAAfgAAABgAAAAYAAAAGAAAABgAAAAYAAAAGAAAABgAAAB+AAAA/wAAAaWAAAH/gAABWoAAA//AAAP/wAAAAAAAAAAAAA//////////////////////////////////////////+AAf//gAH//4AB//+AAf//wAP//8AD///gB///8A////gf///8P////D////w////8P////D////gf///wD///4Af//8AD///AA///gAH//4AB//+AAf//gAH///////8=",Ha:7,Ia:12},{style:"crosshair",Ma:"AAABAAEAICACAAEAAQAwAQAAFgAAACgAAAAgAAAAQAAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAABjAAABgMAAAQBAAAIAIAACACAABAAQAAAIAAAEABAAAgAgAAIAIAABgMAAAICAAABjAAAAFAAAAAAAAA//////////////////////////////////////////////////////////////////////////////////////4////5T///53P//+97///fff//333//79+//+AAP//v37//999///fff//53P///d3///5T////j////////8=",Ha:8,Ia:8},{style:"progress",Ma:"AAABAAEAICACAAEAAQAwAQAAFgAAACgAAAAgAAAAQAAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD4AAAAiAAAAPgAAABwAAAYIAAAOCAAADAgAABwcAAAYNgAAOCoABDA+AAZwAAAHYAAAB4AAAAf+AAAH/AAAB/gAAAfwAAAH4AAAB8AAAAeAAAAHAAAABgAAAAQAAAAAAAAAAAAAAAAAAAA///////////////////////+A////gP///4D///+A///5wf//8OP//+Dj///h4///wcH/98OA//ODgP/xh4D/8AeA//AP///wAH//8AD///AB///wA///8Af///AP///wH///8D////B////w////8f////P////3/////////8=",Ha:2,Ia:1},{style:"nwse-resize",Ma:"AAABAAEAICACAAEAAQAwAQAAFgAAACgAAAAgAAAAQAAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP4AAAB+AAAAPgAAAB4AAABuAAAA5gAAAcIAAEOAAABnAAAAdgAAAHgAAAB8AAAAfgAAAH8AAAAAAAAAAAAAA/////////////////////////////////////////////////////////////////////////////////wA///+AP///wD///+A////gP///wD//34A//88GP//GDz//wB+//8A////Af///wH///8A////AH///wA////////8=",Ha:9,Ia:8},{style:"nesw-resize",Ma:"AAABAAEAICACAAEAAQAwAQAAFgAAACgAAAAgAAAAQAAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAfwAAAH4AAAB8AAAAeAAAAHYAAABnAAAAQ4AAAAHCAAAA5gAAAG4AAAAeAAAAPgAAAH4AAAD+AAAAAAAAAAAAA////////////////////////////////////////////////////////////////////////////////wA///8Af///AP///wH///8B////AP///wB+//8YPP//PBj//34A////AP///4D///+A////AP///gD///wA///////8=",Ha:9,Ia:9},{style:"ew-resize",Ma:"AAABAAEAICACAAEAAQAwAQAAFgAAACgAAAAgAAAAQAAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAEAABgBgAA4AcAAeAHgAPv98AH7/fgA+/3wAHgB4AA4AcAAGAGAAAgBAAAAAAAAAAAAAAAAAA//////////////////////////////////////////////////////////////////////////////////////+/3///P8///j/H//w/w//4P8H/8AAA/+AAAH/AAAA/4AAAf/AAAP/4P8H//D/D//4/x///P8///7/f//////8=",Ha:13,Ia:8},{style:"ns-resize",Ma:"AAABAAEAICACAAEAAQAwAQAAFgAAACgAAAAgAAAAQAAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADgAAAB8AAAA/gAAAf8AAAP/gAAAAAAAADgAAAA4AAAAOAAAADgAAAA4AAAAOAAAADgAAAA4AAAAAAAAA/+AAAH/AAAA/gAAAHwAAAA4AAAAEAAAAAAAAAAAAAA//////////////////////////////////////+/////H////g////wH///4A///8AH//+AA///AAH///g////4P///+D////g////4P///+D////g////4P///AAH//4AD///AB///4A////Af///4P////H////7////////8=",Ha:9,Ia:12},{style:"move",Ma:"AAABAAEAICACAAEAAQAwAQAAFgAAACgAAAAgAAAAQAAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAABwAAAA+AAAAHAAAABwAAAAcAAAAHAAAABwAAAgACAAf3fwAP93+AB/d/AAIAAgAABwAAAAcAAAAHAAAABwAAAAcAAAAPgAAABwAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////f////j////wf///4D///8Af///wf///8H///vB7//zwef/4AAD/8AAAf+AAAD/wAAB/+AAA//zwef/+8Hv///B////wf///wB///+A////wf///+P////3///////////////////////8=",Ha:13,Ia:12},Ev,{style:"pointer",Ma:"AAABAAEAICACAAEAAQAwAQAAFgAAACgAAAAgAAAAQAAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH+AAAB/gAAA/4AAAP/AAAH/wAAB/8AAA//gAAP/4AAH/+AADttgABzbYAAY2wAAANsAAADYAAAAwAAAAMAAAAAAAAAAAAAA//////////////////////////////////////////////////////////////////////+Af///AD///wA///4AP//+AB///AAf//wAH//4AA//+AAP//AAD//gAA//wAAP/8IAH//mAH///gD///4H///+H////z////////8=",Ha:8,Ia:3},{style:"help",Ma:"AAABAAEAICACAAEAAQAwAQAAFgAAACgAAAAgAAAAQAAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////AAAAAAAAAAAAAAAAAAAAGAAAAAAAAAAAAAAAAAAAABgAAAAYAAAYHAAAOAYAADADAABwwwAAYMMAAODDABDAZgAZwDwAHYAAAB4AAAAf+AAAH/AAAB/gAAAfwAAAH4AAAB8AAAAeAAAAHAAAABgAAAAQAAAAAAAAAAAAAAAAAAAA/////////////+f////D////5//////////n////w///58P//8PB//+D4P//hzB//wYYf98OGH/ODhh/xh8A/8Afgf/AP8P/wAH//8AD///AB///wA///8Af///AP///wH///8D////B////w////8f////P////3/////////8=",Ha:2,Ia:1}];function _v(h){h.preventDefault()}function ru(h){var ut,St;return h.yb()&&h.cursorType!=2&&h.s.h&&(!h.g.rb||h.g.yd)&&((St=(ut=l0(h.D))===null||ut===void 0?void 0:ut.Db())===null||St===void 0||St)}function Ll(h){return h.m===1||h.m===2}function es(h){var ut=ru(h);const St=Ll(h),xt=h.o&&!h.g.rb,Ot=h.Ka;!h.Db||!ut||St&&xt===Ot?!ut&&St&&(document.exitPointerLock?(h.m=3,document.exitPointerLock()):h.m=0):(ut=h.v).requestPointerLock&&3>h.P?(h.m=1,(ut=ut.requestPointerLock({unadjustedMovement:xt}))&&(h.ua=!0,ut.then(()=>{h.m=2,h.Ka=xt,h.P=0}).catch(Vt=>{h.m=0,Vt.name==="NotSupportedError"&&xt?(dt.i("{70cc40b}","{08fd91e}"),h.o=!1,es(h)):(Vt.name=="UnknownError"?(h.P++,dt.w("{70cc40b}","{9f2ba9f}",h.P)):dt.e("{70cc40b}","{4cdd98f}",Vt.name,Vt.message),Ds(h))}))):h.m=2}function Cv(h){var ut,St;if(h.cursorType===0){var xt=h.v.getBoundingClientRect(),Ot=(St=(ut=h.v.parentElement)===null||ut===void 0?void 0:ut.getBoundingClientRect())!==null&&St!==void 0?St:new DOMRect(0,0,0,0);ut=xt.left-Ot.left+h.J.ma*h.J.Xa,xt=xt.top-Ot.top+h.J.ma*h.J.Ra,h.j.style.position="absolute",h.j.style.left=ut+"px",h.j.style.top=xt+"px",h.j.style.zIndex="200"}}function kp(h){var ut=h.j.getContext("2d");if(ut&&(h.h.pg=ut,ut=window.devicePixelRatio,h.h.wb!=ut)){dt.i("{70cc40b}","{b786ba9}",ut),h.h.wb=ut,h.h.bd=!0;for(const St of h.W.values())St.style=void 0;Ys(h)}}function Cu(h,ut){if(h.T&&h.I!==ut)switch(h.C&&Lv(h),h.I=ut,h.C&&Nv(h),ut){case 1:h.H=4;break;case 2:h.H=8;break;case 3:h.H=16;break;default:h.H=0}}function Tv(h,ut,St,xt){ut>=h.U.length?dt.e("{70cc40b}","{de8eabe}",ut):Vv(h,h.U[ut],St,xt)}function Mv(h){h.O&&(window.clearTimeout(h.O),h.O=0)}function Tu(h,ut,St){Ip(h,ut-h.J.Xa,St-h.J.Ra)}function Ys(h){h.h.Vc=!0}function Rv(h,ut){if(ut instanceof PointerEvent){if(Ru(ut))return;ut.preventDefault()}let St=performance.now();if(h.s.h&&(!ru(h)||Ll(h))&&(ut.movementX!==0||ut.movementY!==0)){h.lc(!0);var xt=1,Ot=0,Vt=h.g.rb,Dt=h.ia.h,Ft=Qt=>{if(h.R.update(Qt.movementX,Qt.movementY,Qt.timeStamp)){var rr=h.R.jf(),nr=h.R.kf();if(Vt){if(h.g.yd){var lr=h.S?h.h.wb:1;Ip(h,h.g.sb+rr/lr,h.g.tb+nr/lr)}else Tu(h,Qt.offsetX,Qt.offsetY);h.h.Vc=!0,rr=h.g.sb,nr=h.g.tb}else h.S&&(lr=h.h.wb,rr+=h.g.Sd,nr+=h.g.Td,h.g.Sd=rr%lr,h.g.Td=nr%lr,rr/=lr,nr/=lr);e:{if(lr=h.ia,Qt=Zo(Qt.timeStamp),Ot%xt!=0&&0<lr.j){const Yt=lr.l[lr.j-1];if(Yt.ib===Vt&&Yt.yc===St){Vt?(Yt.x=rr,Yt.y=nr):(Yt.x+=rr,Yt.y+=nr);break e}}lr.j==lr.l.length?(lr.l.push({ib:Vt,x:rr,y:nr,captureTimestamp:Qt,jb:0,yc:St}),lr.j++):((lr=lr.l[lr.j++]).ib=Vt,lr.x=rr,lr.y=nr,lr.captureTimestamp=Qt,lr.jb=0,lr.yc=St)}Ot++}};if(ut instanceof PointerEvent&&h.$){const Qt=ut.getCoalescedEvents();if(Qt.length==0)Ft(ut);else{ut=h.ia.g.length,ut=Qt.length>2*ut?1:Math.max(ut-h.ia.h-4,1),Qt.length>ut&&(xt=Math.ceil(Qt.length/ut),h.V.Rc+=Qt.length);for(let rr of Qt)Ft(rr)}}else Ft(ut);1<h.l.zg&&Dt===0&&h.ia.h>Dt&&(h.ia.l[Dt].jb=h.ia.h-Dt)}}function Ip(h,ut,St){h.g.sb=Math.min(Math.max(ut,0),h.J.eb),h.g.tb=Math.min(Math.max(St,0),h.J.Wa),Ys(h)}function xv(h,ut){if(h.J.eb&&h.J.Wa){const St=ut.Wa/h.J.Wa;h.g.sb*=ut.eb/h.J.eb,h.g.tb*=St}h.J=ut,Cv(h),kp(h)}function kv(h){return 1.499<=h&&1.999>h?2:Math.max(1,Math.floor(h+.001))}function Iv(h,ut){const St=h.g.cursor;if(St.image){var xt=h.h.wb,Ot=h.h.pg,Vt=St.image.width*ut;ut*=St.image.height;var Dt=Math.ceil(Vt),Ft=Math.ceil(ut);Dt!==h.j.width||Ft!==h.j.height?(h.j.style.width=Vt/xt+"px",h.j.style.height=ut/xt+"px",h.j.width=Dt,h.j.height=Ft,Ot.scale(1,1),Ot.imageSmoothingEnabled=!1):Ot.clearRect(0,0,h.j.width,h.j.height),Ot.drawImage(St.image,0,0,Vt,ut)}else dt.e("{70cc40b}","{bc9bdcd}")}function Pv(h){h.h.od&&(h.h.od=!1,h.j.style.visibility="hidden")}function Ds(h){const ut=h.v;!h.yb()||ru(h)&&!Ll(h)||h.cursorType==2?ut.style.cursor="default":ut.style.cursor=h.cursorType===0?"none":h.g.style}function Ov(h,ut){const St=()=>{if(h.g.Ac=void 0,h.g.cursor=ut,h.h.bd=!0,h.cursorType===0)Ys(h);else{if(!ut.style){var xt=h.h.wb,Ot=1,Vt=1;h.Da!==void 0&&(Vt=(Ot=kv(xt/ut.scale))/xt),Iv(h,Ot),xt=h.j.toDataURL("image/bmp"),Ot=ut.Ha*Vt,Vt=ut.Ia*Vt;const Dt=h.h.wb,Ft=h.Da;ut.style=Ft?`${Ft}(url(${xt}) ${Dt}x) ${Ot} ${Vt}, auto`:`url(${xt}) ${Ot} ${Vt}, auto`}h.g.style=ut.style,Ds(h)}};if(h.cursorType!==0&&ut.style)St();else if(ut.style!=="none")if(ut.image)ut.image.width!==0||ut.image.height!==0?St():h.g.Ac=ut.image;else{const xt=new Image;ut.image=xt,!xt.decode&&xt.decoding&&(xt.decoding="sync"),xt.src=`data:${ut.zf};base64,${ut.Ma}`,xt.decode?(h.g.Ac=xt,xt.decode().then(()=>{h.g.Ac===xt&&St()}).catch(()=>{h.g.Ac===xt&&(h.g.Ac=void 0,Ov(h,h.U[1]))})):St()}else h.g.cursor=ut,Pv(h)}function Vv(h,ut,St,xt){const Ot=ut.style!=="none";!h.g.rb&&Ot&&St!==void 0&&xt!==void 0&&Ip(h,St*h.J.eb/65535,xt*h.J.Wa/65535),h.g.rb=Ot,Ot||(h.g.Sd=0,h.g.Td=0),es(h),Ov(h,ut),Ds(h)}function Mu(h){h.M!==0&&(window.clearTimeout(h.M),h.M=0)}function Nv(h){h.cursorType==2?(h.N.kc=Js(h),h.videoAddEventListener(Js(h),h.L?h.ka:h.ja)):h.I!==0?(h.N.kc="pointerrawupdate",h.videoAddEventListener("pointerrawupdate",h.wa)):(h.N.kc=Js(h),h.videoAddEventListener(Js(h),h.va))}function Pp(h){if(0<h.F.size){dt.i("{70cc40b}","{041c67f}",h.F.size);for(const ut of h.F)h.Ab(ut,0)}}function Lv(h){h.cursorType==2?h.videoRemoveEventListener(Js(h),h.L?h.ka:h.ja):h.I!==0?h.videoRemoveEventListener("pointerrawupdate",h.wa):h.videoRemoveEventListener(Js(h),h.va)}function Js(h){return h.L?"pointermove":"mousemove"}var Qy=class{constructor(h,ut,St,xt,Ot,Vt,Dt,Ft,Qt,rr,nr,lr){var Yt,dr,ir,Xt,br,Tr,Sr,Mr,gr,_r,Er,cr,kr,Wr,mn,vn,Pn,Gn;this.Ba=h,this.s=lr,this.W=new Map,this.U=Wy.map(Gy),this.P=this.m=0,this.Db=!1,this.F=new Set,this.ua=this.Ka=this.o=this.$=this.L=this.T=!1,this.H=this.I=0,this.ca=!1,this.ra={passive:!1},this.Z=!0,this.C=!1,this.O=this.M=0,this.Sa=()=>{this.O=0,ru(this)&&!Ll(this)&&(this.Db=!0,es(this))},this.u=Dt,this.D=ut,this.v=St,this.G=Ot,this.Na=Vt,this.N=Ft,this.V=Qt,this.ia=rr,this.l=nr,xt.onmessage=sn=>function(kn,Fn){let Tn=new Uint8Array(Fn.data);switch(Tn[0]){case 0:case 1:Fn=Tn[1];let Yo=Tn[2],cs=Tn[3];var so=Tn[4];let Ir=5,pn=()=>{const On=Tn[Ir]+(Tn[Ir+1]<<8);return Ir+=2,On};var no="";so!=0&&(no=Tn.subarray(Ir,Ir+so),Ir+=so,no=new TextDecoder("utf-8").decode(no));var Mo="";let un,An,_n;(so=pn())!=0&&(Mo=Tn.subarray(Ir,Ir+so),Ir+=so,Mo=new TextDecoder("utf-8").decode(Mo)),Ir+4<=Tn.byteLength&&(un=pn(),An=pn()),Ir+2<=Tn.byteLength&&(_n=pn()/100),Tn[0]==0?Tv(kn,Fn,un,An):function(On,$n,Rn,io,So,lo,Jn,eo,fo){if(0<lo.length)Rn={Ma:lo,Ha:Rn,Ia:io,zf:So,scale:fo||1},On.W.set($n,Rn);else if((Rn=On.W.get($n))===void 0)return void dt.e("{70cc40b}","{0196577}",$n);Vv(On,Rn,Jn,eo)}(kn,Fn,Yo,cs,no,Mo,un,An,_n);break;case 10:kn.Na.allowUnconfined&&function(On,$n){On.g.yd=$n,es(On)}(kn,Tn[1]==1)}}(this,sn),this.J={eb:St.clientWidth||window.screen.width,Wa:St.clientHeight||window.screen.height,Sf:1,Xa:0,Ra:0,videoWidth:0,videoHeight:0,Pc:0,offsetX:0,offsetY:0,ma:1},h=window.zoneless,this.documentAddEventListener=(dr=(Yt=h==null?void 0:h.documentAddEventListener)===null||Yt===void 0?void 0:Yt.bind(document))!==null&&dr!==void 0?dr:document.addEventListener.bind(document),this.documentRemoveEventListener=(Xt=(ir=h==null?void 0:h.documentRemoveEventListener)===null||ir===void 0?void 0:ir.bind(document))!==null&&Xt!==void 0?Xt:document.removeEventListener.bind(document),this.videoAddEventListener=(Mr=(Tr=(br=h==null?void 0:h.videoAddEventListener)===null||br===void 0?void 0:br.bind(St))!==null&&Tr!==void 0?Tr:(Sr=h==null?void 0:h.documentAddEventListener)===null||Sr===void 0?void 0:Sr.bind(document))!==null&&Mr!==void 0?Mr:St.addEventListener.bind(St),this.videoRemoveEventListener=(cr=(_r=(gr=h==null?void 0:h.videoRemoveEventListener)===null||gr===void 0?void 0:gr.bind(St))!==null&&_r!==void 0?_r:(Er=h==null?void 0:h.documentRemoveEventListener)===null||Er===void 0?void 0:Er.bind(document))!==null&&cr!==void 0?cr:St.removeEventListener.bind(St),this.fa=this.na.bind(this),this.xa=this.$a.bind(this),this.pa=this.oa.bind(this),this.ya=this.bb.bind(this),this.qa=this.Ta.bind(this),this.va=this.ab.bind(this),this.wa=this.Va.bind(this),this.ja=this.ga.bind(this),this.ka=this.Qa.bind(this),this.ta=this.Ua.bind(this),this.sa=this.Za.bind(this),this.da=this.Oa.bind(this),this.ea=this.Pa.bind(this),this.aa=!!Vt.windowedStreaming,this.cursorType=(Wr=(kr=function(){switch(Zu){case"hw":return 1;case"sw":return 0;case"free":return 2}}())!==null&&kr!==void 0?kr:Vt.cursorType)!==null&&Wr!==void 0?Wr:this.aa?2:0,dt.i("{70cc40b}","{3277c0e}",this.cursorType),this.g={rb:!1,yd:this.cursorType===0&&!Vt.allowUnconfined,sb:0,tb:0,Sd:0,Td:0,style:"",cursor:this.U[0]},this.h={wb:1,Vc:!1,bd:!1,od:!1},this.Da=["image-set","-webkit-image-set"].find(sn=>CSS.supports("cursor",`${sn}(url(image.bmp) 2x) 0 0, auto`)),this.cursorType===0?(this.j=function(sn){let kn="canvasId1";var Fn=document.getElementById(kn);if(Fn&&Fn instanceof HTMLCanvasElement&&Fn.parentElement===sn.parentElement)return Fn;if(Fn)do kn="canvasId"+Math.round(1e4*Math.random()),Fn=document.getElementById(kn);while(Fn);return(Fn=document.createElement("canvas")).id=kn,Fn.style.touchAction="none",Fn.style.pointerEvents="none",Fn.style.willChange="transform",sn.insertAdjacentElement("afterend",Fn),Fn}(this.v),this.j.style.visibility="hidden",this.j.style.display="none"):this.j=document.createElement("canvas"),Cv(this),kp(this),this.T="onpointerrawupdate"in this.v,this.$=(this.L=G0())&&"getCoalescedEvents"in PointerEvent.prototype&&Dt.browser!=="Firefox",dt.i("{70cc40b}","{f30b8ee}",this.$?"supported":"not supported"),this.T&&(St=function(){const sn=Qn.mouseCoalesceInterval;if(sn!==void 0)return new Map([[0,0],[4,1],[8,2],[16,3]]).get(sn)}(),St!==void 0?Cu(this,St):pt(Dt)?Cu(this,3):Cu(this,1),dt.i("{70cc40b}","{20be0c0}",this.H,St!==void 0?" (overridden)":"")),this.o=(mn=Vt.unadjustedMovement)!==null&&mn!==void 0?mn:mt(this.u)?!this.aa&&Kt(this.u,84,0,4147,78):pt(this.u)||lt(this.u)?Kt(this.u,86,0,4240,198):this.u.browser==="Safari",Vt=pt(Dt)&&Kt(this.u,84,0,4147,94)&&!Kt(this.u,88,0,4324,139),Vt=mt(this.u)||!Vt||!Kt(this.u,84,0,4147,94),((vn=to)!==null&&vn!==void 0?vn:Vt)?this.R=new class{constructor(){this.l=this.j=this.o=this.m=this.F=this.C=this.s=this.h=this.g=0,this.v=!1}jf(){return this.g}kf(){return this.h}update(sn,kn,Fn){if(sn===0&&kn===0)return this.v?this.l=this.j=0:this.v=!0,!1;if(this.v=!1,this.j===0&&this.l===0){if(Fn<this.s)return this.j=sn,this.l=kn,!1}else sn+=this.j,kn+=this.l,this.l=this.j=0;var Tn=sn*this.g+kn*this.h,so=sn*sn+kn*kn,no=this.g*this.g+this.h*this.h,Mo=!0;if(.95>Fn-this.s&&0>Tn&&no!==0&&Tn*Tn>.81*so*no&&(Tn=Math.sqrt(so)/Math.sqrt(no),.5<(Tn=Math.abs(Tn-Math.trunc(Tn)))&&(Tn=1-Tn),.1>Tn&&(Mo=!1)),Tn=sn-this.g,so=kn-this.h,Mo&&(Mo=2*(no=1+.1*Math.max(1,Math.min(16,Fn-this.s)))*Math.abs(this.C),no=2*no*Math.abs(this.F),!(Mo=Tn*Tn+so*so<(no=Math.max(8100,Mo*Mo+no*no)))&&(this.m||this.o))){Mo=sn-this.m;const Yo=kn-this.o;Mo=Mo*Mo+Yo*Yo<no}return Mo?(this.C=.4*this.C+.6*Tn,this.F=.4*this.F+.6*so,this.g=sn,this.h=kn,this.s=Fn,this.o=this.m=0,!0):(this.m=sn,this.o=kn,!1)}}:this.R=new class{constructor(){this.y=this.x=0}jf(){return this.x}kf(){return this.y}update(sn,kn){return this.x=sn,this.y=kn,!0}},["pointerlockchange","mozpointerlockchange"].forEach(sn=>this.documentAddEventListener(sn,this.ta)),["pointerlockerror","mozpointerlockerror"].forEach(sn=>this.documentAddEventListener(sn,this.sa)),hs(this.s,0,this.da),hs(this.s,2,this.ea),it(this.u)||_(this.u)?this.S=!0:Dt.browser!="Chrome"||Kt(Dt,99,0,4844,44)||lt(Dt)?this.S=!1:this.S=!0,this.cursorType===1&&Tv(this,1),this.cb=this.cursorType===1&&((Gn=(Pn=_f)!==null&&Pn!==void 0?Pn:Qn.pointerLockEscape)===null||Gn===void 0||Gn),this.lb=this.cursorType===1&&Dt.browser==="Safari",dt.d("{70cc40b}","{ec7c4c5}")}uninitialize(){["pointerlockerror","mozpointerlockerror"].forEach(h=>this.documentRemoveEventListener(h,this.sa)),["pointerlockchange","mozpointerlockchange"].forEach(h=>this.documentRemoveEventListener(h,this.ta)),ps(this.s,0,this.da),ps(this.s,2,this.ea),Mv(this)}$a(h){Ru(h)||(h.preventDefault(),this.na(h),this.cursorType===2&&this.v.setPointerCapture(h.pointerId))}na(h){var ut;(ut=this.D.R)===null||ut===void 0||ut.g==2&&(dt.i("{4c846ba}","{89b1a9f}"),m0(ut),vy(ut),my(ut)),i0(this.s,!0),this.Db=!0,ut=Zo(h.timeStamp),ru(this)&&!Ll(this)?(es(this),this.g.rb&&(Tu(this,h.offsetX,h.offsetY),Ys(this),yp(this.l,this.g.sb,this.g.tb,ut))):(this.lb&&this.g.rb&&(Mv(this),this.O=window.setTimeout(this.Sa,500)),pr(Jo()),this.Jb(h.button,ut))}bb(h){Ru(h)||(h.preventDefault(),this.oa(h))}oa(h){pr(Jo()),this.Ab(h.button,Zo(h.timeStamp))}Ta(h){this.aa&&h.target!==this.v||(tv(this.l,h.deltaY,Zo(h.timeStamp)),h.preventDefault())}Qa(h){if(!Ru(h)){if(h.preventDefault(),h.button!==-1){let ut;switch(h.button){case 1:ut=2;break;case 2:ut=1;break;default:ut=h.button}const St=Zo(h.timeStamp);h.buttons&1<<ut?this.Jb(h.button,St):this.Ab(h.button,St)}this.ga(h)}}ga(h){Tu(this,h.offsetX,h.offsetY),yp(this.l,this.g.sb,this.g.tb,Zo(h.timeStamp))}ab(h){Rv(this,h)}Va(h){const ut=0<this.l.ia.h;Rv(this,h),!ut&&0<this.l.ia.h&&((h=performance.now()-this.l.tg)>=this.H?Vo(this.l):function(St,xt){St.Kb=window.setTimeout(()=>{St.Kb=0,Vo(St)},xt)}(this.l,this.H-h))}Pa(h){this.Db=h,es(this),Ds(this)}Ua(){if(document.pointerLockElement instanceof HTMLElement)this.m=2;else{var h=this.m===2;this.m=0,Mu(this);var ut=()=>{dt.i("{70cc40b}","{d4b3de3}"),this.Db=!1,Ds(this)},St=this.Ba.Ya.has(27);this.cb&&h&&!St?this.M=window.setTimeout(()=>{ut(),this.M!==0&&(Mu(this),Np(this.Ba,!0))},50):(h&&ut(),Np(this.Ba,!1))}}Za(){this.ua||(this.m=0,this.o?(this.o=!1,dt.e("{70cc40b}","{7599808}"),es(this)):(dt.e("{70cc40b}","{d633cd1}"),Ds(this)))}yb(){return this.C}Oa(h){h?(this.s.j&&(this.Db=!0,es(this)),kp(this)):(es(this),this.M!==0&&(Mu(this),Np(this.Ba,!1)))}Jb(h,ut){this.F.has(h)||(this.F.add(h),this.l.Jb(h,ut))}Ab(h,ut){this.F.has(h)&&(this.F.delete(h),this.l.Ab(h,ut))}lc(h){this.Z!=h&&(Ys(this),this.Z=h)}};function Ru(h){return!h.isPrimary||h.pointerType==="touch"||h.pointerType==="pen"}const Yy=[{Bc:8,fc:128,rd:Iu(),Wb:27,Xb:[]},{Bc:46,fc:128,rd:Iu(),Wb:27,Xb:[]}];function Jy(h,ut,St,xt){h.J.ma===1&&(jp(h,ut,xt,St),h.I.delay(()=>{h.Jb(0,St)}))}function Op(h,ut){h.J.ma===1&&(ku(h.I),h.Ab(0,ut))}function Vp(h){var ut=h.h;ut.ca=!1,Ys(ut),1.1>h.J.ma&&Xs(h,h.J.offsetX,h.J.offsetY,1)}function Dl(h){return h.aa?($p(h),!1):h.v.h}function Dv(h,ut){if(ut.length===2){var St=h.h;St.ca=!0,Ys(St),St=ut[0],ut=ut[1];var xt=Math.hypot(St.clientX-ut.clientX,St.clientY-ut.clientY),Ot=Math.hypot(St.clientX-St.deltaX-(ut.clientX-ut.deltaX),St.clientY-St.deltaY-(ut.clientY-ut.deltaY));const Vt=h.j.getBoundingClientRect(),Dt=Uv(h);xt=xt/Ot*h.J.ma,xt=Math.min(Math.max(xt,1),3),Ot=(St.clientX+ut.clientX)/2-Vt.left,Ot+=h.J.offsetX-Dt.pb-(Vt.width-Ot)/h.J.ma,Ot=(xt/h.J.ma-1)*Ot*-1,Ot+=h.J.offsetX+(St.deltaX+ut.deltaX)/2;let Ft=(St.clientY+ut.clientY)/2-Vt.top;Ft+=h.J.offsetY-Dt.vertical-(Vt.height-Ft)/h.J.ma,Ft=(xt/h.J.ma-1)*Ft*-1,Ft+=h.J.offsetY+(St.deltaY+ut.deltaY)/2,Xs(h,Ot,Ft,xt)}}function Xy(h,ut,St,xt,Ot){switch(ku(h.I),Ot){case 1:jp(h,ut,xt,St),h.I.delay(()=>{nu(h,0,St)});break;case 2:h.ka++,hn&&h.F===0&&(h.F=window.setTimeout(()=>{h.ka===2?h.D.toggleOnScreenStats():h.ka===3&&h.D.toggleOnScreenStats(!0),Fp(h)},300)),nu(h,2,St);break;case 3:h.ga++,hn&&h.F===0&&(h.F=window.setTimeout(()=>{h.ga===2?h.D.ja():h.ga===3&&$m(h.S),Fp(h)},300)),nu(h,1,St);break;case 4:nu(h,3,St);break;case 5:nu(h,4,St)}}function Np(h,ut){ut&&(xu(h),dt.i("{8bacfa5}","{f46c4da}"),zo(h.g,3,27,0),zo(h.g,4,27,0))}function Lp(h){Bv(h),h.fa=window.setTimeout(()=>{h.S.send()},350)}function Dp(h,ut){(h.aa=ut)&&h.m!==15&&(h.oa=h.m,h.toggleUserInput(!0)),ut?$v(h).forEach(St=>h.documentAddEventListener(St,h.xa)):$v(h).forEach(St=>h.documentRemoveEventListener(St,h.xa))}function Bv(h){h.fa!==0&&(window.clearTimeout(h.fa),h.fa=0)}function Fv(h,ut){if(!(h.na&&ut.keyCode===20||s(h.u)&&ut.keyCode!==20)){var St=16;if(h.O&&h.ja||!ut.getModifierState("CapsLock")||(St|=1),h.$a&&(St|=96,ut.getModifierState("NumLock")&&(St|=2),ut.getModifierState("ScrollLock")&&(St|=4)),St!=h.ca){h.ca=St,(ut=(h=h.g).fb(5)).setUint32(0,19,!0),ut.setUint8(4,St);try{Vo(h,ut),dt.d("{57a6a4d}","{56c9613}",St.toString(2))}catch(xt){dt.e("{57a6a4d}","{cbe483c}",xt),h.G.za(xt,"LockKeys state synchronize exception","{57a6a4d}.ts",0,0,!0)}}}}function Xs(h,ut,St,xt){h.J.ma=xt;let Ot=Uv(h);Ot.pb-=h.J.Xa,Ot.vertical-=h.J.Ra;let Vt=Math.max(Ot.vertical+Math.max(0,h.J.Wa-h.J.Pc+2*h.J.Ra),0),Dt=Math.max(Ot.vertical,0);Ot.pb=Math.max(Ot.pb,0),ut=Math.min(Math.max(ut,-1*Ot.pb),Ot.pb),St=Math.min(Math.max(St,-1*Vt),Dt),h.j.style.transform=`translate3d(${ut}px,${St}px,0px) scale3d(${xt},${xt},1)`,h.J.offsetX=ut,h.J.offsetY=St,xv(h.h,h.J)}function Bp(h,ut){var St;return h.P?h.o&&h.kb?(h=(St=ut.code)!==null&&St!==void 0&&St.length?Zl.get(ut.code):Zl.get(ut.key))!=null?h:0:(ut=ut.code?Zl.get(ut.code):Hy.get(ut.key))!=null?ut:0:ut.keyCode}function iu(h,ut){var St=0;let xt;return ut.ctrlKey&&!ut.code.startsWith("Control")&&(St|=2),ut.altKey&&!ut.code.startsWith("Alt")&&(St|=4),ut.metaKey&&!ut.code.startsWith("Meta")&&(St|=8),s(h.u)&&ut.key.length===1&&('!@#$%^&*()~_+{}|:"<>?'.includes(ut.key)?xt=1:"1234567890`-=[]\\;',./".includes(ut.key)&&(xt=0)),xt===void 0&&ut.shiftKey&&!ut.code.startsWith("Shift")&&(xt=1),St|(xt??0)}function xu(h){if(0<h.Ya.size){dt.i("{8bacfa5}","{7998ee8}",h.Ya.size);for(const ut of h.Ya)zo(h.g,4,ut,0);h.Ya.clear()}}function Fp(h){window.clearTimeout(h.F),h.F=0,h.ka=0,h.ga=0}function $p(h){Dp(h,!1),h.M.emit("StreamingEvent",{streamingWarnings:{code:4}}),h.Vd(),h.Ba.Df()}function $v(h){return[Js(h.h),"pointerdown","touchstart"]}function qv(h,ut){ut=new TextEncoder().encode(ut),h.sendTextInput(ut.buffer),h.textInputElement.value=""}function qp(h){for(let ut=h.length-1;0<=ut;ut--)if(Z0.get(h.charAt(ut))===void 0)return!1;return!0}function jv(h,ut){let St=!1;16&h.ca&&(St=!!(1&h.ca));for(let Ot=0;Ot<ut.length;Ot++){var xt=Z0.get(ut.charAt(Ot));if(!xt)return void dt.e("{8bacfa5}","{67554be}",ut.charAt(Ot));const Vt=xt.vkCode;xt=xt.shift?1:0,65<=Vt&&90>=Vt&&St&&(xt=~xt),xt&&zo(h.g,3,160,0,performance.now()),zo(h.g,3,Vt,xt,performance.now()),zo(h.g,4,Vt,xt,performance.now()),xt&&zo(h.g,4,160,0,performance.now())}h.textInputElement.value=""}function Uv(h){return{pb:h.J.eb*(h.J.ma-1)/2,vertical:h.J.Wa*(h.J.ma-1)/2}}function jp(h,ut,St,xt){ku(h.I);const Ot=ut.getBoundingClientRect();ut=(St.clientX-Ot.left)/h.J.ma,St=(St.clientY-Ot.top)/h.J.ma,h.lc(!0),Tu(h.h,ut,St);const{sb:Vt,tb:Dt}=h.h.g;yp(h.g,Vt,Dt,xt)}function nu(h,ut,St){h.Jb(ut,St),h.I.delay(()=>{h.Ab(ut,St)})}var Zy=class{constructor(h,ut,St,xt,Ot,Vt,Dt,Ft,Qt,rr,nr,lr,Yt,dr,ir,Xt,br){var Tr,Sr,Mr,gr,_r,Er,cr,kr,Wr,mn,vn,Pn,Gn,sn,kn,Fn,Tn,so,no,Mo,Yo,cs;this.v=dr,this.ra=!1,this.Ya=new Set,this.m=0,this.kb=!1,this.P=!0,this.F=0,this.I=new e1,this.T=!1,this.H=0,this.ja=this.qa=!1,this.fa=this.ga=this.ka=0,this.ua=this.ta="off",this.Z=new Map,this.W=new Map,this.pa=!1,this.Ta=()=>{dt.d("{8bacfa5}","{9c2578a}"),Lp(this)},this.Sa=()=>{this.pa=!0},this.Qa=()=>{this.pa=!1},this.u=nr,this.D=h,this.j=ut,this.G=Ot,this.Ba=lr,this.S=Yt,this.J={eb:ut.clientWidth||window.screen.width,Wa:ut.clientHeight||window.screen.height,Sf:1,Xa:0,Ra:0,videoWidth:0,videoHeight:0,Pc:0,offsetX:0,offsetY:0,ma:1},lr=window.zoneless,this.windowAddEventListener=(Sr=(Tr=lr==null?void 0:lr.windowAddEventListener)===null||Tr===void 0?void 0:Tr.bind(window))!==null&&Sr!==void 0?Sr:window.addEventListener.bind(window),this.windowRemoveEventListener=(gr=(Mr=lr==null?void 0:lr.windowRemoveEventListener)===null||Mr===void 0?void 0:Mr.bind(window))!==null&&gr!==void 0?gr:window.removeEventListener.bind(window),this.documentAddEventListener=(Er=(_r=lr==null?void 0:lr.documentAddEventListener)===null||_r===void 0?void 0:_r.bind(document))!==null&&Er!==void 0?Er:document.addEventListener.bind(document),this.documentRemoveEventListener=(kr=(cr=lr==null?void 0:lr.documentRemoveEventListener)===null||cr===void 0?void 0:cr.bind(document))!==null&&kr!==void 0?kr:document.removeEventListener.bind(document),this.videoAddEventListener=(Pn=(mn=(Wr=lr==null?void 0:lr.videoAddEventListener)===null||Wr===void 0?void 0:Wr.bind(ut))!==null&&mn!==void 0?mn:(vn=lr==null?void 0:lr.documentAddEventListener)===null||vn===void 0?void 0:vn.bind(document))!==null&&Pn!==void 0?Pn:ut.addEventListener.bind(ut),this.videoRemoveEventListener=(Fn=(sn=(Gn=lr==null?void 0:lr.videoRemoveEventListener)===null||Gn===void 0?void 0:Gn.bind(ut))!==null&&sn!==void 0?sn:(kn=lr==null?void 0:lr.documentRemoveEventListener)===null||kn===void 0?void 0:kn.bind(document))!==null&&Fn!==void 0?Fn:ut.removeEventListener.bind(ut),this.Na=this.Ka.bind(this),this.Pa=this.Oa.bind(this),this.va=this.wa.bind(this),this.sa=this.bb.bind(this),this.ea=this.da.bind(this),this.Va=this.Nb.bind(this),this.Ua=this.lb.bind(this),this.xa=this.cb.bind(this),this.ab=this.Cb.bind(this),this.L=this.Bb.bind(this),this.N=Qt,this.preventNavigation=!!Dt.preventNavigation,Qt=new class{constructor(){this.m=!1,this.j=0,this.l=Array(36);for(let Ir=0;Ir<this.g.length;Ir++)this.l[Ir]={ib:!1,x:0,y:0,captureTimestamp:0,jb:0,yc:0}}get g(){return this.l}get h(){return this.j}},this.g=new class{constructor(Ir,pn,un,An,_n,On,$n,Rn){this.La=this.ud=0,this.buffer=new ArrayBuffer(1150),this.ig=new DataView(this.buffer),this.Kg=new ArrayBuffer(658),this.gb=new DataView(this.Kg),this.Fb=new DataView(new ArrayBuffer(176)),this.Jg=new ArrayBuffer(100),this.Kb=0,this.Ff=this.xg,this.fb=this.ng,this.Oc=[],this.Ba=Ir,this.ia=pn,this.D=_n,this.J=An,this.Ja=On,this.Ja.onmessage=io=>{if(io=new DataView(io.data),this.La===0){let So=io.getUint16(0,!0);So==526?(this.Fd=this.qg.bind(this),this.La=io.getUint16(2,!0)):(this.Fd=this.ad.bind(this),this.La=So),this.La==2?this.ia.m=!0:2<this.La&&(this.ia.m=!0,this.Ff=this.yg,this.fb=this.og),dt.i("{57a6a4d}","{68c4654}",this.La)}else this.Fd(io,0)},this.Aa=Rn,this.G=$n,this.V=un,this.Fd=this.ad.bind(this),this.gb.setUint8(9,34),this.gb.setUint32(10,24,!0),this.Aa&&(this.Zc=1)}qg(Ir,pn){var un=Ir.getUint16(pn,!0);if(un===267)this.ad(Ir,pn+2);else switch(pn=255&un){case 32:case 33:case 34:case 35:case 36:case 255:if((un=pn)===34)switch(un=Ir.getUint32(1,!0)){case 267:this.ad(Ir,5);break;case 17:if(6<=(pn=Ir.getUint8(5))&&9>=pn){un=pn-6;var An=Ir.getUint8(8),_n=Ir.getUint8(9);if(An!==5||1&~_n)dt.w("{57a6a4d}","{d8b7bec}",An,_n,pn);else{pn=Ir.getUint8(12)<<8;const On=Ir.getUint8(13)<<8;for(const $n of this.Oc){An=pn,_n=On;const Rn=(Ir=$n).U.get(un);Rn!==void 0&&bv(Ir,Rn,An,_n)}}}else dt.w("{57a6a4d}","{6135ec1}",pn);break;default:dt.w("{57a6a4d}","{25be6a3}",un)}else dt.d("{57a6a4d}","{ba4ff6a}",un);break;default:dt.w("{57a6a4d}","{aea35b8}",un)}}ad(Ir,pn){var un=Ir.getUint16(pn,!0);if(un==1)if(6>(un=Ir.getUint16(pn+2,!0)))dt.e("{57a6a4d}","{1527181}",un);else{6<un&&dt.w("{57a6a4d}","{78db114}",un),un=Ir.getUint16(pn+4,!0);var An=Ir.getUint16(pn+6,!0);Ir=Ir.getUint16(pn+8,!0);for(const $n of this.Oc){var _n=An,On=Ir;const Rn=(pn=$n).Zb.get(un);Rn!==void 0&&bv(pn,Rn,_n,On)}}else dt.w("{57a6a4d}","{c7cf6da}",un)}Jb(Ir,pn){const un=this.fb(18);un.setUint32(0,8,!0),un.setUint8(4,Ir+1),un.setUint8(5,0),un.setUint32(6,0),Po(pn,un,10,!1,1e3);try{Vo(this,un)}catch(An){dt.e("{57a6a4d}","{b258856}",An),this.G.za(An,"send mousedown exception","{57a6a4d}.ts",0,0,!0)}}Ab(Ir,pn){const un=this.fb(18);un.setUint32(0,9,!0),un.setUint8(4,Ir+1),un.setUint8(5,0),un.setUint32(6,0),Po(pn,un,10,!1,1e3);try{Vo(this,un)}catch(An){dt.e("{57a6a4d}","{c1ae1fc}",An),this.G.za(An,"send mouseup exception","{57a6a4d}.ts",0,0,!0)}}Vd(){const Ir=this.fb(10);Ir.setUint32(0,2,!0);try{this.Ja.send(Ir),dt.d("{57a6a4d}","{5693344}")}catch(pn){dt.e("{57a6a4d}","{ab52f04}",pn),this.G.za(pn,"heartbeat exception","{57a6a4d}.ts",0,0,!0)}}xg(Ir){this.Kb!==0&&(window.clearTimeout(this.Kb),this.Kb=0);var pn=performance.now();this.ud=pn;for(var un=1,An=0;An<this.ia.h;){un+=2;var _n=this.ia.g[An].jb;if(0<_n){un+=19;for(var On=0;On<_n;On++)un+=1+(this.ia.g[An+On].ib?26:22);An+=_n}else un+=this.ia.g[An].ib?26:22,An++}(un+=Ir?2+Ir.byteLength:0)>this.buffer.byteLength?(un=new DataView(new ArrayBuffer(un)),this.V.jd++):un=new DataView(this.buffer,0,un),un.setUint8(0,255);var $n=1;for(An=0;An<this.ia.h;){if(_n=$n,$n+=2,0<(On=this.ia.g[An]).jb){var Rn=un,io=An,So=pn,lo=this.ia.g[io],Jn=$n;$n+=19;for(let eo=0;eo<lo.jb;++eo){const fo=this.ia.g[io+eo];Rn.setUint8($n,fo.ib?26:22),$n=Au(this,Rn,++$n,fo.ib,fo.x,fo.y,fo.captureTimestamp)}io=Jn,Jn=$n-Jn,lo=lo.yc,Rn.setUint8(io,32),Rn.setUint16(io+1,Jn,!1),Po(So,Rn,io+3,!1,1e3),Po(lo,Rn,io+11,!1,1e3),An+=On.jb}else $n=Au(this,un,$n,On.ib,On.x,On.y,On.captureTimestamp),An++;un.setUint16(_n,$n-_n-2)}if(this.ia.j=0,Ir)for(un.setUint16($n,Ir.byteLength),$n+=2,pn=0;pn<Ir.byteLength;pn++)un.setUint8($n+pn,Ir.getUint8(pn));return un}yg(Ir){var pn;if(Ir&&Ir.buffer!=this.buffer)return Vo(this),Ir;this.Kb!==0&&(window.clearTimeout(this.Kb),this.Kb=0),this.ud=performance.now();for(var un=0,An=-1,_n=0;_n<this.ia.h;_n++)0<this.ia.g[_n].jb?(un+=9,An=this.ia.g[_n].jb):An===0&&(un+=9),un+=3+(this.ia.g[_n].ib?26:22),An--;if(un+=(pn=Ir==null?void 0:Ir.byteLength)!==null&&pn!==void 0?pn:0,(pn=9+un)>this.buffer.byteLength){if(pn=new DataView(new ArrayBuffer(pn),pn-un,un),this.V.jd++,Ir)for(un=pn.byteLength-Ir.byteLength,An=0;An<Ir.byteLength;An++)pn.setUint8(un+An,Ir.getUint8(An))}else pn=new DataView(this.buffer,this.buffer.byteLength-un,un);for(Ir=0,un=-1,An=0;An<this.ia.h;An++)0<(_n=this.ia.g[An]).jb?(un=_n.jb,pn.setUint8(Ir,36),Po(_n.yc,pn,Ir+1,!1,1e3),Ir+=9):un===0&&(pn.setUint8(Ir,36),Po(0,pn,Ir+1,!1,1e3),Ir+=9),pn.setUint8(Ir,33),pn.setUint16(Ir+1,_n.ib?26:22),Ir=Au(this,pn,Ir+3,_n.ib,_n.x,_n.y,_n.captureTimestamp),un--;return this.ia.j=0,pn}ng(Ir){return new ev(this.Jg,0,Ir)}og(Ir){Ir+=1;const pn=this.buffer.byteLength-Ir;return Ir=new ev(this.buffer,pn,Ir,1),this.ig.setUint8(pn,34),Ir}sendTextInput(Ir){let pn=0,un=new DataView(Ir,0,Ir.byteLength),An=new ArrayBuffer(1021);for(;pn<Ir.byteLength;){let On;if(1016>=Ir.byteLength-pn)On=Ir.byteLength-pn;else{On=pn+1016;var _n=!1;for(let $n=0;4>$n;$n++){if((192&un.getUint8(On))!=128){_n=!0;break}On--}if(!_n){dt.e("{57a6a4d}","{938b0d3}");break}On-=pn}(_n=new DataView(An,0,On+5)).setUint8(0,34),_n.setUint32(1,23,!0),new Uint8Array(An).set(new Uint8Array(Ir,pn,On),5),pn+=On,Vo(this,_n,!1)}}stop(){0<this.Ja.bufferedAmount&&dt.w("{57a6a4d}","{5e5b9e5}",this.Ja.bufferedAmount),this.Aa&&0<this.Aa.bufferedAmount&&dt.w("{57a6a4d}","{1785a7c}",this.Aa.bufferedAmount)}get zg(){return this.La}get tg(){return this.ud}Eb(Ir){Vo(this,Ir=wp(this,0,0,0,[0,0,0,0],0,Ir))}$c(Ir,pn,un,An,_n,On,$n=0,Rn){2<this.La?(Ir=(this.Aa?12:9)+41*Ir,this.Fb.setUint8(Ir,33),this.Fb.setUint16(Ir+1,38),bp(this.Fb,Ir+3,un,An,_n,On,$n,Rn)):this.La==2?(Ir=1+40*Ir,this.Fb.setUint16(Ir,38),bp(this.Fb,Ir+2,un,An,_n,On,$n,Rn)):Vo(this,un=wp(this,An,_n,un,On,$n,Rn))}Yb(Ir,pn,un,An,_n=0){Vo(this,Ir=wp(this,Ir,pn,un,An,0,_n))}Yc(Ir){if(!(2>this.La||0>=Ir)){Vo(this);var pn=null;2<this.La?pn=new DataView(this.Fb.buffer,this.Aa?12:9,41*Ir):this.La==2&&(this.Fb.setUint8(0,255),pn=new DataView(this.Fb.buffer,0,1+40*Ir)),pn&&(this.Aa?Vo(this,pn,!0,"gamepad_channel_v1"):Vo(this,pn,!0))}}Uc(){}Fg(Ir){const pn=this.fb(6);pn.setUint32(0,13,!0),pn.setUint16(4,Ir?1:0,!1),Vo(this,pn)}gg(Ir){Vo(this,rv(this,4>Ir?Ir+6:0,1))}Of(Ir){Vo(this,rv(this,4>Ir?Ir+6:0,3))}Wc(Ir,pn,un,An,_n){(Ir=this.fb(72)).setUint32(0,17,!0),Ir.setUint8(4,4>pn?pn+6:0),Ir.setUint8(5,4),Ir.setUint8(6,0),Ir.setUint8(7,1),Ir.setUint8(8,127.5*(_n[0]+1)),Ir.setUint8(9,127.5*(_n[1]+1)),Ir.setUint8(10,127.5*(_n[2]+1)),Ir.setUint8(11,127.5*(_n[3]+1)),pn=0;var On=!!(2&un);const $n=!!(8&un),Rn=!!(1&un);(_n=!!(4&un))||On||$n||Rn?Rn?pn=$n?1:_n?7:0:On?pn=$n?3:_n?5:4:$n?pn=2:_n&&(pn=6):pn=8,_n=(_n=(256&un?1:0)|(512&un?2:0)|(255&An?4:0)|(65280&An?8:0))|(32&un?16:0)|(16&un?32:0)|(64&un?64:0)|(128&un?128:0),On=(65536&un?1:0)|(131072&un?2:0),Ir.setUint8(12,pn|(16384&un?16:0)|(4096&un?32:0)|(8192&un?64:0)|(32768&un?128:0)),Ir.setUint8(13,_n),Ir.setUint8(14,On),Ir.setUint8(15,255&An),Ir.setUint8(16,(65280&An)>>8),Ir.setUint16(17,0,!0),Ir.setUint8(19,0),Ir.setInt16(20,0,!0),Ir.setInt16(22,0,!0),Ir.setInt16(24,0,!0),Ir.setInt16(26,0,!0),Ir.setInt16(28,0,!0),Ir.setInt16(30,0,!0),Ir.setUint32(32,0,!0),Ir.setUint8(36,0),Ir.setUint8(37,11),Ir.setUint8(38,0),Ir.setUint8(39,0),Ir.setUint8(40,0),Vo(this,Ir)}}(this,Qt,ir,this.J,this.D,St,this.G,Xt),this.R=new Ky(this.j,this.u),this.h=new Qy(this,h,ut,xt,Ot,Dt,nr,this.R,ir,Qt,this.g,this.v),Ft?Ql||Ut()?(this.s=new class{constructor(Ir,pn,un,An,_n){this.target=Ir,this.videoAddEventListener=pn,this.videoRemoveEventListener=un,this.P=An,this.j=_n,this.o=this.m=0,this.F={pb:1,vertical:1},this.g=new Map,this.s=new Set,this.l=0,this.h=[],this.v=0,this.N=!0,this.M=On=>{const $n=performance.now(),Rn=Zo(On.timeStamp);let io=!1;this.j.lc(!1);const So=On.changedTouches;let lo=[];for(let eo=0;eo<So.length;eo++){const fo=So[eo];if(fo.target===this.target){io=!0,pr(Jo());var Jn=fo;let po=0;for(;this.s.has(po);)po++;let na=new Uy(Jn,po,this.F);this.g.set(Jn.identifier,na),this.s.add(po),Jn=na,lo.push(Jn),Ms&&this.h.push(new gp(fo,Jn.g,1,$n,On.timeStamp))}}Su(this,lo,1,Rn),Ms&&ip&&this.g.size==8&&this.N&&(this.C(),this.O()),Dl(this.j)&&io&&On.preventDefault()},this.L=On=>{const $n=performance.now(),Rn=Zo(On.timeStamp);let io=!1;const So=On.changedTouches;let lo=[];for(let Jn=0;Jn<So.length;Jn++){const eo=So[Jn];if(eo.target===this.target){let fo=this.g.get(eo.identifier);fo&&(io=!0,fo.update(eo),lo.push(fo),Ms&&this.h.push(new gp(eo,fo.g,4,$n,On.timeStamp)))}}Su(this,lo,4,Rn),Dl(this.j)&&io&&On.preventDefault()},this.H=On=>{X0(this,On,8)},this.I=On=>{X0(this,On,2)},this.C=this.S.bind(this),this.O=this.R.bind(this)}S(){const Ir=this.h.length;if(Ir){var pn=this.h[Ir-1].g-3e4,un=-1;for(let An=0;An<Ir&&this.h[An].g<pn;An++)un=An;this.h.splice(0,un+1)}}R(){for(let Ir of this.h)dt.d("{ec05004}","{3c6a946}",Ir.j.toFixed(2),Ir.g.toFixed(2),Ir.id,Ir.h,Ir.v,Ir.l.toFixed(2),Ir.m.toFixed(2),Ir.o.toFixed(0),Ir.s.toFixed(0));this.h=[]}start(){this.l=0;const Ir={passive:!1};this.videoAddEventListener("touchstart",this.M,Ir),this.videoAddEventListener("touchmove",this.L,Ir),this.videoAddEventListener("touchcancel",this.H,Ir),this.videoAddEventListener("touchend",this.I,Ir),Ms&&(dt.d("{ec05004}","{72764d2}",performance.now()),this.h=[],this.v=window.setInterval(this.C,6e4)),this.j.lc(!1)}stop(){Ms&&(this.v&&clearTimeout(this.v),this.C(),this.O()),this.g.size&&(Su(this,Array.from(this.g.values()),8,performance.now()),this.g.clear(),this.s.clear()),this.l&&dt.w("{ec05004}","{10858ae}",this.l);const Ir={passive:!1};this.videoRemoveEventListener("touchstart",this.M,Ir),this.videoRemoveEventListener("touchmove",this.L,Ir),this.videoRemoveEventListener("touchcancel",this.H,Ir),this.videoRemoveEventListener("touchend",this.I,Ir)}}(this.j,this.videoAddEventListener,this.videoRemoveEventListener,this.g,this),dt.i("{8bacfa5}","{60f3637}")):dt.w("{8bacfa5}","{32104d3}"):dt.i("{8bacfa5}","{6be89bf}"),!Ql&&!Ut()||Gt(this.u)||(this.C=new class{constructor(Ir,pn,un,An){this.target=Ir,this.videoAddEventListener=pn,this.videoRemoveEventListener=un,this.j=An,this.h=[],this.g=this.m=this.l=0,this.C=_n=>{let On=!1;const $n=_n.changedTouches,Rn=Zo(_n.timeStamp);for(let io=0;io<$n.length;io++){const So=$n[io];So.target===this.target&&(On=!0,pr(Jo()),this.h.length===0?(this.g=1,this.l=window.setTimeout(()=>{this.l=0,this.m===1&&(this.g=2,xa&&Jy(this.j,this.target,Rn,mp(So)))},500)):this.g!==1&&(this.g===2||this.g===4?xa&&Op(this.j,Rn):this.g===6&&xa&&Vp(this.j),this.g=0),this.h.push(mp(So)),this.h.length>this.m&&(this.m=this.h.length))}Dl(this.j)&&On&&_n.preventDefault()},this.v=_n=>{let On=!1;for(var $n of this.h)$n.deltaX=0,$n.deltaY=0;$n=_n.changedTouches;const Rn=Zo(_n.timeStamp);let io=[];for(let Jn=0;Jn<$n.length;Jn++){const eo=$n[Jn],fo=this.h.findIndex(po=>po.identifier==eo.identifier);if(fo!=-1){On=!0;var So=this.h[fo],lo=eo.clientX-So.clientX;So=eo.clientY-So.clientY;let po=!1;this.l!==0?(10<Math.abs(lo)||10<Math.abs(So))&&(window.clearTimeout(this.l),this.l=0,po=!0):po=!0,po&&(lo={identifier:eo.identifier,clientX:eo.clientX,clientY:eo.clientY,deltaX:lo,deltaY:So},io.push(fo),this.h[fo]=lo)}}0<io.length&&this.l===0&&this.g!==0&&(this.h.length===1?(this.g===1?this.g=3:this.g===2&&(this.g=4),xa&&function(Jn,eo,fo,po){Jn.J.ma!==1||Jn.kb||Jn.s!==void 0?Xs(Jn,Jn.J.offsetX+po.deltaX,Jn.J.offsetY+po.deltaY,Jn.J.ma):jp(Jn,eo,po,fo)}(this.j,this.target,Rn,this.h[0])):this.h.length===2?this.g===5?xa&&this.j.scroll(this.target,Rn,this.h):this.g===6?xa&&Dv(this.j,this.h):this.g===1&&(0<this.h[0].deltaY*this.h[1].deltaY&&(Math.sign(this.h[0].deltaX)===Math.sign(this.h[1].deltaX)||10>Math.abs(this.h[0].deltaX)&&10>Math.abs(this.h[1].deltaX))?(this.g=5,xa&&this.j.scroll(this.target,Rn,this.h)):(this.g=6,xa&&Dv(this.j,this.h))):this.g=0),Dl(this.j)&&On&&_n.preventDefault()},this.o=_n=>{Q0(this,_n,!1)},this.s=_n=>{Q0(this,_n,!0)}}start(){const Ir={passive:!xa};this.videoAddEventListener("touchstart",this.C,Ir),this.videoAddEventListener("touchmove",this.v,Ir),this.videoAddEventListener("touchcancel",this.o,Ir),this.videoAddEventListener("touchend",this.s,Ir)}stop(){if(this.videoRemoveEventListener("touchstart",this.C),this.videoRemoveEventListener("touchmove",this.v),this.videoRemoveEventListener("touchcancel",this.o),this.videoRemoveEventListener("touchend",this.s),this.h=[],this.l!==0&&(window.clearTimeout(this.l),this.l=0),this.m=0,xa)switch(this.g){case 6:Vp(this.j);break;case 2:case 4:Op(this.j,performance.now())}this.g=0}}(this.j,this.videoAddEventListener,this.videoRemoveEventListener,this)),this.M=Vt,this.ca=0,this.$a=mt(this.u),this.na=pt(this.u),this.O=lt(this.u),this.o=this.u.os==="Android",this.Da=this.u.deviceModel==="VISIONPRO",h=this.u.browser==="Safari",ut=!!Dt.windowedStreaming,dt.i("{8bacfa5}","{fa2e72c}",ut?"on":"off"),this.$a?(dt.d("{8bacfa5}","{da5ae1d}"),this.$=[20,144,145]):this.na||this.u.os==="Linux"?(dt.d("{8bacfa5}","{b7becf9}"),this.$=[]):(dt.d("{8bacfa5}","{098ce9c}"),this.$=[20]),this.U=this.aa=!1,PerformanceObserver?this.perf=new PerformanceObserver(Ir=>function(pn,un){un.getEntriesByType("longtask").forEach(An=>{let _n=Math.round(An.duration);var On,$n=Co;$n.h&&(An={duration:{timestamp:An.startTime-$n.j,duration:_n}},$n.g&&$n.g.postMessage(An)),(On=pn.D.h)===null||On===void 0||(($n=On.g).L=Math.max(_n,$n.L)),dt.i("{8bacfa5}","{7071359}",_n)})}(this,Ir)):this.perf=null,hs(this.v,2,this.va),dt.d("{8bacfa5}","{cc9c05b}"),window.ResizeObserver?(this.Za=new ResizeObserver(()=>{this.da()}),this.Za.observe(this.j)):this.windowAddEventListener("resize",this.ea),(s(nr)||_(nr))&&window.IntersectionObserver&&(this.ya=new IntersectionObserver(()=>{this.da()},{threshold:[1]}),this.ya.observe(this.j)),this.j.addEventListener("resize",this.ea),this.windowAddEventListener("orientationchange",this.Ta),(nr=window.visualViewport)&&(this.J.Pc=nr.height,nr.addEventListener("resize",this.Va)),this.l=rr,function(Ir,pn){Ir.o&&(Ns(Ir,Ir.o),Cp(Ir,Ir.o)),Ir.o=pn,Ir.l.push(Ir.o)}(this.l,this.g),this.g.Oc.push(this.l),function(Ir,pn){op&&(Ir.m&&Ns(Ir,Ir.m),Ir.m=pn)}(this.l,this.R),this.l.G=this.G,this.wa(this.v.j),hs(this.v,0,this.sa),this.perf&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("longtask")&&this.perf.observe({entryTypes:["longtask"]}),np&&Jo().initialize(this.j,this.u),(Gt(this.u)||this.o||s(this.u))&&(this.textInputElement=br,this.o&&(this.ta=(so=(Tn=this.textInputElement)===null||Tn===void 0?void 0:Tn.getAttribute("autocapitalize"))!==null&&so!==void 0?so:"off",this.ua=(Mo=(no=this.textInputElement)===null||no===void 0?void 0:no.getAttribute("autocorrect"))!==null&&Mo!==void 0?Mo:"off",(Yo=this.textInputElement)===null||Yo===void 0||Yo.setAttribute("autocapitalize","off"),(cs=this.textInputElement)===null||cs===void 0||cs.setAttribute("autocorrect","off"))),(yn||cp&&(h||ut))&&(function(Ir,pn){if(pn)for(const _n of pn){if(!(pn=_n.remote.code)||!(pn=Zl.get(pn)))continue;var un=_n.remote.modifiers,An=[];1&un&&An.push(162),2&un&&An.push(164),4&un&&An.push(91),8&un&&An.push(160),un=An,An=_n.local.key;const On=_n.local.code;On?(An=Zl.get(On))&&Ir.W.set(An,{Bc:An,fc:_n.local.modifiers,rd:Iu(),Wb:pn,Xb:un}):An&&Ir.Z.set(An,{Ld:An,fc:_n.local.modifiers,rd:Iu(),Wb:pn,Xb:un})}else for(un of Yy)un.Ld?Ir.Z.set(un.Ld,un):un.Bc&&Ir.W.set(un.Bc,un)}(this,Dt.streamingHotkeys),function(Ir){var pn,un,An,_n,On,$n,Rn;for(const io of Ir.W.values())dt.i("{8bacfa5}","{e7c6e9b}",(pn=io.Bc)===null||pn===void 0?void 0:pn.toString(16),(un=io.fc)===null||un===void 0?void 0:un.toString(16),(An=io.Wb)===null||An===void 0?void 0:An.toString(16),(_n=io.Xb)===null||_n===void 0?void 0:_n.map(So=>So.toString(16)));for(const io of Ir.Z.values())dt.i("{8bacfa5}","{b5e3a31}",io.Ld,(On=io.fc)===null||On===void 0?void 0:On.toString(16),($n=io.Wb)===null||$n===void 0?void 0:$n.toString(16),(Rn=io.Xb)===null||Rn===void 0?void 0:Rn.map(So=>So.toString(16)))}(this))}uninitialize(){var h,ut,St,xt,Ot,Vt,Dt;Dp(this,!1);var Ft=this.j.paused;if(Ft=Ft!==void 0?Ft?"paused":"playing":"unknown",(this.j.paused||1>((h=this.j.currentTime)!==null&&h!==void 0?h:1))&&qo(this.G,"VideoPaused",Ft,(ut=this.j.currentTime)===null||ut===void 0?void 0:ut.toFixed(2)),dt.i("{8bacfa5}","{fdc8bf7}",Ft,this.j.currentTime),(St=this.ya)===null||St===void 0||St.disconnect(),(xt=this.Za)===null||xt===void 0||xt.disconnect(),this.g.stop(),this.perf&&this.perf.disconnect(),this.toggleUserInput(!1),this.windowRemoveEventListener("resize",this.ea),this.windowRemoveEventListener("orientationchange",this.Ta),this.j.removeEventListener("resize",this.ea),(Ot=window.visualViewport)===null||Ot===void 0||Ot.removeEventListener("resize",this.Va),(h=this.l).s){for(var Qt of(ut=!0,h.h))Qt&&(Qt.Fa.state=sv(h,Qt.Fa.state,!0),Vl(h,Qt.ba.index,!0,ut),ut=!1);av(h),h.j=0,h.s=0,h.g.qb=!1,h.Eb(),h.gamepadPollInterval=100,eu(h),h.h=[],h.Z=!1}-1<(h=(Qt=this.g).Oc.indexOf(this.l))&&Qt.Oc.splice(h,1),ps(this.v,2,this.va),this.R.stop(),Ns(this.l,this.R),Ns(this.l,this.g),this.T&&(Ns(this.l,this.N),this.N.Mc(this.j)),this.h.uninitialize(),ps(this.v,0,this.sa),Bv(this),(Vt=this.textInputElement)===null||Vt===void 0||Vt.setAttribute("autocapitalize",this.ta),(Dt=this.textInputElement)===null||Dt===void 0||Dt.setAttribute("autocorrect",this.ua),dt.d("{8bacfa5}","{b6b2756}")}Yb(){Eu(this.g)&&this.l.Yb()}da(){var h,ut=this.j;if(!(0>=ut.videoWidth||0>=ut.videoHeight)){var St=0,xt=0;if(ut.clientWidth/ut.clientHeight>ut.videoWidth/ut.videoHeight){var Ot=ut.clientHeight/ut.videoHeight,Vt=ut.videoWidth*Ot,Dt=ut.videoHeight*Ot;xt=(ut.clientWidth-Vt)/2}else Ot=ut.clientWidth/ut.videoWidth,Vt=ut.videoWidth*Ot,Dt=ut.videoHeight*Ot,St=(ut.clientHeight-Dt)/2;var Ft=1,Qt=1;this.J.eb&&this.J.Wa&&(Ft=Vt/this.J.eb,Qt=Dt/this.J.Wa),this.J.eb=Vt,this.J.Wa=Dt,this.J.Sf=Ot,this.J.Ra=St,this.J.Xa=xt,this.J.videoWidth=ut.videoWidth,this.J.videoHeight=ut.videoHeight,Xs(this,this.J.offsetX*Ft,this.J.offsetY*Qt,this.J.ma),xv(this.h,this.J),(h=this.s)===null||h===void 0||(ut=this.J,St=this.j.getBoundingClientRect(),Ot=this.J.ma,h.F={pb:St.left+window.pageXOffset+this.J.Xa*this.J.ma,vertical:St.top+window.pageYOffset+this.J.Ra*this.J.ma},h.m=65535/ut.eb,h.o=65535/ut.Wa,h.m/=Ot,h.o/=Ot),h=this.S,ut=this.J.Xa,h.Ra=this.J.Ra,h.Xa=ut,Lp(this)}}Nb(){this.J.Pc=window.visualViewport.height,Xs(this,this.J.offsetX,this.J.offsetY,this.J.ma)}lb(){dt.d("{8bacfa5}","{b6fbd34}"),history.pushState(null,document.title,location.href)}Ka(h){var ut,St;let xt=this.pa;this.qa=!1;const Ot=Zo(h.timeStamp);if(this.v.h){(function(ir,Xt){var br;if((br=l0(ir.D))!==null&&br!==void 0&&br.isVisible())return!1;if(ir.na)switch(Xt.code){case"Tab":return!Xt.altKey;case"ZoomToggle":case"SelectTask":case"BrightnessDown":case"BrightnessUp":case"AudioVolumeMute":case"AudioVolumeDown":case"AudioVolumeUp":return!1}return!0})(this,h)&&h.preventDefault();var Vt,Dt=!(!this.O||!this.ja)&&h.code=="CapsLock";Dt&&(xt=xt||Dt),Fv(this,h),!(Vt=h.code=="CapsLock"&&(h.key=="Alphanumeric"||h.key=="Katakana"||h.key=="Hiragana"))&&(Vt=h.code=="KanaMode")&&(Vt=(Vt=h.key)=="Hiragana"||Vt=="Katakana"||Vt=="Romaji"||Vt=="KanaMode"),Vt=!!Vt;var Ft=h.code=="Lang1"||h.key=="HangulMode";if(xt=xt||Vt||Ft,!this.$.includes(h.keyCode)||Vt||Dt){if((Dt=Dt?160:Bp(this,h))===0)this.ra=!0,this.M.emit("TextComposition",{compositionText:h.key,imeRecommendation:!0});else if(this.ra&&(this.ra=!1,this.M.emit("TextComposition",{compositionText:""})),!this.Ya.has(Dt)){this.Ya.add(Dt),Vt=!1;var Qt=l0(this.D);if(Ft=void 0,Dt==187){var rr;if((rr=(Vt=this.D).R)===null||rr===void 0)var nr=0;else rr.g==1?(dt.i("{4c846ba}","{1f67b97}"),rr.g=2,nr=!0):nr=!1;nr?(ts(Vt,{latencyTrigger:!0}),Vt=!0):Vt=!1,Vt=!Vt}else if(h.ctrlKey&&h.altKey)if(!hn&&!Eo||Dt!=119&&Dt!=219)if(hn)switch(Dt){case 48:var lr="UNSUPPORTED";if((nr=this.h).T)switch(Cu(nr,(nr.I+1)%4),nr.I){case 1:lr="4ms";break;case 2:lr="8ms";break;case 3:lr="16ms";break;default:lr="OFF"}As(nr.D,"Non-vsync mouse events: "+lr),dt.i("{70cc40b}","{bac28ff}",lr);break;case 49:this.D.Cb();break;case 56:this.D.sendCustomMessage({messageType:"GpuViewStartRequest",messageRecipient:"GPUViewTraceControl",data:"GpuView"}),dt.i("{93c7910}","{0915cd3}");break;case 68:var Yt;(Yt=(nr=this.D).R)===null||Yt===void 0?lr=0:Yt.g==0?(Yt.g=1,dt.i("{4c846ba}","{008dc86}"),vy(Yt),my(Yt),lr=!0):lr=!1,lr&&ts(nr,{pcmDumpTrigger:!0});break;case 71:this.Mc();break;case 76:Qt==null||bm(Qt,!Qt.isVisible()),es(this.h);break;case 83:$m(this.S);break;case 115:(nr=this.D).pa?(D0(),nr.pa=!1,ly(nr),As(nr,"Profiler: OFF, Stats: OFF")):(ry(nr),cy(nr),As(nr,"Profiler: ON, Stats: ON"));break;case 116:Fl(nr=this.D)?(ly(nr),As(nr,"Stats: OFF")):(cy(nr),As(nr,"Stats: ON"));break;case 117:this.D.toggleOnScreenStats(h.shiftKey);break;case 118:case 192:(nr=this.D).perfIndicator=!nr.perfIndicator,ts(nr,{perfIndicator:{on:nr.perfIndicator}});break;case 120:(nr=this.h).o=!nr.o,As(nr.D,"UnadjustedMovement: "+(nr.o?"ON":"OFF")),dt.i("{70cc40b}","{796c5cb}",nr.o?"ON":"OFF");break;case 189:this.P=!this.P,As(this.D,"Position dependent keys: "+(this.P?"ON":"OFF")),dt.i("{8bacfa5}","{61d2ab5}",this.P?"ON":"OFF");break;case 77:this.D.ja();break;default:Vt=!0}else Vt=!0;else this.D.toggleStutterIndicator();else{e:{if((h.ctrlKey||h.shiftKey||h.metaKey||h.altKey)&&((Ft=this.W.get(Dt))||(Ft=this.Z.get(h.key)),Ft)){(rr=Ft.fc)==128&&(rr=this.O?4:1),Yt=h.ctrlKey;const ir=h.altKey,Xt=h.metaKey,br=h.shiftKey;if((1&rr?Yt:!Yt)&&(2&rr?ir:!ir)&&(4&rr?Xt:!Xt)&&(8&rr?br:!br))break e}Ft=void 0}if(Ft){for(nr of(Qt=iu(this,h),Ft.rd))Qt!=(rr=Qt&~Up(nr))&&(Qt=rr,zo(this.g,4,nr,Qt,Ot)),this.Ya.delete(nr);for(lr of Ft.Xb)Qt|=Up(lr),zo(this.g,3,lr,Qt,Ot);for(var dr of(zo(this.g,3,Ft.Wb,Qt,Ot),zo(this.g,4,Ft.Wb,Qt,Ot),Ft.Xb))Qt&=~Up(dr),zo(this.g,4,dr,Qt,Ot);this.Ya.delete(Dt)}else if(Qt!=null&&Qt.isVisible())if(Dt==13)Qt.toggle(),es(this.h);else if(Dt==82)Qt.reset(),es(this.h);else if(Dt==65)$u(Qt,!Qt.ac.checked);else if(Dt==83)if(Qt.ec.length){for(nr=`LDAT_${new Date().toISOString()}.csv`,lr=["Sample #,Total,Render,Decode,Begin,Server + Rtd + Receive,Input Callback"],dr=0;dr<Qt.ec.length;dr++)rr=Em(Qt.ec[dr]),lr.push([dr,rr.total,rr.Pf,rr.decode,rr.Xe,rr.Tf,rr.pf].join());vp([lr.join(`
`)],nr,"text/plain")&&dt.i("{50c79eb}","{690879e}",nr)}else dt.w("{50c79eb}","{2884507}");else Dt==67?(dt.i("{50c79eb}","{d2811a7}"),Qt.Sb.value="50",Qt.Tb.value="50",_m(Qt,.5,.5)):Dt==77?Qt.zb.checked=!Qt.zb.checked:Vt=!0;else Vt=!0}Vt&&(pr(Jo()),zo(this.g,3,Dt,iu(this,h),Ot)),h.key!="Hankaku"&&h.key!="Zenkaku"||Dt!=192||(xt=!0),this.O&&h.metaKey&&!Ft&&(xt=!0),this.o&&this.kb&&(h.code=="Backspace"&&(xt=!0),h.code==""&&h.key=="Enter"&&(Vt=new CompositionEvent("compositionend",{data:(ut=this.textInputElement)===null||ut===void 0?void 0:ut.value}),(St=this.textInputElement)===null||St===void 0||St.dispatchEvent(Vt))),xt&&(zo(this.g,4,Dt,iu(this,h),Ot),this.Ya.delete(Dt))}}}}Oa(h){let ut=!1;const St=Zo(h.timeStamp);if(this.o&&h.code==""&&h.key=="Unidentified"&&!this.qa)zo(this.g,3,8,0,St),zo(this.g,4,8,0,St);else{var xt=!(!this.O||!this.ja)&&h.code=="CapsLock";xt&&(ut=ut||xt),Fv(this,h),this.$.includes(h.keyCode)&&!xt||(xt=xt?160:Bp(this,h),ut&&(zo(this.g,3,xt,iu(this,h),St),this.Ya.add(xt)),this.Ya.has(xt)&&(this.Ya.delete(xt),pr(Jo()),zo(this.g,4,xt,iu(this,h),St)))}}wa(h){dt.d("{8bacfa5}","{77df54c}",h?"fullscreen":"not fullscreen"),this.da({}),h?(window.isSecureContext&&(h=window.navigator.keyboard)&&h.lock&&h.lock("Escape F11 BrowserBack BrowserForward BrowserRefresh BrowserHome BrowserFavorites BrowserSearch BrowserStop Sleep Power WakeUp KeyT KeyZ Slash Digit1 Digit2 Digit3 Digit4 Digit5 Digit6 Digit7 Digit8 Digit9 KeyM KeyD KeyN KeyS KeyK KeyL Space PrintScreen LaunchApp1 LaunchApp2 LaunchMail Comma Semicolon ArrowLeft ArrowRight BracketLeft BracketRight KeyW KeyQ KeyR KeyY KeyO KeyP KeyF KeyG".split(" ")),this.j.onclick=null,this.j.removeAttribute("controls")):(xu(this),Pp(this.h),window.isSecureContext&&(h=window.navigator.keyboard)&&h.unlock&&h.unlock())}toggleUserInput(h,ut){if(dt.d("{8bacfa5}","{2424824}",h,ut),ut=ut??15,h){var St,xt,Ot,Vt,Dt,Ft,Qt=!this.yb(),rr=(this.m^ut)&ut;if(rr){if(this.m|=rr,4&rr&&xp(this.l),1&rr){var nr=this.h;if(!nr.C){if(nr.C=!0,!s(nr.u)){if(nr.cursorType==2&&nr.L){var lr=nr.N;lr.Bd="pointerdown",lr.Yd="pointerup",nr.videoAddEventListener("pointerdown",nr.xa),nr.videoAddEventListener("pointerup",nr.ya)}else(lr=nr.N).Bd="mousedown",lr.Yd="mouseup",nr.videoAddEventListener("mousedown",nr.fa),nr.videoAddEventListener("mouseup",nr.pa);nr.u.os==="Xbox"||nr.videoAddEventListener("contextmenu",_v)}nr.documentAddEventListener("wheel",nr.qa,nr.ra),Nv(nr),nr.cursorType===0&&(nr.j.style.display="block"),es(nr),Ds(nr)}}2&rr&&(this.documentAddEventListener("keydown",this.Na),this.documentAddEventListener("keyup",this.Pa),(St=this.textInputElement)===null||St===void 0||St.addEventListener("input",this.ab),(xt=this.textInputElement)===null||xt===void 0||xt.addEventListener("compositionstart",this.L),(Ot=this.textInputElement)===null||Ot===void 0||Ot.addEventListener("compositionupdate",this.L),(Vt=this.textInputElement)===null||Vt===void 0||Vt.addEventListener("compositionend",this.L),this.H=0,this.Da&&((Dt=this.textInputElement)===null||Dt===void 0||Dt.addEventListener("focus",this.Sa),(Ft=this.textInputElement)===null||Ft===void 0||Ft.addEventListener("blur",this.Qa))),8&rr&&(this.s&&!this.kb?this.s.start():this.C&&this.C.start()),Qt&&this.preventNavigation&&!this.U&&(this.U=!0,history.pushState(null,document.title,location.href),this.windowAddEventListener("popstate",this.Ua))}}else{var Yt,dr;(xt=this.m&ut)&&(this.m^=xt,St=!this.yb(),4&xt&&((Ot=this.l).H=!1,Ws(Ot),tu(Ot),xl&&(Ot.o&&Cp(Ot,Ot.o),Ot.windowRemoveEventListener("gamepadconnected",Ot.oa),Ot.windowRemoveEventListener("gamepaddisconnected",Ot.pa),eu(Ot),Ot.F&&(Ot.m.stop(),Ot.m.reset()))),1&xt&&(Ot=this.h).C&&(Pp(Ot),Ot.C=!1,s(Ot.u)||(Ot.cursorType==2&&Ot.L?(Ot.videoRemoveEventListener("pointerdown",Ot.xa),Ot.videoRemoveEventListener("pointerup",Ot.ya)):(Ot.videoRemoveEventListener("mousedown",Ot.fa),Ot.videoRemoveEventListener("mouseup",Ot.pa)),Ot.u.os==="Xbox"||Ot.videoRemoveEventListener("contextmenu",_v)),Ot.documentRemoveEventListener("wheel",Ot.qa,Ot.ra),Lv(Ot),Ot.cursorType===0&&(Ot.j.style.display="none"),es(Ot),Ds(Ot),Mu(Ot)),2&xt&&(xu(this),this.documentRemoveEventListener("keydown",this.Na),this.documentRemoveEventListener("keyup",this.Pa),(Qt=this.textInputElement)===null||Qt===void 0||Qt.removeEventListener("input",this.ab),(nr=this.textInputElement)===null||nr===void 0||nr.removeEventListener("compositionstart",this.L),(rr=this.textInputElement)===null||rr===void 0||rr.removeEventListener("compositionupdate",this.L),(lr=this.textInputElement)===null||lr===void 0||lr.removeEventListener("compositionend",this.L),this.Da&&((Yt=this.textInputElement)===null||Yt===void 0||Yt.removeEventListener("focus",this.Sa),(dr=this.textInputElement)===null||dr===void 0||dr.removeEventListener("blur",this.Qa))),8&xt&&(this.C&&this.C.stop(),this.s&&this.s.stop(),this.F!==0&&Fp(this),(xt=this.I).mb=void 0,Hv(xt)),St&&this.preventNavigation&&this.U&&(this.windowRemoveEventListener("popstate",this.Ua),history.back(),this.U=!1))}}yb(){return this.m!==0}bb(h){h?(Lp(this),dt.d("{8bacfa5}","{cb19d31}")):(dt.d("{8bacfa5}","{8744dbe}"),xu(this),Pp(this.h))}Vd(){this.oa!==void 0&&(this.toggleUserInput(!1,15&~this.oa),this.oa=void 0),this.g.Vd()}cb(){this.aa&&$p(this)}getVirtualGamepadHandler(){return this.l.getVirtualGamepadHandler()}sendTextInput(h){this.g.sendTextInput(h)}Bb(h){switch(h.type){case"compositionstart":this.H=1;break;case"compositionupdate":!s(this.u)&&qp(h.data)||this.M.emit("TextComposition",{compositionText:h.data,imeRecommendation:!0});break;case"compositionend":const ut=this.o?h.data.trim():h.data;ut.length&&(h=s(this.u)||!qp(h.data),this.o&&!h?jv(this,ut):qv(this,ut),h&&this.M.emit("TextComposition",{compositionText:""})),this.H=0}}Cb(){this.qa=!0;let h=this.textInputElement.value;this.H==1&&(this.o&&1<h.length&&(h=h.charAt(h.length-1)),this.H=2),this.o&&qp(h)?(jv(this,h),this.H=0):this.H!=2&&qv(this,h)}setVirtualKeyboardState(h){dt.i("{8bacfa5}","{60b2d45}",h),this.kb!==h&&(this.kb=h,this.C&&this.s&&(this.kb?(this.s.stop(),this.C.start()):(this.C.stop(),this.J.ma!==1&&Xs(this,0,0,1),this.s.start())))}setKeyboardLayout(h){this.ja=h=="zh-TW"}scroll(h,ut,St){0<St.length&&tv(this.g,Math.sign(St[0].deltaY),ut)}sendKeyEvent(h){Eu(this.g)&&(Bp(this,h)?h.type==="keydown"?this.Ka(h):h.type==="keyup"&&this.Oa(h):h.type==="keydown"&&h.key.length===1&&(h=new TextEncoder().encode(h.key),this.sendTextInput(h.buffer)))}Jb(h,ut){this.h.Jb(h,ut)}Ab(h,ut){this.h.Ab(h,ut)}lc(h){this.h.lc(h)}Mc(){hn&&(this.T=!this.T,this.N.Mc(this.j),this.T?this.l.l.push(this.N):Ns(this.l,this.N))}};function ku(h){h.h=!0,Hv(h),zv(h),h.h=!1}function Hv(h){h.g!==0&&(window.clearTimeout(h.g),h.g=0)}function zv(h){const ut=h.mb;ut&&(h.mb=void 0,ut())}class e1{constructor(){this.g=0,this.h=!1}delay(ut){this.h?ut():(ku(this),this.mb=ut,this.g=window.setTimeout(()=>{this.g=0,zv(this)},t1))}}var t1=30;function Iu(){let h=[];return h.push(162),h.push(163),h.push(164),h.push(165),h.push(91),h.push(92),h.push(160),h.push(161),h}function Up(h){switch(h){case 162:case 163:return 2;case 164:case 165:return 4;case 91:case 92:return 8;case 160:case 161:return 1}return 0}function Kv(h){return h.qualityScore=3*h.qualityScore/4+Math.min(h.latencyScore,h.networkLossScore,h.bandwidthScore)/4,{latencyScore:h.latencyScore,networkLossScore:h.networkLossScore,bandwidthScore:h.bandwidthScore,qualityScore:h.qualityScore}}var Gv=class{constructor(h,ut){this.maxBitrate=h/1e3,this.g=ut/1e3,this.networkLossScore=this.bandwidthScore=this.latencyScore=this.qualityScore=100}};function Hp(){return Nn===!1?Promise.resolve(0):window.navigator.permissions?window.navigator.permissions.query({name:"microphone"}).then(h=>{let ut=2;return(h=h.state)=="granted"?ut=5:h=="prompt"&&(ut=1),ut}).catch(()=>0):Promise.resolve(0)}function Wo(h,ut,St=!0){h.h=ut,h.h===3&&(h.N=!0),h.L&&St&&h.L.emit("MicCapture",{state:h.h})}function zp(h){if(h.initialized)if(ou){h.l=!1,h.paused=!0;var ut=h.h;if(navigator.mediaDevices.ondevicechange=()=>{},h.C){dt.d("{223689a}","{6faf5bb}");let xt=Yv();var St=h.C.getSenders()[0];St?St.replaceTrack(xt.getTracks()[0]).then(()=>{dt.d("{223689a}","{797fa55}"),Wo(h,5,!1),ut===3&&(h.F=!0)}).catch(Ot=>{dt.e("{223689a}","{79f26cc}",Ot),Wo(h,7,!1)}).finally(()=>{let Ot=h.g;h.g=null,Ot&&Ot.getTracks().forEach(Vt=>{Vt.stop()}),Wo(h,h.h),s(h.u)&&!jt(h.u,!1,15,4)&&h.j()}):(dt.e("{223689a}","{f7f0250}"),h.g=null)}else dt.e("{223689a}","{9e75fa2}"),Wo(h,0)}else Wo(h,6)}function Pu(h,ut){var St;h.o=!0,h.s.set(ut,((St=h.s.get(ut))!==null&&St!==void 0?St:0)+1),dt.d("{223689a}","{30f8637}",ut)}async function Wv(h,ut){return h.v=!0,navigator.mediaDevices.getUserMedia({audio:ut}).then(St=>{if(dt.d("{223689a}","{b204737}"),Wo(h,5,!1),h.v=!1,h.g=St,s(h.u)&&(St.getTracks()[0].onended=()=>{h.O=performance.now(),dt.i("{223689a}","{6b60d82}"),zp(h)}),h.g.oninactive=()=>{dt.d("{223689a}","{eee54f1}"),h.M.clear(),h.g=null},h.paused)dt.d("{223689a}","{21e76e1}"),h.g=null,Wo(h,7);else{var xt=h.C.getSenders()[0];xt?xt.replaceTrack(St.getTracks()[0]).then(()=>{var Ot;dt.i("{223689a}","{6c92139}");const Vt=(Ot=h.Ea)!==null&&Ot!==void 0?Ot:h.K;if(s(h.u)&&!jt(h.u,!1,15,4)&&Vt&&!Vt.muted){let Dt;Vt.srcObject&&(Dt=Vt.play(),dt.i("{223689a}","{23a6493}",Vt.tagName)),Dt?Dt.then(()=>{dt.d("{223689a}","{5593cbe}"),h.j()}).catch(Ft=>{h.j();try{qo(h.G,"WAR: Play Error",Ft==null?void 0:Ft.name,Ft==null?void 0:Ft.message),dt.e("{223689a}","{69aae72}",Ft==null?void 0:Ft.name,Ft==null?void 0:Ft.message)}catch{}}):dt.e("{223689a}","{b6a6508}")}Wo(h,3),h.F=!1,jt(h.u,!1,15,4)&&(h.o=!1,h.I=!1)}).catch(Ot=>{dt.e("{223689a}","{5c42246}",Ot),h.g=null,Wo(h,7)}):(dt.e("{223689a}","{f7f0250}"),h.g=null)}}).catch(St=>{var xt,Ot;s(h.u)&&!jt(h.u,!1,15,4)&&h.j(),h.v=!1,St instanceof DOMException&&St.name==="NotAllowedError"?(dt.e("{223689a}","{3f9bd66}"),Wo(h,2),h.I&&!h.o&&Pu(h,"permissionDenied")):St instanceof DOMException&&St.name==="NotFoundError"?(dt.e("{223689a}","{7f04869}"),Wo(h,4)):(St instanceof DOMException&&St.name==="NotReadableError"?(h.M.add((xt=ut.deviceId)!==null&&xt!==void 0?xt:"default"),dt.e("{223689a}","{af7e08c}",(Ot=ut.deviceId)!==null&&Ot!==void 0?Ot:"default",St.name,St.message),navigator.mediaDevices.enumerateDevices().then(Vt=>{for(const Dt of Vt)if(Dt.kind==="audioinput"&&Dt.deviceId!=="default"&&!h.M.has(Dt.deviceId)){dt.d("{223689a}","{655d8b0}",Dt.deviceId,Dt.label),ut.deviceId=Dt.deviceId,Wv(h,ut);break}}).catch(Vt=>{dt.e("{223689a}","{930e826}",Vt.name,Vt.message)})):dt.e("{223689a}","{c361fc5}",St.name,St.message),Wo(h,7))})}async function Ou(h){if(h.initialized)if(ou){if(h.l=!0,h.g==null&&!h.v){h.paused=!1,Wo(h,1,!1);var ut={sampleRate:48e3};pt(h.u)&&(ut.googAutoGainControl2=!1),navigator.mediaDevices.ondevicechange=()=>{dt.i("{223689a}","{50d0169}",!!h.g,h.v),h.g!=null||h.v||(dt.d("{223689a}","{c849290}"),Ou(h))},await Wv(h,ut),h.H||Qv(h)}}else dt.e("{223689a}","{999b07b}"),Wo(h,6)}function Qv(h){return navigator.mediaDevices.enumerateDevices().then(ut=>{let St=0;dt.d("{223689a}","{fa1ec18}",JSON.stringify(ut));for(const xt of ut)xt.kind=="audioinput"&&St++;switch(St){case 0:h.H="No Audio Input",h.m.Qd++;break;case 1:h.H="Built-in Microphone",h.m.wd++;break;default:h.H="Headset Microphone",h.m.Gd++}dt.d("{223689a}","{0d14ab6}",h.H)}).catch(()=>{dt.e("{223689a}","{21131d5}")})}function Yv(){let h=K0(48e3);if(h){let ut=h.createMediaStreamDestination().stream.getAudioTracks()[0];return h.close(),ut.enabled=!0,new MediaStream([ut])}throw Error("Mic stream is not supported")}function Vu(h){if(Nn!==!1){if(h.g!=null){let ut=h.g;h.M.clear(),h.g=null,navigator.mediaDevices&&(navigator.mediaDevices.ondevicechange=()=>{}),ut.getTracks().forEach(St=>{St.stop()})}h.l=!1,Wo(h,5),To(h.G,"AudioInputType",h.N?"started":"not started",0,h.m.Qd,h.m.wd,h.m.Gd),jt(h.u,!1,15,4)&&To(h.G,"LowAudioVolume","",0,h.s.get("permissionDenied"),h.s.get("visibilityChange"),h.s.get("deviceChange")),h.C=null,h.L=null,h.K=void 0,h.Ea=void 0,h.initialized=!1,h.m={Qd:0,wd:0,Gd:0};for(const[ut]of h.s)h.s.set(ut,0);h.o=!1,h.F=!1,h.I=!1,h.N=!1}}function Kp(h){return h.H==="Built-in Microphone"}function Jv(h,ut){Qv(h).then(()=>{ut!==0&&jt(h.u,!1,15,4)&&!h.o&&Kp(h)&&(h.l||h.F)&&Pu(h,"deviceChange")})}var Xv=class{constructor(h,ut){this.L=null,this.h=0,this.l=!1,this.M=new Set,this.initialized=this.P=!1,this.O=0,this.F=this.I=this.o=!1,this.m={Qd:0,wd:0,Gd:0},this.s=new Map([["permissionDenied",0],["visibilityChange",0],["deviceChange",0]]),this.N=!1,this.u=h,this.G=ut,this.g=this.C=null,this.paused=this.v=!1,jt(h,!1,15)&&(this.P=!0)}initialize(h,ut,St,xt){if(Nn!==!1){if(this.C=h,this.L=ut,this.K=St,this.Ea=xt,ou){if((h=Yv())==null)return void dt.w("{223689a}","{360f38b}");this.C.addTrack(h.getAudioTracks()[0],h),this.l&&Ou(this)}else dt.w("{223689a}","{5813c2b}");this.initialized=!0}}j(){var h,ut,St;if(ys&&this.P){var xt=(ut=(h=this.Ea)===null||h===void 0?void 0:h.srcObject)!==null&&ut!==void 0?ut:(St=this.K)===null||St===void 0?void 0:St.srcObject;if(xt){dt.i("{223689a}","{ad4b8c2}");var Ot=xt.getAudioTracks()[0];Ot.enabled=!1,setTimeout(()=>{Ot.enabled=!0},0)}}}getMicState(){return this.h}},ou=navigator.mediaDevices!=null&&(window.AudioContext||window.webkitAudioContext||!1),Nu={clientName:"Ragnarok",clientId:"62677554106929725",eventSchemaVer:"3.2"},Zv=class extends ro{constructor(h){super(h),this.name="Streamer_Start",this.gdprLevel="functional"}},em=class extends ro{constructor(h){super(h),this.name="Streamer_Exit",this.gdprLevel="functional"}},r1=class extends ro{constructor(h){super(h),this.name="Streamer_InputDevice",this.gdprLevel="functional"}};function Lu(h,ut){const St=h.j.get(ut);if(St){h.h=St;for(const xt of h.g)xt(h.getCurrentNetworkType())}else dt.d("{aac1655}","{1e3c13d}",ut)}var bs=new class{constructor(){var h;this.j=new Map([["Ethernet","ETHERNET"],["5GHz_WiFi","WIFI_5_0"],["2.4GHz_WiFi","WIFI_2_4"],["Others","OTHER"],["disconnected","UNKNOWN"],["wifi","WIFI"],["ethernet","ETHERNET"],["none","UNKNOWN"],["bluetooth","BLUETOOTH"],["wimax","WIMAX"],["other","OTHER"],["mobile","MOBILE"],["unknown","UNKNOWN"],["NONE","UNKNOWN"],["UNKNOWN","UNKNOWN"],["ETHERNET","ETHERNET"],["WIFI","WIFI"],["NET_PROXY","OTHER"],["2G","MOBILE_2G"],["2.5G","MOBILE_2G"],["3G","MOBILE_3G"],["4G","MOBILE_4G"]]),this.h="UNKNOWN",this.g=[],window.addEventListener("GFNNetworkInfo",St=>{dt.d("{aac1655}","{2925c9d}",St.detail.state),Lu(this,St.detail.state)});const ut=navigator.connection;if(ut!=null&&ut.type&&(Lu(this,ut.type),ut.addEventListener("change",()=>{var St;const xt=(St=navigator.connection)===null||St===void 0?void 0:St.type;xt&&(dt.d("{aac1655}","{4a9e05b}",xt),Lu(this,xt))})),(h=window.tizen)!==null&&h!==void 0&&h.systeminfo){h=St=>{(St=St.networkType)&&(dt.d("{aac1655}","{e9b5f27}",St),Lu(this,St))};try{window.tizen.systeminfo.getPropertyValue("NETWORK",h),window.tizen.systeminfo.addPropertyValueChangeListener("NETWORK",h)}catch(St){dt.w("{aac1655}","{7d035ae}",St)}}}registerCallback(h){this.g.push(h)}unregisterCallback(h){const ut=this.g.findIndex(St=>St==h);ut!==-1&&this.g.splice(ut,1)}getCurrentNetworkType(){return this.h}};function qo(h,ut,St,xt,Ot,Vt){ut=new vo({key1:ut??"",key2:St??"",key3:xt??"",key4:Ot??"",key5:Vt??"",moduleName:"RAGNAROK",networkType:sr(bs.getCurrentNetworkType()),overrideConfigType:ba.type,overrideConfigVersion:ba.version,cmsId:String(h.cmsId),sessionId:h.sessionId,subSessionId:h.subSessionId}),h.h(ut)}function tm(h,ut,St,xt,Ot,Vt,Dt,Ft,Qt){50<=h.H||(h.H++,ut=new r1({deviceName:ut,deviceType:"GAMEPAD",vendorId:St,productId:xt,deviceIndex:Ot,reportIndex:Dt?0:Ot,hapticsSupported:pp(Vt),hapticsFeedbackCount:0,state:Ft,eventMapReceived:Qt,eventMapProcessed:Qt,sessionId:h.sessionId,subSessionId:h.subSessionId,cmsId:String(h.cmsId)}),h.h(ut))}function To(h,ut,St,xt,Ot,Vt,Dt){ut=new mo({metricName:ut,moduleName:"RAGNAROK",valueInt1:Ot,valueInt2:Vt,valueInt3:Dt,valueString:St,valueDouble:xt,networkType:sr(bs.getCurrentNetworkType()),cmsId:String(h.cmsId),sessionId:h.sessionId,subSessionId:h.subSessionId}),h.h(ut)}class rm extends dn{constructor(){super(Nu),this.cmsId=this.subSessionId=this.sessionId="",this.isResume=!1,this.zoneAddress="",this.H=0,this.v=new Map,this.C=0}za(ut,St,xt,Ot,Vt,Dt,Ft){var Qt;if(50<=this.C)var rr=!1;else{var nr=(rr=this.v.get(St))!==null&&rr!==void 0?rr:0;10<=nr?rr=!1:(this.C++,this.v.set(St,nr+1),rr=!0)}rr&&(ut instanceof DOMException&&(ut={name:ut.name,message:ut.message}),ut=new oo({filename:xt,lineno:Ot,stacktrace:(Qt=ut==null?void 0:ut.stack)!==null&&Qt!==void 0?Qt:"",colno:Vt,handled:pp(Dt),category:Ft??"",message:St,moduleName:"RAGNAROK",sessionId:this.sessionId,subSessionId:this.subSessionId}),this.h(ut))}}var jo=new rm;function Gp(h,ut){h.I.hasListener("TelemetryEvent")?h.I.emit("TelemetryEvent",ut):y0(h.j,ut)}function im(h,ut){let St=!1;var xt;h.clientShutDownCallback&&(St=h.clientShutDownCallback(ut),dt.d("{9838627}","{caf81d9}",St)),St||(dt.d("{9838627}","{e939db1}"),h=h.j,dt.d("{f7c1592}","{01dcfe5}",(xt=ut.parameters)===null||xt===void 0?void 0:xt.sessionId),Cy(h,ut),Ty(w0(h,h.h.eventPayload)))}var i1=class extends rm{constructor(h,ut){super(),this.I=h,this.j=ut,this.j.H=this.za.bind(this)}h(h){Gp(this,{name:h.name,gdprLevel:h.gdprLevel,parameters:h.parameters,ts:h.ts,clientConfig:Nu})}};function nm(h,ut){switch(h){case 0:var St,xt=window.RTCPeerConnection;if(xt)if(s(ut))ut=jt(ut,!1,14,3);else{switch(h=!1,Gt(ut)&&(h=!0),window.chrome&&(ut.browser=="Chrome"?Kt(ut,77)&&(h=!0):h=!0),ut.browser){case"Edge_Legacy":h=!1;break;case"Safari":const Ot=xt==null?void 0:xt.prototype;if(xt=Ot&&((St=Ot.hasOwnProperty)===null||St===void 0?0:St.call(Ot,"canTrickleIceCandidates")))e:if(ut.browser!="Safari")xt=!1;else{try{xt=Ht(ut.browserVer,!1,16,4);break e}catch{dt.w("{d988e7f}","{07fd1dd}")}xt=!0}xt&&(h=!0)}ut=h}else ut=!1;return ut;case 1:return ou;default:return!1}}function om(h){return!(it(h)||_(h)||s(h))}function Du(h,ut,St){var xt,Ot,Vt,Dt;const Ft=4953600<=h*ut;var Qt=St===30?1.25*St:Math.min(St,60);let rr=h*ut*Qt;return hp(h,ut)||Ft?(h=(Ot=(xt=Xo)!==null&&xt!==void 0?xt:Qn.bitsPerPixel1440p)!==null&&Ot!==void 0?Ot:.325,Qt=(xt=2073600*Qt)+(3686400*Qt-xt)/3,rr=Ft?Qt+(rr-Qt)/12:xt+(rr-xt)/3):h=(Dt=(Vt=ga)!==null&&Vt!==void 0?Vt:Qn.bitsPerPixel)!==null&&Dt!==void 0?Dt:.3,rr=rr*h/1200,120<=St&&!Ft&&(rr=Math.min(5e4,Math.round(1.15*rr))),[Math.round(rr),5e4]}function am(h,ut){return ut*=1e3,ut=3600*(h===120?.916*ut+293098:.678*ut+910569)/1e9/8,h===30&&(ut*=.625),Math.round(.95*ut)}async function sm(h){let ut=0;return h.os==="iOS"&&(ut|=1),h.os==="iPadOS"&&(ut|=2),_(h)&&function(){var St,xt;if(navigator.userAgent.includes("SamsungBrowser"))return!1;const Ot=(St=window.webapis)===null||St===void 0?void 0:St.productinfo;return!(Ot==null||!Ot.isUdPanelSupported())&&(St=(xt=Ot.getSmartTVServerVersion)===null||xt===void 0?void 0:xt.call(Ot),(xt=St&&(xt=St.match(/T-INFOLINK(\d+)-(\d+)/))?{year:parseInt(xt[1],10),version:parseInt(xt[2],10)}:void 0)?(St=xt.year,xt=xt.version,dt.i("{d988e7f}","{fc40a4b}",St,xt),St===2021||2023<=St||St===2022&&1008<=xt):(dt.e("{d988e7f}","{e227976}",St),!1))}()&&(ut|=4),it(h)&&navigator.userAgent.includes("PWA")&&window.lge_webrtc_hevc_support&&(ut|=8),h.deviceModel==="VISIONPRO"&&(ut|=16),async function(St){var xt,Ot,Vt,Dt,Ft,Qt,rr,nr=screen.width,lr=screen.height,Yt=window.devicePixelRatio,dr=!!(4&St)||!!(8&St)||!!(16&St),ir=(Ft=(Dt=an)!==null&&Dt!==void 0?Dt:Qn.forceHdrSupport)!==null&&Ft!==void 0&&Ft;return Dt=(rr=(Qt=Xr)!==null&&Qt!==void 0?Qt:Qn.forceSdr10Support)!==null&&rr!==void 0&&rr,[nr,lr]=mu([nr,lr]),lr={width:Math.round(nr*Yt),height:Math.round(lr*Yt),fps:60,scaleFactor:Math.round(100*Yt)},Yt=void 0,dr?Yt={width:3840,height:2160,fps:lr.fps}:2&St&&1366<=nr&&(Yt={width:1600,height:1200,fps:lr.fps}),St=[{width:2560,height:1600,fps:120},{width:3840,height:1080,fps:120}],dr&&St.push({width:3840,height:2160,fps:60}),dr=!1,ir&&(dr=(xt=window.matchMedia)===null||xt===void 0?void 0:xt.call(window,"(dynamic-range: high)").matches,xt=(Ot=window.matchMedia)===null||Ot===void 0?void 0:Ot.call(window,"(video-dynamic-range: high)").matches,Ot=(Vt=window.matchMedia)===null||Vt===void 0?void 0:Vt.call(window,"(color-gamut: p3)").matches,dt.i("{5083445}","{f9f1c3b}",dr,xt,Ot),dr=(dr||xt)&&Ot),Vt=B0(),lm={displayMode:lr,maxAutoMode:Yt,maxSupportedModes:St,features:{vsync:0,vvsync:!1,hdr:dr,reflex:!1,audioChannelCount:Vt,bitDepth:ir?10:8,sdrBitDepth:Dt?10:8}}}(ut)}let lm;function Bs(h){let ut=0;return h!=null&&h.supported&&(ut|=1),h!=null&&h.smooth&&(ut|=2),h!=null&&h.powerEfficient&&(ut|=4),ut}function ks(h,ut=1920,St=1080,xt=60){const Ot=navigator.mediaCapabilities;return Ot?Ot.decodingInfo({type:"webrtc",video:{contentType:"video/"+h,width:ut,height:St,framerate:xt,bitrate:1e3*Du(ut,St,xt)[0]}}).catch(Vt=>{dt.w("{5083445}","{f5c2155}",h,Vt)}):Promise.resolve(void 0)}function Wp(){var h=Bl;return h.l?Promise.resolve(h.l):h.g?h.g:h.m()}function au(h,ut){return ut&&(h.refreshRate=void 0),h.refreshRate?Promise.resolve(h.refreshRate):h.j?h.j:function(St){return St.j=new Promise((xt,Ot)=>{let Vt=!1;const Dt=window.setTimeout(()=>{Vt=!0},4e3),Ft=[];let Qt,rr=window.innerWidth,nr=window.innerHeight,lr=window.screenX,Yt=window.screenY;const dr=()=>{window.requestAnimationFrame(()=>{if(Vt)dt.w("{5083445}","{0b0c6f9}","Timed out during the refreshRate loop"),window.clearTimeout(Dt),Ot();else{if(window.innerWidth!=rr||window.innerHeight!=nr||lr!=window.screenX||Yt!=window.screenY){rr=window.innerWidth,nr=window.innerHeight,lr=window.screenX,Yt=window.screenY;var ir=!0}else ir=!1;ir?(dt.w("{5083445}","{824b461}"),Ft.length=0,dr()):(ir=performance.now(),Ft.length&&Ft[0]<=ir-2e3?(Qt=Math.floor(Ft.length/2),dt.d("{5083445}","{8c3d290}",Qt,Ft[Ft.length-1]-Ft[0]),ir=Qt,window.clearTimeout(Dt),xt(ir)):(Ft.push(ir),dr()))}})};dr()}).then(xt=>(St.refreshRate=xt,St.refreshRate),()=>{var xt;return(xt=St.refreshRate)!==null&&xt!==void 0?xt:0}),St.j}(h)}async function cm(){return 117<=await au(Bl,!1)}var Bl=new class{constructor(){wu.push(this.s.bind(this)),wu.push(this.m.bind(this)),wu.push(this.o.bind(this))}m(){return this.g=ks("av1").then(h=>this.l=h)}o(){return this.h=Promise.resolve(void 0)}async s(){return 117<=await au(this,!0)}};async function um(h,ut){var St;let xt=[];const Ot=(St=Jr)!==null&&St!==void 0?St:Qn.codecList;if(Ot)for(const Vt of Ot)xt.push(Vt);else h=async function(Vt,Dt){var Ft,Qt,rr;const nr=(Qt=(Ft=jr)!==null&&Ft!==void 0?Ft:Qn.enableAv1Support)!==null&&Qt!==void 0?Qt:(pt(Dt)||mt(Dt))&&Dt.browser=="Chrome";return Ft=(rr=Qn.enableAv1ByResolutionAndFps)!==null&&rr!==void 0?rr:7,!(!nr||4953600<=Vt.width*Vt.height&&!(4&Ft)||hp(Vt.width,Vt.height)&&!(2&Ft)||!(Vt.fps!==120||1&Ft))&&(it(Dt)&&window.lge_webrtc_av1_support!=null?window.lge_webrtc_av1_support:!((Vt=await Wp())==null||!Vt.powerEfficient))}(h,ut),ut=async function(Vt){return it(Vt)&&window.lge_webrtc_hevc_support!=null?window.lge_webrtc_hevc_support:!(!_(Vt)&&(Vt=Bl,(Vt=await(Vt.v?Promise.resolve(Vt.v):Vt.h?Vt.h:Vt.o()))==null||!Vt.powerEfficient))}(ut),await h&&xt.push("AV1"),await ut&&xt.push("H265"),xt.push("H264");return xt}function Qp(h,ut,St,xt){const Ot=/^([^[.]+)(?:\[(\d+)\])?\.([^:]+): *(.+)$/;let Vt=!0;for(const Qt of h.split(/\r?\n/)){var Dt=Ot.exec(Qt);if(Dt){var Ft=Dt[1];h=Dt[2]!==void 0?Number.parseInt(Dt[2]):void 0;const rr=Dt[4];Dt=Ft+"."+Dt[3];const nr=dm(ut,Ft=n1(Ft),h),lr=dm(St,Ft,h);nr&&lr?lr.has(Dt)?(dt.d("{eb7c2d0}","{2beb68f}",xt,Dt,rr),nr.set(Dt,rr)):(dt.w("{eb7c2d0}","{cc4fdef}",xt,Dt,rr),Vt=!1):(dt.w("{eb7c2d0}","{a649ad8}",xt,Ft,h),Vt=!1)}}return Vt}function n1(h){switch(h){case"video":case"vqos":case"qscore":case"bwe":case"clientPerfBr":case"packetPacing":return"video";case"audio":case"aqos":case"audioBitrate":return"audio";case"ri":return"application";case"mic":return"mic"}}function Bu(h,ut,St){h.set(St?"vqos.dfc.adjustResAndFps":"vqos.drc.enable",ut?"1":"0")}function dm(h,ut,St){var xt;return ut===void 0?h.ob:(xt=h.media.filter(Ot=>Ot.mediaType===ut)[St??0])===null||xt===void 0?void 0:xt.attributes}function o1(h,ut){let St=`v=0
o=${h.origin}
s=-
t=${h.time}
`;const xt=(Ot,Vt)=>{for(const[Dt,Ft]of Ot){Ot=Dt;const Qt=Ft;Qt!==Vt.get(Ot)&&(St+=`a=${Ot}:${Qt}
`)}};xt(h.ob,ut.ob);for(const Ot of h.media)St+=`m=${Ot.mediaType} 0 RTP/AVP
`,St+=`a=msid:${Ot.Fc}
`,h=ut.media.find(Vt=>Vt.Fc===Ot.Fc),xt(Ot.attributes,h.attributes);return St}function a1(h){switch(h){case 0:return 0;case 1:return 1;case 2:return dt.w("{eb7c2d0}","{30c875c}"),0;default:return dt.w("{eb7c2d0}","{7cd5754}",h),0}}function Fu(h){const ut=h.j-h.g;return ut!=0?(h.l-h.h)/ut:0}class s1{constructor(){this.j=this.g=this.l=this.h=0}update(ut,St){this.h==0&&this.g==0?(this.h=ut,this.g=St):(this.j=St,this.l=ut)}reset(){this.h=this.l,this.g=this.j}}function fm(h,ut){h.M.innerText=hm(h,ut),h.j={value:0,count:0,max:0},h.l={value:0,count:0,max:0},h.m.reset()}function hm(h,ut){var St=`Seat: ${h.h.zoneName} (${h.h.Ud}) / ${h.h.gpuType}
`,xt=`Game: CMS ${h.h.appId}`;h.avgGameFps!==void 0&&(xt+=` / fps ${h.avgGameFps.toFixed()}`),St=St+(xt+`
`)+`Stream: Current ${Pl(h.streamingResolution)}@${h.fps} / Default: ${h.h.streamInfo.width}x${h.h.streamInfo.height}@${h.h.streamInfo.fps} / Codec ${h.codec}${h.hdr?" HDR":""} ${h.bitDepth} bpc
Network: RTD ${h.rtd}ms / FL ${h.s} / PL ${h.N} / J ${h.H.toFixed(2)}ms / Bitrate ${h.o.toFixed(2)}Mbps / BWU ${h.Ob.toFixed(2)}%
QOS: frame ${h.C} / FT ${h.P.toFixed(2)} / D ${(1e3*Fu(h.m)).toFixed(2)} / Q ${Math.floor(h.v.qualityScore)} / Marker ${h.S}
Client: ${h.u.os} ${h.h.clientAppVersion} ${h.h.clientLocale} Resolution ${Pl({width:window.innerWidth*window.devicePixelRatio,height:window.innerHeight*window.devicePixelRatio})}
Input ${h.g.qf}
`,xt=`DC ${vm(h.j)}ms (${h.j.max.toFixed(2)}ms) / Blocked ${h.L}
`;const Ot=`Stats ${vm(h.l)}ms (${h.l.max.toFixed(2)}ms) / FR ${h.O} / FDR ${h.I}
`,Vt=`Latency ${h.v.latencyScore.toFixed(1)} / Network ${h.v.networkLossScore.toFixed(1)} / Bandwidth ${h.v.bandwidthScore.toFixed(1)}
`,Dt=`VP ${h.g.tf?"y":"n"} / AP ${h.g.rf?"y":"n"} / UI ${h.g.yb?"y":"n"} / VKB ${h.g.kb?"y":"n"} / MS ${h.g.yf} / RSDMM ${+h.g.cd}
`;return h=`KBL ${h.g.keyboardLayout} / ALM ${+h.g.appLaunchMode} / SWD ${h.U?"y":"n"} / ${h.cc}`,ut&&(St+=xt+Ot+Vt+Dt+h),St}var pm=class{constructor(h,ut,St){this.o=this.fps=0,this.Ob=4,this.N=this.rtd=this.H=this.I=this.O=this.C=this.R=this.F=0,this.streamingResolution={width:0,height:0},this.L=this.P=0,this.j={count:0,max:0,value:0},this.l={count:0,max:0,value:0},this.m=new s1,this.T=this.s=this.zd=0,this.codec="UNKNOWN",this.hdr=!1,this.bitDepth=8,this.U=!1,this.cc="",this.S=0,this.K=h,this.u=ut,this.h=St,this.v={qualityScore:0,bandwidthScore:0,networkLossScore:0,latencyScore:0},(h=document.getElementById("overlay-543d9968"))||((h=document.createElement("div")).id="overlay-543d9968",h.style.display="none",h.style.position="fixed",s(this.u)?(h.style.top="env(safe-area-inset-top, 0)",h.style.left="max(24px, env(safe-area-inset-left, 0))"):(h.style.top="0",h.style.left="0"),h.style.padding="0.5em",h.style.backgroundColor="rgba(0,0,0,0.5)",h.style.zIndex="300",h.style.fontSize="12px",h.style.fontFamily="monospace",h.style.color="white",h.style.whiteSpace="pre",h.style.lineHeight="100%",h.style.pointerEvents="none",this.K.insertAdjacentElement("afterend",h)),this.M=h,this.g={tf:!1,rf:!1,yb:!1,kb:!1,yf:0,cd:!1,keyboardLayout:"",appLaunchMode:0,qf:""}}};function vm(h){let ut=0;return 0<h.count&&(ut=h.value/h.count),ut.toFixed(2)}var l1={size:70,version:1,name:"DEPR"},c1={size:80,version:3,name:"RTPV"},u1={size:48,version:1,name:"RTPA"},d1={size:88,version:1,name:"TRAA"},f1={size:20,version:1,name:"PFDA"};function mm(h){0<h.g.length&&(Gs(h.g,5),h.g=[])}function gm(h,ut){const St=h.K.videoWidth;return h=h.K.videoHeight,new DOMRect(ut.x*St,ut.y*h,ut.width*St,ut.height*h)}function ym(h){const ut={isPrimary:!0,pointerId:1,button:0};h.K.dispatchEvent(new PointerEvent("pointerdown",ut)),h.K.dispatchEvent(new MouseEvent("mousedown")),window.setTimeout(()=>{h.K.dispatchEvent(new PointerEvent("pointerup",ut)),h.K.dispatchEvent(new MouseEvent("mouseup"))},100)}function $u(h,ut){h.ac.checked=ut,h.s.disabled=!ut,h.C.disabled=!ut,h.l.style.color=ut?"white":"gray"}function Yp(h,ut=!1){ut&&(h.g.style.bottom="5px",h.g.style.left="300px",h.g.style.top="",h.g.style.right="",h.g.style.width="150px",h.g.style.height="150px"),h.o()?(h.m.style.display="none",h.g.style.border="2px rgb(76, 175, 80) solid",h.g.style.backgroundColor="transparent"):(h.m.style.display="block",h.g.style.border="none",h.g.style.backgroundColor="rgb(105, 105, 105, 0.7)")}function bm(h,ut){if(ut!==h.visible){for(var St of(dt.i("{50c79eb}","{5595c14}",ut),h.visible=ut,[h.L,h.g,h.v]))St===h.v&&ut?Xp(h,h.h.value!=="Show hotkeys"):St.style.display=ut?"block":"none";var xt=G0();if(St=xt?"pointerdown":"mousedown",xt=xt?"pointermove":"mousemove",ut){h.P(),function(Vt,Dt){let Ft=0,Qt=0,rr=0,nr=0;const lr=document.onmouseup,Yt=document.onmousemove;Dt.onmousedown=dr=>{dr.preventDefault(),Ft=dr.clientX,Qt=dr.clientY,document.onmouseup=()=>{document.onmouseup=lr,document.onmousemove=Yt},document.onmousemove=ir=>{ir.preventDefault(),rr=Ft-ir.clientX,nr=Qt-ir.clientY,Ft=ir.clientX,Qt=ir.clientY,Vt.style.top=Vt.offsetTop-nr+"px",Vt.style.left=Vt.offsetLeft-rr+"px"}}}(h.g,h.m),h.O.oninput=Vt=>{Vt=parseFloat(Vt.target.value);var Dt=h.j;0>=Vt||1<=Vt?dt.e("{0c7ed7c}","{1cbd879}",Vt.toFixed(2)):Dt.m=Vt,h.S.innerHTML=(100*Vt).toFixed()+"%"},h.ac.oninput=Vt=>{$u(h,Vt.target.checked)},h.s.oninput=Vt=>{h.U.innerHTML=Vt.target.value},h.C.oninput=Vt=>{h.W.innerHTML=Vt.target.value+" ms"},h.zb.oninput=Vt=>{h.zb.checked=Vt.target.checked};const Ot=(Vt,Dt)=>{Dt.value=Math.max(Math.min(parseInt(Vt.target.value),100),0).toFixed(0),_m(h,parseInt(h.Sb.value||"50")/100,parseInt(h.Tb.value||"50")/100)};h.Sb.oninput=Vt=>Ot(Vt,h.Sb),h.Tb.oninput=Vt=>Ot(Vt,h.Tb),h.H.onclick=()=>su(h,h.H.value==="Start"),h.h.onclick=()=>Xp(h,h.h.value==="Show hotkeys"),h.g.onmouseup=h.P.bind(h),h.g.onmousedown=()=>{h.o()&&ym(h.j)},hs(h.Z,2,h.$),h.K.addEventListener(St,h.aa),h.K.addEventListener(xt,h.ca)}else su(h,!1),h.O.oninput=null,h.ac.oninput=null,h.s.oninput=null,h.C.oninput=null,h.zb.oninput=null,h.Sb.oninput=null,h.Tb.oninput=null,h.H.onclick=null,h.h.onclick=null,h.g.onmouseup=null,h.g.onmousedown=null,h.m.onmousedown=null,ps(h.Z,2,h.$),h.K.removeEventListener(St,h.aa),h.K.removeEventListener(xt,h.ca)}}function su(h,ut){ut&&!function(St){const xt=gm(St,St.l);return!(0>xt.x||0>xt.y||xt.x+xt.width>St.K.videoWidth||xt.y+xt.height>St.K.videoHeight)}(h.j)?function(St){St.R.style.display="block",window.setTimeout(()=>St.R.style.display="none",5e3)}(h):ut&&h.M?dt.e("{50c79eb}","{89742e9}"):(function(St,xt){St.active!==xt&&((St.active=xt)?(dt.i("{0c7ed7c}","{b56e30d}"),St.K.dispatchEvent(new Event("focus",{bubbles:!0})),St.K.addEventListener("pointerdown",St.j),St.K.addEventListener("mousedown",St.j)):(dt.i("{0c7ed7c}","{00425c2}"),St.K.removeEventListener("pointerdown",St.j),St.K.removeEventListener("mousedown",St.j),St.g=[],St.h=[]))}(h.j,ut),Yp(h),ut?(h.H.value="Stop",h.ac.checked&&(dt.i("{50c79eb}","{5974b2c}"),h.M=!0,h.da=parseInt(h.s.value),h.N=window.setInterval(()=>{0<h.da--?ym(h.j):(dt.i("{50c79eb}","{d37e51d}"),wm(h),su(h,!1))},parseInt(h.C.value)))):(h.H.value="Start",h.M&&(h.N?(dt.i("{50c79eb}","{d340c50}"),wm(h)):dt.w("{50c79eb}","{6d8948b}")),Sm(h),Am(h)))}function Jp(h,ut){h.value=ut.toString(),h.dispatchEvent(new Event("input"))}function Xp(h,ut){ut?(h.h.value="Hide hotkeys",h.v.style.display="block"):(h.h.value="Show hotkeys",h.v.style.display="none")}function wm(h){window.clearInterval(h.N),h.N=0,h.M=!1}function Sm(h){h.I!==0&&(window.clearTimeout(h.I),h.I=0)}function Am(h){h.F.innerHTML="",h.F.style.display="none"}function Em(h){var ut;const St=(ut=h.processingDuration)!==null&&ut!==void 0?ut:0;return{pf:h.Ec-h.Ub,Tf:h.receiveTime?h.receiveTime-h.Ec:0,Xe:h.receiveTime&&h.processingDuration?h.presentationTime-h.processingDuration-h.receiveTime:0,decode:St,Pf:h.td-h.presentationTime,total:h.td-h.Ub}}function _m(h,ut,St){const xt=h.K.getBoundingClientRect(),Ot=h.g.getBoundingClientRect(),{paddingTop:Vt,paddingRight:Dt,paddingBottom:Ft,paddingLeft:Qt}=Mm(h.K);ut=xt.left+Qt+(xt.width-Qt-Dt)*ut-Ot.width*ut,h.g.style.top=(xt.top+Vt+(xt.height-Vt-Ft)*St-Ot.height*St).toString()+"px",h.g.style.left=ut.toString()+"px",h.P()}function lu(){const h=document.createElement("div");return h.style.display="none",h.style.position="absolute",h.style.color="white",h.style.backgroundColor="rgb(105, 105, 105, 0.7)",h.style.padding="2px",h}function Zp(h){const ut=document.createElement("div");return ut.style.width="100%",ut.style.borderBottom="1px dashed darkgray",ut.style.paddingBottom="2px",ut.innerHTML=h,ut}function Cm(h){const ut=document.createElement("input");return ut.type="button",ut.value=h,ut.style.margin="5px",ut.style.backgroundColor="rgb(132, 130, 143, .7)",ut.style.color="white",ut.style.padding="8px 40px",ut.style.border="none",ut.style.borderRadius="4px",ut.style.cursor="pointer",ut}function Tm(){const h=document.createElement("input");return h.type="checkbox",h}function Ss(h){const ut=document.createElement("label");return ut.innerHTML=h,ut}function e0(h,ut,St,xt=1){const Ot=document.createElement("input");return Ot.type="range",Ot.min=ut.toString(),Ot.max=St.toString(),Ot.step=xt.toString(),Ot.value=h.toString(),Ot}function Mm(h){const ut=St=>{if(!St)return 0;const xt=St.length;return St.substring(xt-1)==="%"?parseInt(St.substring(0,xt-1)):St.substring(xt-2)==="px"?parseInt(St.substring(0,xt-2)):(dt.w("{50c79eb}","{3351f27}",St),0)};return{paddingTop:ut(h.style.paddingTop),paddingRight:ut(h.style.paddingRight),paddingBottom:ut(h.style.paddingBottom),paddingLeft:ut(h.style.paddingLeft)}}var Rm=class extends Map{constructor(){super([["TCP",0],["MDNS",0],["IPV6",0],["IPV4",0],["UNKNOWN",0]])}};function xm(h){var ut,St,xt,Ot;h.m=window.setInterval(()=>{(function(Vt){if(!Vt.I)if(Vt.I=!0,Vt.U===0)Vt.C.getStats().then(Dt=>{Vt.j=Dt}).catch(Dt=>qu(Vt,Dt,"early")).finally(()=>{Vt.I=!1});else if(Vt.U===1)if(Vt.ga){const Dt=Vt.C.getReceivers().find(Ft=>Ft.track.kind===Vt.mediaType&&Ft.track.enabled);Dt&&Dt.getStats().then(Ft=>km(Vt,Ft)).catch(Ft=>qu(Vt,Ft,"standard")).finally(()=>{Vt.I=!1})}else(function(Dt){Dt.C.getStats(null).then(Ft=>{let Qt=!1;for(let rr of Ft.values())if(rr.type==="track"&&(Qt=!0),["transport","inbound-rtp","candidate-pair"].includes(rr.type)){rr.kind==="audio"&&(Dt.wa=!0);const nr=Dt.P.get(rr.type);nr?nr.includes(rr.id)?dt.e("{5cea617}","{76f5968}",rr.id):nr.push(rr.id):Dt.P.set(rr.type,[rr.id])}Dt.aa=!Qt,dt.i("{5cea617}","{1317761}",Dt.aa?"yes":"no"),Dt.ga=!0,Dt.j=Ft,km(Dt,Ft)}).catch(Ft=>qu(Dt,Ft,"init")).finally(()=>{Dt.I=!1})})(Vt);else Vt.I=!1})(h)},(ut=Qn.getStatsInterval)!==null&&ut!==void 0?ut:96),window.chrome&&(h.F=window.setInterval(()=>{(function(Vt){if(!Vt.T){Vt.T=!0;var Dt=()=>{dt.i("{5cea617}","{cf8b53f}"),Vt.T=!1,clearInterval(Vt.F),Vt.F=0};Vt.C.getStats(Ft=>{for(var Qt of Ft.result())if(Qt.type=="ssrc")for(var rr of Qt.names()){Qt.stat("mediaType")==="video"&&(Vt.H.ts=$a(Co),Vt.H.timingFrameInfo=Qt.stat("googTimingFrameInfo"),Vt.H.targetDelayMs=+Qt.stat("googTargetDelayMs"),Vt.H.minPlayoutDelayMs=+Qt.stat("googMinPlayoutDelayMs"),Vt.H.currentDelayMs=+Qt.stat("googCurrentDelayMs"));break}if(!(15>(Qt=(Ft=Vt.H).timingFrameInfo.split(",",15)).length)){rr=new ArrayBuffer(l1.size);var nr=new DataView(rr);nr.setUint32(0,Ft.targetDelayMs||0,!0),nr.setUint32(4,Ft.minPlayoutDelayMs||0,!0),nr.setUint32(8,Ft.currentDelayMs||0,!0),nr.setFloat64(12,$a(Co),!0),nr.setFloat64(20,parseFloat(Qt[3])||0,!0),nr.setFloat64(28,parseFloat(Qt[4])||0,!0),nr.setFloat64(36,parseFloat(Qt[8])||0,!0),nr.setFloat64(44,parseFloat(Qt[9])||0,!0),nr.setFloat64(52,parseFloat(Qt[10])||0,!0),nr.setFloat64(60,parseFloat(Qt[11])||0,!0),nr.setUint8(68,parseFloat(Qt[13])||0),nr.setUint8(69,parseFloat(Qt[14])||0),Gs([rr],0)}Vt.T=!1},Dt).catch(Dt)}})(h)},(St=Qn.getDeprecatedStatsInterval)!==null&&St!==void 0?St:201)),(Ot=(xt=h.K).requestVideoFrameCallback)===null||Ot===void 0||Ot.call(xt,h.sa)}function km(h,ut){var St=performance.now();if(St>=h.$&&h.mediaType==="video"){(function(Tr,Sr){var Mr,gr,_r,Er=Tr.P.get("inbound-rtp");if(Er&&Tr.j)if(Er=Er.map(kr=>Sr.get(kr)).find(kr=>(kr==null?void 0:kr.kind)==="video"||(kr==null?void 0:kr.mediaType)==="video")){var cr=(Er=Pm(Tr,Sr,Er)).decoderImplementation;if(cr!=null&&cr.indexOf){cr!==Tr.h.cc&&cr!=="unknown"&&(Tr.h.cc=cr,Tr.g.cc=cr);const kr=Tr.u.gpuDetail.indexOf("SwiftShader")!==-1;cr.indexOf("fallback")===-1&&cr!=="FFmpeg"&&!kr||Tr.h.zc!==-1||(Tr.h.zc=(Mr=Er.framesDecoded)!==null&&Mr!==void 0?Mr:Tr.l,function(){var Wr=Co;if(Wr.h){const mn={clientEvent:{TS:$a(Wr),eventtype:"SoftwareDecodeFallback"}};Wr.g&&Wr.g.postMessage(mn)}}(),Mr="Fallback to software decode at frame "+String(Tr.h.zc),dt.i("{5cea617}","{953d211}",String(Tr.h.zc)),Tr.g.U=!0,Uu(Tr.Ba,Mr))}(Mr=Tr.j.get(Er.id))?(Tr.h.bc.Zf++,(cr=Er.codecId)&&((cr=Sr.get(cr).mimeType.toUpperCase()).includes("H265")?Tr.N="H265":cr.includes("AV1")?Tr.N="AV1":cr.includes("H264")?Tr.N="H264":(dt.d("{5cea617}","{4b31535}",cr),Tr.N="UNKNOWN"),Tr.g.codec=Tr.N),function(kr,Wr,mn){var vn=Wr.packetsLost-mn.packetsLost;let Pn=100-vn/(Wr.packetsReceived-mn.packetsReceived+vn)*100;for((isNaN(Pn)||Pn===void 0)&&(Pn=0),0<(Wr=Wr.pliCount-mn.pliCount)&&vn&&(Pn=0),vn=0;vn<Wr+1;vn++)kr.networkLossScore=7*kr.networkLossScore/8+Pn/8}(Tr.L,Er,Mr),function(kr,Wr){if(Wr.frameWidth&&Wr.frameHeight&&(kr.streamingResolution={width:Wr.frameWidth,height:Wr.frameHeight}),Wr.framesDecoded){const mn=kr.R,vn=Wr.timestamp;mn!==vn&&(kr.fps=Math.floor((Wr.framesDecoded-kr.C)/(vn-mn)*1e3)),kr.C=Wr.framesDecoded,Wr.totalDecodeTime&&(kr.m.update(Wr.totalDecodeTime,Wr.framesDecoded),kr.zd=1e3*Wr.totalDecodeTime/Wr.framesDecoded)}Wr.framesReceived&&(kr.O=Wr.framesReceived,Wr.totalInterFrameDelay&&(kr.P=1e3*Wr.totalInterFrameDelay/(Wr.framesReceived-1))),Wr.framesDropped&&(kr.I=Wr.framesDropped),Wr.packetsLost&&(kr.N=Wr.packetsLost),Wr.pliCount&&(kr.s=Wr.pliCount),kr.R=Wr.timestamp}(Tr.g,Er),Tr.l=(gr=Er.framesDecoded)!==null&&gr!==void 0?gr:0,Tr.ta=(_r=Er.packetsReceived)!==null&&_r!==void 0?_r:0,async function(kr){const Wr={width:screen.width*window.devicePixelRatio,height:screen.height*window.devicePixelRatio},mn={width:screen.width,height:screen.height},vn=kr.l,Pn=kr.ua.m;var Gn=kr.oa;if((Gn=!(Wr.width===Gn.width&&Wr.height===Gn.height))||(Gn=kr.ja,Gn=!(mn.width===Gn.width&&mn.height===Gn.height)),Gn||Pn!==kr.ca){kr.oa=Wr,kr.ja=mn,Gn=await au(Bl),kr.ca=Pn;var sn=`Stream[0]: Client display[-1] resolution : {physical : ${Pl(Wr)}@${Gn}, logical : ${Pl(mn)}@${Gn}} at frame#${vn} topology: ${Pn}`;dt.i("{5cea617}","{810d0ec}",Pl(Wr),Gn,Pl(mn),Gn,vn,Pn),Uu(kr.Ba,sn)}}(Tr)):Tr.h.bc.Hf++}else Tr.h.bc.af++})(h,ut);var xt,Ot,Vt,Dt,Ft,Qt,rr,nr,lr,Yt=h.g,dr=h.Ba,ir=dr.K.paused,Xt=(Ot=(xt=dr.Ea)===null||xt===void 0?void 0:xt.paused)!==null&&Ot!==void 0&&Ot;ir={tf:ir,rf:Xt,yb:xt=(Dt=(Vt=dr.m)===null||Vt===void 0?void 0:Vt.yb())!==null&&Dt!==void 0&&Dt,kb:Vt=(Qt=(Ft=dr.m)===null||Ft===void 0?void 0:Ft.kb)!==null&&Qt!==void 0&&Qt,yf:Ft=dr.Da.getMicState(),cd:Qt=dr.s.cd(),keyboardLayout:Dt=dr.keyboardLayout,appLaunchMode:Ot=dr.appLaunchMode,qf:(nr=dr=(rr=dr.m)===null||rr===void 0?void 0:`${(dr=rr.h).g.rb?"local":"alt"} ${Ll(dr)?"locked":"unlocked"}`)!==null&&nr!==void 0?nr:""},Yt.g=ir,function(Tr,Sr){var Mr,gr=Tr.P.get("candidate-pair");if(gr=gr==null?void 0:gr.map(Er=>Sr.get(Er)).find(Er=>Er)){6<=Tr.s.length&&Tr.s.splice(0,1),Tr.s.push(gr);var _r=(Mr=Tr.j)===null||Mr===void 0?void 0:Mr.get(gr.id);_r&&function(Er,cr,kr){var Wr,mn,vn,Pn;let Gn=(Wr=cr.bytesReceived)!==null&&Wr!==void 0?Wr:0;Wr=(mn=kr.bytesReceived)!==null&&mn!==void 0?mn:0,(cr=(vn=cr.timestamp)!==null&&vn!==void 0?vn:0)!=(kr=(Pn=kr.timestamp)!==null&&Pn!==void 0?Pn:0)&&(Er.o=(Gn-Wr)/(125*(cr-kr)))}(Tr.g,gr,_r)}}(h,ut),h.M!==0&&fm(h.g,h.M===2),nr={avgGameFps:(lr=(Yt=h.g).avgGameFps)!==null&&lr!==void 0?lr:0,fps:Yt.fps,rtd:Yt.rtd,avgDecodeTime:1e3*Fu(Yt.m),frameLoss:Yt.s-Yt.T,packetLoss:Yt.N,totalBandwidth:Yt.F,utilizedBandwidth:Yt.Ob,streamingResolution:Yt.streamingResolution,codec:Yt.codec,bitDepth:Yt.bitDepth},Yt.T=Yt.s,h.R.emit("StreamStatsUpdate",nr),h.j=ut,h.$=St+1e3}for(const[Tr,Sr]of h.P.entries())for(var br of(lr=Tr,Yt=Sr))if((Yt=ut.get(br))&&lr==="inbound-rtp"){if(nr=h.o,(Yt=Pm(h,ut,Yt)).kind==="audio")nr=Yt,ir=new ArrayBuffer(u1.size),Xt=new DataView(ir),Po(nr.packetsReceived||0,Xt,0,!0),Po(nr.bytesReceived||0,Xt,8,!0),Po(nr.packetsLost||0,Xt,16,!0),Xt.setFloat64(24,nr.lastPacketReceivedTimestamp||0,!0),Xt.setFloat64(32,nr.jitter||0,!0),Xt.setFloat64(40,$a(Co),!0),Gs([ir],2),nr=new ArrayBuffer(d1.size),(ir=new DataView(nr)).setFloat64(0,Yt.audioLevel||0,!0),Po(Yt.concealedSamples||0,ir,8,!0),Po(Yt.concealmentEvents||0,ir,16,!0),Po(Yt.insertedSamplesForDeceleration||0,ir,24,!0),ir.setFloat64(32,Yt.jitterBufferDelay||0,!0),Po(Yt.jitterBufferEmittedCount||0,ir,40,!0),Po(Yt.removedSamplesForAcceleration||0,ir,48,!0),Po(Yt.silentConcealedSamples||0,ir,56,!0),ir.setFloat64(64,Yt.totalSamplesReceived||0,!0),ir.setFloat64(72,Yt.totalSamplesDuration||0,!0),ir.setFloat64(80,$a(Co),!0),Gs([nr],4);else if(Xt=(ir=Yt).packetsLost||0,Qt=dr=ir.framesDecoded||0,Dt=rr=ir.totalDecodeTime||0,Ot=xt=ir.pliCount||0,(Ft=Xt)>=(Vt=nr).o&&(Vt.C=Ft-Vt.o,Vt.o=Ft),Ot>=Vt.l&&(Vt.pliCount=Ot-Vt.l,Vt.l=Ot),Vt.framesDecoded=Qt-Vt.s,0<Vt.framesDecoded&&Dt>Vt.m&&(Vt.v=1e3*(Dt-Vt.m)/Vt.framesDecoded,Vt.s=Qt,Vt.m=Dt),Vt=new ArrayBuffer(c1.size),(Ft=new DataView(Vt)).setUint32(0,dr,!0),Ft.setUint32(4,ir.keyFramesDecoded||0,!0),Ft.setUint32(8,ir.nackCount||0,!0),Ft.setInt32(12,Xt,!0),Ft.setInt32(16,xt,!0),Po(ir.bytesReceived||0,Ft,20,!0),Po(ir.packetsReceived||0,Ft,28,!0),Ft.setFloat64(36,rr,!0),Ft.setFloat64(44,ir.totalInterFrameDelay||0,!0),Ft.setFloat64(52,ir.totalSquaredInterFrameDelay||0,!0),Ft.setFloat64(60,ir.totalAssemblyTime||0,!0),Ft.setUint32(68,ir.framesAssembledFromMultiplePackets||0,!0),Ft.setFloat64(72,$a(Co),!0),Gs([Vt],1),nr.sendVideoTrack(Yt),Yt.perFrameEntries){for(Yt=JSON.parse(Yt.perFrameEntries),ir=[],Xt=nr.h,dr=0;dr<Yt.length;dr++)Yt[dr].frameNumber>nr.h&&(rr=new ArrayBuffer(f1.size),(xt=new DataView(rr)).setUint32(0,Yt[dr].frameNumber,!0),xt.setFloat64(4,Yt[dr].decodeTime,!0),xt.setFloat64(12,Yt[dr].assemblyTime,!0),ir.push(rr)),Xt=Math.max(Xt,Yt[dr].frameNumber);nr.h=Xt,0<ir.length&&Gs(ir,6)}}(br=performance.memory)&&(ut=br.usedJSHeapSize,Yt=br.totalJSHeapSize,br=ut-h.ra,lr=Yt-h.qa,h.ra=ut,h.qa=Yt,0<=br&&0<=lr||(ut=Co).h&&(br={garbageCollectionStats:{timestamp:$a(ut),deltaUsedHeapSize:br,deltaTotalHeapSize:lr}},ut.g&&ut.g.postMessage(br))),ut=h.Ba,(br=Co).h&&(lr={inputChannelStats:{timestamp:$a(br),bufferedAmount:ut.Ja.bufferedAmount,maxSchedulingDelay:ut.s.maxSchedulingDelay}},br.g&&br.g.postMessage(lr)),ut.s.maxSchedulingDelay=0,St>=h.na&&h.Z&&(ut=h.Z,br=new ArrayBuffer(15),(lr=new DataView(br)).setUint8(0,2),lr.setUint8(1,1),lr.setUint8(2,1),lr.setUint32(3,ut.Eg,!0),lr.setFloat64(7,ut.client,!0),Om(h,br,"rtpmapping"),h.Z=void 0,h.na=St+1e3),h.mediaType==="video"&&(z0(h.u)&&(ut=new ArrayBuffer(12),(br=new DataView(ut)).setUint8(0,1),br.setUint8(1,1),br.setUint16(2,h.o.C,!0),br.setUint16(4,Math.round(h.o.v),!0),br.setUint16(6,h.o.framesDecoded,!0),br.setUint16(8,h.o.pliCount,!0),br.setUint16(10,h.o.framesDropped,!0),Om(h,ut,"clientperf")),ut=Kv(h.L),h.g.v=ut,br=Kv(h.L),h.R.emit("StreamingQuality",br),h.xa&&(ut=h.g,h.R.emit("StreamingStats",{fps:ut.fps,zd:ut.zd,avgDecodeTime:1e3*Fu(ut.m),Rg:ut.F,Ob:ut.Ob,width:ut.streamingResolution.width,height:ut.streamingResolution.height})),(ut=Co).h&&(br={sq:{latencyScore:br.latencyScore,bandwidthScore:br.bandwidthScore,qualityScore:br.qualityScore,networkLossScore:br.networkLossScore,timestamp:$a(ut)}},ut.g&&ut.g.postMessage(br))),St>=h.ka&&(ut=h.g,dt.i("{4155ac9}","{a02a36e}",ut.C,(1e3*Fu(ut.m)).toFixed(2),ut.I,ut.H.toFixed(2),ut.s,ut.rtd,ut.o.toFixed(2),ut.Ob.toFixed(2)),h.ka=St+5e3),St=performance.now()-St,(ut=Co).h&&(ut.perf.GetStats+=St),(ut=h.g).l.value+=St,ut.l.count+=1,ut.l.max=Math.max(St,ut.l.max),h.wa&&(h.mediaType=h.mediaType==="video"?"audio":"video")}function qu(h,ut,St){h.G.za(ut,`Exception in ${St} getStats`,"{5cea617}.ts",0,0,!0,"getStats")}function Im(h){h.m&&(clearInterval(h.m),h.m=0),h.F&&(clearInterval(h.F),h.F=0),mm(h.o)}function t0(h,ut,St=!1){h.g.M.style.display=ut?"block":"none",ut?(h.M=St?2:1,fm(h.g,St),h.$=performance.now()):h.M=0}function Pm(h,ut,St){return h.aa||(h=ut.get(St.trackId))&&(St=Object.assign(h,St)),St}function Om(h,ut,St){try{h.O.readyState==="open"&&h.O.send(ut)}catch(xt){dt.e("{5cea617}","{78e74c5}",xt),qu(h,xt,St)}}function Vm(h){if(!(2>h.s.length)){var ut=h.s[0],St=h.s[h.s.length-1];h=St.requestsSent-ut.requestsSent+St.consentRequestsSent-ut.consentRequestsSent;var xt=St.responsesReceived-ut.responsesReceived;return ut=St.packetsReceived-ut.packetsReceived,{Mf:isNaN(h)?-1:h,Nf:isNaN(xt)?-1:xt,Lf:isNaN(ut)?-1:ut}}}var h1=class{constructor(h,ut,St,xt,Ot,Vt,Dt,Ft,Qt,rr){var nr,lr,Yt,dr,ir,Xt,br,Tr,Sr;this.pa=!0,this.l=this.ta=this.F=this.m=0,this.N="UNKNOWN",this.ga=!1,this.P=new Map,this.fa=this.rtd=this.jitter=this.W=0,this.mediaType="video",this.qa=this.ra=this.$=this.M=0,this.s=[],this.ja={width:0,height:0},this.oa={width:0,height:0},this.aa=this.T=this.I=!1,this.ca=this.ka=this.U=this.na=0,this.R=h,this.Ba=ut,this.K=St,this.C=xt,this.Cc=(lr=(nr=Ot.video)===null||nr===void 0?void 0:nr[0].Cc)!==null&&lr!==void 0&&lr,this.maxBitrate=(dr=(Yt=Ot.video)===null||Yt===void 0?void 0:Yt[0].Dc)!==null&&dr!==void 0?dr:0,this.da=(Xt=(ir=Ot.video)===null||ir===void 0?void 0:ir[0].gd)!==null&&Xt!==void 0?Xt:0,this.bitDepth=(Tr=(br=Ot.video)===null||br===void 0?void 0:br[0].bitDepth)!==null&&Tr!==void 0?Tr:8,this.hdr=((Sr=Ot.video)===null||Sr===void 0?void 0:Sr[0].Xc)===1,this.G=Vt,this.u=Dt,this.ea=Ft,this.ua=Qt,this.H={ts:0,timingFrameInfo:"",targetDelayMs:0,minPlayoutDelayMs:0,currentDelayMs:0},this.L=new Gv(this.maxBitrate,this.da),this.g=new pm(St,this.u,this.ea),this.g.bitDepth=this.bitDepth,this.g.hdr=this.hdr,hn&&(this.S=new class{constructor(Mr,gr){this.Z=gr,this.visible=!1,this.ec=[],this.M=!1,this.da=this.N=0,this.T={x:0,y:0},this.I=0,this.K=Mr,this.j=new class{constructor(vn){this.active=!1,this.m=.06,this.l=new DOMRect(0,0,0,0),this.g=[],this.h=[],this.K=vn,this.j=this.v.bind(this)}o(){return this.active}v(vn){if(this.g.length){if(!(this.h.length&&100>vn.timeStamp-this.h[this.h.length-1].Ub))for(this.h.push({Ub:vn.timeStamp,Ec:performance.now()});32<this.h.length;)this.h.shift()}else dt.w("{0c7ed7c}","{fe08a50}")}}(Mr),this.$=this.ga.bind(this),this.aa=this.fa.bind(this),this.ca=this.onmousemove.bind(this),gr=lu();var _r=Zp("Latency Display Analysis Tool (LDAT)");this.H=Cm("Start"),this.h=Cm("Show hotkeys"),gr.style.bottom="0px",gr.style.left="0px",gr.style.margin="5px",this.h.style.border="1px solid white",this.h.style.fontSize="10px",this.h.style.padding="5px",this.h.style.position="absolute",this.h.style.right="0px",gr.appendChild(_r),gr.appendChild(this.H),gr.appendChild(this.h),_r=gr.appendChild;var Er=document.createElement("div"),cr=this.j.m;this.O=e0(cr,.01,.2,.01),this.S=document.createElement("span");var kr=Ss("Activation Level"),Wr=document.createElement("span");for(var mn of(this.S.innerHTML=(100*cr).toFixed()+"%",Wr.style.paddingRight="2px",Wr.title="% increase in luminance used to determine whether a flash occurred",Wr.innerHTML="<sup> i </sup>",Er.appendChild(kr),Er.appendChild(Wr),Er.appendChild(this.O),Er.appendChild(this.S),_r.call(gr,Er),_r=gr.appendChild,Er=document.createElement("div"),this.l=document.createElement("div"),this.ac=Tm(),this.s=e0(20,5,100,5),this.C=e0(1e3,500,5e3,100),cr=Ss("Autofire"),kr=Ss("# Shots"),Wr=Ss("Shot Delay"),this.U=document.createElement("span"),this.W=document.createElement("span"),this.U.innerHTML=this.s.value,this.W.innerHTML=this.C.value+" ms",this.s.id="shot-count-slider",this.l.appendChild(kr),this.l.appendChild(this.s),this.l.appendChild(this.U),this.l.appendChild(document.createElement("br")),this.l.appendChild(Wr),this.l.appendChild(this.C),this.l.appendChild(this.W),Er.appendChild(cr),Er.appendChild(this.ac),Er.appendChild(this.l),_r.call(gr,Er),gr.appendChild(function(vn){const Pn=document.createElement("div"),Gn=Ss("Loupe Position:"),sn=Ss("X"),kn=Ss("Y");sn.style.paddingLeft="10px",kn.style.paddingLeft="10px",sn.style.paddingRight="2px",kn.style.paddingRight="2px";const Fn=()=>{const Tn=document.createElement("input");return Tn.type="number",Tn.min="0",Tn.max="100",Tn.step="1",Tn.placeholder="Int",Tn.style.width="40px",Tn};return vn.Sb=Fn(),vn.Tb=Fn(),Pn.appendChild(Gn),Pn.appendChild(sn),Pn.appendChild(vn.Sb),Pn.appendChild(Ss("%")),Pn.appendChild(kn),Pn.appendChild(vn.Tb),Pn.appendChild(Ss("%")),Pn}(this)),this.zb=Tm(),(_r=document.createElement("span")).title="Simulate mouse move event whenever a mouse click is detected.  Introduces two 300 ms delays between move events and requires a minimum shot delay of 1 sec.",_r.innerHTML="<sup> i </sup>",gr.appendChild(Ss("Move On Click")),gr.appendChild(_r),gr.appendChild(this.zb),this.L=gr,gr=lu(),_r=Zp("Loupe"),this.m=document.createElement("div"),this.m.style.cursor="move",this.m.style.width="100%",this.m.style.height="100%",this.m.innerHTML="Click here to drag the loupe to the area of the screen where flashes will occur.  Then, press start.",gr.appendChild(_r),gr.appendChild(this.m),this.g=gr,(gr=lu()).style.position="relative",gr.style.backgroundColor="gray",gr.style.textAlign="center",gr.innerHTML="Warning: Must place loupe over video element to activate the LDAT.  Please reposition the loupe and then click start.",this.R=gr,gr=lu(),_r=Zp("LDAT Hot Keys"),Er=document.createElement("ul"),gr.style.bottom="195px",gr.style.left="0px",gr.style.margin="5px",Er.style.listStyle="none",Er.style.paddingLeft="2px",Er.style.margin="5px",["Enter - Start/Stop","R - Reset","A - Turn On/Off Auto-Fire Mode","S - Save Log File","C - Center Loupe on Screen"]))(cr=document.createElement("li")).innerHTML=mn,Er.append(cr);gr.appendChild(_r),gr.appendChild(Er),this.v=gr,(mn=lu()).style.bottom="325px",mn.style.left="0px",mn.style.margin="5px",this.F=mn,Mr.insertAdjacentElement("afterend",this.L),this.L.insertAdjacentElement("afterend",this.g),this.g.insertAdjacentElement("afterend",this.R),this.L.insertAdjacentElement("beforebegin",this.v),this.v.insertAdjacentElement("beforebegin",this.F),this.j.s=this.ea.bind(this),$u(this,!1),this.zb.checked=!1,Yp(this,!0)}stop(){this.L.remove(),this.g.remove(),this.R.remove(),this.v.remove(),this.F.remove(),bm(this,!1),this.ec=[]}reset(){su(this,!1),Jp(this.O,.06),Jp(this.s,20),Jp(this.C,1e3),$u(this,!1),this.zb.checked=!1,Yp(this,!0),Xp(this,!1),this.Sb.value="",this.Tb.value="",this.ec=[]}isVisible(){return this.visible}toggle(){su(this,!this.o())}o(){return this.j.o()}Db(){return!this.isVisible()||this.o()}fa(Mr){if(this.zb.checked&&this.o()&&!Mr.gf){const gr=(cr,kr)=>{switch(cr){case 0:this.K.dispatchEvent(new PointerEvent("pointerup",kr)),this.K.dispatchEvent(new MouseEvent("mouseup",kr));break;case 1:cr=new PointerEvent("pointerdown",kr),kr=new MouseEvent("mousedown",kr),cr.gf=!0,kr.gf=!0,this.K.dispatchEvent(cr),this.K.dispatchEvent(kr);break;case 2:this.K.dispatchEvent(new PointerEvent("pointerrawupdate",kr)),this.K.dispatchEvent(new PointerEvent("pointermove",kr)),this.K.dispatchEvent(new MouseEvent("mousemove",kr))}},_r={button:2,isPrimary:!0,pointerId:1},Er={clientX:(Math.max(Mr.clientX,0)||this.T.x)+64,clientY:Math.max(Mr.clientY,0)||this.T.y,movementX:64,isPrimary:!0};gr(1,_r),window.setTimeout(()=>{gr(2,Er),window.setTimeout(()=>{Er.clientX-=64,Er.movementX=-64,gr(2,Er),window.setTimeout(()=>gr(0,_r),300)},300)},300)}}onmousemove(Mr){this.T={x:Mr.clientX,y:Mr.clientY}}P(){var Mr=this.K.getBoundingClientRect();const gr=this.g.getBoundingClientRect();if(this.K.style.paddingTop||this.K.style.paddingRight||this.K.style.paddingBottom||this.K.style.paddingLeft){const{paddingTop:_r,paddingRight:Er,paddingBottom:cr,paddingLeft:kr}=Mm(this.K);Mr.x+=kr,Mr.y+=_r,Mr.width-=kr+Er,Mr.height-=_r+cr}gr.x=(gr.x-Mr.x)/Mr.width,gr.y=(gr.y-Mr.y)/Mr.height,gr.width/=Mr.width,gr.height/=Mr.height,Mr=this.j,0>=gr.width||0>=gr.height?dt.e("{0c7ed7c}","{3e0eb8f}",gr.width,gr.height):Mr.l=gr}ga(){this.P()}ea(Mr){Sm(this),this.ec.push(Mr);const gr=Em(Mr),_r=gr.total.toFixed(),Er=`Flash occurred at frame ${Mr.presentedFrames}. Latency: ${_r} ms.`;dt.i("{50c79eb}","{78905f8}",Mr.presentedFrames,_r),dt.d("{50c79eb}","{d3d4a0c}",_r,gr.pf.toFixed(),gr.Tf.toFixed(),gr.Xe.toFixed(),gr.decode.toFixed(),gr.Pf.toFixed()),this.F.innerHTML=Er,this.F.style.display="block",this.I=window.setTimeout(()=>{Am(this),this.I=0},5e3)}}(St,Qt)),this.C=xt,function(Mr){Mr.O=Mr.C.createDataChannel("stats_channel",{ordered:!1,reliable:!1,maxRetransmits:0}),Mr.O.binaryType="arraybuffer",cu(Mr.Ba,Mr.O,{open:()=>{Mr.U=1},close:()=>{Im(Mr),Mr.U=2}}),Mr.O.onmessage=gr=>{var _r=(gr=new DataView(gr.data)).getUint8(0);if(2<=_r){if(Mr.W=gr.getFloat64(1,!0)/1e6,Mr.jitter=1e3*gr.getFloat64(9,!0),Mr.rtd=gr.getFloat64(17,!0),Mr.g.H=Mr.jitter,Mr.g.rtd=Mr.rtd,3<=_r&&(Mr.fa=gr.getFloat64(25,!0),Mr.g.avgGameFps=Mr.fa,4<=_r)){_r=gr.getFloat32(33,!0);var Er=gr.getFloat32(37,!0),cr=gr.getFloat32(41,!0);let kr=gr.getFloat32(45,!0),Wr=gr.getFloat32(49,!0),mn=gr.getFloat32(53,!0),vn=gr.getFloat32(57,!0),Pn=gr.getFloat32(61,!0),Gn=gr.getFloat32(65,!0);gr=gr.getFloat32(69,!0),dt.d("{5cea617}","{9721183}",_r,Er,cr,kr,Wr,mn,vn,Pn,Gn,gr)}gr=Mr.L,_r=Mr.W,Er=Mr.g,(cr=Mr.W)&&Er.o<=cr&&(Er.Ob=Er.o/cr*100),Er.F=cr,cr=100,25<=Er.Ob&&(cr=(_r-gr.g)/(gr.maxBitrate-gr.g)*100),100<cr&&(cr=100),cr===void 0||isNaN(cr)||0>cr||(gr.bandwidthScore=15*gr.bandwidthScore/16+cr/16,gr.bandwidthScore=Math.min(gr.bandwidthScore,100)),gr=Mr.L,Er=0,250>(_r=Mr.rtd)&&((Er=100*(250-_r)/240)===void 0||isNaN(Er))&&(Er=0),gr.latencyScore=15*gr.latencyScore/16+Er/16,gr.latencyScore=Math.min(gr.latencyScore,100)}else dt.e("{5cea617}","{4f9f4b7}",_r)}}(this),this.xa=this.R.hasListener("StreamingStats"),this.o=new class{constructor(){this.j=this.framesDropped=this.l=this.pliCount=this.framesDecoded=this.m=this.s=this.o=this.v=this.C=0,this.g=[],this.h=-1}sendVideoTrack(Mr){const gr=Mr.framesDropped||0;gr>=this.j&&(this.framesDropped=gr-this.j,this.j=gr);const _r=new ArrayBuffer(44),Er=new DataView(_r);Er.setUint32(0,Mr.framesDecoded||0,!0),Er.setUint32(4,gr,!0),Er.setUint32(8,Mr.frameHeight||0,!0),Er.setUint32(12,Mr.frameWidth||0,!0),Er.setUint32(16,Mr.framesReceived||0,!0),Er.setFloat64(20,Mr.jitterBufferDelay||0,!0),Po(Mr.jitterBufferEmittedCount||0,Er,28,!0),Er.setFloat64(36,$a(Co),!0),Gs([_r],3)}},this.h={bc:{af:0,Hf:0,Zf:0},cc:"",zc:-1},this.v={Ag:0,droppedVideoFrames:0,totalVideoFrames:0},this.va=St,this.V=rr,this.sa=this.ya.bind(this),xm(this)}ya(h,ut){var St,xt,Ot,Vt,Dt,Ft=this.o,Qt=(Vt=ut.receiveTime)!==null&&Vt!==void 0?Vt:0;Vt=ut.presentationTime-Qt,Qt=1e3*((Dt=ut.processingDuration)!==null&&Dt!==void 0?Dt:0),Dt=(Dt=ut.presentationTime)!==void 0?Dt-Co.j:0;const rr=new ArrayBuffer(12),nr=new DataView(rr);nr.setFloat64(0,Dt,!0),nr.setUint16(8,Math.min(100*Vt,65535),!0),nr.setUint16(10,Math.min(100*Qt,65535),!0),Ft.g.push(rr),Ft.g.length==120&&mm(Ft),(St=this.S)!==null&&St!==void 0&&St.o()&&function(lr,Yt,dr){lr.g.push({presentedFrames:dr.presentedFrames,td:Yt,presentationTime:dr.presentationTime,receiveTime:dr.receiveTime,processingDuration:dr.processingDuration}),Yt=gm(lr,lr.l),function(ir,Xt,br,Tr,Sr){return new Promise((Mr,gr)=>{window.setTimeout(()=>{e:if(0>=Tr||0>=Sr)var _r=-1;else{var Er=new OffscreenCanvas(Tr,Sr).getContext("2d");if(Er){try{Er.drawImage(ir,Xt,br,Tr,Sr,0,0,Tr,Sr),_r=Er.getImageData(0,0,Tr,Sr).data}catch(kr){dt.e("{0c7ed7c}","{b16b792}",kr),_r=-1;break e}var cr=Er=0;for(let kr=0;kr<_r.length-3;kr+=4)Er+=.2126*_r[kr]+.7152*_r[kr+1]+.0722*_r[kr+2],cr++;_r=Er/cr/255}else dt.e("{0c7ed7c}","{b72639c}"),_r=-1}_r===-1&&gr(-1),Mr(_r)},0)})}(lr.K,Yt.x,Yt.y,Yt.width,Yt.height).then(ir=>{var Xt,br=dr.presentedFrames;if(lr.g.length){var Tr=lr.g[lr.g.length-1];if(br!==Tr.presentedFrames)dt.d("{0c7ed7c}","{06323ea}",br);else{for(Tr.fd=ir;32<lr.g.length;)lr.g.shift();if(lr.g.length!=1&&!((ir=lr.g[lr.g.length-2]).presentedFrames<br-2||ir.fd===void 0||ir.fd===-1)&&Tr.fd-ir.fd>lr.m){let Sr;ir=0;const Mr={presentedFrames:br,td:Tr.td,presentationTime:Tr.presentationTime,receiveTime:Tr.receiveTime,processingDuration:Tr.processingDuration,Ub:0,Ec:0};for(;lr.h.length&&lr.h[0].Ub<((Xt=Tr.receiveTime)!==null&&Xt!==void 0?Xt:Tr.presentationTime);)ir++,Sr=lr.h.shift();Sr&&(1<ir&&dt.d("{0c7ed7c}","{a4b8c55}",br,ir),Mr.Ub=Sr.Ub,Mr.Ec=Sr.Ec,lr.s&&lr.s(Mr))}}}})}(this.S.j,h,ut),this.Cc&&ut.rtpTimestamp&&ut.receiveTime&&(this.Z={Eg:ut.rtpTimestamp,client:ut.receiveTime-Co.j}),this.m!=0&&((Ot=(xt=this.K).requestVideoFrameCallback)===null||Ot===void 0||Ot.call(xt,this.sa))}reset(){Im(this),this.L=new Gv(this.maxBitrate,this.da),this.g=new pm(this.K,this.u,this.ea),this.j=void 0}stop(){var h;this.pa&&(this.pa=!1,this.m!=0&&(this.reset(),t0(this,!1)),(h=this.S)===null||h===void 0||h.stop(),To(this.G,"InboundVideoStats",this.h.cc,this.h.bc.Zf,this.h.bc.af,this.h.zc,this.h.bc.Hf))}toggleOnScreenStats(h,ut){t0(this,ut??this.M===0,h)}packetsReceived(){return this.ta}};function ju(h){return h.protocol==="tcp"?"TCP":(h=h.address||h.relatedAddress)?h.endsWith(".local")?"MDNS":h.indexOf(":")!==-1?"IPV6":"IPV4":"UNKNOWN"}function Nm(h){var ut=(h=h.address||h.relatedAddress)==null?void 0:h.split(".");if((ut==null?void 0:ut.length)===4&&(h=parseInt(ut[0]),ut=parseInt(ut[1]),!isNaN(h)&&!isNaN(ut))){let St="UNKNOWN";return h===10?St="10/8":h===192&&ut===168?St="192.168/16":h===172&&(240&ut)==16&&(St="172.16/12"),St!=="UNKNOWN"&&dt.d("{5cea617}","{343589d}",St),St}return dt.i("{5cea617}","{fa2d6b9}"),"UNKNOWN"}function r0(h,ut=!1){const St=h.m+1;try{let xt;h.sessionId&&(xt="x-nv-sessionid."+h.sessionId);let Ot=h.url;ut&&(Ot+="&reconnect=1");let Vt=new WebSocket(Ot,xt);Vt.onopen=()=>{var Dt;if(h.h("{48fa30b}"+St),Vt===h.g){(Dt=h.j)===null||Dt===void 0||Wm(Dt);for(const Ft of h.l)Ft.stats?Vt.send(Ft.stats):Vt.send(JSON.stringify(Ft));for(const Ft of h.s)Fm(h,Ft);h.s=[]}},Vt.onclose=Dt=>{var Ft;h.h("{6406bff}"+St),Vt===h.g&&((Ft=h.j)===null||Ft===void 0||Gm(Ft,{error:h.v,code:Dt.code,reason:Dt.reason,wasClean:Dt.wasClean}),Dm(h),h.v=!1)},Vt.onerror=()=>{h.h("{7605058}"+St),Vt===h.g&&(h.v=!0)},Vt.onmessage=Dt=>{if(h.j)try{let Qt=JSON.parse(Dt.data);if(h.o||h.h("{523f5b9}"),Bm(h),!Qt.hb){if(Qt.ack!==void 0){var Ft=Qt.ack;for(let rr=h.l.length-1;0<=rr;rr--)h.l[rr].ackid<=Ft&&h.l.splice(rr,1)}if(Qt.ackid!==void 0){if(h.maxReceivedAckId<Qt.ackid&&(s0(h.j,Qt),h.maxReceivedAckId=Qt.ackid),h.g){let rr=JSON.stringify({ack:h.maxReceivedAckId});h.h("{903be10}"+rr),h.g.send(rr)}}else Qt.ack===void 0&&s0(h.j,Qt)}}catch(Qt){h.C("Error in local websocket message handling: "+Qt+' "'+Dt.data+'"')}},h.g=Vt}catch(xt){h.g=void 0,h.C("WebSocket creation exception: "+xt+" for socket "+h.m)}h.m=St}function Lm(h){h.o!==0&&(self.clearTimeout(h.o),h.o=0)}function Dm(h){h.g&&(h.g.onclose=null,h.g.onerror=null,h.g.onmessage=null,h.g.onopen=null,h.g=void 0)}function Bm(h){Lm(h),h.o=self.setTimeout(()=>{var ut;h.h("{6c3505a}"+((ut=h.g)===null||ut===void 0?void 0:ut.readyState)+"{754f60b}"+h.m),h.g||r0(h,!0),Bm(h)},3e3)}function Fm(h,ut){ut.ackid!==void 0&&ut.ackid!==void 0&&h.l.push(ut),h.g&&(ut.stats?h.g.send(ut.stats):h.g.send(JSON.stringify(ut)))}var p1=class{constructor(h,ut){this.sessionId=h,this.v=!1,this.l=[],this.s=[],this.maxReceivedAckId=this.o=0,this.url="",this.m=0,this.h=ut.info,this.C=ut.exception}initialize(h,ut,St,xt=!1){this.url=h,this.maxReceivedAckId=ut,this.j=St,r0(this,xt),this.h("{fcf6f89}"+this.m)}uninitialize(h){var ut;this.maxReceivedAckId=0,this.l=[],this.s=[],this.j=void 0,Lm(this),(ut=this.g)===null||ut===void 0||ut.close(h),Dm(this),this.h("{986b258}"+h+"{754f60b}"+this.m)}send(h){this.j&&(this.g||r0(this,!0),this.g&&this.g.readyState===WebSocket.OPEN?Fm(this,h):this.s.push(h))}};function v1(h){switch(h){case"H264":return"h264";case"H265":return"hevc";case"AV1":return"av1";default:return"video"}}var m1=class{constructor(h,ut){this.g=h,this.h=ut,this.streams=[]}start(h){if(1&this.g.xd&&(h=h.getTransceivers().find(ut=>{var St,xt;return((xt=(St=ut.receiver)===null||St===void 0?void 0:St.track)===null||xt===void 0?void 0:xt.kind)==="video"}))){const ut={data:new DataView(new ArrayBuffer(209715200)),size:0,Pd:"video",lg:v1(this.h),sf:!1};(function(St,xt,Ot){const{readable:Vt,writable:Dt}=xt.createEncodedStreams();xt=new TransformStream({start:()=>{dt.i("{d7392d2}","{b96b3ec}",Ot.Pd)},flush:()=>{},transform:(Ft,Qt)=>{if(!Ot.sf){const Yt=new Uint8Array(Ft.data);if(Ot.size+Yt.byteLength<=Ot.data.byteLength){var rr=Ot.data,nr=Ot.size,lr=Yt;const dr=lr.byteLength;for(let ir=0;ir<dr;++ir)rr.setUint8(nr+ir,lr[ir]);Ot.size+=Yt.byteLength}else Ot.sf=!0,dt.w("{d7392d2}","{f35b2f4}",Ot.size,Ot.Pd)}Qt.enqueue(Ft)}}),Vt.pipeThrough(xt).pipeTo(Dt),St.streams.push(Ot)})(this,h.receiver,ut)}}};function $m(h){h.g&&(h.j=!h.j,h.g.style.display=h.j?"block":"none")}var g1=class{constructor(h,ut,St,xt){this.l=h,this.K=ut,this.u=St,this.G=xt,this.h={top:-1,left:-1,bottom:-1,right:-1},this.Xa=this.Ra=0,this.j=!1,this.m=0,hn&&((h=document.createElement("div")).style.display="none",h.style.position="absolute",h.style.color="white",h.style.backgroundColor="rgb(105, 105, 105, 0.7)",h.style.padding="2px",h.style.bottom="0px",h.style.left="0px",h.style.margin="5px",this.g=h,ut.insertAdjacentElement("afterend",this.g))}uninitialize(){this.g&&this.g.remove()}send(){var h,ut,St;if(!(0>=this.K.videoHeight||0>=this.K.videoWidth)){var xt=q0(),Ot=function(Dt,Ft){let{width:Qt,height:rr}={width:screen.width,height:screen.height};var nr=()=>{let dr;switch(window.orientation!==void 0?dr=window.orientation:screen.orientation&&(dr=screen.orientation.angle),dr){case 90:case-90:case 270:return!1;default:return!0}};s(Dt.u)&&(Ft.top=Math.max(Ft.top,20),nr()||(nr=Qt,Qt=rr,rr=nr)),nr=(dr=>{let ir=dr.offsetTop,Xt=dr.offsetLeft;for(var br=dr.offsetParent;br;)ir+=br.offsetTop,Xt+=br.offsetLeft,br=br.offsetParent;br=dr.clientHeight;let Tr=dr.clientWidth;return Dt.u.os==="Android"&&(window.innerHeight>window.innerWidth&&dr.clientHeight<dr.clientWidth||window.innerHeight<window.innerWidth&&dr.clientHeight>dr.clientWidth)&&(dt.w("{48f82fd}","{c9d343e}"),br=dr.clientWidth,Tr=dr.clientHeight),{top:ir,left:Xt,bottom:Math.max(window.innerHeight-ir-br,0),right:Math.max(window.innerWidth-Xt-Tr,0)}})(Dt.K);const lr=Math.max(rr-window.innerHeight,0)/2,Yt=Math.max(Qt-window.innerWidth,0)/2;return{top:Math.max(Ft.top-lr-nr.top-Dt.Ra,0)/(Dt.K.clientHeight-2*Dt.Ra),left:Math.max(Ft.left-Yt-nr.left-Dt.Xa,0)/(Dt.K.clientWidth-2*Dt.Xa),bottom:Math.max(Ft.bottom-lr-nr.bottom-Dt.Ra,0)/(Dt.K.clientHeight-2*Dt.Ra),right:Math.max(Ft.right-Yt-nr.right-Dt.Xa,0)/(Dt.K.clientWidth-2*Dt.Xa)}}(this,xt);if(!function(Dt,Ft){const Qt=Object.keys(Dt),rr=Object.keys(Ft);if(Qt.length!==rr.length)return!1;for(const nr of Qt)if(Dt[nr]!==Ft[nr])return!1;return!0}(Ot,this.h)){var Vt=JSON.stringify(Ot,(Dt,Ft)=>Ft.toFixed?Number(Ft.toFixed(2)):Ft);dt.d("{48f82fd}","{054b8b0}",JSON.stringify(xt),Vt),(h=Qn.sendInsetValueUpdateEvents)!==null&&h!==void 0&&h&&2>this.m++&&(xt=(h=(Dt,Ft=1)=>{for(const Qt of Object.keys(Dt)){const rr=Math.round(Dt[Qt]*Ft);Dt[Qt]=isNaN(rr)?-1:rr}return Dt})(Object.assign({},xt)),h=h(Object.assign({},Ot),1e3),(ut=this.G)===null||ut===void 0||To(ut,"InsetValueUpdate","Original",xt.top,xt.left,xt.bottom,xt.right),(St=this.G)===null||St===void 0||To(St,"InsetValueUpdate","Normalized",h.top,h.left,h.bottom,h.right)),this.h=Object.assign({},Ot);for(const Dt of Object.keys(Ot))Ot[Dt]=isNaN(Ot[Dt])?0:Ot[Dt];ut={messageType:"SAFE_ZONE",messageRecipient:"NvGridSvc:NGS",data:JSON.stringify({safeZoneData:{type:"InsetValueUpdate",rect:Ot}})},this.l.sendCustomMessage(ut),hn&&this.g&&(this.g.innerText=`Safe Zone: 
Top: `+(100*Math.max(this.h.top,0)).toFixed()+`%
Right: `+(100*Math.max(this.h.right,0)).toFixed()+`%
Bottom: `+(100*Math.max(this.h.bottom,0)).toFixed()+`%
Left: `+(100*Math.max(this.h.left,0)).toFixed()+"%")}}}};function hs(h,ut,St){h.g.get(ut).push(St)}function ps(h,ut,St){(St=(h=h.g.get(ut)).indexOf(St))!==-1&&h.splice(St,1)}function i0(h,ut){if(h.U&&o0(h,ut),h.h!==ut){h.h=ut;for(const St of h.g.get(0))St(ut)}}function qm(h,ut){if(h.C!==ut){h.C=ut;for(const St of h.g.get(3))St(ut)}}function jm(h,ut){if(h.s!==ut){h.s=ut;for(const St of h.g.get(4))St(ut)}}function Um(h,ut){return h.T?.22>=ut.level:h.Z?.2>=ut.level:h.W?.1>=ut.level:.33>=ut.level}function n0(){var h,ut;return up&&(h=Qn.enableComputePressure)!==null&&h!==void 0&&h&&((ut=globalThis.PressureObserver)===null||ut===void 0?void 0:ut.prototype)&&PressureObserver.knownSources instanceof Array&&PressureObserver.knownSources.includes("cpu")}function Hm(h){switch(h){case"nominal":default:return 0;case"fair":return 1;case"serious":return 2;case"critical":return 3}}function o0(h,ut){if(h.v!==ut){h.v=ut;for(const St of h.g.get(1))St(ut)}}var y1=class{constructor(h){var ut,St,xt,Ot;this.g=new Map,this.C=this.s=this.j=!1,this.o="nominal",this.U=h.deviceType==="PHONE"||h.deviceType==="TABLET",this.Z=_e(h),this.W=h.os==="iPadOS",this.T=lt(h),this.h=this.v=document.hasFocus(),this.m=0;const Vt=(St=(ut=(h=window.zoneless)==null?void 0:h.windowAddEventListener)===null||ut===void 0?void 0:ut.bind(window))!==null&&St!==void 0?St:window.addEventListener.bind(window),Dt=(Ot=(xt=h==null?void 0:h.documentAddEventListener)===null||xt===void 0?void 0:xt.bind(document))!==null&&Ot!==void 0?Ot:document.addEventListener.bind(document);this.N=this.da.bind(this),this.I=this.aa.bind(this),this.O=this.F.bind(this),this.P=this.ea.bind(this),this.R=this.fa.bind(this),this.L=this.ca.bind(this),this.H=this.$.bind(this),this.M=this.S.bind(this),Vt("focus",this.N),Vt("blur",this.I),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","msfullscreenchange"].forEach(Ft=>Dt(Ft,this.O)),Dt("mouseenter",this.P),Dt("mouseleave",this.R),navigator.getBattery&&navigator.getBattery().then(Ft=>{qm(this,!Ft.charging),jm(this,Um(this,Ft)),Ft.addEventListener("chargingchange",this.L),Ft.addEventListener("levelchange",this.H)}),window.screen.isExtended!==void 0&&(this.S(),window.screen.addEventListener("change",this.M)),n0()?(this.l=new PressureObserver(Ft=>{if(0<Ft.length){let Qt="nominal";for(const rr of Ft)Hm(rr.state)>Hm(Qt)&&(Qt=rr.state);if(Ft=Qt,this.o!=Ft){this.o=Ft;for(const rr of this.g.get(5))rr()}}}),this.l.observe("cpu")):dt.i("{0c4eeb2}","{c70b747}"),this.g.set(0,[]),this.g.set(2,[]),this.g.set(1,[]),this.g.set(3,[]),this.g.set(4,[]),this.g.set(5,[]),this.F()}uninitialize(){var h,ut,St,xt,Ot,Vt,Dt;const Ft=window.zoneless,Qt=(ut=(h=Ft==null?void 0:Ft.windowRemoveEventListener)===null||h===void 0?void 0:h.bind(window))!==null&&ut!==void 0?ut:window.removeEventListener.bind(window),rr=(xt=(St=Ft==null?void 0:Ft.documentRemoveEventListener)===null||St===void 0?void 0:St.bind(document))!==null&&xt!==void 0?xt:document.removeEventListener.bind(document);Qt("focus",this.N),Qt("blur",this.I),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","msfullscreenchange"].forEach(nr=>rr(nr,this.O)),rr("mouseenter",this.P),rr("mouseleave",this.R),navigator.getBattery&&navigator.getBattery().then(nr=>{nr.removeEventListener("chargingchange",this.L),nr.removeEventListener("levelchange",this.H)}),window.screen.isExtended!==void 0&&window.screen.removeEventListener("change",this.M),(h=(Ot=this.l)===null||Ot===void 0?void 0:Ot.takeRecords())==null||h.map(nr=>dt.i("{0c4eeb2}","{4f27ba0}",JSON.stringify(nr))),(Vt=this.l)===null||Vt===void 0||Vt.unobserve("cpu"),(Dt=this.l)===null||Dt===void 0||Dt.disconnect();for(const nr of this.g.values())nr.splice(0)}da(){i0(this,!0)}aa(){i0(this,!1)}F(){var h=window.document;if(h=!!(document.fullscreen||h.webkitIsFullScreen==1||h.mozFullScreen||h.msFullscreenElement),this.j!==h){this.j=h;for(const ut of this.g.get(2))ut(h)}}ea(){o0(this,!0)}fa(){o0(this,!1)}ca(){navigator.getBattery().then(h=>{qm(this,!h.charging)})}$(){navigator.getBattery().then(h=>{jm(this,Um(this,h))})}S(){this.m=window.screen.isExtended?3:0,dt.i("{0c4eeb2}","{ee99c72}",this.m)}};function zm(h){return h.split(`
m=`).map((ut,St)=>(0<St?"m="+ut:ut).trim()+`\r
`)}function a0(h,ut){return function(St){return St.trim().split(`
`).map(xt=>xt.trim())}(h).filter(St=>St.indexOf(ut)===0)}function b1(h){return{algorithm:(h=h.substr(14).split(" "))[0].toLowerCase(),value:h[1].toUpperCase()}}function Km(h,ut,St,xt){let Ot=h.split(`\r
`),Vt=-1;for(let Dt=0;Dt<Ot.length;Dt++)if(Ot[Dt].indexOf("m=video")===0){Vt=Dt;break}if(Vt===-1)return dt.e("{93c7910}","{e0899ab}","video"),h;for(dt.d("{93c7910}","{5cc346f}","video",Vt),Vt++,h=";x-google-max-bitrate="+St+";x-google-min-bitrate="+ut+";x-google-start-bitrate="+xt,ut=new Set;Vt<Ot.length&&Ot[Vt].indexOf("m=")!==0;)(St=Ot[Vt]).indexOf("a=rtpmap:")===0&&0<St.indexOf("H264/")?ut.add(St.slice(9,St.indexOf(" "))):St.indexOf("a=fmtp:")===0&&ut.has(St.slice(7,St.indexOf(" ")))&&(Ot[Vt]+=h),Vt++;return Ot.join(`\r
`)}function Gm(h,ut){var St,xt,Ot,Vt;if(ut.error&&h.C!==0){var Dt=h.G,Ft=(St=ut.code)!==null&&St!==void 0?St:0;St=(Ot=(xt=h.session)===null||xt===void 0?void 0:xt.signalConnectionInfo.ip)!==null&&Ot!==void 0?Ot:"",xt=(Vt=ut.reason)!==null&&Vt!==void 0?Vt:"",Vt=new go({retryCount:h.ta,sessionId:Dt.sessionId,subSessionId:Dt.subSessionId,serverId:St,url:h.M,overrideConfigType:ba.type,overrideConfigVersion:ba.version,disconnectionReason:xt,cleanDisconnection:pp(ut.wasClean),networkType:sr(bs.getCurrentNetworkType()),statusCode:Ft?Ft.toString():"",cmsId:String(Dt.cmsId),moduleName:"RAGNAROK"}),Dt.h(Vt),h.ta++,3>=h.ta?(Jm(h),_g(h)):(window.clearTimeout(h.C),h.C=0,dt.i("{93c7910}","{8595cb4}"),Zs(h,{code:3237093890}))}ut.wasClean||h.xa++}function s0(h,ut){var St;dt.i("{93c7910}","{39024c3}",Hl(JSON.stringify(ut))),ut.ackid&&h.maxReceivedAckId<ut.ackid&&(h.maxReceivedAckId=ut.ackid),ut.peer_info?ut.peer_info.name!==h.name&&h.id!==0||(h.id=ut.peer_info.id,dt.d("{93c7910}","{c5faf27}",h.id)):ut.peer_msg?async function(xt,Ot,Vt){var Dt;dt.d("{93c7910}","{9978507}",Ot);try{const Ft=JSON.parse(Vt);if(Ft.type==="offer"){xt.Sa=!0;let Qt,rr=Ft.sdp||"";dt.d("{93c7910}","{ca9a155}",Hl(rr));const nr=await xt.pc;if(xt.W=function(Yt,dr){Yt=Yt.split(`\r
`);var ir=-1;if(!dr.length)return"H264";for(var Xt=0;Xt<Yt.length;Xt++)if(Yt[Xt].startsWith("m=video")){ir=Xt;break}if(ir===-1)return dt.e("{93c7910}","{3ab33e3}"),"H264";for(ir+=1,Xt=new Set;ir<Yt.length&&!Yt[ir].startsWith("m=");){var br=Yt[ir];br.indexOf("a=rtpmap:")===0&&((br=br.slice(br.indexOf(" ")+1,br.indexOf("/")))!=="H264"&&br!=="H265"&&br!=="AV1"||Xt.add(br)),ir++}for(const Tr of dr)if(Xt.has(Tr))return dt.i("{93c7910}","{304c3b1}",Tr),Tr;return dt.i("{93c7910}","{81357e4}"),"H264"}(rr,nr),Ft.nvstSdp){const Yt=(Dt=Ft.nvstServerOverrides)!==null&&Dt!==void 0?Dt:"";if(Qt=function(dr,ir,Xt){var br,Tr=dr.v,Sr=dr.u,Mr=dr.W;if(ir=function(lo){let Jn,eo,fo={origin:"",time:"",ob:new Map,media:[]},po=new Map,na=!1;const Do=()=>{if(na){if(!eo||!Jn)return dt.e("{eb7c2d0}","{adc37a7}"),!1;fo.media.push({mediaType:eo,Fc:Jn,attributes:po}),Jn=eo=void 0}else fo.ob=po,na=!0;return po=new Map,!0};for(const Qo of lo.split(/\r?\n/))if(!(2>Qo.length||Qo[1]!=="=")){var yo=Qo[0];if(lo=Qo.substr(2),yo=="m"){if(!Do())return;eo=lo.split(" ")[0]}else if(yo=="a"){if((yo=lo.split(":",2)).length!==1){if(yo.length!==2)return void dt.e("{eb7c2d0}","{f6bdb84}",lo);if(lo=yo[0],yo=yo[1],lo==="msid"){if(Jn!==void 0)return void dt.e("{eb7c2d0}","{dc7fbec}",yo);Jn=yo}else po.set(lo,yo)}}else if(yo=="t"){if(na)return void dt.e("{eb7c2d0}","{14fc069}");fo.time=lo}else if(yo=="o"){if(na)return void dt.e("{eb7c2d0}","{eb0287a}");fo.origin=lo}}if(Do()){if(fo.time!==""&&fo.origin!=="")return fo;dt.e("{eb7c2d0}","{8e7e486}")}}(ir)){var gr,_r=ir;const lo={origin:_r.origin,time:_r.time,ob:new Map,media:[]};lo.ob.set("general.clientSupportsIntraRefresh",Sr.browser==="Safari"?"0":"1"),lo.ob.set("general.clientCapture",(gr=_r.ob.get("general.clientCapture"))!==null&&gr!==void 0?gr:"0"),lo.ob.set("runtime.serverTraceCapture","2"),gr=0;for(const Jn of _r.media){if(_r=new Map,Jn.mediaType==="video"&&gr<Tr.video.length){var Er=void 0,cr=_r,kr=Tr.video[gr],Wr=Sr,mn=Mr;cr.set("vqos.fec.rateDropWindow","10"),cr.set("vqos.fec.minRequiredFecPackets","2"),cr.set("vqos.drc.minRequiredBitrateCheckEnabled","1"),cr.set("video.dx9EnableNv12","1"),cr.set("vqos.qpg.enable","1"),cr.set("vqos.resControl.qp.qpg.featureSetting","7"),cr.set("bwe.useOwdCongestionControl","1"),cr.set("video.enableRtpNack","1"),cr.set("vqos.bw.txRxLag.minFeedbackTxDeltaMs","200"),cr.set("vqos.fec.repairMinPercent","5"),cr.set("vqos.fec.repairPercent","5"),cr.set("vqos.fec.repairMaxPercent","35"),cr.set("vqos.drc.bitrateIirFilterFactor","18"),cr.set("video.packetSize","1140"),cr.set("packetPacing.minNumPacketsPerGroup","15"),cr.set("vqos.bllFec.enable","0");var vn=void 0,Pn=mt(Wr)||lt(Wr);((vn=Qn.enableOOFQosEnhancements)!==null&&vn!==void 0?vn:Pn)&&(cr.set("vqos.adjustStreamingFpsDuringOutOfFocus","1"),cr.set("vqos.resControl.cpmRtc.ignoreOutOfFocusWindowState","1"),cr.set("vqos.resControl.perfHistory.rtcIgnoreOutOfFocusWindowState","1")),Pn=120<=kr.hc;var Gn=kr.hc===120,sn=kr.hc===240,kn=4953600<=kr.Qb*kr.Pb,Fn=hp(kr.Qb,kr.Pb)||kn,Tn=2764800<=kr.Qb*kr.Pb;if((vn=z0(Wr))&&cr.set("vqos.resControl.cpmRtc.featureMask","3"),Pn&&(cr.set("bwe.iirFilterFactor","8"),cr.set("video.encoderFeatureSetting","47"),cr.set("video.encoderPreset","6"),cr.set("vqos.resControl.cpmRtc.badNwSkipFramesCount"," 600"),cr.set("vqos.resControl.cpmRtc.decodeTimeThresholdMs","9"),Gn?(cr.set("video.fbcDynamicFpsGrabTimeoutMs","6"),cr.set("vqos.resControl.cpmRtc.serverResolutionUpdateCoolDownCount","6000")):sn&&(cr.set("video.fbcDynamicFpsGrabTimeoutMs","18"),cr.set("vqos.resControl.cpmRtc.serverResolutionUpdateCoolDownCount","12000"),cr.set("video.enableNextCaptureMode","1"),cr.set("vqos.maxStreamFpsEstimate","240"),cr.set("video.videoSplitEncodeStripsPerFrame","3"),cr.set("video.updateSplitEncodeStateDynamically","1"))),(Fn||42e3<=kr.Dc)&&(Gn?cr.set("packetPacing.numGroups","3"):cr.set("packetPacing.numGroups","5"),cr.set("packetPacing.maxDelayUs","1000"),cr.set("packetPacing.minNumPacketsFrame","10"),cr.set("video.rtpNackQueueLength","1024"),cr.set("video.rtpNackQueueMaxPackets","512"),cr.set("video.rtpNackMaxPacketCount","25"),cr.set("vqos.drc.qpMaxResThresholdAdj","4"),cr.set("vqos.grc.qpMaxResThresholdAdj","4"),cr.set("vqos.drc.iirFilterFactor","100"),cr.set("vqos.qpg.enable","0"),cr.set("vqos.resControl.qp.qpg.featureSetting","0"),Fn&&(cr.set("video.videoSplitEncodeStripsPerFrame","3"),cr.set("video.updateSplitEncodeStateDynamically","1")),kn&&(cr.set("video.encoderPreset","6"),cr.set("vqos.drc.add1440pResLevelFor4kDrcTable","1"),cr.set("vqos.drc.minAdaptiveQpThreshold","40"),cr.set("vqos.grc.minAdaptiveQpThreshold","40"),cr.set("vqos.drc.upperQpThreshold","40"),cr.set("vqos.grc.upperQpThreshold","40"),cr.set("vqos.drc.qpMaxResThresholdAdj","5"),cr.set("vqos.grc.qpMaxResThresholdAdj","5"),cr.set("vqos.drc.iirFilterFactor","100"),cr.set("vqos.fec.repairMinPercent","0"),cr.set("vqos.qpg.enable","0"),cr.set("vqos.resControl.qp.qpg.featureSetting","0"))),mn==="AV1"){var so,no,Mo,Yo,cs,Ir,pn,un,An,_n=Fn=sn=Gn=void 0,On=void 0,$n=void 0,Rn=cr;Rn.set("vqos.qpg.enable","0"),Rn.set("vqos.resControl.qp.qpg.featureSetting","0"),Rn.set("vqos.drc.minQpHeadroom","20"),Rn.set("vqos.drc.lowerQpThreshold","100"),Rn.set("vqos.drc.upperQpThreshold","200"),Rn.set("vqos.drc.minAdaptiveQpThreshold","180");let eo=Number((An=Rn.get("vqos.drc.qpMaxResThresholdAdj"))!==null&&An!==void 0?An:"0");Rn.set("vqos.drc.qpMaxResThresholdAdj",(5*eo).toString()),Rn.set("vqos.drc.qpCodecThresholdAdj","0"),Rn.set("vqos.dfc.minQpHeadroom",(un=Rn.get("vqos.drc.minQpHeadroom"))!==null&&un!==void 0?un:"0"),Rn.set("vqos.dfc.qpLowerLimit",(pn=Rn.get("vqos.drc.lowerQpThreshold"))!==null&&pn!==void 0?pn:"0"),Rn.set("vqos.dfc.qpMaxUpperLimit",(Ir=Rn.get("vqos.drc.upperQpThreshold"))!==null&&Ir!==void 0?Ir:"0"),Rn.set("vqos.dfc.qpMinUpperLimit",(cs=Rn.get("vqos.drc.minAdaptiveQpThreshold"))!==null&&cs!==void 0?cs:"0"),Rn.set("vqos.dfc.qpMaxResThresholdAdj",(Yo=Rn.get("vqos.drc.qpMaxResThresholdAdj"))!==null&&Yo!==void 0?Yo:"0"),Rn.set("vqos.dfc.qpCodecThresholdAdj",(Mo=Rn.get("vqos.drc.qpCodecThresholdAdj"))!==null&&Mo!==void 0?Mo:"0"),kn&&(Rn.set("vqos.drc.minAdaptiveQpThreshold",($n=Rn.get("vqos.drc.upperQpThreshold"))!==null&&$n!==void 0?$n:"0"),Rn.set("vqos.dfc.qpMinUpperLimit",(On=Rn.get("vqos.dfc.qpMaxUpperLimit"))!==null&&On!==void 0?On:"0")),Rn.set("vqos.grc.minQpHeadroom",(no=Rn.get("vqos.drc.minQpHeadroom"))!==null&&no!==void 0?no:"0"),Rn.set("vqos.grc.lowerQpThreshold",(so=Rn.get("vqos.drc.lowerQpThreshold"))!==null&&so!==void 0?so:"0"),Rn.set("vqos.grc.upperQpThreshold",(_n=Rn.get("vqos.drc.upperQpThreshold"))!==null&&_n!==void 0?_n:"0"),Rn.set("vqos.grc.minAdaptiveQpThreshold",(Fn=Rn.get("vqos.drc.minAdaptiveQpThreshold"))!==null&&Fn!==void 0?Fn:"0"),Rn.set("vqos.grc.qpMaxResThresholdAdj",(sn=Rn.get("vqos.drc.qpMaxResThresholdAdj"))!==null&&sn!==void 0?sn:"0"),Rn.set("vqos.grc.qpCodecThresholdAdj",(Gn=Rn.get("vqos.drc.qpCodecThresholdAdj"))!==null&&Gn!==void 0?Gn:"0"),Tn&&Rn.set("video.videoSplitEncodeStripsPerFrame","23")}if(cr.set("video.clientViewportWd",kr.Qb.toString()),cr.set("video.clientViewportHt",kr.Pb.toString()),cr.set("video.maxFPS",kr.hc.toString()),cr.set("video.initialBitrateKbps",kr.Hd.toString()),cr.set("video.initialPeakBitrateKbps",kr.nf.toString()),cr.set("vqos.bw.maximumBitrateKbps",kr.Dc.toString()),cr.set("vqos.bw.minimumBitrateKbps",kr.gd.toString()),cr.set("video.maxNumReferenceFrames","4"),cr.set("video.mapRtpTimestampsToFrames",kr.Cc?"1":"0"),_e()&&(cr.set("vqos.drc.stepDownMinHeight","480"),jt(Wr,!1,14,5)||(Wr=kr.Qb/kr.Pb*100,cr.set("vqos.drc.stepDownResolutionAlignment","16"),cr.set("vqos.drc.stepDownTargetAspectRatioX100",Wr.toFixed(0)))),Wr=cr,Tn=kr.dynamicStreamingMode,(Pn||Tn===2)&&(Tn!==1&&(Wr.set("vqos.drc.enable","0"),Wr.set("vqos.dfc.enable","1")),Wr.set("vqos.dfc.decodeFpsAdjPercent","85"),Wr.set("vqos.dfc.targetDownCooldownMs","250"),Wr.set("vqos.dfc.dfcAlgoVersion","1"),Wr.set("vqos.dfc.minTargetFps","60"),vn&&Wr.set("vqos.cpm.flags","1"),Wr.set("vqos.resControl.dfc.useClientFpsPerf","0")),Tn!==void 0)switch(Tn){case 3:Bu(Wr,!0,Pn);break;case 2:Bu(Wr,!0,!0);break;case 1:Bu(Wr,!0,!1);break;case 0:Bu(Wr,!1,Pn)}vn=3,Wr=0,Pn=8,mn!=="H265"&&mn!=="AV1"||(Pn=(Er=(mn=lm)==null?void 0:mn.features.hdr)!==null&&Er!==void 0&&Er,Er=kr.Xc===1,Pn&&Er?(vn=4,Wr=kr.Xc,Pn=Math.max(10,Math.min((mn==null?void 0:mn.features.bitDepth)||10,kr.bitDepth))):Pn=Math.max(8,Math.min((mn==null?void 0:mn.features.sdrBitDepth)||8,kr.bitDepth))),cr.set("video.encoderCscMode",vn.toString()),cr.set("video.dynamicRangeMode",Wr.toString()),cr.set("video.bitDepth",Pn.toString()),gr++}Jn.mediaType==="application"&&(kr=cr=void 0,mn=Jn,(Er=_r).set("ri.partialReliableThresholdMs",(kr=mn.attributes.get("ri.partialReliableThresholdMs"))!==null&&kr!==void 0?kr:"0"),Er.set("ri.hidDeviceMask",(cr=mn.attributes.get("ri.hidDeviceMask"))!==null&&cr!==void 0?cr:"0")),lo.media.push({mediaType:Jn.mediaType,Fc:Jn.Fc,attributes:_r})}var io,So;Sr=lo,Qp(Mr=(So=(io=Qn.nvscClientConfigFields)===null||io===void 0?void 0:io.join(`
`))!==null&&So!==void 0?So:"",Sr,ir,"remoteconfig"),Qp(Xt,Sr,ir,"server"),Xt=hn&&!Qp(k0,Sr,ir,"client")?{error:3237093917}:function(Jn,eo){let fo=!0;const po=(Do,yo)=>(Do=Do.get(yo))&&(Do=parseInt(Do),!Number.isNaN(Do))?Do:(dt.e("{eb7c2d0}","{0a60213}",yo),fo=!1,0);Jn.xd=po(eo.ob,"general.clientCapture");let na=0;for(const Do of eo.media){if(Do.mediaType==="video"&&na<Jn.video.length){eo=Jn.video[na];const yo=Do.attributes;eo.Qb=po(yo,"video.clientViewportWd"),eo.Pb=po(yo,"video.clientViewportHt"),eo.hc=po(yo,"video.maxFPS"),eo.Hd=po(yo,"video.initialBitrateKbps"),eo.nf=po(yo,"video.initialPeakBitrateKbps"),eo.Dc=po(yo,"vqos.bw.maximumBitrateKbps"),eo.gd=po(yo,"vqos.bw.minimumBitrateKbps"),eo.Cc=0<po(yo,"video.mapRtpTimestampsToFrames"),eo.Xc=po(yo,"video.dynamicRangeMode"),eo.bitDepth=po(yo,"video.bitDepth"),na++}Do.mediaType==="application"&&(Jn.Jc.Rd=po(Do.attributes,"ri.partialReliableThresholdMs"),Jn.Jc.lf=po(Do.attributes,"ri.hidDeviceMask"))}return fo}(Tr,Sr)?{config:Tr,Te:o1(Sr,ir)}:{error:3237093918}}else Xt={error:3237093911};if(Xt.config&&Xt.Te)return dr.v=Xt.config,Xt.Te;Zs(dr,{code:(br=Xt.error)!==null&&br!==void 0?br:3237093910})}(xt,Ft.nvstSdp,Yt),!Qt)return}xt.aa=new m1(xt.v,xt.W),function(Yt,dr){var ir,Xt,br,Tr,Sr;dt.d("{93c7910}","{d79ed0a}",dr);try{let Mr={};Qn.enableStunServer&&(Mr.iceServers=[{urls:"stun:s1.stun.gamestream.nvidia.com:19308"}]),(ir=Yt.aa)===null||ir===void 0||ir.g.xd&&(Mr.encodedInsertableStreams=!0),dt.d("{93c7910}","{93106c2}",JSON.stringify(Mr)),Yt.ra=dr,Yt.g=new RTCPeerConnection(Mr);const gr=_r=>{var Er,cr;if(Yt.U){var kr=Yt.U;To(Yt.G,"IceStats","disconnected",0,kr.Mf,kr.Nf,kr.Lf),Yt.U=void 0}(kr=(Er=Yt.h)===null||Er===void 0?void 0:Vm(Er))&&To(Yt.G,"IceStats","failed",0,kr.Mf,kr.Nf,kr.Lf),Yt.l|=16,4&Yt.l?Yt.h&&Yt.h.packetsReceived()==0?Ko(Yt,3237093900):Yt.h&&Yt.h.l==0?Ko(Yt,3237093901):Ko(Yt,_r?3237093906:3237093899):Ko(Yt,(cr=u0(Yt))!==null&&cr!==void 0?cr:3237093894)};if(Yt.g.onconnectionstatechange=()=>{Yt.g?(dt.d("{93c7910}","{4ced155}",Yt.g.connectionState),Yt.g.connectionState==="failed"&&(d0(Yt)||gr(!1))):dt.e("{93c7910}","{648f784}")},Yt.g.oniceconnectionstatechange=()=>{var _r;if(Yt.g)switch(dt.d("{93c7910}","{3a3143a}",Yt.g.iceConnectionState),Yt.g.iceConnectionState){case"new":Yt.l|=1;break;case"checking":Yt.l|=2;break;case"connected":Yt.U=void 0,32&Yt.l&&(Yt.I.emit("StreamingEvent",{streamingState:{state:"reconnected"}}),Yt.$a++),Yt.l|=4;break;case"completed":Yt.U=void 0,Yt.l|=12;break;case"failed":gr(!0);break;case"disconnected":Yt.U=(_r=Yt.h)===null||_r===void 0?void 0:Vm(_r),4&Yt.l&&Yt.I.emit("StreamingEvent",{streamingState:{state:"reconnecting"}}),Yt.l|=32;break;case"closed":Yt.l|=64,32&Yt.l&&Ko(Yt,3237093892)}else dt.e("{93c7910}","{648f784}")},Yt.g.ondatachannel=_r=>{dt.d("{93c7910}","{b364db9}",_r.channel.label),_r.channel.label=="control_channel"&&(cu(Yt,_r.channel,{errorCode:3237093898,open:()=>{var Er,cr,kr,Wr;Yt.S=_r.channel;for(const mn of Yt.ea)c0(Yt,mn);dt.d("{93c7910}","{038895c}",Yt.ea.length),Yt.ea=[],Uu(Yt,`NvRtcClient Browser name: ${Yt.u.browser}, Browser version: ${Yt.u.browserFullVer}`),ts(Yt,{etwPrintPair:{key:"GPU Detail",value:Yt.u.gpuDetail}}),oy(Yt,(cr=(Er=Yt.h)===null||Er===void 0?void 0:Er.l)!==null&&cr!==void 0?cr:0),hs(Yt.j,0,Yt.P),hs(Yt.j,1,Yt.P),hs(Yt.j,2,Yt.P),navigator.getBattery&&(ay(Yt,(Wr=(kr=Yt.h)===null||kr===void 0?void 0:kr.l)!==null&&Wr!==void 0?Wr:0),hs(Yt.j,4,Yt.fa),hs(Yt.j,3,Yt.fa)),n0()&&(Uu(Yt,"ClientGenericMapping: {ProcCpuUsage, TotalCpuUsage}"),hs(Yt.j,5,Yt.Pa)),window.requestAnimationFrame(Yt.Ka)}}),_r.channel.onmessage=Er=>{try{var cr=JSON.parse(Er.data);if(dt.d("{93c7910}","{9371373}"),cr.exitMessage)Ko(Yt,function(mn){if(mn.stopData){var vn=function(Pn){if(2>Pn.length)return null;const Gn=atob(Pn);let sn=0;const kn=()=>{const Fn=256*Gn.charCodeAt(sn)+Gn.charCodeAt(sn+1);return sn+=2,Fn};return kn()==0?Pn.length<sn+2?null:kn():null}(mn.stopData);if(vn||vn===0)return dt.d("{c00be32}","{921626d}",vn),Rl(vn)}if(mn.nvstResult){switch(dt.d("{c00be32}","{f30bc33}",mn.nvstResult),vn=15868672,mn=mn.nvstResult){case 2147680256:case 2147680291:vn=15868704;break;case 2147680257:vn=15868705;break;case 2147680258:vn=3237093635;break;case 2147680259:vn=3237094152;break;case 2147680260:vn=15868706;break;case 2147680262:vn=15868707;break;case 2147680263:vn=15868708;break;case 2147680264:vn=15868736;break;case 2147680265:vn=15868737;break;case 2147680266:vn=15868738;break;case 2147680267:vn=15868739;break;case 2147680268:vn=15868741;break;case 2147680269:vn=15868740;break;case 2147680270:vn=15868742;break;case 2147680271:vn=3237094147;break;case 2147680275:vn=15868743;break;case 2147680277:vn=15868709;break;case 2147680278:vn=15868744;break;case 2147680279:vn=15868710;break;case 2147680280:vn=15868711;break;case 2147680281:vn=15868712;break;case 2147680283:vn=3237094155;break;case 2147680284:vn=3237094156;break;case 2147680285:vn=3237094157;break;case 2147680286:vn=3237093678;break;case 2147680287:vn=15868715;break;case 2147680288:vn=15868716;break;case 2147680289:vn=15868719;break;case 2147680300:vn=15868688;break;case 2147745794:case 2147745797:case 2147745803:vn=3237093892;break;case 2147745796:vn=3237094158;break;case 2147745804:vn=3237094146;break;case 2147745805:vn=3237094148;break;case 2147745806:vn=3237094149;break;case 2147745807:vn=3237094150;break;case 2148438786:vn=15868718;break;default:dt.d("{c00be32}","{094c45e}",$(mn))}return vn}return mn.code?(dt.d("{c00be32}","{6210ab0}",mn.code),Rl(mn.code)):15868672}(cr.exitMessage));else if(cr.timerNotification){var kr=(Er=cr).timerNotification.code;switch(cr=0,dt.d("{c00be32}","{44bd2b6}",kr),kr){case 1:case 2:cr=1;break;case 4:cr=2;break;case 6:cr=3}var Wr=cr;Wr===0?dt.e("{93c7910}","{de37ac5}",Er.timerNotification.code):f0(Yt,Wr,Er.timerNotification.secondsLeft)}else cr.debugMessage?As(Yt,cr.debugMessage.message):cr.customMessage?Yt.I.emit("CustomMessage",JSON.parse(cr.customMessage)):cr.videoStreamProgressEvent?Yt.videoStreamProgress=cr.videoStreamProgressEvent.videoStreamProgress:dt.d("{93c7910}","{d14e0fd}")}catch(mn){dt.e("{93c7910}","{a40734a}",mn),Yt.G.za(mn,"Error in control_channel message handling","{93c7910}.ts",0,0,!0)}})},dt.d("{93c7910}","{d9ffda2}"),dt.d("{93c7910}","{2bd4728}"),Yt.Ja=Yt.g.createDataChannel("input_channel_v1",{ordered:!0,reliable:!0}),Yt.Ja.binaryType="arraybuffer",cu(Yt,Yt.Ja,{errorCode:3237093896}),0<Yt.v.Jc.Rd){dt.d("{93c7910}","{ff9ae1e}");let _r={ordered:!1,maxPacketLifeTime:Yt.v.Jc.Rd};dt.d("{93c7910}","{9149fff}",JSON.stringify(_r)),Yt.Aa=Yt.g.createDataChannel("gamepad_channel_v1",_r),Yt.Aa.binaryType="arraybuffer",cu(Yt,Yt.Aa,{errorCode:3237093929})}if(Yt.T=Yt.g.createDataChannel("cursor_channel",{ordered:!0,reliable:!0}),Yt.T.binaryType="arraybuffer",cu(Yt,Yt.T,{errorCode:3237093897}),function(_r){var Er;return((Er=Qn.requireDS4TrackpadForAppIds)!==null&&Er!==void 0?Er:[]).indexOf(_r)!==-1}(Yt.session.appId)&&function(_r){Ws(_r),_r.na=!0,Ol(_r,!0)}(Yt.s),function(_r,Er){Ws(_r),_r.Da=Ju||!!(4&Er),_r.bb=Xu||!!(2&Er),Ol(_r,!0)}(Yt.s,Yt.v.Jc.lf),Yt.m=new Zy(Yt,Yt.K,Yt.Ja,Yt.T,Yt.G,Yt.I,Yt.Nb,Yt.appLaunchMode===2,Yt.nc,Yt.s,Yt.u,Yt.Ba,Yt.ga,Yt.j,Yt.V,Yt.Aa,Yt.textInputElement),Yt.oa&&(Yt.setKeyboardLayout(Yt.keyboardLayout),Yt.oa=!1),hu){dt.d("{93c7910}","{9ae428b}");const _r={zoneName:Yt.session.zoneName,clientAppVersion:(Xt=Yt.clientAppVersion)!==null&&Xt!==void 0?Xt:"",appId:Yt.session.appId,Ud:(br=Yt.Ud)!==null&&br!==void 0?br:"",gpuType:Yt.session.gpuType,streamInfo:(Tr=Yt.session.streamInfo[0])!==null&&Tr!==void 0?Tr:{width:0,height:0,fps:0},clientLocale:Yt.session.clientLocale};Yt.h=new h1(Yt.I,Yt,Yt.K,Yt.g,Yt.v,Yt.G,Yt.u,_r,Yt.j,Yt.V)}Yt.g.addEventListener("icecandidate",Yt.Ua),Yt.g.onsignalingstatechange=()=>{dt.i("{93c7910}","{3236227}",Yt.g.signalingState)},Yt.g.onicecandidate=_r=>iy(Yt,_r),Yt.g.g=_r=>{dt.w("{93c7910}","{9871b05}",_r.port,_r.url,_r.errorCode,_r.Tg)},((Sr=Nn)!==null&&Sr!==void 0?Sr:!it(Yt.u))&&Yt.Da.initialize(Yt.g,Yt.I,Yt.K,Yt.Ea),Yt.g.ontrack=_r=>{var Er;const cr=_r.streams[0];dt.d("{93c7910}","{47359d4}",cr.id,_r.track.kind,_r.track.id,_r.streams.length,$(Yt.l));let kr={kind:_r.track.kind==="video"?"video":"audio",trackId:_r.track.id};_r.track.kind!=="audio"||cr.id!=="stream_id"&&cr.id!=="app_media_stream"&&cr.id!=="second_stream_id"&&cr.id!=="app_audio_stream"||(Yt.qa=_r.track.id,function(Wr,mn){(mn=function(vn){let Pn=null;return(vn=vn.getAudioTracks()).length&&(Pn=vn[0]),Pn}(mn))&&(mn.onunmute=()=>{Wr.Na=!1})}(Yt,cr),(Er=Yt.R)===null||Er===void 0||Er.initialize(new MediaStream(cr.getAudioTracks()))),(_r=Yt.o.find(Wr=>Wr.streamId===cr.id))?_r.tracks.push(kr):Yt.o.push({streamId:cr.id,tracks:[kr]}),h0(Yt)}}catch(Mr){dt.e("{93c7910}","{ff11182}",Mr),Yt.G.za(Mr,"Exception in creating peer connection","{93c7910}.ts",0,0,!0)}}(xt,Ot);let lr=Date.now();rr=function(Yt,dr){return dr.split(`\r
`).map(ir=>ir.startsWith("a=candidate:")?(Yt.na=!0,"a="+sy(Yt,ir.substr(2))):ir).join(`\r
`)}(xt,rr),rr=function(Yt,dr,ir,Xt){let br=Yt.split(`\r
`),Tr=-1;for(var Sr=0;Sr<br.length;Sr++)if(br[Sr].startsWith("m=video")){Tr=Sr;break}if(Tr===-1)return dt.e("{93c7910}","{3ab33e3}"),Yt;for(Tr++,Sr=Tr;Sr<br.length;Sr++)if(br[Sr].startsWith("a=imageattr"))return dt.d("{93c7910}","{b38bf22}"),Yt;for(Yt=new Set;Tr<br.length&&!br[Tr].startsWith("m=");)Sr=br[Tr],/a=rtpmap:.*H26[45]\//.test(Sr)?Yt.add(Sr.slice(9,Sr.indexOf(" "))):Sr.indexOf("a=fmtp:")===0&&(Sr=Sr.slice(7,Sr.indexOf(" ")),Yt.has(Sr)&&(Tr++,br.splice(Tr,0,`a=imageattr:${Sr} send [x=[960:${dr}],y=[540:${ir}],fps=[30:${Xt}]]`))),Tr++;return br.join(`\r
`)}(rr,xt.v.video[0].Qb,xt.v.video[0].Pb,xt.v.video[0].hc),dt.d("{93c7910}","{542f9d5}",Hl(rr)),xt.g.setRemoteDescription({type:Ft.type,sdp:rr}).then(()=>{xt.wa=Date.now()-lr,function(dr){let ir=dr.g.getTransceivers();if(ir.length===0)dt.d("{93c7910}","{3399d9d}"),Zs(dr,{code:3237093909});else{for(const Xt of ir)Xt.mid==="3"&&Xt.receiver.track.id!==dr.qa?(dt.i("{93c7910}","{981392f}"),Xt.receiver.track.enabled=!1):dr.$.push({trackId:Xt.receiver.track.id,kind:Xt.receiver.track.kind});dt.d("{93c7910}","{648ae93}",JSON.stringify(dr.$))}}(xt),dt.d("{93c7910}","{ab7b3af}",xt.wa),function(dr){for(const ir of dr.o)ir.streamId==="stream_id"&&dr.o.length===2?ir.streamId="app_video_stream":ir.streamId==="stream_id"?ir.streamId="app_media_stream":ir.streamId==="second_stream_id"&&(ir.streamId="app_audio_stream")}(xt);const Yt=function(dr){var ir=dr.o.find(br=>br.streamId==="app_media_stream");if(ir)Hu(dr,ir,dr.K),dt.i("{93c7910}","{a5e354c}");else{ir=dr.o.find(br=>br.streamId==="app_video_stream");var Xt=dr.o.find(br=>br.streamId==="app_audio_stream");if(ir&&Xt){const br={streamId:"app_media_stream",tracks:ir.tracks.concat(Xt.tracks)};dr.o.splice(dr.o.indexOf(ir),1),dr.o.splice(dr.o.indexOf(Xt),1),dr.o.push(br),Hu(dr,br,dr.K),dt.i("{93c7910}","{e2dc4ec}")}else if(ir)Hu(dr,ir,dr.K),dt.i("{93c7910}","{07f3411}");else if(Xt){if(!dr.Ea)return 3237093937;Hu(dr,Xt,dr.Ea),dt.i("{93c7910}","{243a50b}")}else dt.w("{93c7910}","{c3a2679}")}}(xt);Yt?Ko(xt,Yt):(function(dr){var ir;(ir=dr.aa)===null||ir===void 0||ir.start(dr.g)}(xt),function(dr){try{if(dr.g&&dr.sendVideoTrack){const ir=dr.g.getTransceivers().find(Xt=>Xt.receiver.track.kind==="video");if(ir){let Xt="",br=ir.direction;ir.direction!=="sendrecv"&&(ir.direction="sendrecv",Xt=" ("+br+" direction is overridden by sendrecv)"),ir.sender.replaceTrack(dr.sendVideoTrack).then(()=>{dt.i("{93c7910}","{b54f651}",Xt)}).catch(Tr=>{ir.direction!==br&&(ir.direction=br),dt.w("{93c7910}","{d225159}",Tr)})}else dt.w("{93c7910}","{8272b59}")}}catch(ir){dt.w("{93c7910}","{66082ec}",ir)}}(xt),function(dr,ir){var Xt,br,Tr;const Sr=dr.g.getTransceivers().find(gr=>gr.receiver.track.kind==="video"&&(gr.direction==="recvonly"||gr.direction==="sendrecv"));if(Sr)if(RTCRtpReceiver.getCapabilities&&RTCRtpSender.getCapabilities&&Sr.setCodecPreferences){var Mr=[ir,"flexfec-03","rtx"];if(ir=(Xt=RTCRtpReceiver.getCapabilities("video"))===null||Xt===void 0?void 0:Xt.codecs,Xt=[],ir){for(const gr of Mr)(Mr=ir.filter(_r=>_r.mimeType==="video/"+gr))&&Xt.push.apply(Xt,Mr);try{Sr.setCodecPreferences(Xt)}catch(gr){ty(dr,"Failed to set codec preferences to receiver capabilities",gr);try{Xt=Xt.concat((Tr=(br=RTCRtpSender.getCapabilities("video"))===null||br===void 0?void 0:br.codecs)!==null&&Tr!==void 0?Tr:[]),Sr.setCodecPreferences(Xt)}catch(_r){ty(dr,"Failed to set codec preferences to sender and receiver capabilities",_r)}}}}else dt.w("{93c7910}","{274c489}")}(xt,xt.W),lr=Date.now(),xt.g.createAnswer().then(dr=>{var ir;xt.ua=Date.now()-lr,dt.d("{93c7910}","{2984003}",xt.ua);const Xt=xt.v.video[0].Dc.toString(),br=xt.v.video[0].gd.toString(),Tr=xt.v.video[0].Hd.toString();dt.d("{93c7910}","{b535c15}",Hl(p0((ir=dr.sdp)!==null&&ir!==void 0?ir:""))),dr.sdp!==void 0&&(dr.sdp=function(Sr,Mr){let gr=Sr.split(`\r
`),_r=-1;for(let Er=0;Er<gr.length;Er++)if(gr[Er].indexOf("m=video")===0){_r=Er;break}if(_r===-1)return dt.e("{93c7910}","{e0899ab}","video"),Sr;for(dt.d("{93c7910}","{5cc346f}","video",_r),_r++;gr[_r].indexOf("i=")===0||gr[_r].indexOf("c=")===0;)_r++;return gr[_r].indexOf("b")===0?(dt.d("{93c7910}","{e77177e}",_r),gr[_r]="b=AS:"+Mr,gr.join(`\r
`)):(dt.d("{93c7910}","{3dfc348}",_r),(Sr=gr.slice(0,_r)).push("b=AS:"+Mr),(Sr=Sr.concat(gr.slice(_r,gr.length))).join(`\r
`))}(dr.sdp,Xt),window.chrome&&(dr.sdp=Km(dr.sdp,br,Xt,Tr)),dr.sdp=function(Sr){var Mr=[];let gr=Sr.split(`\r
`);var _r="-1";let Er;for(let cr=0;cr<gr.length;cr++)gr[cr].indexOf("a=rtpmap:")===0?(Er=gr[cr].split(" ")[1],Er.indexOf("opus")===0&&(_r=gr[cr].split(" ")[0].slice(9),dt.i("{93c7910}","{c3dd71b}","audio",_r))):gr[cr].indexOf("a=fmtp:"+_r+" ")===0&&(Mr.push(cr),_r="-1");if(Mr.length===0)return dt.e("{93c7910}","{115f256}","audio"),Sr;Sr=-1,_r=[];for(const cr of Mr)Mr=gr[cr],dt.d("{93c7910}","{9bb0e6f}",Mr),Mr+=";stereo=1",dt.d("{93c7910}","{4f021eb}",Mr),(_r=_r.concat(gr.slice(Sr+1,cr))).push(Mr),Sr=cr;return(_r=_r.concat(gr.slice(Sr+1))).join(`\r
`)}(dr.sdp),(ir=function(Sr){Sr=Sr.split(`\r
`);for(var Mr=-1,gr=0;gr<Sr.length;gr++)if(Sr[gr].indexOf("m=audio")===0){Mr=gr;break}if(Mr===-1)dt.d("{93c7910}","{a939549}","audio");else{for(var _r=gr=void 0,Er=void 0,cr=void 0,kr=Mr+1;kr<Sr.length;kr++)if(Sr[kr].indexOf("a=rtpmap:")===0){var Wr=Sr[kr].split(" ")[1];Wr.indexOf("red")===0?(_r=Sr[kr].split(" ")[0].slice(9),cr=Wr.split("/")[2],dt.i("{93c7910}","{4e6ce55}","audio",_r,cr)):Wr.indexOf("multiopus")===0&&(gr=Sr[kr].split(" ")[0].slice(9),Er=Wr.split("/")[2],dt.i("{93c7910}","{53ebbb1}","audio",gr,Er))}else if(Sr[kr].indexOf("m=")===0){dt.d("{93c7910}","{9fc6964}",Sr[kr]);break}if(gr){for(Wr=[],kr=[],Mr+=1;Mr<Sr.length;Mr++)if(Sr[Mr].indexOf("a=rtpmap:"+_r)===0||Sr[Mr].indexOf("a=rtcp-fb:"+_r)===0||Sr[Mr].indexOf("a=fmtp:"+_r)===0)kr.push(Sr[Mr]);else if(Sr[Mr].indexOf("a=rtpmap:"+gr)===0||Sr[Mr].indexOf("a=rtcp-fb:"+gr)===0||Sr[Mr].indexOf("a=fmtp:"+gr)===0)Wr.push(Sr[Mr]);else if(Sr[Mr].indexOf("m=")===0){dt.d("{93c7910}","{9fc6964}",Sr[Mr]);break}return cr&&cr!==Er&&(_r=void 0,kr=[],dt.w("{93c7910}","{ad53601}",cr,Er)),{Cd:_r,ff:gr,Ig:kr.join(`\r
`),Hg:Wr.join(`\r
`)}}dt.d("{93c7910}","{cf4ee2d}","audio")}}(rr))&&(dr.sdp=function(Sr,Mr){let gr=Sr.split(`\r
`),_r=-1,Er=-1;for(var cr=0;cr<gr.length;cr++)if(gr[cr].indexOf("m=audio")===0){_r=cr;break}if(_r===-1)return dt.d("{93c7910}","{e0899ab}","audio"),Sr;cr=gr.slice(0,_r);let kr=gr[_r].split(" ");if(kr[3]!=="0")return dt.d("{93c7910}","{794b3c6}","audio",kr.join(" ")),Sr;for(Mr.Cd?(kr[3]=Mr.Cd,kr[4]=Mr.ff):kr[3]=Mr.ff,cr.push(kr.join(" ")),Sr=_r+1;Sr<gr.length;Sr++)if(gr[Sr].indexOf("m=")===0){Er=Sr;break}return Er===-1&&(Er=gr.length-1),cr=cr.concat(gr.slice(_r+1,Er)),Mr.Cd&&(cr=cr.concat(Mr.Ig.split(`\r
`))),(cr=(cr=cr.concat(Mr.Hg.split(`\r
`))).concat(gr.slice(Er))).join(`\r
`)}(dr.sdp,ir)),dt.d("{93c7910}","{1a048a7}",Hl(p0(dr.sdp)))),lr=Date.now(),xt.g.setLocalDescription(dr).then(()=>{if(xt.va=Date.now()-lr,dt.d("{93c7910}","{de86c01}",xt.va),dr.sdp===void 0||window.chrome||(dr.sdp=Km(dr.sdp,br,Xt,Tr)),dr.sdp!==void 0&&Qt){var Sr=zm(dr.sdp),Mr=Sr.shift(),gr=Sr[0],_r=Mr,Er=a0(gr+_r,"a=ice-ufrag:")[0];gr=a0(gr+_r,"a=ice-pwd:")[0],Er=Er.substr(12),gr=gr.substr(10),Sr=a0(Sr[0]+Mr,"a=fingerprint:").map(b1),(Mr=zm(Qt))[0]+="a=general.icePassword:"+gr+`\r
`,Mr[0]+="a=general.iceUserNameFragment:"+Er+`\r
`,Mr[0]+="a=general.dtlsFingerprint:"+Sr[0].value+`\r
`,Qt=Mr.join("")}ny(xt,Ot,{type:dr.type,sdp:dr.sdp,nvstSdp:Qt}),dt.i("{93c7910}","{bd70666}",JSON.stringify(xt.o)),h0(xt)}).catch(Sr=>{dt.e("{93c7910}","{ba2deaa}",Sr),Ko(xt,3237093902)})}).catch(dr=>{dt.d("{93c7910}","{40c0f69}",dr)}))}).catch(Yt=>{dt.e("{93c7910}","{ec2853e}",Yt),Ko(xt,3237093902)})}else if(Ft.candidate){dt.d("{93c7910}","{cf4c103}");let Qt=sy(xt,Ft.candidate);dt.d("{93c7910}","{43e80e0}",Qt),xt.g.addIceCandidate({sdpMLineIndex:Ft.sdpMLineIndex,sdpMid:Ft.sdpMid,candidate:Qt}).then(()=>{dt.d("{93c7910}","{db0ae14}"),xt.na=!0}).catch(rr=>{dt.e("{93c7910}","{62f207e}",rr),qo(xt.G,"AddCandidateFailed",rr==null?void 0:rr.name,rr==null?void 0:rr.message)}),dt.d("{93c7910}","{9454009}")}}catch(Ft){Vt==="BYE"?Ko(xt,15868672):(dt.e("{93c7910}","{93367fc}",Ft),xt.G.za(Ft,"Invalid handlePeerMessage Response","{93c7910}.ts",0,0,!0))}}(h,ut.peer_msg.from,ut.peer_msg.msg):ut.error&&(ut.error==="peerRemoved"?(h.F!==0?(ut=(St=u0(h))!==null&&St!==void 0?St:3237094161,dt.w("{93c7910}","{cbb35d3}")):ut=3237094159,Ko(h,ut)):Ko(h,3237094160))}function Wm(h){h.C!==0&&(window.clearTimeout(h.C),h.C=0,h.bb=Date.now()-h.cb),h.H||h.F!==0||function(ut){ut.F=window.setTimeout(()=>{var St;ut.F=0,dt.i("{93c7910}","{d22df91}"),Ko(ut,(St=u0(ut))!==null&&St!==void 0?St:3237093895)},3e4),ut.Bb=Date.now()}(h)}function Qm(h,ut){var St,xt=Co;xt.h&&(xt.perf.DCSend+=ut),(St=h.h)===null||St===void 0||((h=St.g).j.value+=ut,h.j.count+=1,h.j.max=Math.max(ut,h.j.max))}function l0(h){if(Fl(h))return h.h.S}function As(h,ut){h.da.innerHTML=ut,h.da.style.display="block",h.N&&clearTimeout(h.N),h.N=window.setTimeout(()=>{h.da.style.display="none"},1e3)}function cu(h,ut,St){const xt=ut.label;let Ot=!1;ut.onopen=()=>{var Vt;dt.d("{93c7910}","{8e9ee5d}",xt),(Vt=St.open)===null||Vt===void 0||Vt.call(St),St.errorCode&&h0(h)},ut.onclosing=()=>{dt.d("{93c7910}","{d0c8ae7}",xt),Ot=!0},ut.onclose=()=>{var Vt;dt.d("{93c7910}","{a3c9826}",xt),(Vt=St.close)===null||Vt===void 0||Vt.call(St),St.errorCode&&d0(h)},ut.onerror=Vt=>{if(dt.e("{93c7910}","{fcd64bb}",xt),Ot&&St.errorCode)d0(h)||Ko(h,15867907);else{var Dt=ut.bufferedAmount;Vt=Vt==null?void 0:Vt.error,h.Z||qo(h.G,"ChannelError",xt,Vt==null?void 0:Vt.name,Vt==null?void 0:Vt.message,Dt==null?void 0:Dt.toString()),dt.e("{93c7910}","{db7ae96}",xt,Vt==null?void 0:Vt.name,Vt==null?void 0:Vt.message),St.errorCode&&Ko(h,St.errorCode)}}}function Uu(h,ut){ts(h,{etwPrint:ut})}function Ym(){dt.d("{93c7910}","{440d709}",Co.j,performance.timeOrigin)}function Jm(h){var ut=1;for(let St=1;10>St;St++)ut*=10;ut=(ut=""+Math.floor(Math.random()*ut)).padEnd(10,"0"),h.name="peer-"+ut,dt.d("{93c7910}","{f2b789d}",h.name),h.M=h.L+"/sign_in?peer_id="+h.name+"&version=2",h.signalingUrlQueryParameters&&(h.M+="&"+h.signalingUrlQueryParameters),dt.d("{93c7910}","{05b8afd}",h.M)}function Zs(h,ut){var St,xt,Ot,Vt;h.H||(h.lb=Date.now()-h.Bb,ut===void 0?_h||((Vt=h.O)===null||Vt===void 0||Vt.uninitialize(4001),h.O=void 0,Co.startWebSocket(h.M,h.maxReceivedAckId,h,!0),pu&&ry(h)):function(Dt){var Ft,Qt,rr,nr,lr,Yt,dr,ir,Xt;const br=Er=>{var cr,kr;return((cr=Er==null?void 0:Er.get("TCP"))!==null&&cr!==void 0?cr:0)+((kr=Er==null?void 0:Er.get("IPV6"))!==null&&kr!==void 0?kr:0)};var Tr=(Er,cr)=>{let kr=0;if(cr){Er=`${Er} local candidates:`;for(const[Wr,mn]of cr)kr+=mn,Er+=` ${cr=Wr}: ${mn}`;dt.i("{93c7910}","{0b0c6f9}",Er)}return kr};const Sr=(Ft=Dt.h)===null||Ft===void 0?void 0:function(Er){let cr=new Rm;if(!Er.j)return cr;for(const kr of Er.j.values())kr.type==="local-candidate"&&(Er=ju(kr),cr.set(Er,cr.get(Er)+1));return cr}(Ft);Ft=Tr("event",Dt.ca);const Mr=Tr("stats",Sr);Tr=Ft-Dt.Ta;let gr="";const _r=(Qt=Dt.g)===null||Qt===void 0?void 0:Qt.getReceivers().find(Er=>Er.track.kind==="video"&&Er.track.enabled);(Qt=(Yt=(lr=(nr=(rr=_r==null?void 0:_r.Yg)===null||rr===void 0?void 0:rr.Ug)===null||nr===void 0?void 0:nr.getSelectedCandidatePair)===null||lr===void 0?void 0:lr.call(nr))===null||Yt===void 0?void 0:Yt.local)&&(gr=`category: ${ju(Qt)}, type: ${Qt.type}`),To(Dt.G,"LocalCandidatesCategories",gr,Ft,Ft-br(Dt.ca),Mr,Mr-br(Sr)),rr=(ir=(dr=Dt.h)===null||dr===void 0?void 0:function(Er){let cr=new Set;if(!Er.j)return cr;for(const kr of Er.j.values())kr.type==="local-candidate"&&ju(Er=kr)==="IPV4"&&(Er=Nm(Er))!=="UNKNOWN"&&cr.add(Er);return cr}(dr))!==null&&ir!==void 0?ir:new Set,To(Dt.G,"LocalCandidateRanges",`${(Xt=Dt.g)===null||Xt===void 0?void 0:Xt.iceGatheringState}`,Tr,rr==null?void 0:rr.size,Dt.ka.size,new Set([...rr,...Dt.ka]).size)}(h),h.H=!0,h.F!==0&&(window.clearTimeout(h.F),h.F=0),ut={sessionId:h.session.sessionId,subSessionId:h.session.subSessionId,streams:h.o,streamInfo:h.session.streamInfo,error:ut,zoneName:h.session.zoneName,zoneAddress:h.session.zoneAddress,gpuType:h.session.gpuType,isResume:(St=h.isResume)!==null&&St!==void 0&&St,bitDepth:(Ot=(xt=h.h)===null||xt===void 0?void 0:xt.bitDepth)!==null&&Ot!==void 0?Ot:8},h.Ba.Gc(ut),h.ga.send())}function c0(h,ut){var St;try{if(((St=h.S)===null||St===void 0?void 0:St.readyState)==="open"){let xt=performance.now();h.S.send(JSON.stringify(ut)),Qm(h,performance.now()-xt)}else dt.w("{93c7910}","{593db1b}")}catch(xt){dt.e("{93c7910}","{a585a6e}",xt),h.G.za(xt,"sendControlMessage exception","{93c7910}.ts",0,0,!0)}}function Xm(h){h.m&&(h.m.uninitialize(),h.m=void 0)}function Zm(h){var ut;(ut=h.h)===null||ut===void 0||ut.stop()}function u0(h){var ut;const St=ey(h);let xt;switch(h.videoStreamProgress){case 0:case 2:break;case 3:xt=3237093922;break;case 5:xt=3237093923;break;case 7:xt=3237093924;break;default:xt=3237093925}if((ut=h.h)===null||ut===void 0)var Ot=void 0;else e:{if(ut.j){var Vt=Ot=0,Dt=0,Ft=0;for(const Qt of ut.j.values())Qt.type==="candidate-pair"&&(Ot+=(ut=Qt).requestsSent+ut.consentRequestsSent,Vt+=ut.responsesReceived,ut.Vg&&Dt++,ut.state==="succeeded"&&Ft++);if(dt.i("{5cea617}","{47c0ce7}",Ot,Vt),0<Ot&&Vt===0){Ot=3237093926;break e}if(!Dt){Ot=3237093927;break e}if(!Ft){Ot=3237093928;break e}}Ot=void 0}return h.id?h.Sa?St!==15859712?xt=St:h.na?h.Qa?Ot?xt=Ot:4&h.l&&(Is(h.Ja)==="connecting"?xt=3237093919:Is(h.T)==="connecting"?xt=3237093920:Is(h.S)==="connecting"?xt=3237093921:h.Aa&&Is(h.Aa)==="connecting"&&(xt=3237093936)):xt=3237093903:xt=3237093904:xt=3237093913:xt=3237093912,xt}function Ko(h,ut){var St;if(!h.Z){if(h.Z=!0,Xm(h),Zm(h),h.H){let xt={sessionId:h.session.sessionId,subSessionId:h.session.subSessionId,error:{code:ut},zoneName:h.session.zoneName,zoneAddress:h.session.zoneAddress};qo(h.G,"SignalingState",$(ut),(St=h.g)===null||St===void 0?void 0:St.signalingState),dt.i("{93c7910}","{89d3ea6}",h.g.signalingState),h.Ba.Cf(xt)}else Zs(h,{code:ut});dt.e("{93c7910}","{573fb24}",$(ut))}}function _g(h){h.O=new p1(h.session.sessionId,{info:h.vc.bind(h),exception:h.uc.bind(h)}),h.O.initialize(h.M,h.maxReceivedAckId,h)}function ey(h){const ut=h.o.flatMap(St=>St.tracks);for(const St of h.$)if(!ut.find(xt=>xt.trackId===St.trackId))return St.kind==="audio"?3237093914:3237093905;return dt.d("{93c7910}","{4fef10b}"),ut.length>h.$.length&&dt.w("{93c7910}","{7861bb3}"),15859712}function d0(h){let ut=!1;return window.chrome&&h.g.signalingState==="closed"&&(ut=!0,Ko(h,15867908)),ut}function Hu(h,ut,St){h=h.g.getTransceivers().map(xt=>xt.receiver.track),h=new MediaStream(h.filter(xt=>ut.tracks.find(Ot=>Ot.trackId===xt.id))),St.srcObject=h}function ty(h,ut,St){dt.w("{93c7910}","{4d3c418}",ut,St),h.G.za(St,ut,"{93c7910}.ts",0,0,!0)}function ry(h){var ut={stats:{from:h.id,to:h.ra}},St=Co;St.h=!1,ut={startStats:{statsHeader:ut}},St.g&&(dt.d("{1f5ec29}","{6897d5e}"),St.g.postMessage(ut)),h.pa=!0}function ts(h,ut){Is(h.S)==="connecting"?h.ea.push(ut):c0(h,ut)}function f0(h,ut,St){var xt;ut===2&&((xt=h.m)===null||xt===void 0||Dp(xt,!0)),dt.d("{93c7910}","{5ba6173}",ut,St),h.I.emit("StreamingEvent",{streamingWarnings:{code:ut,secondsLeft:St}})}function iy(h,ut,St){ut.candidate?(St||(St=ju(ut.candidate),h.ca.set(St,h.ca.get(St)+1),St==="IPV4"&&(St=Nm(ut.candidate))!=="UNKNOWN"&&h.ka.add(St)),ut.candidate.protocol==="tcp"?dt.d("{93c7910}","{6f19d1e}"):(dt.d("{93c7910}","{ac052fa}",ut.candidate.port,ut.candidate.protocol),ny(h,h.ra,{sdpMLineIndex:ut.candidate.sdpMLineIndex,sdpMid:ut.candidate.sdpMid,candidate:ut.candidate.candidate}),h.Qa=!0)):dt.d("{93c7910}","{a759d16}")}function ny(h,ut,St){const xt=JSON.stringify(St);St={peer_msg:{from:h.id,to:ut,msg:xt},ackid:h.ya.g++},dt.d("{93c7910}","{7ecb902}",ut,xt.length,Hl(p0(JSON.stringify(St)))),h.O?h.O.send(St):(h=Co).g&&h.g.postMessage({send:St})}function oy(h,ut){let St=0;h.j.h&&(St|=2),h.j.v&&(St|=1),h.j.j&&(St|=16);const xt={windowState:{streamIndex:0,frameNumber:ut,windowStateFlags:St}};dt.i("{93c7910}","{ca317d5}",St.toString(16),ut),ts(h,xt)}function ay(h,ut){let St=0;h.j.s&&(St|=4),h.j.C&&(St|=1);const xt={systemState:{streamIndex:0,frameNumber:ut,systemStateFlags:St}};dt.i("{93c7910}","{455ccc0}",St.toString(16),ut),ts(h,xt)}function h0(h){0<h.$.length&&Is(h.S)!=="connecting"&&Is(h.T)!=="connecting"&&Is(h.Ja)!=="connecting"&&(!h.Aa||Is(h.Aa)!=="connecting")&&ey(h)===15859712&&Zs(h)}function sy(h,ut){return dt.d("{93c7910}","{2dd62a2}"),(h=h.session.mediaConnectionInfo.find(St=>St.usage===2||St.usage===17))?((ut=ut.split(" "))[4]=h.ip,ut[5]=""+h.port,ut=ut.join(" "),dt.d("{93c7910}","{1fbcd88}",ut),ut):(dt.d("{93c7910}","{aee7283}"),ut)}function Fl(h){return!(!h.h||h.h.m==0)}function ly(h){var ut;(ut=h.h)===null||ut===void 0||ut.m!=0&&(ut.reset(),t0(ut,!1))}function cy(h){var ut;(ut=h.h)===null||ut===void 0||ut.m!=0||xm(ut)}function $l(h){return h.h?h.h.l:0}function Ul(h){var ut;let St=(ut=h.h)===null||ut===void 0?void 0:ut.N;return St!==void 0&&St!=="UNKNOWN"||(St=h.W),St}var uy=class{constructor(h,ut,St,xt,Ot,Vt,Dt,Ft,Qt,rr,nr,lr,Yt,dr,ir,Xt,br,Tr,Sr){var Mr,gr;let _r;this.signalingUrlQueryParameters=Sr,this.name="",this.id=0,this.v={video:[],xd:0,Jc:{Rd:0,lf:0}},this.ra=-1,this.H=this.Z=!1,this.F=this.N=this.l=0,this.pa=!1,this.C=this.xa=0,this.na=this.Qa=this.Sa=!1,this.Na=!0,this.stutterIndicator=this.perfIndicator=!1,this.sa=0,this.$=[],this.o=[],this.M="",this.ta=0,this.ya=new class{constructor(){this.g=1}},this.cb=this.ua=this.va=this.wa=0,this.Bb=Date.now(),this.$a=this.lb=this.bb=0,this.oa=!1,this.keyboardLayout="",this.videoStreamProgress=this.maxReceivedAckId=0,this.ea=[],this.qa="",this.P=this.tc.bind(this),this.fa=this.sc.bind(this),this.Pa=this.rc.bind(this),this.Ta=0,this.ca=new Rm,this.Ua=this.qc.bind(this),this.ka=new Set,this.W="UNKNOWN",this.u=Qt,this.K=ut,this.Ea=St,this.Da=xt,this.I=h,dt.d("{93c7910}","{e1ca54d}",JSON.stringify(rr)),rr.finalizedStreamingFeatures||dt.w("{93c7910}","{6f17ef5}"),this.session=rr,Il?(_r=Il,dt.d("{93c7910}","{55e5b30}",_r)):nr!=null&&nr.maxBitrateKbps&&(_r=nr==null?void 0:nr.maxBitrateKbps,dt.d("{93c7910}","{965049f}",_r)),br===void 0&&(nr==null?void 0:nr.drc)!==void 0&&(br=nr.drc?3:0);for(const kr of rr.streamInfo){if(_r!=null)var Er=_r;else St=Du(kr.width,kr.height,kr.fps)[0],dt.d("{93c7910}","{aff4184}",St),Er=St;xt=(St=this.v.video).push,Sr=void 0;var cr=Er;Er=rr.finalizedStreamingFeatures,cr=Math.max(4e3,cr);const Wr=Math.max(4e3,Math.round(cr/4));cr={Qb:kr.width,Pb:kr.height,hc:kr.fps,dynamicStreamingMode:br,Dc:cr,Hd:Wr,nf:Wr,Cc:!0,gd:4e3,Xc:a1((Sr=kr.sdrHdrMode)!==null&&Sr!==void 0?Sr:0),bitDepth:jy(Er)},xt.call(St,cr)}if(this.pc=um((Mr=this.session.streamInfo[0])!==null&&Mr!==void 0?Mr:{width:0,height:0,fps:0},this.u),async function(){let kr=2;var Wr="minptime=10;useinbandfec=1;channel_mapping=0,4,1,2,3,5;num_streams=4;coupled_streams=2";const mn=W0(6,`v=0
o=- 0 3 IN IP4 127.0.0.1
s=-
t=0 0
a=fingerprint:sha-256 A7:24:72:CA:6E:02:55:39:BA:66:DF:6E:CC:4C:D8:B0:1A:BF:1A:56:65:7D:F4:03:AD:7E:77:43:2A:29:EC:93
m=audio 9 UDP/TLS/RTP/SAVPF 100 101
c=IN IP4 0.0.0.0
a=rtcp-mux
a=sendonly
a=mid:audio
a=setup:actpass
a=ice-ufrag:ETEn
a=ice-pwd:OtSK0WpNtpUjkY4+86js7Z/l\r
a=rtpmap:100 multiopus/48000/6\r
a=fmtp:100 `+Wr+`\r
a=rtpmap:101 opus/48000/2
a=fmtp:101 minptime=10;useinbandfec=1
`,Wr);Wr=W0(8,`v=0
o=- 0 3 IN IP4 127.0.0.1
s=-
t=0 0
a=fingerprint:sha-256 A7:24:72:CA:6E:02:55:39:BA:66:DF:6E:CC:4C:D8:B0:1A:BF:1A:56:65:7D:F4:03:AD:7E:77:43:2A:29:EC:93
m=audio 9 UDP/TLS/RTP/SAVPF 100 101
c=IN IP4 0.0.0.0
a=rtcp-mux
a=sendonly
a=mid:audio
a=setup:actpass
a=ice-ufrag:ETEn
a=ice-pwd:OtSK0WpNtpUjkY4+86js7Z/l\r
a=rtpmap:100 multiopus/48000/8\r
a=fmtp:100 `+(Wr="minptime=10;useinbandfec=1;channel_mapping=0,6,1,2,3,4,5,7;num_streams=5;coupled_streams=3")+`\r
a=rtpmap:101 opus/48000/2
a=fmtp:101 minptime=10;useinbandfec=1
`,Wr),await Promise.all([mn,Wr]).then(vn=>{kr=Math.max(Number(vn[0]),Number(vn[1]))}),dt.i("{d988e7f}","{dc7ee29}",kr)}(),this.G=Ft,Ft=rr.appId,(br=Qn.disableUnadjustedMovementForAppIds)&&br.indexOf(Ft)!==-1?(dt.i("{d988e7f}","{265cfdc}",Ft),Ft=!1):Ft=Ro,this.Nb={unadjustedMovement:Ft,...Ot},this.Ba=h,this.nc=Vt,this.s=Dt,this.R=lr,this.textInputElement=Yt,this.appLaunchMode=rr.appLaunchMode,this.clientAppVersion=dr,this.isResume=ir,this.Ud=Xt,Tr){for(const kr of Tr)if(kr.track instanceof MediaStreamTrack&&kr.track.kind==="video"){this.sendVideoTrack=kr.track;break}}this.sendVideoTrack=(gr=this.sendVideoTrack)!==null&&gr!==void 0?gr:nr==null?void 0:nr.sendVideoTrack,h=(h=this.session.signalConnectionInfo.protocol).replace("http","ws"),this.L=h+"://"+this.session.signalConnectionInfo.ip+":"+this.session.signalConnectionInfo.port,(h=this.session.signalConnectionInfo.resourcePath)&&(this.L+=(h.charAt(0)==="/"?"":"/")+h,this.L.charAt(this.L.length-1)==="/"&&(this.L=this.L.slice(0,-1))),Co.initialize(this.session.sessionId,this.G,this.ya),this.ga=new g1(this,ut,this.u,this.G),this.j=new y1(Qt),(ut=document.createElement("div")).style.position="absolute",ut.style.zIndex="300",ut.style.left="0",ut.style.top="0",ut.style.width="100%",ut.style.display="none",ut.style.fontSize="3em",ut.style.color="white",ut.style.backgroundColor="gray",ut.style.textAlign="center",this.K.insertAdjacentElement("afterend",ut),this.da=ut,this.ab={$b:32768,ic:256,jc:255,mb:this.ja.bind(this)},this.Va={$b:16384,ic:512,jc:65280,mb:this.Cb.bind(this)},this.Oa={$b:16384,ic:512,jc:255,mb:this.Qc.bind(this)},this.Za={$b:8192,ic:256,jc:255,mb:this.toggleOnScreenStats.bind(this)},this.V={vd:0,Ue:0,Sc:0,ld:0,nd:0,md:0,Wd:0,hd:0,Rc:0,jd:0},this.Ka=this.oc.bind(this)}start(){(function(h){Jm(h);let ut=1e4;Qn.signInTimeout&&Qn.signInTimeout!==0&&(ut=Qn.signInTimeout,dt.i("{93c7910}","{4f2f101}",ut)),h.C=window.setTimeout(()=>h.signInTimeout(),ut),h.cb=Date.now(),_g(h)})(this),Co.j=performance.now(),Ym(),hn&&(this.s.v.push(this.ab),this.s.v.push(this.Va),this.s.v.push(this.Oa),this.s.v.push(this.Za))}stop(h){var ut,St,xt,Ot;To(this.G,"StreamTimersAndReconnects",$(h),0,this.bb,this.lb,this.$a);const Vt=Dt=>{dt.i("{93c7910}","{a848987}",Dt),To(this.G,"PeerAPIDurationsAndMic",$(h),this.ua,this.wa,this.va,Dt)};Hp().then(Dt=>{Vt(Dt)}),Zs(this,{code:h,description:"Session stopped before stream connected"}),this.N&&(clearTimeout(this.N),this.N=0),this.da.remove(),this.Z=!0;try{c0(this,{exitMessage:{code:Gl(h)}})}catch(Dt){dt.e("{93c7910}","{d337883}",Dt)}Xm(this),this.Ja&&this.Ja.close(),(ut=this.Aa)===null||ut===void 0||ut.close(),Zm(this),(St=this.g)===null||St===void 0||St.removeEventListener("icecandidate",this.Ua),this.g&&this.g.close(),function(Dt){var Ft;if(!((Ft=Dt.aa)===null||Ft===void 0)){for(const rr of Ft.streams){var Qt=new Date().toISOString();Qt=`ragnarok-${rr.Pd}-${Qt}.${rr.lg}`,vp([new DataView(rr.data.buffer,0,rr.size)],Qt,"text/plain")&&dt.i("{d7392d2}","{4b3378a}",Qt)}Ft.streams=[]}Dt.aa=void 0}(this),this.F!==0&&(window.clearTimeout(this.F),this.F=0),this.C!==0&&(window.clearTimeout(this.C),this.C=0),D0(),(xt=this.O)===null||xt===void 0||xt.uninitialize(),Co.stopWebSocket(),Ym(),function(){var Dt,Ft=Co;Ft.v||(Dt=Ft.G)===null||Dt===void 0||qo(Dt,"Worker Thread Creation Failed"),Ft.G=void 0,Ft.s=void 0}(),this.qa&&this.Na&&(dt.e("{93c7910}","{283a180}"),qo(this.G,"Audio track muted")),0<this.xa&&To(this.G,"WebSocketClose","",0,this.xa,0,0),(Ot=this.R)===null||Ot===void 0||Ot.uninitialize(),this.ga.uninitialize(),ps(this.j,0,this.P),ps(this.j,1,this.P),ps(this.j,2,this.P),ps(this.j,4,this.fa),ps(this.j,3,this.fa),n0()&&ps(this.j,5,this.Pa),this.j.uninitialize(),_u(this.s,this.ab),_u(this.s,this.Va),_u(this.s,this.Oa),_u(this.s,this.Za),this.K.srcObject=null,this.Ea&&(this.Ea.srcObject=null)}signInTimeout(){this.C=0,dt.i("{93c7910}","{6d6b337}"),Zs(this,{code:3237093907})}vc(h){dt.i("{8ba4138}","{0b0c6f9}",h)}uc(h){this.G.za(void 0,h,"{8ba4138}.ts",0,0,!0),dt.e("{8ba4138}","{0b0c6f9}",h)}setUpstreamMedia(){return Promise.resolve(!1)}unsetUpstreamMedia(){return Promise.resolve(!1)}stopUpstreamMedia(){return Promise.resolve(!1)}qc(h){dt.d("{93c7910}","{4742d5e}"),h.candidate&&this.Ta++,!window.chrome&&this.g&&this.g.canTrickleIceCandidates&&this.g.onicecandidate&&iy(this,h,!0)}oc(){var h,ut;(h=this.h)===null||h===void 0||function(St){var xt=Co;if(xt.h){if(xt.perf.RAFTS!=0){var Ot={perf:xt.perf};xt.g&&xt.g.postMessage(Ot),L0(xt)}xt.perf.RAFTS=$a(xt)}if(!ep){if(xt=window.performance.now(),(Ot=St.va).getVideoPlaybackQuality){var Vt=Ot.getVideoPlaybackQuality();Ot={Ad:Vt.totalVideoFrames,bf:Vt.droppedVideoFrames}}else Ot=Ot.webkitDecodedFrameCount!==void 0?{Ad:Ot.webkitDecodedFrameCount,bf:(Vt=Ot.webkitDroppedFrameCount)!==null&&Vt!==void 0?Vt:0}:void 0;var Dt=Ot;if(Dt){const Ft=Dt.bf;Vt=Ft-St.v.droppedVideoFrames,Ot=Dt.Ad-St.v.totalVideoFrames,St.v.droppedVideoFrames=Ft,St.v.totalVideoFrames=Dt.Ad,Vt==1?St.V.Wd++:1<Vt&&(St.V.hd+=Vt),(Dt=Co).h&&(Dt.perf.FrameInfo=Math.min(Ot,15)<<4|Math.min(Vt,15))}St.v.Ag=xt}}(h),window.setTimeout(()=>{var St,xt;if(this.Z||window.requestAnimationFrame(this.Ka),!((St=this.m)===null||St===void 0)){var Ot=St.h;Ot.I===0&&Vo(Ot.l),xl&&vu&&St.l.ra()}(xt=this.h)===null||xt===void 0||ep||((St=window.performance.now())>xt.V.vd+1e4?(xt.V.vd!==0&&dt.i("{5cea617}","{5fa9066}",xt.V.Sc,xt.V.ld,xt.V.nd,xt.V.md,xt.v.totalVideoFrames-xt.V.Ue,xt.V.Wd,xt.V.hd,xt.V.Rc,xt.V.jd),xt.V.vd=St,xt.V.Ue=xt.v.totalVideoFrames,xt.V.Sc=1,xt.V.ld=0,xt.V.nd=0,xt.V.md=0,xt.V.Wd=0,xt.V.hd=0,xt.V.Rc=0,xt.V.jd=0):xt.V.Sc+=1)}),(ut=this.m)===null||ut===void 0||function(St){if(St.h.Vc){St.h.Vc=!1;var xt=St.g.sb,Ot=St.g.tb;if(St.cursorType===0)if(St.Z&&St.g.rb){var Vt=kv(St.h.wb/St.g.cursor.scale);St.h.bd&&(St.h.bd=!1,Iv(St,Vt));const Dt=St.g.cursor,Ft=St.h.wb;Vt/=Ft,xt=(xt*St.J.ma-Dt.Ha*Vt)*Ft,Ot=(Ot*St.J.ma-Dt.Ia*Vt)*Ft,St.ca||(xt=Math.round(xt),Ot=Math.round(Ot)),St.j.style.transform="translate("+xt/Ft+"px, "+Ot/Ft+"px)",St.h.od||(St.h.od=!0,St.j.style.visibility="visible")}else Pv(St)}}(ut.h)}toggleOnScreenStats(h=!1,ut){hn&&(Fl(this)?this.h.toggleOnScreenStats(h,ut):As(this,"Stats is OFF. Please enable by ctrl+alt+F5/F6"))}ja(){var h;if(!((h=this.h)===null||h===void 0)){var ut=Co;if(ut.h){const St={qosMarker:$a(ut)};ut.g&&ut.g.postMessage(St)}h.g.S++,(ut=h.g).M.innerText=hm(ut,h.M===2)}As(this,"User marker added")}toggleUserInput(h,ut){this.m?this.m.toggleUserInput(h,ut):dt.e("{93c7910}","{5a0e299}",h)}getVirtualGamepadHandler(){var h;return(h=this.m)===null||h===void 0?void 0:h.getVirtualGamepadHandler()}toggleStutterIndicator(h){this.stutterIndicator=h??!this.stutterIndicator,ts(this,{stutterIndicator:{on:this.stutterIndicator}})}Cb(){this.sa^=1,ts(this,{riDeviceOverlay:{bitmap:this.sa}})}Qc(){var h;(h=this.m)===null||h===void 0||h.Mc()}sendTextInput(h){var ut;(ut=this.m)===null||ut===void 0||ut.sendTextInput(h)}setVirtualKeyboardState(h){var ut;(ut=this.m)===null||ut===void 0||ut.setVirtualKeyboardState(h)}setVideoTransforms(h,ut,St){var xt;if(!((xt=this.m)===null||xt===void 0)){const Ot=window.visualViewport;Ot&&(xt.J.Pc=Ot.height),Xs(xt,h,ut,St)}}sendCustomMessage(h){ts(this,h={customMessage:JSON.stringify(h)})}setStreamingMaxBitrate(h,ut,St){St||(ts(this,{setMaxBitrate:{streamIndex:h,maxBitrate:ut}}),dt.d("{93c7910}","{6bbc1a2}",ut))}setDrcDfcState(h,ut,St){St||(ts(this,{setDrcState:{streamIndex:h,state:!!(1&ut)}}),ts(this,{setDfcState:{streamIndex:h,state:!!(2&ut)}}),dt.d("{93c7910}","{0ed76f3}",ut))}sendKeyEvent(h){var ut;(ut=this.m)===null||ut===void 0||ut.sendKeyEvent(h)}setKeyboardLayout(h){this.keyboardLayout=h,this.m?(this.sendCustomMessage({messageType:"kbLayout",messageRecipient:"KBLayoutChange",data:h}),this.m.setKeyboardLayout(h)):this.oa=!0}tc(){Fl(this)?oy(this,this.h.l):dt.w("{93c7910}","{76bcede}")}sc(){Fl(this)?ay(this,this.h.l):dt.w("{93c7910}","{20ab5a1}")}rc(){if(Fl(this)){var h=this.h.l;const ut=function(xt){switch(xt.o){case"nominal":return 20;case"fair":return 70;case"serious":return 85;case"critical":return 100}}(this.j),St={cpuUsage:{streamIndex:0,frameNumber:h,procCpuUsage:0,totalCpuUsage:ut}};dt.i("{93c7910}","{9bb3298}",ut.toString(),h),ts(this,St)}else dt.w("{93c7910}","{7b1f129}")}};function Is(h){var ut;return(ut=h==null?void 0:h.readyState)!==null&&ut!==void 0?ut:"connecting"}function Hl(h){return h.replace(/((ice-pwd|ufrag)(:|\s))((?!(\\|\s)).)*/g,"$1***")}function p0(h){const ut=RegExp('(candidate:[^"\\r\\n\\\\]+)(\\b\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\b)',"g");let St="";for(;St!==h;)St=h,h=h.replace(ut,"$1***");return h}function zl(h){dt.i("{0f7a7d0}","{206f492}"),h.m&&(window.clearInterval(h.m),h.m=0)}function dy(h){zl(h),h.g=new Date().getTime(),h.j=0,h.l=0,h.h=0,h.sleepTime=0,dt.i("{0f7a7d0}","{d5ff5ba}"),h.m=window.setInterval(()=>{try{let ut=new Date().getTime();1e4<ut-h.g-1e4&&(h.h=ut,h.sleepTime=h.h-h.g-1e4),1e4<ut-h.g-1e4&&h.j!=0?zu(h,0<h.g-h.l?"epsp":"esp"):36e5<ut-h.g&&zl(h),h.g=ut}catch{}},1e4)}function zu(h,ut){if(h.o!==h.subSessionId){var St=h.G,xt=$(h.j);ut=new ho({eventSequence:ut,sleepTime:h.sleepTime,error:xt,timeToSleep:h.g-h.l,moduleName:"RAGNAROK",cmsId:String(St.cmsId),sessionId:h.sessionId,subSessionId:h.subSessionId}),St.h(ut),h.o=h.subSessionId}zl(h)}function v0(h,ut){if(ut===15868704||ut===15859712)return zl(h),!1;let St=new Date().getTime();return h.j=ut,h.l=St,dt.i("{0f7a7d0}","{425293a}",String(St-h.g),h.h),1e4<St-h.g-1e4?(h.h=St,h.sleepTime=h.h-h.g-1e4,zu(h,"pse")):h.h!==0&&2e4>St-h.h?zu(h,"pspe"):ut!==15867909&&ut!==15867908||(h.h=St,zu(h,"other")),h.h!==0}var fy=class{constructor(h){this.subSessionId=this.sessionId="",this.g=0,this.o="",this.sleepTime=this.h=this.m=this.l=this.j=0,this.G=h}};function hy(h){let ut=document.createElement("div");return ut.id=h.Ed,ut.className="genericdiv",ut.style.display="grid",ut.style.gridTemplateColumns="1fr 1fr",ut.style.gridTemplateRows="1fr 1fr",h.visible=!0,(h=document.createElement("p")).id="instruction",h.style.color="white",h.style.position="fixed",h.innerHTML="Connect GamePads",h.style.top="0",ut.appendChild(h),ut}var py=class{constructor(){this.Ed="gamepadTester",this.visible=!1,this.xb=[],this.Xd=[],this.Zb=new Map,Yl&&(document.body.appendChild(hy(this)),this.start())}Eb(h){for(let ut=0;4>ut;ut++){const St=this.Zb.get(ut);St!==void 0&&!(h&1<<ut)&&(this.xb[St]=null,this.Zb.delete(ut))}}Of(h){for(let ut=0;ut<this.xb.length;ut++){let St=this.xb[ut];St&&St.dc&&St.ha==h&&(this.xb[ut]=null)}}$c(h,ut,St,xt,Ot,Vt,Dt,Ft,Qt){this.Zb.set(St,ut),this.xb[ut]={index:ut,ha:St,buttons:xt,qd:Ot,axes:Vt,name:Qt,dc:!1}}Wc(h,ut,St,xt,Ot,Vt,Dt,Ft){this.xb[h]={index:h,ha:ut,buttons:St,qd:xt,axes:Ot,name:Ft,dc:!0}}Uc(h){4>h.index&&(this.Xd[h.index]={index:h.index,ha:h.index,buttons:-1,qd:-1,axes:[-1],name:h.id,dc:!1})}Mc(h){let ut=document.getElementById(this.Ed);ut?(ut.remove(),this.xb=[],this.visible=!1):(h.insertAdjacentElement("afterend",hy(this)),this.start())}start(){let h,ut=document.getElementById(this.Ed);if(ut==null)dt.e("{e13a879}","{0c955af}");else{var St=.49*window.innerWidth,xt=.4*window.innerHeight,Ot=.3*St,Vt=.7*St,Dt=.8*xt,Ft=.8*xt,Qt=.07*St,rr=ir=>{ir.style.position="absolute",ir.style.width="2%",ir.style.height="3.5%",ir.style.backgroundColor="red",ir.style.borderRadius="50%",ir.style.transform="translate(-50%, -50%)"},nr=ir=>{let Xt=(Tr=>Tr?{left:{X:Tr.axes[0],Y:Tr.axes[1]},right:{X:Tr.axes[2],Y:Tr.axes[3]}}:null)(ir);if(ut.querySelector(`.gamepad${ir.index}`).querySelector(".leftStick")===null){var br=document.createElement("div");br.className="gamepadJoystickPointer leftStick",rr(br),br.style.left=`${Ot+Xt.left.X*Qt}px`,br.style.top=`${Dt+Xt.left.Y*Qt}px`,ut.querySelector(`.gamepad${ir.index}`).querySelector(".gamepadContainer").appendChild(br)}else(br=ut.querySelector(`.gamepad${ir.index}`).querySelector(".leftStick")).style.opacity="1",br.style.left=`${Ot+Qt*Xt.left.X}px`,br.style.top=`${Dt+Xt.left.Y*Qt}px`;ut.querySelector(`.gamepad${ir.index}`).querySelector(".rightStick")===null?((br=document.createElement("div")).className="gamepadJoystickPointer rightStick",rr(br),br.style.left=`${Vt+Xt.right.X*Qt}px`,br.style.top=`${Ft+Xt.right.Y*Qt}px`,ut.querySelector(`.gamepad${ir.index}`).querySelector(".gamepadContainer").appendChild(br)):((ir=ut.querySelector(`.gamepad${ir.index}`).querySelector(".rightStick")).style.opacity="1",ir.style.left=(Vt+Xt.right.X*Qt).toString()+"px",ir.style.top=(Ft+Xt.right.Y*Qt).toString()+"px")},lr=(ir,Xt,br,Tr)=>{var Sr=ir.getContext("2d");if(Sr){Sr.beginPath();var Mr=br===!0?1:br===!1?0:br;switch(Sr.fillStyle=br?Tr?"#006FCD":"#0e7a0d":"grey",br=gr=>{if(Sr){var _r=.12*Mr;Sr.rect(ir.width*gr,ir.height*(.12-_r+.07),.02*ir.width,ir.height*_r),Sr.closePath(),Sr.fill(),Sr.beginPath(),Sr.fillStyle="grey",Sr.rect(ir.width*gr,.07*ir.height,.02*ir.width,ir.height*(.12-_r))}},Xt){case 0:Sr.moveTo(.14*ir.width,.48*ir.height),Sr.lineTo(.19*ir.width,.48*ir.height),Sr.lineTo(.165*ir.width,.54*ir.height),Sr.lineTo(.14*ir.width,.48*ir.height);break;case 1:Sr.moveTo(.14*ir.width,.66*ir.height),Sr.lineTo(.19*ir.width,.66*ir.height),Sr.lineTo(.165*ir.width,.61*ir.height),Sr.lineTo(.14*ir.width,.66*ir.height);break;case 2:Sr.moveTo(.09*ir.width,.55*ir.height),Sr.lineTo(.09*ir.width,.61*ir.height),Sr.lineTo(.135*ir.width,.57*ir.height),Sr.lineTo(.09*ir.width,.55*ir.height);break;case 3:Sr.moveTo(.24*ir.width,.55*ir.height),Sr.lineTo(.24*ir.width,.61*ir.height),Sr.lineTo(.195*ir.width,.57*ir.height),Sr.lineTo(.24*ir.width,.55*ir.height);break;case 4:Sr.arc(.7*ir.width,.4*ir.height,.02*ir.width,0,2*Math.PI);break;case 5:Sr.arc(.3*ir.width,.4*ir.height,.02*ir.width,0,2*Math.PI);break;case 6:Sr.arc(.3*ir.width,.8*ir.height,.07*ir.width,0,2*Math.PI);break;case 7:Sr.arc(.7*ir.width,.8*ir.height,.07*ir.width,0,2*Math.PI);break;case 8:Sr.rect(.13*ir.width,.23*ir.height,.07*ir.width,.05*ir.height);break;case 9:Sr.rect(.815*ir.width,.23*ir.height,.07*ir.width,.05*ir.height);break;case 12:Sr.arc(.85*ir.width,.65*ir.height,.02*ir.width,0,2*Math.PI);break;case 13:Sr.arc(.9*ir.width,.55*ir.height,.02*ir.width,0,2*Math.PI);break;case 14:Sr.arc(.8*ir.width,.55*ir.height,.02*ir.width,0,2*Math.PI);break;case 15:Sr.arc(.85*ir.width,.45*ir.height,.02*ir.width,0,2*Math.PI);break;case-1:br(.155);break;case-2:br(.84);break;case 16:if(!Tr)break;Sr.arc(.5*ir.width,.5*ir.height,.02*ir.width,0,2*Math.PI);break;case 17:Tr&&(Sr.roundRect?Sr.roundRect(.395*ir.width,.085*ir.height,.21*ir.width,.18*ir.height,.02*ir.width):Sr.arc(.5*ir.width,.175*ir.height,.02*ir.width,0,2*Math.PI))}Sr.closePath(),Sr.fill()}},Yt=ir=>{if(ut.querySelector(`.gamepad${ir.index}`)===null){var Xt=document.createElement("div");Xt.className=`gamepad gamepad${ir.index}`,Xt.style.display="flex",Xt.style.flexDirection="column",Xt.style.justifyContent="space-between",Xt.style.height="98%";var br=document.createElement("p");br.className="active",br.style.margin="0px";var Tr=document.createElement("span");Tr.className="gamepadPlayerNumber",Tr.style.color="white",Tr.style.background=ir.dc?"#006FCD":"#0e7a0d",Tr.style.position="relative",Tr.style.marginRight="0.5vw",Tr.innerHTML=ir.dc?"S":"X",Tr.style.fontSize="1.5vw",br.appendChild(Tr),(Tr=document.createElement("span")).className="gamepadPlayerNumber",Tr.style.color="white",Tr.style.position="relative",Tr.innerHTML=`P${ir.index+1}|${ir.name}`,Tr.style.fontSize="1.5vw",br.appendChild(Tr),Xt.appendChild(br),(ir=document.createElement("div")).className="gamepadContainer",ir.style.position="relative",ir.style.width=`${St+2}px`,ir.style.height=`${xt}px`,(br=document.createElement("canvas")).className="canvas",br.width=St,br.height=xt,br.style.width=`${St}px`,br.style.height=`${xt}px`,br.style.border="1px solid white",ir.appendChild(br),Xt.appendChild(ir),ut.appendChild(Xt),(Xt=ut.querySelector("#instruction"))&&(Xt.style.display="none")}},dr=()=>{if(this.visible){for(let br=0;br<this.xb.length;br++){var ir=this.xb[br];if(ir){var Xt=ir.dc;ut.querySelector(`.gamepad${ir.index}`)||Yt(ir),nr(ir);let Tr=ut.querySelector(`.gamepad${ir.index}`).querySelector("canvas"),Sr=Xt?2:0;for(let Mr=0;16>Mr;Mr++)lr(Tr,Mr,!!(ir.buttons&1<<Mr),Xt);1<=Sr&&lr(Tr,16,65536&ir.buttons,Xt),2<=Sr&&lr(Tr,17,131072&ir.buttons,Xt),lr(Tr,-1,(255&ir.qd)/255,Xt),lr(Tr,-2,(ir.qd>>8&255)/255,Xt)}else this.Xd[br]?!ut.querySelector(`.gamepad${br}`)&&(Yt(this.Xd[br]),Xt=(ir=ut.querySelector(`.gamepad${br}`).querySelector("canvas")).getContext("2d"))&&(Xt.font="20px Arial",Xt.fillStyle="white",Xt.textAlign="center",Xt.fillText("Unsupported Gamepad",ir.width/2,ir.height/2)):((ir=ut.querySelector(`.gamepad${br}`))&&ut.removeChild(ir),1>=ut.childNodes.length&&(ir=ut.querySelector("#instruction"))&&(ir.style.display="block"))}h=window.requestAnimationFrame(dr)}else window.cancelAnimationFrame(h)};dr()}}Yc(){}Yb(){}};function vy(h){if(dt.i("{4c846ba}","{b11cb24}"),h.l){try{h.h=new MediaRecorder(h.l)}catch(ut){return void dt.e("{4c846ba}","{0d1420e}",ut)}h.h&&(h.h.onstart=()=>{},h.h.onstop=()=>{dt.i("{4c846ba}","{7a944b4}")},h.h.ondataavailable=ut=>{ut.data&&0<ut.data.size&&(h.s.push(ut.data),h.v.push(h.s),++h.m,h.s=[])},dt.i("{4c846ba}","{ffb713f}",h.h)),h.o=!1}else dt.e("{4c846ba}","{74475ae}")}function m0(h){var ut;(ut=h.h)===null||ut===void 0||ut.stop(),h.h=void 0,h.j!==0&&(window.clearTimeout(h.j),h.j=0)}function my(h){let ut;if(h.g==1)ut=18e5;else{if(h.g!=2)return;ut=3e3}h.h&&!h.o&&(h.h.start(),h.o=!0,h.j=window.setTimeout(()=>{dt.i("{4c846ba}","{2282d21}"),m0(h)},ut),dt.i("{4c846ba}","{4f438e3}"))}var gy=class{constructor(){this.o=!1,this.s=[],this.v=[],this.g=this.m=this.j=0}initialize(h){this.l=h}uninitialize(){m0(this),this.downloadAudio(),this.l=void 0,this.g=0}downloadAudio(){if(this.g!=0){for(let h=0;h<this.m;++h)vp(this.v[h],"audioCapture_"+h+".wmv","audio/webm")&&dt.i("{4c846ba}","{c24ed3b}");this.m=0,this.v=[]}}};function yy(h,ut){h.h=!1,h.j=!1,h.g=ut,h.g.onversionchange=()=>{dt.w("{10dc2cc}","{65276d8}"),h.close(),h.g=void 0},h.g.onclose=()=>{dt.w("{10dc2cc}","{342f7f8}"),h.h=!0,h.j=!0}}function Ku(h){return h.l?h.g?h.h?Jt(2,"Db is closing, unexpectedly: "+h.j+", visibility state hidden: "+(document.visibilityState==="hidden")):void 0:Jt(1,"Db not yet open"):Jt(17,"Indexdb object not found")}function by(h,ut){const St=Ku(h);return St?Promise.reject(St):new Promise((xt,Ot)=>{try{const Vt=h.g.transaction(ut,"readwrite"),Dt=Vt.objectStore(ut);Vt.oncomplete=()=>{dt.i("{10dc2cc}","{30f23d1}")};const Ft=Dt.clear();Ft.onsuccess=()=>{xt()},Ft.onerror=()=>{Ot(Jt(80,"clear method failed)",Vt.error))}}catch(Vt){Ot(Jt(81,"Unexpected Exception happened in clear",Vt))}})}function g0(h,ut){const St=Ku(h);return St?Promise.reject(St):new Promise((xt,Ot)=>{try{const Vt=h.g.transaction(ut,"readonly"),Dt=Vt.objectStore(ut);Vt.oncomplete=()=>{dt.i("{10dc2cc}","{59d1f78}")};const Ft=Dt.getAll();Ft.onsuccess=()=>{xt(Ft.result)},Ft.onerror=()=>{Ot(Jt(96,"getAll method failed",Vt.error))}}catch(Vt){Ot(Jt(97,"Unexpected Exception in getAll",Vt))}})}function y0(h,ut){if(h.g.commonData){var St=ut.gdprLevel;let xt=!1;h.g.commonData&&(St!=="functional"||h.g.commonData.deviceGdprFuncOptIn!=="Full"&&h.g.commonData.deviceGdprFuncOptIn!=="Temp"?(St==="technical"&&h.g.commonData.gdprTechOptIn==="Full"||St==="behavioral"&&h.g.commonData.gdprBehOptIn==="Full")&&(xt=!0):xt=!0),xt&&(window.navigator.onLine?function(Ot){var Vt,Dt,Ft,Qt;(Vt=Ot.config)!==null&&Vt!==void 0&&Vt.server&&(Dt=Ot.config)!==null&&Dt!==void 0&&Dt.version&&(Vt={method:"POST",headers:{"Content-Type":"application/json","X-Event-Protocol":(Qt=(Ft=Ot.commonData)===null||Ft===void 0?void 0:Ft.eventProtocol)!==null&&Qt!==void 0?Qt:"1.5"},body:JSON.stringify(Ot.commonData),retryCount:3,timeout:2e3},dt.i("{f7c1592}","{056661f}",Vt.body),It(_y(Ot.config),Vt).then(()=>{}).catch(()=>{}))}(w0(h,ut)):function(Ot,Vt){!Ot.j&&My(Vt)&&Ot.m.then(()=>Ot.l.set("telemetry-events",Vt)).then(()=>{dt.i("{f7c1592}","{f03d70b}")}).catch(Dt=>{const Ft=!Ot.F;Ot.F=!0,yl(Ot,Dt,"cacheTelemetryEventInDb",Ft)})}(h,{userId:h.g.commonData.userId,sessionId:h.g.commonData.sessionId,name:ut.name,eventPayload:ut}))}else h.C.push(ut)}function wy(h){var ut,St,xt;return(xt=(St=(ut=h.g)===null||ut===void 0?void 0:ut.telemetryEventIds)===null||St===void 0?void 0:St.streamingProfileGuid)!==null&&xt!==void 0?xt:""}function Sy(h){var ut,St,xt;return(xt=(St=(ut=h.g)===null||ut===void 0?void 0:ut.telemetryEventIds)===null||St===void 0?void 0:St.systemInfoGuid)!==null&&xt!==void 0?xt:""}function Ay(h,ut){var St,xt,Ot,Vt;let Dt=(St=ut.exitErrorCode)!==null&&St!==void 0?St:"";return ut.sleep?Dt="SleepExit":(xt=ut.connectivity)!==null&&xt!==void 0&&xt.startsWith("online")&&(Dt=(Ot=ut.connectivity)!==null&&Ot!==void 0?Ot:""),{name:(St=new em({zoneAddress:ut.zoneAddress,networkSessionId:(Vt=ut.networkTestSessionId)!==null&&Vt!==void 0?Vt:"",sessionId:ut.sessionId,subSessionId:ut.subSessionId,resumeType:bu(ut.isResume),overrideConfigType:ba.type,overrideConfigVersion:ba.version,exitReason:Dt,result:ut.exitErrorCode,frameCount:ut.frameCount,codec:yu(ut.codec),ipVersion:"UNKNOWN",streamDuration:Math.round(ut.streamDuration),networkType:sr(bs.getCurrentNetworkType()),streamingProfileGuid:wy(h),systemInfoGuid:Sy(h),cmsId:String(h.I)})).name,gdprLevel:St.gdprLevel,parameters:St.parameters,ts:St.ts,clientConfig:Nu}}function b0(h){dt.d("{f7c1592}","{badefed}",!0),function(ut){ut.j||ut.m.then(()=>by(ut.l,"exit-events")).then(()=>{dt.i("{f7c1592}","{1b8f127}")}).catch(St=>{yl(ut,St,"clearExitEventStoreInDb",!ut.s),ut.s||(ut.s=!0)})}(h),h.h.eventPayload=void 0}function yl(h,ut,St,xt){var Ot,Vt,Dt,Ft;dt.e("{f7c1592}","{146ec91}",St,$(ut.code),ut.description),xt&&(xt=(Dt=(Vt=(Ot=ut.error)===null||Ot===void 0?void 0:Ot.message)!==null&&Vt!==void 0?Vt:ut.description)!==null&&Dt!==void 0?Dt:`Exception in ${St}`,h.H?h.H(ut.error,xt,"telemetryeventprocessor.ts",ut.code,0,!0,(Ft=ut.error)===null||Ft===void 0?void 0:Ft.name):dt.w("{f7c1592}","{12e0846}"))}function w0(h,ut){let St={};if(!h.g.commonData)return St;const xt={name:ut.name,ts:ut.ts,parameters:ut.parameters};return Ey(St,h.g),(h=St.commonData).clientId=ut.clientConfig.clientId,h.eventSchemaVer=ut.clientConfig.eventSchemaVer,h.sentTs=new Date().toISOString(),h.events=[xt],St}function Ey(h,ut){h.commonData=ut.commonData?Object.assign({},ut.commonData):void 0,h.experiments=[],h.config=ut.config,h.telemetryEventIds=ut.telemetryEventIds}function _y(h){return h.server+"/"+h.version+"/events/json"}function Cy(h,ut){var St,xt,Ot;h.h.userId=(xt=(St=h.g.commonData)===null||St===void 0?void 0:St.userId)!==null&&xt!==void 0?xt:"",h.h.sessionId=(Ot=ut.parameters.sessionId)!==null&&Ot!==void 0?Ot:"",h.h.name=ut.name,h.h.eventPayload=ut}function Ty(h){var ut,St;(ut=h.config)!==null&&ut!==void 0&&ut.server&&(St=h.config)!==null&&St!==void 0&&St.version&&h.experiments&&(h.commonData&&(h.commonData.sentTs=new Date().toISOString()),ut=JSON.stringify(h.commonData),h=navigator.sendBeacon(_y(h.config),new Blob([ut],{type:"text/plain"})),dt.i("{f7c1592}","{b9367c5}",h,ut))}function My(h){return!!h.userId&&!!h.sessionId&&!!h.name}function Ry(h){return h.j||!My(h.h)?Promise.resolve():h.m.then(()=>h.l.set("exit-events",h.h)).then(()=>{dt.i("{f7c1592}","{5d026f8}")}).catch(ut=>{yl(h,ut,"cacheExitEventInDb",!h.o),h.o||(h.o=!0)})}function xy(h){h.j||window.navigator.onLine&&h.m.then(()=>g0(h.l,"telemetry-events")).then(ut=>{if(dt.i("{f7c1592}","{d4e574c}",ut.length),0<ut.length){(function(St){St.j||St.m.then(()=>by(St.l,"telemetry-events")).then(()=>{dt.i("{f7c1592}","{8f62936}")}).catch(xt=>{yl(St,xt,"clearEventStoreInDb",!St.v),St.v||(St.v=!0)})})(h);for(const St of ut)St.eventPayload&&y0(h,St.eventPayload)}}).catch(ut=>{dt.e("{f7c1592}","{aaaa3de}",ut.code,ut.description)})}function S0(h){if(h.g){const St=h.g.getSessionId(),xt=h.g.getSubSessionId();dt.d("{9d1820c}","{2fd42df}",St,xt);var ut=h.G;ut.subSessionId=xt,ut.v.clear(),ut.C=0,h.F.subSessionId=xt,(ut=h.G).sessionId=St,ut.H=0,h.F.sessionId=St,(h=h.m).o=!1,h.s=!1,h.F=!1,h.v=!1}}function ky(h,ut){var St,xt,Ot,Vt,Dt,Ft,Qt,rr,nr,lr;h.M&&(h.M=!1,h.framesDecoded=(xt=(St=h.D)===null||St===void 0?void 0:$l(St))!==null&&xt!==void 0?xt:0,St={sessionId:(Vt=(Ot=h.g)===null||Ot===void 0?void 0:Ot.getSessionId())!==null&&Vt!==void 0?Vt:"",subSessionId:(Ft=(Dt=h.g)===null||Dt===void 0?void 0:Dt.getSubSessionId())!==null&&Ft!==void 0?Ft:"",zoneName:(rr=(Qt=h.g)===null||Qt===void 0?void 0:Qt.getZoneName())!==null&&rr!==void 0?rr:"",zoneAddress:((nr=h.g)===null||nr===void 0?void 0:nr.getZoneAddress())||h.h.serverAddress,error:{code:ut}},Ot=Gu(h,St,performance.now()-h.startTime),Vu(h.j),(!h.D||!((lr=h.D)===null||lr===void 0)&&lr.H)&&E0(h,Ot),C0(h,ut),h.cancelSessionSetup())}function A0(h){h.I!==0&&(window.clearTimeout(h.I),h.I=0)}function E0(h,ut){A0(h);var St=h.G;let xt;xt=Ay(St.j,ut),im(St,xt),b0(St.j),ut=ut.streamDuration,document.visibilityState==="hidden"&&(h.o+=performance.now()-h.L),St=0,ut&&(St=Math.max(0,100*(ut-h.o)/ut)),To(h.G,"sessionVisibilityMetrics","",St,Math.round(ut),Math.round(h.o),0),h.o=0,h.L=0}function Gu(h,ut,St,xt,Ot){var Vt,Dt,Ft,Qt;return{exitErrorCode:ut.error?$(ut.error.code):$(15859712),sessionId:ut.sessionId,subSessionId:ut.subSessionId,zoneAddress:ut.zoneAddress,streamDuration:St,frameCount:h.framesDecoded,codec:(Dt=(Vt=h.D)===null||Vt===void 0?void 0:Ul(Vt))!==null&&Dt!==void 0?Dt:"UNKNOWN",isResume:h.isResume,connectivity:xt??"undefined",sleep:Ot!=null&&Ot,networkTestSessionId:(Qt=(Ft=h.v)===null||Ft===void 0?void 0:Ft.la.networkSessionId)!==null&&Qt!==void 0?Qt:""}}function Wu(h){var ut;Oy(h,$((ut=h.S)!==null&&ut!==void 0?ut:15867911));const St=h.I;Ry(h.m).then(()=>{St===h.I&&function(xt){A0(xt),xt.I=window.setTimeout(()=>Wu(xt),12e4)}(h)}).catch(()=>{dt.e("{9d1820c}","{204a7ac}")})}function Qu(h){return{code:3237093380,description:h+" called before initialize"}}function Iy(h,ut){var St,xt,Ot,Vt,Dt,Ft,Qt,rr,nr,lr,Yt;let dr={sessionId:(xt=(St=h.g)===null||St===void 0?void 0:St.getSessionId())!==null&&xt!==void 0?xt:"",subSessionId:(Vt=(Ot=h.g)===null||Ot===void 0?void 0:Ot.getSubSessionId())!==null&&Vt!==void 0?Vt:"",error:{code:3237089284,description:"Quitting due to exception"},streamInfo:(Dt=h.H)===null||Dt===void 0?void 0:Dt.streamInfo,zoneName:(Qt=(Ft=h.g)===null||Ft===void 0?void 0:Ft.getZoneName())!==null&&Qt!==void 0?Qt:"",zoneAddress:(nr=(rr=h.g)===null||rr===void 0?void 0:rr.getZoneAddress())!==null&&nr!==void 0?nr:"",gpuType:(Yt=(lr=h.g)===null||lr===void 0?void 0:lr.getGpuType())!==null&&Yt!==void 0?Yt:"",isResume:h.isResume};h.Gc(dr,!0),dt.e("{9d1820c}","{90f98fb}",ut),h.G.za(ut,"Exception happened in session call","{9d1820c}.ts",0,0,!0)}function w1(h,ut){var St=Pt();h.Gc({sessionId:"",subSessionId:St,error:ut,zoneName:"",zoneAddress:"",gpuType:"",isResume:h.isResume},!0)}function Py(h,ut,St,xt){if(h.H=void 0,h.aa=!1,h.g){Sp(h.C,St.la.additionalInputDevices),St.la.remoteControllersBitmap=wv(h.C);try{(function(Vt,Dt){Vt.j.I=Dt})(h.G,St.la.appId,St.la.shortName),h.startTime=performance.now(),dy(h.F),dt.d("{9d1820c}","{892168d}",hr(JSON.stringify(St.la)));const Ot=h.g;Ot.putOrPostSession(St.la,ut,xt).then(Vt=>(S0(h),dt.d("{9d1820c}","{92a2573}",Vt==null?void 0:Vt.sessionId,Vt==null?void 0:Vt.subSessionId),(Vt==null?void 0:Vt.state)==="ready_for_connection"?(dt.d("{9d1820c}","{2042e0a}"),h.H=Vt,new Promise(Dt=>{Dt(Vt)})):Ot.getSession(Vt.sessionId,!0))).then(Vt=>{h.H=Vt,dt.d("{9d1820c}","{315afdc}",Vt==null?void 0:Vt.sessionId),h.startStreaming(St)}).catch(Vt=>{var Dt,Ft,Qt,rr,nr,lr;if(S0(h),Vt.code){Vt.code!=15867905&&Vt.code!=15867906||!Ot.getSessionId()||h.aa||h.sendDeleteRequest(Ot.getSessionId(),Ot),dt.e("{9d1820c}","{09efe49}",$(Vt.code));let Yt={sessionId:(Dt=Ot.getSessionId())!==null&&Dt!==void 0?Dt:"",subSessionId:(Ft=Ot.getSubSessionId())!==null&&Ft!==void 0?Ft:"",error:Vt,sessionList:Vt.sessionList,streamInfo:(Qt=h.H)===null||Qt===void 0?void 0:Qt.streamInfo,zoneName:(rr=Ot.getZoneName())!==null&&rr!==void 0?rr:"",zoneAddress:(nr=Ot.getZoneAddress())!==null&&nr!==void 0?nr:"",gpuType:(lr=Ot.getGpuType())!==null&&lr!==void 0?lr:"",isResume:h.isResume};h.Gc(Yt,!0)}else Iy(h,Vt)})}catch(Ot){Iy(h,Ot)}}else h.emit("SessionStartResult",{sessionId:"",subSessionId:"",zoneName:"",zoneAddress:"",gpuType:"",isResume:h.isResume,error:Qu(h.isResume?"Resume":"Start")})}function Oy(h,ut){var St,xt,Ot,Vt,Dt,Ft,Qt,rr,nr,lr=h.m,Yt=(xt=(St=h.g)===null||St===void 0?void 0:St.getSessionId())!==null&&xt!==void 0?xt:"";St=(Vt=(Ot=h.g)===null||Ot===void 0?void 0:Ot.getSubSessionId())!==null&&Vt!==void 0?Vt:"",Ot=((Dt=h.g)===null||Dt===void 0?void 0:Dt.getZoneAddress())||h.h.serverAddress,Dt=(Qt=(Ft=h.D)===null||Ft===void 0?void 0:$l(Ft))!==null&&Qt!==void 0?Qt:0,Ft=(nr=(rr=h.D)===null||rr===void 0?void 0:Ul(rr))!==null&&nr!==void 0?nr:"UNKNOWN",Cy(lr,h=Ay(lr,{exitErrorCode:ut,sessionId:Yt,subSessionId:St,zoneAddress:Ot,streamDuration:performance.now()-h.startTime,frameCount:Dt,codec:Ft,isResume:h.isResume,connectivity:"",sleep:!1,networkTestSessionId:""}))}function Vy(h){h.T&&(window.clearTimeout(h.T),h.T=0)}function _0(h){window.removeEventListener("pagehide",h.ja),window.removeEventListener("online",h.ea),document.removeEventListener("visibilitychange",h.ka),navigator.mediaDevices&&navigator.mediaDevices.removeEventListener("devicechange",h.W),it(h.u)&&(document.removeEventListener("SystemIdle",h.ga),Vy(h))}function Ny(h,ut){h.S=void 0,xy(h.m),h.M=!0,window.addEventListener("pagehide",h.ja),window.addEventListener("online",h.ea),document.addEventListener("visibilitychange",h.ka),navigator.mediaDevices&&navigator.mediaDevices.addEventListener("devicechange",h.W),h.isResume=ut,h.P&&qo(h.G,"SessionSetupInProgressError",h.isResume?"resume":"start"),h.P=!0}function Ly(h,ut){var St,xt,Ot;if((ut={la:Object.assign({},ut),ce:[]}).la.streamParams)for(const Ft of ut.la.streamParams){const Qt=document.getElementById(Ft.videoTagId);if(Qt==null||!(Qt instanceof HTMLVideoElement))return void w1(h,{code:3237094400,description:"Didn't find video element for videoTagId: "+Ft.videoTagId});ut.ce.push({K:Qt})}if(ut.la.keyboardLayout=(St=ut.la.keyboardLayout)!==null&&St!==void 0?St:lt(h.u)?"m-us":"en_US",ut.la.appLaunchMode!==void 0&&ut.la.appLaunchMode!==0||(ut.la.appLaunchMode=Nt()||Gt(h.u)||h.u.os==="Xbox"?1:0),Pr)if(ut.la.metaData)for(const Ft in Pr)ut.la.metaData[Ft]=Pr[Ft];else ut.la.metaData=Pr;ko!==void 0&&(ut.la.appLaunchMode=ko,dt.d("{9d1820c}","{c4969b1}",ko));const Vt=!!Os&&!!Vs,Dt=!!Rs;return(Vt||Dt)&&((xt=ut.la.streamParams)===null||xt===void 0||xt.forEach(Ft=>{Vt&&(Ft.width=Os,Ft.height=Vs),Dt&&(Ft.fps=Rs)}),(Ot=ut.la.monitorSettings)===null||Ot===void 0||Ot.forEach(Ft=>{Vt&&(Ft.widthInPixels=Os,Ft.heightInPixels=Vs),Dt&&(Ft.framesPerSecond=Rs)}),Vt&&dt.i("{9d1820c}","{92a6b38}",Os,Vs),Dt&&dt.d("{9d1820c}","{6618bcd}",Rs)),h.v=ut,h.v}function C0(h,ut){h.D&&(h.D.stop(ut),h.D=void 0)}function Yu(h,ut,St){var xt,Ot;ut={sessionId:ut,subSessionId:(Ot=(xt=h.g)===null||xt===void 0?void 0:xt.getSubSessionId())!==null&&Ot!==void 0?Ot:"",framesDecoded:h.framesDecoded,error:St},T0(h),s(h.u)&&h.l&&(dt.d("{9d1820c}","{b9b1288}"),h.setMicRecordingEnabled(!1)),h.emit("SessionStopResult",ut)}function T0(h){ys&&(window.ios15AudioContext&&(window.ios15AudioContext.close(),window.ios15AudioContext=void 0,dt.i("{9d1820c}","{0ac2a42}")),window.ios15AudioStream=void 0,navigator.mediaDevices&&h.O&&navigator.mediaDevices.removeEventListener("devicechange",h.O))}function Dy(h,ut){h.P=!1,ut.error&&(h.M=!1,_0(h)),h.emit("SessionStartResult",ut)}function By(h,ut,St,xt){var Ot,Vt,Dt,Ft;T0(h),xt&&((Ot=xt.connectivity)!==null&&Ot!==void 0&&Ot.startsWith("offline")||(Vt=xt.connectivity)!==null&&Vt!==void 0&&Vt.startsWith("timeout")?(A0(h),Oy(h,$((Ft=(Dt=ut.error)===null||Dt===void 0?void 0:Dt.code)!==null&&Ft!==void 0?Ft:15867911)),Ry(h.m).catch(()=>{dt.e("{9d1820c}","{0c2de99}")})):E0(h,xt)),C0(h,ut.error?ut.error.code:15859712),St?Dy(h,ut):(ut.error&&(St=H0(ut.error.code,h.u),ut.isResumable=St,dt.i("{9d1820c}","{723f7be}",St)),h.M=!1,h.P=!1,_0(h),h.emit("StreamStopped",ut))}function Fy(h,ut){let St={errorCode:ut??15859712,connectivity:"online"};if(ut&&(!((3237093888^ut)>>8)||ut===3237089282)){let xt=1500;Qn.connectivityCheckTimeout&&Qn.connectivityCheckTimeout!==0&&(xt=Qn.connectivityCheckTimeout,dt.i("{9d1820c}","{f9909d8}",xt)),h=(window.location.protocol==="http:"?"http://":"https://")+h.h.serverAddress,dt.i("{9d1820c}","{df38106}",h);const Ot=performance.now();return Bt(h,xt).then(Vt=>(St.connectivity=200<=Vt.status&&300>Vt.status||Vt.status==403?"online("+String(25*Math.ceil((performance.now()-Ot)/25))+")":"offline_wrong_status("+String(Vt.status)+")",St)).catch(Vt=>(Vt.name==="AbortError"?St.connectivity="timeout":(St.connectivity="offline("+Vt.name+":"+Vt.message+")",St.errorCode=U0(ut)),St))}return Promise.resolve(St)}performance.mark("GfnRBegin");var S1=At.LogImpl;function Kl(h,ut,St){var xt;if(h.streamingState!==4&&h.streamingState!==0){var Ot=h.streamingState;h.streamingState=4,zl(h.l),To(jo,"HotPlug","",0,h.o,0,0),s(h.u)&&h.m&&(dt.d("{0a9be04}","{b9b1288}"),h.captureMic(!1)),Vu(h.g),(xt=h.D)===null||xt===void 0||xt.stop(ut),v0(h.l,ut)&&(ut=fp(ut,h.u)),function(Vt,Dt){let Ft={errorCode:Dt??15859712,connectivity:"online"};if(Dt&&(!((3237093888^Dt)>>8)||Dt===3237089282)){let Qt=1500;Qn.connectivityCheckTimeout&&Qn.connectivityCheckTimeout!==0&&(Qt=Qn.connectivityCheckTimeout,dt.i("{0a9be04}","{f9909d8}",Qt)),Vt=(window.location.protocol==="http:"?"http://":"https://")+Vt.zoneAddress,dt.i("{0a9be04}","{df38106}",Vt);const rr=performance.now();return Bt(Vt,Qt).then(nr=>(Ft.connectivity=200<=nr.status&&300>nr.status||nr.status==403?"online("+String(25*Math.ceil((performance.now()-rr)/25))+")":"offline_wrong_status("+String(nr.status)+")",Ft)).catch(nr=>(nr.name==="AbortError"?Ft.connectivity="timeout":(Ft.connectivity="offline("+nr.name+":"+nr.message+")",Ft.errorCode=U0(Dt)),Ft))}return Promise.resolve(Ft)}(h,ut).then(Vt=>{if(ut=Vt.errorCode,Ot!==1){var Dt,Ft,Qt,rr,nr={code:ut,isResumable:H0(ut,h.u),reason:3},lr=new Set([3237093892,15867907,3237093896,3237093897,3237093898,3237093899,3237093900,3237093895,3237093901,3237093906,3237093929,15867908,15868418,3237094151,3237094158]);St?nr.reason=0:lr.has(ut)?nr.reason=2:(268435200&ut)==15868672&&(nr.reason=1),h.h.onStreamStopped(nr),lr=Vt.connectivity,nr=Vt=$(ut||15859712),lr!=null&&lr.startsWith("online")&&(nr=lr??""),lr=performance.now()-h.startTime;const Mr=(Ft=(Dt=h.D)===null||Dt===void 0?void 0:Ul(Dt))!==null&&Ft!==void 0?Ft:"UNKNOWN";var Yt,dr,ir;Dt=(rr=(Qt=h.D)===null||Qt===void 0?void 0:$l(Qt))!==null&&rr!==void 0?rr:0,rr=new em({zoneAddress:(Qt=jo).zoneAddress,sessionId:Qt.sessionId,subSessionId:Qt.subSessionId,resumeType:bu(Qt.isResume),cmsId:Qt.cmsId,overrideConfigType:ba.type,overrideConfigVersion:ba.version,exitReason:nr,result:Vt,frameCount:Dt,codec:yu(Mr),ipVersion:"UNKNOWN",streamDuration:Math.round(lr),networkType:sr(bs.getCurrentNetworkType()),streamingProfileGuid:(Yt=Qt.telemetryEventIds.streamingProfileGuid)!==null&&Yt!==void 0?Yt:"",systemInfoGuid:(dr=Qt.telemetryEventIds.systemInfoGuid)!==null&&dr!==void 0?dr:"",networkSessionId:(ir=Qt.telemetryEventIds.networkTestId)!==null&&ir!==void 0?ir:""}),Qt.h(rr,!0)}var Xt,br,Tr,Sr;$y(h),M0(h),h.D=void 0,h.startTime=0,h.isResume=!1,h.P=void 0,h.C=0,h.o=0,h.sessionId="",h.subSessionId="",h.zoneAddress="",h.zoneName="",h.K=void 0,h.Ea=void 0,h.m=!1,h.appId=0,h.setSupportedHidTypes(0),h.setGamepadRsdmm(!1),h.l.sessionId="",h.l.subSessionId="",Yt=(br=(Xt=(dr=window.zoneless)==null?void 0:dr.windowRemoveEventListener)===null||Xt===void 0?void 0:Xt.bind(window))!==null&&br!==void 0?br:window.removeEventListener.bind(window),Xt=(Sr=(Tr=dr==null?void 0:dr.documentRemoveEventListener)===null||Tr===void 0?void 0:Tr.bind(document))!==null&&Sr!==void 0?Sr:document.removeEventListener.bind(document),Yt("pagehide",h.M),Yt("error",h.L),Xt("visibilitychange",h.N),navigator.mediaDevices&&navigator.mediaDevices.removeEventListener("devicechange",h.F),it(h.u)&&(Xt("SystemIdle",h.I),M0(h))})}}function $y(h){ys&&(window.ios15AudioContext&&(window.ios15AudioContext.close(),window.ios15AudioContext=void 0,dt.i("{0a9be04}","{0ac2a42}")),window.ios15AudioStream=void 0,navigator.mediaDevices&&h.s&&navigator.mediaDevices.removeEventListener("devicechange",h.s))}function M0(h){h.v&&(window.clearTimeout(h.v),h.v=0)}performance.mark("GfnNskBegin"),window.Ragnarok=window.Ragnarok||{},window.Ragnarok.GridApp=class extends or{constructor(h){super(),this.u=h,this.l=this.Z=!1,this.da=new py,this.P=!1,this.O=this.W=void 0,this.fa=!1,this.R=this.L=this.T=this.I=0,this.aa=this.M=!1,this.o=0,dt.isCallbackRegistered()||dt.setLogCallback(this.$.bind(this)),this.h={clientIdentification:"GFN-PC",clientVersion:"29.0",deviceHashId:"",serverAddress:""},this.startTime=performance.now(),this.ja=this.ra.bind(this),this.ea=this.xa.bind(this),this.ka=this.Da.bind(this),this.ya=this.qa.bind(this),this.framesDecoded=0,this.m=new class{constructor(){this.h={userId:"",sessionId:"",eventPayload:void 0,name:""},this.g={},this.v=this.F=this.s=this.o=!1,this.I="",this.C=[],this.j=!1,this.l=new class{constructor(){this.l=window.indexedDB,this.version=2,this.j=this.h=!1,this.name="ragnarok",this.m=[{Yf:"exit-events",pd:{keyPath:["userId","sessionId","name"]},Xf:"exit-event-index"},{Yf:"telemetry-events",pd:{keyPath:["userId","sessionId","name","eventPayload.ts"]},Xf:"telemetry-event-index"}]}open(){return new Promise((ut,St)=>{try{if(this.l){let xt=this.l.open(this.name,this.version);xt.onerror=()=>{St(Jt(18,`${this.name} db opening failed`,xt.error))},xt.onsuccess=()=>{yy(this,xt.result),ut()},xt.onupgradeneeded=Ot=>{dt.i("{10dc2cc}","{1f70767}",Ot.oldVersion,Ot.newVersion),yy(this,xt.result);const Vt=Dt=>{var Ft;const Qt=(Ft=this.g)===null||Ft===void 0?void 0:Ft.createObjectStore(Dt.Yf,Dt.pd);Dt.pd.keyPath&&(Qt==null||Qt.createIndex(Dt.Xf,Dt.pd.keyPath,{unique:!0}))};switch(Ot.oldVersion){case 0:Vt(this.m[0]);case 1:Vt(this.m[1])}},xt.onblocked=()=>{St(Jt(19,`${this.name} db blocked during opening`,xt.error))}}else St(Jt(17,"Indexdb object not found"))}catch(xt){St(Jt(20,"Unexpected Exception in open",xt))}})}get(ut,St){const xt=Ku(this);return xt?Promise.reject(xt):new Promise((Ot,Vt)=>{try{const Dt=this.g.transaction(ut,"readonly"),Ft=Dt.objectStore(ut);Dt.oncomplete=()=>{dt.i("{10dc2cc}","{82638ba}")};const Qt=Ft.get(St);Qt.onsuccess=()=>{Ot(Qt.result)},Qt.onerror=()=>{Vt(Jt(32,"get method failed",Dt.error))}}catch(Dt){Vt(Jt(33,"Unexpected Exception happened in get",Dt))}})}set(ut,St){const xt=Ku(this);return xt?Promise.reject(xt):new Promise((Ot,Vt)=>{try{const Dt=this.g.transaction(ut,"readwrite"),Ft=Dt.objectStore(ut);Dt.oncomplete=()=>{dt.i("{10dc2cc}","{f993875}")};const Qt=Ft.put(St);Qt.onsuccess=()=>{Ot()},Qt.onerror=()=>{Vt(Jt(48,"put method failed",Dt.error))}}catch(Dt){Vt(Jt(49,"Unexpected Exception happened in set",Dt))}})}close(){var ut;this.h=!0,(ut=this.g)===null||ut===void 0||ut.close()}},this.m=this.l.open().catch(ut=>{this.j=!0,yl(this,ut,"TelemetryEventProcessorConstruction",!0)})}updateEventDataElements(ut){var St;if(Ey(this.g,ut),this.g.commonData){dt.d("{f7c1592}","{66f209c}");for(let xt of this.C)y0(this,xt);this.C=[]}this.h.userId=(St=this.g.commonData)===null||St===void 0?void 0:St.userId}},this.G=new i1(this,this.m),this.F=new fy(this.G),this.isResume=!1,this.N=Ts,this.ca=new gy,window.addEventListener("error",this.ya),h=window.zoneless,this.j=new Xv(this.u,this.G),this.O=this.j.j.bind(this.j),this.W=this.na.bind(this),this.C=new Sv(this.u,h),Yl&&(this.C.l.push(this.da),xp(this.C)),this.ga=this.oa.bind(this),Zr(this.G),function(ut){var St,xt,Ot;if(Qn.sendNonEssentialMetricEvents){var Vt=performance.getEntriesByName("GfnJsInitStart")[0];const Dt=performance.getEntriesByName("platformBegin")[0],Ft=performance.getEntriesByName("GfnRBegin")[0],Qt=performance.getEntriesByType("navigation");Vt=Math.round((St=Vt==null?void 0:Vt.startTime)!==null&&St!==void 0?St:-1),St=Math.round((xt=Dt==null?void 0:Dt.startTime)!==null&&xt!==void 0?xt:-1),To(ut.G,"PerformanceTiming","application timings",Vt,St,Math.round((Ot=Ft==null?void 0:Ft.startTime)!==null&&Ot!==void 0?Ot:-1),St-Vt),Qt.length?(xt=Qt[Qt.length-1],To(ut.G,"PerformanceTiming","load timings",Math.round(xt.loadEventStart),Math.round(xt.loadEventEnd),Math.round(xt.domContentLoadedEventStart),Math.round(xt.domContentLoadedEventEnd))):To(ut.G,"PerformanceTiming","navigation timings unsupported",0,0,0,0)}}(this),function(ut){if(navigator.mediaCapabilities){var St=performance.now();ks("h264").then(async xt=>{if(xt){xt=ks("h264; profile-level-id=640033",2560,1440,60);var Ot=ks("h264; profile-level-id=64e033",2560,1440,60);xt=Bs(await xt),Ot=Bs(await Ot);const Ft=performance.now()-St;var Vt=Wp(),Dt=ks("h264",1920,1080,120);Vt=Bs(await Vt),Dt=Bs(await Dt);const Qt=await au(Bl),rr=await cm();dt.d("{9d1820c}","{1efbc27}",Qt,rr),To(ut.G,"DisplayCaps","Is120FpsSupported: "+rr,Qt,0,0,0),To(ut.G,"MediaCapabilities","codec 5.1: "+xt+" 5.1 constrained: "+Ot+" AV1: "+Vt,Ft,Dt,xt|Ot,Math.round(window.screen.height))}else To(ut.G,"MediaCapabilities","webrtc unsupported",performance.now()-St,-1,-1,-1)})}else To(ut.G,"MediaCapabilities","API unsupported",-1,-1,-1,-1)}(this),Qn.sendNonEssentialMetricEvents&&To(this.G,"PlatformDetailsExecutionTime","",this.u.totalTime,0,0,0),bs.registerCallback(ut=>{var St;(St=this.g)===null||St===void 0||St.setNetworkType(ut)}),this.u.deviceModel==="VISIONPRO"&&(x0=!0,V0())}qa(h){var ut;return dt.e("{9d1820c}","{8516485}",h.filename,h.lineno,h.colno),this.G.za(h.error,h.error&&h.error.message?h.error.message:h.message,h.filename,h.lineno,h.colno,!1),((ut=Qn.terminateUnhandledException)===null||ut===void 0||ut)&&ky(this,3237093392),!1}ra(){var h,ut;this.fa||(this.fa=!0,ky(this,((h=this.S)!==null&&h!==void 0?h:(ut=this.D)!==null&&ut!==void 0&&ut.H)?15867912:15867905))}xa(){dt.i("{9d1820c}","{a9a135f}"),xy(this.m)}Da(){var h;if(dt.i("{9d1820c}","{478a408}",document.visibilityState,!!this.D),this.D){var ut=this.v.ce[0].K,St=jt(this.u,!1,15,4)&&lp,xt=jt(this.u,!1,15,4)&&this.l&&sp;document.visibilityState==="hidden"?(this.L=performance.now(),St&&(dt.i("{9d1820c}","{cbd3b6e}"),ut.muted=!0),Wu(this)):document.visibilityState==="visible"&&(this.o+=performance.now()-this.L,St&&(dt.i("{9d1820c}","{05deefa}"),ut.muted=!1),xt?(ut=(h=Qn.userTerminatedMicRecorderThreshold)!==null&&h!==void 0?h:2e3,this.L-this.j.O<ut?(dt.i("{9d1820c}","{862bd20}"),this.j.I=!0,this.setMicRecordingEnabled(!0)):this.l=!1):jt(this.u,!1,15,4)&&!this.j.o&&Kp(this.j)&&this.j.F&&Pu(this.j,"visibilityChange"))}}wa(h){dt.d("{9d1820c}","{972bb72}",JSON.stringify(h)),Gp(this.G,h)}ta(h){this.emit("ActiveSessionsResult",h)}ua(h){this.emit("ProgressUpdate",h)}va(h){this.emit("SessionUpdate",h)}initialize(h,ut=Ts){var St,xt,Ot,Vt,Dt,Ft,Qt,rr,nr,lr,Yt,dr,ir,Xt;if(dt.i("{9d1820c}","{2569364}","0.66.9"),dt.d("{9d1820c}","{e85ad66}",navigator.userAgent),!h)return dt.e("{9d1820c}","{a98b177}"),!1;Object.assign(this.h,h),(St=this.g)===null||St===void 0||St.uninitialize(),!this.h.serverAddress||b(this.h.serverAddress)?(dt.d("{9d1820c}","{e2d9a04}"),this.g=new zs):this.g=new Ps(this.u,!0),h=this.g,dt.d("{9d1820c}","{3c652b7}"),S0(this),h.addListener("TelemetryEvent",this.wa.bind(this)),h.addListener("Log",this.$.bind(this)),h.addListener("ActiveSessionsResult",this.ta.bind(this)),h.addListener("ProgressUpdate",this.ua.bind(this)),h.addListener("SessionUpdate",this.va.bind(this)),this.h.clientHeaders=(rr=this.h.clientHeaders)!==null&&rr!==void 0?rr:new Map,(St=(rr=No||this.h.clientType||"BROWSER")!=="NATIVE")&&this.h.clientHeaders.set("nv-browser-version",this.u.browserFullVer);var br=this.h.clientHeaders;for(var[Tr]of br){const Sr=Tr;_o&&Sr.toLowerCase()==="nv-device-os"&&br.set(Sr,_o),Lo&&Sr.toLowerCase()==="nv-device-type"&&br.set(Sr,Lo),dp.deviceModel&&Sr.toLowerCase()==="nv-device-model"&&br.set(Sr,dp.deviceModel),$o&&Sr.toLowerCase()==="nv-client-streamer"&&br.set(Sr,$o),Bo&&Sr.toLowerCase()==="nv-client-id"&&br.set(Sr,Bo)}return Tr={deviceOs:(nr=_o)!==null&&nr!==void 0?nr:this.u.deviceOS,deviceOsVer:this.u.osVer,deviceType:(lr=Lo)!==null&&lr!==void 0?lr:this.u.deviceType,deviceModel:(Yt=dp.deviceModel)!==null&&Yt!==void 0?Yt:this.u.deviceModel,clientIdentification:(dr=this.h.clientIdentification)!==null&&dr!==void 0?dr:"GFN-PC",clientVersion:(ir=this.h.clientVersion)!==null&&ir!==void 0?ir:"29.0",clientAppVersion:this.h.clientAppVersion,clientStreamer:(Xt=$o)!==null&&Xt!==void 0?Xt:"WEBRTC",clientId:Bo||this.h.clientId,browserType:St?this.u.browser.toUpperCase():void 0,clientPlatformName:Ho||"browser",clientType:rr,deviceHashId:this.h.deviceHashId,serverAddress:this.h.serverAddress,authTokenCallback:this.h.authTokenCallback,clientHeaders:this.h.clientHeaders},h.initialize(Tr),h.setNetworkType(bs.getCurrentNetworkType()),this.N={...ut},(xt=(Dt=this.N).windowedStreaming)!==null&&xt!==void 0||(Dt.windowedStreaming=this.h.windowedStreaming),(Ot=(Ft=this.N).windowedStreaming)!==null&&Ot!==void 0||(Ft.windowedStreaming=ut.cursorType===2),(Vt=(Qt=this.N).cursorType)!==null&&Vt!==void 0||(Qt.cursorType=this.h.cursorType),this.G.clientShutDownCallback=this.h.clientShutDownCallback,!0}downloadAudio(){this.ca.downloadAudio()}updateEventDataElements(h){var ut;dt.i("{9d1820c}","{4008dc4}",JSON.stringify(h)),this.m.updateEventDataElements(h),h.telemetryEventIds&&((ut=this.g)===null||ut===void 0||ut.updateTelemetryEventIds(h.telemetryEventIds)),this.D&&!this.P&&Wu(this)}getActiveSessions(){this.g?this.g.getAllActiveSessions():this.emit("ActiveSessionsResult",{sessionList:[],error:Qu("ActiveSessions")})}startSession(h){Ny(this,!1),(h=Ly(this,h))&&Py(this,0,h)}updateAdState(h){var ut;return this.g?(ut=this.g)===null||ut===void 0?void 0:ut.updateAdState(h):3237093380}getSession(h){this.g?this.g.getSession(h,!1).then(ut=>{var St,xt;let Ot={sessionId:(St=ut==null?void 0:ut.sessionId)!==null&&St!==void 0?St:"",appId:ut==null?void 0:ut.appId,subSessionId:(xt=ut==null?void 0:ut.subSessionId)!==null&&xt!==void 0?xt:"",state:ut==null?void 0:ut.state,status:ut==null?void 0:ut.state};this.emit("GetSessionResult",Ot)}).catch(ut=>{var St,xt;let Ot={sessionId:h,subSessionId:(xt=(St=this.g)===null||St===void 0?void 0:St.getSubSessionId())!==null&&xt!==void 0?xt:"",error:ut};this.emit("GetSessionResult",Ot)}):this.emit("GetSessionResult",{sessionId:"",subSessionId:"",error:Qu("GetSession")})}resume(){this.resumeSession(this.v.la,this.g.getSessionId())}resumeSession(h,ut){Ny(this,!0),(h=Ly(this,h))&&Py(this,2,h,ut)}stopSession(h,ut){var St,xt,Ot,Vt,Dt,Ft,Qt;this.g?(ut!==void 0&&dt.i("{9d1820c}","{ae7f61b}",$(ut)),h===this.g.getSessionId()||h===void 0?(ut===15867910?this.aa=!0:this.Z=!1,Vu(this.j),this.framesDecoded=(xt=(St=this.D)===null||St===void 0?void 0:$l(St))!==null&&xt!==void 0?xt:0,zl(this.F),St=Gu(this,{sessionId:(Ot=this.g.getSessionId())!==null&&Ot!==void 0?Ot:"",subSessionId:(Vt=this.g.getSubSessionId())!==null&&Vt!==void 0?Vt:"",error:ut?{code:ut}:void 0,zoneName:(Dt=this.g.getZoneName())!==null&&Dt!==void 0?Dt:"",zoneAddress:this.g.getZoneAddress()||this.h.serverAddress,gpuType:(Ft=this.g.getGpuType())!==null&&Ft!==void 0?Ft:"",isResume:this.isResume},performance.now()-this.startTime),h=(Qt=this.g.getSessionId())!==null&&Qt!==void 0?Qt:"",this.D?(this.M=!1,_0(this),this.D.H&&E0(this,St),C0(this,ut??(this.D.H?15859712:15867905)),ut===15867910?(dt.d("{9d1820c}","{12bc45e}",h),Yu(this,h)):this.sendDeleteRequest(h,this.g)):this.H?Yu(this,h):this.cancelSessionSetup()):h&&this.sendDeleteRequest(h,this.g)):this.emit("SessionStopResult",{sessionId:"",subSessionId:"",error:Qu("StopSession")})}pauseSession(h){this.stopSession(h,15867910)}startStreaming(h){var ut,St,xt,Ot;const Vt={sessionId:(St=(ut=this.g)===null||ut===void 0?void 0:ut.getSessionId())!==null&&St!==void 0?St:"",subSessionId:(Ot=(xt=this.g)===null||xt===void 0?void 0:xt.getSubSessionId())!==null&&Ot!==void 0?Ot:"",progressState:"StartingStreamer",queuePosition:0,eta:0,ads:[]};this.emit("SessionUpdate",Vt),this.emit("ProgressUpdate",{...Vt,state:Vt.progressState}),ut=b(this.h.serverAddress)?"":this.h.serverAddress.split(".")[0];const{K:Dt}=h.ce[0];if(jt(this.u,!1,15)){Dt.ragnarokOldPlay||(Dt.ragnarokOldPlay=Dt.play);const Ft=Jl&&jt(this.u,!0,15,1);Dt.play=()=>{if(ys&&(dt.i("{9d1820c}","{4a5b360}"),T0(this),function(Qt){if(ys)if(window.ios15AudioContext)dt.i("{9d1820c}","{e2aba64}");else{var rr=new(window.AudioContext||window.webkitAudioContext)({latencyHint:"interactive",sampleRate:48e3});rr.onstatechange=()=>{rr.state==="suspended"&&(rr.resume(),Qt.j.j(),dt.i("{9d1820c}","{faee684}"))},window.ios15AudioContext=rr,window.ios15AudioStream=rr.createMediaStreamDestination(),navigator.mediaDevices&&Qt.O&&navigator.mediaDevices.addEventListener("devicechange",Qt.O),dt.i("{9d1820c}","{b5f7b9b}")}}(this),this.j.j()),Ft){dt.i("{9d1820c}","{8f5cd77}");const Qt=Dt.srcObject;Dt.srcObject=null,Dt.srcObject=Qt}return Dt.ragnarokOldPlay.apply(Dt)}}Xl&&(jt(this.u,!0,15,0)||jt(this.u,!0,15,1))&&(Dt.hasAttribute("data-shouldautoplay")?Dt.setAttribute("autoplay",""):(Dt.setAttribute("data-shouldautoplay",""),Dt.removeAttribute("autoplay"))),this.D=new uy(this,Dt,void 0,this.j,this.N,this.da,this.C,this.G,this.u,this.H,h.la.streamParams[0],this.ca,this.h.textInputElement,this.h.clientAppVersion,this.isResume,ut,void 0,void 0,h.la.signalingUrlQueryParameters),this.D.start(),h.la.keyboardLayout&&this.D.setKeyboardLayout(h.la.keyboardLayout),function(Ft){return Ft.clientShutDownCallback?(dt.d("{9838627}","{c7dcc4e}"),function(Qt){return Qt.j?Promise.resolve([]):Qt.m.then(()=>g0(Qt.l,"exit-events")).then(rr=>{dt.i("{f7c1592}","{d938300}",rr.length);let nr=[];if(0<rr.length)for(const lr of rr)lr.eventPayload&&nr.push(lr.eventPayload);return nr}).catch(rr=>(yl(Qt,rr,"getCachedExitEvents",!0),Promise.reject()))}(Ft.j).then(Qt=>{for(const rr of Qt)im(Ft,rr);b0(Ft.j)}).catch(()=>{dt.d("{9838627}","{41cf828}")})):(dt.d("{9838627}","{77df598}"),function(Qt){return Qt.j?Promise.resolve():Qt.m.then(()=>g0(Qt.l,"exit-events")).then(rr=>{if(dt.i("{f7c1592}","{ca568ff}",rr.length),0<rr.length){for(const nr of rr)nr.eventPayload&&Ty(w0(Qt,nr.eventPayload));b0(Qt)}}).catch(rr=>{yl(Qt,rr,"sendCachedExitEvent",!0)})}(Ft.j))}(this.G).then(()=>{Wu(this)}).catch(()=>{dt.e("{9d1820c}","{c761bfd}")})}Gc(h,ut){var St,xt,Ot,Vt,Dt,Ft,Qt;if(h.error){const rr=v0(this.F,h.error.code);rr&&(h.error.code=fp(h.error.code,this.u)),Fy(this,(St=h.error)===null||St===void 0?void 0:St.code).then(nr=>{var lr,Yt,dr;this.framesDecoded=(Yt=(lr=this.D)===null||lr===void 0?void 0:$l(lr))!==null&&Yt!==void 0?Yt:0,h.zoneAddress||(h.zoneAddress=this.h.serverAddress),h.error&&(h.error.code=nr.errorCode),lr=void 0,ut||(lr=Gu(this,h,0,nr.connectivity,rr),this.S=(dr=h.error)===null||dr===void 0?void 0:dr.code),By(this,h,!0,lr)})}else(function(rr,nr,lr,Yt,dr,ir,Xt,br,Tr,Sr){Gp(rr,{name:(nr=new Zv({zoneAddress:dr,networkSessionId:Sr,sessionId:nr,subSessionId:lr,resumeType:bu(Yt),overrideConfigType:ba.type,overrideConfigVersion:ba.version,result:Xt,codec:yu(br),ipVersion:"UNKNOWN",launchDuration:Math.round(ir),networkType:sr(bs.getCurrentNetworkType()),streamingProfileGuid:wy(rr.j),systemInfoGuid:Sy(rr.j),cmsId:Tr})).name,gdprLevel:nr.gdprLevel,parameters:nr.parameters,ts:nr.ts,clientConfig:Nu})})(this.G,h.sessionId,h.subSessionId,this.isResume,h.zoneAddress||this.h.serverAddress,Math.round(performance.now()-this.startTime),$(15859712),(Ot=(xt=this.D)===null||xt===void 0?void 0:Ul(xt))!==null&&Ot!==void 0?Ot:"UNKNOWN",this.v?String((Vt=this.v)===null||Vt===void 0?void 0:Vt.la.appId):"",(Ft=(Dt=this.v)===null||Dt===void 0?void 0:Dt.la.networkSessionId)!==null&&Ft!==void 0?Ft:""),this.startTime=performance.now(),document.visibilityState==="hidden"&&(this.L=this.startTime),this.o=0,this.isResume&&this.l&&this.setMicRecordingEnabled(!0),Dy(this,h),this.Z&&((Qt=this.D)===null||Qt===void 0||Qt.toggleUserInput(!0,this.pa)),it(this.u)&&document.addEventListener("SystemIdle",this.ga)}Cf(h){var ut,St,xt;Vu(this.j),dt.d("{9d1820c}","{a94b484}");let Ot=v0(this.F,h.error.code);Ot&&(h.error.code=fp(h.error.code,this.u)),this.framesDecoded=(St=(ut=this.D)===null||ut===void 0?void 0:$l(ut))!==null&&St!==void 0?St:0,h.zoneAddress||(h.zoneAddress=this.h.serverAddress),Fy(this,(xt=h.error)===null||xt===void 0?void 0:xt.code).then(Vt=>{var Dt;h.error.code=Vt.errorCode,Vt=Gu(this,h,performance.now()-this.startTime,Vt.connectivity,Ot),this.S=(Dt=h.error)===null||Dt===void 0?void 0:Dt.code,To(this.G,"HotPlug","",0,this.R,0,0),this.R=0,By(this,h,!1,Vt)})}Df(){Vy(this)}sendDeleteRequest(h,ut){ut.sendDeleteRequest(h).then(()=>{dt.d("{9d1820c}","{fee1eea}",h),Yu(this,h)},St=>{dt.e("{9d1820c}","{50e2a6e}",h),Yu(this,h,St)})}isMicSupported(){return ou}setMicRecordingEnabled(h){dt.i("{9d1820c}","{f5b2f30}",h),h?(this.l=!0,Ou(this.j)):(this.l=!1,zp(this.j))}getMicState(){var h;h=this.j,Nn!==!1&&(h.v||h.h==3||h.h==2||h.h==6||h.h==7?Wo(h,h.h):Hp().then(ut=>{ut!==0&&Wo(h,ut)}))}shouldDefaultEnableMic(){return om(this.u)}sendCustomMessage(h){var ut;(ut=this.D)===null||ut===void 0||ut.sendCustomMessage(h)}toggleUserInput(h,ut){var St;(St=this.D)===null||St===void 0||St.toggleUserInput(h,ut),this.Z=h,this.pa=ut}toggleRsdmm(h){Tp(this.C,h)}getVirtualGamepadHandler(){var h;return(h=this.D)===null||h===void 0?void 0:h.getVirtualGamepadHandler()}setAuthInfo(h){var ut;(ut=this.g)===null||ut===void 0||ut.setAuthInfo(h)}sendTextInput(h){var ut;(ut=this.D)===null||ut===void 0||ut.sendTextInput(h)}setVirtualKeyboardState(h){var ut;(ut=this.D)===null||ut===void 0||ut.setVirtualKeyboardState(h)}setVideoTransforms(h,ut,St){var xt;(xt=this.D)===null||xt===void 0||xt.setVideoTransforms(h,ut,St)}toggleOnScreenStats(){var h;hn&&((h=this.D)===null||h===void 0||h.toggleOnScreenStats())}toggleStutterIndicator(){var h;(h=this.D)===null||h===void 0||h.toggleStutterIndicator()}setKeyboardLayout(h){var ut;dt.i("{9d1820c}","{10717a6}",h),(ut=this.D)===null||ut===void 0||ut.setKeyboardLayout(h)}sendKeyEvent(h){var ut;(ut=this.D)===null||ut===void 0||ut.sendKeyEvent(h)}setStreamingMaxBitrate(h,ut=0){var St;(St=this.D)===null||St===void 0||St.setStreamingMaxBitrate(ut,h)}setDrcDfcState(h,ut=0){var St;(St=this.D)===null||St===void 0||St.setDrcDfcState(ut,h?3:0)}oa(h){var ut;h.detail.idle&&((ut=this.D)===null||ut===void 0||f0(ut,2,60),this.T=window.setTimeout(()=>{var St;(St=this.D)===null||St===void 0||Ko(St,15867913)},6e4))}na(){Jv(this.j,this.R),this.R++}cancelSessionSetup(){!this.D&&this.g&&this.g.cancelSessionSetup()}},window.Ragnarok.ChooseStreamingSettings=function(h=0,ut,St){return F0(h,ut,$0(St))},window.Ragnarok.ChooseStreamingResolution=function(h=0,ut){return F0(h,ut=ut==null?void 0:ut.map(St=>({resolution:St,frameRate:60})),$0()).resolution},window.Ragnarok.InitializeUtils=function(){for(const h of wu)h()},window.Ragnarok.GetSupportedAudioChannelCount=B0,window.Ragnarok.GetDeviceCapabilities=sm,window.Ragnarok.getSupportedCodecs=um,window.Ragnarok.VirtualButton={A:4096,B:8192,X:16384,Y:32768,LB:256,RB:512,LT:255,RT:65280,BACK:32,START:16,STICK_LEFT:64,STICK_RIGHT:128,DPAD_UP:1,DPAD_DOWN:2,DPAD_LEFT:4,DPAD_RIGHT:8},window.Ragnarok.VirtualGamepadHandler=iv,window.Ragnarok.ConfigureRagnarokSettings=O0,window.Ragnarok.CHANGELIST="rel-66-17789033",window.Ragnarok.AuthType={NONE:-1,JARVIS:0,JWT_GFN:1,JWT_PARTNER:2},window.Ragnarok.performHttpRequest=It,window.Ragnarok.AddPlatformTelemetry=function(h){Zr(h)},window.Ragnarok.IsFeatureSupported=nm,window.Ragnarok.CalculateMaxBitrateKbps=function(h,ut,St){return Du(h,ut,St)[0]},window.Ragnarok.CalculateDataUsage=function(h,ut){return am(h,ut)},window.Ragnarok.LogImpl=S1,window.Ragnarok.EVENTS={SESSION_START_RESULT:"SessionStartResult",SESSION_STOP_RESULT:"SessionStopResult",ACTIVE_SESSIONS_RESULT:"ActiveSessionsResult",PROGRESS_UPDATE:"ProgressUpdate",SESSION_UPDATE:"SessionUpdate",STREAM_STOPPED:"StreamStopped",STREAMING_EVENT:"StreamingEvent",GETSESSIONRESULT:"GetSessionResult",GET_SESSION_RESULT:"GetSessionResult",LOG_EVENT:"Log",STREAMING_QUALITY:"StreamingQuality",MIC_CAPTURE:"MicCapture",CUSTOM_MESSAGE:"CustomMessage",TEXT_COMPOSITION:"TextComposition",STREAM_STATS_UPDATE:"StreamStatsUpdate",TELEMETRY_EVENT:"TelemetryEvent"},window.Ragnarok.HotkeyModifier={None:0,Ctrl:1,Alt:2,Meta:4,Shift:8,Default:128},window.Ragnarok.defaultInputConfigFlags=Ts,window.Ragnarok.StreamingProfilePreset={BALANCED:0,DATASAVER:1,COMPETITIVE:2},window.Ragnarok.TrackType=Ks,window.Ragnarok.STREAMING_STATE={RECONNECTING:"reconnecting",RECONNECTED:"reconnected"},window.Ragnarok.RNotificationCode=gs,window.Ragnarok.ScErrorCode=ds,window.Ragnarok.configureSessionControlSettings=Sn,window.Ragnarok.DeviceType={DESKTOP:"DESKTOP",LAPTOP:"LAPTOP",TV:"TV",PHONE:"PHONE",TABLET:"TABLET",CONSOLE:"CONSOLE"},window.Ragnarok.DeviceOS={WINDOWS:"WINDOWS",MACOS:"MACOS",SHIELD:"SHIELD",ANDROID:"ANDROID",IOS:"IOS",IPADOS:"IPADOS",CHROMEOS:"CHROMEOS",LINUX:"LINUX",TIZEN:"TIZEN",WEBOS:"WEBOS",TVOS:"TVOS",XBOX:"XBOX",STEAMOS:"STEAMOS",CCOS:"CCOS"},window.Ragnarok.NetworkType={OTHER:"OTHER",ETHERNET:"ETHERNET",UNKNOWN:"UNKNOWN",WIFI:"WIFI",WIFI_2_4:"WIFI_2_4",WIFI_5_0:"WIFI_5_0",MOBILE:"MOBILE",MOBILE_2G:"MOBILE_2G",MOBILE_3G:"MOBILE_3G",MOBILE_4G:"MOBILE_4G",MOBILE_5G:"MOBILE_5G",WIMAX:"WIMAX",BLUETOOTH:"BLUETOOTH"},window.Ragnarok.registerLogCallback=function(h){dt.setLogCallback(h)},window.Ragnarok.LogLevel=Tl,window.Ragnarok.createSessionControl=function(h){const ut=new Cl;if(wl(ut,h))return ut},window.Ragnarok.SdrHdrMode={SDR:0,HDR:1,EDR:2},window.Ragnarok.Usage={UNKNOWN:0,CONTROL:1,VIDEO:2,AUDIO:3,INPUT:4,CUSTOM:5,USB:6,RTSP:7,GAMESTREAM_CONTROL:8,GAMESTREAM_SECURE_CONTROL:9,SESSION_CONTROL:10,NETWORK_TEST_CONTROL:11,RTSPRU:12,AUDIO_INPUT:13,SIGNALING:14,MEDIA:15,RTSPS:16,BUNDLE:17},window.Ragnarok.Protocol={UNKNOWN:0,TCP:1,UDP:2},window.Ragnarok.AppLevelProtocol={UNKNOWN:0,RTSP:1,HTTP:2,RTSPRU:3,SOCKET:4,HTTPS:5,RTSPS:6},window.Ragnarok.AdState={UNKNOWN:0,NOT_STARTED:1,STARTED:2,PAUSED:3,RESUMED:4,FINISHED:5,CANCELED:6},window.Ragnarok.AdAction={UNKNOWN:0,START:1,PAUSE:2,RESUME:3,FINISH:4,CANCEL:5},window.Ragnarok.BitDepth={BIT_DEPTH_8:0,BIT_DEPTH_10:1},window.Ragnarok.ClientType={BROWSER:"BROWSER",GFNSDK:"GFNSDK",NATIVE:"NATIVE"},window.Ragnarok.SessionState={INITIALIZING:"initializing",READY_FOR_CONNECTION:"ready_for_connection",STREAMING:"streaming",PAUSED:"paused",RESUMING:"resuming",FINISHED:"finished",UNKNOWN:"unknown"},window.Ragnarok.SessionProgressState={CONNECTING:"Connecting",IN_QUEUE:"InQueue",CONFIGURING:"Configuring",PREVIOUS_SESSION_CLEANUP:"PreviousSessionCleanup",STARTING_STREAMER:"StartingStreamer"},window.Ragnarok.AppLaunchMode={Default:0,GamepadFriendly:1,TouchFriendly:2},window.Ragnarok.updateSessionParameters=function(h,ut){var St;ut=JSON.parse(ut),h.monitorSettings=(St=ut.clientRequestMonitorSettings)!==null&&St!==void 0?St:[],h.streamingFeatures=ut.requestedStreamingFeatures},window.Ragnarok.isCancelCode=Fo,window.Ragnarok.isResumableSessionState=Es,window.Ragnarok.getResumableSession=function(h,ut){for(const St of h)if(St.appId===ut&&Es(St.state))return St},window.Ragnarok.SessionControlTelemetry=uo,window.Ragnarok.GsErrorCode=ds,window.Ragnarok.GridServerSettings=rn,window.Ragnarok.ConfigureGridServerSettings=function(h){Sn(h)},window.Ragnarok.BrowserName={UNKNOWN:"Unknown",CHROME:"Chrome",SAFARI:"Safari",YANDEX:"Yandex",EDGE:"Edge",EDGE_LEGACY:"Edge_Legacy",FIREFOX:"Firefox",SAMSUNG:"Samsung",CHROMIUM:"Chromium",OPERA:"Opera",BRAVE:"Brave",SILK:"Silk",REACT:"ReactNative"},window.Ragnarok.PlatformName={UNKNOWN:"Unknown",CHROME_OS:"ChromeOS",WINDOWS:"Windows",MAC:"macOS",LINUX:"Linux",IOS:"iOS",IPADOS:"iPadOS",WEBOS:"WebOS",TIZEN:"Tizen",ANDROID:"Android",FIRETV:"FireTV",XBOX:"Xbox",FREEBSD:"FreeBSD",STEAMOS:"SteamOS",CCOS:"ccOS"},window.Ragnarok.getPlatformDetails=$t,window.Ragnarok.DeviceModel={STEAMDECK:"STEAMDECK",XBOX_ONE:"XBOXONE",XBOX_SERIES:"XBOXSERIES",VISION_PRO:"VISIONPRO"},window.Ragnarok.DeviceVendor={APPLE:"APPLE",LG:"LG",SAMSUNG:"SAMSUNG",TIZEN_LICENSED:"TIZENLICENSED",MICROSOFT:"MICROSOFT",AMAZON:"AMAZON",HKMC:"HKMC",SONY:"SONY",PHILIPS:"PHILIPS",GOOGLE:"GOOGLE",NVIDIA:"NVIDIA",XIAOMI:"XIAOMI",TVISION:"TVISION",UNKNOWN:""},window.Ragnarok.CLIENT_VERSION="29.0",window.Ragnarok.CLIENT_IDENTIFICATION="GFN-PC",window.Ragnarok.SESSIONMODIFY_ACTION={UNKNOWN:0,PAUSE:1,RESUME:2,Pg:3,Ng:4,Mg:5,Lg:6,Qg:7},window.Ragnarok.AudioFormat={UNKNOWN:0,STEREO:1,UP_TO_5_1_SURROUND_PCM:2,UP_TO_7_1_SURROUND_PCM:3},window.Ragnarok.ClientStreamer={CLASSIC:"NVIDIA-CLASSIC",WEBRTC:"WEBRTC"},window.Ragnarok.GS_EVENTS={ACTIVE_SESSIONS_RESULT:"ActiveSessionsResult",PROGRESS_UPDATE:"ProgressUpdate",SESSION_UPDATE:"SessionUpdate",TELEMETRY_EVENT:"TelemetryEvent",LOG_EVENT:"Log"},window.Ragnarok.GridServer=Ps,window.Ragnarok.PassThruServer=zs,window.Ragnarok.VsyncType={OFF:0,ON:1,ADAPTIVE:2},window.Ragnarok.getDeviceCapabilities=sm,window.Ragnarok.serializeDeviceCapabilities=function(h){return JSON.stringify(h)},window.Ragnarok.PayloadOSType={WINDOWS:"Windows",MACOS:"MacOS",SHIELD:"Shield",ANDROID:"Android",IOS:"iOS",IPADOS:"iPadOS",CHROMEOS:"ChromeOS",LINUX:"Linux",TIZEN:"Tizen",WEBOS:"WebOS",TVOS:"tvOS",XBOX:"Xbox",STEAMOS:"SteamOS",UNDEFINED:"undefined"},window.Ragnarok.PayloadBrowserType={CHROME:"Chrome",SAFARI:"Safari",YANDEX:"Yandex",EDGE:"Edge",EDGE_LEGACY:"Edge_legacy",FIREFOX:"Firefox",SAMSUNG:"Samsung",CHROMIUM:"Chromium",OPERA:"Opera",BRAVE:"Brave",SILK:"Silk",UNDEFINED:"undefined"},window.Ragnarok.PayloadDeviceType={DESKTOP:"Desktop",LAPTOP:"Laptop",TV:"TV",PHONE:"Phone",TABLET:"Tablet",SERVER:"Server",CONSOLE:"Console",UNDEFINED:"undefined"},window.Ragnarok.ClientHeaderOSType={WINDOWS:"WINDOWS",MACOS:"MACOS",SHIELD:"SHIELD",ANDROID:"ANDROID",IOS:"IOS",IPADOS:"IPADOS",CHROMEOS:"CHROMEOS",LINUX:"LINUX",TIZEN:"TIZEN",WEBOS:"WEBOS",XBOX:"XBOX",STEAMOS:"STEAMOS",UNKNOWN:"UNKNOWN"},window.Ragnarok.ClientHeaderBrowserType={CHROME:"CHROME",SAFARI:"SAFARI",YANDEX:"YANDEX",EDGE:"EDGE",EDGE_LEGACY:"EDGE_LEGACY",FIREFOX:"FIREFOX",SAMSUNG:"SAMSUNG",CHROMIUM:"CHROMIUM",OPERA:"OPERA",BRAVE:"BRAVE",SILK:"SILK",UNKNOWN:"UNKNOWN"},window.Ragnarok.ClientHeaderDeviceType={DESKTOP:"DESKTOP",LAPTOP:"LAPTOP",TV:"TV",PHONE:"PHONE",TABLET:"TABLET",CONSOLE:"CONSOLE",UNKNOWN:"UNKNOWN"},window.Ragnarok.translatePlatformDetailsForPayload=function(h){return(Un==null?void 0:Un.h)!=h&&(Un=new Mn(h)),Un.m},window.Ragnarok.translatePlatformDetailsForClientHeader=function(h){return(Un==null?void 0:Un.h)!=h&&(Un=new Mn(h)),Un.o},window.Ragnarok.getStreamerType=function(){return"WEBRTC"},window.Ragnarok.BrowserFeature={Streaming:0,MicCapture:1},window.Ragnarok.isFeatureSupported=nm,window.Ragnarok.shouldDefaultEnableMic=om,window.Ragnarok.getRecommendedBitrate=Du,window.Ragnarok.getStreamStartParameters=function(h){const ut={downstreamParams:[],signalConnectionInfo:{address:"",port:0},enableTouchInput:(h=JSON.parse(h)).appLaunchMode===2,sessionId:h.sessionId,subSessionId:h.subSessionId,audioTagId:"",zoneAddress:h.zoneAddress,statTelemetryInfo:{appId:h.appId,zoneName:h.zoneName,gpuType:h.gpuType},streamingFeatures:h.finalizedStreamingFeatures};for(const St of h.monitorSettings)ut.downstreamParams.push({width:St.widthInPixels,height:St.heightInPixels,fps:St.framesPerSecond,videoTagId:"",sdrHdrMode:St.sdrHdrMode});for(const St of h.connectionInfo)switch(St.usage){case 14:ut.signalConnectionInfo.address=St.ip,ut.signalConnectionInfo.port=St.port,ut.signalConnectionInfo.secure=St.appLevelProtocol===5;break;case 2:case 17:ut.mediaConnectionInfo={address:St.ip,port:St.port}}return ut},window.Ragnarok.estimateDataUsage=am,window.Ragnarok.NskTelemetry=jo,window.Ragnarok.createNskStreamClient=function(h,ut,St){return new class{constructor(xt,Ot,Vt){this.u=xt,this.h=Ot,this.R=Vt,this.H=new py,this.O=new gy,this.startTime=this.streamingState=0,this.isResume=!1,this.o=this.C=this.v=0,this.zoneName=this.zoneAddress=this.subSessionId=this.sessionId="",this.m=!1,this.appId=0,this.L=Dt=>{var Ft;return dt.e("{0a9be04}","{8516485}",Dt.filename,Dt.lineno,Dt.colno),jo.za(Dt.error,Dt.error&&Dt.error.message?Dt.error.message:Dt.message,Dt.filename,Dt.lineno,Dt.colno,!1),((Ft=Qn.terminateUnhandledException)===null||Ft===void 0||Ft)&&Kl(this,3237093392),!1},this.N=()=>{var Dt;if(dt.i("{0a9be04}","{478a408}",document.visibilityState,!!this.D),this.D){var Ft=this.K,Qt=this.Ea,rr=Ft&&Qt&&jt(this.u,!1,15,4)&&lp,nr=jt(this.u,!1,15,4)&&this.m&&sp;document.visibilityState==="hidden"?(this.C=performance.now(),rr&&(dt.i("{0a9be04}","{cbd3b6e}"),Ft.muted=!0,Qt.muted=!0)):document.visibilityState==="visible"&&(rr&&(dt.i("{0a9be04}","{05deefa}"),Ft.muted=!1,Qt.muted=!1),nr?(Ft=(Dt=Qn.userTerminatedMicRecorderThreshold)!==null&&Dt!==void 0?Dt:2e3,this.C-this.g.O<Ft?(dt.i("{0a9be04}","{862bd20}"),this.g.I=!0,this.captureMic(!0)):this.m=!1):jt(this.u,!1,15,4)&&!this.g.o&&Kp(this.g)&&this.g.F&&Pu(this.g,"visibilityChange"))}},this.M=()=>{var Dt,Ft;Kl(this,((Dt=this.P)!==null&&Dt!==void 0?Dt:(Ft=this.D)!==null&&Ft!==void 0&&Ft.H)?15867912:15867905)},this.F=()=>{Jv(this.g,this.o),this.o++},this.I=Dt=>{var Ft;Dt.detail.idle&&((Ft=this.D)===null||Ft===void 0||f0(Ft,2,60),this.v=window.setTimeout(()=>{var Qt;(Qt=this.D)===null||Qt===void 0||Ko(Qt,15867913)},6e4))},this.s=()=>{this.g.j()},this.j=new Sv(this.u,window.zoneless),this.g=new Xv(this.u,jo),this.l=new fy(jo),Yl&&(this.j.l.push(this.H),xp(this.j)),Zr(jo),function(){var Dt,Ft,Qt;if(Qn.sendNonEssentialMetricEvents){var rr=performance.getEntriesByName("GfnJsInitStart")[0];const nr=performance.getEntriesByName("platformBegin")[0],lr=performance.getEntriesByName("GfnNskBegin")[0],Yt=performance.getEntriesByType("navigation");rr=Math.round((Dt=rr==null?void 0:rr.startTime)!==null&&Dt!==void 0?Dt:-1),Dt=Math.round((Ft=nr==null?void 0:nr.startTime)!==null&&Ft!==void 0?Ft:-1),To(jo,"PerformanceTiming","application timings",rr,Dt,Math.round((Qt=lr==null?void 0:lr.startTime)!==null&&Qt!==void 0?Qt:-1),Dt-rr),Yt.length?(Ft=Yt[Yt.length-1],To(jo,"PerformanceTiming","load timings",Math.round(Ft.loadEventStart),Math.round(Ft.loadEventEnd),Math.round(Ft.domContentLoadedEventStart),Math.round(Ft.domContentLoadedEventEnd))):To(jo,"PerformanceTiming","navigation timings unsupported",0,0,0,0)}}(),function(){if(navigator.mediaCapabilities){var Dt=performance.now();ks("h264").then(async Ft=>{if(Ft){Ft=ks("h264; profile-level-id=640033",2560,1440,60);var Qt=ks("h264; profile-level-id=64e033",2560,1440,60);Ft=Bs(await Ft),Qt=Bs(await Qt);const lr=performance.now()-Dt;var rr=Wp(),nr=ks("h264",1920,1080,120);rr=Bs(await rr),nr=Bs(await nr);const Yt=await au(Bl),dr=await cm();dt.d("{0a9be04}","{1efbc27}",Yt,dr),To(jo,"DisplayCaps","Is120FpsSupported: "+dr,Yt,0,0,0),To(jo,"MediaCapabilities","codec 5.1: "+Ft+" 5.1 constrained: "+Qt+" AV1: "+rr,lr,nr,Ft|Qt,Math.round(window.screen.height))}else To(jo,"MediaCapabilities","webrtc unsupported",performance.now()-Dt,-1,-1,-1)})}else To(jo,"MediaCapabilities","API unsupported",-1,-1,-1,-1)}(),Qn.sendNonEssentialMetricEvents&&To(jo,"PlatformDetailsExecutionTime","",this.u.totalTime,0,0,0),dt.i("{0a9be04}","{2569364}","0.66.9"),dt.d("{0a9be04}","{e85ad66}",navigator.userAgent)}startStreaming(xt){var Ot,Vt,Dt,Ft,Qt,rr,nr,lr,Yt,dr,ir,Xt,br,Tr,Sr;if(this.streamingState!==4&&this.streamingState!==0)return dt.w("{0a9be04}","{60a7ff5}"),qo(jo,"SessionSetupInProgressError",xt.resume?"resume":"start"),3237085186;const Mr=function(gr){var _r;const Er={errorCode:void 0,streamParams:Object.assign({},gr),Ea:void 0,de:[]};if(0<Er.streamParams.downstreamParams.length||!gr.audioTagId){for(var cr of Er.streamParams.downstreamParams)(gr=document.getElementById(cr.videoTagId))&&gr instanceof HTMLVideoElement&&Er.de.push(gr);if(!Er.de.length)return{errorCode:3237094400}}else{if(!((cr=document.getElementById(gr.audioTagId))&&cr instanceof HTMLAudioElement))return{errorCode:3237094401};Er.Ea=cr}const kr=!!Os&&!!Vs,Wr=!!Rs;return(kr||Wr)&&((_r=Er.streamParams.downstreamParams)===null||_r===void 0||_r.forEach(mn=>{kr&&(mn.width=Os,mn.height=Vs),Wr&&(mn.fps=Rs)}),kr&&dt.i("{0a9be04}","{92a6b38}",Os,Vs),Wr&&dt.d("{0a9be04}","{6618bcd}",Rs)),Er}(xt);if(Mr.errorCode)return Mr.errorCode;if(xt=Mr.streamParams,this.K=Mr.de[0],this.Ea=Mr.Ea,this.isResume=(Ot=xt.resume)!==null&&Ot!==void 0&&Ot,this.sessionId=xt.sessionId,this.subSessionId=(Vt=xt.subSessionId)!==null&&Vt!==void 0?Vt:"",this.zoneAddress=(Dt=xt.zoneAddress)!==null&&Dt!==void 0?Dt:"",this.zoneName=(Qt=(Ft=xt.statTelemetryInfo)===null||Ft===void 0?void 0:Ft.zoneName)!==null&&Qt!==void 0?Qt:"",this.appId=(nr=(rr=xt.statTelemetryInfo)===null||rr===void 0?void 0:rr.appId)!==null&&nr!==void 0?nr:0,function(gr,_r,Er,cr,kr){var Wr=jo;Wr.subSessionId=gr,Wr.sessionId=_r,Wr.cmsId=Er,Wr.isResume=cr,Wr.zoneAddress=kr}(this.subSessionId,this.sessionId,this.appId.toString(),this.isResume,this.zoneAddress),this.l.sessionId=this.sessionId,this.l.subSessionId=this.subSessionId,jt(this.u,!1,15)){const gr=this.K;gr.ragnarokOldPlay||(gr.ragnarokOldPlay=this.K.play);const _r=Jl&&jt(this.u,!0,15,1);this.K.play=()=>{var Er,cr,kr;if(ys&&(dt.i("{0a9be04}","{4a5b360}"),$y(this),function(Wr){if(ys)if(window.ios15AudioContext)dt.i("{0a9be04}","{e2aba64}");else{var mn=new(window.AudioContext||window.webkitAudioContext)({latencyHint:"interactive",sampleRate:48e3});mn.onstatechange=()=>{mn.state==="suspended"&&(mn.resume(),Wr.g.j(),dt.i("{0a9be04}","{faee684}"))},window.ios15AudioContext=mn,window.ios15AudioStream=mn.createMediaStreamDestination(),navigator.mediaDevices&&Wr.s&&navigator.mediaDevices.addEventListener("devicechange",Wr.s),dt.i("{0a9be04}","{b5f7b9b}")}}(this),this.g.j()),_r){dt.i("{0a9be04}","{8f5cd77}");const Wr=(cr=(Er=this.K)===null||Er===void 0?void 0:Er.srcObject)!==null&&cr!==void 0?cr:null;(kr=this.K)!==null&&kr!==void 0&&kr.srcObject&&(this.K.srcObject=null,this.K.srcObject=Wr)}return gr.ragnarokOldPlay.apply(this.K)}}return Xl&&(jt(this.u,!0,15,0)||jt(this.u,!0,15,1))&&(this.K.hasAttribute("data-shouldautoplay")?this.K.setAttribute("autoplay",""):(this.K.setAttribute("data-shouldautoplay",""),this.K.removeAttribute("autoplay"))),Dt={ip:"",port:0,appLevelProtocol:0,usage:0,protocol:0},xt.mediaConnectionInfo&&(Dt.ip=xt.mediaConnectionInfo.address,Dt.port=xt.mediaConnectionInfo.port,Dt.usage=2),Ft={ip:xt.signalConnectionInfo.address,port:xt.signalConnectionInfo.port,protocol:xt.signalConnectionInfo.secure?"wss":"ws"},Qt={width:(Ot=xt.downstreamParams[0]).width,height:Ot.height,fps:Ot.fps,sdrHdrMode:Ot.sdrHdrMode},Vt={appId:this.appId,appLaunchMode:xt.enableTouchInput?2:0,clientLocale:(Yt=(lr=xt.statTelemetryInfo)===null||lr===void 0?void 0:lr.clientLocale)!==null&&Yt!==void 0?Yt:"",gpuType:(ir=(dr=xt.statTelemetryInfo)===null||dr===void 0?void 0:dr.gpuType)!==null&&ir!==void 0?ir:"",mediaConnectionInfo:[Dt],sessionId:this.sessionId,signalConnectionInfo:Ft,state:"ready_for_connection",streamInfo:[Qt],subSessionId:this.subSessionId,zoneAddress:this.zoneAddress,zoneName:this.zoneName,finalizedStreamingFeatures:xt.streamingFeatures},lr={width:Ot.width,height:Ot.height,fps:Ot.fps,maxBitrateKbps:Ot.maxBitrateKbps,videoTagId:Ot.videoTagId,audioTagId:xt.audioTagId},(Xt=(Yt={...Ts}).windowedStreaming)!==null&&Xt!==void 0||(Yt.windowedStreaming=xt.windowedStreaming),(br=Yt.cursorType)!==null&&br!==void 0||(Yt.cursorType=xt.cursorType),this.D=new uy(this,this.K,this.Ea,this.g,Yt,this.H,this.j,jo,this.u,Vt,lr,this.O,this.R.textInputElement,(Tr=xt.statTelemetryInfo)===null||Tr===void 0?void 0:Tr.clientAppVersion,this.isResume,(Sr=xt.statTelemetryInfo)===null||Sr===void 0?void 0:Sr.region,Ot.dynamicStreamingMode,xt.upstreamParams),function(gr){var _r,Er,cr,kr;const Wr=window.zoneless,mn=(Er=(_r=Wr==null?void 0:Wr.windowAddEventListener)===null||_r===void 0?void 0:_r.bind(window))!==null&&Er!==void 0?Er:window.addEventListener.bind(window);_r=(kr=(cr=Wr==null?void 0:Wr.documentAddEventListener)===null||cr===void 0?void 0:cr.bind(document))!==null&&kr!==void 0?kr:document.addEventListener.bind(document),mn("pagehide",gr.M),mn("error",gr.L),_r("visibilitychange",gr.N),navigator.mediaDevices&&navigator.mediaDevices.addEventListener("devicechange",gr.F),it(gr.u)&&_r("SystemIdle",gr.I)}(this),this.streamingState=1,dy(this.l),this.startTime=performance.now(),this.D.start(),xt.keyboardLayout&&this.D.setKeyboardLayout(xt.keyboardLayout),15859712}stopStreaming(xt){!this.D||this.streamingState!==1&&this.streamingState!==2||(xt=xt??15859712,dt.i("{0a9be04}","{ae7f61b}",$(xt)),this.streamingState=3,Kl(this,xt,!0))}getStreamingState(){return this.streamingState}sendCustomMessage(xt){var Ot;return(Ot=this.D)===null||Ot===void 0||Ot.sendCustomMessage(xt),!!this.D}setStreamingMaxBitrate(xt,Ot,Vt){var Dt;return(Dt=this.D)===null||Dt===void 0||Dt.setStreamingMaxBitrate(Ot??0,xt,Vt),!!this.D}setDynamicStreamingMode(xt,Ot,Vt){var Dt;return(Dt=this.D)===null||Dt===void 0||Dt.setDrcDfcState(Ot??0,xt,Vt),!!this.D}setKeyboardLayout(xt){var Ot;return(Ot=this.D)===null||Ot===void 0||Ot.setKeyboardLayout(xt),!!this.D}setSupportedHidTypes(xt){Sp(this.j,xt)}setGamepadRsdmm(xt){return!!this.D&&(Tp(this.j,xt),!0)}getVirtualInputController(){return this}getGamepadBitmap(){return wv(this.j)}captureUserInput(xt,Ot){var Vt;return(Vt=this.D)===null||Vt===void 0||Vt.toggleUserInput(xt,Ot),!!this.D}sendTextInput(xt){var Ot;return(Ot=this.D)===null||Ot===void 0||Ot.sendTextInput(xt),!!this.D}getMicState(){return Hp()}captureMic(xt){return!!this.D&&((this.m=xt)?Ou(this.g):zp(this.g),!0)}setVideoTransforms(xt,Ot,Vt){var Dt;return(Dt=this.D)===null||Dt===void 0||Dt.setVideoTransforms(xt,Ot,Vt),!!this.D}setUpstreamMedia(xt,Ot){var Vt;return this.D?(Vt=this.D)===null||Vt===void 0?void 0:Vt.setUpstreamMedia(xt,Ot):Promise.resolve(!1)}unsetUpstreamMedia(xt){var Ot;return this.D?(Ot=this.D)===null||Ot===void 0?void 0:Ot.unsetUpstreamMedia(xt):Promise.resolve(!1)}stopUpstreamMedia(xt){var Ot;return this.D?(Ot=this.D)===null||Ot===void 0?void 0:Ot.stopUpstreamMedia(xt):Promise.resolve(!1)}Gc(xt){var Ot,Vt,Dt,Ft,Qt,rr,nr,lr;let Yt=15859712;if(xt.error)Yt=xt.error.code,this.h.onStreamStartFailed(Yt),Kl(this,Yt);else if((Ot=xt.streamInfo)!==null&&Ot!==void 0&&Ot.length&&(Vt=xt.streams)!==null&&Vt!==void 0&&Vt.length){this.streamingState=2,Ot={streams:[],separateAudioStream:!!xt.streams.find(dr=>{const ir=dr.tracks.find(Xt=>Xt.kind==="video");return dr=dr.tracks.find(Xt=>Xt.kind==="audio"),!ir&&dr})};for(const dr of xt.streamInfo)Vt={width:dr.width,height:dr.height,fps:dr.fps,sdrHdrMode:dr.sdrHdrMode,bitDepth:(Dt=xt.bitDepth)!==null&&Dt!==void 0?Dt:8,codec:(Ft=this.D)===null||Ft===void 0?void 0:Ul(Ft),videoTagId:(rr=(Qt=this.K)===null||Qt===void 0?void 0:Qt.tagName)!==null&&rr!==void 0?rr:""},Ot.streams.push(Vt);this.h.onStreamStarted(Ot),this.isResume&&this.m&&this.captureMic(!0)}else Yt=3237093905,dt.e("{0a9be04}","{0cfb100}"),this.h.onStreamStartFailed(Yt),Kl(this,Yt);(function(dr,ir,Xt){var br,Tr,Sr,Mr=jo;const gr=new Zv({zoneAddress:Mr.zoneAddress,networkSessionId:(br=Mr.telemetryEventIds.networkTestId)!==null&&br!==void 0?br:"",sessionId:Mr.sessionId,subSessionId:Mr.subSessionId,resumeType:bu(Mr.isResume),overrideConfigType:ba.type,overrideConfigVersion:ba.version,result:ir,codec:yu(Xt),ipVersion:"UNKNOWN",launchDuration:Math.round(dr),networkType:sr(bs.getCurrentNetworkType()),streamingProfileGuid:(Tr=Mr.telemetryEventIds.streamingProfileGuid)!==null&&Tr!==void 0?Tr:"",systemInfoGuid:(Sr=Mr.telemetryEventIds.systemInfoGuid)!==null&&Sr!==void 0?Sr:"",cmsId:Mr.cmsId});Mr.h(gr)})(Math.round(performance.now()-this.startTime),$(Yt),(lr=(nr=this.D)===null||nr===void 0?void 0:Ul(nr))!==null&&lr!==void 0?lr:"UNKNOWN"),this.startTime=performance.now()}Cf(xt){Kl(this,xt.error.code)}Df(){M0(this)}emit(xt,...Ot){if(Ot.length)switch(xt){case"StreamingEvent":this.h.onStreamWarning(Ot[0]);break;case"StreamingQuality":this.h.onStreamQuality(Ot[0]);break;case"MicCapture":this.h.onMicStateUpdate&&Ot[0].state!==void 0&&this.h.onMicStateUpdate(Ot[0].state);break;case"TextComposition":this.h.onTextComposition(Ot[0]);break;case"CustomMessage":this.h.onCustomMessage&&this.h.onCustomMessage(Ot[0]);break;case"StreamStatsUpdate":this.h.onStreamStatistics(Ot[0])}}addListener(){}removeListener(){}removeAllListeners(){}removeAllListenersOfEvent(){}hasListener(){return!0}setClientSupportsVirtualGamepad(){this.j.getVirtualGamepadHandler().enable()}handleVirtualGamepadState(xt,Ot,Vt){this.j.getVirtualGamepadHandler().updateInput(xt,Ot,Vt)}setVirtualKeyboardState(xt){var Ot;return(Ot=this.D)===null||Ot===void 0||Ot.setVirtualKeyboardState(xt),!!this.D}handleVirtualKeyInput(xt){var Ot;return(Ot=this.D)===null||Ot===void 0||Ot.sendKeyEvent(xt),!!this.D}}(h,ut,St)},window.Ragnarok.configureRagnarokSettings=O0,window.Ragnarok.getNetworkTypeDetector=function(){return bs},window.Ragnarok.RErrorCode={Success:15859712,AuthProviderError:3237085185,InvalidOperation:3237085186,NoNetwork:3237089281,NetworkError:3237089282,GetActiveSessionServerError:3237089283,ExceptionHappened:3237089284,AuthTokenNotUpdated:3237093377,SessionFinishedState:3237093378,ResponseParseFailure:3237093379,GridAppNotInitialized:3237093380,InvalidServerResponse:3237093381,PutOrPostInProgress:3237093382,GridServerNotInitialized:3237093383,DOMExceptionInGridServer:3237093384,InvalidAdStateTransition:3237093386,SessionServerErrorBegin:3237093632,RequestForbidden:3237093634,ServerInternalTimeout:3237093635,ServerInternalError:3237093636,ServerInvalidRequest:3237093637,ServerInvalidRequestVersion:3237093638,SessionListLimitExceeded:3237093639,InvalidRequestDataMalformed:3237093640,InvalidRequestDataMissing:3237093641,RequestLimitExceeded:3237093642,SessionLimitExceeded:3237093643,InvalidRequestVersionOutOfDate:3237093644,SessionEntitledTimeExceeded:3237093645,AuthFailure:3237093646,InvalidAuthenticationMalformed:3237093647,InvalidAuthenticationExpired:3237093648,InvalidAuthenticationNotFound:3237093649,EntitlementFailure:3237093650,InvalidAppIdNotAvailable:3237093651,InvalidAppIdNotFound:3237093652,InvalidSessionIdMalformed:3237093653,InvalidSessionIdNotFound:3237093654,EulaUnAccepted:3237093655,MaintenanceStatus:3237093656,ServiceUnAvailable:3237093657,SteamGuardRequired:3237093658,SteamLoginRequired:3237093659,SteamGuardInvalid:3237093660,SteamProfilePrivate:3237093661,InvalidCountryCode:3237093662,InvalidLanguageCode:3237093663,MissingCountryCode:3237093664,MissingLanguageCode:3237093665,SessionNotPaused:3237093666,EmailNotVerified:3237093667,InvalidAuthenticationUnsupportedProtocol:3237093668,InvalidAuthenticationUnknownToken:3237093669,InvalidAuthenticationCredentials:3237093670,SessionNotPlaying:3237093671,InvalidServiceResponse:3237093672,AppPatching:3237093673,GameNotFound:3237093674,NotEnoughCredits:3237093675,InvitationOnlyRegistration:3237093676,RegionNotSupportedForRegistration:3237093677,SessionTerminatedByAnotherClient:3237093678,DeviceIdAlreadyUsed:3237093679,ServiceNotExist:3237093680,SessionExpired:3237093681,SessionLimitPerDeviceReached:3237093682,ForwardingZoneOutOfCapacity:3237093683,RegionNotSupportedIndefinitely:3237093684,RegionBanned:3237093685,RegionOnHoldForFree:3237093686,RegionOnHoldForPaid:3237093687,AppMaintenanceStatus:3237093688,ResourcePoolNotConfigured:3237093689,InsufficientVmCapacity:3237093690,InsufficientRouteCapacity:3237093691,InsufficientScratchSpaceCapacity:3237093692,RequiredSeatInstanceTypeNotSupported:3237093693,ServerSessionQueueLengthExceeded:3237093694,RegionNotSupportedForStreaming:3237093695,SessionForwardRequestAllocationTimeExpired:3237093696,SessionForwardGameBinariesNotAvailable:3237093697,GameBinariesNotAvailableInRegion:3237093698,UekRetrievalFailed:3237093699,EntitlementFailureForResource:3237093700,SessionInQueueAbandoned:3237093701,MemberTerminated:3237093702,SessionRemovedFromQueueMaintenance:3237093703,ZoneMaintenanceStatus:3237093704,GuestModeCampaignDisabled:3237093705,RegionNotSupportedAnonymousAccess:3237093706,InstanceTypeNotSupportedInSingleRegion:3237093707,InvalidZoneForQueuedSession:3237093710,SessionWaitingAdsTimeExpired:3237093711,UserCancelledWatchingAds:3237093712,SessionServerErrorEnd:3237093887,StreamerErrorCategory:3237093888,StreamErrorGeneric:3237093889,StreamerSignInFailure:3237093890,StreamerHangingGetFailure:3237093891,StreamerNetworkError:3237093892,StreamerVideoPlayError:3237093893,StreamerIceConnectionFailed:3237093894,StreamerGetRemotePeerTimedOut:3237093895,StreamInputChannelError:3237093896,StreamCursorChannelError:3237093897,StreamControlChannelError:3237093898,StreamerReConnectionFailed:3237093899,StreamerNoVideoPacketsReceivedEver:3237093900,StreamerNoVideoFramesLossyNetwork:3237093901,StreamerSetSDPFailure:3237093902,StreamerNoLocalCandidates:3237093903,StreamerNoRemoteCandidates:3237093904,StreamerNoVideoTrack:3237093905,StreamerIceReConnectionFailed:3237093906,StreamerSignInTimeout:3237093907,StreamerSignInWorkerFailure:3237093908,StreamerNoTracksReceivedInSdp:3237093909,StreamerNvstSdpFailure:3237093910,StreamerNvstSdpParseFailure:3237093911,StreamerNoPeerInfo:3237093912,StreamerNoOffer:3237093913,StreamerNoAudioTrack:3237093914,StreamerInvalidRemoteConfigOverride:3237093915,StreamerInvalidServerOverride:3237093916,StreamerInvalidClientOverride:3237093917,StreamerConfigUpdateFailure:3237093918,StreamerInputChannelNotOpen:3237093919,StreamerCursorChannelNotOpen:3237093920,StreamerControlChannelNotOpen:3237093921,StreamerVideoAdapterInitTimeOut:3237093922,StreamerVideoFrameProviderInitTimeOut:3237093923,StreamerVideoEncoderInitTimeOut:3237093924,StreamerVideoSetupTimeOut:3237093925,StreamerNoStunResponsesReceived:3237093926,StreamerNoNominatedCandidatePairs:3237093927,StreamerNoSucceededCandidatePairs:3237093928,StreamGamepadChannelError:3237093929,StreamerGamepadChannelNotOpen:3237093936,StreamerNeedAudioElement:3237093937,SessionSetupCancelled:15867905,SessionSetupCancelledDuringQueuing:15867906,StreamerDataChannelClosing:15867907,SystemSleepDuringStreaming:15867908,SystemSleepDuringSessionSetup:15867909,PauseSession:15867910,DelayedSessionError:15867911,WebPageClosed:15867912,ClientDisconnectedUserIdle:15867913,UnhandledException:3237093392,NoInternetDuringSessionSetup:15868417,NoInternetDuringStreaming:15868418,StreamDisconnectedFromServer:15868672,ServerDisconnectedNoResponse:3237094145,ServerDisconnectedRemoteInputError:3237094146,ServerDisconnectedFrameGrabFailed:3237094147,ServerDisconnectedConfigUnAvailable:3237094148,ServerDisconnectedInvalidCommand:3237094149,ServerDisconnectedInvalidMouseState:3237094150,ServerDisconnectedNetworkError:3237094151,ServerDisconnectedGameLaunchFailed:3237094152,ServerDisconnectedVideoFirstFrameSendFailed:3237094153,ServerDisconnectedVideoNextFrameSendFailed:3237094154,ServerDisconnectedFrameGrabTimedOut:3237094155,ServerDisconnectedFrameEncodeTimedOut:3237094156,ServerDisconnectedFrameSendTimedOut:3237094157,ServerDisconnectedNetworkTimedOut:3237094158,ServerDisconnectedPeerRemovedByServer:3237094159,ServerDisconnectedUnknownError:3237094160,ServerDisconnectedPeerRemovedBeforeStream:3237094161,ServerDisconnectedIntended:15868704,ServerDisconnectedHotKey:15868705,ServerDisconnectedUserLoggedInDifferentAccount:15868706,ServerDisconnectedWindowedMode:15868707,ServerDisconnectedUserIdle:15868708,ServerDisconnectedUnAuthorizedProcessDetected:15868709,ServerDisconnectedMaliciousProcessDetected:15868710,ServerDisconnectedUnKnownProcessDetected:15868711,ServerDisconnectedMinerProcessDetected:15868712,ServerDisconnectedStreamingUnsupported:15868713,ServerDisconnectedAnotherClient:15868714,ServerDisconnectedCodeIntegrityViolation:15868715,ServerDisconnectedUnauthorizedActivityDetected:15868716,ServerDisconnectedGameNotOwnedByUser:15868717,ServerDisconnectedProtectedContent:15868718,ServerDisconnectedDisplayTopologyChanged:15868719,ServerDisconnectedAbruptly:15868688,ServerDisconnectedUnknownFromPm:15868736,ServerDisconnectedUserEntitledMinutesExceeded:15868737,ServerDisconnectedClientReconnectTimeLimitExceeded:15868738,ServerDisconnectedOperatorCommandedTermination:15868739,ServerDisconnectedConcurrentSessionLimitExceeded:15868740,ServerDisconnectedMaxSessionTimeLimitExceeded:15868741,ServerDisconnectedBifrostInitiatedSessionPause:15868742,ServerDisconnectedSystemCommandTermination:15868743,ServerDisconnectedMultipleLogin:15868744,ServerDisconnectedMaintenanceMode:15868745,ServerDisconnectedMultipleTab:15868752,InvalidVideoElement:3237094400,InvalidAudioElement:3237094401},window.Ragnarok.HidType={NONE:0,DS4:1,DS5:2},window.Ragnarok.InputType={None:0,Mouse:1,Keyboard:2,Gamepad:4,Touch:8,All:15},window.Ragnarok.VideoCodecType={H264:"H264",H265:"H265",AV1:"AV1",UNKNOWN:"UNKNOWN"},window.Ragnarok.MicState={UNINITIALIZED:0,PERMISSION_PENDING:1,PERMISSION_DENIED:2,STARTED:3,NO_SUITABLE_DEVICE:4,STOPPED:5,UNSUPPORTED:6,ERROR:7},window.Ragnarok.DynamicStreamingMode={NONE:0,DRC:1,DFC:2,ALL:3},window.Ragnarok.MediaTrackKind=Ks,window.Ragnarok.StreamStopReason={CLIENT_DISCONNECTED:0,SERVER_DISCONNECTED:1,NETWORK_ERROR:2,ERROR:3},window.Ragnarok.StreamWarningType=gs,window.Ragnarok.CursorType={SOFTWARE:0,HARDWARE:1,FREE:2},window.Ragnarok.StreamingState={NONE:0,STARTING_STREAM:1,STREAMING:2,STOPPING_STREAM:3,STOPPED:4}},134:(yt,vt,rt)=>{var bt=rt(985);function ht(Et,Rt,Mt,_t,kt){var nt=bt.writeRtpDescription(Et.kind,Rt);if(nt+=bt.writeIceParameters(Et.iceGatherer.getLocalParameters()),nt+=bt.writeDtlsParameters(Et.dtlsTransport.getLocalParameters(),Mt==="offer"?"actpass":kt||"active"),nt+="a=mid:"+Et.mid+`\r
`,Et.rtpSender&&Et.rtpReceiver?nt+=`a=sendrecv\r
`:Et.rtpSender?nt+=`a=sendonly\r
`:Et.rtpReceiver?nt+=`a=recvonly\r
`:nt+=`a=inactive\r
`,Et.rtpSender){var s=Et.rtpSender._initialTrackId||Et.rtpSender.track.id;Et.rtpSender._initialTrackId=s;var b="msid:"+(_t?_t.id:"-")+" "+s+`\r
`;nt+="a="+b,nt+="a=ssrc:"+Et.sendEncodingParameters[0].ssrc+" "+b,Et.sendEncodingParameters[0].rtx&&(nt+="a=ssrc:"+Et.sendEncodingParameters[0].rtx.ssrc+" "+b,nt+="a=ssrc-group:FID "+Et.sendEncodingParameters[0].ssrc+" "+Et.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return nt+="a=ssrc:"+Et.sendEncodingParameters[0].ssrc+" cname:"+bt.localCName+`\r
`,Et.rtpSender&&Et.sendEncodingParameters[0].rtx&&(nt+="a=ssrc:"+Et.sendEncodingParameters[0].rtx.ssrc+" cname:"+bt.localCName+`\r
`),nt}function wt(Et,Rt){var Mt={codecs:[],headerExtensions:[],fecMechanisms:[]},_t=function(nt,s){nt=parseInt(nt,10);for(var b=0;b<s.length;b++)if(s[b].payloadType===nt||s[b].preferredPayloadType===nt)return s[b]},kt=function(nt,s,b,$){var _e=_t(nt.parameters.apt,b),it=_t(s.parameters.apt,$);return _e&&it&&_e.name.toLowerCase()===it.name.toLowerCase()};return Et.codecs.forEach(function(nt){for(var s=0;s<Rt.codecs.length;s++){var b=Rt.codecs[s];if(nt.name.toLowerCase()===b.name.toLowerCase()&&nt.clockRate===b.clockRate){if(nt.name.toLowerCase()==="rtx"&&nt.parameters&&b.parameters.apt&&!kt(nt,b,Et.codecs,Rt.codecs))continue;(b=JSON.parse(JSON.stringify(b))).numChannels=Math.min(nt.numChannels,b.numChannels),Mt.codecs.push(b),b.rtcpFeedback=b.rtcpFeedback.filter(function($){for(var _e=0;_e<nt.rtcpFeedback.length;_e++)if(nt.rtcpFeedback[_e].type===$.type&&nt.rtcpFeedback[_e].parameter===$.parameter)return!0;return!1});break}}}),Et.headerExtensions.forEach(function(nt){for(var s=0;s<Rt.headerExtensions.length;s++){var b=Rt.headerExtensions[s];if(nt.uri===b.uri){Mt.headerExtensions.push(b);break}}}),Mt}function At(Et,Rt,Mt){return{offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[Rt][Et].indexOf(Mt)!==-1}function Ct(Et,Rt){var Mt=Et.getRemoteCandidates().find(function(_t){return Rt.foundation===_t.foundation&&Rt.ip===_t.ip&&Rt.port===_t.port&&Rt.priority===_t.priority&&Rt.protocol===_t.protocol&&Rt.type===_t.type});return Mt||Et.addRemoteCandidate(Rt),!Mt}function dt(Et,Rt){var Mt=new Error(Rt);return Mt.name=Et,Mt.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[Et],Mt}yt.exports=function(Et,Rt){function Mt(s,b){b.addTrack(s),b.dispatchEvent(new Et.MediaStreamTrackEvent("addtrack",{track:s}))}function _t(s,b,$,_e){var it=new Event("track");it.track=b,it.receiver=$,it.transceiver={receiver:$},it.streams=_e,Et.setTimeout(function(){s._dispatchEvent("track",it)})}var kt=function(s){var b=this,$=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(it){b[it]=$[it].bind($)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",s=JSON.parse(JSON.stringify(s||{})),this.usingBundle=s.bundlePolicy==="max-bundle",s.rtcpMuxPolicy==="negotiate")throw dt("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(s.rtcpMuxPolicy||(s.rtcpMuxPolicy="require"),s.iceTransportPolicy){case"all":case"relay":break;default:s.iceTransportPolicy="all"}switch(s.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:s.bundlePolicy="balanced"}if(s.iceServers=function(it,pt){var mt=!1;return(it=JSON.parse(JSON.stringify(it))).filter(function(lt){if(lt&&(lt.urls||lt.url)){var _=lt.urls||lt.url;lt.url&&!lt.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var tt=typeof _=="string";return tt&&(_=[_]),_=_.filter(function(Tt){return Tt.indexOf("turn:")!==0||Tt.indexOf("transport=udp")===-1||Tt.indexOf("turn:[")!==-1||mt?Tt.indexOf("stun:")===0&&pt>=14393&&Tt.indexOf("?transport=udp")===-1:(mt=!0,!0)}),delete lt.url,lt.urls=tt?_[0]:_,!!_.length}})}(s.iceServers||[],Rt),this._iceGatherers=[],s.iceCandidatePoolSize)for(var _e=s.iceCandidatePoolSize;_e>0;_e--)this._iceGatherers.push(new Et.RTCIceGatherer({iceServers:s.iceServers,gatherPolicy:s.iceTransportPolicy}));else s.iceCandidatePoolSize=0;this._config=s,this.transceivers=[],this._sdpSessionId=bt.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(kt.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(kt.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),kt.prototype.onicecandidate=null,kt.prototype.onaddstream=null,kt.prototype.ontrack=null,kt.prototype.onremovestream=null,kt.prototype.onsignalingstatechange=null,kt.prototype.oniceconnectionstatechange=null,kt.prototype.onconnectionstatechange=null,kt.prototype.onicegatheringstatechange=null,kt.prototype.onnegotiationneeded=null,kt.prototype.ondatachannel=null,kt.prototype._dispatchEvent=function(s,b){this._isClosed||(this.dispatchEvent(b),typeof this["on"+s]=="function"&&this["on"+s](b))},kt.prototype._emitGatheringStateChange=function(){var s=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",s)},kt.prototype.getConfiguration=function(){return this._config},kt.prototype.getLocalStreams=function(){return this.localStreams},kt.prototype.getRemoteStreams=function(){return this.remoteStreams},kt.prototype._createTransceiver=function(s,b){var $=this.transceivers.length>0,_e={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:s,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&$)_e.iceTransport=this.transceivers[0].iceTransport,_e.dtlsTransport=this.transceivers[0].dtlsTransport;else{var it=this._createIceAndDtlsTransports();_e.iceTransport=it.iceTransport,_e.dtlsTransport=it.dtlsTransport}return b||this.transceivers.push(_e),_e},kt.prototype.addTrack=function(s,b){if(this._isClosed)throw dt("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var $;if(this.transceivers.find(function(it){return it.track===s}))throw dt("InvalidAccessError","Track already exists.");for(var _e=0;_e<this.transceivers.length;_e++)this.transceivers[_e].track||this.transceivers[_e].kind!==s.kind||($=this.transceivers[_e]);return $||($=this._createTransceiver(s.kind)),this._maybeFireNegotiationNeeded(),this.localStreams.indexOf(b)===-1&&this.localStreams.push(b),$.track=s,$.stream=b,$.rtpSender=new Et.RTCRtpSender(s,$.dtlsTransport),$.rtpSender},kt.prototype.addStream=function(s){var b=this;if(Rt>=15025)s.getTracks().forEach(function(_e){b.addTrack(_e,s)});else{var $=s.clone();s.getTracks().forEach(function(_e,it){var pt=$.getTracks()[it];_e.addEventListener("enabled",function(mt){pt.enabled=mt.enabled})}),$.getTracks().forEach(function(_e){b.addTrack(_e,$)})}},kt.prototype.removeTrack=function(s){if(this._isClosed)throw dt("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(s instanceof Et.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var b=this.transceivers.find(function(_e){return _e.rtpSender===s});if(!b)throw dt("InvalidAccessError","Sender was not created by this connection.");var $=b.stream;b.rtpSender.stop(),b.rtpSender=null,b.track=null,b.stream=null,this.transceivers.map(function(_e){return _e.stream}).indexOf($)===-1&&this.localStreams.indexOf($)>-1&&this.localStreams.splice(this.localStreams.indexOf($),1),this._maybeFireNegotiationNeeded()},kt.prototype.removeStream=function(s){var b=this;s.getTracks().forEach(function($){var _e=b.getSenders().find(function(it){return it.track===$});_e&&b.removeTrack(_e)})},kt.prototype.getSenders=function(){return this.transceivers.filter(function(s){return!!s.rtpSender}).map(function(s){return s.rtpSender})},kt.prototype.getReceivers=function(){return this.transceivers.filter(function(s){return!!s.rtpReceiver}).map(function(s){return s.rtpReceiver})},kt.prototype._createIceGatherer=function(s,b){var $=this;if(b&&s>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var _e=new Et.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(_e,"state",{value:"new",writable:!0}),this.transceivers[s].bufferedCandidateEvents=[],this.transceivers[s].bufferCandidates=function(it){var pt=!it.candidate||Object.keys(it.candidate).length===0;_e.state=pt?"completed":"gathering",$.transceivers[s].bufferedCandidateEvents!==null&&$.transceivers[s].bufferedCandidateEvents.push(it)},_e.addEventListener("localcandidate",this.transceivers[s].bufferCandidates),_e},kt.prototype._gather=function(s,b){var $=this,_e=this.transceivers[b].iceGatherer;if(!_e.onlocalcandidate){var it=this.transceivers[b].bufferedCandidateEvents;this.transceivers[b].bufferedCandidateEvents=null,_e.removeEventListener("localcandidate",this.transceivers[b].bufferCandidates),_e.onlocalcandidate=function(pt){if(!($.usingBundle&&b>0)){var mt=new Event("icecandidate");mt.candidate={sdpMid:s,sdpMLineIndex:b};var lt=pt.candidate,_=!lt||Object.keys(lt).length===0;if(_)_e.state!=="new"&&_e.state!=="gathering"||(_e.state="completed");else{_e.state==="new"&&(_e.state="gathering"),lt.component=1,lt.ufrag=_e.getLocalParameters().usernameFragment;var tt=bt.writeCandidate(lt);mt.candidate=Object.assign(mt.candidate,bt.parseCandidate(tt)),mt.candidate.candidate=tt,mt.candidate.toJSON=function(){return{candidate:mt.candidate.candidate,sdpMid:mt.candidate.sdpMid,sdpMLineIndex:mt.candidate.sdpMLineIndex,usernameFragment:mt.candidate.usernameFragment}}}var Tt=bt.getMediaSections($._localDescription.sdp);Tt[mt.candidate.sdpMLineIndex]+=_?`a=end-of-candidates\r
`:"a="+mt.candidate.candidate+`\r
`,$._localDescription.sdp=bt.getDescription($._localDescription.sdp)+Tt.join("");var It=$.transceivers.every(function(Nt){return Nt.iceGatherer&&Nt.iceGatherer.state==="completed"});$.iceGatheringState!=="gathering"&&($.iceGatheringState="gathering",$._emitGatheringStateChange()),_||$._dispatchEvent("icecandidate",mt),It&&($._dispatchEvent("icecandidate",new Event("icecandidate")),$.iceGatheringState="complete",$._emitGatheringStateChange())}},Et.setTimeout(function(){it.forEach(function(pt){_e.onlocalcandidate(pt)})},0)}},kt.prototype._createIceAndDtlsTransports=function(){var s=this,b=new Et.RTCIceTransport(null);b.onicestatechange=function(){s._updateIceConnectionState(),s._updateConnectionState()};var $=new Et.RTCDtlsTransport(b);return $.ondtlsstatechange=function(){s._updateConnectionState()},$.onerror=function(){Object.defineProperty($,"state",{value:"failed",writable:!0}),s._updateConnectionState()},{iceTransport:b,dtlsTransport:$}},kt.prototype._disposeIceAndDtlsTransports=function(s){var b=this.transceivers[s].iceGatherer;b&&(delete b.onlocalcandidate,delete this.transceivers[s].iceGatherer);var $=this.transceivers[s].iceTransport;$&&(delete $.onicestatechange,delete this.transceivers[s].iceTransport);var _e=this.transceivers[s].dtlsTransport;_e&&(delete _e.ondtlsstatechange,delete _e.onerror,delete this.transceivers[s].dtlsTransport)},kt.prototype._transceive=function(s,b,$){var _e=wt(s.localCapabilities,s.remoteCapabilities);b&&s.rtpSender&&(_e.encodings=s.sendEncodingParameters,_e.rtcp={cname:bt.localCName,compound:s.rtcpParameters.compound},s.recvEncodingParameters.length&&(_e.rtcp.ssrc=s.recvEncodingParameters[0].ssrc),s.rtpSender.send(_e)),$&&s.rtpReceiver&&_e.codecs.length>0&&(s.kind==="video"&&s.recvEncodingParameters&&Rt<15019&&s.recvEncodingParameters.forEach(function(it){delete it.rtx}),s.recvEncodingParameters.length?_e.encodings=s.recvEncodingParameters:_e.encodings=[{}],_e.rtcp={compound:s.rtcpParameters.compound},s.rtcpParameters.cname&&(_e.rtcp.cname=s.rtcpParameters.cname),s.sendEncodingParameters.length&&(_e.rtcp.ssrc=s.sendEncodingParameters[0].ssrc),s.rtpReceiver.receive(_e))},kt.prototype.setLocalDescription=function(s){var b,$,_e=this;if(["offer","answer"].indexOf(s.type)===-1)return Promise.reject(dt("TypeError",'Unsupported type "'+s.type+'"'));if(!At("setLocalDescription",s.type,_e.signalingState)||_e._isClosed)return Promise.reject(dt("InvalidStateError","Can not set local "+s.type+" in state "+_e.signalingState));if(s.type==="offer")b=bt.splitSections(s.sdp),$=b.shift(),b.forEach(function(pt,mt){var lt=bt.parseRtpParameters(pt);_e.transceivers[mt].localCapabilities=lt}),_e.transceivers.forEach(function(pt,mt){_e._gather(pt.mid,mt)});else if(s.type==="answer"){b=bt.splitSections(_e._remoteDescription.sdp),$=b.shift();var it=bt.matchPrefix($,"a=ice-lite").length>0;b.forEach(function(pt,mt){var lt=_e.transceivers[mt],_=lt.iceGatherer,tt=lt.iceTransport,Tt=lt.dtlsTransport,It=lt.localCapabilities,Nt=lt.remoteCapabilities;if(!(bt.isRejected(pt)&&bt.matchPrefix(pt,"a=bundle-only").length===0||lt.rejected)){var Ut=bt.getIceParameters(pt,$),Gt=bt.getDtlsParameters(pt,$);it&&(Gt.role="server"),_e.usingBundle&&mt!==0||(_e._gather(lt.mid,mt),tt.state==="new"&&tt.start(_,Ut,it?"controlling":"controlled"),Tt.state==="new"&&Tt.start(Gt));var Pt=wt(It,Nt);_e._transceive(lt,Pt.codecs.length>0,!1)}})}return _e._localDescription={type:s.type,sdp:s.sdp},s.type==="offer"?_e._updateSignalingState("have-local-offer"):_e._updateSignalingState("stable"),Promise.resolve()},kt.prototype.setRemoteDescription=function(s){var b=this;if(["offer","answer"].indexOf(s.type)===-1)return Promise.reject(dt("TypeError",'Unsupported type "'+s.type+'"'));if(!At("setRemoteDescription",s.type,b.signalingState)||b._isClosed)return Promise.reject(dt("InvalidStateError","Can not set remote "+s.type+" in state "+b.signalingState));var $={};b.remoteStreams.forEach(function(tt){$[tt.id]=tt});var _e=[],it=bt.splitSections(s.sdp),pt=it.shift(),mt=bt.matchPrefix(pt,"a=ice-lite").length>0,lt=bt.matchPrefix(pt,"a=group:BUNDLE ").length>0;b.usingBundle=lt;var _=bt.matchPrefix(pt,"a=ice-options:")[0];return b.canTrickleIceCandidates=!!_&&_.substr(14).split(" ").indexOf("trickle")>=0,it.forEach(function(tt,Tt){var It=bt.splitLines(tt),Nt=bt.getKind(tt),Ut=bt.isRejected(tt)&&bt.matchPrefix(tt,"a=bundle-only").length===0,Gt=It[0].substr(2).split(" ")[2],Pt=bt.getDirection(tt,pt),qt=bt.parseMsid(tt),Kt=bt.getMid(tt)||bt.generateIdentifier();if(Ut||Nt==="application"&&(Gt==="DTLS/SCTP"||Gt==="UDP/DTLS/SCTP"))b.transceivers[Tt]={mid:Kt,kind:Nt,protocol:Gt,rejected:!0};else{var jt,Ht,Bt,Jt,sr,hr,Ar,gn,Lr;!Ut&&b.transceivers[Tt]&&b.transceivers[Tt].rejected&&(b.transceivers[Tt]=b._createTransceiver(Nt,!0));var wr,En,Dr=bt.parseRtpParameters(tt);Ut||(wr=bt.getIceParameters(tt,pt),(En=bt.getDtlsParameters(tt,pt)).role="client"),Ar=bt.parseRtpEncodingParameters(tt);var Qr=bt.parseRtcpParameters(tt),Dn=bt.matchPrefix(tt,"a=end-of-candidates",pt).length>0,Br=bt.matchPrefix(tt,"a=candidate:").map(function(Fr){return bt.parseCandidate(Fr)}).filter(function(Fr){return Fr.component===1});if((s.type==="offer"||s.type==="answer")&&!Ut&&lt&&Tt>0&&b.transceivers[Tt]&&(b._disposeIceAndDtlsTransports(Tt),b.transceivers[Tt].iceGatherer=b.transceivers[0].iceGatherer,b.transceivers[Tt].iceTransport=b.transceivers[0].iceTransport,b.transceivers[Tt].dtlsTransport=b.transceivers[0].dtlsTransport,b.transceivers[Tt].rtpSender&&b.transceivers[Tt].rtpSender.setTransport(b.transceivers[0].dtlsTransport),b.transceivers[Tt].rtpReceiver&&b.transceivers[Tt].rtpReceiver.setTransport(b.transceivers[0].dtlsTransport)),s.type!=="offer"||Ut)s.type!=="answer"||Ut||(Ht=(jt=b.transceivers[Tt]).iceGatherer,Bt=jt.iceTransport,Jt=jt.dtlsTransport,sr=jt.rtpReceiver,hr=jt.sendEncodingParameters,gn=jt.localCapabilities,b.transceivers[Tt].recvEncodingParameters=Ar,b.transceivers[Tt].remoteCapabilities=Dr,b.transceivers[Tt].rtcpParameters=Qr,Br.length&&Bt.state==="new"&&(!mt&&!Dn||lt&&Tt!==0?Br.forEach(function(Fr){Ct(jt.iceTransport,Fr)}):Bt.setRemoteCandidates(Br)),lt&&Tt!==0||(Bt.state==="new"&&Bt.start(Ht,wr,"controlling"),Jt.state==="new"&&Jt.start(En)),!wt(jt.localCapabilities,jt.remoteCapabilities).codecs.filter(function(Fr){return Fr.name.toLowerCase()==="rtx"}).length&&jt.sendEncodingParameters[0].rtx&&delete jt.sendEncodingParameters[0].rtx,b._transceive(jt,Pt==="sendrecv"||Pt==="recvonly",Pt==="sendrecv"||Pt==="sendonly"),!sr||Pt!=="sendrecv"&&Pt!=="sendonly"?delete jt.rtpReceiver:(Lr=sr.track,qt?($[qt.stream]||($[qt.stream]=new Et.MediaStream),Mt(Lr,$[qt.stream]),_e.push([Lr,sr,$[qt.stream]])):($.default||($.default=new Et.MediaStream),Mt(Lr,$.default),_e.push([Lr,sr,$.default]))));else{(jt=b.transceivers[Tt]||b._createTransceiver(Nt)).mid=Kt,jt.iceGatherer||(jt.iceGatherer=b._createIceGatherer(Tt,lt)),Br.length&&jt.iceTransport.state==="new"&&(!Dn||lt&&Tt!==0?Br.forEach(function(Fr){Ct(jt.iceTransport,Fr)}):jt.iceTransport.setRemoteCandidates(Br)),gn=Et.RTCRtpReceiver.getCapabilities(Nt),Rt<15019&&(gn.codecs=gn.codecs.filter(function(Fr){return Fr.name!=="rtx"})),hr=jt.sendEncodingParameters||[{ssrc:1001*(2*Tt+2)}];var Gr,Ln=!1;Pt==="sendrecv"||Pt==="sendonly"?(Ln=!jt.rtpReceiver,sr=jt.rtpReceiver||new Et.RTCRtpReceiver(jt.dtlsTransport,Nt),Ln&&(Lr=sr.track,qt&&qt.stream==="-"||(qt?($[qt.stream]||($[qt.stream]=new Et.MediaStream,Object.defineProperty($[qt.stream],"id",{get:function(){return qt.stream}})),Object.defineProperty(Lr,"id",{get:function(){return qt.track}}),Gr=$[qt.stream]):($.default||($.default=new Et.MediaStream),Gr=$.default)),Gr&&(Mt(Lr,Gr),jt.associatedRemoteMediaStreams.push(Gr)),_e.push([Lr,sr,Gr]))):jt.rtpReceiver&&jt.rtpReceiver.track&&(jt.associatedRemoteMediaStreams.forEach(function(Fr){var _i=Fr.getTracks().find(function(Kn){return Kn.id===jt.rtpReceiver.track.id});_i&&function(Kn,Wt){Wt.removeTrack(Kn),Wt.dispatchEvent(new Et.MediaStreamTrackEvent("removetrack",{track:Kn}))}(_i,Fr)}),jt.associatedRemoteMediaStreams=[]),jt.localCapabilities=gn,jt.remoteCapabilities=Dr,jt.rtpReceiver=sr,jt.rtcpParameters=Qr,jt.sendEncodingParameters=hr,jt.recvEncodingParameters=Ar,b._transceive(b.transceivers[Tt],!1,Ln)}}}),b._dtlsRole===void 0&&(b._dtlsRole=s.type==="offer"?"active":"passive"),b._remoteDescription={type:s.type,sdp:s.sdp},s.type==="offer"?b._updateSignalingState("have-remote-offer"):b._updateSignalingState("stable"),Object.keys($).forEach(function(tt){var Tt=$[tt];if(Tt.getTracks().length){if(b.remoteStreams.indexOf(Tt)===-1){b.remoteStreams.push(Tt);var It=new Event("addstream");It.stream=Tt,Et.setTimeout(function(){b._dispatchEvent("addstream",It)})}_e.forEach(function(Nt){var Ut=Nt[0],Gt=Nt[1];Tt.id===Nt[2].id&&_t(b,Ut,Gt,[Tt])})}}),_e.forEach(function(tt){tt[2]||_t(b,tt[0],tt[1],[])}),Et.setTimeout(function(){b&&b.transceivers&&b.transceivers.forEach(function(tt){tt.iceTransport&&tt.iceTransport.state==="new"&&tt.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),tt.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},kt.prototype.close=function(){this.transceivers.forEach(function(s){s.iceTransport&&s.iceTransport.stop(),s.dtlsTransport&&s.dtlsTransport.stop(),s.rtpSender&&s.rtpSender.stop(),s.rtpReceiver&&s.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},kt.prototype._updateSignalingState=function(s){this.signalingState=s;var b=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",b)},kt.prototype._maybeFireNegotiationNeeded=function(){var s=this;this.signalingState==="stable"&&this.needNegotiation!==!0&&(this.needNegotiation=!0,Et.setTimeout(function(){if(s.needNegotiation){s.needNegotiation=!1;var b=new Event("negotiationneeded");s._dispatchEvent("negotiationneeded",b)}},0))},kt.prototype._updateIceConnectionState=function(){var s,b={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(_e){_e.iceTransport&&!_e.rejected&&b[_e.iceTransport.state]++}),s="new",b.failed>0?s="failed":b.checking>0?s="checking":b.disconnected>0?s="disconnected":b.new>0?s="new":b.connected>0?s="connected":b.completed>0&&(s="completed"),s!==this.iceConnectionState){this.iceConnectionState=s;var $=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",$)}},kt.prototype._updateConnectionState=function(){var s,b={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(_e){_e.iceTransport&&_e.dtlsTransport&&!_e.rejected&&(b[_e.iceTransport.state]++,b[_e.dtlsTransport.state]++)}),b.connected+=b.completed,s="new",b.failed>0?s="failed":b.connecting>0?s="connecting":b.disconnected>0?s="disconnected":b.new>0?s="new":b.connected>0&&(s="connected"),s!==this.connectionState){this.connectionState=s;var $=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",$)}},kt.prototype.createOffer=function(){var s=this;if(s._isClosed)return Promise.reject(dt("InvalidStateError","Can not call createOffer after close"));var b=s.transceivers.filter(function(mt){return mt.kind==="audio"}).length,$=s.transceivers.filter(function(mt){return mt.kind==="video"}).length,_e=arguments[0];if(_e){if(_e.mandatory||_e.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");_e.offerToReceiveAudio!==void 0&&(b=_e.offerToReceiveAudio===!0?1:_e.offerToReceiveAudio===!1?0:_e.offerToReceiveAudio),_e.offerToReceiveVideo!==void 0&&($=_e.offerToReceiveVideo===!0?1:_e.offerToReceiveVideo===!1?0:_e.offerToReceiveVideo)}for(s.transceivers.forEach(function(mt){mt.kind==="audio"?--b<0&&(mt.wantReceive=!1):mt.kind==="video"&&--$<0&&(mt.wantReceive=!1)});b>0||$>0;)b>0&&(s._createTransceiver("audio"),b--),$>0&&(s._createTransceiver("video"),$--);var it=bt.writeSessionBoilerplate(s._sdpSessionId,s._sdpSessionVersion++);s.transceivers.forEach(function(mt,lt){var _=mt.track,tt=mt.kind,Tt=mt.mid||bt.generateIdentifier();mt.mid=Tt,mt.iceGatherer||(mt.iceGatherer=s._createIceGatherer(lt,s.usingBundle));var It=Et.RTCRtpSender.getCapabilities(tt);Rt<15019&&(It.codecs=It.codecs.filter(function(Ut){return Ut.name!=="rtx"})),It.codecs.forEach(function(Ut){Ut.name==="H264"&&Ut.parameters["level-asymmetry-allowed"]===void 0&&(Ut.parameters["level-asymmetry-allowed"]="1"),mt.remoteCapabilities&&mt.remoteCapabilities.codecs&&mt.remoteCapabilities.codecs.forEach(function(Gt){Ut.name.toLowerCase()===Gt.name.toLowerCase()&&Ut.clockRate===Gt.clockRate&&(Ut.preferredPayloadType=Gt.payloadType)})}),It.headerExtensions.forEach(function(Ut){(mt.remoteCapabilities&&mt.remoteCapabilities.headerExtensions||[]).forEach(function(Gt){Ut.uri===Gt.uri&&(Ut.id=Gt.id)})});var Nt=mt.sendEncodingParameters||[{ssrc:1001*(2*lt+1)}];_&&Rt>=15019&&tt==="video"&&!Nt[0].rtx&&(Nt[0].rtx={ssrc:Nt[0].ssrc+1}),mt.wantReceive&&(mt.rtpReceiver=new Et.RTCRtpReceiver(mt.dtlsTransport,tt)),mt.localCapabilities=It,mt.sendEncodingParameters=Nt}),s._config.bundlePolicy!=="max-compat"&&(it+="a=group:BUNDLE "+s.transceivers.map(function(mt){return mt.mid}).join(" ")+`\r
`),it+=`a=ice-options:trickle\r
`,s.transceivers.forEach(function(mt,lt){it+=ht(mt,mt.localCapabilities,"offer",mt.stream,s._dtlsRole),it+=`a=rtcp-rsize\r
`,!mt.iceGatherer||s.iceGatheringState==="new"||lt!==0&&s.usingBundle||(mt.iceGatherer.getLocalCandidates().forEach(function(_){_.component=1,it+="a="+bt.writeCandidate(_)+`\r
`}),mt.iceGatherer.state==="completed"&&(it+=`a=end-of-candidates\r
`))});var pt=new Et.RTCSessionDescription({type:"offer",sdp:it});return Promise.resolve(pt)},kt.prototype.createAnswer=function(){var s=this;if(s._isClosed)return Promise.reject(dt("InvalidStateError","Can not call createAnswer after close"));if(s.signalingState!=="have-remote-offer"&&s.signalingState!=="have-local-pranswer")return Promise.reject(dt("InvalidStateError","Can not call createAnswer in signalingState "+s.signalingState));var b=bt.writeSessionBoilerplate(s._sdpSessionId,s._sdpSessionVersion++);s.usingBundle&&(b+="a=group:BUNDLE "+s.transceivers.map(function(it){return it.mid}).join(" ")+`\r
`),b+=`a=ice-options:trickle\r
`;var $=bt.getMediaSections(s._remoteDescription.sdp).length;s.transceivers.forEach(function(it,pt){if(!(pt+1>$)){if(it.rejected)return it.kind==="application"?it.protocol==="DTLS/SCTP"?b+=`m=application 0 DTLS/SCTP 5000\r
`:b+="m=application 0 "+it.protocol+` webrtc-datachannel\r
`:it.kind==="audio"?b+=`m=audio 0 UDP/TLS/RTP/SAVPF 0\r
a=rtpmap:0 PCMU/8000\r
`:it.kind==="video"&&(b+=`m=video 0 UDP/TLS/RTP/SAVPF 120\r
a=rtpmap:120 VP8/90000\r
`),void(b+=`c=IN IP4 0.0.0.0\r
a=inactive\r
a=mid:`+it.mid+`\r
`);var mt;it.stream&&(it.kind==="audio"?mt=it.stream.getAudioTracks()[0]:it.kind==="video"&&(mt=it.stream.getVideoTracks()[0]),mt&&Rt>=15019&&it.kind==="video"&&!it.sendEncodingParameters[0].rtx&&(it.sendEncodingParameters[0].rtx={ssrc:it.sendEncodingParameters[0].ssrc+1}));var lt=wt(it.localCapabilities,it.remoteCapabilities);!lt.codecs.filter(function(_){return _.name.toLowerCase()==="rtx"}).length&&it.sendEncodingParameters[0].rtx&&delete it.sendEncodingParameters[0].rtx,b+=ht(it,lt,"answer",it.stream,s._dtlsRole),it.rtcpParameters&&it.rtcpParameters.reducedSize&&(b+=`a=rtcp-rsize\r
`)}});var _e=new Et.RTCSessionDescription({type:"answer",sdp:b});return Promise.resolve(_e)},kt.prototype.addIceCandidate=function(s){var b,$=this;return s&&s.sdpMLineIndex===void 0&&!s.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(_e,it){if(!$._remoteDescription)return it(dt("InvalidStateError","Can not add ICE candidate without a remote description"));if(s&&s.candidate!==""){var pt=s.sdpMLineIndex;if(s.sdpMid){for(var mt=0;mt<$.transceivers.length;mt++)if($.transceivers[mt].mid===s.sdpMid){pt=mt;break}}var lt=$.transceivers[pt];if(!lt)return it(dt("OperationError","Can not add ICE candidate"));if(lt.rejected)return _e();var _=Object.keys(s.candidate).length>0?bt.parseCandidate(s.candidate):{};if(_.protocol==="tcp"&&(_.port===0||_.port===9)||_.component&&_.component!==1)return _e();if((pt===0||pt>0&&lt.iceTransport!==$.transceivers[0].iceTransport)&&!Ct(lt.iceTransport,_))return it(dt("OperationError","Can not add ICE candidate"));var tt=s.candidate.trim();tt.indexOf("a=")===0&&(tt=tt.substr(2)),(b=bt.getMediaSections($._remoteDescription.sdp))[pt]+="a="+(_.type?tt:"end-of-candidates")+`\r
`,$._remoteDescription.sdp=bt.getDescription($._remoteDescription.sdp)+b.join("")}else for(var Tt=0;Tt<$.transceivers.length&&($.transceivers[Tt].rejected||($.transceivers[Tt].iceTransport.addRemoteCandidate({}),(b=bt.getMediaSections($._remoteDescription.sdp))[Tt]+=`a=end-of-candidates\r
`,$._remoteDescription.sdp=bt.getDescription($._remoteDescription.sdp)+b.join(""),!$.usingBundle));Tt++);_e()})},kt.prototype.getStats=function(s){if(s&&s instanceof Et.MediaStreamTrack){var b=null;if(this.transceivers.forEach(function(_e){_e.rtpSender&&_e.rtpSender.track===s?b=_e.rtpSender:_e.rtpReceiver&&_e.rtpReceiver.track===s&&(b=_e.rtpReceiver)}),!b)throw dt("InvalidAccessError","Invalid selector.");return b.getStats()}var $=[];return this.transceivers.forEach(function(_e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(it){_e[it]&&$.push(_e[it].getStats())})}),Promise.all($).then(function(_e){var it=new Map;return _e.forEach(function(pt){pt.forEach(function(mt){it.set(mt.id,mt)})}),it})},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach(function(s){var b=Et[s];if(b&&b.prototype&&b.prototype.getStats){var $=b.prototype.getStats;b.prototype.getStats=function(){return $.apply(this).then(function(_e){var it=new Map;return Object.keys(_e).forEach(function(pt){var mt;_e[pt].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(mt=_e[pt]).type]||mt.type,it.set(pt,_e[pt])}),it})}}});var nt=["createOffer","createAnswer"];return nt.forEach(function(s){var b=kt.prototype[s];kt.prototype[s]=function(){var $=arguments;return typeof $[0]=="function"||typeof $[1]=="function"?b.apply(this,[arguments[2]]).then(function(_e){typeof $[0]=="function"&&$[0].apply(null,[_e])},function(_e){typeof $[1]=="function"&&$[1].apply(null,[_e])}):b.apply(this,arguments)}}),(nt=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach(function(s){var b=kt.prototype[s];kt.prototype[s]=function(){var $=arguments;return typeof $[1]=="function"||typeof $[2]=="function"?b.apply(this,arguments).then(function(){typeof $[1]=="function"&&$[1].apply(null)},function(_e){typeof $[2]=="function"&&$[2].apply(null,[_e])}):b.apply(this,arguments)}}),["getStats"].forEach(function(s){var b=kt.prototype[s];kt.prototype[s]=function(){var $=arguments;return typeof $[1]=="function"?b.apply(this,arguments).then(function(){typeof $[1]=="function"&&$[1].apply(null)}):b.apply(this,arguments)}}),kt}},985:yt=>{var vt={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};vt.localCName=vt.generateIdentifier(),vt.splitLines=function(rt){return rt.trim().split(`
`).map(function(bt){return bt.trim()})},vt.splitSections=function(rt){return rt.split(`
m=`).map(function(bt,ht){return(ht>0?"m="+bt:bt).trim()+`\r
`})},vt.getDescription=function(rt){var bt=vt.splitSections(rt);return bt&&bt[0]},vt.getMediaSections=function(rt){var bt=vt.splitSections(rt);return bt.shift(),bt},vt.matchPrefix=function(rt,bt){return vt.splitLines(rt).filter(function(ht){return ht.indexOf(bt)===0})},vt.parseCandidate=function(rt){for(var bt,ht={foundation:(bt=rt.indexOf("a=candidate:")===0?rt.substring(12).split(" "):rt.substring(10).split(" "))[0],component:parseInt(bt[1],10),protocol:bt[2].toLowerCase(),priority:parseInt(bt[3],10),ip:bt[4],address:bt[4],port:parseInt(bt[5],10),type:bt[7]},wt=8;wt<bt.length;wt+=2)switch(bt[wt]){case"raddr":ht.relatedAddress=bt[wt+1];break;case"rport":ht.relatedPort=parseInt(bt[wt+1],10);break;case"tcptype":ht.tcpType=bt[wt+1];break;case"ufrag":ht.ufrag=bt[wt+1],ht.usernameFragment=bt[wt+1];break;default:ht[bt[wt]]=bt[wt+1]}return ht},vt.writeCandidate=function(rt){var bt=[];bt.push(rt.foundation),bt.push(rt.component),bt.push(rt.protocol.toUpperCase()),bt.push(rt.priority),bt.push(rt.address||rt.ip),bt.push(rt.port);var ht=rt.type;return bt.push("typ"),bt.push(ht),ht!=="host"&&rt.relatedAddress&&rt.relatedPort&&(bt.push("raddr"),bt.push(rt.relatedAddress),bt.push("rport"),bt.push(rt.relatedPort)),rt.tcpType&&rt.protocol.toLowerCase()==="tcp"&&(bt.push("tcptype"),bt.push(rt.tcpType)),(rt.usernameFragment||rt.ufrag)&&(bt.push("ufrag"),bt.push(rt.usernameFragment||rt.ufrag)),"candidate:"+bt.join(" ")},vt.parseIceOptions=function(rt){return rt.substr(14).split(" ")},vt.parseRtpMap=function(rt){var bt=rt.substr(9).split(" "),ht={payloadType:parseInt(bt.shift(),10)};return bt=bt[0].split("/"),ht.name=bt[0],ht.clockRate=parseInt(bt[1],10),ht.channels=bt.length===3?parseInt(bt[2],10):1,ht.numChannels=ht.channels,ht},vt.writeRtpMap=function(rt){var bt=rt.payloadType;rt.preferredPayloadType!==void 0&&(bt=rt.preferredPayloadType);var ht=rt.channels||rt.numChannels||1;return"a=rtpmap:"+bt+" "+rt.name+"/"+rt.clockRate+(ht!==1?"/"+ht:"")+`\r
`},vt.parseExtmap=function(rt){var bt=rt.substr(9).split(" ");return{id:parseInt(bt[0],10),direction:bt[0].indexOf("/")>0?bt[0].split("/")[1]:"sendrecv",uri:bt[1]}},vt.writeExtmap=function(rt){return"a=extmap:"+(rt.id||rt.preferredId)+(rt.direction&&rt.direction!=="sendrecv"?"/"+rt.direction:"")+" "+rt.uri+`\r
`},vt.parseFmtp=function(rt){for(var bt,ht={},wt=rt.substr(rt.indexOf(" ")+1).split(";"),At=0;At<wt.length;At++)ht[(bt=wt[At].trim().split("="))[0].trim()]=bt[1];return ht},vt.writeFmtp=function(rt){var bt="",ht=rt.payloadType;if(rt.preferredPayloadType!==void 0&&(ht=rt.preferredPayloadType),rt.parameters&&Object.keys(rt.parameters).length){var wt=[];Object.keys(rt.parameters).forEach(function(At){rt.parameters[At]?wt.push(At+"="+rt.parameters[At]):wt.push(At)}),bt+="a=fmtp:"+ht+" "+wt.join(";")+`\r
`}return bt},vt.parseRtcpFb=function(rt){var bt=rt.substr(rt.indexOf(" ")+1).split(" ");return{type:bt.shift(),parameter:bt.join(" ")}},vt.writeRtcpFb=function(rt){var bt="",ht=rt.payloadType;return rt.preferredPayloadType!==void 0&&(ht=rt.preferredPayloadType),rt.rtcpFeedback&&rt.rtcpFeedback.length&&rt.rtcpFeedback.forEach(function(wt){bt+="a=rtcp-fb:"+ht+" "+wt.type+(wt.parameter&&wt.parameter.length?" "+wt.parameter:"")+`\r
`}),bt},vt.parseSsrcMedia=function(rt){var bt=rt.indexOf(" "),ht={ssrc:parseInt(rt.substr(7,bt-7),10)},wt=rt.indexOf(":",bt);return wt>-1?(ht.attribute=rt.substr(bt+1,wt-bt-1),ht.value=rt.substr(wt+1)):ht.attribute=rt.substr(bt+1),ht},vt.parseSsrcGroup=function(rt){var bt=rt.substr(13).split(" ");return{semantics:bt.shift(),ssrcs:bt.map(function(ht){return parseInt(ht,10)})}},vt.getMid=function(rt){var bt=vt.matchPrefix(rt,"a=mid:")[0];if(bt)return bt.substr(6)},vt.parseFingerprint=function(rt){var bt=rt.substr(14).split(" ");return{algorithm:bt[0].toLowerCase(),value:bt[1]}},vt.getDtlsParameters=function(rt,bt){return{role:"auto",fingerprints:vt.matchPrefix(rt+bt,"a=fingerprint:").map(vt.parseFingerprint)}},vt.writeDtlsParameters=function(rt,bt){var ht="a=setup:"+bt+`\r
`;return rt.fingerprints.forEach(function(wt){ht+="a=fingerprint:"+wt.algorithm+" "+wt.value+`\r
`}),ht},vt.parseCryptoLine=function(rt){var bt=rt.substr(9).split(" ");return{tag:parseInt(bt[0],10),cryptoSuite:bt[1],keyParams:bt[2],sessionParams:bt.slice(3)}},vt.writeCryptoLine=function(rt){return"a=crypto:"+rt.tag+" "+rt.cryptoSuite+" "+(typeof rt.keyParams=="object"?vt.writeCryptoKeyParams(rt.keyParams):rt.keyParams)+(rt.sessionParams?" "+rt.sessionParams.join(" "):"")+`\r
`},vt.parseCryptoKeyParams=function(rt){if(rt.indexOf("inline:")!==0)return null;var bt=rt.substr(7).split("|");return{keyMethod:"inline",keySalt:bt[0],lifeTime:bt[1],mkiValue:bt[2]?bt[2].split(":")[0]:void 0,mkiLength:bt[2]?bt[2].split(":")[1]:void 0}},vt.writeCryptoKeyParams=function(rt){return rt.keyMethod+":"+rt.keySalt+(rt.lifeTime?"|"+rt.lifeTime:"")+(rt.mkiValue&&rt.mkiLength?"|"+rt.mkiValue+":"+rt.mkiLength:"")},vt.getCryptoParameters=function(rt,bt){return vt.matchPrefix(rt+bt,"a=crypto:").map(vt.parseCryptoLine)},vt.getIceParameters=function(rt,bt){var ht=vt.matchPrefix(rt+bt,"a=ice-ufrag:")[0],wt=vt.matchPrefix(rt+bt,"a=ice-pwd:")[0];return ht&&wt?{usernameFragment:ht.substr(12),password:wt.substr(10)}:null},vt.writeIceParameters=function(rt){return"a=ice-ufrag:"+rt.usernameFragment+`\r
a=ice-pwd:`+rt.password+`\r
`},vt.parseRtpParameters=function(rt){for(var bt={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},ht=vt.splitLines(rt)[0].split(" "),wt=3;wt<ht.length;wt++){var At=ht[wt],Ct=vt.matchPrefix(rt,"a=rtpmap:"+At+" ")[0];if(Ct){var dt=vt.parseRtpMap(Ct),Et=vt.matchPrefix(rt,"a=fmtp:"+At+" ");switch(dt.parameters=Et.length?vt.parseFmtp(Et[0]):{},dt.rtcpFeedback=vt.matchPrefix(rt,"a=rtcp-fb:"+At+" ").map(vt.parseRtcpFb),bt.codecs.push(dt),dt.name.toUpperCase()){case"RED":case"ULPFEC":bt.fecMechanisms.push(dt.name.toUpperCase())}}}return vt.matchPrefix(rt,"a=extmap:").forEach(function(Rt){bt.headerExtensions.push(vt.parseExtmap(Rt))}),bt},vt.writeRtpDescription=function(rt,bt){var ht="";ht+="m="+rt+" ",ht+=bt.codecs.length>0?"9":"0",ht+=" UDP/TLS/RTP/SAVPF ",ht+=bt.codecs.map(function(At){return At.preferredPayloadType!==void 0?At.preferredPayloadType:At.payloadType}).join(" ")+`\r
`,ht+=`c=IN IP4 0.0.0.0\r
`,ht+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,bt.codecs.forEach(function(At){ht+=vt.writeRtpMap(At),ht+=vt.writeFmtp(At),ht+=vt.writeRtcpFb(At)});var wt=0;return bt.codecs.forEach(function(At){At.maxptime>wt&&(wt=At.maxptime)}),wt>0&&(ht+="a=maxptime:"+wt+`\r
`),ht+=`a=rtcp-mux\r
`,bt.headerExtensions&&bt.headerExtensions.forEach(function(At){ht+=vt.writeExtmap(At)}),ht},vt.parseRtpEncodingParameters=function(rt){var bt,ht=[],wt=vt.parseRtpParameters(rt),At=wt.fecMechanisms.indexOf("RED")!==-1,Ct=wt.fecMechanisms.indexOf("ULPFEC")!==-1,dt=vt.matchPrefix(rt,"a=ssrc:").map(function(_t){return vt.parseSsrcMedia(_t)}).filter(function(_t){return _t.attribute==="cname"}),Et=dt.length>0&&dt[0].ssrc,Rt=vt.matchPrefix(rt,"a=ssrc-group:FID").map(function(_t){return _t.substr(17).split(" ").map(function(kt){return parseInt(kt,10)})});Rt.length>0&&Rt[0].length>1&&Rt[0][0]===Et&&(bt=Rt[0][1]),wt.codecs.forEach(function(_t){if(_t.name.toUpperCase()==="RTX"&&_t.parameters.apt){var kt={ssrc:Et,codecPayloadType:parseInt(_t.parameters.apt,10)};Et&&bt&&(kt.rtx={ssrc:bt}),ht.push(kt),At&&((kt=JSON.parse(JSON.stringify(kt))).fec={ssrc:Et,mechanism:Ct?"red+ulpfec":"red"},ht.push(kt))}}),ht.length===0&&Et&&ht.push({ssrc:Et});var Mt=vt.matchPrefix(rt,"b=");return Mt.length&&(Mt=Mt[0].indexOf("b=TIAS:")===0?parseInt(Mt[0].substr(7),10):Mt[0].indexOf("b=AS:")===0?1e3*parseInt(Mt[0].substr(5),10)*.95-16e3:void 0,ht.forEach(function(_t){_t.maxBitrate=Mt})),ht},vt.parseRtcpParameters=function(rt){var bt={},ht=vt.matchPrefix(rt,"a=ssrc:").map(function(Ct){return vt.parseSsrcMedia(Ct)}).filter(function(Ct){return Ct.attribute==="cname"})[0];ht&&(bt.cname=ht.value,bt.ssrc=ht.ssrc);var wt=vt.matchPrefix(rt,"a=rtcp-rsize");bt.reducedSize=wt.length>0,bt.compound=wt.length===0;var At=vt.matchPrefix(rt,"a=rtcp-mux");return bt.mux=At.length>0,bt},vt.parseMsid=function(rt){var bt,ht=vt.matchPrefix(rt,"a=msid:");if(ht.length===1)return{stream:(bt=ht[0].substr(7).split(" "))[0],track:bt[1]};var wt=vt.matchPrefix(rt,"a=ssrc:").map(function(At){return vt.parseSsrcMedia(At)}).filter(function(At){return At.attribute==="msid"});return wt.length>0?{stream:(bt=wt[0].value.split(" "))[0],track:bt[1]}:void 0},vt.parseSctpDescription=function(rt){var bt,ht=vt.parseMLine(rt),wt=vt.matchPrefix(rt,"a=max-message-size:");wt.length>0&&(bt=parseInt(wt[0].substr(19),10)),isNaN(bt)&&(bt=65536);var At=vt.matchPrefix(rt,"a=sctp-port:");if(At.length>0)return{port:parseInt(At[0].substr(12),10),protocol:ht.fmt,maxMessageSize:bt};if(vt.matchPrefix(rt,"a=sctpmap:").length>0){var Ct=vt.matchPrefix(rt,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(Ct[0],10),protocol:Ct[1],maxMessageSize:bt}}},vt.writeSctpDescription=function(rt,bt){var ht=[];return ht=rt.protocol!=="DTLS/SCTP"?["m="+rt.kind+" 9 "+rt.protocol+" "+bt.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+bt.port+`\r
`]:["m="+rt.kind+" 9 "+rt.protocol+" "+bt.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+bt.port+" "+bt.protocol+` 65535\r
`],bt.maxMessageSize!==void 0&&ht.push("a=max-message-size:"+bt.maxMessageSize+`\r
`),ht.join("")},vt.generateSessionId=function(){return Math.random().toString().substr(2,21)},vt.writeSessionBoilerplate=function(rt,bt,ht){var wt=bt!==void 0?bt:2;return`v=0\r
o=`+(ht||"thisisadapterortc")+" "+(rt||vt.generateSessionId())+" "+wt+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},vt.writeMediaSection=function(rt,bt,ht,wt){var At=vt.writeRtpDescription(rt.kind,bt);if(At+=vt.writeIceParameters(rt.iceGatherer.getLocalParameters()),At+=vt.writeDtlsParameters(rt.dtlsTransport.getLocalParameters(),ht==="offer"?"actpass":"active"),At+="a=mid:"+rt.mid+`\r
`,rt.direction?At+="a="+rt.direction+`\r
`:rt.rtpSender&&rt.rtpReceiver?At+=`a=sendrecv\r
`:rt.rtpSender?At+=`a=sendonly\r
`:rt.rtpReceiver?At+=`a=recvonly\r
`:At+=`a=inactive\r
`,rt.rtpSender){var Ct="msid:"+wt.id+" "+rt.rtpSender.track.id+`\r
`;At+="a="+Ct,At+="a=ssrc:"+rt.sendEncodingParameters[0].ssrc+" "+Ct,rt.sendEncodingParameters[0].rtx&&(At+="a=ssrc:"+rt.sendEncodingParameters[0].rtx.ssrc+" "+Ct,At+="a=ssrc-group:FID "+rt.sendEncodingParameters[0].ssrc+" "+rt.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return At+="a=ssrc:"+rt.sendEncodingParameters[0].ssrc+" cname:"+vt.localCName+`\r
`,rt.rtpSender&&rt.sendEncodingParameters[0].rtx&&(At+="a=ssrc:"+rt.sendEncodingParameters[0].rtx.ssrc+" cname:"+vt.localCName+`\r
`),At},vt.getDirection=function(rt,bt){for(var ht=vt.splitLines(rt),wt=0;wt<ht.length;wt++)switch(ht[wt]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return ht[wt].substr(2)}return bt?vt.getDirection(bt):"sendrecv"},vt.getKind=function(rt){return vt.splitLines(rt)[0].split(" ")[0].substr(2)},vt.isRejected=function(rt){return rt.split(" ",2)[1]==="0"},vt.parseMLine=function(rt){var bt=vt.splitLines(rt)[0].substr(2).split(" ");return{kind:bt[0],port:parseInt(bt[1],10),protocol:bt[2],fmt:bt.slice(3).join(" ")}},vt.parseOLine=function(rt){var bt=vt.matchPrefix(rt,"o=")[0].substr(2).split(" ");return{username:bt[0],sessionId:bt[1],sessionVersion:parseInt(bt[2],10),netType:bt[3],addressType:bt[4],address:bt[5]}},vt.isValidSDP=function(rt){if(typeof rt!="string"||rt.length===0)return!1;for(var bt=vt.splitLines(rt),ht=0;ht<bt.length;ht++)if(bt[ht].length<2||bt[ht].charAt(1)!=="=")return!1;return!0},yt.exports=vt},778:yt=>{yt.exports=st(355)},754:yt=>{yt.exports=st(142)}},ot={};function gt(yt){var vt=ot[yt];if(vt!==void 0)return vt.exports;var rt=ot[yt]={exports:{}};return ct[yt](rt,rt.exports,gt),rt.exports}gt.n=yt=>{var vt=yt&&yt.__esModule?()=>yt.default:()=>yt;return gt.d(vt,{a:vt}),vt},gt.d=(yt,vt)=>{for(var rt in vt)gt.o(vt,rt)&&!gt.o(yt,rt)&&Object.defineProperty(yt,rt,{enumerable:!0,get:vt[rt]})},gt.o=(yt,vt)=>Object.prototype.hasOwnProperty.call(yt,vt),gt.r=yt=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(yt,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(yt,"__esModule",{value:!0})};var ft={};(()=>{gt.r(ft),gt.d(ft,{AdAction:()=>In,AdState:()=>Sn,AddPlatformTelemetry:()=>$t,AppLaunchMode:()=>Yn,AppLevelProtocol:()=>rn,AudioFormat:()=>ss,AuthType:()=>ln,BitDepth:()=>Cn,BrowserFeature:()=>Ts,BrowserName:()=>$s,CHANGELIST:()=>en,CLIENT_IDENTIFICATION:()=>Sl,CLIENT_VERSION:()=>as,CalculateDataUsage:()=>Vr,CalculateMaxBitrateKbps:()=>Yr,ChooseStreamingResolution:()=>zr,ChooseStreamingSettings:()=>Nr,ClientHeaderBrowserType:()=>Ml,ClientHeaderDeviceType:()=>Ps,ClientHeaderOSType:()=>vs,ClientStreamer:()=>El,ClientType:()=>qn,ConfigureGridServerSettings:()=>rs,ConfigureRagnarokSettings:()=>Xn,CursorType:()=>ga,DeviceModel:()=>ns,DeviceOS:()=>mo,DeviceType:()=>oo,DeviceVendor:()=>Go,DynamicStreamingMode:()=>$o,EVENTS:()=>Mn,GS_EVENTS:()=>_l,GetDeviceCapabilities:()=>nn,GetSupportedAudioChannelCount:()=>Kr,GridApp:()=>fn,GridServer:()=>_s,GridServerSettings:()=>wl,GsErrorCode:()=>Uo,HidType:()=>Io,HotkeyModifier:()=>Ur,InitializeUtils:()=>xn,InputType:()=>ko,IsFeatureSupported:()=>or,LogImpl:()=>Hr,LogLevel:()=>bo,MediaTrackKind:()=>No,MicState:()=>Lo,NetworkType:()=>ho,NskTelemetry:()=>hn,PassThruServer:()=>Cl,PayloadBrowserType:()=>Cs,PayloadDeviceType:()=>Hs,PayloadOSType:()=>Us,PlatformName:()=>qs,Protocol:()=>dn,RErrorCode:()=>Ro,RNotificationCode:()=>co,SESSIONMODIFY_ACTION:()=>Al,STREAMING_STATE:()=>ao,ScErrorCode:()=>ro,SdrHdrMode:()=>Cr,SessionControlTelemetry:()=>Fs,SessionProgressState:()=>Hn,SessionState:()=>Vn,StreamStopReason:()=>Ho,StreamWarningType:()=>Bo,StreamingProfilePreset:()=>jn,StreamingState:()=>Xo,TrackType:()=>Un,Usage:()=>$r,VideoCodecType:()=>_o,VirtualButton:()=>Zr,VirtualGamepadHandler:()=>on,VsyncType:()=>js,configureRagnarokSettings:()=>Eo,configureSessionControlSettings:()=>vo,createNskStreamClient:()=>Nn,createSessionControl:()=>ur,defaultInputConfigFlags:()=>tn,estimateDataUsage:()=>qr,getDeviceCapabilities:()=>ds,getNetworkTypeDetector:()=>to,getPlatformDetails:()=>Oo,getRecommendedBitrate:()=>Jo,getResumableSession:()=>Es,getStreamStartParameters:()=>pr,getStreamerType:()=>gs,getSupportedCodecs:()=>Wn,isCancelCode:()=>uo,isFeatureSupported:()=>Gl,isResumableSessionState:()=>Fo,performHttpRequest:()=>Zn,registerLogCallback:()=>go,serializeDeviceCapabilities:()=>Tl,shouldDefaultEnableMic:()=>Rl,translatePlatformDetailsForClientHeader:()=>Ks,translatePlatformDetailsForPayload:()=>zs,updateSessionParameters:()=>Ao});var yt={};gt.r(yt),gt.d(yt,{fixNegotiationNeeded:()=>Gt,shimAddTrackRemoveTrack:()=>Nt,shimAddTrackRemoveTrackWithNative:()=>It,shimGetDisplayMedia:()=>pt,shimGetSendersWithDtmf:()=>_,shimGetStats:()=>tt,shimGetUserMedia:()=>it,shimMediaStream:()=>mt,shimOnTrack:()=>lt,shimPeerConnection:()=>Ut,shimSenderReceiverGetStats:()=>Tt});var vt={};gt.r(vt),gt.d(vt,{shimGetDisplayMedia:()=>jt,shimGetUserMedia:()=>Kt,shimPeerConnection:()=>Ht,shimReplaceTrack:()=>Bt});var rt={};gt.r(rt),gt.d(rt,{shimAddTransceiver:()=>Dr,shimCreateAnswer:()=>Br,shimCreateOffer:()=>Dn,shimGetDisplayMedia:()=>sr,shimGetParameters:()=>Qr,shimGetUserMedia:()=>Jt,shimOnTrack:()=>hr,shimPeerConnection:()=>Ar,shimRTCDataChannel:()=>En,shimReceiverGetStats:()=>Lr,shimRemoveStream:()=>wr,shimSenderGetStats:()=>gn});var bt={};gt.r(bt),gt.d(bt,{shimAudioContext:()=>Zt,shimCallbacksAPI:()=>Fr,shimConstraints:()=>Kn,shimCreateOfferLegacy:()=>zt,shimGetUserMedia:()=>_i,shimLocalStreamsAPI:()=>Gr,shimRTCIceServerUrls:()=>Wt,shimRemoteStreamsAPI:()=>Ln,shimTrackEventTransceiver:()=>Lt});var ht={};gt.r(ht),gt.d(ht,{removeAllowExtmapMixed:()=>yr,shimConnectionState:()=>tr,shimMaxMessageSize:()=>Rr,shimRTCIceCandidate:()=>vr,shimSendThrowTypeError:()=>fr});let wt=!0,At=!0;function Ct(er,Pr,xr){const jr=er.match(Pr);return jr&&jr.length>=xr&&parseInt(jr[xr],10)}function dt(er,Pr,xr){if(!er.RTCPeerConnection)return;const jr=er.RTCPeerConnection.prototype,Jr=jr.addEventListener;jr.addEventListener=function(Xr,yn){if(Xr!==Pr)return Jr.apply(this,arguments);const cn=wn=>{const Bn=xr(wn);Bn&&(yn.handleEvent?yn.handleEvent(Bn):yn(Bn))};return this._eventMap=this._eventMap||{},this._eventMap[Pr]||(this._eventMap[Pr]=new Map),this._eventMap[Pr].set(yn,cn),Jr.apply(this,[Xr,cn])};const an=jr.removeEventListener;jr.removeEventListener=function(Xr,yn){if(Xr!==Pr||!this._eventMap||!this._eventMap[Pr])return an.apply(this,arguments);if(!this._eventMap[Pr].has(yn))return an.apply(this,arguments);const cn=this._eventMap[Pr].get(yn);return this._eventMap[Pr].delete(yn),this._eventMap[Pr].size===0&&delete this._eventMap[Pr],Object.keys(this._eventMap).length===0&&delete this._eventMap,an.apply(this,[Xr,cn])},Object.defineProperty(jr,"on"+Pr,{get(){return this["_on"+Pr]},set(Xr){this["_on"+Pr]&&(this.removeEventListener(Pr,this["_on"+Pr]),delete this["_on"+Pr]),Xr&&this.addEventListener(Pr,this["_on"+Pr]=Xr)},enumerable:!0,configurable:!0})}function Et(er){return typeof er!="boolean"?new Error("Argument type: "+typeof er+". Please use a boolean."):(wt=er,er?"adapter.js logging disabled":"adapter.js logging enabled")}function Rt(er){return typeof er!="boolean"?new Error("Argument type: "+typeof er+". Please use a boolean."):(At=!er,"adapter.js deprecation warnings "+(er?"disabled":"enabled"))}function Mt(){if(typeof window=="object"){if(wt)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function _t(er,Pr){At&&console.warn(er+" is deprecated, please use "+Pr+" instead.")}function kt(er){const{navigator:Pr}=er,xr={browser:null,version:null};if(er===void 0||!er.navigator)return xr.browser="Not a browser.",xr;if(Pr.mozGetUserMedia)xr.browser="firefox",xr.version=Ct(Pr.userAgent,/Firefox\/(\d+)\./,1);else if(Pr.webkitGetUserMedia||er.isSecureContext===!1&&er.webkitRTCPeerConnection&&!er.RTCIceGatherer)xr.browser="chrome",xr.version=Ct(Pr.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(Pr.mediaDevices&&Pr.userAgent.match(/Edge\/(\d+).(\d+)$/))xr.browser="edge",xr.version=Ct(Pr.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!er.RTCPeerConnection||!Pr.userAgent.match(/AppleWebKit\/(\d+)\./))return xr.browser="Not a supported browser.",xr;xr.browser="safari",xr.version=Ct(Pr.userAgent,/AppleWebKit\/(\d+)\./,1),xr.supportsUnifiedPlan=er.RTCRtpTransceiver&&"currentDirection"in er.RTCRtpTransceiver.prototype}return xr}function nt(er){return Object.prototype.toString.call(er)==="[object Object]"}function s(er){return nt(er)?Object.keys(er).reduce(function(Pr,xr){const jr=nt(er[xr]),Jr=jr?s(er[xr]):er[xr],an=jr&&!Object.keys(Jr).length;return Jr===void 0||an?Pr:Object.assign(Pr,{[xr]:Jr})},{}):er}function b(er,Pr,xr){Pr&&!xr.has(Pr.id)&&(xr.set(Pr.id,Pr),Object.keys(Pr).forEach(jr=>{jr.endsWith("Id")?b(er,er.get(Pr[jr]),xr):jr.endsWith("Ids")&&Pr[jr].forEach(Jr=>{b(er,er.get(Jr),xr)})}))}function $(er,Pr,xr){const jr=xr?"outbound-rtp":"inbound-rtp",Jr=new Map;if(Pr===null)return Jr;const an=[];return er.forEach(Xr=>{Xr.type==="track"&&Xr.trackIdentifier===Pr.id&&an.push(Xr)}),an.forEach(Xr=>{er.forEach(yn=>{yn.type===jr&&yn.trackId===Xr.id&&b(er,yn,Jr)})}),Jr}const _e=Mt;function it(er){const Pr=er&&er.navigator;if(!Pr.mediaDevices)return;const xr=kt(er),jr=function(Xr){if(typeof Xr!="object"||Xr.mandatory||Xr.optional)return Xr;const yn={};return Object.keys(Xr).forEach(cn=>{if(cn==="require"||cn==="advanced"||cn==="mediaSource")return;const wn=typeof Xr[cn]=="object"?Xr[cn]:{ideal:Xr[cn]};wn.exact!==void 0&&typeof wn.exact=="number"&&(wn.min=wn.max=wn.exact);const Bn=function(zn,wo){return zn?zn+wo.charAt(0).toUpperCase()+wo.slice(1):wo==="deviceId"?"sourceId":wo};if(wn.ideal!==void 0){yn.optional=yn.optional||[];let zn={};typeof wn.ideal=="number"?(zn[Bn("min",cn)]=wn.ideal,yn.optional.push(zn),zn={},zn[Bn("max",cn)]=wn.ideal,yn.optional.push(zn)):(zn[Bn("",cn)]=wn.ideal,yn.optional.push(zn))}wn.exact!==void 0&&typeof wn.exact!="number"?(yn.mandatory=yn.mandatory||{},yn.mandatory[Bn("",cn)]=wn.exact):["min","max"].forEach(zn=>{wn[zn]!==void 0&&(yn.mandatory=yn.mandatory||{},yn.mandatory[Bn(zn,cn)]=wn[zn])})}),Xr.advanced&&(yn.optional=(yn.optional||[]).concat(Xr.advanced)),yn},Jr=function(Xr,yn){if(xr.version>=61)return yn(Xr);if((Xr=JSON.parse(JSON.stringify(Xr)))&&typeof Xr.audio=="object"){const cn=function(wn,Bn,zn){Bn in wn&&!(zn in wn)&&(wn[zn]=wn[Bn],delete wn[Bn])};cn((Xr=JSON.parse(JSON.stringify(Xr))).audio,"autoGainControl","googAutoGainControl"),cn(Xr.audio,"noiseSuppression","googNoiseSuppression"),Xr.audio=jr(Xr.audio)}if(Xr&&typeof Xr.video=="object"){let cn=Xr.video.facingMode;cn=cn&&(typeof cn=="object"?cn:{ideal:cn});const wn=xr.version<66;if(cn&&(cn.exact==="user"||cn.exact==="environment"||cn.ideal==="user"||cn.ideal==="environment")&&(!Pr.mediaDevices.getSupportedConstraints||!Pr.mediaDevices.getSupportedConstraints().facingMode||wn)){let Bn;if(delete Xr.video.facingMode,cn.exact==="environment"||cn.ideal==="environment"?Bn=["back","rear"]:cn.exact!=="user"&&cn.ideal!=="user"||(Bn=["front"]),Bn)return Pr.mediaDevices.enumerateDevices().then(zn=>{let wo=(zn=zn.filter(ls=>ls.kind==="videoinput")).find(ls=>Bn.some(Wl=>ls.label.toLowerCase().includes(Wl)));return!wo&&zn.length&&Bn.includes("back")&&(wo=zn[zn.length-1]),wo&&(Xr.video.deviceId=cn.exact?{exact:wo.deviceId}:{ideal:wo.deviceId}),Xr.video=jr(Xr.video),_e("chrome: "+JSON.stringify(Xr)),yn(Xr)})}Xr.video=jr(Xr.video)}return _e("chrome: "+JSON.stringify(Xr)),yn(Xr)},an=function(Xr){return xr.version>=64?Xr:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[Xr.name]||Xr.name,message:Xr.message,constraint:Xr.constraint||Xr.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(Pr.getUserMedia=(function(Xr,yn,cn){Jr(Xr,wn=>{Pr.webkitGetUserMedia(wn,yn,Bn=>{cn&&cn(an(Bn))})})}).bind(Pr),Pr.mediaDevices.getUserMedia){const Xr=Pr.mediaDevices.getUserMedia.bind(Pr.mediaDevices);Pr.mediaDevices.getUserMedia=function(yn){return Jr(yn,cn=>Xr(cn).then(wn=>{if(cn.audio&&!wn.getAudioTracks().length||cn.video&&!wn.getVideoTracks().length)throw wn.getTracks().forEach(Bn=>{Bn.stop()}),new DOMException("","NotFoundError");return wn},wn=>Promise.reject(an(wn))))}}}function pt(er,Pr){er.navigator.mediaDevices&&"getDisplayMedia"in er.navigator.mediaDevices||er.navigator.mediaDevices&&(typeof Pr=="function"?er.navigator.mediaDevices.getDisplayMedia=function(xr){return Pr(xr).then(jr=>{const Jr=xr.video&&xr.video.width,an=xr.video&&xr.video.height,Xr=xr.video&&xr.video.frameRate;return xr.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:jr,maxFrameRate:Xr||3}},Jr&&(xr.video.mandatory.maxWidth=Jr),an&&(xr.video.mandatory.maxHeight=an),er.navigator.mediaDevices.getUserMedia(xr)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}function mt(er){er.MediaStream=er.MediaStream||er.webkitMediaStream}function lt(er){if(typeof er=="object"&&er.RTCPeerConnection&&!("ontrack"in er.RTCPeerConnection.prototype)){Object.defineProperty(er.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(xr){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=xr)},enumerable:!0,configurable:!0});const Pr=er.RTCPeerConnection.prototype.setRemoteDescription;er.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=xr=>{xr.stream.addEventListener("addtrack",jr=>{let Jr;Jr=er.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(Xr=>Xr.track&&Xr.track.id===jr.track.id):{track:jr.track};const an=new Event("track");an.track=jr.track,an.receiver=Jr,an.transceiver={receiver:Jr},an.streams=[xr.stream],this.dispatchEvent(an)}),xr.stream.getTracks().forEach(jr=>{let Jr;Jr=er.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(Xr=>Xr.track&&Xr.track.id===jr.id):{track:jr};const an=new Event("track");an.track=jr,an.receiver=Jr,an.transceiver={receiver:Jr},an.streams=[xr.stream],this.dispatchEvent(an)})},this.addEventListener("addstream",this._ontrackpoly)),Pr.apply(this,arguments)}}else dt(er,"track",Pr=>(Pr.transceiver||Object.defineProperty(Pr,"transceiver",{value:{receiver:Pr.receiver}}),Pr))}function _(er){if(typeof er=="object"&&er.RTCPeerConnection&&!("getSenders"in er.RTCPeerConnection.prototype)&&"createDTMFSender"in er.RTCPeerConnection.prototype){const Pr=function(Jr,an){return{track:an,get dtmf(){return this._dtmf===void 0&&(an.kind==="audio"?this._dtmf=Jr.createDTMFSender(an):this._dtmf=null),this._dtmf},_pc:Jr}};if(!er.RTCPeerConnection.prototype.getSenders){er.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const Jr=er.RTCPeerConnection.prototype.addTrack;er.RTCPeerConnection.prototype.addTrack=function(Xr,yn){let cn=Jr.apply(this,arguments);return cn||(cn=Pr(this,Xr),this._senders.push(cn)),cn};const an=er.RTCPeerConnection.prototype.removeTrack;er.RTCPeerConnection.prototype.removeTrack=function(Xr){an.apply(this,arguments);const yn=this._senders.indexOf(Xr);yn!==-1&&this._senders.splice(yn,1)}}const xr=er.RTCPeerConnection.prototype.addStream;er.RTCPeerConnection.prototype.addStream=function(Jr){this._senders=this._senders||[],xr.apply(this,[Jr]),Jr.getTracks().forEach(an=>{this._senders.push(Pr(this,an))})};const jr=er.RTCPeerConnection.prototype.removeStream;er.RTCPeerConnection.prototype.removeStream=function(Jr){this._senders=this._senders||[],jr.apply(this,[Jr]),Jr.getTracks().forEach(an=>{const Xr=this._senders.find(yn=>yn.track===an);Xr&&this._senders.splice(this._senders.indexOf(Xr),1)})}}else if(typeof er=="object"&&er.RTCPeerConnection&&"getSenders"in er.RTCPeerConnection.prototype&&"createDTMFSender"in er.RTCPeerConnection.prototype&&er.RTCRtpSender&&!("dtmf"in er.RTCRtpSender.prototype)){const Pr=er.RTCPeerConnection.prototype.getSenders;er.RTCPeerConnection.prototype.getSenders=function(){const xr=Pr.apply(this,[]);return xr.forEach(jr=>jr._pc=this),xr},Object.defineProperty(er.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function tt(er){if(!er.RTCPeerConnection)return;const Pr=er.RTCPeerConnection.prototype.getStats;er.RTCPeerConnection.prototype.getStats=function(){const[xr,jr,Jr]=arguments;if(arguments.length>0&&typeof xr=="function")return Pr.apply(this,arguments);if(Pr.length===0&&(arguments.length===0||typeof xr!="function"))return Pr.apply(this,[]);const an=function(yn){const cn={};return yn.result().forEach(wn=>{const Bn={id:wn.id,timestamp:wn.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[wn.type]||wn.type};wn.names().forEach(zn=>{Bn[zn]=wn.stat(zn)}),cn[Bn.id]=Bn}),cn},Xr=function(yn){return new Map(Object.keys(yn).map(cn=>[cn,yn[cn]]))};if(arguments.length>=2){const yn=function(cn){jr(Xr(an(cn)))};return Pr.apply(this,[yn,xr])}return new Promise((yn,cn)=>{Pr.apply(this,[function(wn){yn(Xr(an(wn)))},cn])}).then(jr,Jr)}}function Tt(er){if(!(typeof er=="object"&&er.RTCPeerConnection&&er.RTCRtpSender&&er.RTCRtpReceiver))return;if(!("getStats"in er.RTCRtpSender.prototype)){const xr=er.RTCPeerConnection.prototype.getSenders;xr&&(er.RTCPeerConnection.prototype.getSenders=function(){const Jr=xr.apply(this,[]);return Jr.forEach(an=>an._pc=this),Jr});const jr=er.RTCPeerConnection.prototype.addTrack;jr&&(er.RTCPeerConnection.prototype.addTrack=function(){const Jr=jr.apply(this,arguments);return Jr._pc=this,Jr}),er.RTCRtpSender.prototype.getStats=function(){const Jr=this;return this._pc.getStats().then(an=>$(an,Jr.track,!0))}}if(!("getStats"in er.RTCRtpReceiver.prototype)){const xr=er.RTCPeerConnection.prototype.getReceivers;xr&&(er.RTCPeerConnection.prototype.getReceivers=function(){const jr=xr.apply(this,[]);return jr.forEach(Jr=>Jr._pc=this),jr}),dt(er,"track",jr=>(jr.receiver._pc=jr.srcElement,jr)),er.RTCRtpReceiver.prototype.getStats=function(){const jr=this;return this._pc.getStats().then(Jr=>$(Jr,jr.track,!1))}}if(!("getStats"in er.RTCRtpSender.prototype)||!("getStats"in er.RTCRtpReceiver.prototype))return;const Pr=er.RTCPeerConnection.prototype.getStats;er.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof er.MediaStreamTrack){const xr=arguments[0];let jr,Jr,an;return this.getSenders().forEach(Xr=>{Xr.track===xr&&(jr?an=!0:jr=Xr)}),this.getReceivers().forEach(Xr=>(Xr.track===xr&&(Jr?an=!0:Jr=Xr),Xr.track===xr)),an||jr&&Jr?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):jr?jr.getStats():Jr?Jr.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return Pr.apply(this,arguments)}}function It(er){er.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(an=>this._shimmedLocalStreams[an][0])};const Pr=er.RTCPeerConnection.prototype.addTrack;er.RTCPeerConnection.prototype.addTrack=function(an,Xr){if(!Xr)return Pr.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const yn=Pr.apply(this,arguments);return this._shimmedLocalStreams[Xr.id]?this._shimmedLocalStreams[Xr.id].indexOf(yn)===-1&&this._shimmedLocalStreams[Xr.id].push(yn):this._shimmedLocalStreams[Xr.id]=[Xr,yn],yn};const xr=er.RTCPeerConnection.prototype.addStream;er.RTCPeerConnection.prototype.addStream=function(an){this._shimmedLocalStreams=this._shimmedLocalStreams||{},an.getTracks().forEach(cn=>{if(this.getSenders().find(wn=>wn.track===cn))throw new DOMException("Track already exists.","InvalidAccessError")});const Xr=this.getSenders();xr.apply(this,arguments);const yn=this.getSenders().filter(cn=>Xr.indexOf(cn)===-1);this._shimmedLocalStreams[an.id]=[an].concat(yn)};const jr=er.RTCPeerConnection.prototype.removeStream;er.RTCPeerConnection.prototype.removeStream=function(an){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[an.id],jr.apply(this,arguments)};const Jr=er.RTCPeerConnection.prototype.removeTrack;er.RTCPeerConnection.prototype.removeTrack=function(an){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},an&&Object.keys(this._shimmedLocalStreams).forEach(Xr=>{const yn=this._shimmedLocalStreams[Xr].indexOf(an);yn!==-1&&this._shimmedLocalStreams[Xr].splice(yn,1),this._shimmedLocalStreams[Xr].length===1&&delete this._shimmedLocalStreams[Xr]}),Jr.apply(this,arguments)}}function Nt(er){if(!er.RTCPeerConnection)return;const Pr=kt(er);if(er.RTCPeerConnection.prototype.addTrack&&Pr.version>=65)return It(er);const xr=er.RTCPeerConnection.prototype.getLocalStreams;er.RTCPeerConnection.prototype.getLocalStreams=function(){const cn=xr.apply(this);return this._reverseStreams=this._reverseStreams||{},cn.map(wn=>this._reverseStreams[wn.id])};const jr=er.RTCPeerConnection.prototype.addStream;er.RTCPeerConnection.prototype.addStream=function(cn){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},cn.getTracks().forEach(wn=>{if(this.getSenders().find(Bn=>Bn.track===wn))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[cn.id]){const wn=new er.MediaStream(cn.getTracks());this._streams[cn.id]=wn,this._reverseStreams[wn.id]=cn,cn=wn}jr.apply(this,[cn])};const Jr=er.RTCPeerConnection.prototype.removeStream;function an(cn,wn){let Bn=wn.sdp;return Object.keys(cn._reverseStreams||[]).forEach(zn=>{const wo=cn._reverseStreams[zn],ls=cn._streams[wo.id];Bn=Bn.replace(new RegExp(ls.id,"g"),wo.id)}),new RTCSessionDescription({type:wn.type,sdp:Bn})}er.RTCPeerConnection.prototype.removeStream=function(cn){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},Jr.apply(this,[this._streams[cn.id]||cn]),delete this._reverseStreams[this._streams[cn.id]?this._streams[cn.id].id:cn.id],delete this._streams[cn.id]},er.RTCPeerConnection.prototype.addTrack=function(cn,wn){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const Bn=[].slice.call(arguments,1);if(Bn.length!==1||!Bn[0].getTracks().find(wo=>wo===cn))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(wo=>wo.track===cn))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const zn=this._streams[wn.id];if(zn)zn.addTrack(cn),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const wo=new er.MediaStream([cn]);this._streams[wn.id]=wo,this._reverseStreams[wo.id]=wn,this.addStream(wo)}return this.getSenders().find(wo=>wo.track===cn)},["createOffer","createAnswer"].forEach(function(cn){const wn=er.RTCPeerConnection.prototype[cn],Bn={[cn](){const zn=arguments;return arguments.length&&typeof arguments[0]=="function"?wn.apply(this,[wo=>{const ls=an(this,wo);zn[0].apply(null,[ls])},wo=>{zn[1]&&zn[1].apply(null,wo)},arguments[2]]):wn.apply(this,arguments).then(wo=>an(this,wo))}};er.RTCPeerConnection.prototype[cn]=Bn[cn]});const Xr=er.RTCPeerConnection.prototype.setLocalDescription;er.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(cn,wn){let Bn=wn.sdp;return Object.keys(cn._reverseStreams||[]).forEach(zn=>{const wo=cn._reverseStreams[zn],ls=cn._streams[wo.id];Bn=Bn.replace(new RegExp(wo.id,"g"),ls.id)}),new RTCSessionDescription({type:wn.type,sdp:Bn})}(this,arguments[0]),Xr.apply(this,arguments)):Xr.apply(this,arguments)};const yn=Object.getOwnPropertyDescriptor(er.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(er.RTCPeerConnection.prototype,"localDescription",{get(){const cn=yn.get.apply(this);return cn.type===""?cn:an(this,cn)}}),er.RTCPeerConnection.prototype.removeTrack=function(cn){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!cn._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(cn._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let wn;this._streams=this._streams||{},Object.keys(this._streams).forEach(Bn=>{this._streams[Bn].getTracks().find(zn=>cn.track===zn)&&(wn=this._streams[Bn])}),wn&&(wn.getTracks().length===1?this.removeStream(this._reverseStreams[wn.id]):wn.removeTrack(cn.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Ut(er){const Pr=kt(er);if(!er.RTCPeerConnection&&er.webkitRTCPeerConnection&&(er.RTCPeerConnection=er.webkitRTCPeerConnection),!er.RTCPeerConnection)return;const xr=er.RTCPeerConnection.prototype.addIceCandidate.length===0;Pr.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(Jr){const an=er.RTCPeerConnection.prototype[Jr],Xr={[Jr](){return arguments[0]=new(Jr==="addIceCandidate"?er.RTCIceCandidate:er.RTCSessionDescription)(arguments[0]),an.apply(this,arguments)}};er.RTCPeerConnection.prototype[Jr]=Xr[Jr]});const jr=er.RTCPeerConnection.prototype.addIceCandidate;er.RTCPeerConnection.prototype.addIceCandidate=function(){return xr||arguments[0]?Pr.version<78&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():jr.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}function Gt(er){const Pr=kt(er);dt(er,"negotiationneeded",xr=>{const jr=xr.target;if(!(Pr.version<72||jr.getConfiguration&&jr.getConfiguration().sdpSemantics==="plan-b")||jr.signalingState==="stable")return xr})}var Pt=gt(134),qt=gt.n(Pt);function Kt(er){const Pr=er&&er.navigator,xr=Pr.mediaDevices.getUserMedia.bind(Pr.mediaDevices);Pr.mediaDevices.getUserMedia=function(jr){return xr(jr).catch(Jr=>Promise.reject(function(an){return{name:{PermissionDeniedError:"NotAllowedError"}[an.name]||an.name,message:an.message,constraint:an.constraint,toString(){return this.name}}}(Jr)))}}function jt(er){"getDisplayMedia"in er.navigator&&er.navigator.mediaDevices&&(er.navigator.mediaDevices&&"getDisplayMedia"in er.navigator.mediaDevices||(er.navigator.mediaDevices.getDisplayMedia=er.navigator.getDisplayMedia.bind(er.navigator)))}function Ht(er){const Pr=kt(er);if(er.RTCIceGatherer&&(er.RTCIceCandidate||(er.RTCIceCandidate=function(jr){return jr}),er.RTCSessionDescription||(er.RTCSessionDescription=function(jr){return jr}),Pr.version<15025)){const jr=Object.getOwnPropertyDescriptor(er.MediaStreamTrack.prototype,"enabled");Object.defineProperty(er.MediaStreamTrack.prototype,"enabled",{set(Jr){jr.set.call(this,Jr);const an=new Event("enabled");an.enabled=Jr,this.dispatchEvent(an)}})}er.RTCRtpSender&&!("dtmf"in er.RTCRtpSender.prototype)&&Object.defineProperty(er.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=new er.RTCDtmfSender(this):this.track.kind==="video"&&(this._dtmf=null)),this._dtmf}}),er.RTCDtmfSender&&!er.RTCDTMFSender&&(er.RTCDTMFSender=er.RTCDtmfSender);const xr=qt()(er,Pr.version);er.RTCPeerConnection=function(jr){return jr&&jr.iceServers&&(jr.iceServers=function(Jr){let an=!1;return(Jr=JSON.parse(JSON.stringify(Jr))).filter(Xr=>{if(Xr&&(Xr.urls||Xr.url)){var yn=Xr.urls||Xr.url;Xr.url&&!Xr.urls&&_t("RTCIceServer.url","RTCIceServer.urls");const cn=typeof yn=="string";return cn&&(yn=[yn]),yn=yn.filter(wn=>{if(wn.indexOf("stun:")===0)return!1;const Bn=wn.startsWith("turn")&&!wn.startsWith("turn:[")&&wn.includes("transport=udp");return Bn&&!an?(an=!0,!0):Bn&&!an}),delete Xr.url,Xr.urls=cn?yn[0]:yn,!!yn.length}})}(jr.iceServers,Pr.version),Mt("ICE servers after filtering:",jr.iceServers)),new xr(jr)},er.RTCPeerConnection.prototype=xr.prototype}function Bt(er){er.RTCRtpSender&&!("replaceTrack"in er.RTCRtpSender.prototype)&&(er.RTCRtpSender.prototype.replaceTrack=er.RTCRtpSender.prototype.setTrack)}function Jt(er){const Pr=kt(er),xr=er&&er.navigator,jr=er&&er.MediaStreamTrack;if(xr.getUserMedia=function(Jr,an,Xr){_t("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),xr.mediaDevices.getUserMedia(Jr).then(an,Xr)},!(Pr.version>55&&"autoGainControl"in xr.mediaDevices.getSupportedConstraints())){const Jr=function(Xr,yn,cn){yn in Xr&&!(cn in Xr)&&(Xr[cn]=Xr[yn],delete Xr[yn])},an=xr.mediaDevices.getUserMedia.bind(xr.mediaDevices);if(xr.mediaDevices.getUserMedia=function(Xr){return typeof Xr=="object"&&typeof Xr.audio=="object"&&(Xr=JSON.parse(JSON.stringify(Xr)),Jr(Xr.audio,"autoGainControl","mozAutoGainControl"),Jr(Xr.audio,"noiseSuppression","mozNoiseSuppression")),an(Xr)},jr&&jr.prototype.getSettings){const Xr=jr.prototype.getSettings;jr.prototype.getSettings=function(){const yn=Xr.apply(this,arguments);return Jr(yn,"mozAutoGainControl","autoGainControl"),Jr(yn,"mozNoiseSuppression","noiseSuppression"),yn}}if(jr&&jr.prototype.applyConstraints){const Xr=jr.prototype.applyConstraints;jr.prototype.applyConstraints=function(yn){return this.kind==="audio"&&typeof yn=="object"&&(yn=JSON.parse(JSON.stringify(yn)),Jr(yn,"autoGainControl","mozAutoGainControl"),Jr(yn,"noiseSuppression","mozNoiseSuppression")),Xr.apply(this,[yn])}}}}function sr(er,Pr){er.navigator.mediaDevices&&"getDisplayMedia"in er.navigator.mediaDevices||er.navigator.mediaDevices&&(er.navigator.mediaDevices.getDisplayMedia=function(xr){if(!xr||!xr.video){const jr=new DOMException("getDisplayMedia without video constraints is undefined");return jr.name="NotFoundError",jr.code=8,Promise.reject(jr)}return xr.video===!0?xr.video={mediaSource:Pr}:xr.video.mediaSource=Pr,er.navigator.mediaDevices.getUserMedia(xr)})}function hr(er){typeof er=="object"&&er.RTCTrackEvent&&"receiver"in er.RTCTrackEvent.prototype&&!("transceiver"in er.RTCTrackEvent.prototype)&&Object.defineProperty(er.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Ar(er){const Pr=kt(er);if(typeof er!="object"||!er.RTCPeerConnection&&!er.mozRTCPeerConnection)return;if(!er.RTCPeerConnection&&er.mozRTCPeerConnection&&(er.RTCPeerConnection=er.mozRTCPeerConnection),Pr.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(Jr){const an=er.RTCPeerConnection.prototype[Jr],Xr={[Jr](){return arguments[0]=new(Jr==="addIceCandidate"?er.RTCIceCandidate:er.RTCSessionDescription)(arguments[0]),an.apply(this,arguments)}};er.RTCPeerConnection.prototype[Jr]=Xr[Jr]}),Pr.version<68){const Jr=er.RTCPeerConnection.prototype.addIceCandidate;er.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?arguments[0]&&arguments[0].candidate===""?Promise.resolve():Jr.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}const xr={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},jr=er.RTCPeerConnection.prototype.getStats;er.RTCPeerConnection.prototype.getStats=function(){const[Jr,an,Xr]=arguments;return jr.apply(this,[Jr||null]).then(yn=>{if(Pr.version<53&&!an)try{yn.forEach(cn=>{cn.type=xr[cn.type]||cn.type})}catch(cn){if(cn.name!=="TypeError")throw cn;yn.forEach((wn,Bn)=>{yn.set(Bn,Object.assign({},wn,{type:xr[wn.type]||wn.type}))})}return yn}).then(an,Xr)}}function gn(er){if(typeof er!="object"||!er.RTCPeerConnection||!er.RTCRtpSender||er.RTCRtpSender&&"getStats"in er.RTCRtpSender.prototype)return;const Pr=er.RTCPeerConnection.prototype.getSenders;Pr&&(er.RTCPeerConnection.prototype.getSenders=function(){const jr=Pr.apply(this,[]);return jr.forEach(Jr=>Jr._pc=this),jr});const xr=er.RTCPeerConnection.prototype.addTrack;xr&&(er.RTCPeerConnection.prototype.addTrack=function(){const jr=xr.apply(this,arguments);return jr._pc=this,jr}),er.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function Lr(er){if(typeof er!="object"||!er.RTCPeerConnection||!er.RTCRtpSender||er.RTCRtpSender&&"getStats"in er.RTCRtpReceiver.prototype)return;const Pr=er.RTCPeerConnection.prototype.getReceivers;Pr&&(er.RTCPeerConnection.prototype.getReceivers=function(){const xr=Pr.apply(this,[]);return xr.forEach(jr=>jr._pc=this),xr}),dt(er,"track",xr=>(xr.receiver._pc=xr.srcElement,xr)),er.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function wr(er){er.RTCPeerConnection&&!("removeStream"in er.RTCPeerConnection.prototype)&&(er.RTCPeerConnection.prototype.removeStream=function(Pr){_t("removeStream","removeTrack"),this.getSenders().forEach(xr=>{xr.track&&Pr.getTracks().includes(xr.track)&&this.removeTrack(xr)})})}function En(er){er.DataChannel&&!er.RTCDataChannel&&(er.RTCDataChannel=er.DataChannel)}function Dr(er){if(typeof er!="object"||!er.RTCPeerConnection)return;const Pr=er.RTCPeerConnection.prototype.addTransceiver;Pr&&(er.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const xr=arguments[1],jr=xr&&"sendEncodings"in xr;jr&&xr.sendEncodings.forEach(an=>{if("rid"in an&&!/^[a-z0-9]{0,16}$/i.test(an.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in an&&!(parseFloat(an.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in an&&!(parseFloat(an.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const Jr=Pr.apply(this,arguments);if(jr){const{sender:an}=Jr,Xr=an.getParameters();"encodings"in Xr||(Xr.encodings=xr.sendEncodings,an.sendEncodings=xr.sendEncodings,this.setParametersPromises.push(an.setParameters(Xr).then(()=>{delete an.sendEncodings}).catch(()=>{delete an.sendEncodings})))}return Jr})}function Qr(er){if(typeof er!="object"||!er.RTCRtpSender)return;const Pr=er.RTCRtpSender.prototype.getParameters;Pr&&(er.RTCRtpSender.prototype.getParameters=function(){var xr=Pr.apply(this,arguments);return"sendEncodings"in this?Object.assign({},{encodings:this.sendEncodings},xr):xr})}function Dn(er){if(typeof er!="object"||!er.RTCPeerConnection)return;const Pr=er.RTCPeerConnection.prototype.createOffer;er.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>Pr.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):Pr.apply(this,arguments)}}function Br(er){if(typeof er!="object"||!er.RTCPeerConnection)return;const Pr=er.RTCPeerConnection.prototype.createAnswer;er.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>Pr.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):Pr.apply(this,arguments)}}function Gr(er){if(typeof er=="object"&&er.RTCPeerConnection){if("getLocalStreams"in er.RTCPeerConnection.prototype||(er.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in er.RTCPeerConnection.prototype)){const Pr=er.RTCPeerConnection.prototype.addTrack;er.RTCPeerConnection.prototype.addStream=function(xr){this._localStreams||(this._localStreams=[]),this._localStreams.includes(xr)||this._localStreams.push(xr),xr.getAudioTracks().forEach(jr=>Pr.call(this,jr,xr)),xr.getVideoTracks().forEach(jr=>Pr.call(this,jr,xr))},er.RTCPeerConnection.prototype.addTrack=function(xr,...jr){return jr&&jr.forEach(Jr=>{this._localStreams?this._localStreams.includes(Jr)||this._localStreams.push(Jr):this._localStreams=[Jr]}),Pr.apply(this,arguments)}}"removeStream"in er.RTCPeerConnection.prototype||(er.RTCPeerConnection.prototype.removeStream=function(Pr){this._localStreams||(this._localStreams=[]);const xr=this._localStreams.indexOf(Pr);if(xr===-1)return;this._localStreams.splice(xr,1);const jr=Pr.getTracks();this.getSenders().forEach(Jr=>{jr.includes(Jr.track)&&this.removeTrack(Jr)})})}}function Ln(er){if(typeof er=="object"&&er.RTCPeerConnection&&("getRemoteStreams"in er.RTCPeerConnection.prototype||(er.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in er.RTCPeerConnection.prototype))){Object.defineProperty(er.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(xr){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=xr),this.addEventListener("track",this._onaddstreampoly=jr=>{jr.streams.forEach(Jr=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(Jr))return;this._remoteStreams.push(Jr);const an=new Event("addstream");an.stream=Jr,this.dispatchEvent(an)})})}});const Pr=er.RTCPeerConnection.prototype.setRemoteDescription;er.RTCPeerConnection.prototype.setRemoteDescription=function(){const xr=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(jr){jr.streams.forEach(Jr=>{if(xr._remoteStreams||(xr._remoteStreams=[]),xr._remoteStreams.indexOf(Jr)>=0)return;xr._remoteStreams.push(Jr);const an=new Event("addstream");an.stream=Jr,xr.dispatchEvent(an)})}),Pr.apply(xr,arguments)}}}function Fr(er){if(typeof er!="object"||!er.RTCPeerConnection)return;const Pr=er.RTCPeerConnection.prototype,xr=Pr.createOffer,jr=Pr.createAnswer,Jr=Pr.setLocalDescription,an=Pr.setRemoteDescription,Xr=Pr.addIceCandidate;Pr.createOffer=function(cn,wn){const Bn=arguments.length>=2?arguments[2]:arguments[0],zn=xr.apply(this,[Bn]);return wn?(zn.then(cn,wn),Promise.resolve()):zn},Pr.createAnswer=function(cn,wn){const Bn=arguments.length>=2?arguments[2]:arguments[0],zn=jr.apply(this,[Bn]);return wn?(zn.then(cn,wn),Promise.resolve()):zn};let yn=function(cn,wn,Bn){const zn=Jr.apply(this,[cn]);return Bn?(zn.then(wn,Bn),Promise.resolve()):zn};Pr.setLocalDescription=yn,yn=function(cn,wn,Bn){const zn=an.apply(this,[cn]);return Bn?(zn.then(wn,Bn),Promise.resolve()):zn},Pr.setRemoteDescription=yn,yn=function(cn,wn,Bn){const zn=Xr.apply(this,[cn]);return Bn?(zn.then(wn,Bn),Promise.resolve()):zn},Pr.addIceCandidate=yn}function _i(er){const Pr=er&&er.navigator;if(Pr.mediaDevices&&Pr.mediaDevices.getUserMedia){const xr=Pr.mediaDevices,jr=xr.getUserMedia.bind(xr);Pr.mediaDevices.getUserMedia=Jr=>jr(Kn(Jr))}!Pr.getUserMedia&&Pr.mediaDevices&&Pr.mediaDevices.getUserMedia&&(Pr.getUserMedia=(function(xr,jr,Jr){Pr.mediaDevices.getUserMedia(xr).then(jr,Jr)}).bind(Pr))}function Kn(er){return er&&er.video!==void 0?Object.assign({},er,{video:s(er.video)}):er}function Wt(er){if(!er.RTCPeerConnection)return;const Pr=er.RTCPeerConnection;er.RTCPeerConnection=function(xr,jr){if(xr&&xr.iceServers){const Jr=[];for(let an=0;an<xr.iceServers.length;an++){let Xr=xr.iceServers[an];!Xr.hasOwnProperty("urls")&&Xr.hasOwnProperty("url")?(_t("RTCIceServer.url","RTCIceServer.urls"),Xr=JSON.parse(JSON.stringify(Xr)),Xr.urls=Xr.url,delete Xr.url,Jr.push(Xr)):Jr.push(xr.iceServers[an])}xr.iceServers=Jr}return new Pr(xr,jr)},er.RTCPeerConnection.prototype=Pr.prototype,"generateCertificate"in Pr&&Object.defineProperty(er.RTCPeerConnection,"generateCertificate",{get:()=>Pr.generateCertificate})}function Lt(er){typeof er=="object"&&er.RTCTrackEvent&&"receiver"in er.RTCTrackEvent.prototype&&!("transceiver"in er.RTCTrackEvent.prototype)&&Object.defineProperty(er.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function zt(er){const Pr=er.RTCPeerConnection.prototype.createOffer;er.RTCPeerConnection.prototype.createOffer=function(xr){if(xr){xr.offerToReceiveAudio!==void 0&&(xr.offerToReceiveAudio=!!xr.offerToReceiveAudio);const jr=this.getTransceivers().find(an=>an.receiver.track.kind==="audio");xr.offerToReceiveAudio===!1&&jr?jr.direction==="sendrecv"?jr.setDirection?jr.setDirection("sendonly"):jr.direction="sendonly":jr.direction==="recvonly"&&(jr.setDirection?jr.setDirection("inactive"):jr.direction="inactive"):xr.offerToReceiveAudio!==!0||jr||this.addTransceiver("audio"),xr.offerToReceiveVideo!==void 0&&(xr.offerToReceiveVideo=!!xr.offerToReceiveVideo);const Jr=this.getTransceivers().find(an=>an.receiver.track.kind==="video");xr.offerToReceiveVideo===!1&&Jr?Jr.direction==="sendrecv"?Jr.setDirection?Jr.setDirection("sendonly"):Jr.direction="sendonly":Jr.direction==="recvonly"&&(Jr.setDirection?Jr.setDirection("inactive"):Jr.direction="inactive"):xr.offerToReceiveVideo!==!0||Jr||this.addTransceiver("video")}return Pr.apply(this,arguments)}}function Zt(er){typeof er!="object"||er.AudioContext||(er.AudioContext=er.webkitAudioContext)}var ar=gt(985),Or=gt.n(ar);function vr(er){if(!er.RTCIceCandidate||er.RTCIceCandidate&&"foundation"in er.RTCIceCandidate.prototype)return;const Pr=er.RTCIceCandidate;er.RTCIceCandidate=function(xr){if(typeof xr=="object"&&xr.candidate&&xr.candidate.indexOf("a=")===0&&((xr=JSON.parse(JSON.stringify(xr))).candidate=xr.candidate.substr(2)),xr.candidate&&xr.candidate.length){const jr=new Pr(xr),Jr=Or().parseCandidate(xr.candidate),an=Object.assign(jr,Jr);return an.toJSON=function(){return{candidate:an.candidate,sdpMid:an.sdpMid,sdpMLineIndex:an.sdpMLineIndex,usernameFragment:an.usernameFragment}},an}return new Pr(xr)},er.RTCIceCandidate.prototype=Pr.prototype,dt(er,"icecandidate",xr=>(xr.candidate&&Object.defineProperty(xr,"candidate",{value:new er.RTCIceCandidate(xr.candidate),writable:"false"}),xr))}function Rr(er){if(!er.RTCPeerConnection)return;const Pr=kt(er);"sctp"in er.RTCPeerConnection.prototype||Object.defineProperty(er.RTCPeerConnection.prototype,"sctp",{get(){return this._sctp===void 0?null:this._sctp}});const xr=er.RTCPeerConnection.prototype.setRemoteDescription;er.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,Pr.browser==="chrome"&&Pr.version>=76){const{sdpSemantics:jr}=this.getConfiguration();jr==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return this._sctp===void 0?null:this._sctp},enumerable:!0,configurable:!0})}if(function(jr){if(!jr||!jr.sdp)return!1;const Jr=Or().splitSections(jr.sdp);return Jr.shift(),Jr.some(an=>{const Xr=Or().parseMLine(an);return Xr&&Xr.kind==="application"&&Xr.protocol.indexOf("SCTP")!==-1})}(arguments[0])){const jr=function(cn){const wn=cn.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(wn===null||wn.length<2)return-1;const Bn=parseInt(wn[1],10);return Bn!=Bn?-1:Bn}(arguments[0]),Jr=function(cn){let wn=65536;return Pr.browser==="firefox"&&(wn=Pr.version<57?cn===-1?16384:2147483637:Pr.version<60?Pr.version===57?65535:65536:2147483637),wn}(jr),an=function(cn,wn){let Bn=65536;Pr.browser==="firefox"&&Pr.version===57&&(Bn=65535);const zn=Or().matchPrefix(cn.sdp,"a=max-message-size:");return zn.length>0?Bn=parseInt(zn[0].substr(19),10):Pr.browser==="firefox"&&wn!==-1&&(Bn=2147483637),Bn}(arguments[0],jr);let Xr;Xr=Jr===0&&an===0?Number.POSITIVE_INFINITY:Jr===0||an===0?Math.max(Jr,an):Math.min(Jr,an);const yn={};Object.defineProperty(yn,"maxMessageSize",{get:()=>Xr}),this._sctp=yn}return xr.apply(this,arguments)}}function fr(er){if(!er.RTCPeerConnection||!("createDataChannel"in er.RTCPeerConnection.prototype))return;function Pr(jr,Jr){const an=jr.send;jr.send=function(){const Xr=arguments[0],yn=Xr.length||Xr.size||Xr.byteLength;if(jr.readyState==="open"&&Jr.sctp&&yn>Jr.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+Jr.sctp.maxMessageSize+" bytes)");return an.apply(jr,arguments)}}const xr=er.RTCPeerConnection.prototype.createDataChannel;er.RTCPeerConnection.prototype.createDataChannel=function(){const jr=xr.apply(this,arguments);return Pr(jr,this),jr},dt(er,"datachannel",jr=>(Pr(jr.channel,jr.target),jr))}function tr(er){if(!er.RTCPeerConnection||"connectionState"in er.RTCPeerConnection.prototype)return;const Pr=er.RTCPeerConnection.prototype;Object.defineProperty(Pr,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(Pr,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(xr){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),xr&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=xr)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(xr=>{const jr=Pr[xr];Pr[xr]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=Jr=>{const an=Jr.target;if(an._lastConnectionState!==an.connectionState){an._lastConnectionState=an.connectionState;const Xr=new Event("connectionstatechange",Jr);an.dispatchEvent(Xr)}return Jr},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),jr.apply(this,arguments)}})}function yr(er){if(!er.RTCPeerConnection)return;const Pr=kt(er);if(Pr.browser==="chrome"&&Pr.version>=71||Pr.browser==="safari"&&Pr.version>=605)return;const xr=er.RTCPeerConnection.prototype.setRemoteDescription;er.RTCPeerConnection.prototype.setRemoteDescription=function(jr){return jr&&jr.sdp&&jr.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1&&(jr.sdp=jr.sdp.split(`
`).filter(Jr=>Jr.trim()!=="a=extmap-allow-mixed").join(`
`)),xr.apply(this,arguments)}}(function({window:er}={},Pr={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0}){const xr=Mt,jr=kt(er),Jr={browserDetails:jr,commonShim:ht,extractVersion:Ct,disableLog:Et,disableWarnings:Rt};switch(jr.browser){case"chrome":if(!yt||!Ut||!Pr.shimChrome)return xr("Chrome shim is not included in this adapter release."),Jr;if(jr.version===null)return xr("Chrome shim can not determine version, not shimming."),Jr;xr("adapter.js shimming chrome."),Jr.browserShim=yt,it(er),mt(er),Ut(er),lt(er),Nt(er),_(er),tt(er),Tt(er),Gt(er),vr(er),tr(er),Rr(er),fr(er),yr(er);break;case"firefox":if(!rt||!Ar||!Pr.shimFirefox)return xr("Firefox shim is not included in this adapter release."),Jr;xr("adapter.js shimming firefox."),Jr.browserShim=rt,Jt(er),Ar(er),hr(er),wr(er),gn(er),Lr(er),En(er),Dr(er),Qr(er),Dn(er),Br(er),vr(er),tr(er),Rr(er),fr(er);break;case"edge":if(!vt||!Ht||!Pr.shimEdge)return xr("MS edge shim is not included in this adapter release."),Jr;xr("adapter.js shimming edge."),Jr.browserShim=vt,Kt(er),jt(er),Ht(er),Bt(er),Rr(er),fr(er);break;case"safari":if(!bt||!Pr.shimSafari)return xr("Safari shim is not included in this adapter release."),Jr;xr("adapter.js shimming safari."),Jr.browserShim=bt,Wt(er),zt(er),Fr(er),Gr(er),Ln(er),Lt(er),_i(er),Zt(er),vr(er),Rr(er),fr(er),yr(er);break;default:xr("Unsupported browser!")}})({window}),gt(393);var fn=Ragnarok.GridApp,Nr=Ragnarok.ChooseStreamingSettings,zr=Ragnarok.ChooseStreamingResolution,xn=Ragnarok.InitializeUtils,Kr=Ragnarok.GetSupportedAudioChannelCount,nn=Ragnarok.GetDeviceCapabilities,Wn=Ragnarok.getSupportedCodecs,Zr=Ragnarok.VirtualButton,on=Ragnarok.VirtualGamepadHandler,Xn=Ragnarok.ConfigureRagnarokSettings,en=Ragnarok.CHANGELIST,ln=Ragnarok.AuthType,Zn=Ragnarok.performHttpRequest,$t=Ragnarok.AddPlatformTelemetry,or=Ragnarok.IsFeatureSupported,Yr=Ragnarok.CalculateMaxBitrateKbps,Vr=Ragnarok.CalculateDataUsage,Hr=Ragnarok.LogImpl,Mn=Ragnarok.EVENTS,Ur=Ragnarok.HotkeyModifier,tn=Ragnarok.defaultInputConfigFlags,jn=Ragnarok.StreamingProfilePreset,Un=Ragnarok.TrackType,ao=Ragnarok.STREAMING_STATE,co=Ragnarok.RNotificationCode,ro=Ragnarok.ScErrorCode,vo=Ragnarok.configureSessionControlSettings,oo=Ragnarok.DeviceType,mo=Ragnarok.DeviceOS,ho=Ragnarok.NetworkType,go=Ragnarok.registerLogCallback,bo=Ragnarok.LogLevel,ur=Ragnarok.createSessionControl,Cr=Ragnarok.SdrHdrMode,$r=Ragnarok.Usage,dn=Ragnarok.Protocol,rn=Ragnarok.AppLevelProtocol,Sn=Ragnarok.AdState,In=Ragnarok.AdAction,Cn=Ragnarok.BitDepth,qn=Ragnarok.ClientType,Vn=Ragnarok.SessionState,Hn=Ragnarok.SessionProgressState,Yn=Ragnarok.AppLaunchMode,Ao=Ragnarok.updateSessionParameters,uo=Ragnarok.isCancelCode,Fo=Ragnarok.isResumableSessionState,Es=Ragnarok.getResumableSession,Fs=Ragnarok.SessionControlTelemetry,Uo=Ragnarok.GsErrorCode,wl=Ragnarok.GridServerSettings,rs=Ragnarok.ConfigureGridServerSettings,$s=Ragnarok.BrowserName,qs=Ragnarok.PlatformName,Oo=Ragnarok.getPlatformDetails,ns=Ragnarok.DeviceModel,Go=Ragnarok.DeviceVendor,as=Ragnarok.CLIENT_VERSION,Sl=Ragnarok.CLIENT_IDENTIFICATION,Al=Ragnarok.SESSIONMODIFY_ACTION,ss=Ragnarok.AudioFormat,El=Ragnarok.ClientStreamer,_l=Ragnarok.GS_EVENTS,_s=Ragnarok.GridServer,Cl=Ragnarok.PassThruServer,js=Ragnarok.VsyncType,ds=Ragnarok.getDeviceCapabilities,Tl=Ragnarok.serializeDeviceCapabilities,Us=Ragnarok.PayloadOSType,Cs=Ragnarok.PayloadBrowserType,Hs=Ragnarok.PayloadDeviceType,vs=Ragnarok.ClientHeaderOSType,Ml=Ragnarok.ClientHeaderBrowserType,Ps=Ragnarok.ClientHeaderDeviceType,zs=Ragnarok.translatePlatformDetailsForPayload,Ks=Ragnarok.translatePlatformDetailsForClientHeader,gs=Ragnarok.getStreamerType,Ts=Ragnarok.BrowserFeature,Gl=Ragnarok.isFeatureSupported,Rl=Ragnarok.shouldDefaultEnableMic,Jo=Ragnarok.getRecommendedBitrate,pr=Ragnarok.getStreamStartParameters,qr=Ragnarok.estimateDataUsage,hn=Ragnarok.NskTelemetry,Nn=Ragnarok.createNskStreamClient,Eo=Ragnarok.configureRagnarokSettings,to=Ragnarok.getNetworkTypeDetector,Ro=Ragnarok.RErrorCode,Io=Ragnarok.HidType,ko=Ragnarok.InputType,_o=Ragnarok.VideoCodecType,Lo=Ragnarok.MicState,$o=Ragnarok.DynamicStreamingMode,No=Ragnarok.MediaTrackKind,Ho=Ragnarok.StreamStopReason,Bo=Ragnarok.StreamWarningType,ga=Ragnarok.CursorType,Xo=Ragnarok.StreamingState})(),et.exports=ft})()},142:(et,at,st)=>{st.r(at),st.d(at,{DiagConsoleLogger:()=>pt,DiagLogLevel:()=>At,INVALID_SPANID:()=>Dn,INVALID_SPAN_CONTEXT:()=>Gr,INVALID_TRACEID:()=>Br,ProxyTracer:()=>nn,ProxyTracerProvider:()=>Zr,ROOT_CONTEXT:()=>_e,SamplingDecision:()=>yr,SpanKind:()=>fn,SpanStatusCode:()=>Nr,TraceFlags:()=>Ar,ValueType:()=>$,baggageEntryMetadataFromString:()=>nt,context:()=>or,createContextKey:()=>s,createNoopMeter:()=>hr,createTraceState:()=>$t,default:()=>bo,defaultTextMapGetter:()=>gn,defaultTextMapSetter:()=>Lr,diag:()=>Yr,isSpanContextValid:()=>fr,isValidSpanId:()=>Rr,isValidTraceId:()=>vr,metrics:()=>Mn,propagation:()=>mo,trace:()=>go});var ct=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof st.g=="object"?st.g:{},ot="1.4.1",gt=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/,ft=function(ur){var Cr=new Set([ur]),$r=new Set,dn=ur.match(gt);if(!dn)return function(){return!1};var rn=+dn[1],Sn=+dn[2],In=+dn[3];if(dn[4]!=null)return function(Vn){return Vn===ur};function Cn(Vn){return $r.add(Vn),!1}function qn(Vn){return Cr.add(Vn),!0}return function(Vn){if(Cr.has(Vn))return!0;if($r.has(Vn))return!1;var Hn=Vn.match(gt);if(!Hn)return Cn(Vn);var Yn=+Hn[1],Ao=+Hn[2],uo=+Hn[3];return Hn[4]!=null||rn!==Yn?Cn(Vn):rn===0?Sn===Ao&&In<=uo?qn(Vn):Cn(Vn):Sn<=Ao?qn(Vn):Cn(Vn)}}(ot),yt=ot.split(".")[0],vt=Symbol.for("opentelemetry.js.api."+yt),rt=ct;function bt(ur,Cr,$r,dn){var rn;dn===void 0&&(dn=!1);var Sn=rt[vt]=(rn=rt[vt])!==null&&rn!==void 0?rn:{version:ot};if(!dn&&Sn[ur]){var In=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+ur);return $r.error(In.stack||In.message),!1}return Sn.version!==ot?(In=new Error("@opentelemetry/api: Registration of version v"+Sn.version+" for "+ur+" does not match previously registered API v"+ot),$r.error(In.stack||In.message),!1):(Sn[ur]=Cr,$r.debug("@opentelemetry/api: Registered a global for "+ur+" v"+ot+"."),!0)}function ht(ur){var Cr,$r,dn=(Cr=rt[vt])===null||Cr===void 0?void 0:Cr.version;if(dn&&ft(dn))return($r=rt[vt])===null||$r===void 0?void 0:$r[ur]}function wt(ur,Cr){Cr.debug("@opentelemetry/api: Unregistering a global for "+ur+" v"+ot+".");var $r=rt[vt];$r&&delete $r[ur]}var At,Ct=function(){function ur(Cr){this._namespace=Cr.namespace||"DiagComponentLogger"}return ur.prototype.debug=function(){for(var Cr=[],$r=0;$r<arguments.length;$r++)Cr[$r]=arguments[$r];return dt("debug",this._namespace,Cr)},ur.prototype.error=function(){for(var Cr=[],$r=0;$r<arguments.length;$r++)Cr[$r]=arguments[$r];return dt("error",this._namespace,Cr)},ur.prototype.info=function(){for(var Cr=[],$r=0;$r<arguments.length;$r++)Cr[$r]=arguments[$r];return dt("info",this._namespace,Cr)},ur.prototype.warn=function(){for(var Cr=[],$r=0;$r<arguments.length;$r++)Cr[$r]=arguments[$r];return dt("warn",this._namespace,Cr)},ur.prototype.verbose=function(){for(var Cr=[],$r=0;$r<arguments.length;$r++)Cr[$r]=arguments[$r];return dt("verbose",this._namespace,Cr)},ur}();function dt(ur,Cr,$r){var dn=ht("diag");if(dn)return $r.unshift(Cr),dn[ur].apply(dn,function(rn,Sn,In){if(arguments.length===2)for(var Cn,qn=0,Vn=Sn.length;qn<Vn;qn++)!Cn&&qn in Sn||(Cn||(Cn=Array.prototype.slice.call(Sn,0,qn)),Cn[qn]=Sn[qn]);return rn.concat(Cn||Array.prototype.slice.call(Sn))}([],function(rn,Sn){var In=typeof Symbol=="function"&&rn[Symbol.iterator];if(!In)return rn;var Cn,qn,Vn=In.call(rn),Hn=[];try{for(;(Sn===void 0||Sn-- >0)&&!(Cn=Vn.next()).done;)Hn.push(Cn.value)}catch(Yn){qn={error:Yn}}finally{try{Cn&&!Cn.done&&(In=Vn.return)&&In.call(Vn)}finally{if(qn)throw qn.error}}return Hn}($r),!1))}(function(ur){ur[ur.NONE=0]="NONE",ur[ur.ERROR=30]="ERROR",ur[ur.WARN=50]="WARN",ur[ur.INFO=60]="INFO",ur[ur.DEBUG=70]="DEBUG",ur[ur.VERBOSE=80]="VERBOSE",ur[ur.ALL=9999]="ALL"})(At||(At={}));var Et=function(){function ur(){function Cr(dn){return function(){for(var rn=[],Sn=0;Sn<arguments.length;Sn++)rn[Sn]=arguments[Sn];var In=ht("diag");if(In)return In[dn].apply(In,function(Cn,qn,Vn){if(arguments.length===2)for(var Hn,Yn=0,Ao=qn.length;Yn<Ao;Yn++)!Hn&&Yn in qn||(Hn||(Hn=Array.prototype.slice.call(qn,0,Yn)),Hn[Yn]=qn[Yn]);return Cn.concat(Hn||Array.prototype.slice.call(qn))}([],function(Cn,qn){var Vn=typeof Symbol=="function"&&Cn[Symbol.iterator];if(!Vn)return Cn;var Hn,Yn,Ao=Vn.call(Cn),uo=[];try{for(;(qn===void 0||qn-- >0)&&!(Hn=Ao.next()).done;)uo.push(Hn.value)}catch(Fo){Yn={error:Fo}}finally{try{Hn&&!Hn.done&&(Vn=Ao.return)&&Vn.call(Ao)}finally{if(Yn)throw Yn.error}}return uo}(rn),!1))}}var $r=this;$r.setLogger=function(dn,rn){var Sn,In,Cn;if(rn===void 0&&(rn={logLevel:At.INFO}),dn===$r){var qn=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return $r.error((Sn=qn.stack)!==null&&Sn!==void 0?Sn:qn.message),!1}typeof rn=="number"&&(rn={logLevel:rn});var Vn=ht("diag"),Hn=function(Ao,uo){function Fo(Es,Fs){var Uo=uo[Es];return typeof Uo=="function"&&Ao>=Fs?Uo.bind(uo):function(){}}return Ao<At.NONE?Ao=At.NONE:Ao>At.ALL&&(Ao=At.ALL),uo=uo||{},{error:Fo("error",At.ERROR),warn:Fo("warn",At.WARN),info:Fo("info",At.INFO),debug:Fo("debug",At.DEBUG),verbose:Fo("verbose",At.VERBOSE)}}((In=rn.logLevel)!==null&&In!==void 0?In:At.INFO,dn);if(Vn&&!rn.suppressOverrideMessage){var Yn=(Cn=new Error().stack)!==null&&Cn!==void 0?Cn:"<failed to generate stacktrace>";Vn.warn("Current logger will be overwritten from "+Yn),Hn.warn("Current logger will overwrite one already registered from "+Yn)}return bt("diag",Hn,$r,!0)},$r.disable=function(){wt("diag",$r)},$r.createComponentLogger=function(dn){return new Ct(dn)},$r.verbose=Cr("verbose"),$r.debug=Cr("debug"),$r.info=Cr("info"),$r.warn=Cr("warn"),$r.error=Cr("error")}return ur.instance=function(){return this._instance||(this._instance=new ur),this._instance},ur}(),Rt=function(){function ur(Cr){this._entries=Cr?new Map(Cr):new Map}return ur.prototype.getEntry=function(Cr){var $r=this._entries.get(Cr);if($r)return Object.assign({},$r)},ur.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(Cr){var $r=function(dn,rn){var Sn=typeof Symbol=="function"&&dn[Symbol.iterator];if(!Sn)return dn;var In,Cn,qn=Sn.call(dn),Vn=[];try{for(;(rn===void 0||rn-- >0)&&!(In=qn.next()).done;)Vn.push(In.value)}catch(Hn){Cn={error:Hn}}finally{try{In&&!In.done&&(Sn=qn.return)&&Sn.call(qn)}finally{if(Cn)throw Cn.error}}return Vn}(Cr,2);return[$r[0],$r[1]]})},ur.prototype.setEntry=function(Cr,$r){var dn=new ur(this._entries);return dn._entries.set(Cr,$r),dn},ur.prototype.removeEntry=function(Cr){var $r=new ur(this._entries);return $r._entries.delete(Cr),$r},ur.prototype.removeEntries=function(){for(var Cr,$r,dn=[],rn=0;rn<arguments.length;rn++)dn[rn]=arguments[rn];var Sn=new ur(this._entries);try{for(var In=function(Vn){var Hn=typeof Symbol=="function"&&Symbol.iterator,Yn=Hn&&Vn[Hn],Ao=0;if(Yn)return Yn.call(Vn);if(Vn&&typeof Vn.length=="number")return{next:function(){return Vn&&Ao>=Vn.length&&(Vn=void 0),{value:Vn&&Vn[Ao++],done:!Vn}}};throw new TypeError(Hn?"Object is not iterable.":"Symbol.iterator is not defined.")}(dn),Cn=In.next();!Cn.done;Cn=In.next()){var qn=Cn.value;Sn._entries.delete(qn)}}catch(Vn){Cr={error:Vn}}finally{try{Cn&&!Cn.done&&($r=In.return)&&$r.call(In)}finally{if(Cr)throw Cr.error}}return Sn},ur.prototype.clear=function(){return new ur},ur}(),Mt=Symbol("BaggageEntryMetadata"),_t=Et.instance();function kt(ur){return ur===void 0&&(ur={}),new Rt(new Map(Object.entries(ur)))}function nt(ur){return typeof ur!="string"&&(_t.error("Cannot create baggage metadata from unknown type: "+typeof ur),ur=""),{__TYPE__:Mt,toString:function(){return ur}}}function s(ur){return Symbol.for(ur)}var b,$,_e=new function ur(Cr){var $r=this;$r._currentContext=Cr?new Map(Cr):new Map,$r.getValue=function(dn){return $r._currentContext.get(dn)},$r.setValue=function(dn,rn){var Sn=new ur($r._currentContext);return Sn._currentContext.set(dn,rn),Sn},$r.deleteValue=function(dn){var rn=new ur($r._currentContext);return rn._currentContext.delete(dn),rn}},it=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],pt=function(){function ur($r){return function(){for(var dn=[],rn=0;rn<arguments.length;rn++)dn[rn]=arguments[rn];if(console){var Sn=console[$r];if(typeof Sn!="function"&&(Sn=console.log),typeof Sn=="function")return Sn.apply(console,dn)}}}for(var Cr=0;Cr<it.length;Cr++)this[it[Cr].n]=ur(it[Cr].c)},mt=(b=function(ur,Cr){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($r,dn){$r.__proto__=dn}||function($r,dn){for(var rn in dn)Object.prototype.hasOwnProperty.call(dn,rn)&&($r[rn]=dn[rn])},b(ur,Cr)},function(ur,Cr){if(typeof Cr!="function"&&Cr!==null)throw new TypeError("Class extends value "+String(Cr)+" is not a constructor or null");function $r(){this.constructor=ur}b(ur,Cr),ur.prototype=Cr===null?Object.create(Cr):($r.prototype=Cr.prototype,new $r)}),lt=function(){function ur(){}return ur.prototype.createHistogram=function(Cr,$r){return jt},ur.prototype.createCounter=function(Cr,$r){return Kt},ur.prototype.createUpDownCounter=function(Cr,$r){return Ht},ur.prototype.createObservableGauge=function(Cr,$r){return Jt},ur.prototype.createObservableCounter=function(Cr,$r){return Bt},ur.prototype.createObservableUpDownCounter=function(Cr,$r){return sr},ur.prototype.addBatchObservableCallback=function(Cr,$r){},ur.prototype.removeBatchObservableCallback=function(Cr){},ur}(),_=function(){},tt=function(ur){function Cr(){return ur!==null&&ur.apply(this,arguments)||this}return mt(Cr,ur),Cr.prototype.add=function($r,dn){},Cr}(_),Tt=function(ur){function Cr(){return ur!==null&&ur.apply(this,arguments)||this}return mt(Cr,ur),Cr.prototype.add=function($r,dn){},Cr}(_),It=function(ur){function Cr(){return ur!==null&&ur.apply(this,arguments)||this}return mt(Cr,ur),Cr.prototype.record=function($r,dn){},Cr}(_),Nt=function(){function ur(){}return ur.prototype.addCallback=function(Cr){},ur.prototype.removeCallback=function(Cr){},ur}(),Ut=function(ur){function Cr(){return ur!==null&&ur.apply(this,arguments)||this}return mt(Cr,ur),Cr}(Nt),Gt=function(ur){function Cr(){return ur!==null&&ur.apply(this,arguments)||this}return mt(Cr,ur),Cr}(Nt),Pt=function(ur){function Cr(){return ur!==null&&ur.apply(this,arguments)||this}return mt(Cr,ur),Cr}(Nt),qt=new lt,Kt=new tt,jt=new It,Ht=new Tt,Bt=new Ut,Jt=new Gt,sr=new Pt;function hr(){return qt}(function(ur){ur[ur.INT=0]="INT",ur[ur.DOUBLE=1]="DOUBLE"})($||($={}));var Ar,gn={get:function(ur,Cr){if(ur!=null)return ur[Cr]},keys:function(ur){return ur==null?[]:Object.keys(ur)}},Lr={set:function(ur,Cr,$r){ur!=null&&(ur[Cr]=$r)}},wr=function(){function ur(){}return ur.prototype.active=function(){return _e},ur.prototype.with=function(Cr,$r,dn){for(var rn=[],Sn=3;Sn<arguments.length;Sn++)rn[Sn-3]=arguments[Sn];return $r.call.apply($r,function(In,Cn,qn){if(arguments.length===2)for(var Vn,Hn=0,Yn=Cn.length;Hn<Yn;Hn++)!Vn&&Hn in Cn||(Vn||(Vn=Array.prototype.slice.call(Cn,0,Hn)),Vn[Hn]=Cn[Hn]);return In.concat(Vn||Array.prototype.slice.call(Cn))}([dn],function(In,Cn){var qn=typeof Symbol=="function"&&In[Symbol.iterator];if(!qn)return In;var Vn,Hn,Yn=qn.call(In),Ao=[];try{for(;(Cn===void 0||Cn-- >0)&&!(Vn=Yn.next()).done;)Ao.push(Vn.value)}catch(uo){Hn={error:uo}}finally{try{Vn&&!Vn.done&&(qn=Yn.return)&&qn.call(Yn)}finally{if(Hn)throw Hn.error}}return Ao}(rn),!1))},ur.prototype.bind=function(Cr,$r){return $r},ur.prototype.enable=function(){return this},ur.prototype.disable=function(){return this},ur}(),En="context",Dr=new wr,Qr=function(){function ur(){}return ur.getInstance=function(){return this._instance||(this._instance=new ur),this._instance},ur.prototype.setGlobalContextManager=function(Cr){return bt(En,Cr,Et.instance())},ur.prototype.active=function(){return this._getContextManager().active()},ur.prototype.with=function(Cr,$r,dn){for(var rn,Sn=[],In=3;In<arguments.length;In++)Sn[In-3]=arguments[In];return(rn=this._getContextManager()).with.apply(rn,function(Cn,qn,Vn){if(arguments.length===2)for(var Hn,Yn=0,Ao=qn.length;Yn<Ao;Yn++)!Hn&&Yn in qn||(Hn||(Hn=Array.prototype.slice.call(qn,0,Yn)),Hn[Yn]=qn[Yn]);return Cn.concat(Hn||Array.prototype.slice.call(qn))}([Cr,$r,dn],function(Cn,qn){var Vn=typeof Symbol=="function"&&Cn[Symbol.iterator];if(!Vn)return Cn;var Hn,Yn,Ao=Vn.call(Cn),uo=[];try{for(;(qn===void 0||qn-- >0)&&!(Hn=Ao.next()).done;)uo.push(Hn.value)}catch(Fo){Yn={error:Fo}}finally{try{Hn&&!Hn.done&&(Vn=Ao.return)&&Vn.call(Ao)}finally{if(Yn)throw Yn.error}}return uo}(Sn),!1))},ur.prototype.bind=function(Cr,$r){return this._getContextManager().bind(Cr,$r)},ur.prototype._getContextManager=function(){return ht(En)||Dr},ur.prototype.disable=function(){this._getContextManager().disable(),wt(En,Et.instance())},ur}();(function(ur){ur[ur.NONE=0]="NONE",ur[ur.SAMPLED=1]="SAMPLED"})(Ar||(Ar={}));var Dn="0000000000000000",Br="00000000000000000000000000000000",Gr={traceId:Br,spanId:Dn,traceFlags:Ar.NONE},Ln=function(){function ur(Cr){Cr===void 0&&(Cr=Gr),this._spanContext=Cr}return ur.prototype.spanContext=function(){return this._spanContext},ur.prototype.setAttribute=function(Cr,$r){return this},ur.prototype.setAttributes=function(Cr){return this},ur.prototype.addEvent=function(Cr,$r){return this},ur.prototype.setStatus=function(Cr){return this},ur.prototype.updateName=function(Cr){return this},ur.prototype.end=function(Cr){},ur.prototype.isRecording=function(){return!1},ur.prototype.recordException=function(Cr,$r){},ur}(),Fr=s("OpenTelemetry Context Key SPAN");function _i(ur){return ur.getValue(Fr)||void 0}function Kn(){return _i(Qr.getInstance().active())}function Wt(ur,Cr){return ur.setValue(Fr,Cr)}function Lt(ur){return ur.deleteValue(Fr)}function zt(ur,Cr){return Wt(ur,new Ln(Cr))}function Zt(ur){var Cr;return(Cr=_i(ur))===null||Cr===void 0?void 0:Cr.spanContext()}var ar=/^([0-9a-f]{32})$/i,Or=/^[0-9a-f]{16}$/i;function vr(ur){return ar.test(ur)&&ur!==Br}function Rr(ur){return Or.test(ur)&&ur!==Dn}function fr(ur){return vr(ur.traceId)&&Rr(ur.spanId)}function tr(ur){return new Ln(ur)}var yr,fn,Nr,zr=Qr.getInstance(),xn=function(){function ur(){}return ur.prototype.startSpan=function(Cr,$r,dn){if(dn===void 0&&(dn=zr.active()),!!($r!=null&&$r.root))return new Ln;var rn,Sn=dn&&Zt(dn);return typeof(rn=Sn)=="object"&&typeof rn.spanId=="string"&&typeof rn.traceId=="string"&&typeof rn.traceFlags=="number"&&fr(Sn)?new Ln(Sn):new Ln},ur.prototype.startActiveSpan=function(Cr,$r,dn,rn){var Sn,In,Cn;if(!(arguments.length<2)){arguments.length===2?Cn=$r:arguments.length===3?(Sn=$r,Cn=dn):(Sn=$r,In=dn,Cn=rn);var qn=In??zr.active(),Vn=this.startSpan(Cr,Sn,qn),Hn=Wt(qn,Vn);return zr.with(Hn,Cn,void 0,Vn)}},ur}(),Kr=new xn,nn=function(){function ur(Cr,$r,dn,rn){this._provider=Cr,this.name=$r,this.version=dn,this.options=rn}return ur.prototype.startSpan=function(Cr,$r,dn){return this._getTracer().startSpan(Cr,$r,dn)},ur.prototype.startActiveSpan=function(Cr,$r,dn,rn){var Sn=this._getTracer();return Reflect.apply(Sn.startActiveSpan,Sn,arguments)},ur.prototype._getTracer=function(){if(this._delegate)return this._delegate;var Cr=this._provider.getDelegateTracer(this.name,this.version,this.options);return Cr?(this._delegate=Cr,this._delegate):Kr},ur}(),Wn=new(function(){function ur(){}return ur.prototype.getTracer=function(Cr,$r,dn){return new xn},ur}()),Zr=function(){function ur(){}return ur.prototype.getTracer=function(Cr,$r,dn){var rn;return(rn=this.getDelegateTracer(Cr,$r,dn))!==null&&rn!==void 0?rn:new nn(this,Cr,$r,dn)},ur.prototype.getDelegate=function(){var Cr;return(Cr=this._delegate)!==null&&Cr!==void 0?Cr:Wn},ur.prototype.setDelegate=function(Cr){this._delegate=Cr},ur.prototype.getDelegateTracer=function(Cr,$r,dn){var rn;return(rn=this._delegate)===null||rn===void 0?void 0:rn.getTracer(Cr,$r,dn)},ur}();(function(ur){ur[ur.NOT_RECORD=0]="NOT_RECORD",ur[ur.RECORD=1]="RECORD",ur[ur.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(yr||(yr={})),function(ur){ur[ur.INTERNAL=0]="INTERNAL",ur[ur.SERVER=1]="SERVER",ur[ur.CLIENT=2]="CLIENT",ur[ur.PRODUCER=3]="PRODUCER",ur[ur.CONSUMER=4]="CONSUMER"}(fn||(fn={})),function(ur){ur[ur.UNSET=0]="UNSET",ur[ur.OK=1]="OK",ur[ur.ERROR=2]="ERROR"}(Nr||(Nr={}));var on="[_0-9a-z-*/]",Xn=new RegExp("^(?:[a-z]"+on+"{0,255}|[a-z0-9]"+on+"{0,240}@[a-z]"+on+"{0,13})$"),en=/^[ -~]{0,255}[!-~]$/,ln=/,|=/,Zn=function(){function ur(Cr){this._internalState=new Map,Cr&&this._parse(Cr)}return ur.prototype.set=function(Cr,$r){var dn=this._clone();return dn._internalState.has(Cr)&&dn._internalState.delete(Cr),dn._internalState.set(Cr,$r),dn},ur.prototype.unset=function(Cr){var $r=this._clone();return $r._internalState.delete(Cr),$r},ur.prototype.get=function(Cr){return this._internalState.get(Cr)},ur.prototype.serialize=function(){var Cr=this;return this._keys().reduce(function($r,dn){return $r.push(dn+"="+Cr.get(dn)),$r},[]).join(",")},ur.prototype._parse=function(Cr){Cr.length>512||(this._internalState=Cr.split(",").reverse().reduce(function($r,dn){var rn=dn.trim(),Sn=rn.indexOf("=");if(Sn!==-1){var In=rn.slice(0,Sn),Cn=rn.slice(Sn+1,dn.length);(function(qn){return Xn.test(qn)})(In)&&function(qn){return en.test(qn)&&!ln.test(qn)}(Cn)&&$r.set(In,Cn)}return $r},new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))},ur.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},ur.prototype._clone=function(){var Cr=new ur;return Cr._internalState=new Map(this._internalState),Cr},ur}();function $t(ur){return new Zn(ur)}var or=Qr.getInstance(),Yr=Et.instance(),Vr=new(function(){function ur(){}return ur.prototype.getMeter=function(Cr,$r,dn){return qt},ur}()),Hr="metrics",Mn=function(){function ur(){}return ur.getInstance=function(){return this._instance||(this._instance=new ur),this._instance},ur.prototype.setGlobalMeterProvider=function(Cr){return bt(Hr,Cr,Et.instance())},ur.prototype.getMeterProvider=function(){return ht(Hr)||Vr},ur.prototype.getMeter=function(Cr,$r,dn){return this.getMeterProvider().getMeter(Cr,$r,dn)},ur.prototype.disable=function(){wt(Hr,Et.instance())},ur}().getInstance(),Ur=function(){function ur(){}return ur.prototype.inject=function(Cr,$r){},ur.prototype.extract=function(Cr,$r){return Cr},ur.prototype.fields=function(){return[]},ur}(),tn=s("OpenTelemetry Baggage Key");function jn(ur){return ur.getValue(tn)||void 0}function Un(){return jn(Qr.getInstance().active())}function ao(ur,Cr){return ur.setValue(tn,Cr)}function co(ur){return ur.deleteValue(tn)}var ro="propagation",vo=new Ur,oo=function(){function ur(){this.createBaggage=kt,this.getBaggage=jn,this.getActiveBaggage=Un,this.setBaggage=ao,this.deleteBaggage=co}return ur.getInstance=function(){return this._instance||(this._instance=new ur),this._instance},ur.prototype.setGlobalPropagator=function(Cr){return bt(ro,Cr,Et.instance())},ur.prototype.inject=function(Cr,$r,dn){return dn===void 0&&(dn=Lr),this._getGlobalPropagator().inject(Cr,$r,dn)},ur.prototype.extract=function(Cr,$r,dn){return dn===void 0&&(dn=gn),this._getGlobalPropagator().extract(Cr,$r,dn)},ur.prototype.fields=function(){return this._getGlobalPropagator().fields()},ur.prototype.disable=function(){wt(ro,Et.instance())},ur.prototype._getGlobalPropagator=function(){return ht(ro)||vo},ur}(),mo=oo.getInstance(),ho="trace",go=function(){function ur(){this._proxyTracerProvider=new Zr,this.wrapSpanContext=tr,this.isSpanContextValid=fr,this.deleteSpan=Lt,this.getSpan=_i,this.getActiveSpan=Kn,this.getSpanContext=Zt,this.setSpan=Wt,this.setSpanContext=zt}return ur.getInstance=function(){return this._instance||(this._instance=new ur),this._instance},ur.prototype.setGlobalTracerProvider=function(Cr){var $r=bt(ho,this._proxyTracerProvider,Et.instance());return $r&&this._proxyTracerProvider.setDelegate(Cr),$r},ur.prototype.getTracerProvider=function(){return ht(ho)||this._proxyTracerProvider},ur.prototype.getTracer=function(Cr,$r){return this.getTracerProvider().getTracer(Cr,$r)},ur.prototype.disable=function(){wt(ho,Et.instance()),this._proxyTracerProvider=new Zr},ur}().getInstance();const bo={context:or,diag:Yr,metrics:Mn,propagation:mo,trace:go}},52:(et,at,st)=>{Object.defineProperty(at,"__esModule",{value:!0});const ct=st(670),ot=st(84),gt=st(704);class ft{static async connect(vt){if(!ft._stream){const rt=vt.streamSource;try{if(rt==="gfn")return ft._stream=new ot.default,ft._stream.connect(vt.streamConfig);if(rt==="direct")return ft._stream=new ct.default,ft._stream.connect(vt.streamConfig)}catch(bt){throw{action:gt.eAction.start,status:gt.eStatus.error,info:bt}}throw console.error(`Stream:init: ${rt} is an invalid source`),{action:gt.eAction.start,status:gt.eStatus.error,info:TypeError(`Stream:init: '${rt}' is an invalid source`)}}return{action:gt.eAction.start,status:gt.eStatus.inProgress,info:"Starting stream"}}static async sendMessage(vt){try{if(ft._stream)return setTimeout(()=>{var rt;return(rt=ft._stream)===null||rt===void 0?void 0:rt.sendMessage(vt)},100),console.debug(`Sent message to GFN app: ${vt}`),{action:gt.eAction.message,status:gt.eStatus.success,info:"Message was successfully sent."};{const rt="There is no stream controller. Please call the setup method.";throw console.error(`Error sending message: ${rt}`),{action:gt.eAction.message,status:gt.eStatus.error,info:rt}}}catch(rt){throw console.error("Error sending message: "+rt),{action:gt.eAction.message,status:gt.eStatus.error,info:rt}}}static async start(){if(ft._stream)return ft._stream.start();throw{action:gt.eAction.start,status:gt.eStatus.error,info:"There is no stream controller. Please call the setup method."}}static async stop(){if(ft._stream)return ft._stream.stop().then(vt=>vt);throw{action:gt.eAction.stop,status:gt.eStatus.error,info:"There is no stream controller. Please call the setup method."}}static async terminate(vt=!1,rt=!1){if(ft._stream)return ft._stream.terminate(vt).then(bt=>((bt==null?void 0:bt.status)==="success"&&(ft._stream=null),bt));throw{action:gt.eAction.terminate,status:gt.eStatus.error,info:"There is no stream controller. Please call the setup method."}}}at.default=ft},84:(et,at,st)=>{Object.defineProperty(at,"__esModule",{value:!0});const ct=st(704),ot={GFN:null,catalogClientId:null,clientId:null,cmsId:null,muteAudio:!0,onUpdate:null,onStart:null,onCustomEvent:null};at.default=class{constructor(){this._GFN=null,this._catalogClientId="",this._clientId="",this._cmsId=-9999,this._muteAudio=!0}async connect(gt){if(!gt)throw{action:ct.eAction.start,status:ct.eStatus.error,info:"Invalid GFNConfig props provided. Please refer to usage documentation."};return gt={...ot,...gt},this._GFN=gt.GFN,this._catalogClientId=gt.catalogClientId,this._clientId=gt.clientId,this._cmsId=gt.cmsId,this._muteAudio=gt.muteAudio,this._initialize().then(async()=>{var ft,yt;await this._login();const vt=await this._GFN.server.getServerInfo();gt.onUpdate({action:ct.eAction.authUser,status:ct.eStatus.success,info:(ft=this._GFN.currentUser)===null||ft===void 0?void 0:ft.displayName}),await this._stream((yt=vt==null?void 0:vt.defaultZone)===null||yt===void 0?void 0:yt.address),console.debug("Started streaming"),this._GFN.streamer.on("started",()=>{gt.onStart({action:ct.eAction.start,status:ct.eStatus.success,info:"streamready"})}),this._GFN.streamer.on("message",rt=>{console.debug(`Received message from GFN app: ${rt}`);const bt=JSON.parse(rt);bt.event_type&&bt.payload?gt.onCustomEvent(bt):Object.keys(bt).forEach(ht=>{gt.onUpdate({action:ct.eAction.update,status:ct.eStatus.success,info:JSON.stringify({key:ht,value:bt[ht]})})})})}).catch(ft=>{throw{action:ct.eAction.start,status:ct.eStatus.error,info:ft}}),{action:ct.eAction.start,status:ct.eStatus.inProgress,info:"Starting stream."}}async start(){throw new Error("GFNStreamer::start is not defined.")}async stop(){throw new Error("GFNStreamer::stop is not defined.")}async terminate(){throw new Error("GFNStreamer::terminate is not defined.")}sendMessage(gt){try{this._GFN.streamer.sendMessage(gt)}catch(ft){console.error("Error sending message: "+ft)}}async _initialize(){console.debug("initialize");const gt=new this._GFN.Settings({clientId:this._clientId,catalogClientId:this._catalogClientId});try{await this._GFN.initialize(gt),console.debug("gfn init finished")}catch(ft){console.error(`GFN Initialization Failed: ${ft.message}`)}}async _login(){console.debug("login");const gt=this._GFN.auth.createLoginUrl();console.debug(`login ${gt}`);try{await this._GFN.auth.loginWithBrowserPopup(gt),console.debug("GFN Authorization Successful!"),console.debug(`GFN Logged in username: ${this._GFN.currentUser.displayName}`);const ft=await this._GFN.server.getServerInfo();this._GFN.settings.vpcId||(this._GFN.settings.vpcId=ft.vpcId)}catch(ft){throw console.error(`GFN Authorization Failed: ${ft.message}`),ft}}async _stream(gt){const ft=this._cmsId,yt=this._GFN.streamer.detectStreamingResolution(),vt={server:gt,appId:ft,streamParams:{width:yt.width,height:yt.height,fps:60},authTokenCallback:async()=>this._GFN.currentUser.authInfo.idToken.value,windowElementId:"view",enableMutedAutoPlay:this._muteAudio};return this._GFN.streamer.start(vt).then(()=>{console.debug("streamer is starting...")}).catch(rt=>{console.debug(`error while starting stream. ${rt}`)})}}},520:(et,at)=>{Object.defineProperty(at,"__esModule",{value:!0}),at.DefaultRagnarokQueryProps=void 0,at.DefaultRagnarokQueryProps={accessToken:"",autolaunch:!0,cursor:"free",fps:60,height:1080,mediaport:14109,mediaserver:"",mic:!1,nucleus:"",server:"",sessionid:"",signalingport:48322,signalingserver:"",width:1920},at.default=class{static query(st){return Object.keys(st).reduce((ct,ot)=>(at.DefaultRagnarokQueryProps[ot]!==void 0&&st[ot]!==void 0&&ot!=="width"&&ot!=="height"&&(ct=`${ct}&${ot}=${st[ot]}`),ct),`?resolution=${st.width}x${st.height}`)}}},670:(et,at,st)=>{Object.defineProperty(at,"__esModule",{value:!0});const ct=st(271),ot=st(947),gt=st(473),ft=st(498),yt=st(704),vt=st(520),rt="client",bt={videoElementId:"remote-video",audioElementId:"remote-audio",authenticate:!1,maxReconnects:5,nativeTouchEvents:!1,backendurl:"",connectivityTimeout:2e3,onUpdate:null,onStart:null,onStop:null,onTerminate:null,onStreamStats:null,onCustomEvent:null,...vt.DefaultRagnarokQueryProps};at.default=class{constructor(){this._ragnarokApp=null,this._backendURL="",this._accessToken=null,this._nucleus=null,this._sessionID=null}async connect(ht){if(!ht)throw{action:yt.eAction.start,status:yt.eStatus.error,info:"No RagnarokConfig props provided. Please refer to usage documentation."};if((ht={...bt,...ht}).maxReconnects<0)throw{action:yt.eAction.start,status:yt.eStatus.error,info:`Invalid prop RagnarokConfig.maxReconnects: ${ht.maxReconnects}. Must be >= 0.`};const wt={search:vt.default.query(ht)};try{this._backendURL=ht.backendurl,this._accessToken=ht.accessToken,this._nucleus=ht.nucleus,this._sessionID=ht.sessionid,ht.maxReconnects===0&&(wt.search=`${wt.search}&disableworkerws=true`);const At=await(0,ct.getPlatformDetails)();ht.authenticate||(wt.search=wt.search.replace("accessToken","accessTokenUnused")),this._ragnarokApp=new ft.RagnarokApp({maxSessionStartRetry:ht.maxReconnects,platformDetails:At,videoElementId:ht.videoElementId,audioElementId:ht.audioElementId,messageElementId:"message-display",urlLocation:wt,authProvider:new ot.DummyAuth,logBuffer:new gt.LogBuffer(512e3),onSessionStartResult:ht.onStart?(Ct,dt)=>ht.onStart(yt.StreamEventConverter.convert(Ct,dt)):null,onProgressUpdate:ht.onUpdate?(Ct,dt)=>ht.onUpdate(yt.StreamEventConverter.convert(Ct,dt)):null,onStreamStopped:null,onActiveSessionResult:null,onStreamingEvent:null,onGetSessionResult:null,onISSOUpdate:ht.onStreamStats?(Ct,dt)=>ht.onStreamStats(yt.StreamEventConverter.convert(Ct,dt)):null,onCustomEvent:ht.onCustomEvent,useTelemetry:!1,nativeTouchEvents:ht.nativeTouchEvents,connectivityTimeout:ht.connectivityTimeout}),ht.autolaunch&&await this._ragnarokApp.startButtonClick()}catch(At){throw gt.Log.e(rt,`Some error happened: ${At==null?void 0:At.name}, ${At==null?void 0:At.message}.`),{action:yt.eAction.start,status:yt.eStatus.error,info:At}}return{action:yt.eAction.start,status:yt.eStatus.inProgress,info:"Starting stream."}}sendMessage(ht){const wt={messageType:"json",messageRecipient:"kit",data:ht};this._ragnarokApp.sendCustomMessage(wt)}async stop(){try{return this._ragnarokApp.stopButtonClick(),{action:yt.eAction.stop,status:yt.eStatus.inProgress,info:"Stopping stream."}}catch{return{action:yt.eAction.stop,status:yt.eStatus.error,info:"Stopping stream."}}}async start(){try{return await this._ragnarokApp.startButtonClick(),{action:yt.eAction.start,status:yt.eStatus.inProgress,info:"Starting stream."}}catch(ht){return{action:yt.eAction.start,status:yt.eStatus.error,info:ht}}}_terminateStream(){this._ragnarokApp.stopButtonClick(!1,!0),this._ragnarokApp=null,this._backendURL="",this._accessToken=null,this._nucleus=null,this._sessionID=null}async terminate(ht){if(!ht)return this._terminateStream(),{action:yt.eAction.terminate,status:yt.eStatus.success,info:"Session has terminated"};if(confirm("Terminating session will destroy all associated resources and is irrecoverable, unsaved changes will be lost, do you confirm you want to terminate it?")){const wt=this._accessToken;this._nucleus;const At=this._sessionID,Ct=this._backendURL;this._terminateStream();let dt="DELETE";if(Ct){let Et=null;{const Rt=`https://${Ct}/stream`;Et=await fetch(Rt,{method:dt,headers:{Authorization:`Bearer ${wt}`,accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({session_id:`${At}`})})}if((Et==null?void 0:Et.status)!==200){let Rt=null,Mt=null,_t=null;try{Rt=await Et.setHeader("Strict-Transport-Security","max-age=63072000; includeSubDomains").json(),_t=Rt.message,Mt=`${Et.status}: ${Rt}`}catch{Mt=`${Et.status}: ${Et.statusText} ${Et.url}`}return gt.Log.e(rt,`Session termination failed due to '${_t}'`),{action:yt.eAction.terminate,status:yt.eStatus.error,info:Mt}}}return{action:yt.eAction.terminate,status:yt.eStatus.success,info:"Session has terminated"}}return{action:yt.eAction.terminate,status:yt.eStatus.canceled,info:"Termination has been cancelled"}}}},704:(et,at,st)=>{Object.defineProperty(at,"__esModule",{value:!0}),at.StreamEventConverter=at.eStatus=at.eAction=void 0;const ct=st(271);var ot,gt,ft;(function(vt){vt.unknown="unknown",vt.active="active",vt.configure="configure",vt.connect="connect",vt.get="get",vt.start="start",vt.stop="stop",vt.stream="stream",vt.terminate="terminate",vt.update="update",vt.message="message",vt.authUser="authUser"})(ot=at.eAction||(at.eAction={})),function(vt){vt.unknown="unknown",vt.inProgress="inProgress",vt.success="success",vt.canceled="canceled",vt.error="error",vt.warning="warning",vt.waiting="waiting"}(gt=at.eStatus||(at.eStatus={})),function(vt){vt.sessionProgressUpdateEvent="SessionProgressUpdateEvent",vt.streamingEvent="StreamingEvent",vt.streamUpdateEvent="StreamUpdateEvent",vt.startSessionResultEvent="StartSessionResultEvent",vt.streamingTerminatedEvent="StreamingTerminatedEvent",vt.activeSessionResultEvent="ActiveSessionResultEvent",vt.getSessionResult="GetSessionResult"}(ft||(ft={}));class yt{static convert(rt,bt){return bt===ft.sessionProgressUpdateEvent?yt.fromSessionProgressUpdateEvent(rt):bt===ft.activeSessionResultEvent?yt.fromActiveSessionResultEvent(rt):bt===ft.streamingEvent?yt.fromStreamingEvent(rt):bt===ft.streamUpdateEvent?yt.fromStreamUpdateEvent(rt):bt===ft.getSessionResult?yt.fromGetSessionResult(rt):bt===ft.streamingTerminatedEvent?yt.fromStreamingTerminatedEvent(rt):bt===ft.startSessionResultEvent?yt.fromStartSessionResultEvent(rt):{action:ot.unknown,status:gt.unknown,info:"An unknown event has occured."}}static fromSessionProgressUpdateEvent(rt){const bt=rt.state===ct.SessionProgressState.STARTING_STREAMER?ot.start:rt.state===ct.SessionProgressState.CONFIGURING?ot.configure:rt.state===ct.SessionProgressState.CONNECTING?ot.connect:ot.unknown;return{action:bt,status:gt.inProgress,info:`${bt}ing`,sessionId:rt.sessionId,subSessionId:rt.subSessionId,queuePosition:rt.queuePosition,eta:rt.eta}}static fromStartSessionResultEvent(rt){var bt;return{action:ot.start,status:rt.error?gt.error:gt.success,info:((bt=rt==null?void 0:rt.error)===null||bt===void 0?void 0:bt.description)||"",sessionId:rt.sessionId,subSessionId:rt.subSessionId}}static fromStreamingEvent(rt){return{action:ot.stream,status:gt.unknown,info:"streaming"}}static fromStreamUpdateEvent(rt){return{action:ot.update,status:gt.unknown,info:"stat-update",stats:{codec:rt.codec,fps:rt.fps,rtd:rt.rtd,avgDecodeTime:rt.avgDecodeTime,frameLoss:rt.frameLoss,packetLoss:rt.packetLoss,totalBandwidth:rt.totalBandwidth,utilizedBandwidth:rt.utilizedBandwidth,streamingResolutionHeight:rt.streamingResolution.height,streamingResolutionWidth:rt.streamingResolution.width}}}static fromStreamingTerminatedEvent(rt){return{action:ot.terminate,status:gt.unknown,info:"terminating",sessionId:rt.sessionId,subSessionId:rt.subSessionId}}static fromActiveSessionResultEvent(rt){return{action:ot.active,status:gt.unknown,info:"active"}}static fromGetSessionResult(rt){return{action:ot.get,status:gt.unknown,info:"streaming",sessionId:rt.sessionId,subSessionId:rt.subSessionId}}}at.StreamEventConverter=yt},947:(et,at,st)=>{Object.defineProperty(at,"__esModule",{value:!0}),at.DummyAuth=void 0;const ct=st(271);at.DummyAuth=class{setDataForLoginType(ot){console.log("initializing dummy auth")}getLoginUrl(){return"error"}getUserName(){return"Local"}getUserId(){return"Local"}getExternalUserId(){return"Local"}getDeviceId(){return"Local"}getIdpId(){return"Local"}checkTokenValidity(){return Promise.resolve()}respondToRedirect(ot){return Promise.resolve()}getTokenCallback(){return()=>Promise.resolve("dummy")}getAuthInfo(){return Promise.resolve({type:ct.AuthType.JWT_GFN,token:"dummy"})}logout(){console.log("logging out of dummy auth")}startOffDeviceLogin(){return Promise.resolve({verification_uri:"",user_code:"",device_code:"",expires_in:0,interval:0})}pollOffDeviceLogin(ot){return Promise.resolve()}}},473:(et,at,st)=>{Object.defineProperty(at,"__esModule",{value:!0}),at.Log=at.LogBuffer=void 0;const ct=st(271);class ot{constructor(ft,yt){this.encoder=new TextEncoder,this.logIndex=0,this.full=!1,this.buffer=new Uint8Array(ft+ot.FULL_MESSAGE.length),this.maxLength=ft,this.logfile=yt}clear(){this.encoder=new TextEncoder,this.logIndex=0,this.full=!1}log(ft){if(this.full)return;let yt=this.encoder.encode(ft+`
`);this.logIndex+yt.byteLength>this.maxLength&&(this.full=!0,yt=this.encoder.encode(ot.FULL_MESSAGE)),this.buffer.set(yt,this.logIndex),this.logIndex+=yt.byteLength}download(){const ft=document.createElement("a");ft.style.display="none";const yt=new Blob([new DataView(this.buffer.buffer,0,this.logIndex)],{type:"text/plain"}),vt=URL.createObjectURL(yt);ft.href=vt,this.logfile?ft.download=this.logfile:ft.download=`omniverse-streaming-${new Date().toISOString()}.log`,document.body.appendChild(ft),ft.click(),URL.revokeObjectURL(vt),document.body.removeChild(ft)}setIds(ft,yt){this.sessionId=ft,this.subSessionId=yt}}at.LogBuffer=ot,ot.FULL_MESSAGE=`Log is full
`,at.Log=new ct.LogImpl("ows",{enable:!0,enableConsoleLogging:!0})},498:(et,at,st)=>{Object.defineProperty(at,"__esModule",{value:!0}),at.RagnarokApp=void 0;const ct=st(271),ot=st(473),gt=st(593),ft=st(704),yt="client";at.RagnarokApp=class{constructor({maxSessionStartRetry:vt,platformDetails:rt,videoElementId:bt,audioElementId:ht,messageElementId:wt,urlLocation:At,authProvider:Ct,logBuffer:dt,onSessionStartResult:Et,onProgressUpdate:Rt,onStreamStopped:Mt,onActiveSessionResult:_t,onStreamingEvent:kt,onGetSessionResult:nt,onISSOUpdate:s,onCustomEvent:b,useTelemetry:$=!1,nativeTouchEvents:_e=!1,connectivityTimeout:it=2e3}){this.tracksMap=new Map,this.totalTracks=0,this.hasPlatformBeenSimulated=!1,this.hasAppLaunchBeenSimulated=!1,this.micEnabled=!1,this.sessionStartRetryLeft=0,this._hasFocus=!1,At=At||location,this.sessionStartParams={},this.sessionId="",this.sessionsToDelete=0,this.sessionStartRetryLeft=vt,this.videoElement=document.getElementById(bt),this.audioElement=document.getElementById(ht),this.messageElement=document.getElementById(wt),this.logBuffer=dt,this.authProvider=Ct,this.useTelemetry=$,this.nativeTouchEvents=_e,this.connectivityTimeout=it,this.errorMap=new Map,this.buildErrorMessageMap(),this.platformDetails=rt,ot.Log.i(yt,`Platform details: ${this.platformDetails}`),this.instantiateGridApp(),this.setupHTMLElements(),this.queryParams=new URLSearchParams(At.search),this._onProgressUpdate=Rt,this._onSessionStartResult=Et,this._onStreamStopped=Mt,this._onActiveSessionResult=_t,this._onStreamingEvent=kt,this._onGetSessionResult=nt,this._onISSOUpdate=s,this._onCustomEvent=b}setupHTMLElements(){this.audioElement&&(this.audioElement.muted=!0),this.videoElement.muted=!0,this.videoElement.playsInline=!0,this.videoElement.autoplay=!0,this.videoElement.tabIndex=-1,this.videoElement.addEventListener("contextmenu",function(vt){vt.preventDefault()}),this.videoElement.addEventListener("keydown",this.keyUpDownEventHandler.bind(this)),this.videoElement.addEventListener("keyup",this.keyUpDownEventHandler.bind(this)),document.addEventListener("focusin",this.focusinEventHandler.bind(this)),document.addEventListener("focusout",this.focusoutEventHandler.bind(this)),this.videoElement.parentElement.addEventListener("click",this.videoElementClickedEventHandler.bind(this)),this._hasFocus=this.videoElement.parentElement.tabIndex===-1,console.log(`Viewport has focus: ${this._hasFocus}`)}videoElementClickedEventHandler(vt){this.videoElement.parentElement.focus()}focusoutEventHandler(vt){vt.relatedTarget||this._hasFocus===!0||(console.log("Viewport getting focus"),this._hasFocus=!0,this.tracksMap.size>0&&this.gridApp.toggleUserInput(!0,ct.InputType.All))}focusinEventHandler(vt){document.activeElement===this.videoElement.parentElement?this._hasFocus!==!0&&(console.log("Viewport getting focus"),this._hasFocus=!0,this.tracksMap.size>0&&this.gridApp.toggleUserInput(!0,ct.InputType.All)):this._hasFocus===!0&&(console.log("Viewport loosing focus"),this._hasFocus=!1,this.tracksMap.size>0&&this.gridApp.toggleUserInput(!1,ct.InputType.Keyboard|ct.InputType.Gamepad|ct.InputType.Touch))}keyUpDownEventHandler(vt){vt.keyCode==73&&vt.ctrlKey&&vt.shiftKey||vt.keyCode==67&&vt.shiftKey&&vt.metaKey||vt.keyCode==68&&vt.ctrlKey&&vt.shiftKey||vt.code=="Tab"&&vt.altKey||vt.code=="ZoomToggle"||vt.code=="SelectTask"||vt.code=="BrightnessDown"||vt.code=="BrightnessUp"||vt.code=="AudioVolumeMute"||vt.code=="AudioVolumeDown"||vt.code=="AudioVolumeUp"||vt.keyCode>=48&&vt.keyCode<=57||vt.code=="Backspace"||vt.preventDefault(),vt.keyCode==86&&vt.ctrlKey&&this.pasteClipboardText()}pasteClipboardText(){navigator.clipboard&&window.isSecureContext?navigator.clipboard.readText().then(vt=>{vt&&(ot.Log.i(yt,"Sent clipboard text to the server."),this.gridApp.sendTextInput((0,gt.StringToUtf8)(vt)))}).catch(vt=>{ot.Log.e(yt,"Failed to read clipboard contents: "+vt)}):ot.Log.i(yt,"Cannot read from clipboard because in insecure context.")}copyTextToClipboard(vt){navigator.clipboard&&window.isSecureContext?navigator.clipboard.writeText(vt).then(()=>{ot.Log.i(yt,"Copied clipboard text from the server: "+vt)}).catch(rt=>{ot.Log.e(yt,"Failed to write clipboard contents: "+rt)}):ot.Log.i(yt,"Cannot write to clipboard because in insecure context.")}getQueryParam(vt){return this.queryParams.get(vt)}onLogEvent(vt){if(this.logBuffer)vt.logLevel!=="DEBUG"&&this.logBuffer.log(`${vt.timeStamp} ${vt.logLevel} ${vt.logModule}/${vt.logtag} ${vt.logstr}`);else switch(vt.logLevel){case"INFO":console.log(`${vt.timeStamp} ${vt.logLevel} ${vt.logModule}/${vt.logtag} ${vt.logstr}`);break;case"WARN":console.warn(`${vt.timeStamp} ${vt.logLevel} ${vt.logModule}/${vt.logtag} ${vt.logstr}`);break;case"DEBUG":console.debug(`${vt.timeStamp} ${vt.logLevel} ${vt.logModule}/${vt.logtag} ${vt.logstr}`);break;case"ERROR":console.error(`${vt.timeStamp} ${vt.logLevel} ${vt.logModule}/${vt.logtag} ${vt.logstr}`)}}updateEventDataElements(){var vt;(vt=this.gridApp)===null||vt===void 0||vt.updateEventDataElements({commonData:{clientId:"78589530426925203",clientVer:"2.0.45.34",clientVariant:"Release",eventSchemaVer:"23.0",eventSysVer:"0.12.2",deviceId:this.authProvider.getDeviceId(),userId:this.authProvider.getUserId(),externalUserId:this.authProvider.getExternalUserId(),idpId:this.authProvider.getIdpId(),integrationId:"undefined",sessionId:"92774af7-fbc1-488f-a090-ba49cfd13da2",deviceOS:this.getMappedDeviceOS(this.platformDetails.os),deviceOSVersion:this.platformDetails.osVer,deviceType:this.getMappedDeviceType(this.platformDetails.deviceType),deviceMake:"APPLE",deviceModel:"undefined",clientType:"Browser",browserType:this.getMappedBrowserName(this.platformDetails.browser),platform:"Web",eventProtocol:"1.4",deviceGdprFuncOptIn:"Full",deviceGdprTechOptIn:"None",deviceGdprBehOptIn:"None",gdprFuncOptIn:"Full",gdprTechOptIn:"Full",gdprBehOptIn:"Full"},experiments:[{id:"6376d3bf-3f62-419d-989c-2955c25f2b4e",group:"ENABLE"},{id:"feb30a68-ee9a-44a0-a717-da2d28c81e97",group:"ENABLE"},{id:"ea128779-32c7-45c1-94c8-c9374d64219d",group:"ENABLE"},{id:"ac00061b-eb8d-4d6c-978a-f3ac96f8e91a",group:"ENABLE"},{id:"21f7e7af-b5ae-4c76-b269-3cc4351671d2",group:"ENABLE"},{id:"b205ded0-6c08-4436-b818-f0bde4633f08",group:"ENABLE"},{id:"d639ef8f-c6c5-4931-8e75-451e9e075c62",group:"ENABLE"},{id:"cdce276d-d611-4ef9-ba6f-a90c3e7040d4",group:"ENABLE"},{id:"4c57b739-c860-4c5e-b3e4-9d89ff91b561",group:"ENABLE"},{id:"86bf4cf1-b717-4f72-8414-0f40d6a32656",group:"ENABLE"}],config:{server:"https://events.gfestage.nvidia.com",version:"v1.0"},telemetryEventIds:{streamingProfileGuid:"testClientStreamingProfileGuid",systemInfoGuid:"testClientSystemInfoGuid"}})}getMappedBrowserName(vt){switch(vt){case ct.BrowserName.CHROME:return"Chrome";case ct.BrowserName.SAFARI:return"Safari";case ct.BrowserName.YANDEX:return"Yandex";case ct.BrowserName.EDGE:return"Edge";case ct.BrowserName.EDGE_LEGACY:return"Edge_legacy";case ct.BrowserName.FIREFOX:return"Firefox";case ct.BrowserName.SAMSUNG:return"Samsung";case ct.BrowserName.CHROMIUM:return"Chromium";case ct.BrowserName.OPERA:return"Opera";case ct.BrowserName.BRAVE:return"Brave";case ct.BrowserName.SILK:return"Silk";case ct.BrowserName.UNKNOWN:case ct.BrowserName.REACT:default:return"undefined"}}getMappedDeviceType(vt){let rt="undefined";return vt===ct.DeviceType.CONSOLE?rt="Console":vt===ct.DeviceType.TABLET?rt="Tablet":vt===ct.DeviceType.PHONE?rt="Phone":vt===ct.DeviceType.TV?rt="TV":vt===ct.DeviceType.LAPTOP?rt="Laptop":vt===ct.DeviceType.DESKTOP&&(rt="Desktop"),rt}getMappedDeviceOS(vt){switch(vt.toLowerCase()){case"windows":return"Windows";case"macosx":case"macos":return"MacOS";case"chromeos":case"chrome os":return"ChromeOS";case"linux":return"Linux";case"ios":return"iOS";case"ipados":return"iPadOS";case"tizen":return"Tizen";case"webos":return"WebOS";case"xbox":return"Xbox";default:return"undefined"}}setMessageElementValue(vt,rt=!1){this.messageElement.textContent=vt}instantiateGridApp(){ot.Log.i(yt,"Instantiating grid app."),this.gridApp=new ct.GridApp(this.platformDetails),this.gridApp.addListener(ct.EVENTS.SESSION_START_RESULT,this.onSessionStartResult.bind(this)),this.gridApp.addListener(ct.EVENTS.SESSION_STOP_RESULT,this.onSessionStopResult.bind(this)),this.gridApp.addListener(ct.EVENTS.ACTIVE_SESSIONS_RESULT,this.onActiveSessionResult.bind(this)),this.gridApp.addListener(ct.EVENTS.PROGRESS_UPDATE,this.onProgressUpdate.bind(this)),this.gridApp.addListener(ct.EVENTS.STREAM_STOPPED,this.onStreamStopped.bind(this)),this.gridApp.addListener(ct.EVENTS.STREAMING_EVENT,this.onStreamingEvent.bind(this)),this.gridApp.addListener(ct.EVENTS.GET_SESSION_RESULT,this.onGetSessionResult.bind(this)),this.gridApp.addListener(ct.EVENTS.CUSTOM_MESSAGE,this.onCustomMessage.bind(this)),this.gridApp.addListener(ct.EVENTS.STREAM_STATS_UPDATE,this.onISSOUpdate.bind(this)),this.gridApp.addListener(ct.EVENTS.LOG_EVENT,this.onLogEvent.bind(this))}buildErrorMessageMap(){this.errorMap.set(ct.RErrorCode.AuthProviderError,"Error happened during request to auth provider"),this.errorMap.set(ct.RErrorCode.NoNetwork,"No internet connection."),this.errorMap.set(ct.RErrorCode.NetworkError,"A network error occurred."),this.errorMap.set(ct.RErrorCode.GetActiveSessionServerError,"Error occurred due to GetActiveSessionServerError."),this.errorMap.set(ct.RErrorCode.ExceptionHappened,"Unexpected exception happened."),this.errorMap.set(ct.RErrorCode.AuthTokenNotUpdated,"Error occurred due to AuthTokenNotUpdated."),this.errorMap.set(ct.RErrorCode.SessionFinishedState,"Unexpected session state while polling."),this.errorMap.set(ct.RErrorCode.ResponseParseFailure,"Failed to parse server response."),this.errorMap.set(ct.RErrorCode.StreamerVideoPlayError,"Video play failure."),this.errorMap.set(ct.RErrorCode.GridAppNotInitialized,"Grid app instance was not initialized."),this.errorMap.set(ct.RErrorCode.SessionLimitExceeded,"Session Limit Exceeded."),this.errorMap.set(ct.RErrorCode.StreamErrorGeneric,"Some generic error happened in streamer."),this.errorMap.set(ct.RErrorCode.StreamerSignInFailure,"Error happened during signin request to signaling server."),this.errorMap.set(ct.RErrorCode.StreamerHangingGetFailure,"Error happened in hanging get request of peer connection."),this.errorMap.set(ct.RErrorCode.StreamerIceConnectionFailed,"Could not find valid ice candidate pair."),this.errorMap.set(ct.RErrorCode.StreamerGetRemotePeerTimedOut,"Streaming stopped as there is no remote peer."),this.errorMap.set(ct.RErrorCode.StreamInputChannelError,"Streaming stopped due to input channel error."),this.errorMap.set(ct.RErrorCode.StreamCursorChannelError,"Streaming stopped due to cursor channel error."),this.errorMap.set(ct.RErrorCode.StreamControlChannelError,"Streaming stopped due to control channel error."),this.errorMap.set(ct.RErrorCode.StreamerIceReConnectionFailed,"Reconnect attempt failed after network problem or remote peer not alive."),this.errorMap.set(ct.RErrorCode.StreamerNoVideoPacketsReceivedEver,"Streaming stopped as NoVideoPacketsReceivedEver."),this.errorMap.set(ct.RErrorCode.StreamerNoVideoFramesLossyNetwork,"Streaming stopped as NoVideoFramesLossyNetwork."),this.errorMap.set(ct.RErrorCode.StreamDisconnectedFromServer,"Stream Disconnected from server, unknown reason."),this.errorMap.set(ct.RErrorCode.ServerDisconnectedNoResponse,"Stream Disconnected from server, NoResponce."),this.errorMap.set(ct.RErrorCode.ServerDisconnectedRemoteInputError,"Stream Disconnected from server, RemoteInputError."),this.errorMap.set(ct.RErrorCode.ServerDisconnectedFrameGrabFailed,"Stream Disconnected from server, FrameGrabFailed."),this.errorMap.set(ct.RErrorCode.ServerDisconnectedConfigUnAvailable,"Stream Disconnected from server, ConfigUnAvailable."),this.errorMap.set(ct.RErrorCode.ServerDisconnectedInvalidCommand,"Stream Disconnected from server, InvalidCommand."),this.errorMap.set(ct.RErrorCode.ServerDisconnectedInvalidMouseState,"Stream Disconnected from server, InvalidMouseState."),this.errorMap.set(ct.RErrorCode.ServerDisconnectedNetworkError,"Stream Disconnected from server, NetworkError."),this.errorMap.set(ct.RErrorCode.ServerDisconnectedGameLaunchFailed,"Stream Disconnected from server, GameLaunchFailed."),this.errorMap.set(ct.RErrorCode.ServerDisconnectedVideoFirstFrameSendFailed,"Stream Disconnected from server, VideoFirstFrameSendFailed."),this.errorMap.set(ct.RErrorCode.ServerDisconnectedVideoNextFrameSendFailed,"Stream Disconnected from server, VideoNextFrameSendFailed."),this.errorMap.set(ct.RErrorCode.ServerDisconnectedFrameGrabTimedOut,"Stream Disconnected from server, FrameGrabTimedOut."),this.errorMap.set(ct.RErrorCode.ServerDisconnectedFrameEncodeTimedOut,"Stream Disconnected from server, FrameEncodeTimedOut."),this.errorMap.set(ct.RErrorCode.ServerDisconnectedFrameSendTimedOut,"Stream Disconnected from server, FrameSendTimedOut."),this.errorMap.set(ct.RErrorCode.ServerDisconnectedIntended,"Stream Disconnected from server as user quit the game."),this.errorMap.set(ct.RErrorCode.ServerDisconnectedUserLoggedInDifferentAccount,"Stream Disconnected from server, userLoggedinDifferenAccount."),this.errorMap.set(ct.RErrorCode.ServerDisconnectedWindowedMode,"Stream Disconnected from server, WindowedMode."),this.errorMap.set(ct.RErrorCode.ServerDisconnectedUserIdle,"Stream Disconnected from server, UserIdle."),this.errorMap.set(ct.RErrorCode.ServerDisconnectedUnAuthorizedProcessDetected,"Stream Disconnected from server, UnAuthorizedProcessDetected."),this.errorMap.set(ct.RErrorCode.ServerDisconnectedMaliciousProcessDetected,"Stream Disconnected from server, MaliciousProcessDetected."),this.errorMap.set(ct.RErrorCode.ServerDisconnectedUnKnownProcessDetected,"Stream Disconnected from server, UnKnownProcessDetected."),this.errorMap.set(ct.RErrorCode.ServerDisconnectedMinerProcessDetected,"Stream Disconnected from server, MinerProcessDetected."),this.errorMap.set(ct.RErrorCode.ServerDisconnectedStreamingUnsupported,"Stream Disconnected from server, StreamingUnsupported."),this.errorMap.set(ct.RErrorCode.ServerDisconnectedAnotherClient,"Stream Disconnected from server, AnotherClient."),this.errorMap.set(ct.RErrorCode.ServerDisconnectedUnknownFromPm,"Stream Disconnected from server, UnknownFromPm."),this.errorMap.set(ct.RErrorCode.ServerDisconnectedUserEntitledMinutesExceeded,"Stream Disconnected from server, UserEntitledMinutesExceeded."),this.errorMap.set(ct.RErrorCode.ServerDisconnectedClientReconnectTimeLimitExceeded,"Stream Disconnected from server, ClientReconnectTimeLimitExceeded."),this.errorMap.set(ct.RErrorCode.ServerDisconnectedOperatorCommandedTermination,"Stream Disconnected from server, OperatorCommandedTermination."),this.errorMap.set(ct.RErrorCode.ServerDisconnectedConcurrentSessionLimitExceeded,"Stream Disconnected from server, ConcurrentSessionLimitExceeded."),this.errorMap.set(ct.RErrorCode.ServerDisconnectedMaxSessionTimeLimitExceeded,"Stream Disconnected from server, MaxSessionTimeLimitExceeded."),this.errorMap.set(ct.RErrorCode.ServerDisconnectedBifrostInitiatedSessionPause,"Stream Disconnected from server, BifrostInitiatedSessionPause."),this.errorMap.set(ct.RErrorCode.ServerDisconnectedSystemCommandTermination,"Stream Disconnected from server, SystemCommandTermination."),this.errorMap.set(ct.RErrorCode.ServerDisconnectedMultipleLogin,"Stream Disconnected from server, MultipleLogin."),this.errorMap.set(ct.RErrorCode.ServerInternalError,"Session setup failed on server."),this.errorMap.set(ct.RErrorCode.RequestLimitExceeded,"You've tried to play too many games in a short period of time. Please wait a few minutes and try again."),this.errorMap.set(ct.RErrorCode.EntitlementFailure,"You are not entitled to play this game. Please check you entitlement."),this.errorMap.set(ct.RErrorCode.EntitlementFailure,"One of the micro services on Zone failed. Please check telemetry for more details."),this.errorMap.set(ct.RErrorCode.AppPatching,"Game is currently in patching state, please try again later."),this.errorMap.set(ct.RErrorCode.GameNotFound,"Requested game is not available in the zone. Please try another zone."),this.errorMap.set(ct.RErrorCode.AppMaintenanceStatus,"Requested game is under maintenance."),this.errorMap.set(ct.RErrorCode.RequiredSeatInstanceTypeNotSupported,"Required instance type for the game is not available in current zone. Please try different zone."),this.errorMap.set(ct.RErrorCode.ServerSessionQueueLengthExceeded,"Weve reached our limit for the number of gamers who can wait for the next available rig. Please try again later"),this.errorMap.set(ct.RErrorCode.SessionTerminatedByAnotherClient,"Session setup request was terminated by another client."),this.errorMap.set(ct.RErrorCode.ServerDisconnectedGameNotOwnedByUser,"Your session ended as you do not own the requested game."),this.errorMap.set(ct.RErrorCode.SystemSleepDuringStreaming,"Your session ended as device went to sleep during streaming"),this.errorMap.set(ct.RErrorCode.SessionInQueueAbandoned,"Session abandoned during polling"),this.errorMap.set(ct.RErrorCode.NoInternetDuringSessionSetup,"Cannot connect to server."),this.errorMap.set(ct.RErrorCode.NoInternetDuringStreaming,"Cannot connect to server.")}getDisplayableErrorMessage(vt){return this.errorMap.has(vt)?this.errorMap.get(vt):`No displayable error message found for error code ${vt}`}handleActiveSessions(vt){for(let rt=0;rt<vt.length;rt++)if(this.sessionStartParams.appId==vt[rt].appId&&(vt[rt].state==ct.SessionState.READY_FOR_CONNECTION||vt[rt].state==ct.SessionState.STREAMING||vt[rt].state==ct.SessionState.PAUSED))return ot.Log.i(yt,"Existing session found with the appid "+vt[rt].appId+" and SessionState "+vt[rt].state),this.setMessageElementValue("Resuming previous session..."),this.sessionStartParams.appLaunchMode==ct.AppLaunchMode.TouchFriendly&&vt[rt].appLaunchMode!=ct.AppLaunchMode.TouchFriendly&&(this.sessionStartParams.appLaunchMode=ct.AppLaunchMode.Default,ot.Log.w(yt,"session "+vt[rt].sessionId+" was not launched in touch friendly mode, ignoring touch input mode.")),void this.gridApp.resumeSession(this.sessionStartParams,vt[rt].sessionId);this.setMessageElementValue("Stopping existing sessions"),this.sessionsToDelete=vt.length;for(let rt=0;rt<vt.length;rt++)this.gridApp.stopSession(vt[rt].sessionId)}resetTrackInfo(){this.totalTracks=0,this.tracksMap.clear()}playTrack(vt,rt){let bt=rt.play();const ht=wt=>{for(const At of rt.srcObject.getTracks())this.tracksMap.set(At.id,wt)};if(bt){let wt=this._hasFocus;bt.then(()=>{ot.Log.i(yt,`${vt} play succeeded.`),rt instanceof HTMLVideoElement&&(wt?this.gridApp.toggleUserInput(!0,ct.InputType.All):this.gridApp.toggleUserInput(!0,ct.InputType.Mouse)),ht(!0)}).catch(At=>{ot.Log.e(yt,`${vt} play error: ${At==null?void 0:At.name} , ${At==null?void 0:At.message}`),ht(!1),this.gridApp.stopSession(this.sessionId),this.setMessageElementValue("Play failed",!0)})}else rt instanceof HTMLVideoElement&&(this._hasFocus?this.gridApp.toggleUserInput(!0,ct.InputType.All):this.gridApp.toggleUserInput(!0,ct.InputType.Mouse)),ht(!0)}playMedia(){for(let vt of this.startResult.streams)for(let rt of vt.tracks)rt.kind===ct.TrackType.VIDEO&&this.videoElement.srcObject?this.playTrack(rt.trackId,this.videoElement):rt.kind===ct.TrackType.AUDIO&&this.audioElement.srcObject&&this.playTrack(rt.trackId,this.audioElement)}onSessionStartResult(vt){if(this.lastSessionId=vt.sessionId,this.lastSubSessionId=vt.subSessionId,vt.error)if(vt.error.code==ct.RErrorCode.SessionLimitExceeded)vt.sessionList?(ot.Log.i(yt,"Session limit reached. Number of active sessions: "+vt.sessionList.length),vt.sessionList.length&&this.handleActiveSessions(vt.sessionList)):(this.setMessageElementValue("Checking for existing sessions.."),this.gridApp.getActiveSessions()),this.handleLogs(vt.sessionId,vt.subSessionId);else if(vt.error.code==ct.RErrorCode.SessionLimitPerDeviceReached)this.setMessageElementValue("There is an active session for this device belonging to another user. Please try again after sometime"),this.handleLogs(vt.sessionId,vt.subSessionId);else if(vt.error.code==ct.RErrorCode.SessionSetupCancelled||vt.error.code==ct.RErrorCode.SessionSetupCancelledDuringQueuing)this.setMessageElementValue("Session setup was cancelled, please reconfigure your session.",!0);else{let rt=this.getDisplayableErrorMessage(vt.error.code);if(this.sessionStartRetryLeft>0){let bt=`
                        Connection attempt failed with error message '${rt}'. 
                        Number of retry left: ${this.sessionStartRetryLeft}. 
                        Retry in 5 seconds...`;ot.Log.e(yt,bt),this.setMessageElementValue("Connection in progress..."),this.sessionStartRetryLeft-=1,window.setTimeout(()=>this.startButtonClick(),5e3)}else this.setMessageElementValue(rt+" "+(0,gt.GetHexString)(vt.error.code),!0);this.handleLogs(vt.sessionId,vt.subSessionId)}else{ot.Log.i(yt,"client: successfully set up session: "+vt.sessionId),ot.Log.i(yt,"Should enable mic: "+this.getGridApp().shouldDefaultEnableMic()),this.sessionId=vt.sessionId,this.startResult=vt,ot.Log.i(yt,"streams: "+JSON.stringify(this.startResult.streams));for(let rt of this.startResult.streams)this.totalTracks+=rt.tracks.length;this.playMedia()}this._onSessionStartResult&&this._onSessionStartResult(vt,"StartSessionResultEvent")}handleLogs(vt,rt){this.logBuffer.setIds(vt,rt)}onSessionStopResult(vt){this.lastSessionId=vt.sessionId,this.lastSubSessionId=vt.subSessionId,this.sessionId==vt.sessionId?(this.sessionId="",vt.framesDecoded>0?ot.Log.i(yt,"Session stop result is normal"):this.setMessageElementValue("Zero frame decoded.",!0)):this.sessionsToDelete>0&&(this.sessionsToDelete--,this.sessionsToDelete===0&&this.begin()),this.handleLogs(vt.sessionId,vt.subSessionId)}onProgressUpdate(vt){ot.Log.i(yt,JSON.stringify(vt));let rt="Setting up your session. state: "+vt.state;vt.state==ct.SessionProgressState.STARTING_STREAMER?rt="Starting streamer...":vt.state==ct.SessionProgressState.CONNECTING&&(rt="Connecting to streamer..."),vt.queuePosition&&(rt+=". QueuePosition: "+vt.queuePosition),vt.eta>1e3&&(rt+=". ETA "+Math.round(vt.eta/1e3)+"seconds"),this._onProgressUpdate&&this._onProgressUpdate(vt,"SessionProgressUpdateEvent"),this.setMessageElementValue(rt)}onStreamStopped(vt){if(this.lastSessionId=vt.sessionId,this.lastSubSessionId=vt.subSessionId,this.resetTrackInfo(),vt.error){let rt=this.getQueryParam("resume");if(vt.error.code==ct.RErrorCode.ServerDisconnectedIntended)this.setMessageElementValue("Server disconnected intended.",!0);else if(rt&&vt.isResumable)ot.Log.i(yt,"Resuming after 15 secs"),this.setMessageElementValue("Resuming after 15 secs..."),window.setTimeout(()=>this.gridApp.getActiveSessions(),15e3);else{let bt=this.getDisplayableErrorMessage(vt.error.code);this.setMessageElementValue(bt+" "+(0,gt.GetHexString)(vt.error.code),!0)}}this._onStreamStopped&&this._onStreamStopped(vt,"StreamingTerminatedEvent"),this.handleLogs(vt.sessionId,vt.subSessionId)}onActiveSessionResult(vt){vt.error?(ot.Log.e(yt,"ActiveSession request failed. Error: "+vt.error.code.toString(16).toUpperCase()),this.setMessageElementValue("Get Active session failed",!0)):(ot.Log.i(yt,"ActiveSession request succeeded. Number of active sessions: "+vt.sessionList.length),vt.sessionList.length?this.handleActiveSessions(vt.sessionList):this.begin()),this._onActiveSessionResult&&this._onActiveSessionResult(vt,"ActiveSessionResultEvent")}onStreamingEvent(vt){ot.Log.i(yt,"StreamingEvent event: "+JSON.stringify(vt)),vt.streamingState&&vt.streamingState.state===ct.STREAMING_STATE.RECONNECTING&&(this.setMessageElementValue("Reconnecting...",!0),this._onStreamingEvent&&this._onStreamingEvent(vt,"StreamingEvent"))}onGetSessionResult(vt){vt.error?(ot.Log.e(yt,"Cannot resume: "+vt.error.code),this.setMessageElementValue(vt.error.description+": "+vt.error.code,!0)):(ot.Log.i(yt,"onGetSessionResult state: "+vt.state),vt.state==ct.SessionState.INITIALIZING||vt.state==ct.SessionState.RESUMING?window.setTimeout(()=>this.gridApp.getSession(vt.sessionId),1e3):vt.state==ct.SessionState.READY_FOR_CONNECTION&&this.gridApp.resumeSession(this.sessionStartParams,vt.sessionId)),this._onGetSessionResult&&this._onGetSessionResult(vt,"GetSessionResult")}sendCustomMessage(vt){ot.Log.i(yt,JSON.stringify(vt)),this.gridApp.sendCustomMessage(vt)}onCustomMessage(vt){"clipboard_set"in vt?this.copyTextToClipboard(vt.clipboard_set):this._onCustomEvent?(ot.Log.i(yt,JSON.stringify(vt)),this._onCustomEvent(vt)):ot.Log.i(yt,JSON.stringify({action:ft.eAction.message,status:ft.eStatus.warning,info:"Stream sent a custom message, but client has not provided an onCustomEvent handler method."}))}onISSOUpdate(vt){this._onISSOUpdate&&this._onISSOUpdate(vt,"StreamUpdateEvent")}downloadLogs(){this.logBuffer.download()}downloadAudioRecordings(){var vt;(vt=this.gridApp)===null||vt===void 0||vt.downloadAudio()}getPlatformOverride(vt,rt,bt,ht,wt){return"clientplatformname="+vt+"&clienttype="+rt+"&deviceos="+bt+"&devicetype="+ht+"&clientstreamer="+wt}getPlatformAndAppLaunchOverrides(vt,rt){let bt,ht=this.queryParams.toString(),wt="";switch(vt){case 0:this.hasPlatformBeenSimulated&&this.getPlatformOverride("","","","","");break;case 1:wt=this.getPlatformOverride("Windows",ct.ClientType.NATIVE,ct.DeviceOS.WINDOWS,ct.DeviceType.DESKTOP,ct.ClientStreamer.CLASSIC);break;case 2:wt=this.getPlatformOverride("MacOSX",ct.ClientType.NATIVE,ct.DeviceOS.MACOS,ct.DeviceType.DESKTOP,ct.ClientStreamer.CLASSIC);break;case 3:wt=this.getPlatformOverride("Linux",ct.ClientType.NATIVE,ct.DeviceOS.ANDROID,ct.DeviceType.TABLET,ct.ClientStreamer.CLASSIC);break;case 4:wt=this.getPlatformOverride("browser",ct.ClientType.BROWSER,ct.DeviceOS.IOS,ct.DeviceType.PHONE,ct.ClientStreamer.WEBRTC);break;case 5:wt=this.getPlatformOverride("browser",ct.ClientType.BROWSER,ct.DeviceOS.IPADOS,ct.DeviceType.TABLET,ct.ClientStreamer.WEBRTC);break;case 6:wt=this.getPlatformOverride("browser",ct.ClientType.BROWSER,ct.DeviceOS.CHROMEOS,ct.DeviceType.DESKTOP,ct.ClientStreamer.WEBRTC);break;case 7:wt=this.getPlatformOverride("browser",ct.ClientType.BROWSER,ct.DeviceOS.WINDOWS,ct.DeviceType.DESKTOP,ct.ClientStreamer.WEBRTC);break;case 8:wt=this.getPlatformOverride("browser",ct.ClientType.BROWSER,ct.DeviceOS.MACOS,ct.DeviceType.DESKTOP,ct.ClientStreamer.WEBRTC);break;case 9:wt=this.getPlatformOverride("browser",ct.ClientType.BROWSER,ct.DeviceOS.LINUX,ct.DeviceType.DESKTOP,ct.ClientStreamer.WEBRTC);break;case 10:wt=this.getPlatformOverride("browser",ct.ClientType.BROWSER,ct.DeviceOS.WEBOS,ct.DeviceType.TV,ct.ClientStreamer.WEBRTC);break;case 11:wt=this.getPlatformOverride("browser",ct.ClientType.BROWSER,ct.DeviceOS.TIZEN,ct.DeviceType.TV,ct.ClientStreamer.WEBRTC);break;case 12:wt=this.getPlatformOverride("browser",ct.ClientType.BROWSER,ct.DeviceOS.XBOX,ct.DeviceType.CONSOLE,ct.ClientStreamer.WEBRTC)}switch(wt&&(this.hasPlatformBeenSimulated=!0,ht+=wt+"&"),rt){case 0:this.hasAppLaunchBeenSimulated&&(bt=ct.AppLaunchMode.Default);break;case 1:bt=ct.AppLaunchMode.Default;break;case 2:bt=ct.AppLaunchMode.TouchFriendly;break;case 3:bt=ct.AppLaunchMode.GamepadFriendly}return bt!==void 0&&(this.hasAppLaunchBeenSimulated=!0,ht+="applaunchmode="+bt+"&"),ht.endsWith("&")||(ht+="&"),ht+"webrtcstreamer=enable"}configureGridApp(vt){return new Promise((rt,bt)=>{this.useTelemetry&&this.updateEventDataElements();const ht={serverAddress:vt,authTokenCallback:this.authProvider.getTokenCallback(),deviceHashId:"",clientShutDownCallback:void 0};let wt;switch(this.getQueryParam("cursor")){case"hw":wt=ct.CursorType.HARDWARE;break;case"free":wt=ct.CursorType.FREE;break;case"sw":wt=ct.CursorType.SOFTWARE;default:wt=ct.CursorType.FREE}let At={cursorType:wt,allowUnconfined:this.getQueryParam("allowunconfined")!==null};ot.Log.i(yt,"initializing gridApp with server: "+ht.serverAddress),this.gridApp.initialize(ht,At)?this.authProvider.getAuthInfo().then(Ct=>{this.gridApp.setAuthInfo(Ct),rt()}).catch(()=>{bt()}):bt()})}getGridApp(){return this.gridApp}begin(){this.gridApp.startSession(this.sessionStartParams)}async startButtonClick(){let vt=this.getPlatformAndAppLaunchOverrides(0,0);const rt={remoteConfigData:{ragnarok:`{"connectivityCheckTimeout": ${this.connectivityTimeout}, "sleepErrorsStreaming": ["0xC0F2230F"]}`},gxtOverrideData:JSON.stringify({params:[{name:"ragnarok",value:{enableCpm:!1}}]}),overrideData:vt};(0,ct.ConfigureRagnarokSettings)(rt);let bt=this.getQueryParam("server");try{let ht=this.getQueryParam("resolution").split(":"),wt=(0,gt.ToNumber)(this.getQueryParam("fps"));const At="0";let Ct="en-US";this.configureGridApp(bt).then(()=>{ot.Log.i(yt,"grid app setup completed");const dt=this.nativeTouchEvents&&(0,gt.IsiDevice)(this.platformDetails);this.sessionStartParams={streamParams:[],appLaunchMode:dt?ct.AppLaunchMode.TouchFriendly:ct.AppLaunchMode.Default,keyboardLayout:Ct,shortName:"Omniverse App Streaming",accountLinked:!1};let Et=parseInt(ht[0]),Rt=parseInt(ht[1]),Mt=wt;const _t=parseInt(At);if(!Et||!Rt){const $=[{resolution:{width:3840,height:2160},frameRate:60},{resolution:{width:3440,height:1440},frameRate:60},{resolution:{width:2560,height:1600},frameRate:120},{resolution:{width:2560,height:1600},frameRate:60},{resolution:{width:2560,height:1440},frameRate:120},{resolution:{width:2560,height:1440},frameRate:60},{resolution:{width:1920,height:1200},frameRate:60},{resolution:{width:1920,height:1080},frameRate:60},{resolution:{width:1920,height:1080},frameRate:30},{resolution:{width:1920,height:1080},frameRate:120},{resolution:{width:1680,height:1050},frameRate:60},{resolution:{width:1600,height:900},frameRate:60},{resolution:{width:1280,height:1024},frameRate:60},{resolution:{width:1440,height:900},frameRate:60},{resolution:{width:1366,height:768},frameRate:60},{resolution:{width:1280,height:800},frameRate:60},{resolution:{width:1280,height:720},frameRate:60},{resolution:{width:1600,height:1200},frameRate:60},{resolution:{width:1112,height:834},frameRate:60},{resolution:{width:1024,height:768},frameRate:60},{resolution:{width:960,height:540},frameRate:60}],_e=(0,ct.ChooseStreamingSettings)(ct.StreamingProfilePreset.BALANCED,$,this.platformDetails);Et=_e.resolution.width,Rt=_e.resolution.height,ot.Log.i(yt,"Recommended stream settings: "+Et+"x"+Rt+"@"+_e.frameRate),ot.Log.i(yt,"Capable stream settings: "+$)}this.sessionStartParams.streamParams.push({width:Et,height:Rt,fps:Mt,maxBitrateKbps:_t,drc:!1,videoTagId:this.videoElement.id,audioTagId:this.audioElement.id});const kt=this.getQueryParam("signalingserver");let nt=[];if(kt){const $=parseInt(this.getQueryParam("signalingport")),_e=this.getQueryParam("signalingpath"),it=(0,gt.IsValidIPv4)(kt)?ct.AppLevelProtocol.HTTP:ct.AppLevelProtocol.HTTPS;nt.push({ip:kt,port:$,resourcePath:_e,usage:ct.Usage.SIGNALING,appLevelProtocol:it,protocol:ct.Protocol.TCP})}const s=this.getQueryParam("mediaserver");if(s)if((0,gt.IsIPv4Address)(s)&&!(0,gt.IsValidIPv4)(s))ot.Log.e(yt,"mediaserver query parameter is not a valid IP. value: "+s);else{const $=parseInt(this.getQueryParam("mediaport"));nt.push({ip:s,port:$,usage:ct.Usage.VIDEO,appLevelProtocol:ct.AppLevelProtocol.UNKNOWN,protocol:ct.Protocol.UDP})}let b=this.getQueryParam("signalingquery");if(b&&(this.sessionStartParams.signalingUrlQueryParameters=decodeURIComponent(b)),bt)this.sessionStartParams.connectionInfo=void 0,this.sessionStartParams.sessionId=void 0;else{if(!nt.length)return void this.setMessageElementValue("Signaling server info is required in passthru use case. Please add signalingserver=<> to the query parameters",!0);this.sessionStartParams.connectionInfo=nt;const $=this.getQueryParam("sessionid");$&&(this.sessionStartParams.sessionId=$)}this.getQueryParam("accessToken")&&(this.sessionStartParams.sessionId+="-Authorization.Bearer-"+this.getQueryParam("accessToken")),ot.Log.i(yt,"Beginning"),this.begin()}).catch(dt=>{const Et=`Something unexpected happened: ${dt==null?void 0:dt.name} ${dt==null?void 0:dt.message}`;ot.Log.e(yt,Et),this.setMessageElementValue(Et,!0)})}catch(ht){ot.Log.e(yt,"Exception in start button click: "+ht)}}stopButtonClick(vt=!1,rt=!1){this.resetTrackInfo(),this.sessionId&&(vt?this.gridApp.pauseSession(this.sessionId):this.gridApp.stopSession(this.sessionId)),this.setMessageElementValue("Session is stopped.")}}},593:(et,at,st)=>{Object.defineProperty(at,"__esModule",{value:!0}),at.KeyUpDownEventHandler=at.StringToUtf8=at.ToNumber=at.IsiDevice=at.IsiOS=at.IsTizen=at.IsWebOS=at.IsiPadOS=at.IsXbox=at.IsValidIPv4=at.IsIPv4Address=at.GetRandNumericString=at.GetHexString=at.convertToUnsignedInt=void 0;const ct=st(271);function ot(yt){return yt>>>0}function gt(yt){return yt.os===ct.PlatformName.IPADOS}function ft(yt){return yt.os===ct.PlatformName.IOS}at.convertToUnsignedInt=ot,at.GetHexString=function(yt){return"0x"+("00000000"+(yt=ot(yt)).toString(16).toUpperCase()).slice(-8)},at.GetRandNumericString=function(yt){let vt=1;for(let bt=1;bt<yt;bt++)vt*=10;let rt=""+Math.floor(Math.random()*vt);return rt=rt.padEnd(yt,"0"),rt},at.IsIPv4Address=function(yt){const vt=yt.split(".");if(vt.length!==4)return!1;for(const rt of vt){const bt=parseInt(rt);if(isNaN(bt))return!1}return!0},at.IsValidIPv4=function(yt){const vt=yt.split(".");if(vt.length!==4)return!1;for(const rt of vt){const bt=parseInt(rt);if(isNaN(bt)||bt<0||bt>255)return!1}return!0},at.IsXbox=function(yt){return yt.os===ct.PlatformName.XBOX},at.IsiPadOS=gt,at.IsWebOS=function(yt){return yt.os===ct.PlatformName.WEBOS},at.IsTizen=function(yt){return yt.os===ct.PlatformName.TIZEN},at.IsiOS=ft,at.IsiDevice=function(yt){return ft(yt)||gt(yt)},at.ToNumber=function(yt){if(yt){const vt=Number.parseInt(yt);if(!Number.isNaN(vt))return vt}},at.StringToUtf8=function(yt){let vt=new TextEncoder().encode(yt),rt=new ArrayBuffer(vt.byteLength),bt=new DataView(rt);for(let ht=0;ht<vt.byteLength;ht++)bt.setUint8(ht,vt[ht]);return rt},at.KeyUpDownEventHandler=function(yt){yt.keyCode==73&&yt.ctrlKey&&yt.shiftKey||yt.keyCode==67&&yt.shiftKey&&yt.metaKey||yt.keyCode==68&&yt.ctrlKey&&yt.shiftKey||yt.code=="Tab"&&yt.altKey||yt.code=="ZoomToggle"||yt.code=="SelectTask"||yt.code=="BrightnessDown"||yt.code=="BrightnessUp"||yt.code=="AudioVolumeMute"||yt.code=="AudioVolumeDown"||yt.code=="AudioVolumeUp"||yt.keyCode>=48&&yt.keyCode<=57||yt.code=="Backspace"||yt.preventDefault()}}},c={};function j(et){var at=c[et];if(at!==void 0)return at.exports;var st=c[et]={exports:{}};return a[et].call(st.exports,st,st.exports,j),st.exports}j.d=(et,at)=>{for(var st in at)j.o(at,st)&&!j.o(et,st)&&Object.defineProperty(et,st,{enumerable:!0,get:at[st]})},j.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),j.o=(et,at)=>Object.prototype.hasOwnProperty.call(et,at),j.r=et=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(et,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(et,"__esModule",{value:!0})};var d={};return(()=>{var et=d;Object.defineProperty(et,"__esModule",{value:!0}),et.eStatus=et.eAction=et.AppStreamer=void 0;const at=j(52);et.AppStreamer=at.default;const st=j(704);Object.defineProperty(et,"eAction",{enumerable:!0,get:function(){return st.eAction}}),Object.defineProperty(et,"eStatus",{enumerable:!0,get:function(){return st.eStatus}})})(),d})())})(dist);var distExports=dist.exports;const initialState$1={assetIds:[],selectionChangeOrigin:"client"},selectionSlice=createSlice({name:"selection",initialState:initialState$1,reducers:{setSelection:(o,e)=>{o.assetIds=e.payload},setSelectionChangeOrigin:(o,e)=>{o.selectionChangeOrigin=e.payload},setSelectionWithOrigin:(o,e)=>{o.selectionChangeOrigin=e.payload.origin,o.assetIds=e.payload.assetIds}}}),{setSelection}=selectionSlice.actions,{setSelectionChangeOrigin}=selectionSlice.actions,{setSelectionWithOrigin}=selectionSlice.actions,selectionReducer=selectionSlice.reducer,AppStreamComponent=()=>{const o=useSelector(rt=>rt.service.sessionService),e=useSelector(rt=>rt.appStream.server),a=useSelector(rt=>rt.appStream.remoteStream),c=useSelector(rt=>rt.appStream.kitState),j=useDispatch(),d=reactExports.useRef(!1),et=reactExports.useRef(c);reactExports.useEffect(()=>{et.current=c},[c]);const at=async()=>{if(!d.current)for(d.current=!0;et.current=="unknown";){console.log("Polling Kit for responsiveness.");const rt={event_type:"loadingStateQuery",payload:{}};if(distExports.AppStreamer.sendMessage(JSON.stringify(rt)),await new Promise(bt=>setTimeout(bt,1e3)),et.current=="responsive"){d.current=!1;break}}},st=async rt=>{console.log("Stream Started:",rt),rt.status==="success"&&at()},ct=rt=>{console.log("Stream Update:",rt)},ot=rt=>{if(rt.event_type==="loadingStateResponse")et.current==="unknown"&&(console.log("Kit is responsive, stopping polling."),j(setKitState("responsive")),rt.payload.loading_state=="idle"?j(setLoadingState("idle")):j(setLoadingState("loading")),j(setLoadedURL(rt.payload.url)));else if(rt.event_type==="openedStageResult")j(setLoadingState("idle")),j(setLoadedURL(rt.payload.url));else if(rt.event_type==="stageSelectionChanged"){!Array.isArray(rt.payload.prims)||rt.payload.prims.length===0?(console.log("Kit App selection empty."),j(setSelectionWithOrigin({assetIds:[],origin:"kit"}))):(console.log("Kit App selection: "+rt.payload.prims.map(ht=>ht).join(", ")),j(setSelectionWithOrigin({assetIds:rt.payload.prims,origin:"kit"})));const bt=setTimeout(()=>{j(setSelectionChangeOrigin("client"))},0);return()=>clearTimeout(bt)}else console.log("Stream Custom Event:",rt)},gt=rt=>{console.log("Stream Stopped:",rt),j(setServer("")),j(setKitState("unknown"))},ft=rt=>{console.log("Stream Terminated:",rt),j(setServer("")),j(setKitState("unknown"))};reactExports.useEffect(()=>{e&&(console.log(`Server URL changed to: ${e}`),yt())},[e]);const yt=()=>{distExports.AppStreamer.connect({streamSource:"direct",streamConfig:{videoElementId:"remote-video",audioElementId:"remote-audio",authenticate:!1,maxReconnects:5,server:e,nativeTouchEvents:!0,width:1920,height:1080,fps:60,cursor:"free",autolaunch:!0,onUpdate:ct,onStart:st,onCustomEvent:ot,onStop:gt,onTerminate:ft}}).then(rt=>{console.info("AppStreamer Setup Success:",rt)}).catch(rt=>{console.error("AppStreamer Setup Error:",rt)})};reactExports.useEffect(()=>{a&&a.signalingserver&&(console.log(`OVAS Server changed to: ${a}`),vt())},[a]);const vt=()=>{distExports.AppStreamer.connect({streamSource:"direct",streamConfig:{videoElementId:"remote-video",audioElementId:"remote-audio",signalingserver:a.signalingserver,signalingport:a.signalingport,mediaserver:a.mediaserver,mediaport:a.mediaport,accessToken:a.accessToken,sessionid:a.sessionid,authenticate:!1,maxReconnects:30,connectivityTimeout:12e4,nativeTouchEvents:!0,width:1920,height:1080,fps:60,cursor:"free",autolaunch:!0,onUpdate:ct,onStart:st,onCustomEvent:ot,onStop:gt,onTerminate:ft}}).then(rt=>{console.info("AppStreamer Setup Success:",rt)}).catch(rt=>{console.error("AppStreamer Setup Error:",rt)})};return reactExports.useEffect(()=>{o.desiredState==="destroyed"&&(distExports.AppStreamer.terminate(),j(setKitState("unknown")),j(setLoadingState("idle")),j(setLoadedURL("")),j(setURL("")),j(setRemoteStream({signalingserver:"",signalingport:0,mediaserver:"",mediaport:0,accessToken:"",sessionid:""})))},[o]),jsxRuntimeExports.jsx("div",{id:"main-div",style:{outline:"none"},children:jsxRuntimeExports.jsxs("div",{id:"aspect-ratio-div",tabIndex:0,style:{position:"relative",top:0,bottom:0,left:0,right:0,paddingBottom:"56.25%",outline:"none"},children:[jsxRuntimeExports.jsx("video",{id:"remote-video",style:{position:"absolute",top:0,bottom:0,left:0,right:0,outline:"none"},tabIndex:-1,playsInline:!0,muted:!0,autoPlay:!0},"video-canvas"),jsxRuntimeExports.jsx("audio",{id:"remote-audio",muted:!0}),jsxRuntimeExports.jsx("h3",{style:{visibility:"hidden"},id:"message-display",children:"..."})]})},"stream-canvas")},USDStorageComponent=()=>{const o=useDispatch(),e=useSelector(c=>c.usdStorage.url),a=useSelector(c=>c.appStream.kitState);return reactExports.useEffect(()=>{if(!(a==="unknown"||!e)&&e){o(setLoadingState("loading")),console.log("Sending request to open stage: url: ${url}");const c={event_type:"openStageRequest",payload:{url:e}};distExports.AppStreamer.sendMessage(JSON.stringify(c))}},[e]),null},SelectionComponent=()=>{const o=useSelector(c=>c.selection.assetIds),e=useSelector(c=>c.selection.selectionChangeOrigin),a=useSelector(c=>c.appStream.kitState);return reactExports.useEffect(()=>{if(e==="kit"||a!=="responsive")return;const c={event_type:"selectPrimsRequest",payload:{paths:o}};distExports.AppStreamer.sendMessage(JSON.stringify(c))},[o]),null},StatusComponent=()=>{const o=useSelector(c=>c.status.assetId),e=useSelector(c=>c.status.assetStatus),a=useSelector(c=>c.appStream.kitState);return reactExports.useEffect(()=>{if(a!=="responsive")return;const c={event_type:"setStatusRequest",payload:{asset_id:o,asset_status:e}};distExports.AppStreamer.sendMessage(JSON.stringify(c))},[o,e]),null};class AbortError extends Error{constructor(e){super(e),this.name="AbortError"}}function log$7(...o){if(o.length>0){const e=String(o[0]);e.includes(":error")?console.error(...o):e.includes(":warning")?console.warn(...o):e.includes(":info")?console.info(...o):e.includes(":verbose")?console.debug(...o):console.debug(...o)}}var define_process_env_default$2={};const debugEnvVariable=typeof process$1<"u"&&define_process_env_default$2&&define_process_env_default$2.DEBUG||void 0;let enabledString,enabledNamespaces=[],skippedNamespaces=[];const debuggers=[];debugEnvVariable&&enable(debugEnvVariable);const debugObj=Object.assign(o=>createDebugger(o),{enable,enabled,disable,log:log$7});function enable(o){enabledString=o,enabledNamespaces=[],skippedNamespaces=[];const e=/\*/g,a=o.split(",").map(c=>c.trim().replace(e,".*?"));for(const c of a)c.startsWith("-")?skippedNamespaces.push(new RegExp(`^${c.substr(1)}$`)):enabledNamespaces.push(new RegExp(`^${c}$`));for(const c of debuggers)c.enabled=enabled(c.namespace)}function enabled(o){if(o.endsWith("*"))return!0;for(const e of skippedNamespaces)if(e.test(o))return!1;for(const e of enabledNamespaces)if(e.test(o))return!0;return!1}function disable(){const o=enabledString||"";return enable(""),o}function createDebugger(o){const e=Object.assign(a,{enabled:enabled(o),destroy,log:debugObj.log,namespace:o,extend});function a(...c){e.enabled&&(c.length>0&&(c[0]=`${o} ${c[0]}`),e.log(...c))}return debuggers.push(e),e}function destroy(){const o=debuggers.indexOf(this);return o>=0?(debuggers.splice(o,1),!0):!1}function extend(o){const e=createDebugger(`${this.namespace}:${o}`);return e.log=this.log,e}var define_process_env_default$1={};const registeredLoggers=new Set,logLevelFromEnv=typeof process$1<"u"&&define_process_env_default$1&&define_process_env_default$1.AZURE_LOG_LEVEL||void 0;let azureLogLevel;const AzureLogger=debugObj("azure");AzureLogger.log=(...o)=>{debugObj.log(...o)};const AZURE_LOG_LEVELS=["verbose","info","warning","error"];logLevelFromEnv&&(isAzureLogLevel(logLevelFromEnv)?setLogLevel(logLevelFromEnv):console.error(`AZURE_LOG_LEVEL set to unknown log level '${logLevelFromEnv}'; logging is not enabled. Acceptable values: ${AZURE_LOG_LEVELS.join(", ")}.`));function setLogLevel(o){if(o&&!isAzureLogLevel(o))throw new Error(`Unknown log level '${o}'. Acceptable values: ${AZURE_LOG_LEVELS.join(",")}`);azureLogLevel=o;const e=[];for(const a of registeredLoggers)shouldEnable(a)&&e.push(a.namespace);debugObj.enable(e.join(","))}const levelMap={verbose:400,info:300,warning:200,error:100};function createClientLogger(o){const e=AzureLogger.extend(o);return patchLogMethod(AzureLogger,e),{error:createLogger(e,"error"),warning:createLogger(e,"warning"),info:createLogger(e,"info"),verbose:createLogger(e,"verbose")}}function patchLogMethod(o,e){e.log=(...a)=>{o.log(...a)}}function createLogger(o,e){const a=Object.assign(o.extend(e),{level:e});if(patchLogMethod(o,a),shouldEnable(a)){const c=debugObj.disable();debugObj.enable(c+","+a.namespace)}return registeredLoggers.add(a),a}function shouldEnable(o){return!!(azureLogLevel&&levelMap[o.level]<=levelMap[azureLogLevel])}function isAzureLogLevel(o){return AZURE_LOG_LEVELS.includes(o)}function createAbortablePromise(o,e){const{cleanupBeforeAbort:a,abortSignal:c,abortErrorMsg:j}=e??{};return new Promise((d,et)=>{function at(){et(new AbortError(j??"The operation was aborted."))}function st(){c==null||c.removeEventListener("abort",ct)}function ct(){a==null||a(),st(),at()}if(c!=null&&c.aborted)return at();try{o(ot=>{st(),d(ot)},ot=>{st(),et(ot)})}catch(ot){et(ot)}c==null||c.addEventListener("abort",ct)})}const StandardAbortMessage$1="The delay was aborted.";function delay$2(o,e){let a;const{abortSignal:c,abortErrorMsg:j}=e??{};return createAbortablePromise(d=>{a=setTimeout(d,o)},{cleanupBeforeAbort:()=>clearTimeout(a),abortSignal:c,abortErrorMsg:j??StandardAbortMessage$1})}function isObject(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)&&!(o instanceof RegExp)&&!(o instanceof Date)}function isError(o){if(isObject(o)){const e=typeof o.name=="string",a=typeof o.message=="string";return e&&a}return!1}function isDefined(o){return typeof o<"u"&&o!==null}function isObjectWithProperties(o,e){if(!isDefined(o)||typeof o!="object")return!1;for(const a of e)if(!objectHasProperty(o,a))return!1;return!0}function objectHasProperty(o,e){return isDefined(o)&&typeof o=="object"&&e in o}function generateUUID(){let o="";for(let e=0;e<32;e++){const a=Math.floor(Math.random()*16);e===12?o+="4":e===16?o+=a&3|8:o+=a.toString(16),(e===7||e===11||e===15||e===19)&&(o+="-")}return o}var _a$1;const uuidFunction=typeof((_a$1=globalThis==null?void 0:globalThis.crypto)===null||_a$1===void 0?void 0:_a$1.randomUUID)=="function"?globalThis.crypto.randomUUID.bind(globalThis.crypto):generateUUID;function randomUUID(){return uuidFunction()}var _a,_b,_c,_d;typeof self=="object"&&typeof(self==null?void 0:self.importScripts)=="function"&&(((_a=self.constructor)===null||_a===void 0?void 0:_a.name)==="DedicatedWorkerGlobalScope"||((_b=self.constructor)===null||_b===void 0?void 0:_b.name)==="ServiceWorkerGlobalScope"||((_c=self.constructor)===null||_c===void 0||_c.name));typeof Deno<"u"&&typeof Deno.version<"u"&&typeof Deno.version.deno<"u";typeof Bun<"u"&&typeof Bun.version<"u";const isNodeLike=typeof globalThis.process<"u"&&!!globalThis.process.version&&!!(!((_d=globalThis.process.versions)===null||_d===void 0)&&_d.node),logger$1=createClientLogger("event-hubs");function logErrorStackTrace$1(o){isObjectWithProperties(o,["stack"])&&logger$1.verbose(o.stack)}function createReceiverLogPrefix(o,e,a){return`[${e}] Receiver P${a}-${o}`}function createManagementLogPrefix(o){return`[${o}] Management`}function createLogFunction(o,e,a){return(c,...j)=>o[a](...typeof c=="string"?[`${e}: ${c}`]:[e,c],...j)}function createSimpleLogger(o,e){return{info:createLogFunction(o,e,"info"),error:createLogFunction(o,e,"error"),verbose:createLogFunction(o,e,"verbose"),warning:createLogFunction(o,e,"warning")}}function logObj(o){JSON.stringify(o,void 0,2)}class PartitionProcessor{constructor(e,a,c){this._eventHandlers=e,this._checkpointStore=a,this._context=c}get lastEnqueuedEventProperties(){return this._lastEnqueuedEventProperties}set lastEnqueuedEventProperties(e){this._lastEnqueuedEventProperties=e}get fullyQualifiedNamespace(){return this._context.fullyQualifiedNamespace}get consumerGroup(){return this._context.consumerGroup}get eventHubName(){return this._context.eventHubName}get partitionId(){return this._context.partitionId}get eventProcessorId(){return this._context.eventProcessorId}async initialize(){var e,a;return(a=(e=this._eventHandlers).processInitialize)===null||a===void 0?void 0:a.call(e,this)}async close(e){this._eventHandlers.processClose&&await this._eventHandlers.processClose(e,this)}async processEvents(e){await this._eventHandlers.processEvents(e,this)}async processError(e){if(this._eventHandlers.processError)try{await this._eventHandlers.processError(e,this)}catch(a){logger$1.verbose(`Error thrown from user's processError handler : ${a}`)}}async updateCheckpoint(e){const a={fullyQualifiedNamespace:this._context.fullyQualifiedNamespace,eventHubName:this._context.eventHubName,consumerGroup:this._context.consumerGroup,partitionId:this._context.partitionId,sequenceNumber:e.sequenceNumber,offset:e.offset};await this._checkpointStore.updateCheckpoint(a)}}var lib={},util$6=util$8;function ProtocolError(o){Error.captureStackTrace(this,ProtocolError),this.message=o,this.name="ProtocolError"}util$6.inherits(ProtocolError,Error);function TypeError$1(o){Error.captureStackTrace(this,TypeError$1),this.message=o,this.name="TypeError"}util$6.inherits(TypeError$1,ProtocolError);function ConnectionError(o,e,a){Error.captureStackTrace(this,ConnectionError),this.message=o,this.name="ConnectionError",this.condition=e,this.description=o,Object.defineProperty(this,"connection",{value:a})}util$6.inherits(ConnectionError,Error);ConnectionError.prototype.toJSON=function(){return{type:this.name,code:this.condition,message:this.description}};var errors$5={ProtocolError,TypeError:TypeError$1,ConnectionError},errors$4=errors$5,util$5={};util$5.allocate_buffer=function(o){return Buffer.alloc?Buffer.alloc(o):new Buffer(o)};util$5.generate_uuid=function(){return util$5.uuid_to_string(util$5.uuid4())};util$5.uuid4=function(){for(var o=util$5.allocate_buffer(16),e=0;e<o.length;e++)o[e]=Math.random()*255|0;return o[7]&=15,o[7]|=64,o[8]&=63,o[8]|=128,o};util$5.uuid_to_string=function(o){if(o.length===16){var e=[o.slice(0,4),o.slice(4,6),o.slice(6,8),o.slice(8,10),o.slice(10,16)];return e.map(function(a){return a.toString("hex")}).join("-")}else throw new errors$4.TypeError("Not a UUID, expecting 16 byte buffer")};var parse_uuid=/^([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})$/;util$5.string_to_uuid=function(o){var e=parse_uuid.exec(o.toLowerCase());if(e)return Buffer.from(e.slice(1).join(""),"hex");throw new errors$4.TypeError("Not a valid UUID string: "+o)};util$5.clone=function(o){for(var e=Object.create(o.prototype||{}),a=Object.getOwnPropertyNames(o),c=0;c<a.length;c++){var j=a[c];e[j]=o[j]}return e};util$5.and=function(o,e){return e===void 0?o:function(a){return o(a)&&e(a)}};util$5.is_sender=function(o){return o.is_sender()};util$5.is_receiver=function(o){return o.is_receiver()};util$5.sender_filter=function(o){return util$5.and(util$5.is_sender,o)};util$5.receiver_filter=function(o){return util$5.and(util$5.is_receiver,o)};util$5.is_defined=function(o){return o!=null};var util_1=util$5,types_1,hasRequiredTypes;function requireTypes(){if(hasRequiredTypes)return types_1;hasRequiredTypes=1;var o=errors$5,e=util_1,a=1,c=2,j=3,d=4;function et(tt,Tt,It,Nt){this.type=tt,this.value=Tt,It&&(this.array_constructor={typecode:It},Nt&&(this.array_constructor.descriptor=Nt))}et.prototype.toString=function(){return this.value?this.value.toString():null},et.prototype.toLocaleString=function(){return this.value?this.value.toLocaleString():null},et.prototype.valueOf=function(){return this.value},et.prototype.toJSON=function(){return this.value&&this.value.toJSON?this.value.toJSON():this.value},et.prototype.toRheaTyped=function(){return this};function at(tt,Tt,It,Nt){this.name=tt,this.typecode=Tt;var Ut=Tt>>>4;switch(Ut){case 4:this.width=0,this.category=a;break;case 5:this.width=1,this.category=a;break;case 6:this.width=2,this.category=a;break;case 7:this.width=4,this.category=a;break;case 8:this.width=8,this.category=a;break;case 9:this.width=16,this.category=a;break;case 10:this.width=1,this.category=c;break;case 11:this.width=4,this.category=c;break;case 12:this.width=1,this.category=j;break;case 13:this.width=4,this.category=j;break;case 14:this.width=1,this.category=d;break;case 15:this.width=4,this.category=d;break}It&&(It.read&&(this.read=It.read),It.write&&(this.write=It.write),It.encoding&&(this.encoding=It.encoding));var Gt=this;Ut===4?this.create=function(){return new et(Gt,Nt)}:Ut===14||Ut===15?this.create=function(Pt,qt,Kt){return new et(Gt,Pt,qt,Kt)}:this.create=function(Pt){return new et(Gt,Pt)}}at.prototype.toString=function(){return this.name+"#"+st(this.typecode)};function st(tt){return Number(tt).toString(16)}var ct={by_code:{}};Object.defineProperty(ct,"MAX_UINT",{value:4294967295,writable:!1,configurable:!1}),Object.defineProperty(ct,"MAX_USHORT",{value:65535,writable:!1,configurable:!1});function ot(tt,Tt,It,Nt){var Ut=new at(tt,Tt,It,Nt);Ut.create.typecode=Ut.typecode,ct.by_code[Ut.typecode]=Ut,ct[tt]=Ut.create}function gt(){return{read:function(tt,Tt){return tt.readUInt8(Tt)},write:function(tt,Tt,It){tt.writeUInt8(Tt,It)}}}function ft(){return{read:function(tt,Tt){return tt.readUInt16BE(Tt)},write:function(tt,Tt,It){tt.writeUInt16BE(Tt,It)}}}function yt(){return{read:function(tt,Tt){return tt.readUInt32BE(Tt)},write:function(tt,Tt,It){tt.writeUInt32BE(Tt,It)}}}function vt(){return{read:function(tt,Tt){return tt.readInt8(Tt)},write:function(tt,Tt,It){tt.writeInt8(Tt,It)}}}function rt(){return{read:function(tt,Tt){return tt.readInt16BE(Tt)},write:function(tt,Tt,It){tt.writeInt16BE(Tt,It)}}}function bt(){return{read:function(tt,Tt){return tt.readInt32BE(Tt)},write:function(tt,Tt,It){tt.writeInt32BE(Tt,It)}}}function ht(){return{read:function(tt,Tt){return tt.readFloatBE(Tt)},write:function(tt,Tt,It){tt.writeFloatBE(Tt,It)}}}function wt(){return{read:function(tt,Tt){return tt.readDoubleBE(Tt)},write:function(tt,Tt,It){tt.writeDoubleBE(Tt,It)}}}var At=4294967296,Ct=-2147483647;function dt(tt,Tt,It){if(typeof Tt=="number"||Tt instanceof Number){var Nt=Math.floor(Tt/At),Ut=Tt%At;tt.writeUInt32BE(Nt,It),tt.writeUInt32BE(Ut,It+4)}else Tt.copy(tt,It)}function Et(tt,Tt){var It=tt.readUInt32BE(Tt),Nt=tt.readUInt32BE(Tt+4);return It<2097153?It*At+Nt:tt.slice(Tt,Tt+8)}function Rt(tt,Tt,It){if(typeof Tt=="number"||Tt instanceof Number){var Nt=Math.abs(Tt),Ut=Math.floor(Nt/At),Gt=Nt%At;if(tt.writeInt32BE(Ut,It),tt.writeUInt32BE(Gt,It+4),Tt<0)for(var Pt=1,qt=0;qt<8;qt++){var Kt=It+(7-qt),jt=(tt[Kt]^255)+Pt;tt[Kt]=jt&255,Pt=jt>>8}}else Tt.copy(tt,It)}function Mt(tt,Tt,It){return typeof Tt=="object"&&Tt!==null&&typeof Tt.getTime=="function"&&(Tt=Tt.getTime()),Rt(tt,Tt,It)}function _t(tt,Tt){var It=tt.readInt32BE(Tt),Nt=tt.readUInt32BE(Tt+4);return It<2097153&&It>-2097153?It*At+Nt:tt.slice(Tt,Tt+8)}function kt(tt,Tt){const It=_t(tt,Tt);return new Date(It)}ot("Null",64,void 0,null),ot("Boolean",86,gt()),ot("True",65,void 0,!0),ot("False",66,void 0,!1),ot("Ubyte",80,gt()),ot("Ushort",96,ft()),ot("Uint",112,yt()),ot("SmallUint",82,gt()),ot("Uint0",67,void 0,0),ot("Ulong",128,{write:dt,read:Et}),ot("SmallUlong",83,gt()),ot("Ulong0",68,void 0,0),ot("Byte",81,vt()),ot("Short",97,rt()),ot("Int",113,bt()),ot("SmallInt",84,vt()),ot("Long",129,{write:Rt,read:_t}),ot("SmallLong",85,vt()),ot("Float",114,ht()),ot("Double",130,wt()),ot("Decimal32",116),ot("Decimal64",132),ot("Decimal128",148),ot("CharUTF32",115,yt()),ot("Timestamp",131,{write:Mt,read:kt}),ot("Uuid",152),ot("Vbin8",160),ot("Vbin32",176),ot("Str8",161,{encoding:"utf8"}),ot("Str32",177,{encoding:"utf8"}),ot("Sym8",163,{encoding:"ascii"}),ot("Sym32",179,{encoding:"ascii"}),ot("List0",69,void 0,[]),ot("List8",192),ot("List32",208),ot("Map8",193),ot("Map32",209),ot("Array8",224),ot("Array32",240);function nt(tt,Tt){for(var It=0;It<Tt.length;It++)if(tt.type.typecode===Tt[It].typecode)return!0;return!1}function s(tt,Tt,It){for(var Nt=0;Nt<Tt&&Nt<tt.length;Nt++)if(tt[Nt]!==(It?255:0))return!1;return!0}ct.is_ulong=function(tt){return nt(tt,[ct.Ulong,ct.Ulong0,ct.SmallUlong])},ct.is_string=function(tt){return nt(tt,[ct.Str8,ct.Str32])},ct.is_symbol=function(tt){return nt(tt,[ct.Sym8,ct.Sym32])},ct.is_list=function(tt){return nt(tt,[ct.List0,ct.List8,ct.List32])},ct.is_map=function(tt){return nt(tt,[ct.Map8,ct.Map32])},ct.wrap_boolean=function(tt){return tt?ct.True():ct.False()},ct.wrap_ulong=function(tt){return Buffer.isBuffer(tt)?s(tt,8,!1)?ct.Ulong0():s(tt,7,!1)?ct.SmallUlong(tt[7]):ct.Ulong(tt):tt===0?ct.Ulong0():tt>255?ct.Ulong(tt):ct.SmallUlong(tt)},ct.wrap_uint=function(tt){return tt===0?ct.Uint0():tt>255?ct.Uint(tt):ct.SmallUint(tt)},ct.wrap_ushort=function(tt){return ct.Ushort(tt)},ct.wrap_ubyte=function(tt){return ct.Ubyte(tt)},ct.wrap_long=function(tt){if(Buffer.isBuffer(tt)){var Tt=(tt[0]&128)!==0;return s(tt,7,Tt)&&(tt[7]&128)===(Tt?128:0)?ct.SmallLong(Tt?-((tt[7]^255)+1):tt[7]):ct.Long(tt)}else return tt>127||tt<-128?ct.Long(tt):ct.SmallLong(tt)},ct.wrap_int=function(tt){return tt>127||tt<-128?ct.Int(tt):ct.SmallInt(tt)},ct.wrap_short=function(tt){return ct.Short(tt)},ct.wrap_byte=function(tt){return ct.Byte(tt)},ct.wrap_float=function(tt){return ct.Float(tt)},ct.wrap_double=function(tt){return ct.Double(tt)},ct.wrap_timestamp=function(tt){return ct.Timestamp(tt)},ct.wrap_char=function(tt){return ct.CharUTF32(tt)},ct.wrap_uuid=function(tt){return ct.Uuid(tt)},ct.wrap_binary=function(tt){return tt.length>255?ct.Vbin32(tt):ct.Vbin8(tt)},ct.wrap_string=function(tt){return Buffer.byteLength(tt)>255?ct.Str32(tt):ct.Str8(tt)},ct.wrap_symbol=function(tt){return Buffer.byteLength(tt)>255?ct.Sym32(tt):ct.Sym8(tt)},ct.wrap_list=function(tt){if(tt.length===0)return ct.List0();var Tt=tt.map(ct.wrap);return ct.List32(Tt)},ct.wrap_set_as_list=function(tt){if(tt.size===0)return ct.List0();var Tt=Array.from(tt,ct.wrap);return ct.List32(Tt)},ct.wrap_map=function(tt,Tt){var It=[];for(var Nt in tt)It.push(Tt?Tt(Nt):ct.wrap(Nt)),It.push(ct.wrap(tt[Nt]));return ct.Map32(It)},ct.wrap_map_as_map=function(tt){var Tt=[];for(var[It,Nt]of tt)Tt.push(ct.wrap(It)),Tt.push(ct.wrap(Nt));return ct.Map32(Tt)},ct.wrap_symbolic_map=function(tt){return ct.wrap_map(tt,ct.wrap_symbol)},ct.wrap_array=function(tt,Tt,It){if(Tt)return ct.Array32(tt,Tt,It);throw console.trace("An array must specify a type for its elements"),new o.TypeError("An array must specify a type for its elements")},ct.wrap=function(tt){var Tt=typeof tt;return Tt==="object"&&tt!==null&&typeof tt.toRheaTyped=="function"?tt.toRheaTyped():Tt==="string"?ct.wrap_string(tt):Tt==="boolean"?tt?ct.True():ct.False():Tt==="number"||tt instanceof Number?isNaN(tt)?ct.Null():Math.floor(tt)-tt!==0?ct.Double(tt):tt>0?tt<At?ct.wrap_uint(tt):ct.wrap_ulong(tt):tt>Ct?ct.wrap_int(tt):ct.wrap_long(tt):tt instanceof Date?ct.wrap_timestamp(tt.getTime()):tt instanceof Buffer||tt instanceof Uint8Array?ct.wrap_binary(tt):Tt==="undefined"||tt===null?ct.Null():Array.isArray(tt)?ct.wrap_list(tt):tt instanceof Map?ct.wrap_map_as_map(tt):tt instanceof Set?ct.wrap_set_as_list(tt):ct.wrap_map(tt)},ct.wrap_described=function(tt,Tt){var It=ct.wrap(tt);return Tt&&(typeof Tt=="string"?It=ct.described(ct.wrap_symbol(Tt),It):(typeof Tt=="number"||Tt instanceof Number)&&(It=ct.described(ct.wrap_ulong(Tt),It))),It},ct.wrap_message_id=function(tt){var Tt=typeof tt;if(Tt==="string")return ct.wrap_string(tt);if(Tt==="number"||tt instanceof Number)return ct.wrap_ulong(tt);if(Buffer.isBuffer(tt))return ct.wrap_uuid(tt);if(tt instanceof et)return tt;throw new o.TypeError("invalid message id:"+tt)};function b(tt){for(var Tt={},It=0;It+1<tt.length;)Tt[tt[It++]]=tt[It++];return Tt}var $={};ct.unwrap_map_simple=function(tt){return b(tt.value.map(function(Tt){return ct.unwrap(Tt,!0)}))},ct.unwrap=function(tt,Tt){if(tt instanceof et){if(tt.descriptor){var It=$[tt.descriptor.value];if(It)return new It(tt.value);if(Tt)return tt}var Nt=ct.unwrap(tt.value,!0);return ct.is_map(tt)?b(Nt):Nt}else return Array.isArray(tt)?tt.map(function(Ut){return ct.unwrap(Ut,!0)}):tt},ct.described_nc=function(tt,Tt){return tt.length?(Tt.descriptor=tt.shift(),ct.described(tt,Tt)):(Tt.descriptor=tt,Tt)},ct.described=ct.described_nc;function _e(tt){var Tt=ct.by_code[tt];if(!Tt)throw new o.TypeError("Unrecognised typecode: "+st(tt));return Tt}ct.Reader=function(tt){this.buffer=tt,this.position=0},ct.Reader.prototype.read_typecode=function(){return this.read_uint(1)},ct.Reader.prototype.read_uint=function(tt){var Tt=this.position;if(this.position+=tt,tt===1)return this.buffer.readUInt8(Tt);if(tt===2)return this.buffer.readUInt16BE(Tt);if(tt===4)return this.buffer.readUInt32BE(Tt);throw new o.TypeError("Unexpected width for uint "+tt)},ct.Reader.prototype.read_fixed_width=function(tt){var Tt=this.position;return this.position+=tt.width,tt.read?tt.read(this.buffer,Tt):this.buffer.slice(Tt,this.position)},ct.Reader.prototype.read_variable_width=function(tt){var Tt=this.read_uint(tt.width),It=this.read_bytes(Tt);return tt.encoding?It.toString(tt.encoding):It},ct.Reader.prototype.read=function(){var tt=this.read_constructor(),Tt=this.read_value(_e(tt.typecode));return tt.descriptor?ct.described_nc(tt.descriptor,Tt):Tt},ct.Reader.prototype.read_constructor=function(tt){var Tt=this.read_typecode();return Tt===0?(tt===void 0&&(tt=[]),tt.push(this.read()),this.read_constructor(tt)):tt===void 0?{typecode:Tt}:tt.length===1?{typecode:Tt,descriptor:tt[0]}:{typecode:Tt,descriptor:tt[0],descriptors:tt}},ct.Reader.prototype.read_value=function(tt){if(tt.width===0)return tt.create();if(tt.category===a)return tt.create(this.read_fixed_width(tt));if(tt.category===c)return tt.create(this.read_variable_width(tt));if(tt.category===j)return this.read_compound(tt);if(tt.category===d)return this.read_array(tt);throw new o.TypeError("Invalid category for type: "+tt)},ct.Reader.prototype.read_array_items=function(tt,Tt){for(var It=[];It.length<tt;)It.push(this.read_value(Tt));return It},ct.Reader.prototype.read_n=function(tt){for(var Tt=new Array(tt),It=0;It<tt;It++)Tt[It]=this.read();return Tt},ct.Reader.prototype.read_size_count=function(tt){return{size:this.read_uint(tt),count:this.read_uint(tt)}},ct.Reader.prototype.read_compound=function(tt){var Tt=this.read_size_count(tt.width);return tt.create(this.read_n(Tt.count))},ct.Reader.prototype.read_array=function(tt){var Tt=this.read_size_count(tt.width),It=this.read_constructor();return tt.create(this.read_array_items(Tt.count,_e(It.typecode)),It.typecode,It.descriptor)},ct.Reader.prototype.toString=function(){var tt="buffer@"+this.position;this.position&&(tt+=": ");for(var Tt=this.position;Tt<this.buffer.length;Tt++)Tt>0&&(tt+=","),tt+="0x"+Number(this.buffer[Tt]).toString(16);return tt},ct.Reader.prototype.reset=function(){this.position=0},ct.Reader.prototype.skip=function(tt){this.position+=tt},ct.Reader.prototype.read_bytes=function(tt){var Tt=this.position;return this.position+=tt,this.buffer.slice(Tt,this.position)},ct.Reader.prototype.remaining=function(){return this.buffer.length-this.position},ct.Writer=function(tt){this.buffer=tt||e.allocate_buffer(1024),this.position=0},ct.Writer.prototype.toBuffer=function(){return this.buffer.slice(0,this.position)};function it(tt,Tt){return tt>Tt?tt:Tt}ct.Writer.prototype.ensure=function(tt){if(this.buffer.length<tt){var Tt=e.allocate_buffer(it(this.buffer.length*2,tt));this.buffer.copy(Tt),this.buffer=Tt}},ct.Writer.prototype.write_typecode=function(tt){this.write_uint(tt,1)},ct.Writer.prototype.write_uint=function(tt,Tt){var It=this.position;if(this.ensure(this.position+Tt),this.position+=Tt,Tt===1)return this.buffer.writeUInt8(tt,It);if(Tt===2)return this.buffer.writeUInt16BE(tt,It);if(Tt===4)return this.buffer.writeUInt32BE(tt,It);throw new o.TypeError("Unexpected width for uint "+Tt)},ct.Writer.prototype.write_fixed_width=function(tt,Tt){var It=this.position;if(this.ensure(this.position+tt.width),this.position+=tt.width,tt.write)tt.write(this.buffer,Tt,It);else if(Tt.copy)Tt.copy(this.buffer,It);else throw new o.TypeError("Cannot handle write for "+tt)},ct.Writer.prototype.write_variable_width=function(tt,Tt){var It=tt.encoding?Buffer.from(Tt,tt.encoding):Buffer.from(Tt);this.write_uint(It.length,tt.width),this.write_bytes(It)},ct.Writer.prototype.write_bytes=function(tt){var Tt=this.position;this.ensure(this.position+tt.length),this.position+=tt.length,tt.copy(this.buffer,Tt)},ct.Writer.prototype.write_constructor=function(tt,Tt){Tt&&(this.write_typecode(0),this.write(Tt)),this.write_typecode(tt)},ct.Writer.prototype.write=function(tt){if(tt.type===void 0)if(tt.described)this.write(tt.described());else throw new o.TypeError("Cannot write "+JSON.stringify(tt));else this.write_constructor(tt.type.typecode,tt.descriptor),this.write_value(tt.type,tt.value,tt.array_constructor)},ct.Writer.prototype.write_value=function(tt,Tt,It){if(tt.width!==0)if(tt.category===a)this.write_fixed_width(tt,Tt);else if(tt.category===c)this.write_variable_width(tt,Tt);else if(tt.category===j)this.write_compound(tt,Tt);else if(tt.category===d)this.write_array(tt,Tt,It);else throw new o.TypeError("Invalid category "+tt.category+" for type: "+tt)},ct.Writer.prototype.backfill_size=function(tt,Tt){var It=this.position-Tt;this.position=Tt,this.write_uint(It-tt,tt),this.position+=It-tt},ct.Writer.prototype.write_compound=function(tt,Tt){var It=this.position;this.position+=tt.width,this.write_uint(Tt.length,tt.width);for(var Nt=0;Nt<Tt.length;Nt++)Tt[Nt]===void 0||Tt[Nt]===null?this.write(ct.Null()):this.write(Tt[Nt]);this.backfill_size(tt.width,It)},ct.Writer.prototype.write_array=function(tt,Tt,It){var Nt=this.position;this.position+=tt.width,this.write_uint(Tt.length,tt.width),this.write_constructor(It.typecode,It.descriptor);for(var Ut=_e(It.typecode),Gt=0;Gt<Tt.length;Gt++)this.write_value(Ut,Tt[Gt]);this.backfill_size(tt.width,Nt)},ct.Writer.prototype.toString=function(){var tt="buffer@"+this.position;this.position&&(tt+=": ");for(var Tt=0;Tt<this.position;Tt++)Tt>0&&(tt+=","),tt+=("00"+Number(this.buffer[Tt]).toString(16)).slice(-2);return tt},ct.Writer.prototype.skip=function(tt){this.ensure(this.position+tt),this.position+=tt},ct.Writer.prototype.clear=function(){this.buffer.fill(0),this.position=0},ct.Writer.prototype.remaining=function(){return this.buffer.length-this.position};function pt(tt){if(tt==="symbol")return{typecode:ct.Sym8.typecode};throw new o.TypeError("TODO: Array of type "+tt+" not yet supported")}function mt(tt,Tt){if(Tt!=null)if(Array.isArray(Tt)){if(!tt.multiple)throw new o.TypeError("Field "+tt.name+" does not support multiple values, got "+JSON.stringify(Tt));var It=pt(tt.type);return ct.wrap_array(Tt,It.typecode,It.descriptor)}else{if(tt.type==="*")return Tt;var Nt=ct["wrap_"+tt.type];if(Nt)return Nt(Tt);throw new o.TypeError("No wrapper for field "+tt.name+" of type "+tt.type)}else{if(tt.mandatory)throw new o.TypeError("Field "+tt.name+" is mandatory");return ct.Null()}}function lt(tt,Tt){var It;Tt.type==="*"?It=function(){return this.value[tt]}:It=function(){return ct.unwrap(this.value[tt])};var Nt=function(Ut){this.value[tt]=mt(Tt,Ut)};return{get:It,set:Nt,enumerable:!0,configurable:!1}}ct.define_composite=function(tt){var Tt=function(Ut){this.value=Ut||[]};Tt.descriptor={numeric:tt.code,symbolic:"amqp:"+tt.name+":list"},Tt.prototype.dispatch=function(Ut,Gt){Ut["on_"+tt.name](Gt)};for(var It=0;It<tt.fields.length;It++){var Nt=tt.fields[It];Object.defineProperty(Tt.prototype,Nt.name,lt(It,Nt))}return Tt.toString=function(){return tt.name+"#"+Number(tt.code).toString(16)},Tt.prototype.toJSON=function(){var Ut={};for(var Gt in this)Gt!=="value"&&this[Gt]&&(Ut[Gt]=this[Gt]);return Ut},Tt.create=function(Ut){var Gt=new Tt;for(var Pt in Ut)Gt[Pt]=Ut[Pt];return Gt},Tt.prototype.described=function(){return ct.described_nc(ct.wrap_ulong(Tt.descriptor.numeric),ct.wrap_list(this.value))},Tt};function _(tt){var Tt=ct.define_composite(tt);ct["wrap_"+tt.name]=function(It){return Tt.create(It).described()},$[Number(Tt.descriptor.numeric).toString(10)]=Tt,$[Tt.descriptor.symbolic]=Tt}return _({name:"error",code:29,fields:[{name:"condition",type:"symbol",mandatory:!0},{name:"description",type:"string"},{name:"info",type:"map"}]}),types_1=ct,types_1}var types$2=requireTypes(),errors$3=errors$5,frames$5={},by_descriptor$1={};frames$5.read_header=function(o){var e=4,a={},c=o.toString("ascii",0,e);if(c!=="AMQP")throw new errors$3.ProtocolError("Invalid protocol header for AMQP: "+o.toString("hex",0,e));if(a.protocol_id=o.readUInt8(e++),a.major=o.readUInt8(e++),a.minor=o.readUInt8(e++),a.revision=o.readUInt8(e++),a.protocol_id===0&&a.major===0&&a.minor===9&&a.revision===1)throw new errors$3.ProtocolError("Unsupported AMQP version: 0-9-1");if(a.protocol_id===1&&a.major===1&&a.minor===0&&a.revision===10)throw new errors$3.ProtocolError("Unsupported AMQP version: 0-10");if(a.major!==1||a.minor!==0)throw new errors$3.ProtocolError("Unsupported AMQP version: "+JSON.stringify(a));return a};frames$5.write_header=function(o,e){var a=4;return o.write("AMQP",0,a,"ascii"),o.writeUInt8(e.protocol_id,a++),o.writeUInt8(e.major,a++),o.writeUInt8(e.minor,a++),o.writeUInt8(e.revision,a++),8};frames$5.TYPE_AMQP=0;frames$5.TYPE_SASL=1;frames$5.read_frame=function(o){var e=new types$2.Reader(o),a={};if(a.size=e.read_uint(4),e.remaining()<a.size-4)return null;var c=e.read_uint(1);if(c<2)throw new errors$3.ProtocolError("Invalid data offset, must be at least 2 was "+c);if(a.type=e.read_uint(1),a.type===frames$5.TYPE_AMQP)a.channel=e.read_uint(2);else if(a.type===frames$5.TYPE_SASL)e.skip(2),a.channel=0;else throw new errors$3.ProtocolError("Unknown frame type "+a.type);if(c>1&&e.skip(c*4-8),e.remaining()){a.performative=e.read();var j=by_descriptor$1[a.performative.descriptor.value];j&&(a.performative=new j(a.performative.value)),e.remaining()&&(a.payload=e.read_bytes(e.remaining()))}return a};frames$5.write_frame=function(o){var e=new types$2.Writer;if(e.skip(4),e.write_uint(2,1),e.write_uint(o.type,1),o.type===frames$5.TYPE_AMQP)e.write_uint(o.channel,2);else if(o.type===frames$5.TYPE_SASL)e.write_uint(0,2);else throw new errors$3.ProtocolError("Unknown frame type "+o.type);o.performative&&(e.write(o.performative),o.payload&&e.write_bytes(o.payload));var a=e.toBuffer();return a.writeUInt32BE(a.length,0),a};frames$5.amqp_frame=function(o,e,a){return{channel:o||0,type:frames$5.TYPE_AMQP,performative:e,payload:a}};frames$5.sasl_frame=function(o){return{channel:0,type:frames$5.TYPE_SASL,performative:o}};function define_frame(o,e){var a=types$2.define_composite(e);frames$5[e.name]=a.create,by_descriptor$1[Number(a.descriptor.numeric).toString(10)]=a,by_descriptor$1[a.descriptor.symbolic]=a}var open={name:"open",code:16,fields:[{name:"container_id",type:"string",mandatory:!0},{name:"hostname",type:"string"},{name:"max_frame_size",type:"uint",default_value:4294967295},{name:"channel_max",type:"ushort",default_value:65535},{name:"idle_time_out",type:"uint"},{name:"outgoing_locales",type:"symbol",multiple:!0},{name:"incoming_locales",type:"symbol",multiple:!0},{name:"offered_capabilities",type:"symbol",multiple:!0},{name:"desired_capabilities",type:"symbol",multiple:!0},{name:"properties",type:"symbolic_map"}]},begin={name:"begin",code:17,fields:[{name:"remote_channel",type:"ushort"},{name:"next_outgoing_id",type:"uint",mandatory:!0},{name:"incoming_window",type:"uint",mandatory:!0},{name:"outgoing_window",type:"uint",mandatory:!0},{name:"handle_max",type:"uint",default_value:"4294967295"},{name:"offered_capabilities",type:"symbol",multiple:!0},{name:"desired_capabilities",type:"symbol",multiple:!0},{name:"properties",type:"symbolic_map"}]},attach$1={name:"attach",code:18,fields:[{name:"name",type:"string",mandatory:!0},{name:"handle",type:"uint",mandatory:!0},{name:"role",type:"boolean",mandatory:!0},{name:"snd_settle_mode",type:"ubyte",default_value:2},{name:"rcv_settle_mode",type:"ubyte",default_value:0},{name:"source",type:"*"},{name:"target",type:"*"},{name:"unsettled",type:"map"},{name:"incomplete_unsettled",type:"boolean",default_value:!1},{name:"initial_delivery_count",type:"uint"},{name:"max_message_size",type:"ulong"},{name:"offered_capabilities",type:"symbol",multiple:!0},{name:"desired_capabilities",type:"symbol",multiple:!0},{name:"properties",type:"symbolic_map"}]},flow={name:"flow",code:19,fields:[{name:"next_incoming_id",type:"uint"},{name:"incoming_window",type:"uint",mandatory:!0},{name:"next_outgoing_id",type:"uint",mandatory:!0},{name:"outgoing_window",type:"uint",mandatory:!0},{name:"handle",type:"uint"},{name:"delivery_count",type:"uint"},{name:"link_credit",type:"uint"},{name:"available",type:"uint"},{name:"drain",type:"boolean",default_value:!1},{name:"echo",type:"boolean",default_value:!1},{name:"properties",type:"symbolic_map"}]},transfer={name:"transfer",code:20,fields:[{name:"handle",type:"uint",mandatory:!0},{name:"delivery_id",type:"uint"},{name:"delivery_tag",type:"binary"},{name:"message_format",type:"uint"},{name:"settled",type:"boolean"},{name:"more",type:"boolean",default_value:!1},{name:"rcv_settle_mode",type:"ubyte"},{name:"state",type:"delivery_state"},{name:"resume",type:"boolean",default_value:!1},{name:"aborted",type:"boolean",default_value:!1},{name:"batchable",type:"boolean",default_value:!1}]},disposition={name:"disposition",code:21,fields:[{name:"role",type:"boolean",mandatory:!0},{name:"first",type:"uint",mandatory:!0},{name:"last",type:"uint"},{name:"settled",type:"boolean",default_value:!1},{name:"state",type:"*"},{name:"batchable",type:"boolean",default_value:!1}]},detach={name:"detach",code:22,fields:[{name:"handle",type:"uint",mandatory:!0},{name:"closed",type:"boolean",default_value:!1},{name:"error",type:"error"}]},end={name:"end",code:23,fields:[{name:"error",type:"error"}]},close={name:"close",code:24,fields:[{name:"error",type:"error"}]};define_frame(frames$5.TYPE_AMQP,open);define_frame(frames$5.TYPE_AMQP,begin);define_frame(frames$5.TYPE_AMQP,attach$1);define_frame(frames$5.TYPE_AMQP,flow);define_frame(frames$5.TYPE_AMQP,transfer);define_frame(frames$5.TYPE_AMQP,disposition);define_frame(frames$5.TYPE_AMQP,detach);define_frame(frames$5.TYPE_AMQP,end);define_frame(frames$5.TYPE_AMQP,close);var sasl_mechanisms={name:"sasl_mechanisms",code:64,fields:[{name:"sasl_server_mechanisms",type:"symbol",multiple:!0,mandatory:!0}]},sasl_init={name:"sasl_init",code:65,fields:[{name:"mechanism",type:"symbol",mandatory:!0},{name:"initial_response",type:"binary"},{name:"hostname",type:"string"}]},sasl_challenge={name:"sasl_challenge",code:66,fields:[{name:"challenge",type:"binary",mandatory:!0}]},sasl_response={name:"sasl_response",code:67,fields:[{name:"response",type:"binary",mandatory:!0}]},sasl_outcome={name:"sasl_outcome",code:68,fields:[{name:"code",type:"ubyte",mandatory:!0},{name:"additional_data",type:"binary"}]};define_frame(frames$5.TYPE_SASL,sasl_mechanisms);define_frame(frames$5.TYPE_SASL,sasl_init);define_frame(frames$5.TYPE_SASL,sasl_challenge);define_frame(frames$5.TYPE_SASL,sasl_response);define_frame(frames$5.TYPE_SASL,sasl_outcome);var frames_1=frames$5,browser$1={exports:{}},ms,hasRequiredMs;function requireMs(){if(hasRequiredMs)return ms;hasRequiredMs=1;var o=1e3,e=o*60,a=e*60,c=a*24,j=c*7,d=c*365.25;ms=function(ot,gt){gt=gt||{};var ft=typeof ot;if(ft==="string"&&ot.length>0)return et(ot);if(ft==="number"&&isFinite(ot))return gt.long?st(ot):at(ot);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(ot))};function et(ot){if(ot=String(ot),!(ot.length>100)){var gt=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(ot);if(gt){var ft=parseFloat(gt[1]),yt=(gt[2]||"ms").toLowerCase();switch(yt){case"years":case"year":case"yrs":case"yr":case"y":return ft*d;case"weeks":case"week":case"w":return ft*j;case"days":case"day":case"d":return ft*c;case"hours":case"hour":case"hrs":case"hr":case"h":return ft*a;case"minutes":case"minute":case"mins":case"min":case"m":return ft*e;case"seconds":case"second":case"secs":case"sec":case"s":return ft*o;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return ft;default:return}}}}function at(ot){var gt=Math.abs(ot);return gt>=c?Math.round(ot/c)+"d":gt>=a?Math.round(ot/a)+"h":gt>=e?Math.round(ot/e)+"m":gt>=o?Math.round(ot/o)+"s":ot+"ms"}function st(ot){var gt=Math.abs(ot);return gt>=c?ct(ot,gt,c,"day"):gt>=a?ct(ot,gt,a,"hour"):gt>=e?ct(ot,gt,e,"minute"):gt>=o?ct(ot,gt,o,"second"):ot+" ms"}function ct(ot,gt,ft,yt){var vt=gt>=ft*1.5;return Math.round(ot/ft)+" "+yt+(vt?"s":"")}return ms}function setup(o){a.debug=a,a.default=a,a.coerce=st,a.disable=d,a.enable=j,a.enabled=et,a.humanize=requireMs(),a.destroy=ct,Object.keys(o).forEach(ot=>{a[ot]=o[ot]}),a.names=[],a.skips=[],a.formatters={};function e(ot){let gt=0;for(let ft=0;ft<ot.length;ft++)gt=(gt<<5)-gt+ot.charCodeAt(ft),gt|=0;return a.colors[Math.abs(gt)%a.colors.length]}a.selectColor=e;function a(ot){let gt,ft=null,yt,vt;function rt(...bt){if(!rt.enabled)return;const ht=rt,wt=Number(new Date),At=wt-(gt||wt);ht.diff=At,ht.prev=gt,ht.curr=wt,gt=wt,bt[0]=a.coerce(bt[0]),typeof bt[0]!="string"&&bt.unshift("%O");let Ct=0;bt[0]=bt[0].replace(/%([a-zA-Z%])/g,(Et,Rt)=>{if(Et==="%%")return"%";Ct++;const Mt=a.formatters[Rt];if(typeof Mt=="function"){const _t=bt[Ct];Et=Mt.call(ht,_t),bt.splice(Ct,1),Ct--}return Et}),a.formatArgs.call(ht,bt),(ht.log||a.log).apply(ht,bt)}return rt.namespace=ot,rt.useColors=a.useColors(),rt.color=a.selectColor(ot),rt.extend=c,rt.destroy=a.destroy,Object.defineProperty(rt,"enabled",{enumerable:!0,configurable:!1,get:()=>ft!==null?ft:(yt!==a.namespaces&&(yt=a.namespaces,vt=a.enabled(ot)),vt),set:bt=>{ft=bt}}),typeof a.init=="function"&&a.init(rt),rt}function c(ot,gt){const ft=a(this.namespace+(typeof gt>"u"?":":gt)+ot);return ft.log=this.log,ft}function j(ot){a.save(ot),a.namespaces=ot,a.names=[],a.skips=[];let gt;const ft=(typeof ot=="string"?ot:"").split(/[\s,]+/),yt=ft.length;for(gt=0;gt<yt;gt++)ft[gt]&&(ot=ft[gt].replace(/\*/g,".*?"),ot[0]==="-"?a.skips.push(new RegExp("^"+ot.slice(1)+"$")):a.names.push(new RegExp("^"+ot+"$")))}function d(){const ot=[...a.names.map(at),...a.skips.map(at).map(gt=>"-"+gt)].join(",");return a.enable(""),ot}function et(ot){if(ot[ot.length-1]==="*")return!0;let gt,ft;for(gt=0,ft=a.skips.length;gt<ft;gt++)if(a.skips[gt].test(ot))return!1;for(gt=0,ft=a.names.length;gt<ft;gt++)if(a.names[gt].test(ot))return!0;return!1}function at(ot){return ot.toString().substring(2,ot.toString().length-2).replace(/\.\*\?$/,"*")}function st(ot){return ot instanceof Error?ot.stack||ot.message:ot}function ct(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return a.enable(a.load()),a}var common=setup;(function(o,e){var a={};e.formatArgs=j,e.save=d,e.load=et,e.useColors=c,e.storage=at(),e.destroy=(()=>{let ct=!1;return()=>{ct||(ct=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function c(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let ct;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(ct=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(ct[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function j(ct){if(ct[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+ct[0]+(this.useColors?"%c ":" ")+"+"+o.exports.humanize(this.diff),!this.useColors)return;const ot="color: "+this.color;ct.splice(1,0,ot,"color: inherit");let gt=0,ft=0;ct[0].replace(/%[a-zA-Z%]/g,yt=>{yt!=="%%"&&(gt++,yt==="%c"&&(ft=gt))}),ct.splice(ft,0,ot)}e.log=console.debug||console.log||(()=>{});function d(ct){try{ct?e.storage.setItem("debug",ct):e.storage.removeItem("debug")}catch{}}function et(){let ct;try{ct=e.storage.getItem("debug")}catch{}return!ct&&typeof process$1<"u"&&"env"in process$1&&(ct=a.DEBUG),ct}function at(){try{return localStorage}catch{}}o.exports=common(e);const{formatters:st}=o.exports;st.j=function(ct){try{return JSON.stringify(ct)}catch(ot){return"[UnexpectedJSONParseError]: "+ot.message}}})(browser$1,browser$1.exports);var browserExports=browser$1.exports,debug=browserExports;debug.formatters&&(debug.formatters.h=function(o){return o.toString("hex")});var log$6={config:debug("rhea:config"),frames:debug("rhea:frames"),raw:debug("rhea:raw"),reconnect:debug("rhea:reconnect"),events:debug("rhea:events"),message:debug("rhea:message"),flow:debug("rhea:flow"),io:debug("rhea:io")},errors$2=errors$5,frames$4=frames_1,log$5=log$6,util$4=util_1,Transport$2=function(o,e,a,c){this.identifier=o,this.protocol_id=e,this.frame_type=a,this.handler=c,this.pending=[],this.header_sent=void 0,this.header_received=void 0,this.write_complete=!1,this.read_complete=!1};Transport$2.prototype.has_writes_pending=function(){return this.pending.length>0||!this.header_sent};Transport$2.prototype.encode=function(o){this.pending.push(o)};Transport$2.prototype.write=function(o){if(!this.header_sent){var e=util$4.allocate_buffer(8),a={protocol_id:this.protocol_id,major:1,minor:0,revision:0};log$5.frames("[%s] -> %o",this.identifier,a),frames$4.write_header(e,a),o.write(e),this.header_sent=a}for(var c=0;c<this.pending.length;c++){var j=this.pending[c],e=frames$4.write_frame(j);o.write(e),j.performative?log$5.frames("[%s]:%s -> %s %j",this.identifier,j.channel,j.performative.constructor,j.performative,j.payload||""):log$5.frames("[%s]:%s -> empty",this.identifier,j.channel),log$5.raw("[%s] SENT: %d %h",this.identifier,e.length,e)}this.pending=[]};Transport$2.prototype.peek_size=function(o){if(log$5.frames("[%s] peek_size %o, %d",this.identifier,this.header_received,o.length),this.header_received&&o.length>=4)return o.readUInt32BE()};Transport$2.prototype.read=function(o){var e=0;if(!this.header_received){if(o.length<8)return e;if(this.header_received=frames$4.read_header(o),log$5.frames("[%s] <- %o",this.identifier,this.header_received),this.header_received.protocol_id!==this.protocol_id)throw this.protocol_id===3&&this.header_received.protocol_id===0?new errors$2.ProtocolError("Expecting SASL layer"):this.protocol_id===0&&this.header_received.protocol_id===3?new errors$2.ProtocolError("SASL layer not enabled"):new errors$2.ProtocolError("Invalid AMQP protocol id "+this.header_received.protocol_id+" expecting: "+this.protocol_id);e=8}for(;e<o.length-4&&!this.read_complete;){var a=o.readUInt32BE(e);if(log$5.io("[%s] got frame of size %d",this.identifier,a),o.length<e+a){log$5.io("[%s] incomplete frame; have only %d of %d",this.identifier,o.length-e,a);break}else{var c=o.slice(e,e+a);log$5.raw("[%s] RECV: %d %h",this.identifier,c.length,c);var j=frames$4.read_frame(c);if(j.performative?log$5.frames("[%s]:%s <- %s %j",this.identifier,j.channel,j.performative.constructor,j.performative,j.payload||""):log$5.frames("[%s]:%s <- empty",this.identifier,j.channel),j.type!==this.frame_type)throw new errors$2.ProtocolError("Invalid frame type: "+j.type);e+=a,j.performative&&j.performative.dispatch(this.handler,j)}}return e};var transport=Transport$2,errors$1=errors$5,frames$3=frames_1,Transport$1=transport,util$3=util_1,sasl_codes={OK:0,AUTH:1,SYS:2,SYS_PERM:3,SYS_TEMP:4},SASL_PROTOCOL_ID=3;function extract(o){for(var e=[],a=0,c=0;c<o.length;)o[c]===0?(c>a?e.push(o.toString("utf8",a,c)):e.push(null),a=++c):++c;return c>a?e.push(o.toString("utf8",a,c)):e.push(null),e}var PlainServer=function(o){this.callback=o,this.outcome=void 0,this.username=void 0};PlainServer.prototype.start=function(o,e){var a=extract(o);if(a.length!==3)return Promise.reject("Unexpected response in PLAIN, got "+a.length+" fields, expected 3");var c=this;return Promise.resolve(this.callback(a[1],a[2],e)).then(function(j){j?(c.outcome=!0,c.username=a[1]):c.outcome=!1})};var PlainClient=function(o,e){this.username=o,this.password=e};PlainClient.prototype.start=function(o){var e=util$3.allocate_buffer(1+this.username.length+1+this.password.length);e.writeUInt8(0,0),e.write(this.username,1),e.writeUInt8(0,1+this.username.length),e.write(this.password,1+this.username.length+1),o(void 0,e)};var AnonymousServer=function(){this.outcome=void 0,this.username=void 0};AnonymousServer.prototype.start=function(o){this.outcome=!0,this.username=o?o.toString("utf8"):"anonymous"};var AnonymousClient=function(o){this.username=o||"anonymous"};AnonymousClient.prototype.start=function(o){var e=util$3.allocate_buffer(1+this.username.length);e.writeUInt8(0,0),e.write(this.username,1),o(void 0,e)};var ExternalServer=function(){this.outcome=void 0,this.username=void 0};ExternalServer.prototype.start=function(){this.outcome=!0};var ExternalClient=function(){this.username=void 0};ExternalClient.prototype.start=function(o){o(void 0,"")};ExternalClient.prototype.step=function(o){o(void 0,"")};var XOAuth2Client=function(o,e){this.username=o,this.token=e};XOAuth2Client.prototype.start=function(o){var e=util$3.allocate_buffer(this.username.length+this.token.length+5+12+3),a=0;e.write("user=",a),a+=5,e.write(this.username,a),a+=this.username.length,e.writeUInt8(1,a),a+=1,e.write("auth=Bearer ",a),a+=12,e.write(this.token,a),a+=this.token.length,e.writeUInt8(1,a),a+=1,e.writeUInt8(1,a),a+=1,o(void 0,e)};var SaslServer=function(o,e){this.connection=o,this.transport=new Transport$1(o.amqp_transport.identifier,SASL_PROTOCOL_ID,frames$3.TYPE_SASL,this),this.next=o.amqp_transport,this.mechanisms=e,this.mechanism=void 0,this.outcome=void 0,this.username=void 0;var a=Object.getOwnPropertyNames(e);this.transport.encode(frames$3.sasl_frame(frames$3.sasl_mechanisms({sasl_server_mechanisms:a})))};SaslServer.prototype.do_step=function(o){if(this.mechanism.outcome===void 0)this.transport.encode(frames$3.sasl_frame(frames$3.sasl_challenge({challenge:o}))),this.connection.output();else{this.outcome=this.mechanism.outcome?sasl_codes.OK:sasl_codes.AUTH;var e=frames$3.sasl_frame(frames$3.sasl_outcome({code:this.outcome}));this.transport.encode(e),this.connection.output(),this.outcome===sasl_codes.OK&&(this.username=this.mechanism.username,this.transport.write_complete=!0,this.transport.read_complete=!0)}};SaslServer.prototype.on_sasl_init=function(o){var e=this.mechanisms[o.performative.mechanism];e?(this.mechanism=e(),Promise.resolve(this.mechanism.start(o.performative.initial_response,o.performative.hostname)).then(this.do_step.bind(this)).catch(this.do_fail.bind(this))):(this.outcome=sasl_codes.AUTH,this.transport.encode(frames$3.sasl_frame(frames$3.sasl_outcome({code:this.outcome}))))};SaslServer.prototype.on_sasl_response=function(o){Promise.resolve(this.mechanism.step(o.performative.response)).then(this.do_step.bind(this)).catch(this.do_fail.bind(this))};SaslServer.prototype.do_fail=function(o){var e=frames$3.sasl_frame(frames$3.sasl_outcome({code:sasl_codes.SYS}));this.transport.encode(e),this.connection.output();try{this.connection.sasl_failed("Sasl callback promise failed with "+o,"amqp:internal-error")}catch(a){console.error("Uncaught error: ",a.message)}};SaslServer.prototype.has_writes_pending=function(){return this.transport.has_writes_pending()||this.next.has_writes_pending()};SaslServer.prototype.write=function(o){return this.transport.write_complete&&this.transport.pending.length===0?this.next.write(o):this.transport.write(o)};SaslServer.prototype.peek_size=function(o){return this.transport.read_complete?this.next.peek_size(o):this.transport.peek_size(o)};SaslServer.prototype.read=function(o){return this.transport.read_complete?this.next.read(o):this.transport.read(o)};var SaslClient=function(o,e,a){this.connection=o,this.transport=new Transport$1(o.amqp_transport.identifier,SASL_PROTOCOL_ID,frames$3.TYPE_SASL,this),this.next=o.amqp_transport,this.mechanisms=e,this.mechanism=void 0,this.mechanism_name=void 0,this.hostname=a,this.failed=!1};SaslClient.prototype.on_sasl_mechanisms=function(o){var e=[];Array.isArray(o.performative.sasl_server_mechanisms)?e=o.performative.sasl_server_mechanisms:o.performative.sasl_server_mechanisms&&(e=[o.performative.sasl_server_mechanisms]);for(var a=0;this.mechanism===void 0&&a<e.length;a++){var c=e[a],j=this.mechanisms[c];j&&(this.mechanism=typeof j=="function"?j():j,this.mechanism_name=c)}if(this.mechanism){var d=this;this.mechanism.start(function(et,at){if(et)d.failed=!0,d.connection.sasl_failed("SASL mechanism init failed: "+et);else{var st={mechanism:d.mechanism_name,initial_response:at};d.hostname&&(st.hostname=d.hostname),d.transport.encode(frames$3.sasl_frame(frames$3.sasl_init(st))),d.connection.output()}})}else this.failed=!0,this.connection.sasl_failed("No suitable mechanism; server supports "+o.performative.sasl_server_mechanisms)};SaslClient.prototype.on_sasl_challenge=function(o){var e=this;this.mechanism.step(o.performative.challenge,function(a,c){a?(e.failed=!0,e.connection.sasl_failed("SASL mechanism challenge failed: "+a)):(e.transport.encode(frames$3.sasl_frame(frames$3.sasl_response({response:c}))),e.connection.output())})};SaslClient.prototype.on_sasl_outcome=function(o){switch(o.performative.code){case sasl_codes.OK:this.transport.read_complete=!0,this.transport.write_complete=!0;break;case sasl_codes.SYS:case sasl_codes.SYS_PERM:case sasl_codes.SYS_TEMP:this.transport.write_complete=!0,this.connection.sasl_failed("Failed to authenticate: "+o.performative.code,"amqp:internal-error");break;default:this.transport.write_complete=!0,this.connection.sasl_failed("Failed to authenticate: "+o.performative.code)}};SaslClient.prototype.has_writes_pending=function(){return this.transport.has_writes_pending()||this.next.has_writes_pending()};SaslClient.prototype.write=function(o){return this.transport.write_complete?this.next.write(o):this.transport.write(o)};SaslClient.prototype.peek_size=function(o){return this.transport.read_complete?this.next.peek_size(o):this.transport.peek_size(o)};SaslClient.prototype.read=function(o){return this.transport.read_complete?this.next.read(o):this.transport.read(o)};var SelectiveServer=function(o,e){this.header_received=!1,this.transports={0:o.amqp_transport,3:new SaslServer(o,e)},this.selected=void 0};SelectiveServer.prototype.has_writes_pending=function(){return this.header_received&&this.selected.has_writes_pending()};SelectiveServer.prototype.write=function(o){return this.selected?this.selected.write(o):0};SelectiveServer.prototype.peek_size=function(o){if(this.header_received)return this.selected.peek_size(o)};SelectiveServer.prototype.read=function(o){if(!this.header_received){if(o.length<8)return 0;if(this.header_received=frames$3.read_header(o),this.selected=this.transports[this.header_received.protocol_id],this.selected===void 0)throw new errors$1.ProtocolError("Invalid AMQP protocol id "+this.header_received.protocol_id)}return this.selected.read(o)};var default_server_mechanisms={enable_anonymous:function(){this.ANONYMOUS=function(){return new AnonymousServer}},enable_plain:function(o){this.PLAIN=function(){return new PlainServer(o)}}},default_client_mechanisms={enable_anonymous:function(o){this.ANONYMOUS=function(){return new AnonymousClient(o)}},enable_plain:function(o,e){this.PLAIN=function(){return new PlainClient(o,e)}},enable_external:function(){this.EXTERNAL=function(){return new ExternalClient}},enable_xoauth2:function(o,e){if(o&&e)this.XOAUTH2=function(){return new XOAuth2Client(o,e)};else{if(e===void 0)throw Error("token must be specified");if(o===void 0)throw Error("username must be specified")}}},sasl$2={Client:SaslClient,Server:SaslServer,Selective:SelectiveServer,server_mechanisms:function(){return Object.create(default_server_mechanisms)},client_mechanisms:function(){return Object.create(default_client_mechanisms)},server_add_external:function(o){return o.EXTERNAL=function(){return new ExternalServer},o}},EndpointState$3=function(){this.init()};EndpointState$3.prototype.init=function(){this.local_open=!1,this.remote_open=!1,this.open_requests=0,this.close_requests=0,this.initialised=!1,this.marker=void 0};EndpointState$3.prototype.mark=function(o){return this.marker=o||Date.now(),this.marker};EndpointState$3.prototype.open=function(){return this.marker=void 0,this.initialised=!0,this.local_open?!1:(this.local_open=!0,this.open_requests++,!0)};EndpointState$3.prototype.close=function(){return this.marker=void 0,this.local_open?(this.local_open=!1,this.close_requests++,!0):!1};EndpointState$3.prototype.disconnected=function(){var o=this.initialised;this.was_open=this.local_open,this.init(),this.initialised=o};EndpointState$3.prototype.reconnect=function(){this.was_open&&(this.open(),this.was_open=void 0)};EndpointState$3.prototype.remote_opened=function(){return this.remote_open?!1:(this.remote_open=!0,!0)};EndpointState$3.prototype.remote_closed=function(){return this.remote_open?(this.remote_open=!1,!0):!1};EndpointState$3.prototype.is_open=function(){return this.local_open&&this.remote_open};EndpointState$3.prototype.is_closed=function(){return this.initialised&&!(this.local_open||this.was_open)&&!this.remote_open};EndpointState$3.prototype.has_settled=function(){return this.open_requests===0&&this.close_requests===0};EndpointState$3.prototype.need_open=function(){return this.open_requests>0?(this.open_requests--,!0):!1};EndpointState$3.prototype.need_close=function(){return this.close_requests>0?(this.close_requests--,!0):!1};var endpoint=EndpointState$3,message_1,hasRequiredMessage;function requireMessage(){if(hasRequiredMessage)return message_1;hasRequiredMessage=1;var o=log$6,e=requireTypes(),a={},c={},j=[],d={};function et(bt,ht,wt){ht.descriptor=bt,c[bt.symbolic]=ht,c[Number(bt.numeric).toString(10)]=ht,wt&&j.push(wt)}function at(bt){var ht=e.define_composite(bt);d[bt.name]=ht.create,a[Number(ht.descriptor.numeric).toString(10)]=ht,a[ht.descriptor.symbolic]=ht;var wt=function(Ct,dt){for(var Et=new ht(dt.value),Rt=0;Rt<bt.fields.length;Rt++){var Mt=bt.fields[Rt],_t=Et[Mt.name];_t!=null&&(Ct[Mt.name]=_t)}},At=function(Ct,dt){Ct.push(ht.create(dt).described())};et(ht.descriptor,wt,At)}function st(bt,ht){var wt=ht?e.wrap_symbolic_map:e.wrap_map,At={numeric:bt.code};At.symbolic="amqp:"+bt.name.replace(/_/g,"-")+":map";var Ct=function(Et,Rt){Et[bt.name]=e.unwrap_map_simple(Rt)},dt=function(Et,Rt){Rt[bt.name]&&Et.push(e.described_nc(e.wrap_ulong(At.numeric),wt(Rt[bt.name])))};et(At,Ct,dt)}function ct(bt,ht,wt){this.typecode=bt,this.content=ht,this.multiple=wt}ct.prototype.described=function(bt){return e.described(e.wrap_ulong(this.typecode),e.wrap(bt||this.content))},ct.prototype.collect_sections=function(bt){if(this.multiple)for(var ht=0;ht<this.content.length;ht++)bt.push(this.described(this.content[ht]));else bt.push(this.described())},at({name:"header",code:112,fields:[{name:"durable",type:"boolean",default_value:!1},{name:"priority",type:"ubyte",default_value:4},{name:"ttl",type:"uint"},{name:"first_acquirer",type:"boolean",default_value:!1},{name:"delivery_count",type:"uint",default_value:0}]}),st({name:"delivery_annotations",code:113},!0),st({name:"message_annotations",code:114},!0),at({name:"properties",code:115,fields:[{name:"message_id",type:"message_id"},{name:"user_id",type:"binary"},{name:"to",type:"string"},{name:"subject",type:"string"},{name:"reply_to",type:"string"},{name:"correlation_id",type:"message_id"},{name:"content_type",type:"symbol"},{name:"content_encoding",type:"symbol"},{name:"absolute_expiry_time",type:"timestamp"},{name:"creation_time",type:"timestamp"},{name:"group_id",type:"string"},{name:"group_sequence",type:"uint"},{name:"reply_to_group_id",type:"string"}]}),st({name:"application_properties",code:116});function ot(bt,ht,wt){bt.body===void 0?bt.body=new ct(wt,e.unwrap(ht)):bt.body.constructor===ct&&bt.body.typecode===wt&&(bt.body.multiple?bt.body.content.push(e.unwrap(ht)):(bt.body.multiple=!0,bt.body.content=[bt.body.content,e.unwrap(ht)]))}et({numeric:117,symbolic:"amqp:data:binary"},function(bt,ht){ot(bt,ht,117)}),et({numeric:118,symbolic:"amqp:amqp-sequence:list"},function(bt,ht){ot(bt,ht,118)}),et({numeric:119,symbolic:"amqp:value:*"},function(bt,ht){bt.body=e.unwrap(ht)}),st({name:"footer",code:120});function gt(bt,ht){ht.body&&ht.body.collect_sections?ht.body.collect_sections(bt):bt.push(e.described(e.wrap_ulong(119),e.wrap(ht.body)))}j.push(gt),d.data_section=function(bt){return new ct(117,bt)},d.sequence_section=function(bt){return new ct(118,bt)},d.data_sections=function(bt){return new ct(117,bt,!0)},d.sequence_sections=function(bt){return new ct(118,bt,!0)};function ft(bt,ht){for(var wt in bt){var At=bt[wt];typeof At=="object"?ft(At,ht[wt]):ht[wt]=At}}function yt(bt){bt&&ft(bt,this)}yt.prototype.toJSON=function(){var bt={};for(var ht in this)typeof this[ht]!="function"&&(bt[ht]=this[ht]);return bt},yt.prototype.toString=function(){return JSON.stringify(this.toJSON())},d.encode=function(bt){var ht=[];j.forEach(function(dt){dt(ht,bt)});for(var wt=new e.Writer,At=0;At<ht.length;At++)o.message("Encoding section %d of %d: %o",At+1,ht.length,ht[At]),wt.write(ht[At]);var Ct=wt.toBuffer();return o.message("encoded %d bytes",Ct.length),Ct},d.decode=function(bt){for(var ht=new yt,wt=new e.Reader(bt);wt.remaining();){var At=wt.read();if(o.message("decoding section: %o of type: %o",At,At.descriptor),At.descriptor){var Ct=c[At.descriptor.value];Ct?Ct(ht,At):console.warn("WARNING: did not recognise message section with descriptor "+At.descriptor)}else console.warn("WARNING: expected described message section got "+JSON.stringify(At))}return ht};var vt={};function rt(bt){var ht=e.define_composite(bt);ht.composite_type=bt.name,d[bt.name]=ht.create,vt[Number(ht.descriptor.numeric).toString(10)]=ht,vt[ht.descriptor.symbolic]=ht,d["is_"+bt.name]=function(wt){if(wt&&wt.descriptor){var At=vt[wt.descriptor.value];if(At)return At.descriptor.numeric===bt.code}return!1}}return d.unwrap_outcome=function(bt){if(bt&&bt.descriptor){var ht=vt[bt.descriptor.value];if(ht)return new ht(bt.value)}return console.error("unrecognised outcome: "+JSON.stringify(bt)),bt},d.are_outcomes_equivalent=function(bt,ht){return bt===void 0&&ht===void 0?!0:bt===void 0||ht===void 0?!1:bt.descriptor.value===ht.descriptor.value&&bt.descriptor.value===36},rt({name:"received",code:35,fields:[{name:"section_number",type:"uint",mandatory:!0},{name:"section_offset",type:"ulong",mandatory:!0}]}),rt({name:"accepted",code:36,fields:[]}),rt({name:"rejected",code:37,fields:[{name:"error",type:"error"}]}),rt({name:"released",code:38,fields:[]}),rt({name:"modified",code:39,fields:[{name:"delivery_failed",type:"boolean"},{name:"undeliverable_here",type:"boolean"},{name:"message_annotations",type:"map"}]}),message_1=d,message_1}var types$1=requireTypes(),terminus$1={},by_descriptor={};function define_terminus(o){var e=types$1.define_composite(o);terminus$1[o.name]=e.create,by_descriptor[Number(e.descriptor.numeric).toString(10)]=e,by_descriptor[e.descriptor.symbolic]=e}terminus$1.unwrap=function(o){if(o&&o.descriptor){var e=by_descriptor[o.descriptor.value];if(e)return new e(o.value);console.warn("Unknown terminus: "+o.descriptor)}return null};define_terminus({name:"source",code:40,fields:[{name:"address",type:"string"},{name:"durable",type:"uint",default_value:0},{name:"expiry_policy",type:"symbol",default_value:"session-end"},{name:"timeout",type:"uint",default_value:0},{name:"dynamic",type:"boolean",default_value:!1},{name:"dynamic_node_properties",type:"symbolic_map"},{name:"distribution_mode",type:"symbol"},{name:"filter",type:"symbolic_map"},{name:"default_outcome",type:"*"},{name:"outcomes",type:"symbol",multiple:!0},{name:"capabilities",type:"symbol",multiple:!0}]});define_terminus({name:"target",code:41,fields:[{name:"address",type:"string"},{name:"durable",type:"uint",default_value:0},{name:"expiry_policy",type:"symbol",default_value:"session-end"},{name:"timeout",type:"uint",default_value:0},{name:"dynamic",type:"boolean",default_value:!1},{name:"dynamic_node_properties",type:"symbolic_map"},{name:"capabilities",type:"symbol",multiple:!0}]});var terminus_1=terminus$1,frames$2=frames_1,log$4=log$6,message$1=requireMessage(),terminus=terminus_1,EndpointState$2=endpoint,FlowController=function(o){this.window=o};FlowController.prototype.update=function(o){var e=this.window-o.receiver.credit;e>=this.window/4&&o.receiver.flow(e)};function auto_settle(o){o.delivery.settled=!0}function auto_accept(o){o.delivery.update(void 0,message$1.accepted().described())}function LinkError(o,e,a){Error.call(this),Error.captureStackTrace(this,this.constructor),this.message=o,this.condition=e,this.description=o,Object.defineProperty(this,"link",{value:a})}util$8.inherits(LinkError,Error);var EventEmitter$3=eventsExports.EventEmitter,link$2=Object.create(EventEmitter$3.prototype);link$2.dispatch=function(o){return log$4.events("[%s] Link got event: %s",this.connection.options.id,o),EventEmitter$3.prototype.emit.apply(this.observers,arguments),this.listeners(o).length?(EventEmitter$3.prototype.emit.apply(this,arguments),!0):this.session.dispatch.apply(this.session,arguments)};link$2.set_source=function(o){this.local.attach.source=terminus.source(o).described()};link$2.set_target=function(o){this.local.attach.target=terminus.target(o).described()};link$2.attach=function(){this.state.open()&&this.connection._register()};link$2.open=link$2.attach;link$2.detach=function(){this.local.detach.closed=!1,this.state.close()&&this.connection._register()};link$2.close=function(o){o&&(this.local.detach.error=o),this.local.detach.closed=!0,this.state.close()&&this.connection._register()};link$2.remove=function(){this.session.remove_link(this)};link$2.is_open=function(){return this.session.is_open()&&this.state.is_open()};link$2.is_remote_open=function(){return this.session.is_remote_open()&&this.state.remote_open};link$2.is_itself_closed=function(){return this.state.is_closed()};link$2.is_closed=function(){return this.session.is_closed()||this.is_itself_closed()};link$2._process=function(){do this.state.need_open()&&this.session.output(this.local.attach),this.issue_flow&&this.state.local_open&&(this.session._write_flow(this),this.issue_flow=!1),this.state.need_close()&&this.session.output(this.local.detach);while(!this.state.has_settled())};link$2.on_attach=function(o){if(this.state.remote_opened())this.remote.handle||(this.remote.handle=o.handle),o.performative.source=terminus.unwrap(o.performative.source),o.performative.target=terminus.unwrap(o.performative.target),this.remote.attach=o.performative,this.open(),this.dispatch(this.is_receiver()?"receiver_open":"sender_open",this._context());else throw Error("Attach already received")};link$2.prefix_event=function(o){return(this.local.attach.role?"receiver_":"sender_")+o};link$2.on_detach=function(o){if(this.state.remote_closed()){this._incomplete&&(this._incomplete.settled=!0),this.remote.detach=o.performative;var e=this.remote.detach.error;if(e){var a=this.dispatch(this.prefix_event("error"),this._context());a=this.dispatch(this.prefix_event("close"),this._context())||a,a||EventEmitter$3.prototype.emit.call(this.connection.container,"error",new LinkError(e.description,e.condition,this))}else this.dispatch(this.prefix_event("close"),this._context());var c=this,j=this.state.mark();process$1.nextTick(function(){c.state.marker===j&&(c.close(),process$1.nextTick(function(){c.remove()}))})}else throw Error("Detach already received")};function is_internal(o){switch(o){case"name":case"handle":case"role":case"initial_delivery_count":return!0;default:return!1}}var aliases$1=["snd_settle_mode","rcv_settle_mode","source","target","max_message_size","offered_capabilities","desired_capabilities","properties"];function remote_property_shortcut$1(o){return function(){return this.remote.attach?this.remote.attach[o]:void 0}}link$2.init=function(o,e,a,c,j){this.session=o,this.connection=o.connection,this.name=e,this.options=c===void 0?{}:c,this.state=new EndpointState$2,this.issue_flow=!1,this.local={handle:a},this.local.attach=frames$2.attach({handle:a,name:e,role:j});for(var d in this.local.attach)!is_internal(d)&&this.options[d]!==void 0&&(this.local.attach[d]=this.options[d]);this.local.detach=frames$2.detach({handle:a,closed:!0}),this.remote={handle:void 0},this.delivery_count=0,this.credit=0,this.observers=new EventEmitter$3;var et=this;aliases$1.forEach(function(at){Object.defineProperty(et,at,{get:remote_property_shortcut$1(at)})}),Object.defineProperty(this,"error",{get:function(){return this.remote.detach?this.remote.detach.error:void 0}})};link$2._disconnect=function(){this.state.disconnected(),this.state.was_open||this.remove()};link$2._reconnect=function(){this.state.reconnect(),this.remote={handle:void 0},this.delivery_count=0,this.credit=0};link$2.has_credit=function(){return this.credit>0};link$2.is_receiver=function(){return this.local.attach.role};link$2.is_sender=function(){return!this.is_receiver()};link$2._context=function(o){var e=o||{};return this.is_receiver()?e.receiver=this:e.sender=this,this.session._context(e)};link$2.get_option=function(o,e){return this.options[o]!==void 0?this.options[o]:this.session.get_option(o,e)};var Sender=function(o,e,a,c){this.init(o,e,a,c,!1),this._draining=!1,this._drained=!1,this.local.attach.initial_delivery_count=0,this.tag=0,this.get_option("autosettle",!0)&&this.observers.on("settled",auto_settle);var j=this;this.get_option("treat_modified_as_released",!0)&&this.observers.on("modified",function(d){j.dispatch("released",d)})};Sender.prototype=Object.create(link$2);Sender.prototype.constructor=Sender;Sender.prototype._get_drain=function(){if(this._draining&&this._drained&&this.credit){for(;this.credit;)++this.delivery_count,--this.credit;return!0}else return!1};Sender.prototype.set_drained=function(o){this._drained=o,this._draining&&this._drained&&(this.issue_flow=!0)};Sender.prototype.next_tag=function(){return Buffer.from(new String(this.tag++))};Sender.prototype.sendable=function(){return!!(this.credit&&this.session.outgoing.available())};Sender.prototype.on_flow=function(o){var e=o.performative;this.credit=e.delivery_count+e.link_credit-this.delivery_count,this._draining=e.drain,this._drained=this.credit>0,this.is_open()&&(this.dispatch("sender_flow",this._context()),this._draining&&this.dispatch("sender_draining",this._context()),this.sendable()&&this.dispatch("sendable",this._context()))};Sender.prototype.on_transfer=function(){throw Error("got transfer on sending link")};Sender.prototype.send=function(o,e,a){var c=a===void 0?message$1.encode(o):o,j=this.session.send(this,e||this.next_tag(),c,a);return this.local.attach.snd_settle_mode===1&&(j.settled=!0),j};var Receiver=function(o,e,a,c){this.init(o,e,a,c,!0),this.drain=!1,this.set_credit_window(this.get_option("credit_window",1e3)),this.get_option("autoaccept",!0)&&this.observers.on("message",auto_accept),this.local.attach.rcv_settle_mode===1&&this.get_option("autosettle",!0)&&this.observers.on("settled",auto_settle)};Receiver.prototype=Object.create(link$2);Receiver.prototype.constructor=Receiver;Receiver.prototype.on_flow=function(o){this.dispatch("receiver_flow",this._context()),o.performative.drain&&(this.credit=o.performative.link_credit,this.delivery_count=o.performative.delivery_count,o.performative.link_credit>0?console.error("ERROR: received flow with drain set, but non zero credit"):this.dispatch("receiver_drained",this._context()))};Receiver.prototype.flow=function(o){o>0&&(this.credit+=o,this.issue_flow=!0,this.connection._register())};Receiver.prototype.drain_credit=function(){this.drain=!0,this.issue_flow=!0,this.connection._register()};Receiver.prototype.add_credit=Receiver.prototype.flow;Receiver.prototype._get_drain=function(){return this.drain};Receiver.prototype.set_credit_window=function(o){if(o>0){var e=new FlowController(o),a=e.update.bind(e);this.observers.on("message",a),this.observers.on("receiver_open",a)}};var link_1={Sender,Receiver},frames$1=frames_1,link$1=link_1,log$3=log$6,message=requireMessage(),types=requireTypes(),util$2=util_1,EndpointState$1=endpoint,EventEmitter$2=eventsExports.EventEmitter,DEFAULT_BUFFER_SIZE=2048;function SessionError(o,e,a){Error.call(this),Error.captureStackTrace(this,this.constructor),this.message=o,this.condition=e,this.description=o,Object.defineProperty(this,"session",{value:a})}util$8.inherits(SessionError,Error);var CircularBuffer=function(o){this.capacity=o,this.size=0,this.head=0,this.tail=0,this.entries=[]};CircularBuffer.prototype.available=function(){return this.capacity-this.size};CircularBuffer.prototype.push=function(o){if(this.size<this.capacity)this.entries[this.tail]=o,this.tail=(this.tail+1)%this.capacity,this.size++;else throw Error("circular buffer overflow: head="+this.head+" tail="+this.tail+" size="+this.size+" capacity="+this.capacity)};CircularBuffer.prototype.pop_if=function(o){for(var e=0;this.size&&o(this.entries[this.head]);)this.entries[this.head]=void 0,this.head=(this.head+1)%this.capacity,this.size--,e++;return e};CircularBuffer.prototype.by_id=function(o){if(this.size>0){var e=o-this.entries[this.head].id;if(e<this.size)return this.entries[(this.head+e)%this.capacity]}};CircularBuffer.prototype.get_head=function(){return this.size>0?this.entries[this.head]:void 0};CircularBuffer.prototype.get_tail=function(){return this.size>0?this.entries[(this.head+this.size-1)%this.capacity]:void 0};function write_dispositions(o){var e,a,c,j,d;for(j=0;j<o.length;j++)d=o[j],e===void 0&&(e=d,a=d,c=d.id),e!==a&&!message.are_outcomes_equivalent(a.state,d.state)||a.settled!==d.settled||c!==d.id?(e.link.session.output(frames$1.disposition({role:e.link.is_receiver(),first:e.id,last:a.id,state:e.state,settled:e.settled})),e=d,a=d,c=d.id):(a.id!==d.id&&(a=d),c++);e!==void 0&&a!==void 0&&e.link.session.output(frames$1.disposition({role:e.link.is_receiver(),first:e.id,last:a.id,state:e.state,settled:e.settled}))}function validate_buffer_size(o){return o&&Number.isInteger(Number(o))?Number(o):DEFAULT_BUFFER_SIZE}function get_buffer_size(o,e){return o?validate_buffer_size(typeof o=="number"?o:o[e]):DEFAULT_BUFFER_SIZE}var Outgoing=function(o,e){this.deliveries=new CircularBuffer(get_buffer_size(e,"outgoing")),this.updated=[],this.pending_dispositions=[],this.next_delivery_id=0,this.next_pending_delivery=0,this.next_transfer_id=0,this.window=types.MAX_UINT,this.remote_next_transfer_id=void 0,this.remote_window=void 0,this.connection=o};Outgoing.prototype.available=function(){return this.deliveries.available()};Outgoing.prototype.compute_max_payload=function(o){if(this.connection.max_frame_size)return this.connection.max_frame_size-(50+o.length)};Outgoing.prototype.send=function(o,e,a,c){var j=[],d=this.compute_max_payload(e);if(d&&a.length>d)for(var et=0;et<a.length;){var at=Math.min(et+d,a.length);j.push(a.slice(et,at)),et=at}else j.push(a);var st={id:this.next_delivery_id++,tag:e,link:o,data:j,format:c||0,next_to_send:0,sent:!1,settled:!1,state:void 0,remote_settled:!1,remote_state:void 0},ct=this;return st.update=function(ot,gt){ct.update(st,ot,gt)},this.deliveries.push(st),st};Outgoing.prototype.on_begin=function(o){this.remote_window=o.incoming_window};Outgoing.prototype.on_flow=function(o){this.remote_next_transfer_id=o.next_incoming_id,this.remote_window=o.incoming_window};Outgoing.prototype.on_disposition=function(o){for(var e=o.last?o.last:o.first,a=o.first;a<=e;a++){var c=this.deliveries.by_id(a);if(c&&!c.remote_settled){var j=!1;o.settled&&(c.remote_settled=o.settled,j=!0),o.state&&o.state!==c.remote_state&&(c.remote_state=message.unwrap_outcome(o.state),j=!0),j&&this.updated.push(c)}}};Outgoing.prototype.update=function(o,e,a){o&&(o.settled=e,a!==void 0&&(o.state=a),o.remote_settled||this.pending_dispositions.push(o),o.link.connection._register())};Outgoing.prototype.transfer_window=function(){return this.remote_window?this.remote_window-(this.next_transfer_id-this.remote_next_transfer_id):0};Outgoing.prototype.process=function(){for(var o;this.next_pending_delivery<this.next_delivery_id;)if(o=this.deliveries.by_id(this.next_pending_delivery),o)if(o.link.has_credit()){const j=Math.min(this.transfer_window(),o.data.length-o.next_to_send);if(j>0){this.window-=j;const d=o.next_to_send+j;for(var e=o.next_to_send;e<d;e++){this.next_transfer_id++;var a=e+1<o.data.length,c=frames$1.transfer({handle:o.link.local.handle,message_format:o.format,delivery_id:o.id,delivery_tag:o.tag,settled:o.settled,more:a});o.link.session.output(c,o.data[e])}if(d<o.data.length){o.next_to_send=d;break}else o.settled&&(o.remote_settled=!0),o.link.credit--,o.link.delivery_count++,this.next_pending_delivery++}else{log$3.flow("[%s] Incoming window of peer preventing sending further transfers: remote_window=%d, remote_next_transfer_id=%d, next_transfer_id=%d",this.connection.options.id,this.remote_window,this.remote_next_transfer_id,this.next_transfer_id);break}}else{log$3.flow("[%s] Link has no credit",this.connection.options.id);break}else{console.error("ERROR: Next pending delivery not found: "+this.next_pending_delivery);break}for(var e=0;e<this.updated.length;e++)o=this.updated[e],o.remote_state&&o.remote_state.constructor.composite_type&&o.link.dispatch(o.remote_state.constructor.composite_type,o.link._context({delivery:o})),o.remote_settled&&o.link.dispatch("settled",o.link._context({delivery:o}));this.updated=[],this.pending_dispositions.length&&(write_dispositions(this.pending_dispositions),this.pending_dispositions=[]),this.deliveries.pop_if(function(j){return j.settled&&j.remote_settled})};var Incoming=function(o){this.deliveries=new CircularBuffer(get_buffer_size(o,"incoming")),this.updated=[],this.next_transfer_id=0,this.next_delivery_id=void 0,Object.defineProperty(this,"window",{get:function(){return this.deliveries.available()}}),this.remote_next_transfer_id=void 0,this.remote_window=void 0,this.max_transfer_id=this.next_transfer_id+this.window};Incoming.prototype.update=function(o,e,a){o&&(o.settled=e,a!==void 0&&(o.state=a),o.remote_settled||this.updated.push(o),o.link.connection._register())};Incoming.prototype.on_transfer=function(o,e){if(this.next_transfer_id++,e.is_remote_open()){this.next_delivery_id===void 0&&(this.next_delivery_id=o.performative.delivery_id);var a;if(e._incomplete){if(a=e._incomplete,util$2.is_defined(o.performative.delivery_id)&&a.id!==o.performative.delivery_id)throw Error("frame sequence error: delivery "+a.id+" not complete, got "+o.performative.delivery_id);o.payload&&a.frames.push(o.payload)}else if(this.next_delivery_id===o.performative.delivery_id){a={id:o.performative.delivery_id,tag:o.performative.delivery_tag,format:o.performative.message_format,link:e,settled:!1,state:void 0,remote_settled:o.performative.settled===void 0?!1:o.performative.settled,remote_state:o.performative.state,frames:[o.payload]};var c=this;a.update=function(d,et){var at=d;at===void 0&&(at=e.local.attach.rcv_settle_mode!==1),c.update(a,at,et)},a.accept=function(){this.update(void 0,message.accepted().described())},a.release=function(d){d?this.update(void 0,message.modified(d).described()):this.update(void 0,message.released().described())},a.reject=function(d){this.update(void 0,message.rejected({error:d}).described())},a.modified=function(d){this.update(void 0,message.modified(d).described())},this.deliveries.push(a),this.next_delivery_id++}else throw Error("frame sequence error: expected "+this.next_delivery_id+", got "+o.performative.delivery_id);if(a.incomplete=o.performative.more,a.incomplete)e._incomplete=a;else{e._incomplete=void 0;const d=a.frames.length===1?a.frames[0]:Buffer.concat(a.frames);delete a.frames,e.credit>0?e.credit--:console.error("Received transfer when credit was %d",e.credit),e.delivery_count++;var j=a.format===0?{message:message.decode(d),delivery:a}:{message:d,delivery:a,format:a.format};e.dispatch("message",e._context(j))}}else throw Error("transfer after detach")};Incoming.prototype.process=function(o){this.updated.length>0&&(write_dispositions(this.updated),this.updated=[]),this.deliveries.pop_if(function(e){return e.settled}),this.max_transfer_id-this.next_transfer_id<this.window/2&&o._write_flow()};Incoming.prototype.on_begin=function(o){this.next_transfer_id=o.next_outgoing_id,this.remote_window=o.outgoing_window,this.remote_next_transfer_id=o.next_outgoing_id};Incoming.prototype.on_flow=function(o){this.next_transfer_id=o.next_outgoing_id,this.remote_next_transfer_id=o.next_outgoing_id,this.remote_window=o.outgoing_window};Incoming.prototype.on_disposition=function(o){for(var e=o.last?o.last:o.first,a=o.first;a<=e;a++){var c=this.deliveries.by_id(a);c&&!c.remote_settled&&(o.state&&o.state!==c.remote_state&&(c.remote_state=message.unwrap_outcome(o.state)),o.settled&&(c.remote_settled=o.settled,c.link.dispatch("settled",c.link._context({delivery:c}))))}};var Session$1=function(o,e,a){this.connection=o,this.session_buffer_size=a,this.outgoing=new Outgoing(o,a),this.incoming=new Incoming(a),this.state=new EndpointState$1,this.local={channel:e,handles:{}},this.local.begin=frames$1.begin({next_outgoing_id:this.outgoing.next_transfer_id,incoming_window:this.incoming.window,outgoing_window:this.outgoing.window}),this.local.end=frames$1.end(),this.remote={handles:{}},this.links={},this.options={},Object.defineProperty(this,"error",{get:function(){return this.remote.end?this.remote.end.error:void 0}}),this.observers=new EventEmitter$2};Session$1.prototype=Object.create(EventEmitter$2.prototype);Session$1.prototype.constructor=Session$1;Session$1.prototype._disconnect=function(){this.state.disconnected();for(var o in this.links)this.links[o]._disconnect();this.state.was_open||this.remove()};Session$1.prototype._reconnect=function(){this.state.reconnect(),this.outgoing=new Outgoing(this.connection,this.session_buffer_size),this.incoming=new Incoming(this.session_buffer_size),this.remote={handles:{}};for(var o in this.links)this.links[o]._reconnect()};Session$1.prototype.dispatch=function(o){return log$3.events("[%s] Session got event: %s",this.connection.options.id,o),EventEmitter$2.prototype.emit.apply(this.observers,arguments),this.listeners(o).length?(EventEmitter$2.prototype.emit.apply(this,arguments),!0):this.connection.dispatch.apply(this.connection,arguments)};Session$1.prototype.output=function(o,e){this.connection._write_frame(this.local.channel,o,e)};Session$1.prototype.create_sender=function(o,e){return e||(e=this.get_option("sender_options",{})),this.create_link(o,link$1.Sender,e)};Session$1.prototype.create_receiver=function(o,e){return e||(e=this.get_option("receiver_options",{})),this.create_link(o,link$1.Receiver,e)};function merge(o,e){for(var a in e)a==="properties"&&o.properties?merge(o.properties,e.properties):o[a]=e[a]}function attach(o,e,a,c){var j=Object.create(c||{});typeof e=="string"?j[a]=e:e&&merge(j,e),j.name||(j.name=util$2.generate_uuid());var d=o(j.name,j);for(var et in{source:0,target:0})j[et]&&(typeof j[et]=="string"&&(j[et]={address:j[et]}),d["set_"+et](j[et]));return d.is_sender()&&j.source===void 0&&(j.source=d.set_source({})),d.is_receiver()&&j.target===void 0&&(j.target=d.set_target({})),d.attach(),d}Session$1.prototype.get_option=function(o,e){return this.options[o]!==void 0?this.options[o]:this.connection.get_option(o,e)};Session$1.prototype.attach_sender=function(o){return attach(this.create_sender.bind(this),o,"target",this.get_option("sender_options",{}))};Session$1.prototype.open_sender=Session$1.prototype.attach_sender;Session$1.prototype.attach_receiver=function(o){return attach(this.create_receiver.bind(this),o,"source",this.get_option("receiver_options",{}))};Session$1.prototype.open_receiver=Session$1.prototype.attach_receiver;Session$1.prototype.find_sender=function(o){return this.find_link(util$2.sender_filter(o))};Session$1.prototype.find_receiver=function(o){return this.find_link(util$2.receiver_filter(o))};Session$1.prototype.find_link=function(o){for(var e in this.links){var a=this.links[e];if(o(a))return a}};Session$1.prototype.each_receiver=function(o,e){this.each_link(o,util$2.receiver_filter(e))};Session$1.prototype.each_sender=function(o,e){this.each_link(o,util$2.sender_filter(e))};Session$1.prototype.each_link=function(o,e){for(var a in this.links){var c=this.links[a];(e===void 0||e(c))&&o(c)}};Session$1.prototype.create_link=function(o,e,a){for(var c=0;this.local.handles[c];)c++;var j=new e(this,o,c,a);return this.links[o]=j,this.local.handles[c]=j,j};Session$1.prototype.begin=function(){this.state.open()&&this.connection._register()};Session$1.prototype.open=Session$1.prototype.begin;Session$1.prototype.end=function(o){o&&(this.local.end.error=o),this.state.close()&&this.connection._register()};Session$1.prototype.close=Session$1.prototype.end;Session$1.prototype.is_open=function(){return this.connection.is_open()&&this.state.is_open()};Session$1.prototype.is_remote_open=function(){return this.connection.is_remote_open()&&this.state.remote_open};Session$1.prototype.is_itself_closed=function(){return this.state.is_closed()};Session$1.prototype.is_closed=function(){return this.connection.is_closed()||this.is_itself_closed()};function notify_sendable(o){o.dispatch("sendable",o._context())}function is_sender_sendable(o){return o.is_open()&&o.sendable()}Session$1.prototype._process=function(){do{this.state.need_open()&&this.output(this.local.begin);var o=this.outgoing.deliveries.available()===0;this.outgoing.process(),o&&this.outgoing.deliveries.available()&&this.each_sender(notify_sendable,is_sender_sendable),this.incoming.process(this);for(var e in this.links)this.links[e]._process();this.state.need_close()&&this.output(this.local.end)}while(!this.state.has_settled())};Session$1.prototype.send=function(o,e,a,c){var j=this.outgoing.send(o,e,a,c);return this.connection._register(),j};Session$1.prototype._write_flow=function(o){var e={next_incoming_id:this.incoming.next_transfer_id,incoming_window:this.incoming.window,next_outgoing_id:this.outgoing.next_transfer_id,outgoing_window:this.outgoing.window};this.incoming.max_transfer_id=e.next_incoming_id+e.incoming_window,o&&(o._get_drain()&&(e.drain=!0),e.delivery_count=o.delivery_count,e.handle=o.local.handle,e.link_credit=o.credit),this.output(frames$1.flow(e))};Session$1.prototype.on_begin=function(o){if(this.state.remote_opened())this.remote.channel||(this.remote.channel=o.channel),this.remote.begin=o.performative,this.outgoing.on_begin(o.performative),this.incoming.on_begin(o.performative),this.open(),this.dispatch("session_open",this._context());else throw Error("Begin already received")};Session$1.prototype.on_end=function(o){if(this.state.remote_closed()){this.remote.end=o.performative;var e=this.remote.end.error;if(e){var a=this.dispatch("session_error",this._context());a=this.dispatch("session_close",this._context())||a,a||EventEmitter$2.prototype.emit.call(this.connection.container,"error",new SessionError(e.description,e.condition,this))}else this.dispatch("session_close",this._context());var c=this,j=this.state.mark();process$1.nextTick(function(){c.state.marker===j&&(c.close(),process$1.nextTick(function(){c.remove()}))})}else throw Error("End already received")};Session$1.prototype.on_attach=function(o){var e=o.performative.name,a=this.links[e];a||(a=o.performative.role?this.create_sender(e):this.create_receiver(e)),this.remote.handles[o.performative.handle]=a,a.on_attach(o),a.remote.attach=o.performative};Session$1.prototype.on_disposition=function(o){o.performative.role?(log$3.events("[%s] Received disposition for outgoing transfers",this.connection.options.id),this.outgoing.on_disposition(o.performative)):(log$3.events("[%s] Received disposition for incoming transfers",this.connection.options.id),this.incoming.on_disposition(o.performative)),this.connection._register()};Session$1.prototype.on_flow=function(o){this.outgoing.on_flow(o.performative),this.incoming.on_flow(o.performative),util$2.is_defined(o.performative.handle)&&this._get_link(o).on_flow(o),this.connection._register()};Session$1.prototype._context=function(o){var e=o||{};return e.session=this,this.connection._context(e)};Session$1.prototype._get_link=function(o){var e=o.performative.handle,a=this.remote.handles[e];if(!a)throw Error("Invalid handle "+e);return a};Session$1.prototype.on_detach=function(o){this._get_link(o).on_detach(o)};Session$1.prototype.remove_link=function(o){delete this.remote.handles[o.remote.handle],delete this.local.handles[o.local.handle],delete this.links[o.name]};Session$1.prototype.remove=function(){this.connection.remove_session(this)};Session$1.prototype.on_transfer=function(o){this.incoming.on_transfer(o,this._get_link(o))};var session$1=Session$1,empty=null;const empty$1=Object.freeze(Object.defineProperty({__proto__:null,default:empty},Symbol.toStringTag,{value:"Module"})),require$$6=getAugmentedNamespace(empty$1);var browser={};browser.endianness=function(){return"LE"};browser.hostname=function(){return typeof location<"u"?location.hostname:""};browser.loadavg=function(){return[]};browser.uptime=function(){return 0};browser.freemem=function(){return Number.MAX_VALUE};browser.totalmem=function(){return Number.MAX_VALUE};browser.cpus=function(){return[]};browser.type=function(){return"Browser"};browser.release=function(){return typeof navigator<"u"?navigator.appVersion:""};browser.networkInterfaces=browser.getNetworkInterfaces=function(){return{}};browser.arch=function(){return"javascript"};browser.platform=function(){return"browser"};browser.tmpdir=browser.tmpDir=function(){return"/tmp"};browser.EOL=`
`;browser.homedir=function(){return"/"};function assertPath(o){if(typeof o!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(o))}function normalizeStringPosix(o,e){for(var a="",c=0,j=-1,d=0,et,at=0;at<=o.length;++at){if(at<o.length)et=o.charCodeAt(at);else{if(et===47)break;et=47}if(et===47){if(!(j===at-1||d===1))if(j!==at-1&&d===2){if(a.length<2||c!==2||a.charCodeAt(a.length-1)!==46||a.charCodeAt(a.length-2)!==46){if(a.length>2){var st=a.lastIndexOf("/");if(st!==a.length-1){st===-1?(a="",c=0):(a=a.slice(0,st),c=a.length-1-a.lastIndexOf("/")),j=at,d=0;continue}}else if(a.length===2||a.length===1){a="",c=0,j=at,d=0;continue}}e&&(a.length>0?a+="/..":a="..",c=2)}else a.length>0?a+="/"+o.slice(j+1,at):a=o.slice(j+1,at),c=at-j-1;j=at,d=0}else et===46&&d!==-1?++d:d=-1}return a}function _format(o,e){var a=e.dir||e.root,c=e.base||(e.name||"")+(e.ext||"");return a?a===e.root?a+c:a+o+c:c}var posix={resolve:function o(){for(var e="",a=!1,c,j=arguments.length-1;j>=-1&&!a;j--){var d;j>=0?d=arguments[j]:(c===void 0&&(c=process$1.cwd()),d=c),assertPath(d),d.length!==0&&(e=d+"/"+e,a=d.charCodeAt(0)===47)}return e=normalizeStringPosix(e,!a),a?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function o(e){if(assertPath(e),e.length===0)return".";var a=e.charCodeAt(0)===47,c=e.charCodeAt(e.length-1)===47;return e=normalizeStringPosix(e,!a),e.length===0&&!a&&(e="."),e.length>0&&c&&(e+="/"),a?"/"+e:e},isAbsolute:function o(e){return assertPath(e),e.length>0&&e.charCodeAt(0)===47},join:function o(){if(arguments.length===0)return".";for(var e,a=0;a<arguments.length;++a){var c=arguments[a];assertPath(c),c.length>0&&(e===void 0?e=c:e+="/"+c)}return e===void 0?".":posix.normalize(e)},relative:function o(e,a){if(assertPath(e),assertPath(a),e===a||(e=posix.resolve(e),a=posix.resolve(a),e===a))return"";for(var c=1;c<e.length&&e.charCodeAt(c)===47;++c);for(var j=e.length,d=j-c,et=1;et<a.length&&a.charCodeAt(et)===47;++et);for(var at=a.length,st=at-et,ct=d<st?d:st,ot=-1,gt=0;gt<=ct;++gt){if(gt===ct){if(st>ct){if(a.charCodeAt(et+gt)===47)return a.slice(et+gt+1);if(gt===0)return a.slice(et+gt)}else d>ct&&(e.charCodeAt(c+gt)===47?ot=gt:gt===0&&(ot=0));break}var ft=e.charCodeAt(c+gt),yt=a.charCodeAt(et+gt);if(ft!==yt)break;ft===47&&(ot=gt)}var vt="";for(gt=c+ot+1;gt<=j;++gt)(gt===j||e.charCodeAt(gt)===47)&&(vt.length===0?vt+="..":vt+="/..");return vt.length>0?vt+a.slice(et+ot):(et+=ot,a.charCodeAt(et)===47&&++et,a.slice(et))},_makeLong:function o(e){return e},dirname:function o(e){if(assertPath(e),e.length===0)return".";for(var a=e.charCodeAt(0),c=a===47,j=-1,d=!0,et=e.length-1;et>=1;--et)if(a=e.charCodeAt(et),a===47){if(!d){j=et;break}}else d=!1;return j===-1?c?"/":".":c&&j===1?"//":e.slice(0,j)},basename:function o(e,a){if(a!==void 0&&typeof a!="string")throw new TypeError('"ext" argument must be a string');assertPath(e);var c=0,j=-1,d=!0,et;if(a!==void 0&&a.length>0&&a.length<=e.length){if(a.length===e.length&&a===e)return"";var at=a.length-1,st=-1;for(et=e.length-1;et>=0;--et){var ct=e.charCodeAt(et);if(ct===47){if(!d){c=et+1;break}}else st===-1&&(d=!1,st=et+1),at>=0&&(ct===a.charCodeAt(at)?--at===-1&&(j=et):(at=-1,j=st))}return c===j?j=st:j===-1&&(j=e.length),e.slice(c,j)}else{for(et=e.length-1;et>=0;--et)if(e.charCodeAt(et)===47){if(!d){c=et+1;break}}else j===-1&&(d=!1,j=et+1);return j===-1?"":e.slice(c,j)}},extname:function o(e){assertPath(e);for(var a=-1,c=0,j=-1,d=!0,et=0,at=e.length-1;at>=0;--at){var st=e.charCodeAt(at);if(st===47){if(!d){c=at+1;break}continue}j===-1&&(d=!1,j=at+1),st===46?a===-1?a=at:et!==1&&(et=1):a!==-1&&(et=-1)}return a===-1||j===-1||et===0||et===1&&a===j-1&&a===c+1?"":e.slice(a,j)},format:function o(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return _format("/",e)},parse:function o(e){assertPath(e);var a={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return a;var c=e.charCodeAt(0),j=c===47,d;j?(a.root="/",d=1):d=0;for(var et=-1,at=0,st=-1,ct=!0,ot=e.length-1,gt=0;ot>=d;--ot){if(c=e.charCodeAt(ot),c===47){if(!ct){at=ot+1;break}continue}st===-1&&(ct=!1,st=ot+1),c===46?et===-1?et=ot:gt!==1&&(gt=1):et!==-1&&(gt=-1)}return et===-1||st===-1||gt===0||gt===1&&et===st-1&&et===at+1?st!==-1&&(at===0&&j?a.base=a.name=e.slice(1,st):a.base=a.name=e.slice(at,st)):(at===0&&j?(a.name=e.slice(1,et),a.base=e.slice(1,st)):(a.name=e.slice(at,et),a.base=e.slice(at,st)),a.ext=e.slice(et,st)),at>0?a.dir=e.slice(0,at-1):j&&(a.dir="/"),a},sep:"/",delimiter:":",win32:null,posix:null};posix.posix=posix;var pathBrowserify=posix,define_process_env_default={},errors=errors$5,frames=frames_1,log$2=log$6,sasl$1=sasl$2,util$1=util_1,EndpointState=endpoint,Session=session$1,Transport=transport,fs=require$$6,os=browser,path=pathBrowserify,net$1=require$$6,tls$1=require$$6,EventEmitter$1=eventsExports.EventEmitter,AMQP_PROTOCOL_ID=0;function find_connect_config(){var o;define_process_env_default.MESSAGING_CONNECT_FILE?o=[define_process_env_default.MESSAGING_CONNECT_FILE]:o=[process$1.cwd(),path.join(os.homedir(),".config/messaging"),"/etc/messaging"].map(function(c){return path.join(c,"/connect.json")});for(var e=0;e<o.length;e++)if(fs.existsSync(o[e])){var a=JSON.parse(fs.readFileSync(o[e],"utf8"));return log$2.config("using config from %s: %j",o[e],a),a}return{}}function get_default_connect_config(){var o=find_connect_config(),e={};return o.scheme==="amqps"&&(e.transport="tls"),o.host&&(e.host=o.host),o.port==="amqp"?e.port=5672:o.port==="amqps"?e.port=5671:e.port=o.port,o.sasl&&o.sasl.enabled===!1||(o.user?e.username=o.user:e.username="anonymous",o.password&&(e.password=o.password),o.sasl_mechanisms&&(e.sasl_mechanisms=o.sasl_mechanisms)),o.tls&&(o.tls.key&&(e.key=fs.readFileSync(o.tls.key)),o.tls.cert&&(e.cert=fs.readFileSync(o.tls.cert)),o.tls.ca&&(e.ca=[fs.readFileSync(o.tls.ca)]),(o.verify===!1||o.tls.verify===!1)&&(e.rejectUnauthorized=!1)),e.transport==="tls"&&(e.servername=e.host),e}function get_socket_id(o){return o.get_id_string?o.get_id_string():o.localAddress+":"+o.localPort+" -> "+o.remoteAddress+":"+o.remotePort}function session_per_connection(o,e){var a=null;return{get_session:function(){return a||(a=o.create_session(e),a.observers.on("session_close",function(){a=null}),a.begin()),a}}}function restrict(o,e){if(o){var a=o,c;return function(j){return c!==j&&(a=o,c=j),a--?e(j):-1}}else return e}function backoff(o,e){var a=o,c;return function(j){c!==j&&(a=o,c=j);var d=a,et=a*2;return a=e>et?et:e,d}}function get_connect_fn(o){if(o.transport===void 0||o.transport==="tcp")return net$1.connect;if(o.transport==="tls"||o.transport==="ssl")return tls$1.connect;throw Error("Unrecognised transport: "+o.transport)}function connection_details(o){var e={};return e.connect=o.connect?o.connect:get_connect_fn(o),e.host=o.host?o.host:"localhost",e.port=o.port?o.port:5672,e.options=o,e}var aliases=["container_id","hostname","max_frame_size","channel_max","idle_time_out","outgoing_locales","incoming_locales","offered_capabilities","desired_capabilities","properties"];function remote_property_shortcut(o){return function(){return this.remote.open?this.remote.open[o]:void 0}}function connection_fields(o){var e={};return aliases.forEach(function(a){o[a]!==void 0&&(e[a]=o[a])}),e}function set_reconnect(o,e){if(typeof o=="boolean")if(o){var a=e.get_option("initial_reconnect_delay",100),c=e.get_option("max_reconnect_delay",6e4);e.options.reconnect=restrict(e.get_option("reconnect_limit"),backoff(a,c))}else e.options.reconnect=!1;else if(typeof o=="number"){var j=e.options.reconnect;e.options.reconnect=restrict(e.get_option("reconnect_limit"),function(){return j})}}var conn_counter=1,Connection$1=function(o,e){if(this.options={},o){for(var a in o)this.options[a]=o[a];(o.transport==="tls"||o.transport==="ssl")&&o.servername===void 0&&o.host!==void 0&&(this.options.servername=o.host),this.session_buffer_size=o.session_buffer_size}else this.options=get_default_connect_config();if(this.container=e,this.options.id||(this.options.id="connection-"+conn_counter++),this.options.container_id||(this.options.container_id=e?e.id:util$1.generate_uuid()),!this.options.connection_details){var j=this;this.options.connection_details=function(){return connection_details(j.options)}}var c=this.get_option("reconnect",!0);set_reconnect(c,this),this.registered=!1,this.state=new EndpointState,this.local_channel_map={},this.remote_channel_map={},this.local={},this.remote={},this.local.open=frames.open(connection_fields(this.options)),this.local.close=frames.close({}),this.session_policy=session_per_connection(this,this.session_buffer_size),this.amqp_transport=new Transport(this.options.id,AMQP_PROTOCOL_ID,frames.TYPE_AMQP,this),this.sasl_transport=void 0,this.transport=this.amqp_transport,this.conn_established_counter=0,this.heartbeat_out=void 0,this.heartbeat_in=void 0,this.abort_idle=void 0,this.socket_ready=!1,this.scheduled_reconnect=void 0,this.default_sender=void 0,this.closed_with_non_fatal_error=!1;var j=this;aliases.forEach(function(d){Object.defineProperty(j,d,{get:remote_property_shortcut(d)})}),Object.defineProperty(this,"error",{get:function(){return this.remote.close?this.remote.close.error:void 0}})};Connection$1.prototype=Object.create(EventEmitter$1.prototype);Connection$1.prototype.constructor=Connection$1;Connection$1.prototype.dispatch=function(o){return log$2.events("[%s] Connection got event: %s",this.options.id,o),this.listeners(o).length?(EventEmitter$1.prototype.emit.apply(this,arguments),!0):this.container?this.container.dispatch.apply(this.container,arguments):!1};Connection$1.prototype._disconnect=function(){this.state.disconnected();for(var o in this.local_channel_map)this.local_channel_map[o]._disconnect();this.socket_ready=!1};Connection$1.prototype._reconnect=function(){this.abort_idle&&(clearTimeout(this.abort_idle),this.abort_idle=void 0,this.local.close.error=void 0,this.state=new EndpointState,this.state.open()),this.state.reconnect(),this._reset_remote_state()};Connection$1.prototype._reset_remote_state=function(){this.amqp_transport=new Transport(this.options.id,AMQP_PROTOCOL_ID,frames.TYPE_AMQP,this),this.sasl_transport=void 0,this.transport=this.amqp_transport,this.remote={},this.remote_channel_map={};var o=this.local_channel_map;for(var e in o)o[e]._reconnect()};Connection$1.prototype.connect=function(){return this.is_server=!1,this.abort_idle&&(clearTimeout(this.abort_idle),this.abort_idle=void 0),this._reset_remote_state(),this._connect(this.options.connection_details(this.conn_established_counter)),this.open(),this};Connection$1.prototype.reconnect=function(){return this.scheduled_reconnect=void 0,log$2.reconnect("[%s] reconnecting...",this.options.id),this._reconnect(),this._connect(this.options.connection_details(this.conn_established_counter)),process$1.nextTick(this._process.bind(this)),this};Connection$1.prototype.set_reconnect=function(o){set_reconnect(o,this)};Connection$1.prototype._connect=function(o){return o.connect?this.init(o.connect(o.port,o.host,o.options,this.connected.bind(this))):this.init(get_connect_fn(o)(o.port,o.host,o.options,this.connected.bind(this))),this};Connection$1.prototype.accept=function(o){return this.is_server=!0,log$2.io("[%s] client accepted: %s",this.id,get_socket_id(o)),this.socket_ready=!0,this.init(o)};Connection$1.prototype.abort_socket=function(o){o===this.socket&&(this.abort_idle=void 0,log$2.io("[%s] aborting socket",this.options.id),this.socket.end(),this.socket.removeAllListeners&&(this.socket.removeAllListeners("data"),this.socket.removeAllListeners("error"),this.socket.removeAllListeners("end")),typeof this.socket.destroy=="function"&&this.socket.destroy(),this._disconnected())};Connection$1.prototype.init=function(o){if(this.socket=o,this.get_option("tcp_no_delay",!1)&&this.socket.setNoDelay&&this.socket.setNoDelay(!0),this.socket.on("data",this.input.bind(this)),this.socket.on("error",this.on_error.bind(this)),this.socket.on("end",this.eof.bind(this)),this.is_server){var e;if(this.container&&Object.getOwnPropertyNames(this.container.sasl_server_mechanisms).length&&(e=this.container.sasl_server_mechanisms),this.socket.encrypted&&this.socket.authorized&&this.get_option("enable_sasl_external",!1)&&(e=sasl$1.server_add_external(e?util$1.clone(e):{})),e)e.ANONYMOUS!==void 0&&!this.get_option("require_sasl",!1)?this.sasl_transport=new sasl$1.Selective(this,e):this.sasl_transport=new sasl$1.Server(this,e);else if(!this.get_option("disable_sasl",!1)){var a=sasl$1.server_mechanisms();a.enable_anonymous(),this.sasl_transport=new sasl$1.Selective(this,a)}}else{var c=this.get_option("sasl_mechanisms");if(!c){var j=this.get_option("username"),d=this.get_option("password"),et=this.get_option("token");j&&(c=sasl$1.client_mechanisms(),d?c.enable_plain(j,d):et?c.enable_xoauth2(j,et):c.enable_anonymous(j))}this.socket.encrypted&&this.options.cert&&this.get_option("enable_sasl_external",!1)&&(c||(c=sasl$1.client_mechanisms()),c.enable_external()),c&&(this.sasl_transport=new sasl$1.Client(this,c,this.options.sasl_init_hostname||this.options.servername||this.options.host))}return this.transport=this.sasl_transport?this.sasl_transport:this.amqp_transport,this};Connection$1.prototype.attach_sender=function(o){return this.session_policy.get_session().attach_sender(o)};Connection$1.prototype.open_sender=Connection$1.prototype.attach_sender;Connection$1.prototype.attach_receiver=function(o){return this.get_option("tcp_no_delay",!0)&&this.socket.setNoDelay&&this.socket.setNoDelay(!0),this.session_policy.get_session().attach_receiver(o)};Connection$1.prototype.open_receiver=Connection$1.prototype.attach_receiver;Connection$1.prototype.get_option=function(o,e){return this.options[o]!==void 0?this.options[o]:this.container?this.container.get_option(o,e):e};Connection$1.prototype.send=function(o){return this.default_sender===void 0&&(this.default_sender=this.open_sender({target:{}})),this.default_sender.send(o)};Connection$1.prototype.connected=function(){this.socket_ready=!0,this.conn_established_counter++,log$2.io("[%s] connected %s",this.options.id,get_socket_id(this.socket)),this.output()};Connection$1.prototype.sasl_failed=function(o,e){this.transport_error=new errors.ConnectionError(o,e||"amqp:unauthorized-access",this),this._handle_error(),this.socket.end()};Connection$1.prototype._is_fatal=function(o){var e=this.get_option("all_errors_non_fatal",!1);if(e)return!1;var a=this.get_option("non_fatal_errors",["amqp:connection:forced"]);return a.indexOf(o)<0};Connection$1.prototype._handle_error=function(){var o=this.get_error();if(o){var e=this.dispatch("connection_error",this._context({error:o}));return e=this.dispatch("connection_close",this._context({error:o}))||e,this._is_fatal(o.condition)?e||this.dispatch("error",new errors.ConnectionError(o.description,o.condition,this)):this.state.local_open&&(this.closed_with_non_fatal_error=!0),!0}else return!1};Connection$1.prototype.get_error=function(){if(this.transport_error)return this.transport_error;if(this.remote.close&&this.remote.close.error)return new errors.ConnectionError(this.remote.close.error.description,this.remote.close.error.condition,this)};Connection$1.prototype._get_peer_details=function(){var o="";return this.remote.open&&this.remote.open.container&&(o+=this.remote.open.container+" "),this.remote.open&&this.remote.open.properties&&(o+=JSON.stringify(this.remote.open.properties)),o};Connection$1.prototype.output=function(){try{this.socket&&this.socket_ready&&(this.heartbeat_out&&clearTimeout(this.heartbeat_out),this.transport.write(this.socket),(this.is_closed()&&this.state.has_settled()||this.abort_idle||this.transport_error)&&!this.transport.has_writes_pending()?this.socket.end():this.is_open()&&this.remote.open.idle_time_out&&(this.heartbeat_out=setTimeout(this._write_frame.bind(this),this.remote.open.idle_time_out/2)),this.local.open.idle_time_out&&this.heartbeat_in===void 0&&(this.heartbeat_in=setTimeout(this.idle.bind(this),this.local.open.idle_time_out)))}catch(o){this.saved_error=o,o.name==="ProtocolError"?(console.error("["+this.options.id+"] error on write: "+o+" "+this._get_peer_details()+" "+o.name),this.dispatch("protocol_error",o)||console.error("["+this.options.id+"] error on write: "+o+" "+this._get_peer_details())):this.dispatch("error",o),this.socket.end()}};function byte_to_hex(o){return o<16?"0x0"+Number(o).toString(16):"0x"+Number(o).toString(16)}function buffer_to_hex(o){for(var e=[],a=0;a<o.length;a++)e.push(byte_to_hex(o[a]));return e.join(",")}Connection$1.prototype.input=function(o){var e;try{if(this.heartbeat_in&&clearTimeout(this.heartbeat_in),log$2.io("[%s] read %d bytes",this.options.id,o.length),this.frame_size)if(this.received_bytes+=o.length,this.chunks.push(o),this.frame_size<=this.received_bytes)e=Buffer.concat(this.chunks,this.received_bytes),this.chunks=null,this.frame_size=void 0;else{log$2.io("[%s] pushed %d bytes",this.options.id,o.length);return}else this.previous_input?(e=Buffer.concat([this.previous_input,o]),this.previous_input=null):e=o;const a=this.transport.read(e,this);if(a<e.length){const c=e.slice(a);this.frame_size=this.transport.peek_size(c),this.frame_size?(this.chunks=[c],this.received_bytes=c.length,log$2.io("[%s] waiting frame_size %s",this.options.id,this.frame_size)):this.previous_input=c}this.local.open.idle_time_out&&(this.heartbeat_in=setTimeout(this.idle.bind(this),this.local.open.idle_time_out)),this.transport.has_writes_pending()?this.output():this.is_closed()&&this.state.has_settled()?this.socket.end():this.is_open()&&this.remote.open.idle_time_out&&!this.heartbeat_out&&(this.heartbeat_out=setTimeout(this._write_frame.bind(this),this.remote.open.idle_time_out/2))}catch(a){this.saved_error=a,a.name==="ProtocolError"?this.dispatch("protocol_error",a)||console.error("["+this.options.id+"] error on read: "+a+" "+this._get_peer_details()+" (buffer:"+buffer_to_hex(e)+")"):this.dispatch("error",a),this.socket.end()}};Connection$1.prototype.idle=function(){this.is_closed()||(this.closed_with_non_fatal_error=!0,this.local.close.error={condition:"amqp:resource-limit-exceeded",description:"max idle time exceeded"},this.close(),this.abort_idle=setTimeout(this.abort_socket.bind(this,this.socket),1e3))};Connection$1.prototype.on_error=function(o){this._disconnected(o)};Connection$1.prototype.eof=function(o){var e=o||this.saved_error;this.saved_error=void 0,this._disconnected(e)};Connection$1.prototype._disconnected=function(o){this.heartbeat_out&&(clearTimeout(this.heartbeat_out),this.heartbeat_out=void 0),this.heartbeat_in&&(clearTimeout(this.heartbeat_in),this.heartbeat_in=void 0),this.abort_idle&&(clearTimeout(this.abort_idle),this.abort_idle=void 0);var e=this.closed_with_non_fatal_error;if(this.closed_with_non_fatal_error&&(this.closed_with_non_fatal_error=!1,this.options.reconnect&&this.open()),(!this.is_closed()||e)&&this.scheduled_reconnect===void 0){this._disconnect();var a={};if(o&&(a.error=o),!this.is_server&&!this.transport_error&&this.options.reconnect){var c=this.options.reconnect(this.conn_established_counter);c>=0?(log$2.reconnect("[%s] Scheduled reconnect in "+c+"ms",this.options.id),this.scheduled_reconnect=setTimeout(this.reconnect.bind(this),c),a.reconnecting=!0):a.reconnecting=!1}this.dispatch("disconnected",this._context(a))||console.warn("["+this.options.id+"] disconnected %s",a.error||"")}};Connection$1.prototype.open=function(){this.state.open()&&this._register()};Connection$1.prototype.close=function(o){o&&(this.local.close.error=o),this.state.close()&&this._register()};Connection$1.prototype.is_open=function(){return this.state.is_open()};Connection$1.prototype.is_remote_open=function(){return this.state.remote_open};Connection$1.prototype.is_closed=function(){return this.state.is_closed()};Connection$1.prototype.create_session=function(o){for(var e=0;this.local_channel_map[e];)e++;var a=new Session(this,e,o);return this.local_channel_map[e]=a,a};Connection$1.prototype.find_sender=function(o){return this.find_link(util$1.sender_filter(o))};Connection$1.prototype.find_receiver=function(o){return this.find_link(util$1.receiver_filter(o))};Connection$1.prototype.find_link=function(o){for(var e in this.local_channel_map){var a=this.local_channel_map[e],c=a.find_link(o);if(c)return c}};Connection$1.prototype.each_receiver=function(o,e){this.each_link(o,util$1.receiver_filter(e))};Connection$1.prototype.each_sender=function(o,e){this.each_link(o,util$1.sender_filter(e))};Connection$1.prototype.each_link=function(o,e){for(var a in this.local_channel_map){var c=this.local_channel_map[a];c.each_link(o,e)}};Connection$1.prototype.on_open=function(o){if(this.state.remote_opened())this.remote.open=o.performative,this.open(),this.dispatch("connection_open",this._context());else throw new errors.ProtocolError("Open already received")};Connection$1.prototype.on_close=function(o){if(this.state.remote_closed()){this.remote.close=o.performative,this.remote.close.error?this._handle_error():this.dispatch("connection_close",this._context()),this.heartbeat_out&&clearTimeout(this.heartbeat_out);var e=this;process$1.nextTick(function(){e.close()})}else throw new errors.ProtocolError("Close already received")};Connection$1.prototype._register=function(){this.registered||(this.registered=!0,process$1.nextTick(this._process.bind(this)))};Connection$1.prototype._process=function(){this.registered=!1;do{this.state.need_open()&&this._write_open();var o=this.local_channel_map;for(var e in o)o[e]._process();this.state.need_close()&&this._write_close()}while(!this.state.has_settled())};Connection$1.prototype._write_frame=function(o,e,a){this.amqp_transport.encode(frames.amqp_frame(o,e,a)),this.output()};Connection$1.prototype._write_open=function(){this._write_frame(0,this.local.open)};Connection$1.prototype._write_close=function(){this._write_frame(0,this.local.close),this.local.close.error=void 0};Connection$1.prototype.on_begin=function(o){var e;if(o.performative.remote_channel===null||o.performative.remote_channel===void 0)e=this.create_session(this.session_buffer_size),e.local.begin.remote_channel=o.channel;else if(e=this.local_channel_map[o.performative.remote_channel],!e)throw new errors.ProtocolError("Invalid value for remote channel "+o.performative.remote_channel);e.on_begin(o),this.remote_channel_map[o.channel]=e};Connection$1.prototype.get_peer_certificate=function(){if(this.socket&&this.socket.getPeerCertificate)return this.socket.getPeerCertificate()};Connection$1.prototype.get_tls_socket=function(){if(this.socket&&(this.options.transport==="tls"||this.options.transport==="ssl"))return this.socket};Connection$1.prototype._context=function(o){var e=o||{};return e.connection=this,this.container&&(e.container=this.container),e};Connection$1.prototype.remove_session=function(o){this.remote_channel_map[o.remote.channel]===o&&delete this.remote_channel_map[o.remote.channel],this.local_channel_map[o.local.channel]===o&&delete this.local_channel_map[o.local.channel]};Connection$1.prototype.remove_all_sessions=function(){clearObject(this.remote_channel_map),clearObject(this.local_channel_map)};function clearObject(o){for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&delete o[e]}function delegate_to_session(o){Connection$1.prototype["on_"+o]=function(e){var a=this.remote_channel_map[e.channel];if(!a)throw new errors.ProtocolError(o+" received on invalid channel "+e.channel);a["on_"+o](e)}}delegate_to_session("end");delegate_to_session("attach");delegate_to_session("detach");delegate_to_session("transfer");delegate_to_session("disposition");delegate_to_session("flow");var connection$1=Connection$1,ReceiverEvents;(function(o){o.message="message",o.receiverOpen="receiver_open",o.receiverDrained="receiver_drained",o.receiverFlow="receiver_flow",o.receiverError="receiver_error",o.receiverClose="receiver_close",o.settled="settled"})(ReceiverEvents||(ReceiverEvents={}));var SenderEvents;(function(o){o.sendable="sendable",o.senderOpen="sender_open",o.senderDraining="sender_draining",o.senderFlow="sender_flow",o.senderError="sender_error",o.senderClose="sender_close",o.accepted="accepted",o.released="released",o.rejected="rejected",o.modified="modified",o.settled="settled"})(SenderEvents||(SenderEvents={}));var SessionEvents;(function(o){o.sessionOpen="session_open",o.sessionError="session_error",o.sessionClose="session_close",o.settled="settled"})(SessionEvents||(SessionEvents={}));var ConnectionEvents;(function(o){o.connectionOpen="connection_open",o.connectionClose="connection_close",o.connectionError="connection_error",o.protocolError="protocol_error",o.error="error",o.disconnected="disconnected",o.settled="settled"})(ConnectionEvents||(ConnectionEvents={}));var eventTypes$1={ReceiverEvents,SenderEvents,SessionEvents,ConnectionEvents},ws$1,hasRequiredWs;function requireWs(){if(hasRequiredWs)return ws$1;hasRequiredWs=1;function o(j){return j}function e(j){return j instanceof ArrayBuffer?Buffer.from(new Uint8Array(j)):Buffer.from(j)}function a(j){return new Uint8Array(j)}function c(j){var d=o,et=o;return j.binaryType&&(j.binaryType="arraybuffer",d=e,et=a),{end:function(){j.close()},write:function(at){try{j.send(et(at),{binary:!0})}catch(st){j.onerror(st)}},on:function(at,st){at==="data"?j.onmessage=function(ct){st(d(ct.data))}:at==="end"?j.onclose=st:at==="error"?j.onerror=st:console.error("ERROR: Attempt to set unrecognised handler on websocket wrapper: "+at)},get_id_string:function(){return j.url}}}return ws$1={connect:function(j){return function(d,et,at){return function(){return{connect:function(st,ct,ot,gt){var ft=new j(d,et,at);return ft.onopen=gt,c(ft)}}}}},wrap:c},ws$1}var filter,hasRequiredFilter;function requireFilter(){if(hasRequiredFilter)return filter;hasRequiredFilter=1;var o=requireTypes();return filter={selector:function(e){return{"jms-selector":o.wrap_described(e,77567109365764)}}},filter}var Connection=connection$1,log$1=log$6,sasl=sasl$2,util=util_1,eventTypes=eventTypes$1,net=require$$6,tls=require$$6,EventEmitter=eventsExports.EventEmitter,Container=function(o){this.options=o?Object.create(o):{},this.options.id||(this.options.id=util.generate_uuid()),this.id=this.options.id,this.sasl_server_mechanisms=sasl.server_mechanisms()};Container.prototype=Object.create(EventEmitter.prototype);Container.prototype.constructor=Container;Container.prototype.dispatch=function(o){return log$1.events("[%s] Container got event: "+o,this.id),EventEmitter.prototype.emit.apply(this,arguments),!!this.listeners(o).length};Container.prototype.connect=function(o){return new Connection(o,this).connect()};Container.prototype.create_connection=function(o){return new Connection(o,this)};Container.prototype.listen=function(o){var e=this,a;if(o.transport===void 0||o.transport==="tcp")a=net.createServer(o),a.on("connection",function(c){new Connection(o,e).accept(c)});else if(o.transport==="tls"||o.transport==="ssl")a=tls.createServer(o),a.on("secureConnection",function(c){new Connection(o,e).accept(c)});else throw Error("Unrecognised transport: "+o.transport);return process$1.version.match(/v0\.10\.\d+/)?a.listen(o.port,o.host):a.listen(o),a};Container.prototype.create_container=function(o){return new Container(o)};Container.prototype.get_option=function(o,e){return this.options[o]!==void 0?this.options[o]:e};Container.prototype.generate_uuid=util.generate_uuid;Container.prototype.string_to_uuid=util.string_to_uuid;Container.prototype.uuid_to_string=util.uuid_to_string;var ws=requireWs();Container.prototype.websocket_accept=function(o,e){new Connection(e,this).accept(ws.wrap(o))};Container.prototype.websocket_connect=ws.connect;Container.prototype.filter=requireFilter();Container.prototype.types=requireTypes();Container.prototype.message=requireMessage();Container.prototype.sasl=sasl;Container.prototype.ReceiverEvents=eventTypes.ReceiverEvents;Container.prototype.SenderEvents=eventTypes.SenderEvents;Container.prototype.SessionEvents=eventTypes.SessionEvents;Container.prototype.ConnectionEvents=eventTypes.ConnectionEvents;var container$1=new Container,eventContext={},session={},extendStatics=function(o,e){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var j in c)Object.prototype.hasOwnProperty.call(c,j)&&(a[j]=c[j])},extendStatics(o,e)};function __extends(o,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");extendStatics(o,e);function a(){this.constructor=o}o.prototype=e===null?Object.create(e):(a.prototype=e.prototype,new a)}var __assign=function(){return __assign=Object.assign||function(e){for(var a,c=1,j=arguments.length;c<j;c++){a=arguments[c];for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&(e[d]=a[d])}return e},__assign.apply(this,arguments)};function __rest(o,e){var a={};for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&e.indexOf(c)<0&&(a[c]=o[c]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var j=0,c=Object.getOwnPropertySymbols(o);j<c.length;j++)e.indexOf(c[j])<0&&Object.prototype.propertyIsEnumerable.call(o,c[j])&&(a[c[j]]=o[c[j]]);return a}function __decorate(o,e,a,c){var j=arguments.length,d=j<3?e:c===null?c=Object.getOwnPropertyDescriptor(e,a):c,et;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(o,e,a,c);else for(var at=o.length-1;at>=0;at--)(et=o[at])&&(d=(j<3?et(d):j>3?et(e,a,d):et(e,a))||d);return j>3&&d&&Object.defineProperty(e,a,d),d}function __param(o,e){return function(a,c){e(a,c,o)}}function __esDecorate(o,e,a,c,j,d){function et(ht){if(ht!==void 0&&typeof ht!="function")throw new TypeError("Function expected");return ht}for(var at=c.kind,st=at==="getter"?"get":at==="setter"?"set":"value",ct=!e&&o?c.static?o:o.prototype:null,ot=e||(ct?Object.getOwnPropertyDescriptor(ct,c.name):{}),gt,ft=!1,yt=a.length-1;yt>=0;yt--){var vt={};for(var rt in c)vt[rt]=rt==="access"?{}:c[rt];for(var rt in c.access)vt.access[rt]=c.access[rt];vt.addInitializer=function(ht){if(ft)throw new TypeError("Cannot add initializers after decoration has completed");d.push(et(ht||null))};var bt=(0,a[yt])(at==="accessor"?{get:ot.get,set:ot.set}:ot[st],vt);if(at==="accessor"){if(bt===void 0)continue;if(bt===null||typeof bt!="object")throw new TypeError("Object expected");(gt=et(bt.get))&&(ot.get=gt),(gt=et(bt.set))&&(ot.set=gt),(gt=et(bt.init))&&j.unshift(gt)}else(gt=et(bt))&&(at==="field"?j.unshift(gt):ot[st]=gt)}ct&&Object.defineProperty(ct,c.name,ot),ft=!0}function __runInitializers(o,e,a){for(var c=arguments.length>2,j=0;j<e.length;j++)a=c?e[j].call(o,a):e[j].call(o);return c?a:void 0}function __propKey(o){return typeof o=="symbol"?o:"".concat(o)}function __setFunctionName(o,e,a){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(o,"name",{configurable:!0,value:a?"".concat(a," ",e):e})}function __metadata(o,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(o,e)}function __awaiter(o,e,a,c){function j(d){return d instanceof a?d:new a(function(et){et(d)})}return new(a||(a=Promise))(function(d,et){function at(ot){try{ct(c.next(ot))}catch(gt){et(gt)}}function st(ot){try{ct(c.throw(ot))}catch(gt){et(gt)}}function ct(ot){ot.done?d(ot.value):j(ot.value).then(at,st)}ct((c=c.apply(o,e||[])).next())})}function __generator(o,e){var a={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},c,j,d,et=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return et.next=at(0),et.throw=at(1),et.return=at(2),typeof Symbol=="function"&&(et[Symbol.iterator]=function(){return this}),et;function at(ct){return function(ot){return st([ct,ot])}}function st(ct){if(c)throw new TypeError("Generator is already executing.");for(;et&&(et=0,ct[0]&&(a=0)),a;)try{if(c=1,j&&(d=ct[0]&2?j.return:ct[0]?j.throw||((d=j.return)&&d.call(j),0):j.next)&&!(d=d.call(j,ct[1])).done)return d;switch(j=0,d&&(ct=[ct[0]&2,d.value]),ct[0]){case 0:case 1:d=ct;break;case 4:return a.label++,{value:ct[1],done:!1};case 5:a.label++,j=ct[1],ct=[0];continue;case 7:ct=a.ops.pop(),a.trys.pop();continue;default:if(d=a.trys,!(d=d.length>0&&d[d.length-1])&&(ct[0]===6||ct[0]===2)){a=0;continue}if(ct[0]===3&&(!d||ct[1]>d[0]&&ct[1]<d[3])){a.label=ct[1];break}if(ct[0]===6&&a.label<d[1]){a.label=d[1],d=ct;break}if(d&&a.label<d[2]){a.label=d[2],a.ops.push(ct);break}d[2]&&a.ops.pop(),a.trys.pop();continue}ct=e.call(o,a)}catch(ot){ct=[6,ot],j=0}finally{c=d=0}if(ct[0]&5)throw ct[1];return{value:ct[0]?ct[1]:void 0,done:!0}}}var __createBinding=Object.create?function(o,e,a,c){c===void 0&&(c=a);var j=Object.getOwnPropertyDescriptor(e,a);(!j||("get"in j?!e.__esModule:j.writable||j.configurable))&&(j={enumerable:!0,get:function(){return e[a]}}),Object.defineProperty(o,c,j)}:function(o,e,a,c){c===void 0&&(c=a),o[c]=e[a]};function __exportStar(o,e){for(var a in o)a!=="default"&&!Object.prototype.hasOwnProperty.call(e,a)&&__createBinding(e,o,a)}function __values(o){var e=typeof Symbol=="function"&&Symbol.iterator,a=e&&o[e],c=0;if(a)return a.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&c>=o.length&&(o=void 0),{value:o&&o[c++],done:!o}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(o,e){var a=typeof Symbol=="function"&&o[Symbol.iterator];if(!a)return o;var c=a.call(o),j,d=[],et;try{for(;(e===void 0||e-- >0)&&!(j=c.next()).done;)d.push(j.value)}catch(at){et={error:at}}finally{try{j&&!j.done&&(a=c.return)&&a.call(c)}finally{if(et)throw et.error}}return d}function __spread(){for(var o=[],e=0;e<arguments.length;e++)o=o.concat(__read(arguments[e]));return o}function __spreadArrays(){for(var o=0,e=0,a=arguments.length;e<a;e++)o+=arguments[e].length;for(var c=Array(o),j=0,e=0;e<a;e++)for(var d=arguments[e],et=0,at=d.length;et<at;et++,j++)c[j]=d[et];return c}function __spreadArray(o,e,a){if(a||arguments.length===2)for(var c=0,j=e.length,d;c<j;c++)(d||!(c in e))&&(d||(d=Array.prototype.slice.call(e,0,c)),d[c]=e[c]);return o.concat(d||Array.prototype.slice.call(e))}function __await(o){return this instanceof __await?(this.v=o,this):new __await(o)}function __asyncGenerator(o,e,a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var c=a.apply(o,e||[]),j,d=[];return j=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),at("next"),at("throw"),at("return",et),j[Symbol.asyncIterator]=function(){return this},j;function et(yt){return function(vt){return Promise.resolve(vt).then(yt,gt)}}function at(yt,vt){c[yt]&&(j[yt]=function(rt){return new Promise(function(bt,ht){d.push([yt,rt,bt,ht])>1||st(yt,rt)})},vt&&(j[yt]=vt(j[yt])))}function st(yt,vt){try{ct(c[yt](vt))}catch(rt){ft(d[0][3],rt)}}function ct(yt){yt.value instanceof __await?Promise.resolve(yt.value.v).then(ot,gt):ft(d[0][2],yt)}function ot(yt){st("next",yt)}function gt(yt){st("throw",yt)}function ft(yt,vt){yt(vt),d.shift(),d.length&&st(d[0][0],d[0][1])}}function __asyncDelegator(o){var e,a;return e={},c("next"),c("throw",function(j){throw j}),c("return"),e[Symbol.iterator]=function(){return this},e;function c(j,d){e[j]=o[j]?function(et){return(a=!a)?{value:__await(o[j](et)),done:!1}:d?d(et):et}:d}}function __asyncValues(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=o[Symbol.asyncIterator],a;return e?e.call(o):(o=typeof __values=="function"?__values(o):o[Symbol.iterator](),a={},c("next"),c("throw"),c("return"),a[Symbol.asyncIterator]=function(){return this},a);function c(d){a[d]=o[d]&&function(et){return new Promise(function(at,st){et=o[d](et),j(at,st,et.done,et.value)})}}function j(d,et,at,st){Promise.resolve(st).then(function(ct){d({value:ct,done:at})},et)}}function __makeTemplateObject(o,e){return Object.defineProperty?Object.defineProperty(o,"raw",{value:e}):o.raw=e,o}var __setModuleDefault=Object.create?function(o,e){Object.defineProperty(o,"default",{enumerable:!0,value:e})}:function(o,e){o.default=e};function __importStar(o){if(o&&o.__esModule)return o;var e={};if(o!=null)for(var a in o)a!=="default"&&Object.prototype.hasOwnProperty.call(o,a)&&__createBinding(e,o,a);return __setModuleDefault(e,o),e}function __importDefault(o){return o&&o.__esModule?o:{default:o}}function __classPrivateFieldGet(o,e,a,c){if(a==="a"&&!c)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?o!==e||!c:!e.has(o))throw new TypeError("Cannot read private member from an object whose class did not declare it");return a==="m"?c:a==="a"?c.call(o):c?c.value:e.get(o)}function __classPrivateFieldSet(o,e,a,c,j){if(c==="m")throw new TypeError("Private method is not writable");if(c==="a"&&!j)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?o!==e||!j:!e.has(o))throw new TypeError("Cannot write private member to an object whose class did not declare it");return c==="a"?j.call(o,a):j?j.value=a:e.set(o,a),a}function __classPrivateFieldIn(o,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof o=="function"?e===o:o.has(e)}function __addDisposableResource(o,e,a){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var c,j;if(a){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");c=e[Symbol.asyncDispose]}if(c===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");c=e[Symbol.dispose],a&&(j=c)}if(typeof c!="function")throw new TypeError("Object not disposable.");j&&(c=function(){try{j.call(this)}catch(d){return Promise.reject(d)}}),o.stack.push({value:e,dispose:c,async:a})}else a&&o.stack.push({async:!0});return e}var _SuppressedError=typeof SuppressedError=="function"?SuppressedError:function(o,e,a){var c=new Error(a);return c.name="SuppressedError",c.error=o,c.suppressed=e,c};function __disposeResources(o){function e(d){o.error=o.hasError?new _SuppressedError(d,o.error,"An error was suppressed during disposal."):d,o.hasError=!0}var a,c=0;function j(){for(;a=o.stack.pop();)try{if(!a.async&&c===1)return c=0,o.stack.push(a),Promise.resolve().then(j);if(a.dispose){var d=a.dispose.call(a.value);if(a.async)return c|=2,Promise.resolve(d).then(j,function(et){return e(et),j()})}else c|=1}catch(et){e(et)}if(c===1)return o.hasError?Promise.reject(o.error):Promise.resolve();if(o.hasError)throw o.error}return j()}function __rewriteRelativeImportExtension(o,e){return typeof o=="string"&&/^\.\.?\//.test(o)?o.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(a,c,j,d,et){return c?e?".jsx":".js":j&&(!d||!et)?a:j+d+"."+et.toLowerCase()+"js"}):o}const tslib_es6={__extends,__assign,__rest,__decorate,__param,__esDecorate,__runInitializers,__propKey,__setFunctionName,__metadata,__awaiter,__generator,__createBinding,__exportStar,__values,__read,__spread,__spreadArrays,__spreadArray,__await,__asyncGenerator,__asyncDelegator,__asyncValues,__makeTemplateObject,__importStar,__importDefault,__classPrivateFieldGet,__classPrivateFieldSet,__classPrivateFieldIn,__addDisposableResource,__disposeResources,__rewriteRelativeImportExtension},tslib_es6$1=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource,get __assign(){return __assign},__asyncDelegator,__asyncGenerator,__asyncValues,__await,__awaiter,__classPrivateFieldGet,__classPrivateFieldIn,__classPrivateFieldSet,__createBinding,__decorate,__disposeResources,__esDecorate,__exportStar,__extends,__generator,__importDefault,__importStar,__makeTemplateObject,__metadata,__param,__propKey,__read,__rest,__rewriteRelativeImportExtension,__runInitializers,__setFunctionName,__spread,__spreadArray,__spreadArrays,__values,default:tslib_es6},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(tslib_es6$1);var log={};Object.defineProperty(log,"__esModule",{value:!0});log.contextTranslator=log.eventHandler=log.error=log.receiver=log.sender=log.session=log.connection=log.container=void 0;const debugModule=browserExports;log.container=debugModule("rhea-promise:container");log.connection=debugModule("rhea-promise:connection");log.session=debugModule("rhea-promise:session");log.sender=debugModule("rhea-promise:sender");log.receiver=debugModule("rhea-promise:receiver");log.error=debugModule("rhea-promise:error");log.eventHandler=debugModule("rhea-promise:eventhandler");log.contextTranslator=debugModule("rhea-promise:translate");var receiver={},link={},utils={},hasRequiredUtils;function requireUtils(){return hasRequiredUtils||(hasRequiredUtils=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.createAbortError=o.abortErrorName=o.emitEvent=o.parseConnectionString=o.delay=o.isAmqpError=o.messageHeader=o.messageProperties=o.AmqpResponseStatusCode=void 0;const e=log,a=requireEventContext();(function(st){st[st.Continue=100]="Continue",st[st.SwitchingProtocols=101]="SwitchingProtocols",st[st.OK=200]="OK",st[st.Created=201]="Created",st[st.Accepted=202]="Accepted",st[st.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",st[st.NoContent=204]="NoContent",st[st.ResetContent=205]="ResetContent",st[st.PartialContent=206]="PartialContent",st[st.Ambiguous=300]="Ambiguous",st[st.MultipleChoices=300]="MultipleChoices",st[st.Moved=301]="Moved",st[st.MovedPermanently=301]="MovedPermanently",st[st.Found=302]="Found",st[st.Redirect=302]="Redirect",st[st.RedirectMethod=303]="RedirectMethod",st[st.SeeOther=303]="SeeOther",st[st.NotModified=304]="NotModified",st[st.UseProxy=305]="UseProxy",st[st.Unused=306]="Unused",st[st.RedirectKeepVerb=307]="RedirectKeepVerb",st[st.TemporaryRedirect=307]="TemporaryRedirect",st[st.BadRequest=400]="BadRequest",st[st.Unauthorized=401]="Unauthorized",st[st.PaymentRequired=402]="PaymentRequired",st[st.Forbidden=403]="Forbidden",st[st.NotFound=404]="NotFound",st[st.MethodNotAllowed=405]="MethodNotAllowed",st[st.NotAcceptable=406]="NotAcceptable",st[st.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",st[st.RequestTimeout=408]="RequestTimeout",st[st.Conflict=409]="Conflict",st[st.Gone=410]="Gone",st[st.LengthRequired=411]="LengthRequired",st[st.PreconditionFailed=412]="PreconditionFailed",st[st.RequestEntityTooLarge=413]="RequestEntityTooLarge",st[st.RequestUriTooLong=414]="RequestUriTooLong",st[st.UnsupportedMediaType=415]="UnsupportedMediaType",st[st.RequestedRangeNotSatisfiable=416]="RequestedRangeNotSatisfiable",st[st.ExpectationFailed=417]="ExpectationFailed",st[st.UpgradeRequired=426]="UpgradeRequired",st[st.InternalServerError=500]="InternalServerError",st[st.NotImplemented=501]="NotImplemented",st[st.BadGateway=502]="BadGateway",st[st.ServiceUnavailable=503]="ServiceUnavailable",st[st.GatewayTimeout=504]="GatewayTimeout",st[st.HttpVersionNotSupported=505]="HttpVersionNotSupported"})(o.AmqpResponseStatusCode||(o.AmqpResponseStatusCode={})),o.messageProperties=["message_id","reply_to","to","correlation_id","content_type","absolute_expiry_time","group_id","group_sequence","reply_to_group_id","content_encoding","creation_time","subject","user_id"],o.messageHeader=["first_acquirer","delivery_count","ttl","durable","priority"];function c(st){if(!st||typeof st!="object")throw new Error("err is a required parameter and must be of type 'object'.");let ct=!1;return(st.condition&&typeof st.condition=="string"&&st.description&&typeof st.description=="string"||st.value&&Array.isArray(st.value)||st.constructor&&st.constructor.name==="c")&&(ct=!0),ct}o.isAmqpError=c;function j(st,ct){return new Promise(ot=>setTimeout(()=>ot(ct),st))}o.delay=j;function d(st,ct){ct||(ct={});const ot=ct.entitySeperator||";",gt=ct.keyValueSeparator||"=";return st.split(ot).reduce((ft,yt)=>{const vt=yt.indexOf(gt);return Object.assign(Object.assign({},ft),{[yt.substring(0,vt)]:yt.substring(vt+1)})},{})}o.parseConnectionString=d;function et(st){const ct=()=>{const ot=st.emitter&&(st.emitter.id||st.emitter.name);e[st.emitterType]("[%s] %s '%s' got event: '%s'. Re-emitting the translated context.",st.connectionId,st.emitterType,ot,st.eventName),st.emitter.emit(st.eventName,a.EventContext.translate(st.rheaContext,st.emitter,st.eventName))};st.eventName.indexOf("error")!==-1&&st.emitter.actionInitiated>0?(e[st.emitterType]("[%s] %s got event: '%s'. Will re-emit in the next tick, since this happened before the promise for create/close was resolved.",st.connectionId,st.emitterType,st.eventName),setTimeout(ct)):ct()}o.emitEvent=et,o.abortErrorName="AbortError";function at(){const st=new Error("The operation was aborted.");return st.name=o.abortErrorName,st}o.createAbortError=at}(utils)),utils}var entity={};Object.defineProperty(entity,"__esModule",{value:!0});entity.Entity=void 0;const events_1=eventsExports;class Entity extends events_1.EventEmitter{constructor(){super(),this.actionInitiated=0}}entity.Entity=Entity;var errorDefinitions={};Object.defineProperty(errorDefinitions,"__esModule",{value:!0});errorDefinitions.SendOperationFailedError=errorDefinitions.InsufficientCreditError=errorDefinitions.OperationTimeoutError=void 0;class OperationTimeoutError extends Error{constructor(e){super(e),this.name="OperationTimeoutError"}}errorDefinitions.OperationTimeoutError=OperationTimeoutError;class InsufficientCreditError extends Error{constructor(e){super(e),this.name="InsufficientCreditError"}}errorDefinitions.InsufficientCreditError=InsufficientCreditError;class SendOperationFailedError extends Error{constructor(e,a,c){super(e),this.message=e,this.code=a,this.innerError=c,this.name="SendOperationFailedError",this.code=a,this.innerError=c}}errorDefinitions.SendOperationFailedError=SendOperationFailedError;var hasRequiredLink;function requireLink(){return hasRequiredLink||(hasRequiredLink=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Link=o.LinkType=void 0;const e=require$$0,a=log,c=container$1,j=requireUtils(),d=entity,et=errorDefinitions;var at;(function(ct){ct.sender="sender",ct.receiver="receiver"})(at=o.LinkType||(o.LinkType={}));class st extends d.Entity{constructor(ot,gt,ft,yt){super(),this.type=ot,this._session=gt,this._link=ft,this.linkOptions=yt,this._initializeEventListeners()}get name(){return this._link.name}get error(){return this._link.error}get properties(){return this._link.properties}get sendSettleMode(){return this._link.snd_settle_mode}get receiveSettleMode(){return this._link.rcv_settle_mode}get source(){return this._link.source}set source(ot){this._link.set_source(ot)}get target(){return this._link.target}set target(ot){this._link.set_source(ot)}get maxMessageSize(){return this._link.max_message_size}get offeredCapabilities(){return this._link.offered_capabilities}get desiredCapabilities(){return this._link.desired_capabilities}get address(){return this.source.address}get credit(){return this._link.credit}get session(){return this._session}get connection(){return this._session.connection}isOpen(){let ot=!1;return this._session.isOpen()&&this._link.is_open()&&(ot=!0),ot}isRemoteOpen(){return this._link.is_remote_open()}hasCredit(){return this._link.has_credit()}isSender(){return this._link.is_sender()}isReceiver(){return this._link.is_receiver()}isClosed(){return this._link.is_closed()}isItselfClosed(){return this._link.is_itself_closed()}isSessionClosed(){return this._session.isClosed()}isSessionItselfClosed(){return this._session.isItselfClosed()}remove(){this._link&&(this.removeAllListeners(),this._link.removeAllListeners(),this._link.remove()),this._session&&this._session.remove()}close(ot){return e.__awaiter(this,void 0,void 0,function*(){ot||(ot={}),ot.closeSession==null&&(ot.closeSession=!0);const gt=new Promise((ft,yt)=>{if(a.error("[%s] The %s '%s' on amqp session '%s' is open ? -> %s",this.connection.id,this.type,this.name,this.session.id,this.isOpen()),this.isOpen()){const vt=this.type===at.sender?c.SenderEvents.senderError:c.ReceiverEvents.receiverError,rt=this.type===at.sender?c.SenderEvents.senderClose:c.ReceiverEvents.receiverClose,bt=()=>{clearTimeout(dt),this.actionInitiated--,this._link.removeListener(vt,wt),this._link.removeListener(rt,ht),this._link.connection.removeListener(c.ConnectionEvents.disconnected,At)},ht=Et=>(bt(),a[this.type]("[%s] Resolving the promise as the %s '%s' on amqp session '%s' has been closed.",this.connection.id,this.type,this.name,this.session.id),ft()),wt=Et=>{bt();let Rt=Et.session.error;return this.type===at.sender&&Et.sender&&Et.sender.error?Rt=Et.sender.error:this.type===at.receiver&&Et.receiver&&Et.receiver.error&&(Rt=Et.receiver.error),a.error("[%s] Error occurred while closing %s '%s' on amqp session '%s': %O.",this.connection.id,this.type,this.name,this.session.id,Rt),yt(Rt)},At=Et=>{bt();const Rt=Et.connection&&Et.connection.error?Et.connection.error:Et.error;a.error("[%s] Connection got disconnected while closing amqp %s '%s' on amqp session '%s': %O.",this.connection.id,this.type,this.name,this.session.id,Rt)},Ct=()=>{bt();const Et=`Unable to close the ${this.type} '${this.name}' on amqp session '${this.session.id}' due to operation timeout.`;return a.error("[%s] %s",this.connection.id,Et),yt(new et.OperationTimeoutError(Et))};this._link.once(rt,ht),this._link.once(vt,wt),this._link.connection.once(c.ConnectionEvents.disconnected,At);const dt=setTimeout(Ct,this.connection.options.operationTimeoutInSeconds*1e3);this._link.close(),this.actionInitiated++}else return ft()});try{yield gt}finally{this.removeAllListeners()}if(ot.closeSession)return a[this.type]("[%s] %s '%s' has been closed, now closing it's amqp session '%s'.",this.connection.id,this.type,this.name,this.session.id),this._session.close()})}_initializeEventListeners(){const ot=this.type===at.sender?c.SenderEvents:c.ReceiverEvents;for(const gt of Object.keys(ot))this._link.on(ot[gt],ft=>{const yt={rheaContext:ft,emitter:this,eventName:ot[gt],emitterType:this.type,connectionId:this.connection.id};(0,j.emitEvent)(yt)});typeof this._link.eventNames=="function"&&a.eventHandler("[%s] rhea-promise '%s' object is listening for events: %o emitted by rhea's '%s' object.",this.connection.id,this.type,this._link.eventNames(),this.type),typeof this._link.listenerCount=="function"&&a.eventHandler("[%s] ListenerCount for event '%s_error' on rhea's '%s' object is: %d.",this.connection.id,this.type,this.type,this._link.listenerCount(`${this.type}_error`))}}o.Link=st}(link)),link}var hasRequiredReceiver;function requireReceiver(){if(hasRequiredReceiver)return receiver;hasRequiredReceiver=1,Object.defineProperty(receiver,"__esModule",{value:!0}),receiver.Receiver=void 0;const o=requireLink();class e extends o.Link{constructor(c,j,d){super(o.LinkType.receiver,c,j,d)}get drain(){return this._link.drain}set drain(c){this._link.drain=c}addCredit(c){this._link.add_credit(c)}drainCredit(){this._link.drain_credit()}setCreditWindow(c){this._link.set_credit_window(c)}}return receiver.Receiver=e,receiver}var sender={},hasRequiredSender;function requireSender(){if(hasRequiredSender)return sender;hasRequiredSender=1,Object.defineProperty(sender,"__esModule",{value:!0}),sender.Sender=sender.SenderSendOptions=sender.BaseSender=void 0;const o=requireLink();class e extends o.Link{constructor(d,et,at){super(o.LinkType.sender,d,et,at)}setDrained(d){this._link.set_drained(d)}sendable(){return this._link.sendable()}}sender.BaseSender=e;class a{}sender.SenderSendOptions=a;class c extends e{constructor(d,et,at){super(d,et,at)}send(d,et={}){return this._link.send(d,et.tag,et.format)}}return sender.Sender=c,sender}var awaitableSender={},hasRequiredAwaitableSender;function requireAwaitableSender(){if(hasRequiredAwaitableSender)return awaitableSender;hasRequiredAwaitableSender=1,Object.defineProperty(awaitableSender,"__esModule",{value:!0}),awaitableSender.AwaitableSender=void 0;const o=container$1,e=log,a=requireSender(),c=container$1,j=errorDefinitions,d=requireUtils();class et extends a.BaseSender{constructor(st,ct,ot={}){super(st,ct,ot),this.deliveryDispositionMap=new Map;const gt=vt=>{const rt=vt.id;if(this.deliveryDispositionMap.has(vt.id)){const bt=this.deliveryDispositionMap.get(rt);clearTimeout(bt.timer);const ht=this.deliveryDispositionMap.delete(rt);return e.sender("[%s] Event: 'Accepted', Successfully deleted the delivery with id %d from the map of sender '%s' on amqp session '%s' and cleared the timer: %s.",this.connection.id,rt,this.name,this.session.id,ht),bt.resolve(vt)}},ft=(vt,rt,bt)=>{if(this.deliveryDispositionMap.has(rt)){const ht=this.deliveryDispositionMap.get(rt);clearTimeout(ht.timer);const wt=this.deliveryDispositionMap.delete(rt);e.sender("[%s] Event: '%s', Successfully deleted the delivery with id %d from the  map of sender '%s' on amqp session '%s' and cleared the timer: %s.",this.connection.id,vt,rt,this.name,this.session.id,wt);const At=`Sender '${this.name}' on amqp session '${this.session.id}', received a '${vt}' disposition. Hence we are rejecting the promise.`,Ct=new j.SendOperationFailedError(At,vt,bt);return e.error("[%s] %s",this.connection.id,At),ht.reject(Ct)}},yt=(vt,rt)=>{for(const bt of this.deliveryDispositionMap.keys())ft(vt,bt,rt)};this.on(c.SenderEvents.accepted,vt=>{gt(vt.delivery)}),this.on(c.SenderEvents.rejected,vt=>{const rt=vt.delivery;ft(c.SenderEvents.rejected,rt.id,rt.remote_state&&rt.remote_state.error)}),this.on(c.SenderEvents.released,vt=>{const rt=vt.delivery;ft(c.SenderEvents.released,rt.id,rt.remote_state&&rt.remote_state.error)}),this.on(c.SenderEvents.modified,vt=>{const rt=vt.delivery;ft(c.SenderEvents.modified,rt.id,rt.remote_state&&rt.remote_state.error)}),ot.onError||this.on(c.SenderEvents.senderError,vt=>{yt(c.SenderEvents.senderError,vt.sender.error)}),ot.onSessionError||this.session.on(o.SessionEvents.sessionError,vt=>{yt(o.SessionEvents.sessionError,vt.session.error)})}send(st,ct={}){return new Promise((ot,gt)=>{e.sender("[%s] Sender '%s' on amqp session '%s', credit: %d available: %d",this.connection.id,this.name,this.session.id,this.credit,this.session.outgoing.available());const ft=ct&&ct.abortSignal,yt=ct.timeoutInSeconds||20;if(ft&&ft.aborted){const vt=(0,d.createAbortError)();return e.error("[%s] %s",this.connection.id,vt.message),gt(vt)}if(this.sendable()){const vt=setTimeout(()=>{this.deliveryDispositionMap.delete(ht.id);const wt=`Sender '${this.name}' on amqp session '${this.session.id}', with address '${this.address}' was not able to send the message with delivery id ${ht.id} right now, due to operation timeout.`;return e.error("[%s] %s",this.connection.id,wt),gt(new j.OperationTimeoutError(wt))},yt*1e3),rt=()=>{if(this.deliveryDispositionMap.has(ht.id)){const wt=this.deliveryDispositionMap.get(ht.id);clearTimeout(wt.timer);const At=this.deliveryDispositionMap.delete(ht.id);e.sender("[%s] Event: 'abort', Successfully deleted the delivery with id %d from the  map of sender '%s' on amqp session '%s' and cleared the timer: %s.",this.connection.id,ht.id,this.name,this.session.id,At);const Ct=(0,d.createAbortError)();e.error("[%s] %s",this.connection.id,Ct.message),wt.reject(Ct)}},bt=()=>{ft&&ft.removeEventListener("abort",rt)},ht=this._link.send(st,ct.tag,ct.format);this.deliveryDispositionMap.set(ht.id,{resolve:wt=>{ot(wt),bt()},reject:wt=>{gt(wt),bt()},timer:vt}),ft&&ft.addEventListener("abort",rt)}else{const vt=`Sender "${this.name}" on amqp session "${this.session.id}", with address ${this.address} cannot send the message right now as it does not have enough credit. Please try later.`;e.error("[%s] %s",this.connection.id,vt),gt(new j.InsufficientCreditError(vt))}})}}return awaitableSender.AwaitableSender=et,awaitableSender}var hasRequiredSession;function requireSession(){if(hasRequiredSession)return session;hasRequiredSession=1,Object.defineProperty(session,"__esModule",{value:!0}),session.Session=void 0;const o=require$$0,e=log,a=requireReceiver(),c=requireSender(),j=container$1,d=requireUtils(),et=entity,at=errorDefinitions,st=requireAwaitableSender();var ct;(function(gt){gt.sender="sender",gt.AwaitableSender="AwaitableSender"})(ct||(ct={}));class ot extends et.Entity{constructor(ft,yt){super(),this._connection=ft,this._session=yt,this._initializeEventListeners()}get connection(){return this._connection}get incoming(){return this._session.incoming}get outgoing(){return this._session.outgoing}get error(){return this._session.error}get id(){let ft="";const yt=this._session;return yt.local&&(ft+=`local-${yt.local.channel}_`),yt.remote&&(ft+=`remote-${yt.remote.channel}_`),ft&&(ft+=`${this._connection.id}`),ft}isOpen(){let ft=!1;return this._connection.isOpen()&&this._session.is_open()&&(ft=!0),ft}isClosed(){return this._session.is_closed()}isItselfClosed(){return this._session.is_itself_closed()}remove(){this._session&&(this.removeAllListeners(),this._session.removeAllListeners(),this._session.remove())}begin(){this._session&&this._session.begin()}close(ft){return o.__awaiter(this,void 0,void 0,function*(){const yt=new Promise((vt,rt)=>{if(e.error("[%s] The amqp session '%s' is open ? -> %s",this.connection.id,this.id,this.isOpen()),this.isOpen()){const bt=ft&&ft.abortSignal,ht=()=>{clearTimeout(Rt),this.actionInitiated--,this._session.removeListener(j.SessionEvents.sessionError,At),this._session.removeListener(j.SessionEvents.sessionClose,wt),this._session.connection.removeListener(j.ConnectionEvents.disconnected,Ct),bt&&bt.removeEventListener("abort",dt)},wt=Mt=>(ht(),e.session("[%s] Resolving the promise as the amqp session '%s' has been closed.",this.connection.id,this.id),vt()),At=Mt=>{ht(),e.error("[%s] Error occurred while closing amqp session '%s'.",this.connection.id,this.id,Mt.session.error),rt(Mt.session.error)},Ct=Mt=>{ht();const _t=Mt.connection&&Mt.connection.error?Mt.connection.error:Mt.error;e.error("[%s] Connection got disconnected while closing amqp session '%s': %O.",this.connection.id,this.id,_t)},dt=()=>{ht();const Mt=(0,d.createAbortError)();return e.error("[%s] [%s]",this.connection.id,Mt.message),rt(Mt)},Et=()=>{ht();const Mt=`Unable to close the amqp session ${this.id} due to operation timeout.`;e.error("[%s] %s",this.connection.id,Mt),rt(new at.OperationTimeoutError(Mt))};this._session.once(j.SessionEvents.sessionClose,wt),this._session.once(j.SessionEvents.sessionError,At),this._session.connection.once(j.ConnectionEvents.disconnected,Ct),e.session("[%s] Calling session.close() for amqp session '%s'.",this.connection.id,this.id);const Rt=setTimeout(Et,this.connection.options.operationTimeoutInSeconds*1e3);this._session.close(),this.actionInitiated++,bt&&(bt.aborted?dt():bt.addEventListener("abort",dt))}else return vt()});try{yield yt}finally{this.removeAllListeners()}})}createReceiver(ft){return new Promise((yt,vt)=>{if(ft&&(ft.onMessage&&!ft.onError||ft.onError&&!ft.onMessage)&&ft.credit_window!==0)return vt(new Error("Either provide both 'onMessage' and 'onError' handlers, or please set the credit_window to 0, if you want to provide only the 'onError' handler. This ensures no messages are lost between the receiver getting created  and the 'onMessage' handler being added."));const rt=ft&&ft.abortSignal;let bt;if(rt){const _t=()=>{const kt=(0,d.createAbortError)();return e.error("[%s] [%s]",this.connection.id,kt.message),vt(kt)};if(bt=()=>(At(),ht.is_open()?ht.close():ht.is_closed()||ht.once(j.ReceiverEvents.receiverOpen,()=>{ht.close()}),_t()),rt.aborted)return _t();rt.addEventListener("abort",bt)}ft&&ft.onSessionError&&(this.on(j.SessionEvents.sessionError,ft.onSessionError),e.session("[%s] Added event handler for event '%s' on rhea-promise 'session: %s', while creating the 'receiver'.",this.connection.id,j.SessionEvents.sessionError,this.id)),ft&&ft.onSessionClose&&(this.on(j.SessionEvents.sessionClose,ft.onSessionClose),e.session("[%s] Added event handler for event '%s' on rhea-promise 'session: %s',  while creating the 'receiver'.",this.connection.id,j.SessionEvents.sessionClose,this.id));const ht=this._session.attach_receiver(ft),wt=new a.Receiver(this,ht,ft);wt.actionInitiated++,ft&&ft.onMessage&&(wt.on(j.ReceiverEvents.message,ft.onMessage),e.receiver("[%s] Added event handler for event '%s' on rhea-promise 'receiver'.",this.connection.id,j.ReceiverEvents.message)),ft&&ft.onError&&(wt.on(j.ReceiverEvents.receiverError,ft.onError),e.receiver("[%s] Added event handler for event '%s' on rhea-promise 'receiver'.",this.connection.id,j.ReceiverEvents.receiverError)),ft&&ft.onClose&&(wt.on(j.ReceiverEvents.receiverClose,ft.onClose),e.receiver("[%s] Added event handler for event '%s' on rhea-promise 'receiver'.",this.connection.id,j.ReceiverEvents.receiverClose)),ft&&ft.onSettled&&(wt.on(j.ReceiverEvents.settled,ft.onSettled),e.receiver("[%s] Added event handler for event '%s' on rhea-promise 'receiver'.",this.connection.id,j.ReceiverEvents.settled));const At=()=>{clearTimeout(Mt),wt.actionInitiated--,ht.removeListener(j.ReceiverEvents.receiverOpen,Ct),ht.removeListener(j.ReceiverEvents.receiverClose,dt),ht.session.connection.removeListener(j.ConnectionEvents.disconnected,Et),rt&&rt.removeEventListener("abort",bt)},Ct=_t=>(At(),e.receiver("[%s] Resolving the promise with amqp receiver '%s' on amqp session '%s'.",this.connection.id,wt.name,this.id),yt(wt)),dt=_t=>(At(),e.error("[%s] Error occurred while creating the amqp receiver '%s' on amqp session '%s' over amqp connection: %O.",this.connection.id,wt.name,this.id,_t.receiver.error),vt(_t.receiver.error)),Et=_t=>{At();const kt=_t.connection&&_t.connection.error?_t.connection.error:_t.error;return e.error("[%s] Connection got disconnected while creating amqp receiver '%s' on amqp session '%s': %O.",this.connection.id,wt.name,this.id,kt),vt(kt)},Rt=()=>{var _t;At();const kt=`Unable to create the amqp receiver '${wt.name}' on amqp session '${this.id}' due to operation timeout.`;e.error("[%s] %s",this.connection.id,kt);const nt=ft;return!((_t=nt==null?void 0:nt.session)===null||_t===void 0)&&_t.createReceiver?wt.close({closeSession:!1}).then(()=>{wt.remove()}):wt.close({closeSession:!0}).then(()=>{wt.remove()}),vt(new at.OperationTimeoutError(kt))};ht.once(j.ReceiverEvents.receiverOpen,Ct),ht.once(j.ReceiverEvents.receiverClose,dt),ht.session.connection.on(j.ConnectionEvents.disconnected,Et);const Mt=setTimeout(Rt,this.connection.options.operationTimeoutInSeconds*1e3)})}createSender(ft){return this._createSender(ct.sender,ft)}createAwaitableSender(ft){return this._createSender(ct.AwaitableSender,ft)}_createSender(ft,yt){return new Promise((vt,rt)=>{const bt=yt&&yt.abortSignal;let ht;if(bt){const kt=()=>{const nt=(0,d.createAbortError)();return e.error("[%s] [%s]",this.connection.id,nt.message),rt(nt)};if(ht=()=>(Ct(),wt.is_open()?wt.close():wt.is_closed()||wt.once(j.SenderEvents.senderOpen,()=>{wt.close()}),kt()),bt.aborted)return kt();bt.addEventListener("abort",ht)}yt&&yt.onSessionError&&(this.on(j.SessionEvents.sessionError,yt.onSessionError),e.session("[%s] Added event handler for event '%s' on rhea-promise 'session: %s', while creating the sender.",this.connection.id,j.SessionEvents.sessionError,this.id)),yt&&yt.onSessionClose&&(this.on(j.SessionEvents.sessionClose,yt.onSessionClose),e.session("[%s] Added event handler for event '%s' on rhea-promise 'session: %s', while creating the sender.",this.connection.id,j.SessionEvents.sessionClose,this.id));const wt=this._session.attach_sender(yt);let At;ft===ct.sender?At=new c.Sender(this,wt,yt):At=new st.AwaitableSender(this,wt,yt),At.actionInitiated++,yt&&(yt.onError&&At.on(j.SenderEvents.senderError,yt.onError),yt.onClose&&At.on(j.SenderEvents.senderClose,yt.onClose),ft===ct.sender&&(yt.onAccepted&&At.on(j.SenderEvents.accepted,yt.onAccepted),yt.onRejected&&At.on(j.SenderEvents.rejected,yt.onRejected),yt.onReleased&&At.on(j.SenderEvents.released,yt.onReleased),yt.onModified&&At.on(j.SenderEvents.modified,yt.onModified)));const Ct=()=>{clearTimeout(_t),At.actionInitiated--,wt.removeListener(j.SenderEvents.senderOpen,dt),wt.removeListener(j.SenderEvents.senderClose,Et),wt.session.connection.removeListener(j.ConnectionEvents.disconnected,Rt),bt&&bt.removeEventListener("abort",ht)},dt=kt=>(Ct(),e.sender("[%s] Resolving the promise with amqp sender '%s' on amqp session '%s'.",this.connection.id,At.name,this.id),vt(At)),Et=kt=>(Ct(),e.error("[%s] Error occurred while creating the amqp sender '%s' on amqp session '%s' over amqp connection: %O.",this.connection.id,At.name,this.id,kt.sender.error),rt(kt.sender.error)),Rt=kt=>{Ct();const nt=kt.connection&&kt.connection.error?kt.connection.error:kt.error;return e.error("[%s] Connection got disconnected while creating amqp sender '%s' on amqp session '%s': %O.",this.connection.id,At.name,this.id,nt),rt(nt)},Mt=()=>{Ct();const kt=`Unable to create the amqp sender '${At.name}' on amqp session '${this.id}' due to operation timeout.`;return e.error("[%s] %s",this.connection.id,kt),rt(new at.OperationTimeoutError(kt))};wt.once(j.SenderEvents.sendable,dt),wt.once(j.SenderEvents.senderClose,Et),wt.session.connection.on(j.ConnectionEvents.disconnected,Rt);const _t=setTimeout(Mt,this.connection.options.operationTimeoutInSeconds*1e3)})}_initializeEventListeners(){for(const ft of Object.keys(j.SessionEvents))this._session.on(j.SessionEvents[ft],yt=>{const vt={rheaContext:yt,emitter:this,eventName:j.SessionEvents[ft],emitterType:"session",connectionId:this.connection.id};(0,d.emitEvent)(vt)});this._session.on(j.SenderEvents.senderError,ft=>{const yt={rheaContext:ft,emitter:this,eventName:j.SenderEvents.senderError,emitterType:"session",connectionId:this.connection.id};(0,d.emitEvent)(yt)}),this._session.on(j.SenderEvents.senderClose,ft=>{const yt={rheaContext:ft,emitter:this,eventName:j.SenderEvents.senderClose,emitterType:"session",connectionId:this.connection.id};(0,d.emitEvent)(yt)}),this._session.on(j.ReceiverEvents.receiverError,ft=>{const yt={rheaContext:ft,emitter:this,eventName:j.ReceiverEvents.receiverError,emitterType:"session",connectionId:this.connection.id};(0,d.emitEvent)(yt)}),this._session.on(j.ReceiverEvents.receiverClose,ft=>{const yt={rheaContext:ft,emitter:this,eventName:j.ReceiverEvents.receiverClose,emitterType:"session",connectionId:this.connection.id};(0,d.emitEvent)(yt)}),typeof this._session.eventNames=="function"&&e.eventHandler("[%s] rhea-promise 'session' object '%s' is listening for events: %o emitted by rhea's 'session' object.",this.connection.id,this.id,this._session.eventNames())}}return session.Session=ot,session}var hasRequiredEventContext;function requireEventContext(){return hasRequiredEventContext||(hasRequiredEventContext=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.EventContext=void 0;const e=requireSession(),a=requireLink(),c=log;function j(d){return d&&d.connection}(function(d){function et(at,st,ct){const ot=j(st)?st.connection:st;c.contextTranslator("[%s] Translating the context for event: '%s'.",ot.id,ct);const gt=Object.assign({_context:at},at);return gt.connection=ot,gt.container=ot.container,st instanceof a.Link?(gt.session=st.session,st.type===a.LinkType.receiver&&at.receiver?gt.receiver=st:st.type===a.LinkType.sender&&at.sender&&(gt.sender=st)):st instanceof e.Session&&(gt.session=st),gt}d.translate=et})(o.EventContext||(o.EventContext={}))}(eventContext)),eventContext}var container={},connection={},constants={};Object.defineProperty(constants,"__esModule",{value:!0});constants.defaultOperationTimeoutInSeconds=void 0;constants.defaultOperationTimeoutInSeconds=60;var hasRequiredConnection;function requireConnection(){if(hasRequiredConnection)return connection;hasRequiredConnection=1,Object.defineProperty(connection,"__esModule",{value:!0}),connection.Connection=void 0;const o=require$$0,e=log,a=requireSession(),c=requireContainer(),j=constants,d=requireUtils(),et=container$1,at=entity,st=errorDefinitions;function ct(ft){return ft&&typeof ft.container=="object"&&typeof ft.rheaConnection=="object"}const ot=1e3;class gt extends at.Entity{constructor(yt){var vt;if(super(),ct(yt))this._connection=yt.rheaConnection,this.container=yt.container;else{let rt=yt;if(rt||(rt={transport:"tls"}),rt.operationTimeoutInSeconds||(rt.operationTimeoutInSeconds=j.defaultOperationTimeoutInSeconds),rt.webSocketOptions){const bt=(0,et.websocket_connect)(rt.webSocketOptions.webSocket);rt.connection_details=bt(rt.webSocketOptions.url,rt.webSocketOptions.protocol,rt.webSocketOptions.options)}this._connection=(0,et.create_connection)(rt),this.container=c.Container.copyFromContainerInstance(this._connection.container),yt=rt}this.options=this._connection.options,this.options.operationTimeoutInSeconds=(vt=yt==null?void 0:yt.operationTimeoutInSeconds)!==null&&vt!==void 0?vt:j.defaultOperationTimeoutInSeconds,this._initializeEventListeners(),this._connection.setMaxListeners(ot)}get id(){return this._connection.options.id}get properties(){return this._connection.properties}get maxFrameSize(){return this._connection.max_frame_size}get idleTimeout(){return this._connection.idle_time_out}get channelMax(){return this._connection.channel_max}get error(){return this._connection.error}removeSession(yt){return yt.remove()}open(yt){return new Promise((vt,rt)=>{if(this.isOpen())return vt(this);{const bt=yt&&yt.abortSignal,ht=()=>{clearTimeout(Et),this.actionInitiated--,this._connection.removeListener(et.ConnectionEvents.connectionOpen,wt),this._connection.removeListener(et.ConnectionEvents.connectionClose,At),this._connection.removeListener(et.ConnectionEvents.disconnected,At),bt&&bt.removeEventListener("abort",Ct)},wt=Rt=>(ht(),e.connection("[%s] Resolving the promise with amqp connection.",this.id),vt(this)),At=Rt=>{ht();const Mt=Rt.error||Rt.connection.error||Error("Failed to connect");return e.error("[%s] Error occurred while establishing amqp connection: %O",this.id,Mt),rt(Mt)},Ct=()=>{ht(),this._connection.close();const Rt=(0,d.createAbortError)();return e.error("[%s] [%s]",this.id,Rt.message),rt(Rt)},dt=()=>{ht();const Rt=`Unable to open the amqp connection "${this.id}" due to operation timeout.`;return e.error("[%s] %s",this.id,Rt),rt(new Error(Rt))};this._connection.once(et.ConnectionEvents.connectionOpen,wt),this._connection.once(et.ConnectionEvents.connectionClose,At),this._connection.once(et.ConnectionEvents.disconnected,At);const Et=setTimeout(dt,this.options.operationTimeoutInSeconds*1e3);e.connection("[%s] Trying to create a new amqp connection.",this.id),this._connection.connect(),this.actionInitiated++,bt&&(bt.aborted?Ct():bt.addEventListener("abort",Ct))}})}close(yt){return new Promise((vt,rt)=>{if(e.error("[%s] The connection is open ? -> %s",this.id,this.isOpen()),this.isOpen()){const bt=yt&&yt.abortSignal,ht=()=>{clearTimeout(Rt),this.actionInitiated--,this._connection.removeListener(et.ConnectionEvents.connectionError,At),this._connection.removeListener(et.ConnectionEvents.connectionClose,wt),this._connection.removeListener(et.ConnectionEvents.disconnected,Ct),bt&&bt.removeEventListener("abort",dt)},wt=Mt=>(ht(),e.connection("[%s] Resolving the promise as the connection has been successfully closed.",this.id),vt()),At=Mt=>(ht(),e.error("[%s] Error occurred while closing amqp connection: %O.",this.id,Mt.connection.error),rt(Mt.connection.error)),Ct=Mt=>{ht();const _t=Mt.connection&&Mt.connection.error?Mt.connection.error:Mt.error;e.error("[%s] Connection got disconnected while closing itself: %O.",this.id,_t)},dt=()=>{ht();const Mt=(0,d.createAbortError)();return e.error("[%s] [%s]",this.id,Mt.message),rt(Mt)},Et=()=>{ht();const Mt=`Unable to close the amqp connection "${this.id}" due to operation timeout.`;return e.error("[%s] %s",this.id,Mt),rt(new Error(Mt))};this._connection.once(et.ConnectionEvents.connectionClose,wt),this._connection.once(et.ConnectionEvents.connectionError,At),this._connection.once(et.ConnectionEvents.disconnected,Ct);const Rt=setTimeout(Et,this.options.operationTimeoutInSeconds*1e3);this._connection.close(),this.actionInitiated++,bt&&(bt.aborted?dt():bt.addEventListener("abort",dt))}else return vt()})}isOpen(){let yt=!1;return this._connection&&this._connection.is_open&&this._connection.is_open()&&(yt=!0),yt}removeAllSessions(){this._connection&&this._connection.remove_all_sessions()}isRemoteOpen(){return this._connection.is_remote_open()}getError(){return this._connection.get_error()}getPeerCertificate(){return this._connection.get_peer_certificate()}getTlsSocket(){return this._connection.get_tls_socket()}wasCloseInitiated(){return this._connection.is_closed()}createSession(yt){return new Promise((vt,rt)=>{const bt=yt&&yt.abortSignal;let ht;if(bt){const kt=()=>{const nt=(0,d.createAbortError)();return e.error("[%s] [%s]",this.id,nt.message),rt(nt)};if(ht=()=>(Ct(),wt.is_open()?wt.close():wt.is_closed()||wt.once(et.SessionEvents.sessionOpen,()=>{wt.close()}),kt()),bt.aborted)return kt();bt.addEventListener("abort",ht)}const wt=this._connection.create_session(),At=new a.Session(this,wt);At.actionInitiated++;const Ct=()=>{clearTimeout(_t),At.actionInitiated--,wt.removeListener(et.SessionEvents.sessionOpen,dt),wt.removeListener(et.SessionEvents.sessionClose,Et),wt.connection.removeListener(et.ConnectionEvents.disconnected,Rt),bt&&bt.removeEventListener("abort",ht)},dt=kt=>(Ct(),e.session("[%s] Resolving the promise with amqp session '%s'.",this.id,At.id),vt(At)),Et=kt=>(Ct(),e.error("[%s] Error occurred while establishing a session over amqp connection: %O.",this.id,kt.session.error),rt(kt.session.error)),Rt=kt=>{Ct();const nt=kt.connection&&kt.connection.error?kt.connection.error:kt.error;return e.error("[%s] Connection got disconnected while creating amqp session '%s': %O.",this.id,At.id,nt),rt(nt)},Mt=()=>{Ct();const kt="Unable to create the amqp session due to operation timeout.";return e.error("[%s] %s",this.id,kt),rt(new st.OperationTimeoutError(kt))};wt.once(et.SessionEvents.sessionOpen,dt),wt.once(et.SessionEvents.sessionClose,Et),wt.connection.once(et.ConnectionEvents.disconnected,Rt),e.session("[%s] Calling amqp session.begin().",this.id);const _t=setTimeout(Mt,this.options.operationTimeoutInSeconds*1e3);wt.begin()})}createSender(yt){return o.__awaiter(this,void 0,void 0,function*(){return yt&&yt.session&&yt.session.createSender?yt.session.createSender(yt):(yield this.createSession({abortSignal:yt&&yt.abortSignal})).createSender(yt)})}createAwaitableSender(yt){return o.__awaiter(this,void 0,void 0,function*(){return yt&&yt.session&&yt.session.createAwaitableSender?yt.session.createAwaitableSender(yt):(yield this.createSession({abortSignal:yt&&yt.abortSignal})).createAwaitableSender(yt)})}createReceiver(yt){return o.__awaiter(this,void 0,void 0,function*(){return yt&&yt.session&&yt.session.createReceiver?yt.session.createReceiver(yt):(yield this.createSession({abortSignal:yt&&yt.abortSignal})).createReceiver(yt)})}createRequestResponseLink(yt,vt,rt={}){return o.__awaiter(this,void 0,void 0,function*(){if(!yt)throw new Error("Please provide sender options.");if(!vt)throw new Error("Please provide receiver options.");const{session:bt,abortSignal:ht}=rt,wt=bt||(yield this.createSession({abortSignal:ht})),[At,Ct]=yield Promise.all([wt.createSender(Object.assign(Object.assign({},yt),{abortSignal:ht})),wt.createReceiver(Object.assign(Object.assign({},vt),{abortSignal:ht}))]);return e.connection("[%s] Successfully created the sender '%s' and receiver '%s' on the same amqp session '%s'.",this.id,At.name,Ct.name,wt.id),{session:wt,sender:At,receiver:Ct}})}_initializeEventListeners(){for(const yt of Object.keys(et.ConnectionEvents))this._connection.on(et.ConnectionEvents[yt],vt=>{const rt={rheaContext:vt,emitter:this,eventName:et.ConnectionEvents[yt],emitterType:"connection",connectionId:this.id};et.ConnectionEvents[yt]===et.ConnectionEvents.protocolError&&e.connection("[%s] ProtocolError is: %O.",this.id,vt),(0,d.emitEvent)(rt)});this._connection.on(et.SenderEvents.senderError,yt=>{const vt={rheaContext:yt,emitter:this,eventName:et.SenderEvents.senderError,emitterType:"connection",connectionId:this.id};(0,d.emitEvent)(vt)}),this._connection.on(et.SenderEvents.senderClose,yt=>{const vt={rheaContext:yt,emitter:this,eventName:et.SenderEvents.senderClose,emitterType:"connection",connectionId:this.id};(0,d.emitEvent)(vt)}),this._connection.on(et.ReceiverEvents.receiverError,yt=>{const vt={rheaContext:yt,emitter:this,eventName:et.ReceiverEvents.receiverError,emitterType:"connection",connectionId:this.id};(0,d.emitEvent)(vt)}),this._connection.on(et.ReceiverEvents.receiverClose,yt=>{const vt={rheaContext:yt,emitter:this,eventName:et.ReceiverEvents.receiverClose,emitterType:"connection",connectionId:this.id};(0,d.emitEvent)(vt)}),this._connection.on(et.SessionEvents.sessionError,yt=>{const vt={rheaContext:yt,emitter:this,eventName:et.SessionEvents.sessionError,emitterType:"connection",connectionId:this.id};(0,d.emitEvent)(vt)}),this._connection.on(et.SessionEvents.sessionClose,yt=>{const vt={rheaContext:yt,emitter:this,eventName:et.SessionEvents.sessionClose,emitterType:"connection",connectionId:this.id};(0,d.emitEvent)(vt)}),typeof this._connection.eventNames=="function"&&e.eventHandler("[%s] rhea-promise 'connection' object is listening for events: %o emitted by rhea's 'connection' object.",this.id,this._connection.eventNames())}}return connection.Connection=gt,connection}var hasRequiredContainer;function requireContainer(){if(hasRequiredContainer)return container;hasRequiredContainer=1,Object.defineProperty(container,"__esModule",{value:!0}),container.Container=void 0;const o=require$$0,e=container$1,a=eventsExports,c=requireConnection();class j extends a.EventEmitter{constructor(et){et||(et={}),super(),et.createdInstance?(this._container=et.createdInstance,delete et.createdInstance):this._container=(0,e.create_container)(et),this.options=this._container.options}get id(){return this._container.id}get filter(){return this._container.filter}get types(){return this._container.types}get message(){return this._container.message}get sasl(){return this._container.sasl}get saslServerMechanisms(){return this._container.sasl_server_mechanisms}createConnection(et){const at=this._container.create_connection(et);return new c.Connection({rheaConnection:at,container:this})}connect(et){return o.__awaiter(this,void 0,void 0,function*(){return this.createConnection(et).open()})}listen(et){return this._container.listen(et)}generateUUid(){return this._container.generate_uuid()}stringToUuid(et){return this._container.string_to_uuid(et)}uuidToString(et){return this._container.uuid_to_string(et)}websocketAccept(et,at){return this._container.websocket_accept(et,at)}websocketConnect(et){return this._container.websocket_connect(et)}static create(et){return new j(et)}static copyFromContainerInstance(et){return new j({createdInstance:et})}}return container.Container=j,container}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.SendOperationFailedError=o.OperationTimeoutError=o.InsufficientCreditError=o.parseConnectionString=o.messageProperties=o.messageHeader=o.delay=o.isAmqpError=o.AmqpResponseStatusCode=o.AwaitableSender=o.SenderSendOptions=o.Sender=o.Receiver=o.Session=o.Connection=o.Container=o.EventContext=o.Typed=o.SessionEvents=o.ConnectionEvents=o.SenderEvents=o.ReceiverEvents=o.string_to_uuid=o.generate_uuid=o.uuid_to_string=o.filter=o.message=o.types=void 0;var e=container$1;Object.defineProperty(o,"types",{enumerable:!0,get:function(){return e.types}}),Object.defineProperty(o,"message",{enumerable:!0,get:function(){return e.message}}),Object.defineProperty(o,"filter",{enumerable:!0,get:function(){return e.filter}}),Object.defineProperty(o,"uuid_to_string",{enumerable:!0,get:function(){return e.uuid_to_string}}),Object.defineProperty(o,"generate_uuid",{enumerable:!0,get:function(){return e.generate_uuid}}),Object.defineProperty(o,"string_to_uuid",{enumerable:!0,get:function(){return e.string_to_uuid}}),Object.defineProperty(o,"ReceiverEvents",{enumerable:!0,get:function(){return e.ReceiverEvents}}),Object.defineProperty(o,"SenderEvents",{enumerable:!0,get:function(){return e.SenderEvents}}),Object.defineProperty(o,"ConnectionEvents",{enumerable:!0,get:function(){return e.ConnectionEvents}}),Object.defineProperty(o,"SessionEvents",{enumerable:!0,get:function(){return e.SessionEvents}}),Object.defineProperty(o,"Typed",{enumerable:!0,get:function(){return e.Typed}});var a=requireEventContext();Object.defineProperty(o,"EventContext",{enumerable:!0,get:function(){return a.EventContext}});var c=requireContainer();Object.defineProperty(o,"Container",{enumerable:!0,get:function(){return c.Container}});var j=requireConnection();Object.defineProperty(o,"Connection",{enumerable:!0,get:function(){return j.Connection}});var d=requireSession();Object.defineProperty(o,"Session",{enumerable:!0,get:function(){return d.Session}});var et=requireReceiver();Object.defineProperty(o,"Receiver",{enumerable:!0,get:function(){return et.Receiver}});var at=requireSender();Object.defineProperty(o,"Sender",{enumerable:!0,get:function(){return at.Sender}}),Object.defineProperty(o,"SenderSendOptions",{enumerable:!0,get:function(){return at.SenderSendOptions}});var st=requireAwaitableSender();Object.defineProperty(o,"AwaitableSender",{enumerable:!0,get:function(){return st.AwaitableSender}});var ct=requireUtils();Object.defineProperty(o,"AmqpResponseStatusCode",{enumerable:!0,get:function(){return ct.AmqpResponseStatusCode}}),Object.defineProperty(o,"isAmqpError",{enumerable:!0,get:function(){return ct.isAmqpError}}),Object.defineProperty(o,"delay",{enumerable:!0,get:function(){return ct.delay}}),Object.defineProperty(o,"messageHeader",{enumerable:!0,get:function(){return ct.messageHeader}}),Object.defineProperty(o,"messageProperties",{enumerable:!0,get:function(){return ct.messageProperties}}),Object.defineProperty(o,"parseConnectionString",{enumerable:!0,get:function(){return ct.parseConnectionString}});var ot=errorDefinitions;Object.defineProperty(o,"InsufficientCreditError",{enumerable:!0,get:function(){return ot.InsufficientCreditError}}),Object.defineProperty(o,"OperationTimeoutError",{enumerable:!0,get:function(){return ot.OperationTimeoutError}}),Object.defineProperty(o,"SendOperationFailedError",{enumerable:!0,get:function(){return ot.SendOperationFailedError}})})(lib);const Constants={associatedLinkName:"associated-link-name",partitionKey:"x-opt-partition-key",sequenceNumber:"x-opt-sequence-number",enqueueSequenceNumber:"x-opt-enqueue-sequence-number",enqueuedTime:"x-opt-enqueued-time",scheduledEnqueueTime:"x-opt-scheduled-enqueue-time",offset:"x-opt-offset",lockedUntil:"x-opt-locked-until",partitionIdName:"x-opt-partition-id",publisher:"x-opt-publisher-name",viaPartitionKey:"x-opt-via-partition-key",deadLetterSource:"x-opt-deadletter-source",messageState:"x-opt-message-state",enqueuedTimeAnnotation:"amqp.annotation.x-opt-enqueued-time",offsetAnnotation:"amqp.annotation.x-opt-offset",sequenceNumberAnnotation:"amqp.annotation.x-opt-sequence-number",guidSize:16,message:"message",error:"error",statusCode:"status-code",statusDescription:"status-description",errorCondition:"error-condition",management:"$management",partition:"partition",partitionId:"partitionId",readOperation:"READ",TLS:"tls",TCP:"tcp",establishConnection:"establishConnection",defaultConsumerGroup:"$default",eventHub:"eventhub",cbsEndpoint:"$cbs",cbsReplyTo:"cbs",operationPutToken:"put-token",aadEventHubsAudience:"https://eventhubs.azure.net/",aadEventHubsScope:"https://eventhubs.azure.net//.default",aadServiceBusAudience:"https://servicebus.azure.net/",aadServiceBusScope:"https://servicebus.azure.net//.default",maxUserAgentLength:512,vendorString:"com.microsoft",attachEpoch:"com.microsoft:epoch",receiverIdentifierName:"com.microsoft:receiver-name",enableReceiverRuntimeMetricName:"com.microsoft:enable-receiver-runtime-metric",timespan:"com.microsoft:timespan",uri:"com.microsoft:uri",dateTimeOffset:"com.microsoft:datetime-offset",sessionFilterName:"com.microsoft:session-filter",receiverError:"receiver_error",senderError:"sender_error",sessionError:"session_error",connectionError:"connection_error",defaultOperationTimeoutInMs:6e4,defaultConnectionIdleTimeoutInMs:6e4,managementRequestKey:"managementRequest",negotiateCbsKey:"negotiateCbs",negotiateClaim:"negotiateClaim",ensureContainerAndBlob:"ensureContainerAndBlob",defaultPrefetchCount:1e3,reconnectLimit:100,maxMessageIdLength:128,maxPartitionKeyLength:128,maxSessionIdLength:128,pathDelimiter:"/",ruleNameMaximumLength:50,maximumSqlFilterStatementLength:1024,maximumSqlRuleActionStatementLength:1024,maxDeadLetterReasonLength:4096,maxDurationValue:922337203685477,minDurationValue:-922337203685477,maxAbsoluteExpiryTime:new Date("9999-12-31T07:59:59.000Z").getTime(),maxUint32Value:4294967295,aadTokenValidityMarginInMs:5e3,connectionReconnectDelay:300,defaultMaxRetries:3,defaultMaxRetriesForConnection:150,defaultDelayBetweenOperationRetriesInMs:3e4,defaultMaxDelayForExponentialRetryInMs:9e4,receiverSettleMode:"receiver-settle-mode",dispositionStatus:"disposition-status",fromSequenceNumber:"from-sequence-number",messageCount:"message-count",enqueuedTimeUtc:"enqueued-time-utc",lockTokens:"lock-tokens",messageIdMapKey:"message-id",sequenceNumberMapKey:"sequence-number",lockTokenMapKey:"lock-token",sessionIdMapKey:"session-id",sequenceNumbers:"sequence-numbers",deadLetterReason:"deadletter-reason",deadLetterDescription:"deadletter-description",propertiesToModify:"properties-to-modify",deadLetterName:"com.microsoft:dead-letter",trackingId:"com.microsoft:tracking-id",serverTimeout:"com.microsoft:server-timeout",operations:{putToken:"put-token",read:"READ",cancelScheduledMessage:"com.microsoft:cancel-scheduled-message",scheduleMessage:"com.microsoft:schedule-message",renewLock:"com.microsoft:renew-lock",peekMessage:"com.microsoft:peek-message",receiveBySequenceNumber:"com.microsoft:receive-by-sequence-number",deleteMessages:"com.microsoft:batch-delete-messages",updateDisposition:"com.microsoft:update-disposition",renewSessionLock:"com.microsoft:renew-session-lock",setSessionState:"com.microsoft:set-session-state",getSessionState:"com.microsoft:get-session-state",enumerateSessions:"com.microsoft:get-message-sessions",addRule:"com.microsoft:add-rule",removeRule:"com.microsoft:remove-rule",enumerateRules:"com.microsoft:enumerate-rules"},descriptorCodes:{ruleDescriptionList:1335734829060,sqlFilterList:83483426822,correlationFilterList:83483426825,sqlRuleActionList:1335734829062,trueFilterList:83483426823,falseFilterList:83483426824}},StandardAbortMessage="The operation was aborted.",logger=createClientLogger("core-amqp");function logErrorStackTrace(o){isObjectWithProperties(o,["stack"])&&logger.verbose(o.stack)}class CancellableAsyncLockImpl{constructor(){this._keyMap=new Map,this._executionRunningSet=new Set}acquire(e,a,c){var j;const{abortSignal:d,timeoutInMs:et}=c;if(d!=null&&d.aborted)return Promise.reject(new AbortError(StandardAbortMessage));const at=(j=this._keyMap.get(e))!==null&&j!==void 0?j:[];this._keyMap.set(e,at);const{promise:st,rejecter:ct,resolver:ot}=getPromiseParts(),gt={reject:ct,resolve:ot,task:a};if(typeof et=="number"){const ft=setTimeout(()=>{this._removeTaskDetails(e,gt),ct(new lib.OperationTimeoutError(`The task timed out waiting to acquire a lock for ${e}`))},et);gt.tid=ft}if(d){const ft=()=>{this._removeTaskDetails(e,gt),ct(new AbortError(StandardAbortMessage))};d.addEventListener("abort",ft),gt.abortSignal=d,gt.abortListener=ft}return at.push(gt),logger.verbose(`Called acquire() for lock "${e}". Lock "${e}" has ${at.length} pending tasks.`),this._execute(e),st}async _execute(e){if(this._executionRunningSet.has(e))return;const a=this._keyMap.get(e);if(!(!a||!a.length)){for(this._executionRunningSet.add(e);a.length;){const c=a.shift();if(c){try{logger.verbose(`Acquired lock for "${e}", invoking task.`),cleanupTaskDetails(c);const j=await c.task();c.resolve(j)}catch(j){c.reject(j)}logger.verbose(`Task completed for lock "${e}". Lock "${e}" has ${a.length} pending tasks.`)}}this._executionRunningSet.delete(e),this._keyMap.delete(e)}}_removeTaskDetails(e,a){const c=this._keyMap.get(e);if(!c||!c.length)return;const j=c.indexOf(a);if(j!==-1){const[d]=c.splice(j,1);cleanupTaskDetails(d)}}}function getPromiseParts(){let o,e;return{promise:new Promise((c,j)=>{o=c,e=j}),resolver:o,rejecter:e}}function cleanupTaskDetails(o){o.tid&&clearTimeout(o.tid),o.abortSignal&&o.abortListener&&o.abortSignal.removeEventListener("abort",o.abortListener)}function parseConnectionString(o){const e={},a=o.trim().split(";");for(let c of a){if(c=c.trim(),c==="")continue;const j=c.indexOf("=");if(j===-1)throw new Error("Connection string malformed: each part of the connection string must have an `=` assignment.");const d=c.substring(0,j).trim();if(d==="")throw new Error("Connection string malformed: missing key for assignment");const et=c.substring(j+1).trim();e[d]=et}return e}const defaultCancellableLock=new CancellableAsyncLockImpl;async function delay$1(o,e,a,c){await delay$2(o,{abortSignal:e,abortErrorMsg:a})}function isString(o){return typeof o=="string"}function isNumber(o){return typeof o=="number"}var ConditionStatusMapper;(function(o){o[o["com.microsoft:timeout"]=408]="com.microsoft:timeout",o[o["amqp:not-found"]=404]="amqp:not-found",o[o["amqp:not-implemented"]=501]="amqp:not-implemented",o[o["com.microsoft:entity-already-exists"]=409]="com.microsoft:entity-already-exists",o[o["com.microsoft:message-lock-lost"]=410]="com.microsoft:message-lock-lost",o[o["com.microsoft:session-lock-lost"]=410]="com.microsoft:session-lock-lost",o[o["com.microsoft:no-matching-subscription"]=500]="com.microsoft:no-matching-subscription",o[o["amqp:link:message-size-exceeded"]=403]="amqp:link:message-size-exceeded",o[o["com.microsoft:server-busy"]=503]="com.microsoft:server-busy",o[o["com.microsoft:argument-error"]=400]="com.microsoft:argument-error",o[o["com.microsoft:argument-out-of-range"]=400]="com.microsoft:argument-out-of-range",o[o["com.microsoft:store-lock-lost"]=410]="com.microsoft:store-lock-lost",o[o["com.microsoft:session-cannot-be-locked"]=410]="com.microsoft:session-cannot-be-locked",o[o["com.microsoft:partition-not-owned"]=410]="com.microsoft:partition-not-owned",o[o["com.microsoft:entity-disabled"]=400]="com.microsoft:entity-disabled",o[o["com.microsoft:publisher-revoked"]=401]="com.microsoft:publisher-revoked",o[o["amqp:link:stolen"]=410]="amqp:link:stolen",o[o["amqp:not-allowed"]=400]="amqp:not-allowed",o[o["amqp:unauthorized-access"]=401]="amqp:unauthorized-access",o[o["amqp:resource-limit-exceeded"]=403]="amqp:resource-limit-exceeded"})(ConditionStatusMapper||(ConditionStatusMapper={}));var ConditionErrorNameMapper$1;(function(o){o["com.microsoft:address-already-in-use"]="AddressAlreadyInUseError",o["com.microsoft:store-lock-lost"]="StoreLockLostError",o["com.microsoft:no-matching-subscription"]="NoMatchingSubscriptionError",o["com.microsoft:partition-not-owned"]="PartitionNotOwnedError",o["com.microsoft:publisher-revoked"]="PublisherRevokedError",o["com.microsoft:entity-already-exists"]="MessagingEntityAlreadyExistsError",o["com.microsoft:entity-disabled"]="MessagingEntityDisabledError",o["com.microsoft:message-lock-lost"]="MessageLockLostError",o["com.microsoft:session-lock-lost"]="SessionLockLostError",o["com.microsoft:session-cannot-be-locked"]="SessionCannotBeLockedError",o["amqp:internal-error"]="InternalServerError",o["amqp:not-found"]="ServiceCommunicationError",o["com.microsoft:message-not-found"]="MessageNotFoundError",o["com.microsoft:relay-not-found"]="RelayNotFoundError",o["amqp:not-implemented"]="NotImplementedError",o["amqp:not-allowed"]="InvalidOperationError",o["amqp:resource-limit-exceeded"]="QuotaExceededError",o["amqp:unauthorized-access"]="UnauthorizedError",o["com.microsoft:auth-failed"]="UnauthorizedError",o["com.microsoft:timeout"]="ServiceUnavailableError",o["com.microsoft:message-wait-timeout"]="MessageWaitTimeout",o["com.microsoft:argument-out-of-range"]="ArgumentOutOfRangeError",o["amqp:precondition-failed"]="PreconditionFailedError",o["com.microsoft:precondition-failed"]="PreconditionFailedError",o["amqp:decode-error"]="DecodeError",o["amqp:invalid-field"]="InvalidFieldError",o["amqp:resource-locked"]="ResourceLockedError",o["amqp:resource-deleted"]="ResourceDeletedError",o["amqp:illegal-state"]="IllegalStateError",o["amqp:frame-size-too-small"]="FrameSizeTooSmallError",o["amqp:link:detach-forced"]="DetachForcedError",o["amqp:link:transfer-limit-exceeded"]="TransferLimitExceededError",o["amqp:link:message-size-exceeded"]="MessageTooLargeError",o["amqp:link:redirect"]="LinkRedirectError",o["amqp:link:stolen"]="ReceiverDisconnectedError",o["amqp:session:window-violation"]="SessionWindowViolationError",o["amqp:session:errant-link"]="ErrantLinkError",o["amqp:session:handle-in-use"]="HandleInUseError",o["amqp:session:unattached-handle"]="UnattachedHandleError",o["amqp:connection:forced"]="ConnectionForcedError",o["amqp:connection:framing-error"]="FramingError",o["amqp:connection:redirect"]="ConnectionRedirectError",o["com.microsoft:server-busy"]="ServerBusyError",o["com.microsoft:argument-error"]="ArgumentError",o["com.microsoft:operation-cancelled"]="OperationCancelledError",o["client.sender:not-enough-link-credit"]="SenderBusyError",o["client.sender:link-not-ready"]="SenderNotReadyError",o["system:error"]="SystemError"})(ConditionErrorNameMapper$1||(ConditionErrorNameMapper$1={}));var ErrorNameConditionMapper;(function(o){o.AddressAlreadyInUseError="com.microsoft:address-already-in-use",o.StoreLockLostError="com.microsoft:store-lock-lost",o.NoMatchingSubscriptionError="com.microsoft:no-matching-subscription",o.PartitionNotOwnedError="com.microsoft:partition-not-owned",o.PublisherRevokedError="com.microsoft:publisher-revoked",o.MessagingEntityAlreadyExistsError="com.microsoft:entity-already-exists",o.MessagingEntityDisabledError="com.microsoft:entity-disabled",o.MessageLockLostError="com.microsoft:message-lock-lost",o.SessionLockLostError="com.microsoft:session-lock-lost",o.SessionCannotBeLockedError="com.microsoft:session-cannot-be-locked",o.InternalServerError="amqp:internal-error",o.ServiceCommunicationError="amqp:not-found",o.MessageNotFoundError="com.microsoft:message-not-found",o.RelayNotFoundError="com.microsoft:relay-not-found",o.NotImplementedError="amqp:not-implemented",o.InvalidOperationError="amqp:not-allowed",o.QuotaExceededError="amqp:resource-limit-exceeded",o.UnauthorizedError="amqp:unauthorized-access",o.ServiceUnavailableError="com.microsoft:timeout",o.MessageWaitTimeout="com.microsoft:message-wait-timeout",o.ArgumentOutOfRangeError="com.microsoft:argument-out-of-range",o.PreconditionFailedError="amqp:precondition-failed",o.DecodeError="amqp:decode-error",o.InvalidFieldError="amqp:invalid-field",o.ResourceLockedError="amqp:resource-locked",o.ResourceDeletedError="amqp:resource-deleted",o.IllegalStateError="amqp:illegal-state",o.FrameSizeTooSmallError="amqp:frame-size-too-small",o.DetachForcedError="amqp:link:detach-forced",o.TransferLimitExceededError="amqp:link:transfer-limit-exceeded",o.MessageTooLargeError="amqp:link:message-size-exceeded",o.LinkRedirectError="amqp:link:redirect",o.ReceiverDisconnectedError="amqp:link:stolen",o.SessionWindowViolationError="amqp:session:window-violation",o.ErrantLinkError="amqp:session:errant-link",o.HandleInUseError="amqp:session:handle-in-use",o.UnattachedHandleError="amqp:session:unattached-handle",o.ConnectionForcedError="amqp:connection:forced",o.FramingError="amqp:connection:framing-error",o.ConnectionRedirectError="amqp:connection:redirect",o.ServerBusyError="com.microsoft:server-busy",o.ArgumentError="com.microsoft:argument-error",o.OperationCancelledError="com.microsoft:operation-cancelled",o.SenderBusyError="client.sender:not-enough-link-credit",o.SenderNotReadyError="client.sender:link-not-ready",o.SystemError="system:error"})(ErrorNameConditionMapper||(ErrorNameConditionMapper={}));const systemErrorFieldsToCopy=["address","code","errno","info","port","stack","syscall"];class MessagingError extends Error{constructor(e,a){if(super(e),this.name="MessagingError",this.retryable=!0,!!a)for(const c of systemErrorFieldsToCopy)a[c]!=null&&(this[c]=a[c])}}const retryableErrors=["InternalServerError","ServerBusyError","ServiceUnavailableError","OperationCancelledError","UnauthorizedError","OperationTimeoutError","SenderBusyError","SenderNotReadyError","MessagingError","DetachForcedError","ConnectionForcedError","TransferLimitExceededError","InsufficientCreditError"];var SystemErrorConditionMapper;(function(o){o.ENOTFOUND="amqp:not-found",o.EBUSY="com.microsoft:server-busy",o.ECONNREFUSED="amqp:connection:forced",o.ETIMEDOUT="com.microsoft:timeout",o.ECONNRESET="com.microsoft:timeout",o.ENETDOWN="com.microsoft:timeout",o.EHOSTDOWN="com.microsoft:timeout",o.ENETRESET="com.microsoft:timeout",o.ENETUNREACH="com.microsoft:timeout",o.ENONET="com.microsoft:timeout"})(SystemErrorConditionMapper||(SystemErrorConditionMapper={}));function isSystemError(o){return!(!isObjectWithProperties(o,["code","syscall","errno"])||!isString(o.code)||!isString(o.syscall)||!isString(o.errno)&&!isNumber(o.errno))}function isBrowserWebsocketError(o){let e=!1;return!isNodeLike&&self&&o.type==="error"&&o.target instanceof self.WebSocket&&(e=!0),e}function isErrorEvent(o){return typeof o.error=="object"&&typeof o.message=="string"}const rheaPromiseErrors=["OperationTimeoutError","InsufficientCreditError","SendOperationFailedError"];function translate(o){if(isDefined(o)){if(typeof o!="object")return new Error(String(o))}else return new Error("Unknown error encountered.");const e=isErrorEvent(o)?o.error:o;if(e instanceof TypeError||e instanceof RangeError)return e;if(isAmqpError(e)){const a=e.condition,c=e.description,j=new MessagingError(c);return e.stack&&(j.stack=e.stack),j.info=e.info,a&&(j.code=ConditionErrorNameMapper$1[a]),c&&(c.includes("status-code: 404")||c.match(/The messaging entity .* could not be found.*/i)!==null)&&(j.code="MessagingEntityNotFoundError"),j.code&&retryableErrors.indexOf(j.code)===-1&&(j.retryable=!1),j}if(e instanceof Error&&e.name==="MessagingError")return e;if(isSystemError(e)){const a=e.code,c=e.message,j=new MessagingError(c,e);let d="SystemError";if(a){const et=SystemErrorConditionMapper[a];d=ConditionErrorNameMapper$1[et]}return retryableErrors.indexOf(d)===-1&&(j.retryable=!1),j}if(isBrowserWebsocketError(e)){const a=new MessagingError("Websocket connection failed.");return a.code=ConditionErrorNameMapper$1[ErrorNameConditionMapper.ServiceCommunicationError],a.retryable=!1,a}if(isError(e)&&rheaPromiseErrors.indexOf(e.name)!==-1){const a=new MessagingError(e.message,e);return a.code=e.name,a.code&&retryableErrors.indexOf(a.code)===-1&&(a.retryable=!1),a}return isError(e)?e:new Error(String(e))}function isAmqpError(o){return lib.isAmqpError(o)}class RequestResponseLink{constructor(e,a,c){this.session=e,this.sender=a,this.receiver=c,this._responsesMap=new Map,this.session=e,this.sender=a,this.receiver=c,this.receiver.on(lib.ReceiverEvents.message,j=>{onMessageReceived(j,this.connection.id,this._responsesMap)}),this.sender.on(lib.SenderEvents.senderError,j=>{onSenderError(j,this.connection.id,this._responsesMap)})}get connection(){return this.session.connection}isOpen(){return this.session.isOpen()&&this.sender.isOpen()&&this.receiver.isOpen()}sendRequest(e,a={}){const c=a.timeoutInMs||Constants.defaultOperationTimeoutInMs,j=a.abortSignal;return e.message_id||(e.message_id=lib.generate_uuid()),new Promise((d,et)=>{let at;const st=()=>{this._responsesMap.delete(e.message_id);const ot=this.receiver.address||"address",gt=a.requestName,ft=`[${this.connection.id}] The request "${gt}" to "${ot}" has been cancelled by the user.`;logger.info(ft);const yt=new AbortError(StandardAbortMessage);et(yt)},ct=()=>{isDefined(at)&&clearTimeout(at),j.removeEventListener("abort",ct),st()};if(j){if(j.aborted)return st();j.addEventListener("abort",ct)}at=setTimeout(()=>{var ot;this._responsesMap.delete(e.message_id),j&&j.removeEventListener("abort",ct);const gt=((ot=this.receiver)===null||ot===void 0?void 0:ot.address)||"address",yt={name:"OperationTimeoutError",message:`The request with message_id "${e.message_id}" to "${gt}" endpoint timed out. Please try again later.`};return et(translate(yt))},c),this._responsesMap.set(e.message_id,{resolve:d,reject:et,cleanupBeforeResolveOrReject:()=>{j&&j.removeEventListener("abort",ct),isDefined(at)&&clearTimeout(at)}}),logger.verbose("[%s] %s request sent: %O",this.connection.id,e.to||"$management",e),this.sender.send(e)})}async close(){await this.sender.close({closeSession:!1}),await this.receiver.close({closeSession:!1}),await this.session.close()}remove(){this.sender.remove(),this.receiver.remove(),this.session.remove()}static async create(e,a,c,j={}){const{abortSignal:d}=j,et=await e.createSession({abortSignal:d}),at=await et.createSender(Object.assign(Object.assign({},a),{abortSignal:d})),st=await et.createReceiver(Object.assign(Object.assign({},c),{abortSignal:d}));return logger.verbose("[%s] Successfully created the sender and receiver links on the same session.",e.id),new RequestResponseLink(et,at,st)}}const getCodeDescriptionAndError=(o={})=>({statusCode:o[Constants.statusCode]||o.statusCode,statusDescription:o[Constants.statusDescription]||o.statusDescription,errorCondition:o[Constants.errorCondition]||o.errorCondition});function onMessageReceived(o,e,a){const c=o.message;if(!c){logger.verbose(`[${e}] "message" property on the EventContext is "undefined" which is unexpected, returning from the "onMessageReceived" handler without resolving or rejecting the promise upon encountering the message event.`);return}const j=c.correlation_id;if(!a.has(j)){logger.verbose(`[${e}] correlationId "${j}" property on the response does not match with any of the "request-id"s in the map, returning from the "onMessageReceived" handler without resolving or rejecting the promise upon encountering the message event.`);return}const d=a.get(j);d.cleanupBeforeResolveOrReject();const et=a.delete(j);logger.verbose(`[${e}] Successfully deleted the response with id ${j} from the map. Delete result - ${et}`);const at=getCodeDescriptionAndError(c.application_properties);let st;if(at.statusCode||(st=new Error(`[${e}] No statusCode in the "application_properties" in the returned response with correlation-id: ${j}`)),at.statusCode>199&&at.statusCode<300)return logger.verbose(`[${e}] Resolving the response with correlation-id: ${j}`),d.resolve(c);if(!st){const ct=at.errorCondition||ConditionStatusMapper[at.statusCode]||"amqp:internal-error";st=translate({condition:ct,description:at.statusDescription}),logger.warning(`${st==null?void 0:st.name}: ${st==null?void 0:st.message}`)}return logErrorStackTrace(st),d.reject(st)}function onSenderError(o,e,a){if(o.sender){for(const[c,j]of a.entries())logger.verbose(`[${e}] Sender closed due to error when sending request with message_id "${c}"`),j.cleanupBeforeResolveOrReject(),j.reject(o.sender.error);a.clear()}}function checkNetworkConnection(){return Promise.resolve(self.navigator.onLine)}function isDelivery(o){let e=!1;return o&&typeof o.id=="number"&&typeof o.settled=="boolean"&&typeof o.remote_settled=="boolean"&&typeof o.format=="number"&&(e=!0),e}var RetryMode;(function(o){o[o.Exponential=0]="Exponential",o[o.Fixed=1]="Fixed"})(RetryMode||(RetryMode={}));var RetryOperationType;(function(o){o.cbsAuth="cbsAuth",o.connection="connection",o.management="management",o.receiverLink="receiverLink",o.senderLink="senderLink",o.sendMessage="sendMessage",o.receiveMessage="receiveMessage",o.session="session",o.messageSettlement="settlement"})(RetryOperationType||(RetryOperationType={}));function validateRetryConfig(o){if(!o.operation)throw new TypeError("Missing 'operation' in retry configuration");if(!o.connectionId)throw new TypeError("Missing 'connectionId' in retry configuration");if(!o.operationType)throw new TypeError("Missing 'operationType' in retry configuration")}function calculateDelay(o,e,a,c){if(c===RetryMode.Exponential){const d=(e*.8+Math.floor(Math.random()*(e*1.2-e*.8)))*(Math.pow(2,o)-1);return Math.min(d,a)}return e}async function retry(o){validateRetryConfig(o);const e=Object.assign({},o);e.retryOptions||(e.retryOptions={}),(e.retryOptions.maxRetries==null||e.retryOptions.maxRetries<0)&&(e.retryOptions.maxRetries=Constants.defaultMaxRetries),(e.retryOptions.retryDelayInMs==null||e.retryOptions.retryDelayInMs<0)&&(e.retryOptions.retryDelayInMs=Constants.defaultDelayBetweenOperationRetriesInMs),(e.retryOptions.maxRetryDelayInMs==null||e.retryOptions.maxRetryDelayInMs<0)&&(e.retryOptions.maxRetryDelayInMs=Constants.defaultMaxDelayForExponentialRetryInMs),e.retryOptions.mode==null&&(e.retryOptions.mode=RetryMode.Fixed);const a=[];let c,j=!1;const d=e.retryOptions.maxRetries+1;for(let et=1;et<=d;et++){logger.verbose("[%s] Attempt number for '%s': %d.",e.connectionId,e.operationType,et);try{c=await e.operation(),j=!0,logger.verbose("[%s] Success for '%s', after attempt number: %d.",e.connectionId,e.operationType,et),c&&!isDelivery(c)&&logger.verbose("[%s] Success result for '%s': %O",e.connectionId,e.operationType,c);break}catch(at){const st=translate(at);if(!st.retryable&&st.name==="ServiceCommunicationError"&&e.connectionHost&&(await checkNetworkConnection(e.connectionHost)||(st.name="ConnectionLostError",st.retryable=!0)),logger.verbose("[%s] Error occurred for '%s' in attempt number %d: %O",e.connectionId,e.operationType,et,st),a.push(st),a[(a==null?void 0:a.length)-1].retryable&&d>et){const ct=calculateDelay(et,e.retryOptions.retryDelayInMs,e.retryOptions.maxRetryDelayInMs,e.retryOptions.mode);logger.verbose("[%s] Sleeping for %d milliseconds for '%s'.",e.connectionId,ct,e.operationType),await delay$2(ct,{abortSignal:e.abortSignal,abortErrorMsg:"The retry operation has been cancelled by the user."});continue}else break}}if(j)return c;throw compileErrors(a)}function compileErrors(o){if(!o.length)throw new RangeError("Error array is empty");let e=0;const a=o.map(j=>`Error ${e++}: ${j}`).join(`

`),c=o[o.length-1];return c.message=a,c}var TokenType;(function(o){o.CbsTokenTypeJwt="jwt",o.CbsTokenTypeSas="servicebus.windows.net:sastoken"})(TokenType||(TokenType={}));function getHost(o){const e=/.*:\/\/([^/]*)/.exec(o),a=e==null?void 0:e[1];return a||o}const ConnectionConfig={create(o,e){o=String(o);const a=parseConnectionString(o);if(!a.Endpoint)throw new TypeError("Missing Endpoint in Connection String.");a.Endpoint.endsWith("/")||(a.Endpoint+="/");const c={connectionString:o,endpoint:a.Endpoint,host:getHost(a.Endpoint),sharedAccessKeyName:a.SharedAccessKeyName,sharedAccessKey:a.SharedAccessKey,useDevelopmentEmulator:a.UseDevelopmentEmulator==="true"};return(e||a.EntityPath)&&(c.entityPath=e||a.EntityPath),c},validate(o,e){if(e||(e={}),!o)throw new TypeError("Missing configuration");if(!o.endpoint)throw new TypeError("Missing 'endpoint' in configuration");if(o.endpoint=String(o.endpoint),!o.host)throw new TypeError("Missing 'host' in configuration");if(o.host=String(o.host),e.isEntityPathRequired&&!o.entityPath)throw new TypeError("Missing 'entityPath' in configuration");if(isDefined(o.entityPath)&&(o.entityPath=String(o.entityPath)),!isSharedAccessSignature(o.connectionString)){if(!o.sharedAccessKeyName)throw new TypeError("Missing 'sharedAccessKeyName' in configuration");if(o.sharedAccessKeyName=String(o.sharedAccessKeyName),!o.sharedAccessKey)throw new TypeError("Missing 'sharedAccessKey' in configuration");o.sharedAccessKey=String(o.sharedAccessKey)}}};function isSharedAccessSignature(o){return o.match(/;{0,1}SharedAccessSignature=SharedAccessSignature /)!=null}class CbsClient{constructor(e,a){this.endpoint=Constants.cbsEndpoint,this.replyTo=`${Constants.cbsReplyTo}-${lib.generate_uuid()}`,this.cbsLock=`${Constants.negotiateCbsKey}-${lib.generate_uuid()}`,this.connection=e,this.connectionLock=a}async init(e={}){const{abortSignal:a,timeoutInMs:c}=e;try{if(a!=null&&a.aborted)throw new AbortError(StandardAbortMessage);if(this.connection.isOpen()||(logger.verbose("The CBS client is trying to establish an AMQP connection."),await defaultCancellableLock.acquire(this.connectionLock,()=>this.connection.open({abortSignal:a}),{abortSignal:a,timeoutInMs:c})),this.isOpen())logger.verbose("[%s] CBS session is already present. Reusing the cbs sender '%s' and receiver '%s' links over cbs session.",this.connection.id,this._cbsSenderReceiverLink.sender.name,this._cbsSenderReceiverLink.receiver.name);else{const j={source:{address:this.endpoint},name:this.replyTo,onSessionError:et=>{const at=et.connection.options.id,st=translate(et.session.error);logger.verbose("[%s] An error occurred on the session for request/response links for $cbs: %O",at,st)}},d={target:{address:this.endpoint}};logger.verbose("[%s] Creating sender/receiver links on a session for $cbs endpoint.",this.connection.id),this._cbsSenderReceiverLink=await RequestResponseLink.create(this.connection,d,j,{abortSignal:a}),this._cbsSenderReceiverLink.sender.on(lib.SenderEvents.senderError,et=>{const at=et.connection.options.id,st=translate(et.sender.error);logger.verbose("[%s] An error occurred on the cbs sender link.. %O",at,st)}),this._cbsSenderReceiverLink.receiver.on(lib.ReceiverEvents.receiverError,et=>{const at=et.connection.options.id,st=translate(et.receiver.error);logger.verbose("[%s] An error occurred on the cbs receiver link.. %O",at,st)}),logger.verbose("[%s] Successfully created the cbs sender '%s' and receiver '%s' links over cbs session.",this.connection.id,this._cbsSenderReceiverLink.sender.name,this._cbsSenderReceiverLink.receiver.name)}}catch(j){const d=translate(j);throw logger.warning("[%s] An error occurred while establishing the cbs links: %s",this.connection.id,`${d==null?void 0:d.name}: ${d==null?void 0:d.message}`),logErrorStackTrace(d),d}}async negotiateClaim(e,a,c,j={}){const{abortSignal:d,timeoutInMs:et}=j;try{if(d!=null&&d.aborted)throw new AbortError(StandardAbortMessage);if(!this._cbsSenderReceiverLink)throw new Error("Attempted to negotiate a claim but the CBS link does not exist.");const at={body:a,message_id:lib.generate_uuid(),reply_to:this.replyTo,to:this.endpoint,application_properties:{operation:Constants.operationPutToken,name:e,type:c}},st=await this._cbsSenderReceiverLink.sendRequest(at,{abortSignal:d,timeoutInMs:et,requestName:"negotiateClaim"});return logger.verbose("[%s] The CBS response is: %O",this.connection.id,st),this._fromRheaMessageResponse(st)}catch(at){throw logger.warning("[%s] An error occurred while negotiating the cbs claim: %s",this.connection.id,isError(at)?`${at.name}: ${at.message}`:String(at)),logErrorStackTrace(at),at}}async close(){try{if(this.isOpen()){const e=this._cbsSenderReceiverLink;this._cbsSenderReceiverLink=void 0,await e.close(),logger.verbose("[%s] Successfully closed the cbs session.",this.connection.id)}}catch(e){const a=`An error occurred while closing the cbs link: ${isError(e)&&e.stack?e.stack:JSON.stringify(e)}.`;throw logger.verbose("[%s] %s",this.connection.id,a),new Error(a)}}remove(){try{if(this._cbsSenderReceiverLink){const e=this._cbsSenderReceiverLink;this._cbsSenderReceiverLink=void 0,e.remove(),logger.verbose("[%s] Successfully removed the cbs session.",this.connection.id)}}catch(e){const a=`An error occurred while removing the cbs link: ${isError(e)&&e.stack?e.stack:JSON.stringify(e)}.`;throw logger.verbose("[%s] %s",this.connection.id,a),new Error(a)}}isOpen(){var e;return!!(!((e=this._cbsSenderReceiverLink)===null||e===void 0)&&e.isOpen())}_fromRheaMessageResponse(e){const a={correlationId:e.correlation_id,statusCode:e.application_properties?e.application_properties["status-code"]:"",statusDescription:e.application_properties?e.application_properties["status-description"]:""};return logger.verbose("[%s] The deserialized CBS response is: %o",this.connection.id,a),a}}const AmqpMessageHeader={toRheaMessageHeader(o){const e={};return o.deliveryCount!=null&&(e.delivery_count=o.deliveryCount),o.durable!=null&&(e.durable=o.durable),o.firstAcquirer!=null&&(e.first_acquirer=o.firstAcquirer),o.priority!=null&&(e.priority=o.priority),o.timeToLive!=null&&(e.ttl=o.timeToLive),logger.verbose("To RheaMessageHeader: %O",e),e},fromRheaMessageHeader(o){const e={};return o.delivery_count!=null&&(e.deliveryCount=o.delivery_count),o.durable!=null&&(e.durable=o.durable),o.first_acquirer!=null&&(e.firstAcquirer=o.first_acquirer),o.priority!=null&&(e.priority=o.priority),o.ttl!=null&&(e.timeToLive=o.ttl),logger.verbose("From RheaMessageHeader: %O",e),e}},AmqpMessageProperties={toRheaMessageProperties(o){const e={};return o.absoluteExpiryTime!=null&&(e.absolute_expiry_time=new Date(o.absoluteExpiryTime)),o.contentEncoding!=null&&(e.content_encoding=o.contentEncoding),o.contentType!=null&&(e.content_type=o.contentType),o.correlationId!=null&&(e.correlation_id=o.correlationId),o.creationTime!=null&&(e.creation_time=new Date(o.creationTime)),o.groupId!=null&&(e.group_id=o.groupId),o.groupSequence!=null&&(e.group_sequence=o.groupSequence),o.messageId!=null&&(e.message_id=o.messageId),o.replyTo!=null&&(e.reply_to=o.replyTo),o.replyToGroupId!=null&&(e.reply_to_group_id=o.replyToGroupId),o.subject!=null&&(e.subject=o.subject),o.to!=null&&(e.to=o.to),logger.verbose("To RheaMessageProperties: %O",e),e},fromRheaMessageProperties(o){const e={};return o.absolute_expiry_time!=null&&(e.absoluteExpiryTime=o.absolute_expiry_time.getTime()),o.content_encoding!=null&&(e.contentEncoding=o.content_encoding),o.content_type!=null&&(e.contentType=o.content_type),o.correlation_id!=null&&(e.correlationId=o.correlation_id),o.creation_time!=null&&(e.creationTime=o.creation_time.getTime()),o.group_id!=null&&(e.groupId=o.group_id),o.group_sequence!=null&&(e.groupSequence=o.group_sequence),o.message_id!=null&&(e.messageId=o.message_id),o.reply_to!=null&&(e.replyTo=o.reply_to),o.reply_to_group_id!=null&&(e.replyToGroupId=o.reply_to_group_id),o.subject!=null&&(e.subject=o.subject),o.to!=null&&(e.to=o.to),logger.verbose("From RheaMessageProperties: %O",e),e}};function getPlatformInfo(){return`(javascript-Browser-${getReleaseInfo$1()})`}function getFrameworkInfo(){return`Browser/${getReleaseInfo$1()}`}function getReleaseInfo$1(){return typeof self>"u"?"":self.navigator.appVersion}const maxListenerLimit=1e3;class CoreAmqpConnection extends lib.Connection{async createSender(e){const a=await super.createSender(e);return a.setMaxListeners(maxListenerLimit),a}async createAwaitableSender(e){const a=await super.createAwaitableSender(e);return a.setMaxListeners(maxListenerLimit),a}async createReceiver(e){const a=await super.createReceiver(e);return a.setMaxListeners(maxListenerLimit),a}}const ConnectionContextBase={create(o){var e,a,c;ConnectionConfig.validate(o.config,{isEntityPathRequired:o.isEntityPathRequired||!1});const j=o.connectionProperties.userAgent;if(j.length>Constants.maxUserAgentLength)throw new Error(`The user-agent string cannot be more than ${Constants.maxUserAgentLength} characters in length.The given user-agent string is: ${j} with length: ${j.length}`);const d={transport:o.config.useDevelopmentEmulator?Constants.TCP:Constants.TLS,host:o.config.host,hostname:(e=o.config.amqpHostname)!==null&&e!==void 0?e:o.config.host,username:o.config.sharedAccessKeyName,port:(a=o.config.port)!==null&&a!==void 0?a:o.config.useDevelopmentEmulator?5672:5671,reconnect:!1,properties:{product:o.connectionProperties.product,version:o.connectionProperties.version,"user-agent":j,platform:getPlatformInfo(),framework:getFrameworkInfo()},idle_time_out:Constants.defaultConnectionIdleTimeoutInMs,operationTimeoutInSeconds:o.operationTimeoutInMs?o.operationTimeoutInMs/1e3:void 0};if(o.config.webSocket||!isNodeLike&&typeof self<"u"&&self.WebSocket){const ct=o.config.webSocket||self.WebSocket,ot=o.config.host,gt=o.config.webSocketEndpointPath||"",ft=o.config.webSocketConstructorOptions||{},yt=(c=o.config.port)!==null&&c!==void 0?c:443;d.webSocketOptions={webSocket:ct,url:`wss://${ot}:${yt}/${gt}`,protocol:["AMQPWSB10"],options:ft}}const et=new CoreAmqpConnection(d),at=`${Constants.establishConnection}-${lib.generate_uuid()}`;return{wasConnectionCloseCalled:!1,connectionLock:at,negotiateClaimLock:`${Constants.negotiateClaim}-${lib.generate_uuid()}`,connection:et,connectionId:et.id,cbsSession:new CbsClient(et,at),config:o.config,refreshConnection(){const ct=new CoreAmqpConnection(d),ot=`${Constants.establishConnection}-${lib.generate_uuid()}`;this.wasConnectionCloseCalled=!1,this.connectionLock=ot,this.negotiateClaimLock=`${Constants.negotiateClaim} - ${lib.generate_uuid()}`,this.connection=ct,this.connectionId=ct.id,this.cbsSession=new CbsClient(ct,ot)}}}},AmqpAnnotatedMessage={fromRheaMessage(o){const e={header:AmqpMessageHeader.fromRheaMessageHeader(o),footer:o.footer,messageAnnotations:o.message_annotations,deliveryAnnotations:o.delivery_annotations,applicationProperties:o.application_properties,properties:AmqpMessageProperties.fromRheaMessageProperties(o),body:o.body};if(o.absolute_expiry_time){const a=o.absolute_expiry_time.getTime();e.properties.absoluteExpiryTime=Math.min(a,Constants.maxAbsoluteExpiryTime),o.creation_time&&(e.header.timeToLive=e.properties.absoluteExpiryTime-o.creation_time.getTime())}return e},toRheaMessage(o){var e,a;const c=Object.assign(Object.assign(Object.assign({},AmqpMessageProperties.toRheaMessageProperties(o.properties||{})),AmqpMessageHeader.toRheaMessageHeader(o.header||{})),{body:o.body,message_annotations:o.messageAnnotations,delivery_annotations:o.deliveryAnnotations,application_properties:o.applicationProperties,footer:o.footer});if(!((e=o.header)===null||e===void 0)&&e.timeToLive){const j=o.header.timeToLive;c.ttl=Math.min(j,Constants.maxUint32Value),c.creation_time=(a=c.creation_time)!==null&&a!==void 0?a:new Date,c.absolute_expiry_time=new Date(Math.min(c.creation_time.getTime()+j,Constants.maxAbsoluteExpiryTime))}return c}};function isNamedKeyCredential(o){return isObjectWithProperties(o,["name","key"])&&typeof o.key=="string"&&typeof o.name=="string"}function isSASCredential(o){return isObjectWithProperties(o,["signature"])&&typeof o.signature=="string"}function isTokenCredential(o){const e=o;return e&&typeof e.getToken=="function"&&(e.signRequest===void 0||e.getToken.length>0)}async function signString(o,e){const a=new TextEncoder,c={name:"HMAC",hash:{name:"SHA-256"}},j=await globalThis.crypto.subtle.importKey("raw",a.encode(o),c,!1,["sign","verify"]),d=await globalThis.crypto.subtle.sign(c,j,a.encode(e)),et=btoa(String.fromCharCode(...new Uint8Array(d)));return encodeURIComponent(et)}function createSasTokenProvider(o){return isNamedKeyCredential(o)||isSASCredential(o)?new SasTokenProviderImpl(o):"sharedAccessKeyName"in o&&"sharedAccessKey"in o?new SasTokenProviderImpl({name:o.sharedAccessKeyName,key:o.sharedAccessKey}):new SasTokenProviderImpl({signature:o.sharedAccessSignature})}class SasTokenProviderImpl{get isSasTokenProvider(){return!0}constructor(e){this._credential=e}async getToken(e){return isNamedKeyCredential(this._credential)?createToken(this._credential.name,this._credential.key,Math.floor(Date.now()/1e3)+3600,e):{token:this._credential.signature,expiresOnTimestamp:0}}}async function createToken(o,e,a,c){c=encodeURIComponent(c),o=encodeURIComponent(o);const j=c+`
`+a,d=await signString(e,j);return{token:`SharedAccessSignature sr=${c}&sig=${d}&se=${a}&skn=${o}`,expiresOnTimestamp:a}}function isSasTokenProvider(o){return isObjectWithProperties(o,["isSasTokenProvider"])&&o.isSasTokenProvider===!0}function getEventPositionFilter(o){let e;if(isDefined(o.offset))e=o.isInclusive?`${Constants.offsetAnnotation} >= '${o.offset}'`:`${Constants.offsetAnnotation} > '${o.offset}'`;else if(isDefined(o.sequenceNumber))e=o.isInclusive?`${Constants.sequenceNumberAnnotation} >= '${o.sequenceNumber}'`:`${Constants.sequenceNumberAnnotation} > '${o.sequenceNumber}'`;else if(isDefined(o.enqueuedOn)){const a=o.enqueuedOn instanceof Date?o.enqueuedOn.getTime():o.enqueuedOn;e=`${Constants.enqueuedTimeAnnotation} > '${a}'`}if(!e)throw translate({condition:ErrorNameConditionMapper.ArgumentError,description:"No starting position was set in the EventPosition."});return e}const latestEventPosition={offset:"@latest"};function validateEventPositions(o){if(!isDefined(o))return;const e=Object.keys(o);if(!e.length)throw new TypeError("Invalid value for EventPosition found. Pass an object with either of offset, sequenceNumber or enqueuedOn properties set.");if(isEventPosition(o)){validateEventPosition(o);return}const a=o;for(let c=0;c<e.length;c++)Object.prototype.hasOwnProperty.call(a,e[c])&&validateEventPosition(a[e[c]])}function isEventPosition(o){return o?!!(objectHasProperty(o,"offset")&&isDefined(o.offset)||objectHasProperty(o,"sequenceNumber")&&isDefined(o.sequenceNumber)||objectHasProperty(o,"enqueuedOn")&&isDefined(o.enqueuedOn)):!1}function validateEventPosition(o){if(!isDefined(o))return;const e=isDefined(o.offset),a=isDefined(o.sequenceNumber),c=isDefined(o.enqueuedOn);if(e&&a||e&&c||c&&a)throw new TypeError("Invalid value for EventPosition found. Set only one of offset, sequenceNumber or enqueuedOn properties.");if(!e&&!c&&!a)throw new TypeError("Invalid value for EventPosition found. Pass an object with either of offset, sequenceNumber or enqueuedOn properties set.")}var CloseReason;(function(o){o.OwnershipLost="OwnershipLost",o.Shutdown="Shutdown"})(CloseReason||(CloseReason={}));/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var isBuffer=function o(e){return e!=null&&e.constructor!=null&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)};const isBuffer$1=getDefaultExportFromCjs$1(isBuffer),dataSectionTypeCode=117,sequenceSectionTypeCode=118,valueSectionTypeCode=119,defaultDataTransformer={encode(o,e){let a;if(o===void 0&&(o=null),e==="value")a=lib.message.data_section(o),a.typecode=valueSectionTypeCode;else if(e==="sequence")a=lib.message.sequence_section(o);else if(isBuffer$1(o)||o instanceof Uint8Array)a=lib.message.data_section(o);else if(o===null&&e==="data")a=lib.message.data_section(null);else try{const c=JSON.stringify(o);a=lib.message.data_section(Buffer$1.from(c,"utf8"))}catch(c){const j="An error occurred while executing JSON.stringify() on the given body "+o+`${c?c.stack:JSON.stringify(c)}`;throw logger$1.warning("[encode] "+j),logErrorStackTrace$1(c),new Error(j)}return a},decode(o,e){try{if(isRheaAmqpSection(o))switch(o.typecode){case dataSectionTypeCode:return{body:e?o.content:tryToJsonDecode(o.content),bodyType:"data"};case sequenceSectionTypeCode:return{body:o.content,bodyType:"sequence"};case valueSectionTypeCode:return{body:o.content,bodyType:"value"}}else return isBuffer$1(o)?{body:e?o:tryToJsonDecode(o),bodyType:"data"}:{body:o,bodyType:"value"}}catch(a){throw logger$1.verbose("[decode] An error occurred while decoding the received message body. The error is: %O",a),a}}};function tryToJsonDecode(o){let e=o;try{const a=e.toString("utf8");e=JSON.parse(a)}catch(a){logger$1.verbose("[decode] An error occurred while trying JSON.parse() on the received body. The error is %O",a)}return e}function isRheaAmqpSection(o){return o!=null&&typeof o.typecode=="number"&&(o.typecode===dataSectionTypeCode||o.typecode===valueSectionTypeCode||o.typecode===sequenceSectionTypeCode)}const packageJsonInfo={name:"@azure/event-hubs",version:"5.12.2"},receiverIdPropertyName="com.microsoft:receiver-name",messagePropertiesMap={message_id:"messageId",user_id:"userId",to:"to",subject:"subject",reply_to:"replyTo",correlation_id:"correlationId",content_type:"contentType",content_encoding:"contentEncoding",absolute_expiry_time:"absoluteExpiryTime",creation_time:"creationTime",group_id:"groupId",group_sequence:"groupSequence",reply_to_group_id:"replyToGroupId"};function fromRheaMessage(o,e){const a=AmqpAnnotatedMessage.fromRheaMessage(o),{body:c,bodyType:j}=defaultDataTransformer.decode(o.body,e);a.bodyType=j;const d={body:c,getRawAmqpMessage(){return a}};if(o.message_annotations)for(const at of Object.keys(o.message_annotations))switch(at){case Constants.partitionKey:d.partitionKey=o.message_annotations[at];break;case Constants.sequenceNumber:d.sequenceNumber=o.message_annotations[at];break;case Constants.enqueuedTime:d.enqueuedTimeUtc=new Date(o.message_annotations[at]);break;case Constants.offset:d.offset=o.message_annotations[at];break;default:d.systemProperties||(d.systemProperties={}),d.systemProperties[at]=convertDatesToNumbers(o.message_annotations[at]);break}o.application_properties&&(d.properties=convertDatesToNumbers(o.application_properties)),o.delivery_annotations&&(d.lastEnqueuedOffset=o.delivery_annotations.last_enqueued_offset,d.lastSequenceNumber=o.delivery_annotations.last_enqueued_sequence_number,d.lastEnqueuedTime=new Date(o.delivery_annotations.last_enqueued_time_utc),d.retrievalTime=new Date(o.delivery_annotations.runtime_info_retrieval_time_utc));const et=Object.keys(messagePropertiesMap);for(const at of et)d.systemProperties||(d.systemProperties={}),o[at]!=null&&(d.systemProperties[messagePropertiesMap[at]]=convertDatesToNumbers(o[at]));return o.content_type!=null&&(d.contentType=o.content_type),o.correlation_id!=null&&(d.correlationId=o.correlation_id),o.message_id!=null&&(d.messageId=o.message_id),d}function convertDatesToNumbers(o){if(!isDefined(o))return o;if(typeof o=="object"&&objectHasProperty(o,"getTime")&&typeof o.getTime=="function")return o.getTime();if(Array.isArray(o))return o.map(convertDatesToNumbers);if(typeof o=="object"&&isDefined(o)){const e=Object.assign({},o);for(const a of Object.keys(e))e[a]=convertDatesToNumbers(e[a]);return e}return o}function getRetryAttemptTimeoutInMs(o={}){const{timeoutInMs:e}=o;return typeof e!="number"||!isFinite(e)?Constants.defaultOperationTimeoutInMs:e}function getRandomName(o){const e=randomUUID();return o?`${o}-${e}`:e}function createTimerLoop(o,e){let a;const c={start:()=>{clearTimeout(a),a=setTimeout(()=>e().catch(()=>{}).finally(c.start),o),c.isRunning=!0},stop:()=>{clearTimeout(a),c.isRunning=!1},isRunning:!1};return c}async function withAuth(o,e,a,c,j,d){const et=await getTokenInfo(e.tokenCredential,a);await setupClaimNegotiation(e,a,et,c,j,d),await o();async function at(){try{const ct=await getTokenInfo(e.tokenCredential,a);await setupClaimNegotiation(e,a,ct,c,j,d),j.verbose(`next token renewal is in ${ct.timeToLiveInMs} milliseconds @(${new Date(Date.now()+ct.timeToLiveInMs).toString()}).`)}catch(ct){j.verbose(`an error occurred while renewing the token: ${logObj(ct)}`)}}const st=createTimerLoop(et.timeToLiveInMs,at);return st.start(),st}async function openCbsSession(o,e,{abortSignal:a}={}){return defaultCancellableLock.acquire(o.cbsLock,()=>o.init({abortSignal:a,timeoutInMs:e-Date.now()}),{abortSignal:a,timeoutInMs:e-Date.now()})}async function getAadToken(o){const e=await o.getToken(Constants.aadEventHubsScope);if(!e)throw new Error('Failed to get token from the provided "TokenCredential" object');return{token:e,type:TokenType.CbsTokenTypeJwt,timeToLiveInMs:e.expiresOnTimestamp-Date.now()-2*60*1e3}}async function getSharedKeyBasedToken(o,e){return{token:await o.getToken(e),type:TokenType.CbsTokenTypeSas,timeToLiveInMs:45*60*1e3}}async function getTokenInfo(o,e){return isSasTokenProvider(o)?getSharedKeyBasedToken(o,e):getAadToken(o)}function negotiateClaim({token:o,type:e},a,c,j,d,et){return defaultCancellableLock.acquire(d,()=>c.negotiateClaim(a,o.token,e,{abortSignal:et,timeoutInMs:j-Date.now()}),{abortSignal:et,timeoutInMs:j-Date.now()})}async function setupClaimNegotiation(o,e,a,c,j,{abortSignal:d}){const et=Date.now();j.verbose(`acquiring cbs lock: '${o.cbsSession.cbsLock}' for creating the cbs session`),await openCbsSession(o.cbsSession,c+et,{abortSignal:d}),j.verbose(`acquiring cbs lock: '${o.negotiateClaimLock}' for cbs auth`),await negotiateClaim(a,e,o.cbsSession,c+et,o.negotiateClaimLock,d),j.verbose("claim negotiation succeeded")}const abortLogMessage="operation has been cancelled by the user",qReadIntervalInMs=20;function createReceiver(o,e,a,c,j,d={}){const et=o.config.getReceiverAddress(c,e),at=getRandomName(et),st=o.config.getReceiverAudience(c,e),ct=createReceiverLogPrefix(a,o.connectionId,c),ot=createSimpleLogger(logger$1,ct),gt=[],ft={isConnecting:!1},yt={_onError:void 0,checkpoint:-1,lastEnqueuedEventProperties:{},isClosed:!1,close:async()=>{var vt,rt;return clearHandlers(yt),delete o.receivers[at],ot.verbose("deleted the receiver from the client cache"),(vt=ft.authLoop)===null||vt===void 0||vt.stop(),(rt=ft.link)===null||rt===void 0?void 0:rt.close().catch(bt=>{throw ot.warning(`an error occurred while closing: ${bt==null?void 0:bt.name}: ${bt==null?void 0:bt.message}`),logErrorStackTrace$1(bt),bt}).finally(()=>{yt.isClosed=!0,ot.verbose("is closed"),ft.link=void 0,ft.authLoop=void 0})},abort:()=>{var vt;return(vt=yt._onError)===null||vt===void 0||vt.call(yt,new AbortError(StandardAbortMessage)),ot.info(abortLogMessage),yt.close()},isOpen:()=>{var vt;const rt=!!(!((vt=ft.link)===null||vt===void 0)&&vt.isOpen());return ot.verbose(`is open? -> ${rt}`),rt},async connect({abortSignal:vt,timeoutInMs:rt}){if(!(ft.isConnecting||yt.isOpen())){ft.isConnecting=!0,ot.verbose("is trying to connect");try{await o.readyToOpenLink({abortSignal:vt}),ft.authLoop=await withAuth(()=>setupLink(a,o,at,et,yt,ft,gt,j,ot,d,vt),o,st,rt,ot,{abortSignal:vt})}catch(bt){ft.isConnecting=!1;const ht=translate(bt);throw ot.error(`an error occurred while creating the receiver: ${ht==null?void 0:ht.name}: ${ht==null?void 0:ht.message}`),logErrorStackTrace$1(bt),ht}}},receiveBatch:(vt,rt=60,bt)=>{var ht,wt;const At=(ht=d.prefetchCount)!==null&&ht!==void 0?ht:vt*3,Ct=()=>(ot.info(abortLogMessage),yt.close());return retry(Object.defineProperties({operation:()=>{const Et=Math.max(vt-gt.length,0);return ot.verbose(`already has ${gt.length} events and wants to receive ${Et} more events`),bt!=null&&bt.aborted?(Ct(),Promise.reject(new AbortError(StandardAbortMessage))):yt.isClosed||o.wasConnectionCloseCalled||Et===0?Promise.resolve(gt.splice(0,vt)):new Promise((Rt,Mt)=>{yt._onError=Mt,yt.connect({abortSignal:bt,timeoutInMs:getRetryAttemptTimeoutInMs(d.retryOptions)}).then(()=>(addCredits(ft.link,Math.max(At,vt)-gt.length),ot.verbose(`setting the max wait time to ${rt} seconds`),waitForEvents(vt,rt*1e3,qReadIntervalInMs,gt,{abortSignal:bt,cleanupBeforeAbort:Ct,receivedAfterWait:()=>ot.info(`${Math.min(vt,gt.length)} messages received within ${rt} seconds`),receivedAlready:()=>ot.info(`${vt} messages already received`),receivedNone:()=>ot.info(`no messages received when max wait time in seconds ${rt} is over`)}))).catch(Mt).then(Rt)}).then(()=>gt.splice(0,vt)).finally(()=>clearHandlers(yt))},operationType:RetryOperationType.receiveMessage,abortSignal:bt,retryOptions:(wt=d.retryOptions)!==null&&wt!==void 0?wt:{}},{connectionId:{enumerable:!0,get:()=>o.connectionId},connectionHost:{enumerable:!0,get:()=>o.config.host}}))}};return yt}function delay(o,e){let a;return createAbortablePromise(c=>{a=setTimeout(c,o)},e).finally(()=>clearTimeout(a))}function checkOnInterval(o,e,a){let c;return createAbortablePromise(j=>{c=setInterval(()=>{e()&&j()},o)},a).finally(()=>clearInterval(c))}function waitForEvents(o,e,a,c,j={}){const{abortSignal:d,cleanupBeforeAbort:et,receivedNone:at,receivedAfterWait:st,receivedAlready:ct}=j;if(c.length>=o)return Promise.resolve().then(ct);const ot=new AbortController,gt=()=>{ot.abort()};d==null||d.addEventListener("abort",gt);let ft=!1;const yt={abortSignal:ot.signal,abortErrorMsg:StandardAbortMessage,cleanupBeforeAbort:()=>{d!=null&&d.aborted&&!ft&&(et==null||et(),ft=!0)}};return Promise.race([checkOnInterval(a,()=>c.length>0,yt).then(()=>delay(a,yt)).then(st),delay(e,yt).then(at)]).finally(()=>{ot.abort(),d==null||d.removeEventListener("abort",gt)})}function convertAMQPMesage(o){const e=o.getRawAmqpMessage(),a={body:o.body,properties:o.properties,offset:o.offset,sequenceNumber:o.sequenceNumber,enqueuedTimeUtc:o.enqueuedTimeUtc,partitionKey:o.partitionKey,systemProperties:o.systemProperties,getRawAmqpMessage(){return e}};return o.correlationId!=null&&(a.correlationId=o.correlationId),o.contentType!=null&&(a.contentType=o.contentType),o.messageId!=null&&(a.messageId=o.messageId),a}function setEventProps(o,e){o.sequenceNumber=e.lastSequenceNumber,o.enqueuedOn=e.lastEnqueuedTime,o.offset=`${e.lastEnqueuedOffset}`,o.retrievedOn=e.retrievalTime}function clearHandlers(o){o._onError=void 0}function onMessage(o,e,a,c){if(!o.message)return;const j=fromRheaMessage(o.message,!!c.skipParsingBodyAsJson),d=convertAMQPMesage(j);e.checkpoint=d.sequenceNumber,c.trackLastEnqueuedEventProperties&&setEventProps(e.lastEnqueuedEventProperties,j),a.push(d)}function onError(o,e,a,c){const j=a||o.receiver,d=j==null?void 0:j.error;if(c.verbose(`'receiver_error' event occurred: ${logObj(d)}`),e._onError&&d){const et=translate(d);logErrorStackTrace$1(et),e._onError(et)}}function onSessionError(o,e,a){var c;const j=(c=o.session)===null||c===void 0?void 0:c.error;if(a.verbose(`'session_error' event occurred: ${logObj(j)}`),e._onError&&j){const d=translate(j);logErrorStackTrace$1(d),e._onError(d)}}async function onClose(o,e,a){const c=e.link||o.receiver;if(a.verbose(`'receiver_close' event occurred. Value for isItselfClosed on the receiver is: '${c==null?void 0:c.isItselfClosed().toString()}' Value for isConnecting on the session is: '${e.isConnecting}'`),c&&!e.isConnecting)return c.close().catch(j=>{a.verbose(`error when closing after 'receiver_close' event: ${logObj(j)}`)})}async function onSessionClose(o,e,a){const c=e.link||o.receiver;if(a.verbose(`'session_close' event occurred. Value for isSessionItselfClosed on the session is: '${c==null?void 0:c.isSessionItselfClosed().toString()}' Value for isConnecting on the session is: '${e.isConnecting}'`),c&&!e.isConnecting)return c.close().catch(j=>{a.verbose(`error when closing after 'session_close' event: ${logObj(j)}`)})}function createRheaOptions(o,e,a,c,j,d,et,at,st){const ct={name:e,autoaccept:!0,target:o,source:{address:a},credit_window:0,properties:{[receiverIdPropertyName]:o},onClose:ft=>onClose(ft,j,at),onSessionClose:ft=>onSessionClose(ft,j,at),onError:ft=>onError(ft,c,j.link,at),onMessage:ft=>onMessage(ft,c,d,st),onSessionError:ft=>onSessionError(ft,c,at)},ot=st.ownerLevel;typeof ot=="number"&&(ct.properties[Constants.attachEpoch]=lib.types.wrap_long(ot)),st.trackLastEnqueuedEventProperties&&(ct.desired_capabilities=[Constants.enableReceiverRuntimeMetricName]);const gt=getEventPositionFilter(c.checkpoint>-1?{sequenceNumber:c.checkpoint}:et);return ct.source.filter={"apache.org:selector-filter:string":lib.types.wrap_described(gt,77567109365764)},ct}async function setupLink(o,e,a,c,j,d,et,at,st,ct,ot){const gt=createRheaOptions(o,a,c,j,d,et,at,st,ct);st.verbose(`trying to be created with options ${logObj(gt)}`),d.link=await e.connection.createReceiver(Object.assign(Object.assign({},gt),{abortSignal:ot})),d.isConnecting=!1,st.verbose("is created successfully"),e.receivers[a]=j}function addCredits(o,e){e>0&&(o==null||o.addCredit(e))}const knownContextKeys={span:Symbol.for("@azure/core-tracing span"),namespace:Symbol.for("@azure/core-tracing namespace")};function createTracingContext(o={}){let e=new TracingContextImpl(o.parentContext);return o.span&&(e=e.setValue(knownContextKeys.span,o.span)),o.namespace&&(e=e.setValue(knownContextKeys.namespace,o.namespace)),e}class TracingContextImpl{constructor(e){this._contextMap=e instanceof TracingContextImpl?new Map(e._contextMap):new Map}setValue(e,a){const c=new TracingContextImpl(this);return c._contextMap.set(e,a),c}getValue(e){return this._contextMap.get(e)}deleteValue(e){const a=new TracingContextImpl(this);return a._contextMap.delete(e),a}}const state={instrumenterImplementation:void 0};function createDefaultTracingSpan(){return{end:()=>{},isRecording:()=>!1,recordException:()=>{},setAttribute:()=>{},setStatus:()=>{},addEvent:()=>{}}}function createDefaultInstrumenter(){return{createRequestHeaders:()=>({}),parseTraceparentHeader:()=>{},startSpan:(o,e)=>({span:createDefaultTracingSpan(),tracingContext:createTracingContext({parentContext:e.tracingContext})}),withContext(o,e,...a){return e(...a)}}}function getInstrumenter(){return state.instrumenterImplementation||(state.instrumenterImplementation=createDefaultInstrumenter()),state.instrumenterImplementation}function createTracingClient(o){const{namespace:e,packageName:a,packageVersion:c}=o;function j(ct,ot,gt){var ft;const yt=getInstrumenter().startSpan(ct,Object.assign(Object.assign({},gt),{packageName:a,packageVersion:c,tracingContext:(ft=ot==null?void 0:ot.tracingOptions)===null||ft===void 0?void 0:ft.tracingContext}));let vt=yt.tracingContext;const rt=yt.span;vt.getValue(knownContextKeys.namespace)||(vt=vt.setValue(knownContextKeys.namespace,e)),rt.setAttribute("az.namespace",vt.getValue(knownContextKeys.namespace));const bt=Object.assign({},ot,{tracingOptions:Object.assign(Object.assign({},ot==null?void 0:ot.tracingOptions),{tracingContext:vt})});return{span:rt,updatedOptions:bt}}async function d(ct,ot,gt,ft){const{span:yt,updatedOptions:vt}=j(ct,ot,ft);try{const rt=await et(vt.tracingOptions.tracingContext,()=>Promise.resolve(gt(vt,yt)));return yt.setStatus({status:"success"}),rt}catch(rt){throw yt.setStatus({status:"error",error:rt}),rt}finally{yt.end()}}function et(ct,ot,...gt){return getInstrumenter().withContext(ct,ot,...gt)}function at(ct){return getInstrumenter().parseTraceparentHeader(ct)}function st(ct){return getInstrumenter().createRequestHeaders(ct)}return{startSpan:j,withSpan:d,withContext:et,parseTraceparentHeader:at,createRequestHeaders:st}}const tracingClient=createTracingClient({namespace:"Microsoft.EventHub",packageName:packageJsonInfo.name,packageVersion:packageJsonInfo.version});function toSpanOptions(o,e,a){const j={"messaging.system":"eventhubs",[e==="process"||e==="receive"?"messaging.source.name":"messaging.destination.name"]:o.entityPath,"net.peer.name":o.host};return e&&(j["messaging.operation"]=e),{spanAttributes:j}}const TRACEPARENT_PROPERTY="Diagnostic-Id";function extractSpanContextFromEventData(o){if(!o.properties||!o.properties[TRACEPARENT_PROPERTY])return;const e=o.properties[TRACEPARENT_PROPERTY];return tracingClient.parseTraceparentHeader(e)}class PartitionPump{constructor(e,a,c,j){this._context=e,this._startPosition=c,this._isReceiving=!1,this._isStopped=!1,this._partitionProcessor=a,this._processorOptions=j,this._abortController=new AbortController}get isReceiving(){return this._isReceiving}async start(){this._isReceiving=!0;try{await this._partitionProcessor.initialize()}catch(e){this._partitionProcessor.processError(e)}this._receiveEvents(this._partitionProcessor.partitionId),logger$1.info(`Successfully started the receiver for partition "${this._partitionProcessor.partitionId}".`)}_setOrReplaceReceiver(e,a){const c=a>=0?{sequenceNumber:a,isInclusive:!1}:this._startPosition;return this._receiver=createReceiver(this._context,this._partitionProcessor.consumerGroup,this._partitionProcessor.eventProcessorId,e,c,{ownerLevel:this._processorOptions.ownerLevel,trackLastEnqueuedEventProperties:this._processorOptions.trackLastEnqueuedEventProperties,retryOptions:this._processorOptions.retryOptions,skipParsingBodyAsJson:this._processorOptions.skipParsingBodyAsJson,prefetchCount:this._processorOptions.prefetchCount}),this._receiver}async _receiveEvents(e){let a=-1,c=this._setOrReplaceReceiver(e,a);for(;this._isReceiving;)try{c.isClosed&&(c=this._setOrReplaceReceiver(e,a));const j=await c.receiveBatch(this._processorOptions.maxBatchSize,this._processorOptions.maxWaitTimeInSeconds,this._abortController.signal);if(this._processorOptions.trackLastEnqueuedEventProperties&&c.lastEnqueuedEventProperties&&(this._partitionProcessor.lastEnqueuedEventProperties=c.lastEnqueuedEventProperties),!this._isReceiving)return;j.length&&(a=j[j.length-1].sequenceNumber),await tracingClient.withSpan("PartitionPump.process",{},()=>this._partitionProcessor.processEvents(j),toProcessingSpanOptions(j,this._context.config))}catch(j){if(!this._isReceiving)return;logger$1.warning(`An error was thrown while receiving or processing events on partition "${this._partitionProcessor.partitionId}"`),logErrorStackTrace$1(j);try{await this._partitionProcessor.processError(j)}catch(d){logger$1.verbose("An error was thrown by user's processError method: ",d)}if(typeof j!="object"||!j.retryable)try{return j.code==="ReceiverDisconnectedError"?await this.stop(CloseReason.OwnershipLost):await this.stop(CloseReason.Shutdown)}catch(d){logger$1.verbose(`An error occurred while closing the receiver with reason ${CloseReason.Shutdown}: `,d)}}}async stop(e){var a;if(!this._isStopped){this._isStopped=!0,this._isReceiving=!1;try{this._abortController.abort(),await((a=this._receiver)===null||a===void 0?void 0:a.close()),await this._partitionProcessor.close(e)}catch(c){throw logger$1.warning(`An error occurred while closing the receiver: ${c==null?void 0:c.name}: ${c==null?void 0:c.message}`),logErrorStackTrace$1(c),this._partitionProcessor.processError(c),c}}}}function toProcessingSpanOptions(o,e){const a=[];for(const c of o){const j=extractSpanContextFromEventData(c);j&&a.push({tracingContext:j,attributes:{enqueuedTime:c.enqueuedTimeUtc.getTime()}})}return Object.assign({spanLinks:a,spanKind:"consumer"},toSpanOptions(e,"process"))}class PumpManagerImpl{constructor(e,a){this._partitionIdToPumps={},this._eventProcessorName=e,this._options=a}receivingFromPartitions(){return Object.keys(this._partitionIdToPumps).filter(e=>{const a=this._partitionIdToPumps[e];return!!(a&&a.isReceiving)})}isReceivingFromPartition(e){const a=this._partitionIdToPumps[e];return!!(a&&a.isReceiving)}async createPump(e,a,c,j){const d=c.partitionId;if(j.aborted){logger$1.verbose(`${this._eventProcessorName}] The subscription was closed before creating the pump for partition ${d}.`);return}const et=this._partitionIdToPumps[d];if(et){if(et.isReceiving){logger$1.verbose(`[${this._eventProcessorName}] [${d}] The existing pump is running.`);return}logger$1.verbose(`[${this._eventProcessorName}] [${d}] The existing pump is not running.`),await this.removePump(d,CloseReason.OwnershipLost)}logger$1.verbose(`[${this._eventProcessorName}] [${d}] Creating a new pump.`);const at=new PartitionPump(a,c,e,this._options);try{this._partitionIdToPumps[d]=at,await at.start()}catch(st){logger$1.verbose(`[${this._eventProcessorName}] [${d}] An error occured while adding/updating a pump: ${st}`),logErrorStackTrace$1(st)}}async removePump(e,a){try{const c=this._partitionIdToPumps[e];c?(delete this._partitionIdToPumps[e],logger$1.verbose(`[${this._eventProcessorName}] [${e}] Stopping the pump.`),await c.stop(a)):logger$1.verbose(`[${this._eventProcessorName}] [${e}] No pump was found to remove.`)}catch(c){logger$1.verbose(`[${this._eventProcessorName}] [${e}] An error occured while removing a pump: ${c}`),logErrorStackTrace$1(c)}}async removeAllPumps(e){const a=Object.keys(this._partitionIdToPumps);logger$1.verbose(`[${this._eventProcessorName}] Removing all pumps due to reason ${e}.`);const c=[];for(const j of a){const d=this._partitionIdToPumps[j];d&&c.push(d.stop(e))}try{await Promise.all(c)}catch(j){logger$1.verbose(`[${this._eventProcessorName}] An error occured while removing all pumps: ${j}`),logErrorStackTrace$1(j)}finally{this._partitionIdToPumps={}}}}async function delayWithoutThrow(o,e){try{await delay$1(o,e)}catch{}}class EventProcessor{constructor(e,a,c,j,d){this._consumerGroup=e,this._context=a,this._subscriptionEventHandlers=c,this._checkpointStore=j,this._isRunning=!1,d.ownerId?(this._id=d.ownerId,logger$1.verbose(`Starting event processor with ID ${this._id}`)):(this._id=getRandomName(),logger$1.verbose(`Starting event processor with autogenerated ID ${this._id}`)),this._eventHubName=this._context.config.entityPath,this._fullyQualifiedNamespace=this._context.config.host,this._processorOptions=d,this._pumpManager=d.pumpManager||new PumpManagerImpl(this._id,this._processorOptions),this._processingTarget=d.processingTarget,this._loopIntervalInMs=d.loopIntervalInMs,this._loadBalancingStrategy=d.loadBalancingStrategy}get id(){return this._id}_createPartitionOwnershipRequest(e,a){const c=e.get(a);return{ownerId:this._id,partitionId:a,fullyQualifiedNamespace:this._fullyQualifiedNamespace,consumerGroup:this._consumerGroup,eventHubName:this._eventHubName,etag:c?c.etag:void 0}}async _claimOwnership(e,a){if(a.aborted){logger$1.verbose(`[${this._id}] Subscription was closed before claiming ownership of ${e.partitionId}.`);return}logger$1.info(`[${this._id}] Attempting to claim ownership of partition ${e.partitionId}.`);try{if(!(await this._checkpointStore.claimOwnership([e])).length)return;logger$1.info(`[${this._id}] Successfully claimed ownership of partition ${e.partitionId}.`),await this._startPump(e.partitionId,a)}catch(c){logger$1.warning(`[${this._id}] Failed to claim ownership of partition ${e.partitionId}`),logErrorStackTrace$1(c),await this._handleSubscriptionError(c)}}async _startPump(e,a){if(a.aborted){logger$1.verbose(`[${this._id}] The subscription was closed before starting to read from ${e}.`);return}if(this._pumpManager.isReceivingFromPartition(e)){logger$1.verbose(`[${this._id}] There is already an active partitionPump for partition "${e}", skipping pump creation.`);return}logger$1.verbose(`[${this._id}] [${e}] Calling user-provided PartitionProcessorFactory.`);const c=new PartitionProcessor(this._subscriptionEventHandlers,this._checkpointStore,{fullyQualifiedNamespace:this._fullyQualifiedNamespace,eventHubName:this._eventHubName,consumerGroup:this._consumerGroup,partitionId:e,eventProcessorId:this._id}),j=await this._getStartingPosition(e);await this._pumpManager.createPump(j,this._context,c,a),logger$1.verbose(`[${this._id}] PartitionPump created successfully.`)}async _getStartingPosition(e){const c=(await this._checkpointStore.listCheckpoints(this._fullyQualifiedNamespace,this._eventHubName,this._consumerGroup)).filter(j=>j.partitionId===e);return c.length>0?{offset:c[0].offset}:(logger$1.verbose(`No checkpoint found for partition ${e}. Looking for fallback.`),getStartPosition(e,this._processorOptions.startPosition))}async _runLoopForSinglePartition(e,a){for(;!a.aborted;)try{await this._startPump(e,a)}catch(c){logger$1.warning(`[${this._id}] An error occurred within the EventProcessor loop: ${c==null?void 0:c.name}: ${c==null?void 0:c.message}`),logErrorStackTrace$1(c),await this._handleSubscriptionError(c)}finally{logger$1.verbose(`[${this._id}] Pausing the EventProcessor loop for ${this._loopIntervalInMs} ms.`),await delayWithoutThrow(this._loopIntervalInMs,a)}this._isRunning=!1}async _runLoopWithLoadBalancing(e,a){let c;const j=new Promise(d=>{if(c=d,a.aborted){d();return}a.addEventListener("abort",d)});for(;!a.aborted;){const d=Date.now();try{const{partitionIds:et}=await this._context.managementSession.getEventHubProperties({abortSignal:a});await this._performLoadBalancing(e,et,a)}catch(et){logger$1.warning(`[${this._id}] An error occurred within the EventProcessor loop: ${et==null?void 0:et.name}: ${et==null?void 0:et.message}`),logErrorStackTrace$1(et),await Promise.race([this._handleSubscriptionError(et),j])}finally{const et=Date.now()-d,at=Math.max(this._loopIntervalInMs-et,0);logger$1.verbose(`[${this._id}] Pausing the EventProcessor loop for ${at} ms.`),await delayWithoutThrow(at,a)}}c&&a.removeEventListener("abort",c),this._isRunning=!1}async _performLoadBalancing(e,a,c){if(c.aborted)throw new AbortError(StandardAbortMessage);const j=await this._checkpointStore.listOwnership(this._fullyQualifiedNamespace,this._eventHubName,this._consumerGroup);if(c.aborted)throw new AbortError(StandardAbortMessage);const{partitionOwnershipMap:d,partitionsToClaim:et}=computePartitionsToClaim({id:this._id,isReceivingFromPartition:at=>this._pumpManager.isReceivingFromPartition(at),loadBalancingStrategy:e,partitionIds:a,partitionOwnership:j});for(const at of et){const st=this._createPartitionOwnershipRequest(d,at);await this._claimOwnership(st,c)}}async _handleSubscriptionError(e){if(e.name!=="AbortError"&&this._subscriptionEventHandlers.processError)try{await this._subscriptionEventHandlers.processError(e,{fullyQualifiedNamespace:this._fullyQualifiedNamespace,eventHubName:this._eventHubName,consumerGroup:this._consumerGroup,partitionId:"",updateCheckpoint:async()=>{}})}catch(a){logger$1.verbose(`[${this._id}] An error was thrown from the user's processError handler: ${a}`)}}start(){if(this._isRunning){logger$1.verbose(`[${this._id}] Attempted to start an already running EventProcessor.`);return}this._isRunning=!0,this._abortController=new AbortController,logger$1.verbose(`[${this._id}] Starting an EventProcessor.`),this._processingTarget?(logger$1.verbose(`[${this._id}] Single partition target: ${this._processingTarget}`),this._loopTask=this._runLoopForSinglePartition(this._processingTarget,this._abortController.signal)):(logger$1.verbose(`[${this._id}] Multiple partitions, using load balancer`),this._loopTask=this._runLoopWithLoadBalancing(this._loadBalancingStrategy,this._abortController.signal))}isRunning(){return this._isRunning}async stop(){var e;logger$1.verbose(`[${this._id}] Stopping an EventProcessor.`),(e=this._abortController)===null||e===void 0||e.abort();try{await this._pumpManager.removeAllPumps(CloseReason.Shutdown),this._loopTask&&await this._loopTask}catch(a){logger$1.verbose(`[${this._id}] An error occurred while stopping the EventProcessor: ${a}`)}finally{logger$1.verbose(`[${this._id}] EventProcessor stopped.`)}this._processingTarget?logger$1.verbose(`[${this._id}] No partitions owned, skipping abandoning.`):await this.abandonPartitionOwnerships()}async abandonPartitionOwnerships(){logger$1.verbose(`[${this._id}] Abandoning owned partitions`);const a=(await this._checkpointStore.listOwnership(this._fullyQualifiedNamespace,this._eventHubName,this._consumerGroup)).filter(c=>c.ownerId===this._id);for(const c of a)c.ownerId="";return this._checkpointStore.claimOwnership(a)}}function isAbandoned(o){return o.ownerId===""}function getStartPosition(o,e){if(e==null)return latestEventPosition;if(isEventPosition(e))return e;const a=e[o];return a??latestEventPosition}function computePartitionsToClaim(o){const{partitionOwnership:e,id:a,isReceivingFromPartition:c,loadBalancingStrategy:j,partitionIds:d}=o,et=new Map,at=new Map,st=[];for(const ot of e)et.set(ot.partitionId,ot),isAbandoned(ot)||at.set(ot.partitionId,ot),ot.ownerId===a&&c(ot.partitionId)&&st.push(ot.partitionId);const ct=j.getPartitionsToClaim(a,at,d);return ct.push(...st),{partitionsToClaim:new Set(ct),partitionOwnershipMap:et}}function parseEventHubConnectionString(o){const e=parseConnectionString(o);validateProperties(e.Endpoint,e.SharedAccessSignature,e.SharedAccessKey,e.SharedAccessKeyName);const a={fullyQualifiedNamespace:(e.Endpoint.match(".*://([^/]*)")||[])[1],endpoint:e.Endpoint};return e.EntityPath&&(a.eventHubName=e.EntityPath),e.SharedAccessSignature&&(a.sharedAccessSignature=e.SharedAccessSignature),e.SharedAccessKey&&e.SharedAccessKeyName&&(a.sharedAccessKey=e.SharedAccessKey,a.sharedAccessKeyName=e.SharedAccessKeyName),a}function validateProperties(o,e,a,c){if(!o)throw new Error("Connection string should have an Endpoint key.");if(e){if(a||c)throw new Error("Connection string cannot have both SharedAccessSignature and SharedAccessKey keys.")}else{if(a&&!c)throw new Error("Connection string with SharedAccessKey should have SharedAccessKeyName.");if(!a&&c)throw new Error("Connection string with SharedAccessKeyName should have SharedAccessKey as well.")}}function throwErrorIfConnectionClosed(o){if(o&&o.wasConnectionCloseCalled){const e="The underlying AMQP connection is closed.",a=new Error(e);throw logger$1.warning(`[${o.connectionId}] ${a.name}: ${a.message}`),logErrorStackTrace$1(a),a}}function throwTypeErrorIfParameterMissing(o,e,a,c){if(!isDefined(c)){const j=new TypeError(`${e} called without required argument "${a}"`);throw logger$1.warning(`[${o}] ${j.name}: ${j.message}`),logErrorStackTrace$1(j),j}}var ConditionErrorNameMapper;(function(o){o["com.microsoft:out-of-order-sequence"]="SequenceOutOfOrderError",o["com.microsoft:producer-epoch-stolen"]="ProducerDisconnectedError"})(ConditionErrorNameMapper||(ConditionErrorNameMapper={}));class ManagementClient{constructor(e,{address:a,audience:c}={}){this.managementLock=getRandomName(Constants.managementRequestKey),this.replyTo=getRandomName(),this.address=a??Constants.management,this.audience=c??e.config.getManagementAudience(),this._context=e;const j=createManagementLogPrefix(this._context.connectionId);this.logger=createSimpleLogger(logger$1,j),this.entityPath=e.config.entityPath}async getSecurityToken(){if(isSasTokenProvider(this._context.tokenCredential)){const e=this.audience.split("/");e[e.length-1]===this.address&&e.pop();const a=e.join("/");return this._context.tokenCredential.getToken(a)}return this._context.tokenCredential.getToken(Constants.aadEventHubsScope)}async getEventHubProperties(e={}){return throwErrorIfConnectionClosed(this._context),tracingClient.withSpan("ManagementClient.getEventHubProperties",e,async a=>{try{const c=await this.getSecurityToken(),j={body:Buffer.from(JSON.stringify([])),message_id:getRandomName(),reply_to:this.replyTo,application_properties:{operation:Constants.readOperation,name:this.entityPath,type:`${Constants.vendorString}:${Constants.eventHub}`,security_token:c==null?void 0:c.token}},d=await this._makeManagementRequest(j,Object.assign(Object.assign({},a),{requestName:"getHubRuntimeInformation"})),et={name:d.name,createdOn:new Date(d.created_at),partitionIds:d.partition_ids};return logger$1.verbose("the hub runtime info is: %O",et),et}catch(c){throw logger$1.warning(`an error occurred while getting the hub runtime information: ${c==null?void 0:c.name}: ${c==null?void 0:c.message}`),logErrorStackTrace$1(c),c}},toSpanOptions(this._context.config))}async getPartitionProperties(e,a={}){return throwErrorIfConnectionClosed(this._context),throwTypeErrorIfParameterMissing(this._context.connectionId,"getPartitionProperties","partitionId",e),e=String(e),tracingClient.withSpan("ManagementClient.getPartitionProperties",a,async c=>{try{const j=await this.getSecurityToken(),d={body:Buffer.from(JSON.stringify([])),message_id:getRandomName(),reply_to:this.replyTo,application_properties:{operation:Constants.readOperation,name:this.entityPath,type:`${Constants.vendorString}:${Constants.partition}`,partition:`${e}`,security_token:j==null?void 0:j.token}},et=await this._makeManagementRequest(d,Object.assign(Object.assign({},c),{requestName:"getPartitionInformation"})),at={beginningSequenceNumber:et.begin_sequence_number,eventHubName:et.name,lastEnqueuedOffset:et.last_enqueued_offset,lastEnqueuedOnUtc:new Date(et.last_enqueued_time_utc),lastEnqueuedSequenceNumber:et.last_enqueued_sequence_number,partitionId:et.partition,isEmpty:et.is_partition_empty};return logger$1.verbose("the partition info is: %O.",at),at}catch(j){throw logger$1.warning(`an error occurred while getting the partition information: ${j==null?void 0:j.name}: ${j==null?void 0:j.message}`),logErrorStackTrace$1(j),j}},toSpanOptions(this._context.config))}async close(){var e;try{if((e=this.authLoop)===null||e===void 0||e.stop(),this._isMgmtRequestResponseLinkOpen()){const a=this._mgmtReqResLink;this._mgmtReqResLink=void 0,await a.close(),logger$1.info("successfully closed the management session.")}}catch(a){const c=`an error occurred while closing the management session: ${a==null?void 0:a.name}: ${a==null?void 0:a.message}`;throw logger$1.warning(c),logErrorStackTrace$1(a),new Error(c)}}async _init({abortSignal:e,timeoutInMs:a}){const c=async()=>{const j={source:{address:this.address},name:this.replyTo,target:{address:this.replyTo},onSessionError:et=>{const at=translate(et.session.error);logger$1.verbose("an error occurred on the session for request/response links for $management: %O",at)}},d={target:{address:this.address}};logger$1.verbose("creating sender/receiver links with srOpts: %o, receiverOpts: %O.",d,j),this._mgmtReqResLink=await RequestResponseLink.create(this._context.connection,d,j,{abortSignal:e}),this._mgmtReqResLink.sender.on(lib.SenderEvents.senderError,et=>{const at=translate(et.sender.error);logger$1.verbose("an error occurred on the $management sender link.. %O",at)}),this._mgmtReqResLink.receiver.on(lib.ReceiverEvents.receiverError,et=>{const at=translate(et.receiver.error);logger$1.verbose("an error occurred on the $management receiver link.. %O",at)}),logger$1.verbose("created sender '%s' and receiver '%s' links",this._mgmtReqResLink.sender.name,this._mgmtReqResLink.receiver.name)};try{this._isMgmtRequestResponseLinkOpen()||(await this._context.readyToOpenLink(),this.authLoop=await withAuth(c,this._context,this.audience,a,this.logger,{abortSignal:e}))}catch(j){const d=translate(j);throw logger$1.warning(`an error occurred while establishing the links: ${d==null?void 0:d.name}: ${d==null?void 0:d.message}`),logErrorStackTrace$1(d),d}}async _makeManagementRequest(e,a={}){const c=a.retryOptions||{};try{const j=a&&a.abortSignal,et=Object.defineProperties({operation:async()=>{let at=0;const st=getRetryAttemptTimeoutInMs(a.retryOptions);let ct=0;if(!this._isMgmtRequestResponseLinkOpen()){logger$1.verbose("acquiring lock to get the management req res link.");const ft=Date.now();try{await defaultCancellableLock.acquire(this.managementLock,()=>{const yt=Date.now(),vt=st-(yt-ft);return this._init({abortSignal:j,timeoutInMs:vt})},{abortSignal:j,timeoutInMs:st})}catch(yt){const vt=translate(yt);throw logger$1.warning("an error occurred while creating the link: %s",`${vt==null?void 0:vt.name}: ${vt==null?void 0:vt.message}`),logErrorStackTrace$1(vt),vt}ct=Date.now()-ft}const ot=st-ct,gt={abortSignal:a.abortSignal,requestName:a.requestName,timeoutInMs:ot};return at++,at!==1?e.message_id=getRandomName():e.message_id||(e.message_id=getRandomName()),this._mgmtReqResLink.sendRequest(e,gt)},operationType:RetryOperationType.management,abortSignal:j,retryOptions:c},{connectionId:{enumerable:!0,get:()=>this._context.connectionId}});return(await retry(et)).body}catch(j){const d=translate(j);throw logger$1.warning("an error occurred during send on management request-response link with address: %s",`${d==null?void 0:d.name}: ${d==null?void 0:d.message}`),logErrorStackTrace$1(d),d}}_isMgmtRequestResponseLinkOpen(){return this._mgmtReqResLink&&this._mgmtReqResLink.isOpen()}}function parseEndpoint(o){const e=o.match(/.*:\/\/([^/]*)/);if(!e)throw new TypeError(`Invalid endpoint missing host: ${o}`);const[,a]=e,[c,j]=a.split(":");return{host:a,hostname:c,port:j}}const EventHubConnectionConfig={create(o,e){const a=ConnectionConfig.create(o,e);if(!a.entityPath)throw new TypeError(`Either provide "path" or the "connectionString": "${o}", must contain EntityPath="<path-to-the-entity>".`);return EventHubConnectionConfig.createFromConnectionConfig(a)},createFromConnectionConfig(o){return ConnectionConfig.validate(o,{isEntityPathRequired:!0}),o.getManagementAudience=()=>`${o.endpoint}${o.entityPath}/$management`,o.getManagementAddress=()=>`${o.entityPath}/$management`,o.getSenderAudience=e=>e!=null?`${o.endpoint}${o.entityPath}/Partitions/${e}`:`${o.endpoint}${o.entityPath}`,o.getSenderAddress=e=>e!=null?`${o.entityPath}/Partitions/${e}`:`${o.entityPath}`,o.getReceiverAudience=(e,a)=>(a||(a="$default"),`${o.endpoint}${o.entityPath}/ConsumerGroups/${a}/Partitions/${e}`),o.getReceiverAddress=(e,a)=>(a||(a="$default"),`${o.entityPath}/ConsumerGroups/${a}/Partitions/${e}`),o},setCustomEndpointAddress(o,e){o.amqpHostname=o.host;const{hostname:a,port:c}=parseEndpoint(e);o.host=a,c&&(o.port=parseInt(c,10))},validate(o){return ConnectionConfig.validate(o,{isEntityPathRequired:!0})}};function getRuntimeInfo(){return`BROWSER-VERSION; Browser ${getReleaseInfo()}`}function getReleaseInfo(){return typeof self>"u"?"":self.navigator.appVersion}function isCredential(o){return isTokenCredential(o)||isNamedKeyCredential(o)||isSASCredential(o)}var ConnectionContext;(function(o){const e=`azsdk-js-azureeventhubs/${packageJsonInfo.version} (${getRuntimeInfo()})`;function a(j){const d=j.userAgent?`${e},${j.userAgent}`:e;if(d.length>Constants.maxUserAgentLength)throw new Error(`The user-agent string cannot be more than ${Constants.maxUserAgentLength} characters in length.The given user-agent string is: ${d} with length: ${d.length}`);return d}o.getUserAgent=a;function c(j,d,et){et||(et={}),j.webSocket=et.webSocketOptions&&et.webSocketOptions.webSocket,j.webSocketEndpointPath="$servicebus/websocket",j.webSocketConstructorOptions=et.webSocketOptions&&et.webSocketOptions.webSocketConstructorOptions;const at={config:j,isEntityPathRequired:!0,connectionProperties:{product:"MSJSClient",userAgent:a(et),version:packageJsonInfo.version}},st=ConnectionContextBase.create(at);st.tokenCredential=d,st.wasConnectionCloseCalled=!1,st.senders={},st.receivers={};const ct={address:et.managementSessionAddress,audience:et.managementSessionAudience};st.managementSession=new ManagementClient(st,ct);let ot,gt;Object.assign(st,{isConnectionClosing(){return!!(!this.connection.isOpen()&&this.connection.isRemoteOpen())},async readyToOpenLink(At){this.isConnectionClosing()&&await this.waitForDisconnectedEvent(At),await this.waitForConnectionReset()},waitForDisconnectedEvent(At){return createAbortablePromise(Ct=>{logger$1.verbose(`[${this.connectionId}] Attempting to reinitialize connection but the connection is in the process of closing. Waiting for the disconnect event before continuing.`),this.connection.once(lib.ConnectionEvents.disconnected,Ct)},At)},waitForConnectionReset(){return gt||Promise.resolve()},async close(){var At;try{this.connection.isOpen()&&(await Promise.all(Object.keys(st.senders).map(Ct=>{var dt;return(dt=st.senders[Ct])===null||dt===void 0?void 0:dt.close().catch(()=>{})})),await Promise.all(Object.keys(st.receivers).map(Ct=>{var dt;return(dt=st.receivers[Ct])===null||dt===void 0?void 0:dt.close().catch(()=>{})})),await this.cbsSession.close(),await((At=this.managementSession)===null||At===void 0?void 0:At.close()),await this.connection.close(),this.wasConnectionCloseCalled=!0,logger$1.info("Closed the amqp connection '%s' on the client.",this.connectionId))}catch(Ct){const dt=Ct instanceof Error?`${Ct.name}: ${Ct.message}`:JSON.stringify(Ct);throw logger$1.warning(`An error occurred while closing the connection "${this.connectionId}":
${dt}`),logErrorStackTrace$1(Ct),Ct}}});const ft=()=>{st.wasConnectionCloseCalled=!1,logger$1.verbose("[%s] setting 'wasConnectionCloseCalled' property of connection context to %s.",st.connection.id,st.wasConnectionCloseCalled)},yt=async At=>{var Ct,dt;if(!gt){gt=new Promise(Et=>{ot=Et});try{logger$1.verbose("[%s] 'disconnected' event occurred on the amqp connection.",st.connection.id),At.connection&&At.connection.error&&logger$1.verbose("[%s] Accompanying error on the context.connection: %O",st.connection.id,At.connection&&At.connection.error),At.error&&logger$1.verbose("[%s] Accompanying error on the context: %O",st.connection.id,At.error);const Et={wasConnectionCloseCalled:st.wasConnectionCloseCalled,numSenders:Object.keys(st.senders).length,numReceivers:Object.keys(st.receivers).length};logger$1.verbose("[%s] Closing all open senders and receivers in the state: %O",st.connection.id,Et),st.connection.removeAllSessions(),await((Ct=st.cbsSession)===null||Ct===void 0?void 0:Ct.close().catch(()=>{})),await((dt=st.managementSession)===null||dt===void 0?void 0:dt.close().catch(()=>{})),(Et.numSenders||Et.numReceivers)&&(await Promise.all(Object.keys(st.senders).map(Rt=>{var Mt;return(Mt=st.senders[Rt])===null||Mt===void 0?void 0:Mt.close().catch(()=>{})})),await Promise.all(Object.keys(st.receivers).map(Rt=>{var Mt;return(Mt=st.receivers[Rt])===null||Mt===void 0?void 0:Mt.close().catch(()=>{})})))}catch(Et){logger$1.verbose(`[${st.connectionId}] An error occurred while closing the connection in 'disconnected'. %O`,Et)}try{await wt(st)}catch(Et){logger$1.verbose(`[${st.connectionId}] An error occurred while refreshing the connection in 'disconnected'. %O`,Et)}finally{ot(),gt=void 0}}},vt=async At=>{logger$1.verbose("[%s] 'protocol_error' event occurred on the amqp connection.",st.connection.id),At.connection&&At.connection.error&&logger$1.verbose("[%s] Accompanying error on the context.connection: %O",st.connection.id,At.connection&&At.connection.error),At.error&&logger$1.verbose("[%s] Accompanying error on the context: %O",st.connection.id,At.error)},rt=async At=>{logger$1.verbose("[%s] 'error' event occurred on the amqp connection.",st.connection.id),At.connection&&At.connection.error&&logger$1.verbose("[%s] Accompanying error on the context.connection: %O",st.connection.id,At.connection&&At.connection.error),At.error&&logger$1.verbose("[%s] Accompanying error on the context: %O",st.connection.id,At.error)};function bt(At){At.on(lib.ConnectionEvents.connectionOpen,ft),At.on(lib.ConnectionEvents.disconnected,yt),At.on(lib.ConnectionEvents.protocolError,vt),At.on(lib.ConnectionEvents.error,rt)}function ht(At){return At.connection.removeListener(lib.ConnectionEvents.connectionOpen,ft),At.connection.removeListener(lib.ConnectionEvents.disconnected,yt),At.connection.removeListener(lib.ConnectionEvents.protocolError,vt),At.connection.removeListener(lib.ConnectionEvents.error,rt),At.connection.close()}async function wt(At){const Ct=At.connectionId;try{await ht(At)}catch(dt){logger$1.verbose(`[${At.connectionId}] There was an error closing the connection before reconnecting: %O`,dt)}At.refreshConnection(),bt(At.connection),logger$1.verbose(`The connection "${Ct}" has been updated to "${At.connectionId}".`)}return bt(st.connection),logger$1.verbose("[%s] Created connection context successfully.",st.connectionId),st}o.create=c})(ConnectionContext||(ConnectionContext={}));function createConnectionContext(o,e,a,c){let j,d,et;if(o=String(o),isCredential(a)){const at=e;let st=o;if(isNamedKeyCredential(a)||isSASCredential(a)?et=createSasTokenProvider(a):et=a,!at)throw new TypeError('"eventHubName" is missing');st.endsWith("/")||(st+="/"),j=`Endpoint=sb://${st};SharedAccessKeyName=defaultKeyName;SharedAccessKey=defaultKeyValue;EntityPath=${at}`,d=EventHubConnectionConfig.create(j)}else{const at=parseEventHubConnectionString(o);if(!(at.eventHubName||typeof e=="string"&&e))throw new TypeError(`Either provide "eventHubName" or the "connectionString": "${o}", must contain "EntityPath=<your-event-hub-name>".`);if(at.eventHubName&&typeof e=="string"&&e&&at.eventHubName!==e)throw new TypeError(`The entity path "${at.eventHubName}" in connectionString: "${o}" doesn't match with eventHubName: "${e}".`);if(j=o,typeof e!="string")d=EventHubConnectionConfig.create(j),c=e;else{const ct=e;d=EventHubConnectionConfig.create(j,ct),c=a}const st=parseEventHubConnectionString(j);et=createSasTokenProvider(st)}return c!=null&&c.customEndpointAddress&&EventHubConnectionConfig.setCustomEndpointAddress(d,c.customEndpointAddress),ConnectionConfig.validate(d),ConnectionContext.create(d,et,c)}function getActivePartitionOwnerships(o,e){const a=new Map;return o.forEach((c,j)=>{if(typeof c.lastModifiedTimeInMs>"u"||c.lastModifiedTimeInMs===null)return;Date.now()-c.lastModifiedTimeInMs<e&&c.ownerId&&a.set(j,c)}),a}function calculateBalancedLoadCounts(o,e){const a=Math.floor(e.length/o.size),c=e.length%o.size;return{minPartitionsPerOwner:a,requiredNumberOfOwnersWithExtraPartition:c}}function getEventProcessorCounts(o,e){const a={haveRequiredPartitions:0,haveAdditionalPartition:0,haveTooManyPartitions:0};for(const c of e.values()){const j=c.length;j===o?a.haveRequiredPartitions++:j===o+1?a.haveAdditionalPartition++:j>o+1&&a.haveTooManyPartitions++}return a}function isLoadBalanced(o,e,{haveAdditionalPartition:a,haveRequiredPartitions:c}){return a===o&&c+a===e}function getNumberOfPartitionsToClaim(o,e,a,{haveAdditionalPartition:c,haveTooManyPartitions:j}){let d=o;return e>0&&c+j<e&&(d=o+1),d-a}function findPartitionsToSteal(o,e,a,c,j){const d=[],et=[];j.forEach((ct,ot)=>{ot===c||ct.length<=e||et.push(ct)}),et.sort((ct,ot)=>ct.length>ot.length?-1:ct.length<ot.length?1:0);let at=0,st=et.shift();for(;o>0&&st;){let ct=e;at<a&&ct++,at++;let ot=st.length-ct;for(;Math.min(o,ot);){const gt=Math.floor(Math.random()*st.length);d.push(st.splice(gt,1)[0].partitionId),o--,ot--}st=et.shift()}return d}function listAvailablePartitions(o,e,a,c){if(!a.length)return[];const j=getActivePartitionOwnerships(e,c);if(logger$1.verbose(`[${o}] Number of active ownership records: ${j.size}.`),j.size===0)return a;const d=new Map;for(const yt of j.values()){const vt=d.get(yt.ownerId)||[];vt.push(yt),d.set(yt.ownerId,vt)}d.has(o)||d.set(o,[]),logger$1.info(`[${o}] Number of active event processors: ${d.size}.`);const{minPartitionsPerOwner:et,requiredNumberOfOwnersWithExtraPartition:at}=calculateBalancedLoadCounts(d,a);logger$1.verbose(`[${o}] Expected minimum number of partitions per event processor: ${et},expected number of event processors with additional partition: ${at}.`);const st=getEventProcessorCounts(et,d);if(isLoadBalanced(at,d.size,st))return[];let ct=getNumberOfPartitionsToClaim(et,at,d.get(o).length,st);if(ct<=0)return[];const ot=[],gt=a.filter(yt=>!j.has(yt));for(;Math.min(ct,gt.length);){const yt=Math.floor(Math.random()*gt.length);ot.push(gt.splice(yt,1)[0]),ct--}if(ct===0)return ot;const ft=findPartitionsToSteal(ct,et,at,o,d);return ot.concat(ft)}class BalancedLoadBalancingStrategy{constructor(e){this._partitionOwnershipExpirationIntervalInMs=e}getPartitionsToClaim(e,a,c){const j=listAvailablePartitions(e,a,c,this._partitionOwnershipExpirationIntervalInMs);if(!j.length)return[];const d=Math.floor(Math.random()*j.length);return[j[d]]}}class GreedyLoadBalancingStrategy{constructor(e){this._partitionOwnershipExpirationIntervalInMs=e}getPartitionsToClaim(e,a,c){return listAvailablePartitions(e,a,c,this._partitionOwnershipExpirationIntervalInMs)}}class InMemoryCheckpointStore{constructor(){this._partitionOwnershipMap=new Map,this._committedCheckpoints=new Map}async listOwnership(e,a,c){const j=[];for(const d of this._partitionOwnershipMap.values())j.push(Object.assign({},d));return j}async claimOwnership(e){const a=[];for(const c of e)if(!this._partitionOwnershipMap.has(c.partitionId)||this._partitionOwnershipMap.get(c.partitionId).etag===c.etag){const j=new Date,d=Object.assign(Object.assign({},c),{etag:getRandomName(),lastModifiedTimeInMs:j.getTime()});this._partitionOwnershipMap.set(d.partitionId,d),a.push(d)}return a}async updateCheckpoint(e){throwTypeErrorIfParameterMissing("","updateCheckpoint","sequenceNumber",e.sequenceNumber),throwTypeErrorIfParameterMissing("","updateCheckpoint","offset",e.offset),e=Object.assign({},e);const a=this._partitionOwnershipMap.get(e.partitionId);if(a){a.etag=getRandomName();const c=`${e.fullyQualifiedNamespace}:${e.eventHubName}:${e.consumerGroup}`;let j=this._committedCheckpoints.get(c);j==null&&(j=new Map,this._committedCheckpoints.set(c,j)),j.set(e.partitionId,e)}}async listCheckpoints(e,a,c){const j=`${e}:${a}:${c}`,d=this._committedCheckpoints.get(j);if(d==null)return[];const et=[];for(const at of d.values())et.push(Object.assign({},at));return et}}class PartitionGate{constructor(){this._partitions=new Set}add(e){if(e==="all"&&this._partitions.size>0||this._partitions.has(e)||this._partitions.has("all"))throw new Error("Partition already has a subscriber.");this._partitions.add(e)}remove(e){this._partitions.delete(e)}}class UnbalancedLoadBalancingStrategy{getPartitionsToClaim(e,a,c){return c}}const defaultConsumerClientOptions={maxBatchSize:1,maxWaitTimeInSeconds:60};class EventHubConsumerClient{get eventHubName(){return this._context.config.entityPath}get fullyQualifiedNamespace(){return this._context.config.host}constructor(e,a,c,j,d,et){var at,st;this._consumerGroup=e,this._partitionGate=new PartitionGate,this._subscriptions=new Set,isCredential(j)?(logger$1.info("Creating EventHubConsumerClient with TokenCredential."),isCheckpointStore(d)?(this._checkpointStore=d,this._userChoseCheckpointStore=!0,this._clientOptions=et||{}):(this._checkpointStore=new InMemoryCheckpointStore,this._userChoseCheckpointStore=!1,this._clientOptions=d||{}),this._context=createConnectionContext(a,c,j,this._clientOptions)):typeof c=="string"?(logger$1.info("Creating EventHubConsumerClient with connection string and event hub name."),isCheckpointStore(j)?(this._checkpointStore=j,this._userChoseCheckpointStore=!0,this._clientOptions=d||{}):(this._checkpointStore=new InMemoryCheckpointStore,this._userChoseCheckpointStore=!1,this._clientOptions=j||{}),this._context=createConnectionContext(a,c,this._clientOptions)):(logger$1.info("Creating EventHubConsumerClient with connection string."),isCheckpointStore(c)?(this._checkpointStore=c,this._userChoseCheckpointStore=!0,this._clientOptions=j||{}):(this._checkpointStore=new InMemoryCheckpointStore,this._userChoseCheckpointStore=!1,this._clientOptions=c||{}),this._context=createConnectionContext(a,this._clientOptions)),this.identifier=(at=this._clientOptions.identifier)!==null&&at!==void 0?at:getRandomName(),this._loadBalancingOptions=Object.assign({strategy:"balanced",updateIntervalInMs:1e4,partitionOwnershipExpirationIntervalInMs:6e4},(st=this._clientOptions)===null||st===void 0?void 0:st.loadBalancingOptions)}async close(){const e=Array.from(this._subscriptions);return await Promise.all(e.map(a=>a.close())),this._context.close()}getPartitionIds(e={}){return this._context.managementSession.getEventHubProperties(Object.assign(Object.assign({},e),{retryOptions:this._clientOptions.retryOptions})).then(a=>a.partitionIds)}getPartitionProperties(e,a={}){return this._context.managementSession.getPartitionProperties(e,Object.assign(Object.assign({},a),{retryOptions:this._clientOptions.retryOptions}))}getEventHubProperties(e={}){return this._context.managementSession.getEventHubProperties(Object.assign(Object.assign({},e),{retryOptions:this._clientOptions.retryOptions}))}subscribe(e,a,c){let j,d;if(isSubscriptionEventHandlers(e)){const at=a;at&&at.startPosition&&validateEventPositions(at.startPosition),{targetedPartitionId:d,eventProcessor:j}=this.createEventProcessorForAllPartitions(e,at)}else if(isSubscriptionEventHandlers(a)){const at=c;at&&at.startPosition&&validateEventPositions(at.startPosition),{targetedPartitionId:d,eventProcessor:j}=this.createEventProcessorForSinglePartition(String(e),a,c)}else throw new TypeError("Unhandled subscribe() overload");j.start();const et={get isRunning(){return j.isRunning()},close:()=>(this._partitionGate.remove(d),this._subscriptions.delete(et),j.stop())};return this._subscriptions.add(et),et}_getLoadBalancingStrategy(){var e;if(!this._userChoseCheckpointStore)return new UnbalancedLoadBalancingStrategy;const a=this._loadBalancingOptions.partitionOwnershipExpirationIntervalInMs;return((e=this._loadBalancingOptions)===null||e===void 0?void 0:e.strategy)==="greedy"?new GreedyLoadBalancingStrategy(a):new BalancedLoadBalancingStrategy(a)}createEventProcessorForAllPartitions(e,a){this._partitionGate.add("all"),this._userChoseCheckpointStore?logger$1.verbose("EventHubConsumerClient subscribing to all partitions, using a checkpoint store."):logger$1.verbose("EventHubConsumerClient subscribing to all partitions, no checkpoint store.");const c=this._getLoadBalancingStrategy();return{targetedPartitionId:"all",eventProcessor:this._createEventProcessor(this._context,e,this._checkpointStore,Object.assign(Object.assign(Object.assign({},defaultConsumerClientOptions),a),{ownerLevel:getOwnerLevel(a,this._userChoseCheckpointStore),ownerId:this.identifier,retryOptions:this._clientOptions.retryOptions,loadBalancingStrategy:c,loopIntervalInMs:this._loadBalancingOptions.updateIntervalInMs}))}}createEventProcessorForSinglePartition(e,a,c){var j;this._partitionGate.add(e);const d=c;this._userChoseCheckpointStore?logger$1.verbose(`EventHubConsumerClient subscribing to specific partition (${e}), using a checkpoint store.`):logger$1.verbose(`EventHubConsumerClient subscribing to specific partition (${e}), no checkpoint store.`);const et=this._createEventProcessor(this._context,a,this._checkpointStore,Object.assign(Object.assign(Object.assign({},defaultConsumerClientOptions),c),{processingTarget:e,ownerLevel:getOwnerLevel(d,this._userChoseCheckpointStore),retryOptions:this._clientOptions.retryOptions,loadBalancingStrategy:new UnbalancedLoadBalancingStrategy,loopIntervalInMs:(j=this._loadBalancingOptions.updateIntervalInMs)!==null&&j!==void 0?j:1e4}));return{targetedPartitionId:e,eventProcessor:et}}_createEventProcessor(e,a,c,j){return new EventProcessor(this._consumerGroup,e,a,c,j)}}EventHubConsumerClient.defaultConsumerGroupName=Constants.defaultConsumerGroup;function isCheckpointStore(o){if(!o)return!1;const e=o;return typeof e.claimOwnership=="function"&&typeof e.listCheckpoints=="function"&&typeof e.listOwnership=="function"&&typeof e.updateCheckpoint=="function"}function isSubscriptionEventHandlers(o){return typeof o.processEvents=="function"}function getOwnerLevel(o,e){if(o&&o.ownerLevel)return o.ownerLevel;if(e)return 0}const initialState={assetId:"",assetStatus:"nominal"},statusSlice=createSlice({name:"status",initialState,reducers:{setStatus:(o,e)=>{o.assetId=e.payload.assetId,o.assetStatus=e.payload.assetStatus}}}),{setStatus}=statusSlice.actions,statusReducer=statusSlice.reducer;process$1.nextTick=o=>Promise.resolve().then(o);const EventHubStreamComponent=({eventHubsResourceName:o,eventHubName:e,consumerGroup:a})=>{const c=useDispatch(),{instance:j,inProgress:d}=useMsal(),et=useIsAuthenticated(),[at,st]=reactExports.useState([]),[ct,ot]=reactExports.useState("Not Started"),[gt,ft]=reactExports.useState(!1),[yt,vt]=reactExports.useState(),[rt,bt]=reactExports.useState(),ht=5,wt=`${o}.servicebus.windows.net`,At=reactExports.useMemo(()=>({scopes:["https://eventhubs.azure.net/.default"]}),[]),Ct=(nt,s)=>{c(setStatus({assetId:nt,assetStatus:s}))},dt=reactExports.useCallback(async()=>{if(d!==InteractionStatus.None){console.warn("MSAL is not ready yet.");return}try{const nt={...At,account:j.getActiveAccount()};return(await j.acquireTokenSilent(nt)).accessToken}catch(nt){console.warn("Silent token acquisition failed, attempting redirect",nt);try{j.acquireTokenRedirect(At)}catch(s){throw console.error("Redirect token acquisition failed",s),s}}},[d,j,At]),Et=reactExports.useMemo(()=>({getToken:async()=>({token:await dt(),expiresOnTimestamp:Date.now()+3600*1e3})}),[dt]),Rt=reactExports.useCallback((nt,s)=>{if(ft(!1),vt(void 0),nt.length===0){ot("No events received within wait time. Waiting for next interval"),console.log("No events received within wait time. Waiting for next interval");return}nt.length>0&&nt[0].body!=null&&nt[0].body.Pressure001!=null&&(nt[0].body.Pressure001.Value>1?Ct("Pump 1","fault"):Ct("Pump 1","nominal")),ot(`Received ${nt.length} event(s)`),st([]),st(b=>[...b,...nt]),s.updateCheckpoint(nt[nt.length-1])},[]),Mt=reactExports.useCallback((nt,s)=>{console.log("Error:",nt,s),ft(!0),vt(b=>b||JSON.stringify(nt))},[ht]),_t=reactExports.useCallback(async(nt,s)=>{try{rt&&await rt.close();const b=nt.subscribe({processInitialize:async $=>{console.log(`Initialized subscription for partition ${$.partitionId}`,$),ot(`Initialized subscription for partition ${$.partitionId}`),ft(!1)},processClose:async($,_e)=>{console.log(`Closing subscription due to ${$}.`),ot(`Stopped processing events from partition ${_e.partitionId}`)},processEvents:async($,_e)=>{Rt($,_e)},processError:s},{startPosition:latestEventPosition});bt(b),ot("Subscription created, waiting for events...")}catch(b){console.error("Failed to create subscription:",b)}},[Rt]),kt=reactExports.useCallback(nt=>{rt==null||rt.close(),nt.close()},[rt]);return reactExports.useEffect(()=>{if(!et)return;console.log("Creating Event Hub consumer client...");const nt=new EventHubConsumerClient(a,wt,e,Et);return _t(nt,Mt),()=>{kt(nt)}},[a,wt,e,Et,_t,et]),jsxRuntimeExports.jsxs("div",{id:"eventView",children:[jsxRuntimeExports.jsx("ul",{children:at.map((nt,s)=>jsxRuntimeExports.jsxs("li",{children:["Pressure001: ",nt.body.Pressure001!=null?nt.body.Pressure001.Value:""]},s))}),jsxRuntimeExports.jsxs("div",{id:"eventErrors",children:[ct,gt,yt]})]})};var powerbi={exports:{}},hasRequiredPowerbi;function requirePowerbi(){return hasRequiredPowerbi||(hasRequiredPowerbi=1,function(o,e){(function(c,j){o.exports=j()})(commonjsGlobal,()=>(()=>{var a={"./node_modules/http-post-message/dist/httpPostMessage.js":function(et){/*! http-post-message v0.2.3 | (c) 2016 Microsoft Corporation MIT */(function(st,ct){et.exports=ct()})(this,function(){return function(at){var st={};function ct(ot){if(st[ot])return st[ot].exports;var gt=st[ot]={exports:{},id:ot,loaded:!1};return at[ot].call(gt.exports,gt,gt.exports,ct),gt.loaded=!0,gt.exports}return ct.m=at,ct.c=st,ct.p="",ct(0)}([function(at,st){var ct=function(){function ot(gt,ft,yt){ft===void 0&&(ft={}),this.defaultHeaders=ft,this.defaultTargetWindow=yt,this.windowPostMessageProxy=gt}return ot.addTrackingProperties=function(gt,ft){return gt.headers=gt.headers||{},ft&&ft.id&&(gt.headers.id=ft.id),gt},ot.getTrackingProperties=function(gt){return{id:gt.headers&&gt.headers.id}},ot.isErrorMessage=function(gt){return typeof(gt&&gt.statusCode)!="number"?!1:!(200<=gt.statusCode&&gt.statusCode<300)},ot.prototype.get=function(gt,ft,yt){return ft===void 0&&(ft={}),yt===void 0&&(yt=this.defaultTargetWindow),this.send({method:"GET",url:gt,headers:ft},yt)},ot.prototype.post=function(gt,ft,yt,vt){return yt===void 0&&(yt={}),vt===void 0&&(vt=this.defaultTargetWindow),this.send({method:"POST",url:gt,headers:yt,body:ft},vt)},ot.prototype.put=function(gt,ft,yt,vt){return yt===void 0&&(yt={}),vt===void 0&&(vt=this.defaultTargetWindow),this.send({method:"PUT",url:gt,headers:yt,body:ft},vt)},ot.prototype.patch=function(gt,ft,yt,vt){return yt===void 0&&(yt={}),vt===void 0&&(vt=this.defaultTargetWindow),this.send({method:"PATCH",url:gt,headers:yt,body:ft},vt)},ot.prototype.delete=function(gt,ft,yt,vt){return ft===void 0&&(ft=null),yt===void 0&&(yt={}),vt===void 0&&(vt=this.defaultTargetWindow),this.send({method:"DELETE",url:gt,headers:yt,body:ft},vt)},ot.prototype.send=function(gt,ft){if(ft===void 0&&(ft=this.defaultTargetWindow),gt.headers=this.assign({},this.defaultHeaders,gt.headers),!ft)throw new Error("target window is not provided.  You must either provide the target window explicitly as argument to request, or specify default target window when constructing instance of this class.");return this.windowPostMessageProxy.postMessage(ft,gt)},ot.prototype.assign=function(gt){for(var ft=[],yt=1;yt<arguments.length;yt++)ft[yt-1]=arguments[yt];if(gt==null)throw new TypeError("Cannot convert undefined or null to object");var vt=Object(gt);return ft.forEach(function(rt){if(rt!=null)for(var bt in rt)Object.prototype.hasOwnProperty.call(rt,bt)&&(vt[bt]=rt[bt])}),vt},ot}();st.HttpPostMessage=ct}])})},"./node_modules/powerbi-models/dist/models.js":function(et){(function(st,ct){et.exports=ct()})(this,()=>(()=>{var at=[function(gt,ft,yt){var vt=this&&this.__extends||function(){var $t=function(or,Yr){return $t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Vr,Hr){Vr.__proto__=Hr}||function(Vr,Hr){for(var Mn in Hr)Object.prototype.hasOwnProperty.call(Hr,Mn)&&(Vr[Mn]=Hr[Mn])},$t(or,Yr)};return function(or,Yr){if(typeof Yr!="function"&&Yr!==null)throw new TypeError("Class extends value "+String(Yr)+" is not a constructor or null");$t(or,Yr);function Vr(){this.constructor=or}or.prototype=Yr===null?Object.create(Yr):(Vr.prototype=Yr.prototype,new Vr)}}();Object.defineProperty(ft,"__esModule",{value:!0}),ft.CommonErrorCodes=ft.BookmarksPlayMode=ft.ExportDataType=ft.QnaMode=ft.PageNavigationPosition=ft.BrowserPrintAdjustmentsMode=ft.AggregateFunction=ft.DataCacheMode=ft.CredentialType=ft.isPercentOfGrandTotal=ft.isColumnAggr=ft.isHierarchyLevelAggr=ft.isHierarchyLevel=ft.isColumn=ft.isMeasure=ft.getFilterType=ft.isBasicFilterWithKeys=ft.isFilterKeyColumnsTarget=ft.HierarchyIdentityFilter=ft.HierarchyFilter=ft.AdvancedFilter=ft.TupleFilter=ft.IdentityFilter=ft.BasicFilterWithKeys=ft.BasicFilter=ft.RelativeTimeFilter=ft.RelativeDateFilter=ft.TopNFilter=ft.IncludeExcludeFilter=ft.NotSupportedFilter=ft.Filter=ft.RelativeDateOperators=ft.RelativeDateFilterTimeUnit=ft.FilterType=ft.FiltersLevel=ft.FiltersOperations=ft.MenuLocation=ft.ContrastMode=ft.TokenType=ft.ViewMode=ft.Permissions=ft.SectionVisibility=ft.ReportAlignment=ft.HyperlinkClickBehavior=ft.LayoutType=ft.VisualContainerDisplayMode=ft.BackgroundType=ft.DisplayOption=ft.PageSizeType=ft.TraceType=void 0,ft.validateExportDataRequest=ft.validateQnaInterpretInputData=ft.validateLoadQnaConfiguration=ft.validateSaveAsParameters=ft.validateUpdateFiltersRequest=ft.validateFilter=ft.validatePage=ft.validateTileLoad=ft.validateDashboardLoad=ft.validateQuickCreate=ft.validateCreateReport=ft.validatePaginatedReportLoad=ft.validateReportLoad=ft.validateMenuGroupExtension=ft.validateExtension=ft.validateCustomPageSize=ft.validateVisualizationsPane=ft.validateSyncSlicersPane=ft.validateSelectionPane=ft.validatePageNavigationPane=ft.validateFieldsPane=ft.validateFiltersPane=ft.validateBookmarksPane=ft.validatePanes=ft.validateSettings=ft.validateCaptureBookmarkRequest=ft.validateApplyBookmarkStateRequest=ft.validateApplyBookmarkByNameRequest=ft.validateAddBookmarkRequest=ft.validatePlayBookmarkRequest=ft.validateSlicerState=ft.validateSlicer=ft.validateVisualSelector=ft.isIExtensionArray=ft.isIExtensions=ft.isGroupedMenuExtension=ft.isFlatMenuExtension=ft.isReportFiltersArray=ft.isOnLoadFilters=ft.VisualDataRoleKindPreference=ft.VisualDataRoleKind=ft.CommandDisplayOption=ft.SlicerTargetSelector=ft.VisualTypeSelector=ft.VisualSelector=ft.PageSelector=ft.Selector=ft.SortDirection=ft.LegendPosition=ft.TextAlignment=void 0,ft.validatePrintSettings=ft.validateZoomLevel=ft.validateCustomTheme=ft.validateCommandsSettings=ft.validateVisualSettings=ft.validateVisualHeader=void 0;var rt=yt(1);(function($t){$t[$t.Information=0]="Information",$t[$t.Verbose=1]="Verbose",$t[$t.Warning=2]="Warning",$t[$t.Error=3]="Error",$t[$t.ExpectedError=4]="ExpectedError",$t[$t.UnexpectedError=5]="UnexpectedError",$t[$t.Fatal=6]="Fatal"})(ft.TraceType||(ft.TraceType={})),function($t){$t[$t.Widescreen=0]="Widescreen",$t[$t.Standard=1]="Standard",$t[$t.Cortana=2]="Cortana",$t[$t.Letter=3]="Letter",$t[$t.Custom=4]="Custom",$t[$t.Mobile=5]="Mobile"}(ft.PageSizeType||(ft.PageSizeType={})),function($t){$t[$t.FitToPage=0]="FitToPage",$t[$t.FitToWidth=1]="FitToWidth",$t[$t.ActualSize=2]="ActualSize"}(ft.DisplayOption||(ft.DisplayOption={})),function($t){$t[$t.Default=0]="Default",$t[$t.Transparent=1]="Transparent"}(ft.BackgroundType||(ft.BackgroundType={})),function($t){$t[$t.Visible=0]="Visible",$t[$t.Hidden=1]="Hidden"}(ft.VisualContainerDisplayMode||(ft.VisualContainerDisplayMode={})),function($t){$t[$t.Master=0]="Master",$t[$t.Custom=1]="Custom",$t[$t.MobilePortrait=2]="MobilePortrait",$t[$t.MobileLandscape=3]="MobileLandscape"}(ft.LayoutType||(ft.LayoutType={})),function($t){$t[$t.Navigate=0]="Navigate",$t[$t.NavigateAndRaiseEvent=1]="NavigateAndRaiseEvent",$t[$t.RaiseEvent=2]="RaiseEvent"}(ft.HyperlinkClickBehavior||(ft.HyperlinkClickBehavior={})),function($t){$t[$t.Left=0]="Left",$t[$t.Center=1]="Center",$t[$t.Right=2]="Right",$t[$t.None=3]="None"}(ft.ReportAlignment||(ft.ReportAlignment={})),function($t){$t[$t.AlwaysVisible=0]="AlwaysVisible",$t[$t.HiddenInViewMode=1]="HiddenInViewMode"}(ft.SectionVisibility||(ft.SectionVisibility={})),function($t){$t[$t.Read=0]="Read",$t[$t.ReadWrite=1]="ReadWrite",$t[$t.Copy=2]="Copy",$t[$t.Create=4]="Create",$t[$t.All=7]="All"}(ft.Permissions||(ft.Permissions={})),function($t){$t[$t.View=0]="View",$t[$t.Edit=1]="Edit"}(ft.ViewMode||(ft.ViewMode={})),function($t){$t[$t.Aad=0]="Aad",$t[$t.Embed=1]="Embed"}(ft.TokenType||(ft.TokenType={})),function($t){$t[$t.None=0]="None",$t[$t.HighContrast1=1]="HighContrast1",$t[$t.HighContrast2=2]="HighContrast2",$t[$t.HighContrastBlack=3]="HighContrastBlack",$t[$t.HighContrastWhite=4]="HighContrastWhite"}(ft.ContrastMode||(ft.ContrastMode={})),function($t){$t[$t.Bottom=0]="Bottom",$t[$t.Top=1]="Top"}(ft.MenuLocation||(ft.MenuLocation={})),function($t){$t[$t.RemoveAll=0]="RemoveAll",$t[$t.ReplaceAll=1]="ReplaceAll",$t[$t.Add=2]="Add",$t[$t.Replace=3]="Replace"}(ft.FiltersOperations||(ft.FiltersOperations={})),function($t){$t[$t.Report=0]="Report",$t[$t.Page=1]="Page",$t[$t.Visual=2]="Visual"}(ft.FiltersLevel||(ft.FiltersLevel={}));var bt;(function($t){$t[$t.Advanced=0]="Advanced",$t[$t.Basic=1]="Basic",$t[$t.Unknown=2]="Unknown",$t[$t.IncludeExclude=3]="IncludeExclude",$t[$t.RelativeDate=4]="RelativeDate",$t[$t.TopN=5]="TopN",$t[$t.Tuple=6]="Tuple",$t[$t.RelativeTime=7]="RelativeTime",$t[$t.Identity=8]="Identity",$t[$t.Hierarchy=9]="Hierarchy",$t[$t.HierarchyIdentity=10]="HierarchyIdentity"})(bt=ft.FilterType||(ft.FilterType={})),function($t){$t[$t.Days=0]="Days",$t[$t.Weeks=1]="Weeks",$t[$t.CalendarWeeks=2]="CalendarWeeks",$t[$t.Months=3]="Months",$t[$t.CalendarMonths=4]="CalendarMonths",$t[$t.Years=5]="Years",$t[$t.CalendarYears=6]="CalendarYears",$t[$t.Minutes=7]="Minutes",$t[$t.Hours=8]="Hours"}(ft.RelativeDateFilterTimeUnit||(ft.RelativeDateFilterTimeUnit={})),function($t){$t[$t.InLast=0]="InLast",$t[$t.InThis=1]="InThis",$t[$t.InNext=2]="InNext"}(ft.RelativeDateOperators||(ft.RelativeDateOperators={}));var ht=function(){function $t(or,Yr){this.target=or,this.filterType=Yr}return $t.prototype.toJSON=function(){var or={$schema:this.schemaUrl,target:this.target,filterType:this.filterType};return this.displaySettings!==void 0&&(or.displaySettings=this.displaySettings),or},$t}();ft.Filter=ht;var wt=function($t){vt(or,$t);function or(Yr,Vr,Hr){var Mn=$t.call(this,Yr,bt.Unknown)||this;return Mn.message=Vr,Mn.notSupportedTypeName=Hr,Mn.schemaUrl=or.schemaUrl,Mn}return or.prototype.toJSON=function(){var Yr=$t.prototype.toJSON.call(this);return Yr.message=this.message,Yr.notSupportedTypeName=this.notSupportedTypeName,Yr},or.schemaUrl="http://powerbi.com/product/schema#notSupported",or}(ht);ft.NotSupportedFilter=wt;var At=function($t){vt(or,$t);function or(Yr,Vr,Hr){var Mn=$t.call(this,Yr,bt.IncludeExclude)||this;return Mn.target=Yr,Mn.values=Hr,Mn.isExclude=Vr,Mn.schemaUrl=or.schemaUrl,Mn}return or.prototype.toJSON=function(){var Yr=$t.prototype.toJSON.call(this);return Yr.isExclude=this.isExclude,Yr.values=this.values,Yr},or.schemaUrl="http://powerbi.com/product/schema#includeExclude",or}(ht);ft.IncludeExcludeFilter=At;var Ct=function($t){vt(or,$t);function or(Yr,Vr,Hr,Mn){var Ur=$t.call(this,Yr,bt.TopN)||this;return Ur.operator=Vr,Ur.itemCount=Hr,Ur.schemaUrl=or.schemaUrl,Ur.orderBy=Mn,Ur}return or.prototype.toJSON=function(){var Yr=$t.prototype.toJSON.call(this);return Yr.operator=this.operator,Yr.itemCount=this.itemCount,Yr.orderBy=this.orderBy,Yr},or.schemaUrl="http://powerbi.com/product/schema#topN",or}(ht);ft.TopNFilter=Ct;var dt=function($t){vt(or,$t);function or(Yr,Vr,Hr,Mn,Ur){var tn=$t.call(this,Yr,bt.RelativeDate)||this;return tn.operator=Vr,tn.timeUnitsCount=Hr,tn.timeUnitType=Mn,tn.includeToday=Ur,tn.schemaUrl=or.schemaUrl,tn}return or.prototype.toJSON=function(){var Yr=$t.prototype.toJSON.call(this);return Yr.operator=this.operator,Yr.timeUnitsCount=this.timeUnitsCount,Yr.timeUnitType=this.timeUnitType,Yr.includeToday=this.includeToday,Yr},or.schemaUrl="http://powerbi.com/product/schema#relativeDate",or}(ht);ft.RelativeDateFilter=dt;var Et=function($t){vt(or,$t);function or(Yr,Vr,Hr,Mn){var Ur=$t.call(this,Yr,bt.RelativeTime)||this;return Ur.operator=Vr,Ur.timeUnitsCount=Hr,Ur.timeUnitType=Mn,Ur.schemaUrl=or.schemaUrl,Ur}return or.prototype.toJSON=function(){var Yr=$t.prototype.toJSON.call(this);return Yr.operator=this.operator,Yr.timeUnitsCount=this.timeUnitsCount,Yr.timeUnitType=this.timeUnitType,Yr},or.schemaUrl="http://powerbi.com/product/schema#relativeTime",or}(ht);ft.RelativeTimeFilter=Et;var Rt=function($t){vt(or,$t);function or(Yr,Vr){for(var Hr=[],Mn=2;Mn<arguments.length;Mn++)Hr[Mn-2]=arguments[Mn];var Ur=$t.call(this,Yr,bt.Basic)||this;if(Ur.operator=Vr,Ur.schemaUrl=or.schemaUrl,Hr.length===0&&Vr!=="All")throw new Error('values must be a non-empty array unless your operator is "All".');return Array.isArray(Hr[0])?Ur.values=Hr[0]:Ur.values=Hr,Ur}return or.prototype.toJSON=function(){var Yr=$t.prototype.toJSON.call(this);return Yr.operator=this.operator,Yr.values=this.values,Yr.requireSingleSelection=!!this.requireSingleSelection,Yr},or.schemaUrl="http://powerbi.com/product/schema#basic",or}(ht);ft.BasicFilter=Rt;var Mt=function($t){vt(or,$t);function or(Yr,Vr,Hr,Mn){var Ur=$t.call(this,Yr,Vr,Hr)||this;Ur.keyValues=Mn,Ur.target=Yr;var tn=Yr.keys?Yr.keys.length:0;if(tn>0&&!Mn)throw new Error("You should pass the values to be filtered for each key. You passed: no values and ".concat(tn," keys"));if(tn===0&&Mn&&Mn.length>0)throw new Error("You passed key values but your target object doesn't contain the keys to be filtered");for(var jn=0,Un=Ur.keyValues;jn<Un.length;jn++){var ao=Un[jn];if(ao){var co=ao.length;if(co!==tn)throw new Error("Each tuple of key values should contain a value for each of the keys. You passed: ".concat(co," values and ").concat(tn," keys"))}}return Ur}return or.prototype.toJSON=function(){var Yr=$t.prototype.toJSON.call(this);return Yr.keyValues=this.keyValues,Yr},or}(Rt);ft.BasicFilterWithKeys=Mt;var _t=function($t){vt(or,$t);function or(Yr,Vr){var Hr=$t.call(this,Yr,bt.Identity)||this;return Hr.operator=Vr,Hr.schemaUrl=or.schemaUrl,Hr}return or.prototype.toJSON=function(){var Yr=$t.prototype.toJSON.call(this);return Yr.operator=this.operator,Yr.target=this.target,Yr},or.schemaUrl="http://powerbi.com/product/schema#identity",or}(ht);ft.IdentityFilter=_t;var kt=function($t){vt(or,$t);function or(Yr,Vr,Hr){var Mn=$t.call(this,Yr,bt.Tuple)||this;return Mn.operator=Vr,Mn.schemaUrl=or.schemaUrl,Mn.values=Hr,Mn}return or.prototype.toJSON=function(){var Yr=$t.prototype.toJSON.call(this);return Yr.operator=this.operator,Yr.values=this.values,Yr.target=this.target,Yr},or.schemaUrl="http://powerbi.com/product/schema#tuple",or}(ht);ft.TupleFilter=kt;var nt=function($t){vt(or,$t);function or(Yr,Vr){for(var Hr=[],Mn=2;Mn<arguments.length;Mn++)Hr[Mn-2]=arguments[Mn];var Ur=$t.call(this,Yr,bt.Advanced)||this;if(Ur.schemaUrl=or.schemaUrl,typeof Vr!="string"||Vr.length===0)throw new Error("logicalOperator must be a valid operator, You passed: ".concat(Vr));Ur.logicalOperator=Vr;var tn;if(Array.isArray(Hr[0])?tn=Hr[0]:tn=Hr,tn.length>2)throw new Error("AdvancedFilters may not have more than two conditions. You passed: ".concat(Hr.length));if(tn.length===1&&Vr!=="And")throw new Error('Logical Operator must be "And" when there is only one condition provided');return Ur.conditions=tn,Ur}return or.prototype.toJSON=function(){var Yr=$t.prototype.toJSON.call(this);return Yr.logicalOperator=this.logicalOperator,Yr.conditions=this.conditions,Yr},or.schemaUrl="http://powerbi.com/product/schema#advanced",or}(ht);ft.AdvancedFilter=nt;var s=function($t){vt(or,$t);function or(Yr,Vr){var Hr=$t.call(this,Yr,bt.Hierarchy)||this;return Hr.schemaUrl=or.schemaUrl,Hr.hierarchyData=Vr,Hr}return or.prototype.toJSON=function(){var Yr=$t.prototype.toJSON.call(this);return Yr.hierarchyData=this.hierarchyData,Yr.target=this.target,Yr},or.schemaUrl="http://powerbi.com/product/schema#hierarchy",or}(ht);ft.HierarchyFilter=s;var b=function($t){vt(or,$t);function or(Yr,Vr){var Hr=$t.call(this,Yr,bt.HierarchyIdentity)||this;return Hr.schemaUrl=or.schemaUrl,Hr.hierarchyData=Vr,Hr}return or.prototype.toJSON=function(){var Yr=$t.prototype.toJSON.call(this);return Yr.hierarchyData=this.hierarchyData,Yr.target=this.target,Yr},or.schemaUrl="http://powerbi.com/product/schema#hierarchyIdentity",or}(ht);ft.HierarchyIdentityFilter=b;function $($t){return mt($t)&&!!$t.keys}ft.isFilterKeyColumnsTarget=$;function _e($t){return it($t)===bt.Basic&&!!$t.keyValues}ft.isBasicFilterWithKeys=_e;function it($t){if($t.filterType)return $t.filterType;var or=$t,Yr=$t;return typeof or.operator=="string"&&Array.isArray(or.values)?bt.Basic:typeof Yr.logicalOperator=="string"&&Array.isArray(Yr.conditions)?bt.Advanced:bt.Unknown}ft.getFilterType=it;function pt($t){return $t.table!==void 0&&$t.measure!==void 0}ft.isMeasure=pt;function mt($t){return!!($t.table&&$t.column&&!$t.aggregationFunction)}ft.isColumn=mt;function lt($t){return!!($t.table&&$t.hierarchy&&$t.hierarchyLevel&&!$t.aggregationFunction)}ft.isHierarchyLevel=lt;function _($t){return!!($t.table&&$t.hierarchy&&$t.hierarchyLevel&&$t.aggregationFunction)}ft.isHierarchyLevelAggr=_;function tt($t){return!!($t.table&&$t.column&&$t.aggregationFunction)}ft.isColumnAggr=tt;function Tt($t){return!!$t.percentOfGrandTotal}ft.isPercentOfGrandTotal=Tt,function($t){$t[$t.NoConnection=0]="NoConnection",$t[$t.OnBehalfOf=1]="OnBehalfOf",$t[$t.Anonymous=2]="Anonymous"}(ft.CredentialType||(ft.CredentialType={})),function($t){$t[$t.Import=0]="Import",$t[$t.DirectQuery=1]="DirectQuery"}(ft.DataCacheMode||(ft.DataCacheMode={})),function($t){$t[$t.Default=1]="Default",$t[$t.None=2]="None",$t[$t.Sum=3]="Sum",$t[$t.Min=4]="Min",$t[$t.Max=5]="Max",$t[$t.Count=6]="Count",$t[$t.Average=7]="Average",$t[$t.DistinctCount=8]="DistinctCount"}(ft.AggregateFunction||(ft.AggregateFunction={})),function($t){$t[$t.Default=0]="Default",$t[$t.NoAdjustments=1]="NoAdjustments"}(ft.BrowserPrintAdjustmentsMode||(ft.BrowserPrintAdjustmentsMode={})),function($t){$t[$t.Bottom=0]="Bottom",$t[$t.Left=1]="Left"}(ft.PageNavigationPosition||(ft.PageNavigationPosition={})),function($t){$t[$t.Interactive=0]="Interactive",$t[$t.ResultOnly=1]="ResultOnly"}(ft.QnaMode||(ft.QnaMode={})),function($t){$t[$t.Summarized=0]="Summarized",$t[$t.Underlying=1]="Underlying"}(ft.ExportDataType||(ft.ExportDataType={})),function($t){$t[$t.Off=0]="Off",$t[$t.Presentation=1]="Presentation"}(ft.BookmarksPlayMode||(ft.BookmarksPlayMode={})),ft.CommonErrorCodes={TokenExpired:"TokenExpired",NotFound:"PowerBIEntityNotFound",InvalidParameters:"Invalid parameters",LoadReportFailed:"LoadReportFailed",NotAuthorized:"PowerBINotAuthorizedException",FailedToLoadModel:"ExplorationContainer_FailedToLoadModel_DefaultDetails"},ft.TextAlignment={Left:"left",Center:"center",Right:"right"},ft.LegendPosition={Top:"Top",Bottom:"Bottom",Right:"Right",Left:"Left",TopCenter:"TopCenter",BottomCenter:"BottomCenter",RightCenter:"RightCenter",LeftCenter:"LeftCenter"},function($t){$t[$t.Ascending=1]="Ascending",$t[$t.Descending=2]="Descending"}(ft.SortDirection||(ft.SortDirection={}));var It=function(){function $t(or){this.$schema=or}return $t.prototype.toJSON=function(){return{$schema:this.$schema}},$t}();ft.Selector=It;var Nt=function($t){vt(or,$t);function or(Yr){var Vr=$t.call(this,or.schemaUrl)||this;return Vr.pageName=Yr,Vr}return or.prototype.toJSON=function(){var Yr=$t.prototype.toJSON.call(this);return Yr.pageName=this.pageName,Yr},or.schemaUrl="http://powerbi.com/product/schema#pageSelector",or}(It);ft.PageSelector=Nt;var Ut=function($t){vt(or,$t);function or(Yr){var Vr=$t.call(this,or.schemaUrl)||this;return Vr.visualName=Yr,Vr}return or.prototype.toJSON=function(){var Yr=$t.prototype.toJSON.call(this);return Yr.visualName=this.visualName,Yr},or.schemaUrl="http://powerbi.com/product/schema#visualSelector",or}(It);ft.VisualSelector=Ut;var Gt=function($t){vt(or,$t);function or(Yr){var Vr=$t.call(this,Ut.schemaUrl)||this;return Vr.visualType=Yr,Vr}return or.prototype.toJSON=function(){var Yr=$t.prototype.toJSON.call(this);return Yr.visualType=this.visualType,Yr},or.schemaUrl="http://powerbi.com/product/schema#visualTypeSelector",or}(It);ft.VisualTypeSelector=Gt;var Pt=function($t){vt(or,$t);function or(Yr){var Vr=$t.call(this,Ut.schemaUrl)||this;return Vr.target=Yr,Vr}return or.prototype.toJSON=function(){var Yr=$t.prototype.toJSON.call(this);return Yr.target=this.target,Yr},or.schemaUrl="http://powerbi.com/product/schema#slicerTargetSelector",or}(It);ft.SlicerTargetSelector=Pt,function($t){$t[$t.Enabled=0]="Enabled",$t[$t.Disabled=1]="Disabled",$t[$t.Hidden=2]="Hidden"}(ft.CommandDisplayOption||(ft.CommandDisplayOption={})),function($t){$t[$t.Grouping=0]="Grouping",$t[$t.Measure=1]="Measure",$t[$t.GroupingOrMeasure=2]="GroupingOrMeasure"}(ft.VisualDataRoleKind||(ft.VisualDataRoleKind={})),function($t){$t[$t.Measure=0]="Measure",$t[$t.Grouping=1]="Grouping"}(ft.VisualDataRoleKindPreference||(ft.VisualDataRoleKindPreference={}));function qt($t){return $t&&!Kt($t)}ft.isOnLoadFilters=qt;function Kt($t){return Array.isArray($t)}ft.isReportFiltersArray=Kt;function jt($t){return $t&&!Ht($t)}ft.isFlatMenuExtension=jt;function Ht($t){return $t&&!!$t.groupName}ft.isGroupedMenuExtension=Ht;function Bt($t){return $t&&!Jt($t)}ft.isIExtensions=Bt;function Jt($t){return Array.isArray($t)}ft.isIExtensionArray=Jt;function sr($t){var or=$t.message;return or||(or="".concat($t.path," is invalid. Not meeting ").concat($t.keyword," constraint")),{message:or}}function hr($t){var or=rt.Validators.visualSelectorValidator.validate($t);return or?or.map(sr):void 0}ft.validateVisualSelector=hr;function Ar($t){var or=rt.Validators.slicerValidator.validate($t);return or?or.map(sr):void 0}ft.validateSlicer=Ar;function gn($t){var or=rt.Validators.slicerStateValidator.validate($t);return or?or.map(sr):void 0}ft.validateSlicerState=gn;function Lr($t){var or=rt.Validators.playBookmarkRequestValidator.validate($t);return or?or.map(sr):void 0}ft.validatePlayBookmarkRequest=Lr;function wr($t){var or=rt.Validators.addBookmarkRequestValidator.validate($t);return or?or.map(sr):void 0}ft.validateAddBookmarkRequest=wr;function En($t){var or=rt.Validators.applyBookmarkByNameRequestValidator.validate($t);return or?or.map(sr):void 0}ft.validateApplyBookmarkByNameRequest=En;function Dr($t){var or=rt.Validators.applyBookmarkStateRequestValidator.validate($t);return or?or.map(sr):void 0}ft.validateApplyBookmarkStateRequest=Dr;function Qr($t){var or=rt.Validators.captureBookmarkRequestValidator.validate($t);return or?or.map(sr):void 0}ft.validateCaptureBookmarkRequest=Qr;function Dn($t){var or=rt.Validators.settingsValidator.validate($t);return or?or.map(sr):void 0}ft.validateSettings=Dn;function Br($t){var or=rt.Validators.reportPanesValidator.validate($t);return or?or.map(sr):void 0}ft.validatePanes=Br;function Gr($t){var or=rt.Validators.bookmarksPaneValidator.validate($t);return or?or.map(sr):void 0}ft.validateBookmarksPane=Gr;function Ln($t){var or=rt.Validators.filtersPaneValidator.validate($t);return or?or.map(sr):void 0}ft.validateFiltersPane=Ln;function Fr($t){var or=rt.Validators.fieldsPaneValidator.validate($t);return or?or.map(sr):void 0}ft.validateFieldsPane=Fr;function _i($t){var or=rt.Validators.pageNavigationPaneValidator.validate($t);return or?or.map(sr):void 0}ft.validatePageNavigationPane=_i;function Kn($t){var or=rt.Validators.selectionPaneValidator.validate($t);return or?or.map(sr):void 0}ft.validateSelectionPane=Kn;function Wt($t){var or=rt.Validators.syncSlicersPaneValidator.validate($t);return or?or.map(sr):void 0}ft.validateSyncSlicersPane=Wt;function Lt($t){var or=rt.Validators.visualizationsPaneValidator.validate($t);return or?or.map(sr):void 0}ft.validateVisualizationsPane=Lt;function zt($t){var or=rt.Validators.customPageSizeValidator.validate($t);return or?or.map(sr):void 0}ft.validateCustomPageSize=zt;function Zt($t){var or=rt.Validators.extensionValidator.validate($t);return or?or.map(sr):void 0}ft.validateExtension=Zt;function ar($t){var or=rt.Validators.menuGroupExtensionValidator.validate($t);return or?or.map(sr):void 0}ft.validateMenuGroupExtension=ar;function Or($t){var or=rt.Validators.reportLoadValidator.validate($t);return or?or.map(sr):void 0}ft.validateReportLoad=Or;function vr($t){var or=rt.Validators.paginatedReportLoadValidator.validate($t);return or?or.map(sr):void 0}ft.validatePaginatedReportLoad=vr;function Rr($t){var or=rt.Validators.reportCreateValidator.validate($t);return or?or.map(sr):void 0}ft.validateCreateReport=Rr;function fr($t){var or=rt.Validators.quickCreateValidator.validate($t);return or?or.map(sr):void 0}ft.validateQuickCreate=fr;function tr($t){var or=rt.Validators.dashboardLoadValidator.validate($t);return or?or.map(sr):void 0}ft.validateDashboardLoad=tr;function yr($t){var or=rt.Validators.tileLoadValidator.validate($t);return or?or.map(sr):void 0}ft.validateTileLoad=yr;function fn($t){var or=rt.Validators.pageValidator.validate($t);return or?or.map(sr):void 0}ft.validatePage=fn;function Nr($t){var or=rt.Validators.filterValidator.validate($t);return or?or.map(sr):void 0}ft.validateFilter=Nr;function zr($t){var or=rt.Validators.updateFiltersRequestValidator.validate($t);return or?or.map(sr):void 0}ft.validateUpdateFiltersRequest=zr;function xn($t){var or=rt.Validators.saveAsParametersValidator.validate($t);return or?or.map(sr):void 0}ft.validateSaveAsParameters=xn;function Kr($t){var or=rt.Validators.loadQnaValidator.validate($t);return or?or.map(sr):void 0}ft.validateLoadQnaConfiguration=Kr;function nn($t){var or=rt.Validators.qnaInterpretInputDataValidator.validate($t);return or?or.map(sr):void 0}ft.validateQnaInterpretInputData=nn;function Wn($t){var or=rt.Validators.exportDataRequestValidator.validate($t);return or?or.map(sr):void 0}ft.validateExportDataRequest=Wn;function Zr($t){var or=rt.Validators.visualHeaderValidator.validate($t);return or?or.map(sr):void 0}ft.validateVisualHeader=Zr;function on($t){var or=rt.Validators.visualSettingsValidator.validate($t);return or?or.map(sr):void 0}ft.validateVisualSettings=on;function Xn($t){var or=rt.Validators.commandsSettingsValidator.validate($t);return or?or.map(sr):void 0}ft.validateCommandsSettings=Xn;function en($t){var or=rt.Validators.customThemeValidator.validate($t);return or?or.map(sr):void 0}ft.validateCustomTheme=en;function ln($t){var or=rt.Validators.zoomLevelValidator.validate($t);return or?or.map(sr):void 0}ft.validateZoomLevel=ln;function Zn($t){var or=rt.Validators.printSettingsValidator.validate($t);return or?or.map(sr):void 0}ft.validatePrintSettings=Zn},(gt,ft,yt)=>{Object.defineProperty(ft,"__esModule",{value:!0}),ft.Validators=void 0;var vt=yt(2),rt=yt(5),bt=yt(6),ht=yt(7),wt=yt(8),At=yt(9),Ct=yt(10),dt=yt(11),Et=yt(12),Rt=yt(13),Mt=yt(14),_t=yt(15),kt=yt(16),nt=yt(17),s=yt(18),b=yt(19),$=yt(20),_e=yt(21),it=yt(22),pt=yt(23),mt=yt(24),lt=yt(25),_=yt(26),tt=yt(27),Tt=yt(28),It=yt(29),Nt=yt(4),Ut=yt(30),Gt=yt(31),Pt=yt(32),qt=yt(33),Kt=yt(34);ft.Validators={addBookmarkRequestValidator:new rt.AddBookmarkRequestValidator,advancedFilterTypeValidator:new Nt.EnumValidator([0]),advancedFilterValidator:new Et.AdvancedFilterValidator,anyArrayValidator:new Nt.ArrayValidator([new _.AnyOfValidator([new Nt.StringValidator,new Nt.NumberValidator,new Nt.BooleanValidator])]),anyFilterValidator:new _.AnyOfValidator([new Et.BasicFilterValidator,new Et.AdvancedFilterValidator,new Et.IncludeExcludeFilterValidator,new Et.NotSupportedFilterValidator,new Et.RelativeDateFilterValidator,new Et.TopNFilterValidator,new Et.RelativeTimeFilterValidator,new Et.HierarchyFilterValidator]),anyValueValidator:new _.AnyOfValidator([new Nt.StringValidator,new Nt.NumberValidator,new Nt.BooleanValidator]),actionBarValidator:new vt.ActionBarValidator,statusBarValidator:new vt.StatusBarValidator,applyBookmarkByNameRequestValidator:new rt.ApplyBookmarkByNameRequestValidator,applyBookmarkStateRequestValidator:new rt.ApplyBookmarkStateRequestValidator,applyBookmarkValidator:new _.AnyOfValidator([new rt.ApplyBookmarkByNameRequestValidator,new rt.ApplyBookmarkStateRequestValidator]),backgroundValidator:new Nt.EnumValidator([0,1]),basicFilterTypeValidator:new Nt.EnumValidator([1]),basicFilterValidator:new Et.BasicFilterValidator,booleanArrayValidator:new Nt.BooleanArrayValidator,booleanValidator:new Nt.BooleanValidator,bookmarksPaneValidator:new _t.BookmarksPaneValidator,captureBookmarkOptionsValidator:new rt.CaptureBookmarkOptionsValidator,captureBookmarkRequestValidator:new rt.CaptureBookmarkRequestValidator,columnSchemaArrayValidator:new Nt.ArrayValidator([new Gt.ColumnSchemaValidator]),commandDisplayOptionValidator:new Nt.EnumValidator([0,1,2]),commandExtensionSelectorValidator:new _.AnyOfValidator([new _e.VisualSelectorValidator,new _e.VisualTypeSelectorValidator]),commandExtensionArrayValidator:new Nt.ArrayValidator([new dt.CommandExtensionValidator]),commandExtensionValidator:new dt.CommandExtensionValidator,commandsSettingsArrayValidator:new Nt.ArrayValidator([new bt.CommandsSettingsValidator]),commandsSettingsValidator:new bt.CommandsSettingsValidator,conditionItemValidator:new Et.ConditionItemValidator,contrastModeValidator:new Nt.EnumValidator([0,1,2,3,4]),credentialDetailsValidator:new It.MapValidator([new Nt.StringValidator],[new Nt.StringValidator]),credentialsValidator:new Gt.CredentialsValidator,credentialTypeValidator:new Nt.EnumValidator([0,1,2]),customLayoutDisplayOptionValidator:new Nt.EnumValidator([0,1,2]),customLayoutValidator:new Rt.CustomLayoutValidator,customPageSizeValidator:new Mt.CustomPageSizeValidator,customThemeValidator:new ht.CustomThemeValidator,dashboardLoadValidator:new wt.DashboardLoadValidator,dataCacheModeValidator:new Nt.EnumValidator([0,1]),datasetBindingValidator:new At.DatasetBindingValidator,datasetCreateConfigValidator:new Gt.DatasetCreateConfigValidator,datasourceConnectionConfigValidator:new Gt.DatasourceConnectionConfigValidator,displayStateModeValidator:new Nt.EnumValidator([0,1]),displayStateValidator:new Rt.DisplayStateValidator,exportDataRequestValidator:new Ct.ExportDataRequestValidator,extensionArrayValidator:new Nt.ArrayValidator([new dt.ExtensionValidator]),extensionsValidator:new _.AnyOfValidator([new Nt.ArrayValidator([new dt.ExtensionValidator]),new dt.ExtensionsValidator]),extensionPointsValidator:new dt.ExtensionPointsValidator,extensionValidator:new dt.ExtensionValidator,fieldForbiddenValidator:new tt.FieldForbiddenValidator,fieldRequiredValidator:new Tt.FieldRequiredValidator,fieldsPaneValidator:new _t.FieldsPaneValidator,filterColumnTargetValidator:new Et.FilterColumnTargetValidator,filterDisplaySettingsValidator:new Et.FilterDisplaySettingsValidator,filterConditionsValidator:new Nt.ArrayValidator([new Et.ConditionItemValidator]),filterHierarchyTargetValidator:new Et.FilterHierarchyTargetValidator,filterMeasureTargetValidator:new Et.FilterMeasureTargetValidator,filterTargetValidator:new _.AnyOfValidator([new Et.FilterColumnTargetValidator,new Et.FilterHierarchyTargetValidator,new Et.FilterMeasureTargetValidator,new Nt.ArrayValidator([new _.AnyOfValidator([new Et.FilterColumnTargetValidator,new Et.FilterHierarchyTargetValidator,new Et.FilterMeasureTargetValidator,new Et.FilterKeyColumnsTargetValidator,new Et.FilterKeyHierarchyTargetValidator,new Nt.ArrayValidator([new _.AnyOfValidator([new Et.FilterColumnTargetValidator,new Et.FilterHierarchyTargetValidator,new Et.FilterMeasureTargetValidator,new Et.FilterKeyColumnsTargetValidator,new Et.FilterKeyHierarchyTargetValidator])])])])]),filterValidator:new Et.FilterValidator,filterTypeValidator:new Nt.EnumValidator([0,1,2,3,4,5,6,7,9]),filtersArrayValidator:new Nt.ArrayValidator([new Et.FilterValidator]),filtersOperationsUpdateValidator:new Nt.EnumValidator([1,2,3]),filtersOperationsRemoveAllValidator:new Nt.EnumValidator([0]),filtersPaneValidator:new _t.FiltersPaneValidator,hyperlinkClickBehaviorValidator:new Nt.EnumValidator([0,1,2]),includeExcludeFilterValidator:new Et.IncludeExcludeFilterValidator,includeExludeFilterTypeValidator:new Nt.EnumValidator([3]),includeExcludeFilterValuesValidator:new Nt.ArrayValidator([new _.AnyOfValidator([new Nt.StringValidator,new Nt.NumberValidator,new Nt.BooleanValidator,new Nt.ArrayValidator([new Nt.ArrayValidator([new Et.IncludeExcludePointValueValidator])])])]),hierarchyFilterTypeValidator:new Nt.EnumValidator([9]),hierarchyFilterValuesValidator:new Nt.ArrayValidator([new Et.HierarchyFilterNodeValidator]),layoutTypeValidator:new Nt.EnumValidator([0,1,2,3]),loadQnaValidator:new kt.LoadQnaValidator,menuExtensionValidator:new _.AnyOfValidator([new dt.FlatMenuExtensionValidator,new dt.GroupedMenuExtensionValidator]),menuGroupExtensionArrayValidator:new Nt.ArrayValidator([new dt.MenuGroupExtensionValidator]),menuGroupExtensionValidator:new dt.MenuGroupExtensionValidator,menuLocationValidator:new Nt.EnumValidator([0,1]),notSupportedFilterTypeValidator:new Nt.EnumValidator([2]),notSupportedFilterValidator:new Et.NotSupportedFilterValidator,numberArrayValidator:new Nt.NumberArrayValidator,numberValidator:new Nt.NumberValidator,onLoadFiltersBaseValidator:new _.AnyOfValidator([new Et.OnLoadFiltersBaseValidator,new Et.OnLoadFiltersBaseRemoveOperationValidator]),pageLayoutValidator:new It.MapValidator([new Nt.StringValidator],[new Rt.VisualLayoutValidator]),pageNavigationPaneValidator:new _t.PageNavigationPaneValidator,pageNavigationPositionValidator:new Nt.EnumValidator([0,1]),pageSizeTypeValidator:new Nt.EnumValidator([0,1,2,3,4,5]),pageSizeValidator:new Mt.PageSizeValidator,pageValidator:new Mt.PageValidator,pageViewFieldValidator:new Mt.PageViewFieldValidator,pagesLayoutValidator:new It.MapValidator([new Nt.StringValidator],[new Rt.PageLayoutValidator]),paginatedReportCommandsValidator:new bt.PaginatedReportCommandsValidator,paginatedReportDatasetBindingArrayValidator:new Nt.ArrayValidator([new Kt.PaginatedReportDatasetBindingValidator]),paginatedReportLoadValidator:new b.PaginatedReportLoadValidator,paginatedReportsettingsValidator:new it.PaginatedReportSettingsValidator,parameterValuesArrayValidator:new Nt.ArrayValidator([new b.ReportParameterFieldsValidator]),parametersPanelValidator:new Ut.ParametersPanelValidator,permissionsValidator:new Nt.EnumValidator([0,1,2,4,7]),playBookmarkRequestValidator:new rt.PlayBookmarkRequestValidator,printSettingsValidator:new qt.PrintSettingsValidator,qnaInterpretInputDataValidator:new kt.QnaInterpretInputDataValidator,qnaPanesValidator:new _t.QnaPanesValidator,qnaSettingValidator:new kt.QnaSettingsValidator,quickCreateValidator:new Pt.QuickCreateValidator,rawDataValidator:new Nt.ArrayValidator([new Nt.ArrayValidator([new Nt.StringValidator])]),relativeDateFilterOperatorValidator:new Nt.EnumValidator([0,1,2]),relativeDateFilterTimeUnitTypeValidator:new Nt.EnumValidator([0,1,2,3,4,5,6]),relativeDateFilterTypeValidator:new Nt.EnumValidator([4]),relativeDateFilterValidator:new Et.RelativeDateFilterValidator,relativeDateTimeFilterTypeValidator:new Nt.EnumValidator([4,7]),relativeDateTimeFilterUnitTypeValidator:new Nt.EnumValidator([0,1,2,3,4,5,6,7,8]),relativeTimeFilterTimeUnitTypeValidator:new Nt.EnumValidator([7,8]),relativeTimeFilterTypeValidator:new Nt.EnumValidator([7]),relativeTimeFilterValidator:new Et.RelativeTimeFilterValidator,reportBarsValidator:new vt.ReportBarsValidator,reportCreateValidator:new nt.ReportCreateValidator,reportLoadFiltersValidator:new _.AnyOfValidator([new Nt.ArrayValidator([new Et.FilterValidator]),new Et.OnLoadFiltersValidator]),reportLoadValidator:new s.ReportLoadValidator,reportPanesValidator:new _t.ReportPanesValidator,saveAsParametersValidator:new $.SaveAsParametersValidator,selectionPaneValidator:new _t.SelectionPaneValidator,settingsValidator:new it.SettingsValidator,singleCommandSettingsValidator:new bt.SingleCommandSettingsValidator,slicerSelectorValidator:new _.AnyOfValidator([new _e.VisualSelectorValidator,new _e.SlicerTargetSelectorValidator]),slicerStateValidator:new pt.SlicerStateValidator,slicerTargetValidator:new _.AnyOfValidator([new Et.FilterColumnTargetValidator,new Et.FilterHierarchyTargetValidator,new Et.FilterMeasureTargetValidator,new Et.FilterKeyColumnsTargetValidator,new Et.FilterKeyHierarchyTargetValidator]),slicerValidator:new pt.SlicerValidator,stringArrayValidator:new Nt.StringArrayValidator,stringValidator:new Nt.StringValidator,syncSlicersPaneValidator:new _t.SyncSlicersPaneValidator,tableDataArrayValidator:new Nt.ArrayValidator([new Gt.TableDataValidator]),tableSchemaListValidator:new Nt.ArrayValidator([new Gt.TableSchemaValidator]),tileLoadValidator:new mt.TileLoadValidator,tokenTypeValidator:new Nt.EnumValidator([0,1]),topNFilterTypeValidator:new Nt.EnumValidator([5]),topNFilterValidator:new Et.TopNFilterValidator,updateFiltersRequestValidator:new _.AnyOfValidator([new Et.UpdateFiltersRequestValidator,new Et.RemoveFiltersRequestValidator]),viewModeValidator:new Nt.EnumValidator([0,1]),visualCommandSelectorValidator:new _.AnyOfValidator([new _e.VisualSelectorValidator,new _e.VisualTypeSelectorValidator]),visualHeaderSelectorValidator:new _.AnyOfValidator([new _e.VisualSelectorValidator,new _e.VisualTypeSelectorValidator]),visualHeaderSettingsValidator:new lt.VisualHeaderSettingsValidator,visualHeaderValidator:new lt.VisualHeaderValidator,visualHeadersValidator:new Nt.ArrayValidator([new lt.VisualHeaderValidator]),visualizationsPaneValidator:new _t.VisualizationsPaneValidator,visualLayoutValidator:new Rt.VisualLayoutValidator,visualSelectorValidator:new _e.VisualSelectorValidator,visualSettingsValidator:new lt.VisualSettingsValidator,visualTypeSelectorValidator:new _e.VisualTypeSelectorValidator,zoomLevelValidator:new Nt.RangeValidator(.25,4)}},function(gt,ft,yt){var vt=this&&this.__extends||function(){var dt=function(Et,Rt){return dt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Mt,_t){Mt.__proto__=_t}||function(Mt,_t){for(var kt in _t)Object.prototype.hasOwnProperty.call(_t,kt)&&(Mt[kt]=_t[kt])},dt(Et,Rt)};return function(Et,Rt){if(typeof Rt!="function"&&Rt!==null)throw new TypeError("Class extends value "+String(Rt)+" is not a constructor or null");dt(Et,Rt);function Mt(){this.constructor=Et}Et.prototype=Rt===null?Object.create(Rt):(Mt.prototype=Rt.prototype,new Mt)}}();Object.defineProperty(ft,"__esModule",{value:!0}),ft.StatusBarValidator=ft.ActionBarValidator=ft.ReportBarsValidator=void 0;var rt=yt(3),bt=yt(4),ht=yt(1),wt=function(dt){vt(Et,dt);function Et(){return dt!==null&&dt.apply(this,arguments)||this}return Et.prototype.validate=function(Rt,Mt,_t){if(Rt==null)return null;var kt=dt.prototype.validate.call(this,Rt,Mt,_t);if(kt)return kt;var nt=[{field:"actionBar",validators:[ht.Validators.actionBarValidator]},{field:"statusBar",validators:[ht.Validators.statusBarValidator]}],s=new rt.MultipleFieldsValidator(nt);return s.validate(Rt,Mt,_t)},Et}(bt.ObjectValidator);ft.ReportBarsValidator=wt;var At=function(dt){vt(Et,dt);function Et(){return dt!==null&&dt.apply(this,arguments)||this}return Et.prototype.validate=function(Rt,Mt,_t){if(Rt==null)return null;var kt=dt.prototype.validate.call(this,Rt,Mt,_t);if(kt)return kt;var nt=[{field:"visible",validators:[ht.Validators.booleanValidator]}],s=new rt.MultipleFieldsValidator(nt);return s.validate(Rt,Mt,_t)},Et}(bt.ObjectValidator);ft.ActionBarValidator=At;var Ct=function(dt){vt(Et,dt);function Et(){return dt!==null&&dt.apply(this,arguments)||this}return Et.prototype.validate=function(Rt,Mt,_t){if(Rt==null)return null;var kt=dt.prototype.validate.call(this,Rt,Mt,_t);if(kt)return kt;var nt=[{field:"visible",validators:[ht.Validators.booleanValidator]}],s=new rt.MultipleFieldsValidator(nt);return s.validate(Rt,Mt,_t)},Et}(bt.ObjectValidator);ft.StatusBarValidator=Ct},(gt,ft)=>{Object.defineProperty(ft,"__esModule",{value:!0}),ft.MultipleFieldsValidator=void 0;var yt=function(){function vt(rt){this.fieldValidatorsPairs=rt}return vt.prototype.validate=function(rt,bt,ht){if(!this.fieldValidatorsPairs)return null;for(var wt=bt?bt+"."+ht:ht,At=0,Ct=this.fieldValidatorsPairs;At<Ct.length;At++)for(var dt=Ct[At],Et=0,Rt=dt.validators;Et<Rt.length;Et++){var Mt=Rt[Et],_t=Mt.validate(rt[dt.field],wt,dt.field);if(_t)return _t}return null},vt}();ft.MultipleFieldsValidator=yt},function(gt,ft){var yt=this&&this.__extends||function(){var nt=function(s,b){return nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,_e){$.__proto__=_e}||function($,_e){for(var it in _e)Object.prototype.hasOwnProperty.call(_e,it)&&($[it]=_e[it])},nt(s,b)};return function(s,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");nt(s,b);function $(){this.constructor=s}s.prototype=b===null?Object.create(b):($.prototype=b.prototype,new $)}}();Object.defineProperty(ft,"__esModule",{value:!0}),ft.RangeValidator=ft.NumberArrayValidator=ft.BooleanArrayValidator=ft.StringArrayValidator=ft.EnumValidator=ft.SchemaValidator=ft.ValueValidator=ft.NumberValidator=ft.BooleanValidator=ft.StringValidator=ft.TypeValidator=ft.ArrayValidator=ft.ObjectValidator=void 0;var vt=function(){function nt(){}return nt.prototype.validate=function(s,b,$){return s==null?null:typeof s!="object"||Array.isArray(s)?[{message:$!==void 0?$+" must be an object":"input must be an object",path:b,keyword:"type"}]:null},nt}();ft.ObjectValidator=vt;var rt=function(){function nt(s){this.itemValidators=s}return nt.prototype.validate=function(s,b,$){if(s==null)return null;if(!Array.isArray(s))return[{message:$+" property is invalid",path:(b?b+".":"")+$,keyword:"type"}];for(var _e=0;_e<s.length;_e++)for(var it=(b?b+".":"")+$+"."+_e.toString(),pt=0,mt=this.itemValidators;pt<mt.length;pt++){var lt=mt[pt],_=lt.validate(s[_e],it,$);if(_)return[{message:$+" property is invalid",path:(b?b+".":"")+$,keyword:"type"}]}return null},nt}();ft.ArrayValidator=rt;var bt=function(){function nt(s){this.expectedType=s}return nt.prototype.validate=function(s,b,$){return s==null?null:typeof s!==this.expectedType?[{message:$+" must be a "+this.expectedType,path:(b?b+".":"")+$,keyword:"type"}]:null},nt}();ft.TypeValidator=bt;var ht=function(nt){yt(s,nt);function s(){return nt.call(this,"string")||this}return s}(bt);ft.StringValidator=ht;var wt=function(nt){yt(s,nt);function s(){return nt.call(this,"boolean")||this}return s}(bt);ft.BooleanValidator=wt;var At=function(nt){yt(s,nt);function s(){return nt.call(this,"number")||this}return s}(bt);ft.NumberValidator=At;var Ct=function(){function nt(s){this.possibleValues=s}return nt.prototype.validate=function(s,b,$){return s==null?null:this.possibleValues.indexOf(s)<0?[{message:$+" property is invalid",path:(b?b+".":"")+$,keyword:"invalid"}]:null},nt}();ft.ValueValidator=Ct;var dt=function(nt){yt(s,nt);function s(b){var $=nt.call(this,[b])||this;return $.schemaValue=b,$}return s.prototype.validate=function(b,$,_e){return nt.prototype.validate.call(this,b,$,_e)},s}(Ct);ft.SchemaValidator=dt;var Et=function(nt){yt(s,nt);function s(b){var $=nt.call(this)||this;return $.possibleValues=b,$}return s.prototype.validate=function(b,$,_e){if(b==null)return null;var it=nt.prototype.validate.call(this,b,$,_e);if(it)return it;var pt=new Ct(this.possibleValues);return pt.validate(b,$,_e)},s}(At);ft.EnumValidator=Et;var Rt=function(nt){yt(s,nt);function s(){return nt.call(this,[new ht])||this}return s.prototype.validate=function(b,$,_e){var it=nt.prototype.validate.call(this,b,$,_e);return it?[{message:_e+" must be an array of strings",path:($?$+".":"")+_e,keyword:"type"}]:null},s}(rt);ft.StringArrayValidator=Rt;var Mt=function(nt){yt(s,nt);function s(){return nt.call(this,[new wt])||this}return s.prototype.validate=function(b,$,_e){var it=nt.prototype.validate.call(this,b,$,_e);return it?[{message:_e+" must be an array of booleans",path:($?$+".":"")+_e,keyword:"type"}]:null},s}(rt);ft.BooleanArrayValidator=Mt;var _t=function(nt){yt(s,nt);function s(){return nt.call(this,[new At])||this}return s.prototype.validate=function(b,$,_e){var it=nt.prototype.validate.call(this,b,$,_e);return it?[{message:_e+" must be an array of numbers",path:($?$+".":"")+_e,keyword:"type"}]:null},s}(rt);ft.NumberArrayValidator=_t;var kt=function(nt){yt(s,nt);function s(b,$){var _e=nt.call(this)||this;return _e.minValue=b,_e.maxValue=$,_e}return s.prototype.validate=function(b,$,_e){if(b==null)return null;var it=nt.prototype.validate.call(this,b,$,_e);return it||(b>this.maxValue||b<this.minValue?[{message:_e+" must be a number between "+this.minValue.toString()+" and "+this.maxValue.toString(),path:($?$+".":"")+_e,keyword:"range"}]:null)},s}(At);ft.RangeValidator=kt},function(gt,ft,yt){var vt=this&&this.__extends||function(){var Mt=function(_t,kt){return Mt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(nt,s){nt.__proto__=s}||function(nt,s){for(var b in s)Object.prototype.hasOwnProperty.call(s,b)&&(nt[b]=s[b])},Mt(_t,kt)};return function(_t,kt){if(typeof kt!="function"&&kt!==null)throw new TypeError("Class extends value "+String(kt)+" is not a constructor or null");Mt(_t,kt);function nt(){this.constructor=_t}_t.prototype=kt===null?Object.create(kt):(nt.prototype=kt.prototype,new nt)}}();Object.defineProperty(ft,"__esModule",{value:!0}),ft.CaptureBookmarkRequestValidator=ft.CaptureBookmarkOptionsValidator=ft.ApplyBookmarkStateRequestValidator=ft.ApplyBookmarkByNameRequestValidator=ft.AddBookmarkRequestValidator=ft.PlayBookmarkRequestValidator=void 0;var rt=yt(3),bt=yt(4),ht=yt(1),wt=function(Mt){vt(_t,Mt);function _t(){return Mt!==null&&Mt.apply(this,arguments)||this}return _t.prototype.validate=function(kt,nt,s){if(kt==null)return null;var b=Mt.prototype.validate.call(this,kt,nt,s);if(b)return b;var $=[{field:"playMode",validators:[ht.Validators.fieldRequiredValidator,new bt.EnumValidator([0,1])]}],_e=new rt.MultipleFieldsValidator($);return _e.validate(kt,nt,s)},_t}(bt.ObjectValidator);ft.PlayBookmarkRequestValidator=wt;var At=function(Mt){vt(_t,Mt);function _t(){return Mt!==null&&Mt.apply(this,arguments)||this}return _t.prototype.validate=function(kt,nt,s){if(kt==null)return null;var b=Mt.prototype.validate.call(this,kt,nt,s);if(b)return b;var $=[{field:"state",validators:[ht.Validators.stringValidator]},{field:"displayName",validators:[ht.Validators.stringValidator]},{field:"apply",validators:[ht.Validators.booleanValidator]}],_e=new rt.MultipleFieldsValidator($);return _e.validate(kt,nt,s)},_t}(bt.ObjectValidator);ft.AddBookmarkRequestValidator=At;var Ct=function(Mt){vt(_t,Mt);function _t(){return Mt!==null&&Mt.apply(this,arguments)||this}return _t.prototype.validate=function(kt,nt,s){if(kt==null)return null;var b=Mt.prototype.validate.call(this,kt,nt,s);if(b)return b;var $=[{field:"name",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]}],_e=new rt.MultipleFieldsValidator($);return _e.validate(kt,nt,s)},_t}(bt.ObjectValidator);ft.ApplyBookmarkByNameRequestValidator=Ct;var dt=function(Mt){vt(_t,Mt);function _t(){return Mt!==null&&Mt.apply(this,arguments)||this}return _t.prototype.validate=function(kt,nt,s){if(kt==null)return null;var b=Mt.prototype.validate.call(this,kt,nt,s);if(b)return b;var $=[{field:"state",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]}],_e=new rt.MultipleFieldsValidator($);return _e.validate(kt,nt,s)},_t}(bt.ObjectValidator);ft.ApplyBookmarkStateRequestValidator=dt;var Et=function(Mt){vt(_t,Mt);function _t(){return Mt!==null&&Mt.apply(this,arguments)||this}return _t.prototype.validate=function(kt,nt,s){if(kt==null)return null;var b=Mt.prototype.validate.call(this,kt,nt,s);if(b)return b;var $=[{field:"personalizeVisuals",validators:[ht.Validators.booleanValidator]},{field:"allPages",validators:[ht.Validators.booleanValidator]}],_e=new rt.MultipleFieldsValidator($);return _e.validate(kt,nt,s)},_t}(bt.ObjectValidator);ft.CaptureBookmarkOptionsValidator=Et;var Rt=function(Mt){vt(_t,Mt);function _t(){return Mt!==null&&Mt.apply(this,arguments)||this}return _t.prototype.validate=function(kt,nt,s){if(kt==null)return null;var b=Mt.prototype.validate.call(this,kt,nt,s);if(b)return b;var $=[{field:"options",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.captureBookmarkOptionsValidator]}],_e=new rt.MultipleFieldsValidator($);return _e.validate(kt,nt,s)},_t}(bt.ObjectValidator);ft.CaptureBookmarkRequestValidator=Rt},function(gt,ft,yt){var vt=this&&this.__extends||function(){var dt=function(Et,Rt){return dt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Mt,_t){Mt.__proto__=_t}||function(Mt,_t){for(var kt in _t)Object.prototype.hasOwnProperty.call(_t,kt)&&(Mt[kt]=_t[kt])},dt(Et,Rt)};return function(Et,Rt){if(typeof Rt!="function"&&Rt!==null)throw new TypeError("Class extends value "+String(Rt)+" is not a constructor or null");dt(Et,Rt);function Mt(){this.constructor=Et}Et.prototype=Rt===null?Object.create(Rt):(Mt.prototype=Rt.prototype,new Mt)}}();Object.defineProperty(ft,"__esModule",{value:!0}),ft.PaginatedReportCommandsValidator=ft.SingleCommandSettingsValidator=ft.CommandsSettingsValidator=void 0;var rt=yt(3),bt=yt(4),ht=yt(1),wt=function(dt){vt(Et,dt);function Et(){return dt!==null&&dt.apply(this,arguments)||this}return Et.prototype.validate=function(Rt,Mt,_t){if(Rt==null)return null;var kt=dt.prototype.validate.call(this,Rt,Mt,_t);if(kt)return kt;var nt=[{field:"copy",validators:[ht.Validators.singleCommandSettingsValidator]},{field:"drill",validators:[ht.Validators.singleCommandSettingsValidator]},{field:"drillthrough",validators:[ht.Validators.singleCommandSettingsValidator]},{field:"expandCollapse",validators:[ht.Validators.singleCommandSettingsValidator]},{field:"exportData",validators:[ht.Validators.singleCommandSettingsValidator]},{field:"includeExclude",validators:[ht.Validators.singleCommandSettingsValidator]},{field:"removeVisual",validators:[ht.Validators.singleCommandSettingsValidator]},{field:"search",validators:[ht.Validators.singleCommandSettingsValidator]},{field:"seeData",validators:[ht.Validators.singleCommandSettingsValidator]},{field:"sort",validators:[ht.Validators.singleCommandSettingsValidator]},{field:"spotlight",validators:[ht.Validators.singleCommandSettingsValidator]},{field:"insightsAnalysis",validators:[ht.Validators.singleCommandSettingsValidator]},{field:"addComment",validators:[ht.Validators.singleCommandSettingsValidator]},{field:"groupVisualContainers",validators:[ht.Validators.singleCommandSettingsValidator]},{field:"summarize",validators:[ht.Validators.singleCommandSettingsValidator]},{field:"clearSelection",validators:[ht.Validators.singleCommandSettingsValidator]}],s=new rt.MultipleFieldsValidator(nt);return s.validate(Rt,Mt,_t)},Et}(bt.ObjectValidator);ft.CommandsSettingsValidator=wt;var At=function(dt){vt(Et,dt);function Et(){return dt!==null&&dt.apply(this,arguments)||this}return Et.prototype.validate=function(Rt,Mt,_t){if(Rt==null)return null;var kt=dt.prototype.validate.call(this,Rt,Mt,_t);if(kt)return kt;var nt=[{field:"displayOption",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.commandDisplayOptionValidator]},{field:"selector",validators:[ht.Validators.visualCommandSelectorValidator]}],s=new rt.MultipleFieldsValidator(nt);return s.validate(Rt,Mt,_t)},Et}(bt.ObjectValidator);ft.SingleCommandSettingsValidator=At;var Ct=function(dt){vt(Et,dt);function Et(){return dt!==null&&dt.apply(this,arguments)||this}return Et.prototype.validate=function(Rt,Mt,_t){if(Rt==null)return null;var kt=dt.prototype.validate.call(this,Rt,Mt,_t);if(kt)return kt;var nt=[{field:"parameterPanel",validators:[ht.Validators.parametersPanelValidator]}],s=new rt.MultipleFieldsValidator(nt);return s.validate(Rt,Mt,_t)},Et}(bt.ObjectValidator);ft.PaginatedReportCommandsValidator=Ct},function(gt,ft,yt){var vt=this&&this.__extends||function(){var wt=function(At,Ct){return wt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(dt,Et){dt.__proto__=Et}||function(dt,Et){for(var Rt in Et)Object.prototype.hasOwnProperty.call(Et,Rt)&&(dt[Rt]=Et[Rt])},wt(At,Ct)};return function(At,Ct){if(typeof Ct!="function"&&Ct!==null)throw new TypeError("Class extends value "+String(Ct)+" is not a constructor or null");wt(At,Ct);function dt(){this.constructor=At}At.prototype=Ct===null?Object.create(Ct):(dt.prototype=Ct.prototype,new dt)}}();Object.defineProperty(ft,"__esModule",{value:!0}),ft.CustomThemeValidator=void 0;var rt=yt(3),bt=yt(4),ht=function(wt){vt(At,wt);function At(){return wt!==null&&wt.apply(this,arguments)||this}return At.prototype.validate=function(Ct,dt,Et){if(Ct==null)return null;var Rt=wt.prototype.validate.call(this,Ct,dt,Et);if(Rt)return Rt;var Mt=[{field:"themeJson",validators:[new bt.ObjectValidator]}],_t=new rt.MultipleFieldsValidator(Mt);return _t.validate(Ct,dt,Et)},At}(bt.ObjectValidator);ft.CustomThemeValidator=ht},function(gt,ft,yt){var vt=this&&this.__extends||function(){var At=function(Ct,dt){return At=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Et,Rt){Et.__proto__=Rt}||function(Et,Rt){for(var Mt in Rt)Object.prototype.hasOwnProperty.call(Rt,Mt)&&(Et[Mt]=Rt[Mt])},At(Ct,dt)};return function(Ct,dt){if(typeof dt!="function"&&dt!==null)throw new TypeError("Class extends value "+String(dt)+" is not a constructor or null");At(Ct,dt);function Et(){this.constructor=Ct}Ct.prototype=dt===null?Object.create(dt):(Et.prototype=dt.prototype,new Et)}}();Object.defineProperty(ft,"__esModule",{value:!0}),ft.DashboardLoadValidator=void 0;var rt=yt(3),bt=yt(4),ht=yt(1),wt=function(At){vt(Ct,At);function Ct(){return At!==null&&At.apply(this,arguments)||this}return Ct.prototype.validate=function(dt,Et,Rt){if(dt==null)return null;var Mt=At.prototype.validate.call(this,dt,Et,Rt);if(Mt)return Mt;var _t=[{field:"accessToken",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"id",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"groupId",validators:[ht.Validators.stringValidator]},{field:"pageView",validators:[ht.Validators.pageViewFieldValidator]},{field:"tokenType",validators:[ht.Validators.tokenTypeValidator]},{field:"embedUrl",validators:[ht.Validators.stringValidator]}],kt=new rt.MultipleFieldsValidator(_t);return kt.validate(dt,Et,Rt)},Ct}(bt.ObjectValidator);ft.DashboardLoadValidator=wt},function(gt,ft,yt){var vt=this&&this.__extends||function(){var At=function(Ct,dt){return At=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Et,Rt){Et.__proto__=Rt}||function(Et,Rt){for(var Mt in Rt)Object.prototype.hasOwnProperty.call(Rt,Mt)&&(Et[Mt]=Rt[Mt])},At(Ct,dt)};return function(Ct,dt){if(typeof dt!="function"&&dt!==null)throw new TypeError("Class extends value "+String(dt)+" is not a constructor or null");At(Ct,dt);function Et(){this.constructor=Ct}Ct.prototype=dt===null?Object.create(dt):(Et.prototype=dt.prototype,new Et)}}();Object.defineProperty(ft,"__esModule",{value:!0}),ft.DatasetBindingValidator=void 0;var rt=yt(3),bt=yt(4),ht=yt(1),wt=function(At){vt(Ct,At);function Ct(){return At!==null&&At.apply(this,arguments)||this}return Ct.prototype.validate=function(dt,Et,Rt){if(dt==null)return null;var Mt=At.prototype.validate.call(this,dt,Et,Rt);if(Mt)return Mt;if(!dt.datasetId&&!dt.paginatedReportBindings)return[{message:"datasetBinding cannot be empty",path:(Et?Et+".":"")+Rt,keyword:"invalid"}];var _t=[{field:"datasetId",validators:[ht.Validators.stringValidator]},{field:"paginatedReportBindings",validators:[ht.Validators.paginatedReportDatasetBindingArrayValidator]}],kt=new rt.MultipleFieldsValidator(_t);return kt.validate(dt,Et,Rt)},Ct}(bt.ObjectValidator);ft.DatasetBindingValidator=wt},function(gt,ft,yt){var vt=this&&this.__extends||function(){var wt=function(At,Ct){return wt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(dt,Et){dt.__proto__=Et}||function(dt,Et){for(var Rt in Et)Object.prototype.hasOwnProperty.call(Et,Rt)&&(dt[Rt]=Et[Rt])},wt(At,Ct)};return function(At,Ct){if(typeof Ct!="function"&&Ct!==null)throw new TypeError("Class extends value "+String(Ct)+" is not a constructor or null");wt(At,Ct);function dt(){this.constructor=At}At.prototype=Ct===null?Object.create(Ct):(dt.prototype=Ct.prototype,new dt)}}();Object.defineProperty(ft,"__esModule",{value:!0}),ft.ExportDataRequestValidator=void 0;var rt=yt(3),bt=yt(4),ht=function(wt){vt(At,wt);function At(){return wt!==null&&wt.apply(this,arguments)||this}return At.prototype.validate=function(Ct,dt,Et){if(Ct==null)return null;var Rt=wt.prototype.validate.call(this,Ct,dt,Et);if(Rt)return Rt;var Mt=[{field:"rows",validators:[new bt.NumberValidator]},{field:"exportDataType",validators:[new bt.EnumValidator([0,1])]}],_t=new rt.MultipleFieldsValidator(Mt);return _t.validate(Ct,dt,Et)},At}(bt.ObjectValidator);ft.ExportDataRequestValidator=ht},function(gt,ft,yt){var vt=this&&this.__extends||function(){var nt=function(s,b){return nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,_e){$.__proto__=_e}||function($,_e){for(var it in _e)Object.prototype.hasOwnProperty.call(_e,it)&&($[it]=_e[it])},nt(s,b)};return function(s,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");nt(s,b);function $(){this.constructor=s}s.prototype=b===null?Object.create(b):($.prototype=b.prototype,new $)}}();Object.defineProperty(ft,"__esModule",{value:!0}),ft.ExtensionsValidator=ft.MenuGroupExtensionValidator=ft.ExtensionValidator=ft.CommandExtensionValidator=ft.ExtensionItemValidator=ft.ExtensionPointsValidator=ft.GroupedMenuExtensionValidator=ft.FlatMenuExtensionValidator=ft.MenuExtensionBaseValidator=void 0;var rt=yt(3),bt=yt(4),ht=yt(1),wt=function(nt){vt(s,nt);function s(){return nt!==null&&nt.apply(this,arguments)||this}return s.prototype.validate=function(b,$,_e){if(b==null)return null;var it=nt.prototype.validate.call(this,b,$,_e);if(it)return it;var pt=[{field:"title",validators:[ht.Validators.stringValidator]},{field:"icon",validators:[ht.Validators.stringValidator]}],mt=new rt.MultipleFieldsValidator(pt);return mt.validate(b,$,_e)},s}(bt.ObjectValidator);ft.MenuExtensionBaseValidator=wt;var At=function(nt){vt(s,nt);function s(){return nt!==null&&nt.apply(this,arguments)||this}return s.prototype.validate=function(b,$,_e){if(b==null)return null;var it=nt.prototype.validate.call(this,b,$,_e);if(it)return it;var pt=[{field:"menuLocation",validators:[ht.Validators.menuLocationValidator]},{field:"groupName",validators:[ht.Validators.fieldForbiddenValidator]}],mt=new rt.MultipleFieldsValidator(pt);return mt.validate(b,$,_e)},s}(wt);ft.FlatMenuExtensionValidator=At;var Ct=function(nt){vt(s,nt);function s(){return nt!==null&&nt.apply(this,arguments)||this}return s.prototype.validate=function(b,$,_e){if(b==null)return null;var it=nt.prototype.validate.call(this,b,$,_e);if(it)return it;var pt=[{field:"groupName",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"menuLocation",validators:[ht.Validators.fieldForbiddenValidator]}],mt=new rt.MultipleFieldsValidator(pt);return mt.validate(b,$,_e)},s}(wt);ft.GroupedMenuExtensionValidator=Ct;var dt=function(nt){vt(s,nt);function s(){return nt!==null&&nt.apply(this,arguments)||this}return s.prototype.validate=function(b,$,_e){if(b==null)return null;var it=nt.prototype.validate.call(this,b,$,_e);if(it)return it;var pt=[{field:"visualContextMenu",validators:[ht.Validators.menuExtensionValidator]},{field:"visualOptionsMenu",validators:[ht.Validators.menuExtensionValidator]}],mt=new rt.MultipleFieldsValidator(pt);return mt.validate(b,$,_e)},s}(bt.ObjectValidator);ft.ExtensionPointsValidator=dt;var Et=function(nt){vt(s,nt);function s(){return nt!==null&&nt.apply(this,arguments)||this}return s.prototype.validate=function(b,$,_e){if(b==null)return null;var it=nt.prototype.validate.call(this,b,$,_e);if(it)return it;var pt=[{field:"name",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"extend",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.extensionPointsValidator]}],mt=new rt.MultipleFieldsValidator(pt);return mt.validate(b,$,_e)},s}(bt.ObjectValidator);ft.ExtensionItemValidator=Et;var Rt=function(nt){vt(s,nt);function s(){return nt!==null&&nt.apply(this,arguments)||this}return s.prototype.validate=function(b,$,_e){if(b==null)return null;var it=nt.prototype.validate.call(this,b,$,_e);if(it)return it;var pt=[{field:"title",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"icon",validators:[ht.Validators.stringValidator]},{field:"selector",validators:[ht.Validators.commandExtensionSelectorValidator]}],mt=new rt.MultipleFieldsValidator(pt);return mt.validate(b,$,_e)},s}(Et);ft.CommandExtensionValidator=Rt;var Mt=function(nt){vt(s,nt);function s(){return nt!==null&&nt.apply(this,arguments)||this}return s.prototype.validate=function(b,$,_e){if(b==null)return null;var it=nt.prototype.validate.call(this,b,$,_e);if(it)return it;var pt=[{field:"command",validators:[ht.Validators.commandExtensionValidator]}],mt=new rt.MultipleFieldsValidator(pt);return mt.validate(b,$,_e)},s}(bt.ObjectValidator);ft.ExtensionValidator=Mt;var _t=function(nt){vt(s,nt);function s(){return nt!==null&&nt.apply(this,arguments)||this}return s.prototype.validate=function(b,$,_e){if(b==null)return null;var it=nt.prototype.validate.call(this,b,$,_e);if(it)return it;var pt=[{field:"name",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"title",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"menuLocation",validators:[ht.Validators.menuLocationValidator]}],mt=new rt.MultipleFieldsValidator(pt);return mt.validate(b,$,_e)},s}(bt.ObjectValidator);ft.MenuGroupExtensionValidator=_t;var kt=function(nt){vt(s,nt);function s(){return nt!==null&&nt.apply(this,arguments)||this}return s.prototype.validate=function(b,$,_e){if(b==null)return null;var it=nt.prototype.validate.call(this,b,$,_e);if(it)return it;var pt=[{field:"commands",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.commandExtensionArrayValidator]},{field:"groups",validators:[ht.Validators.menuGroupExtensionArrayValidator]}],mt=new rt.MultipleFieldsValidator(pt);return mt.validate(b,$,_e)},s}(bt.ObjectValidator);ft.ExtensionsValidator=kt},function(gt,ft,yt){var vt=this&&this.__extends||function(){var Pt=function(qt,Kt){return Pt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(jt,Ht){jt.__proto__=Ht}||function(jt,Ht){for(var Bt in Ht)Object.prototype.hasOwnProperty.call(Ht,Bt)&&(jt[Bt]=Ht[Bt])},Pt(qt,Kt)};return function(qt,Kt){if(typeof Kt!="function"&&Kt!==null)throw new TypeError("Class extends value "+String(Kt)+" is not a constructor or null");Pt(qt,Kt);function jt(){this.constructor=qt}qt.prototype=Kt===null?Object.create(Kt):(jt.prototype=Kt.prototype,new jt)}}();Object.defineProperty(ft,"__esModule",{value:!0}),ft.OnLoadFiltersValidator=ft.OnLoadFiltersBaseRemoveOperationValidator=ft.OnLoadFiltersBaseValidator=ft.ConditionItemValidator=ft.RemoveFiltersRequestValidator=ft.UpdateFiltersRequestValidator=ft.FilterValidator=ft.IncludeExcludePointValueValidator=ft.HierarchyFilterNodeValidator=ft.HierarchyFilterValidator=ft.IncludeExcludeFilterValidator=ft.NotSupportedFilterValidator=ft.TopNFilterValidator=ft.RelativeTimeFilterValidator=ft.RelativeDateFilterValidator=ft.RelativeDateTimeFilterValidator=ft.AdvancedFilterValidator=ft.BasicFilterValidator=ft.FilterValidatorBase=ft.FilterDisplaySettingsValidator=ft.FilterMeasureTargetValidator=ft.FilterKeyHierarchyTargetValidator=ft.FilterHierarchyTargetValidator=ft.FilterKeyColumnsTargetValidator=ft.FilterColumnTargetValidator=void 0;var rt=yt(3),bt=yt(4),ht=yt(1),wt=function(Pt){vt(qt,Pt);function qt(){return Pt!==null&&Pt.apply(this,arguments)||this}return qt.prototype.validate=function(Kt,jt,Ht){if(Kt==null)return null;var Bt=Pt.prototype.validate.call(this,Kt,jt,Ht);if(Bt)return Bt;var Jt=[{field:"table",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"column",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]}],sr=new rt.MultipleFieldsValidator(Jt);return sr.validate(Kt,jt,Ht)},qt}(bt.ObjectValidator);ft.FilterColumnTargetValidator=wt;var At=function(Pt){vt(qt,Pt);function qt(){return Pt!==null&&Pt.apply(this,arguments)||this}return qt.prototype.validate=function(Kt,jt,Ht){if(Kt==null)return null;var Bt=Pt.prototype.validate.call(this,Kt,jt,Ht);if(Bt)return Bt;var Jt=[{field:"keys",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringArrayValidator]}],sr=new rt.MultipleFieldsValidator(Jt);return sr.validate(Kt,jt,Ht)},qt}(wt);ft.FilterKeyColumnsTargetValidator=At;var Ct=function(Pt){vt(qt,Pt);function qt(){return Pt!==null&&Pt.apply(this,arguments)||this}return qt.prototype.validate=function(Kt,jt,Ht){if(Kt==null)return null;var Bt=Pt.prototype.validate.call(this,Kt,jt,Ht);if(Bt)return Bt;var Jt=[{field:"table",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"hierarchy",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"hierarchyLevel",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]}],sr=new rt.MultipleFieldsValidator(Jt);return sr.validate(Kt,jt,Ht)},qt}(bt.ObjectValidator);ft.FilterHierarchyTargetValidator=Ct;var dt=function(Pt){vt(qt,Pt);function qt(){return Pt!==null&&Pt.apply(this,arguments)||this}return qt.prototype.validate=function(Kt,jt,Ht){if(Kt==null)return null;var Bt=Pt.prototype.validate.call(this,Kt,jt,Ht);if(Bt)return Bt;var Jt=[{field:"keys",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringArrayValidator]}],sr=new rt.MultipleFieldsValidator(Jt);return sr.validate(Kt,jt,Ht)},qt}(Ct);ft.FilterKeyHierarchyTargetValidator=dt;var Et=function(Pt){vt(qt,Pt);function qt(){return Pt!==null&&Pt.apply(this,arguments)||this}return qt.prototype.validate=function(Kt,jt,Ht){if(Kt==null)return null;var Bt=Pt.prototype.validate.call(this,Kt,jt,Ht);if(Bt)return Bt;var Jt=[{field:"table",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"measure",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]}],sr=new rt.MultipleFieldsValidator(Jt);return sr.validate(Kt,jt,Ht)},qt}(bt.ObjectValidator);ft.FilterMeasureTargetValidator=Et;var Rt=function(Pt){vt(qt,Pt);function qt(){return Pt!==null&&Pt.apply(this,arguments)||this}return qt.prototype.validate=function(Kt,jt,Ht){if(Kt==null)return null;var Bt=Pt.prototype.validate.call(this,Kt,jt,Ht);if(Bt)return Bt;var Jt=[{field:"isLockedInViewMode",validators:[ht.Validators.booleanValidator]},{field:"isHiddenInViewMode",validators:[ht.Validators.booleanValidator]},{field:"displayName",validators:[ht.Validators.stringValidator]}],sr=new rt.MultipleFieldsValidator(Jt);return sr.validate(Kt,jt,Ht)},qt}(bt.ObjectValidator);ft.FilterDisplaySettingsValidator=Rt;var Mt=function(Pt){vt(qt,Pt);function qt(){return Pt!==null&&Pt.apply(this,arguments)||this}return qt.prototype.validate=function(Kt,jt,Ht){if(Kt==null)return null;var Bt=Pt.prototype.validate.call(this,Kt,jt,Ht);if(Bt)return Bt;var Jt=[{field:"target",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.filterTargetValidator]},{field:"$schema",validators:[ht.Validators.stringValidator]},{field:"filterType",validators:[ht.Validators.filterTypeValidator]},{field:"displaySettings",validators:[ht.Validators.filterDisplaySettingsValidator]}],sr=new rt.MultipleFieldsValidator(Jt);return sr.validate(Kt,jt,Ht)},qt}(bt.ObjectValidator);ft.FilterValidatorBase=Mt;var _t=function(Pt){vt(qt,Pt);function qt(){return Pt!==null&&Pt.apply(this,arguments)||this}return qt.prototype.validate=function(Kt,jt,Ht){if(Kt==null)return null;var Bt=Pt.prototype.validate.call(this,Kt,jt,Ht);if(Bt)return Bt;var Jt=[{field:"operator",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"values",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.anyArrayValidator]},{field:"filterType",validators:[ht.Validators.basicFilterTypeValidator]},{field:"requireSingleSelection",validators:[ht.Validators.booleanValidator]}],sr=new rt.MultipleFieldsValidator(Jt);return sr.validate(Kt,jt,Ht)},qt}(Mt);ft.BasicFilterValidator=_t;var kt=function(Pt){vt(qt,Pt);function qt(){return Pt!==null&&Pt.apply(this,arguments)||this}return qt.prototype.validate=function(Kt,jt,Ht){if(Kt==null)return null;var Bt=Pt.prototype.validate.call(this,Kt,jt,Ht);if(Bt)return Bt;var Jt=[{field:"logicalOperator",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"conditions",validators:[ht.Validators.filterConditionsValidator]},{field:"filterType",validators:[ht.Validators.advancedFilterTypeValidator]}],sr=new rt.MultipleFieldsValidator(Jt);return sr.validate(Kt,jt,Ht)},qt}(Mt);ft.AdvancedFilterValidator=kt;var nt=function(Pt){vt(qt,Pt);function qt(){return Pt!==null&&Pt.apply(this,arguments)||this}return qt.prototype.validate=function(Kt,jt,Ht){if(Kt==null)return null;var Bt=Pt.prototype.validate.call(this,Kt,jt,Ht);if(Bt)return Bt;var Jt=[{field:"operator",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.relativeDateFilterOperatorValidator]},{field:"timeUnitsCount",validators:[ht.Validators.numberValidator]},{field:"timeUnitType",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.relativeDateTimeFilterUnitTypeValidator]},{field:"filterType",validators:[ht.Validators.relativeDateTimeFilterTypeValidator]}],sr=new rt.MultipleFieldsValidator(Jt);return sr.validate(Kt,jt,Ht)},qt}(Mt);ft.RelativeDateTimeFilterValidator=nt;var s=function(Pt){vt(qt,Pt);function qt(){return Pt!==null&&Pt.apply(this,arguments)||this}return qt.prototype.validate=function(Kt,jt,Ht){if(Kt==null)return null;var Bt=Pt.prototype.validate.call(this,Kt,jt,Ht);if(Bt)return Bt;var Jt=[{field:"includeToday",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.booleanValidator]},{field:"timeUnitType",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.relativeDateFilterTimeUnitTypeValidator]},{field:"filterType",validators:[ht.Validators.relativeDateFilterTypeValidator]}],sr=new rt.MultipleFieldsValidator(Jt);return sr.validate(Kt,jt,Ht)},qt}(nt);ft.RelativeDateFilterValidator=s;var b=function(Pt){vt(qt,Pt);function qt(){return Pt!==null&&Pt.apply(this,arguments)||this}return qt.prototype.validate=function(Kt,jt,Ht){if(Kt==null)return null;var Bt=Pt.prototype.validate.call(this,Kt,jt,Ht);if(Bt)return Bt;var Jt=[{field:"timeUnitType",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.relativeTimeFilterTimeUnitTypeValidator]},{field:"filterType",validators:[ht.Validators.relativeTimeFilterTypeValidator]}],sr=new rt.MultipleFieldsValidator(Jt);return sr.validate(Kt,jt,Ht)},qt}(nt);ft.RelativeTimeFilterValidator=b;var $=function(Pt){vt(qt,Pt);function qt(){return Pt!==null&&Pt.apply(this,arguments)||this}return qt.prototype.validate=function(Kt,jt,Ht){if(Kt==null)return null;var Bt=Pt.prototype.validate.call(this,Kt,jt,Ht);if(Bt)return Bt;var Jt=[{field:"operator",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"itemCount",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.numberValidator]},{field:"filterType",validators:[ht.Validators.topNFilterTypeValidator]},{field:"orderBy",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.filterTargetValidator]}],sr=new rt.MultipleFieldsValidator(Jt);return sr.validate(Kt,jt,Ht)},qt}(Mt);ft.TopNFilterValidator=$;var _e=function(Pt){vt(qt,Pt);function qt(){return Pt!==null&&Pt.apply(this,arguments)||this}return qt.prototype.validate=function(Kt,jt,Ht){if(Kt==null)return null;var Bt=Pt.prototype.validate.call(this,Kt,jt,Ht);if(Bt)return Bt;var Jt=[{field:"message",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"notSupportedTypeName",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"filterType",validators:[ht.Validators.notSupportedFilterTypeValidator]}],sr=new rt.MultipleFieldsValidator(Jt);return sr.validate(Kt,jt,Ht)},qt}(Mt);ft.NotSupportedFilterValidator=_e;var it=function(Pt){vt(qt,Pt);function qt(){return Pt!==null&&Pt.apply(this,arguments)||this}return qt.prototype.validate=function(Kt,jt,Ht){if(Kt==null)return null;var Bt=Pt.prototype.validate.call(this,Kt,jt,Ht);if(Bt)return Bt;var Jt=[{field:"isExclude",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.booleanValidator]},{field:"values",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.includeExcludeFilterValuesValidator]},{field:"filterType",validators:[ht.Validators.includeExludeFilterTypeValidator]}],sr=new rt.MultipleFieldsValidator(Jt);return sr.validate(Kt,jt,Ht)},qt}(Mt);ft.IncludeExcludeFilterValidator=it;var pt=function(Pt){vt(qt,Pt);function qt(){return Pt!==null&&Pt.apply(this,arguments)||this}return qt.prototype.validate=function(Kt,jt,Ht){if(Kt==null)return null;var Bt=Pt.prototype.validate.call(this,Kt,jt,Ht);if(Bt)return Bt;var Jt=[{field:"hierarchyData",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.hierarchyFilterValuesValidator]},{field:"filterType",validators:[ht.Validators.hierarchyFilterTypeValidator]}],sr=new rt.MultipleFieldsValidator(Jt);return sr.validate(Kt,jt,Ht)},qt}(Mt);ft.HierarchyFilterValidator=pt;var mt=function(Pt){vt(qt,Pt);function qt(){return Pt!==null&&Pt.apply(this,arguments)||this}return qt.prototype.validate=function(Kt,jt,Ht){if(Kt==null)return null;var Bt=Pt.prototype.validate.call(this,Kt,jt,Ht);if(Bt)return Bt;var Jt=[{field:"value",validators:[ht.Validators.anyValueValidator]},{field:"keyValues",validators:[ht.Validators.anyArrayValidator]},{field:"children",validators:[ht.Validators.hierarchyFilterValuesValidator]},{field:"operator",validators:[ht.Validators.stringValidator]}],sr=new rt.MultipleFieldsValidator(Jt);return sr.validate(Kt,jt,Ht)},qt}(bt.ObjectValidator);ft.HierarchyFilterNodeValidator=mt;var lt=function(Pt){vt(qt,Pt);function qt(){return Pt!==null&&Pt.apply(this,arguments)||this}return qt.prototype.validate=function(Kt,jt,Ht){if(Kt==null)return null;var Bt=Pt.prototype.validate.call(this,Kt,jt,Ht);if(Bt)return Bt;var Jt=[{field:"value",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.anyValueValidator]},{field:"keyValues",validators:[ht.Validators.anyArrayValidator]}],sr=new rt.MultipleFieldsValidator(Jt);return sr.validate(Kt,jt,Ht)},qt}(bt.ObjectValidator);ft.IncludeExcludePointValueValidator=lt;var _=function(Pt){vt(qt,Pt);function qt(){return Pt!==null&&Pt.apply(this,arguments)||this}return qt.prototype.validate=function(Kt,jt,Ht){if(Kt==null)return null;var Bt=Pt.prototype.validate.call(this,Kt,jt,Ht);return Bt||ht.Validators.anyFilterValidator.validate(Kt,jt,Ht)},qt}(bt.ObjectValidator);ft.FilterValidator=_;var tt=function(Pt){vt(qt,Pt);function qt(){return Pt!==null&&Pt.apply(this,arguments)||this}return qt.prototype.validate=function(Kt,jt,Ht){if(Kt==null)return null;var Bt=Pt.prototype.validate.call(this,Kt,jt,Ht);if(Bt)return Bt;var Jt=[{field:"filtersOperation",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.filtersOperationsUpdateValidator]},{field:"filters",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.filtersArrayValidator]}],sr=new rt.MultipleFieldsValidator(Jt);return sr.validate(Kt,jt,Ht)},qt}(bt.ObjectValidator);ft.UpdateFiltersRequestValidator=tt;var Tt=function(Pt){vt(qt,Pt);function qt(){return Pt!==null&&Pt.apply(this,arguments)||this}return qt.prototype.validate=function(Kt,jt,Ht){if(Kt==null)return null;var Bt=Pt.prototype.validate.call(this,Kt,jt,Ht);if(Bt)return Bt;var Jt=[{field:"filtersOperation",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.filtersOperationsRemoveAllValidator]},{field:"filters",validators:[ht.Validators.fieldForbiddenValidator,ht.Validators.filtersArrayValidator]}],sr=new rt.MultipleFieldsValidator(Jt);return sr.validate(Kt,jt,Ht)},qt}(bt.ObjectValidator);ft.RemoveFiltersRequestValidator=Tt;var It=function(Pt){vt(qt,Pt);function qt(){return Pt!==null&&Pt.apply(this,arguments)||this}return qt.prototype.validate=function(Kt,jt,Ht){if(Kt==null)return null;var Bt=Pt.prototype.validate.call(this,Kt,jt,Ht);if(Bt)return Bt;var Jt=[{field:"value",validators:[ht.Validators.anyValueValidator]},{field:"operator",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]}],sr=new rt.MultipleFieldsValidator(Jt);return sr.validate(Kt,jt,Ht)},qt}(bt.ObjectValidator);ft.ConditionItemValidator=It;var Nt=function(Pt){vt(qt,Pt);function qt(){return Pt!==null&&Pt.apply(this,arguments)||this}return qt.prototype.validate=function(Kt,jt,Ht){if(Kt==null)return null;var Bt=Pt.prototype.validate.call(this,Kt,jt,Ht);if(Bt)return Bt;var Jt=[{field:"operation",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.filtersOperationsUpdateValidator]},{field:"filters",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.filtersArrayValidator]}],sr=new rt.MultipleFieldsValidator(Jt);return sr.validate(Kt,jt,Ht)},qt}(bt.ObjectValidator);ft.OnLoadFiltersBaseValidator=Nt;var Ut=function(Pt){vt(qt,Pt);function qt(){return Pt!==null&&Pt.apply(this,arguments)||this}return qt.prototype.validate=function(Kt,jt,Ht){if(Kt==null)return null;var Bt=Pt.prototype.validate.call(this,Kt,jt,Ht);if(Bt)return Bt;var Jt=[{field:"operation",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.filtersOperationsRemoveAllValidator]},{field:"filters",validators:[ht.Validators.fieldForbiddenValidator,ht.Validators.filtersArrayValidator]}],sr=new rt.MultipleFieldsValidator(Jt);return sr.validate(Kt,jt,Ht)},qt}(bt.ObjectValidator);ft.OnLoadFiltersBaseRemoveOperationValidator=Ut;var Gt=function(Pt){vt(qt,Pt);function qt(){return Pt!==null&&Pt.apply(this,arguments)||this}return qt.prototype.validate=function(Kt,jt,Ht){if(Kt==null)return null;var Bt=Pt.prototype.validate.call(this,Kt,jt,Ht);if(Bt)return Bt;var Jt=[{field:"allPages",validators:[ht.Validators.onLoadFiltersBaseValidator]},{field:"currentPage",validators:[ht.Validators.onLoadFiltersBaseValidator]}],sr=new rt.MultipleFieldsValidator(Jt);return sr.validate(Kt,jt,Ht)},qt}(bt.ObjectValidator);ft.OnLoadFiltersValidator=Gt},function(gt,ft,yt){var vt=this&&this.__extends||function(){var Et=function(Rt,Mt){return Et=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_t,kt){_t.__proto__=kt}||function(_t,kt){for(var nt in kt)Object.prototype.hasOwnProperty.call(kt,nt)&&(_t[nt]=kt[nt])},Et(Rt,Mt)};return function(Rt,Mt){if(typeof Mt!="function"&&Mt!==null)throw new TypeError("Class extends value "+String(Mt)+" is not a constructor or null");Et(Rt,Mt);function _t(){this.constructor=Rt}Rt.prototype=Mt===null?Object.create(Mt):(_t.prototype=Mt.prototype,new _t)}}();Object.defineProperty(ft,"__esModule",{value:!0}),ft.PageLayoutValidator=ft.DisplayStateValidator=ft.VisualLayoutValidator=ft.CustomLayoutValidator=void 0;var rt=yt(3),bt=yt(4),ht=yt(1),wt=function(Et){vt(Rt,Et);function Rt(){return Et!==null&&Et.apply(this,arguments)||this}return Rt.prototype.validate=function(Mt,_t,kt){if(Mt==null)return null;var nt=Et.prototype.validate.call(this,Mt,_t,kt);if(nt)return nt;var s=[{field:"pageSize",validators:[ht.Validators.pageSizeValidator]},{field:"displayOption",validators:[ht.Validators.customLayoutDisplayOptionValidator]},{field:"pagesLayout",validators:[ht.Validators.pagesLayoutValidator]}],b=new rt.MultipleFieldsValidator(s);return b.validate(Mt,_t,kt)},Rt}(bt.ObjectValidator);ft.CustomLayoutValidator=wt;var At=function(Et){vt(Rt,Et);function Rt(){return Et!==null&&Et.apply(this,arguments)||this}return Rt.prototype.validate=function(Mt,_t,kt){if(Mt==null)return null;var nt=Et.prototype.validate.call(this,Mt,_t,kt);if(nt)return nt;var s=[{field:"x",validators:[ht.Validators.numberValidator]},{field:"y",validators:[ht.Validators.numberValidator]},{field:"z",validators:[ht.Validators.numberValidator]},{field:"width",validators:[ht.Validators.numberValidator]},{field:"height",validators:[ht.Validators.numberValidator]},{field:"displayState",validators:[ht.Validators.displayStateValidator]}],b=new rt.MultipleFieldsValidator(s);return b.validate(Mt,_t,kt)},Rt}(bt.ObjectValidator);ft.VisualLayoutValidator=At;var Ct=function(Et){vt(Rt,Et);function Rt(){return Et!==null&&Et.apply(this,arguments)||this}return Rt.prototype.validate=function(Mt,_t,kt){if(Mt==null)return null;var nt=Et.prototype.validate.call(this,Mt,_t,kt);if(nt)return nt;var s=[{field:"mode",validators:[ht.Validators.displayStateModeValidator]}],b=new rt.MultipleFieldsValidator(s);return b.validate(Mt,_t,kt)},Rt}(bt.ObjectValidator);ft.DisplayStateValidator=Ct;var dt=function(Et){vt(Rt,Et);function Rt(){return Et!==null&&Et.apply(this,arguments)||this}return Rt.prototype.validate=function(Mt,_t,kt){if(Mt==null)return null;var nt=Et.prototype.validate.call(this,Mt,_t,kt);if(nt)return nt;var s=[{field:"visualsLayout",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.pageLayoutValidator]},{field:"defaultLayout",validators:[ht.Validators.visualLayoutValidator]}],b=new rt.MultipleFieldsValidator(s);return b.validate(Mt,_t,kt)},Rt}(bt.ObjectValidator);ft.PageLayoutValidator=dt},function(gt,ft,yt){var vt=this&&this.__extends||function(){var Et=function(Rt,Mt){return Et=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_t,kt){_t.__proto__=kt}||function(_t,kt){for(var nt in kt)Object.prototype.hasOwnProperty.call(kt,nt)&&(_t[nt]=kt[nt])},Et(Rt,Mt)};return function(Rt,Mt){if(typeof Mt!="function"&&Mt!==null)throw new TypeError("Class extends value "+String(Mt)+" is not a constructor or null");Et(Rt,Mt);function _t(){this.constructor=Rt}Rt.prototype=Mt===null?Object.create(Mt):(_t.prototype=Mt.prototype,new _t)}}();Object.defineProperty(ft,"__esModule",{value:!0}),ft.PageViewFieldValidator=ft.PageValidator=ft.CustomPageSizeValidator=ft.PageSizeValidator=void 0;var rt=yt(3),bt=yt(4),ht=yt(1),wt=function(Et){vt(Rt,Et);function Rt(){return Et!==null&&Et.apply(this,arguments)||this}return Rt.prototype.validate=function(Mt,_t,kt){if(Mt==null)return null;var nt=Et.prototype.validate.call(this,Mt,_t,kt);if(nt)return nt;var s=[{field:"type",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.pageSizeTypeValidator]}],b=new rt.MultipleFieldsValidator(s);return b.validate(Mt,_t,kt)},Rt}(bt.ObjectValidator);ft.PageSizeValidator=wt;var At=function(Et){vt(Rt,Et);function Rt(){return Et!==null&&Et.apply(this,arguments)||this}return Rt.prototype.validate=function(Mt,_t,kt){if(Mt==null)return null;var nt=Et.prototype.validate.call(this,Mt,_t,kt);if(nt)return nt;var s=[{field:"width",validators:[ht.Validators.numberValidator]},{field:"height",validators:[ht.Validators.numberValidator]}],b=new rt.MultipleFieldsValidator(s);return b.validate(Mt,_t,kt)},Rt}(wt);ft.CustomPageSizeValidator=At;var Ct=function(Et){vt(Rt,Et);function Rt(){return Et!==null&&Et.apply(this,arguments)||this}return Rt.prototype.validate=function(Mt,_t,kt){if(Mt==null)return null;var nt=Et.prototype.validate.call(this,Mt,_t,kt);if(nt)return nt;var s=[{field:"name",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]}],b=new rt.MultipleFieldsValidator(s);return b.validate(Mt,_t,kt)},Rt}(bt.ObjectValidator);ft.PageValidator=Ct;var dt=function(Et){vt(Rt,Et);function Rt(){return Et!==null&&Et.apply(this,arguments)||this}return Rt.prototype.validate=function(Mt,_t,kt){if(Mt==null)return null;var nt=Et.prototype.validate.call(this,Mt,_t,kt);if(nt)return nt;var s=["actualSize","fitToWidth","oneColumn"];return s.indexOf(Mt)<0?[{message:'pageView must be a string with one of the following values: "actualSize", "fitToWidth", "oneColumn"'}]:null},Rt}(bt.StringValidator);ft.PageViewFieldValidator=dt},function(gt,ft,yt){var vt=this&&this.__extends||function(){var nt=function(s,b){return nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,_e){$.__proto__=_e}||function($,_e){for(var it in _e)Object.prototype.hasOwnProperty.call(_e,it)&&($[it]=_e[it])},nt(s,b)};return function(s,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");nt(s,b);function $(){this.constructor=s}s.prototype=b===null?Object.create(b):($.prototype=b.prototype,new $)}}();Object.defineProperty(ft,"__esModule",{value:!0}),ft.VisualizationsPaneValidator=ft.SyncSlicersPaneValidator=ft.SelectionPaneValidator=ft.PageNavigationPaneValidator=ft.FiltersPaneValidator=ft.FieldsPaneValidator=ft.BookmarksPaneValidator=ft.QnaPanesValidator=ft.ReportPanesValidator=void 0;var rt=yt(3),bt=yt(4),ht=yt(1),wt=function(nt){vt(s,nt);function s(){return nt!==null&&nt.apply(this,arguments)||this}return s.prototype.validate=function(b,$,_e){if(b==null)return null;var it=nt.prototype.validate.call(this,b,$,_e);if(it)return it;var pt=[{field:"bookmarks",validators:[ht.Validators.bookmarksPaneValidator]},{field:"fields",validators:[ht.Validators.fieldsPaneValidator]},{field:"filters",validators:[ht.Validators.filtersPaneValidator]},{field:"pageNavigation",validators:[ht.Validators.pageNavigationPaneValidator]},{field:"selection",validators:[ht.Validators.selectionPaneValidator]},{field:"syncSlicers",validators:[ht.Validators.syncSlicersPaneValidator]},{field:"visualizations",validators:[ht.Validators.visualizationsPaneValidator]}],mt=new rt.MultipleFieldsValidator(pt);return mt.validate(b,$,_e)},s}(bt.ObjectValidator);ft.ReportPanesValidator=wt;var At=function(nt){vt(s,nt);function s(){return nt!==null&&nt.apply(this,arguments)||this}return s.prototype.validate=function(b,$,_e){if(b==null)return null;var it=nt.prototype.validate.call(this,b,$,_e);if(it)return it;var pt=[{field:"filters",validators:[ht.Validators.filtersPaneValidator]}],mt=new rt.MultipleFieldsValidator(pt);return mt.validate(b,$,_e)},s}(bt.ObjectValidator);ft.QnaPanesValidator=At;var Ct=function(nt){vt(s,nt);function s(){return nt!==null&&nt.apply(this,arguments)||this}return s.prototype.validate=function(b,$,_e){if(b==null)return null;var it=nt.prototype.validate.call(this,b,$,_e);if(it)return it;var pt=[{field:"visible",validators:[ht.Validators.booleanValidator]}],mt=new rt.MultipleFieldsValidator(pt);return mt.validate(b,$,_e)},s}(bt.ObjectValidator);ft.BookmarksPaneValidator=Ct;var dt=function(nt){vt(s,nt);function s(){return nt!==null&&nt.apply(this,arguments)||this}return s.prototype.validate=function(b,$,_e){if(b==null)return null;var it=nt.prototype.validate.call(this,b,$,_e);if(it)return it;var pt=[{field:"expanded",validators:[ht.Validators.booleanValidator]}],mt=new rt.MultipleFieldsValidator(pt);return mt.validate(b,$,_e)},s}(bt.ObjectValidator);ft.FieldsPaneValidator=dt;var Et=function(nt){vt(s,nt);function s(){return nt!==null&&nt.apply(this,arguments)||this}return s.prototype.validate=function(b,$,_e){if(b==null)return null;var it=nt.prototype.validate.call(this,b,$,_e);if(it)return it;var pt=[{field:"visible",validators:[ht.Validators.booleanValidator]},{field:"expanded",validators:[ht.Validators.booleanValidator]}],mt=new rt.MultipleFieldsValidator(pt);return mt.validate(b,$,_e)},s}(bt.ObjectValidator);ft.FiltersPaneValidator=Et;var Rt=function(nt){vt(s,nt);function s(){return nt!==null&&nt.apply(this,arguments)||this}return s.prototype.validate=function(b,$,_e){if(b==null)return null;var it=nt.prototype.validate.call(this,b,$,_e);if(it)return it;var pt=[{field:"visible",validators:[ht.Validators.booleanValidator]},{field:"position",validators:[ht.Validators.pageNavigationPositionValidator]}],mt=new rt.MultipleFieldsValidator(pt);return mt.validate(b,$,_e)},s}(bt.ObjectValidator);ft.PageNavigationPaneValidator=Rt;var Mt=function(nt){vt(s,nt);function s(){return nt!==null&&nt.apply(this,arguments)||this}return s.prototype.validate=function(b,$,_e){if(b==null)return null;var it=nt.prototype.validate.call(this,b,$,_e);if(it)return it;var pt=[{field:"visible",validators:[ht.Validators.booleanValidator]}],mt=new rt.MultipleFieldsValidator(pt);return mt.validate(b,$,_e)},s}(bt.ObjectValidator);ft.SelectionPaneValidator=Mt;var _t=function(nt){vt(s,nt);function s(){return nt!==null&&nt.apply(this,arguments)||this}return s.prototype.validate=function(b,$,_e){if(b==null)return null;var it=nt.prototype.validate.call(this,b,$,_e);if(it)return it;var pt=[{field:"visible",validators:[ht.Validators.booleanValidator]}],mt=new rt.MultipleFieldsValidator(pt);return mt.validate(b,$,_e)},s}(bt.ObjectValidator);ft.SyncSlicersPaneValidator=_t;var kt=function(nt){vt(s,nt);function s(){return nt!==null&&nt.apply(this,arguments)||this}return s.prototype.validate=function(b,$,_e){if(b==null)return null;var it=nt.prototype.validate.call(this,b,$,_e);if(it)return it;var pt=[{field:"expanded",validators:[ht.Validators.booleanValidator]}],mt=new rt.MultipleFieldsValidator(pt);return mt.validate(b,$,_e)},s}(bt.ObjectValidator);ft.VisualizationsPaneValidator=kt},function(gt,ft,yt){var vt=this&&this.__extends||function(){var dt=function(Et,Rt){return dt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Mt,_t){Mt.__proto__=_t}||function(Mt,_t){for(var kt in _t)Object.prototype.hasOwnProperty.call(_t,kt)&&(Mt[kt]=_t[kt])},dt(Et,Rt)};return function(Et,Rt){if(typeof Rt!="function"&&Rt!==null)throw new TypeError("Class extends value "+String(Rt)+" is not a constructor or null");dt(Et,Rt);function Mt(){this.constructor=Et}Et.prototype=Rt===null?Object.create(Rt):(Mt.prototype=Rt.prototype,new Mt)}}();Object.defineProperty(ft,"__esModule",{value:!0}),ft.QnaInterpretInputDataValidator=ft.QnaSettingsValidator=ft.LoadQnaValidator=void 0;var rt=yt(3),bt=yt(4),ht=yt(1),wt=function(dt){vt(Et,dt);function Et(){return dt!==null&&dt.apply(this,arguments)||this}return Et.prototype.validate=function(Rt,Mt,_t){if(Rt==null)return null;var kt=dt.prototype.validate.call(this,Rt,Mt,_t);if(kt)return kt;var nt=[{field:"accessToken",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"datasetIds",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringArrayValidator]},{field:"question",validators:[ht.Validators.stringValidator]},{field:"viewMode",validators:[ht.Validators.viewModeValidator]},{field:"settings",validators:[ht.Validators.qnaSettingValidator]},{field:"tokenType",validators:[ht.Validators.tokenTypeValidator]},{field:"groupId",validators:[ht.Validators.stringValidator]}],s=new rt.MultipleFieldsValidator(nt);return s.validate(Rt,Mt,_t)},Et}(bt.ObjectValidator);ft.LoadQnaValidator=wt;var At=function(dt){vt(Et,dt);function Et(){return dt!==null&&dt.apply(this,arguments)||this}return Et.prototype.validate=function(Rt,Mt,_t){if(Rt==null)return null;var kt=dt.prototype.validate.call(this,Rt,Mt,_t);if(kt)return kt;var nt=[{field:"filterPaneEnabled",validators:[ht.Validators.booleanValidator]},{field:"hideErrors",validators:[ht.Validators.booleanValidator]},{field:"panes",validators:[ht.Validators.qnaPanesValidator]}],s=new rt.MultipleFieldsValidator(nt);return s.validate(Rt,Mt,_t)},Et}(bt.ObjectValidator);ft.QnaSettingsValidator=At;var Ct=function(dt){vt(Et,dt);function Et(){return dt!==null&&dt.apply(this,arguments)||this}return Et.prototype.validate=function(Rt,Mt,_t){if(Rt==null)return null;var kt=dt.prototype.validate.call(this,Rt,Mt,_t);if(kt)return kt;var nt=[{field:"datasetIds",validators:[ht.Validators.stringArrayValidator]},{field:"question",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]}],s=new rt.MultipleFieldsValidator(nt);return s.validate(Rt,Mt,_t)},Et}(bt.ObjectValidator);ft.QnaInterpretInputDataValidator=Ct},function(gt,ft,yt){var vt=this&&this.__extends||function(){var At=function(Ct,dt){return At=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Et,Rt){Et.__proto__=Rt}||function(Et,Rt){for(var Mt in Rt)Object.prototype.hasOwnProperty.call(Rt,Mt)&&(Et[Mt]=Rt[Mt])},At(Ct,dt)};return function(Ct,dt){if(typeof dt!="function"&&dt!==null)throw new TypeError("Class extends value "+String(dt)+" is not a constructor or null");At(Ct,dt);function Et(){this.constructor=Ct}Ct.prototype=dt===null?Object.create(dt):(Et.prototype=dt.prototype,new Et)}}();Object.defineProperty(ft,"__esModule",{value:!0}),ft.ReportCreateValidator=void 0;var rt=yt(3),bt=yt(4),ht=yt(1),wt=function(At){vt(Ct,At);function Ct(){return At!==null&&At.apply(this,arguments)||this}return Ct.prototype.validate=function(dt,Et,Rt){if(dt==null)return null;var Mt=At.prototype.validate.call(this,dt,Et,Rt);if(Mt)return Mt;var _t=[{field:"accessToken",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"datasetId",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"groupId",validators:[ht.Validators.stringValidator]},{field:"tokenType",validators:[ht.Validators.tokenTypeValidator]},{field:"theme",validators:[ht.Validators.customThemeValidator]}],kt=new rt.MultipleFieldsValidator(_t);return kt.validate(dt,Et,Rt)},Ct}(bt.ObjectValidator);ft.ReportCreateValidator=wt},function(gt,ft,yt){var vt=this&&this.__extends||function(){var At=function(Ct,dt){return At=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Et,Rt){Et.__proto__=Rt}||function(Et,Rt){for(var Mt in Rt)Object.prototype.hasOwnProperty.call(Rt,Mt)&&(Et[Mt]=Rt[Mt])},At(Ct,dt)};return function(Ct,dt){if(typeof dt!="function"&&dt!==null)throw new TypeError("Class extends value "+String(dt)+" is not a constructor or null");At(Ct,dt);function Et(){this.constructor=Ct}Ct.prototype=dt===null?Object.create(dt):(Et.prototype=dt.prototype,new Et)}}();Object.defineProperty(ft,"__esModule",{value:!0}),ft.ReportLoadValidator=void 0;var rt=yt(3),bt=yt(4),ht=yt(1),wt=function(At){vt(Ct,At);function Ct(){return At!==null&&At.apply(this,arguments)||this}return Ct.prototype.validate=function(dt,Et,Rt){if(dt==null)return null;var Mt=At.prototype.validate.call(this,dt,Et,Rt);if(Mt)return Mt;var _t=[{field:"accessToken",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"id",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"groupId",validators:[ht.Validators.stringValidator]},{field:"settings",validators:[ht.Validators.settingsValidator]},{field:"pageName",validators:[ht.Validators.stringValidator]},{field:"filters",validators:[ht.Validators.reportLoadFiltersValidator]},{field:"permissions",validators:[ht.Validators.permissionsValidator]},{field:"viewMode",validators:[ht.Validators.viewModeValidator]},{field:"tokenType",validators:[ht.Validators.tokenTypeValidator]},{field:"bookmark",validators:[ht.Validators.applyBookmarkValidator]},{field:"theme",validators:[ht.Validators.customThemeValidator]},{field:"embedUrl",validators:[ht.Validators.stringValidator]},{field:"datasetBinding",validators:[ht.Validators.datasetBindingValidator]},{field:"contrastMode",validators:[ht.Validators.contrastModeValidator]}],kt=new rt.MultipleFieldsValidator(_t);return kt.validate(dt,Et,Rt)},Ct}(bt.ObjectValidator);ft.ReportLoadValidator=wt},function(gt,ft,yt){var vt=this&&this.__extends||function(){var Ct=function(dt,Et){return Ct=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Rt,Mt){Rt.__proto__=Mt}||function(Rt,Mt){for(var _t in Mt)Object.prototype.hasOwnProperty.call(Mt,_t)&&(Rt[_t]=Mt[_t])},Ct(dt,Et)};return function(dt,Et){if(typeof Et!="function"&&Et!==null)throw new TypeError("Class extends value "+String(Et)+" is not a constructor or null");Ct(dt,Et);function Rt(){this.constructor=dt}dt.prototype=Et===null?Object.create(Et):(Rt.prototype=Et.prototype,new Rt)}}();Object.defineProperty(ft,"__esModule",{value:!0}),ft.ReportParameterFieldsValidator=ft.PaginatedReportLoadValidator=void 0;var rt=yt(3),bt=yt(4),ht=yt(1),wt=function(Ct){vt(dt,Ct);function dt(){return Ct!==null&&Ct.apply(this,arguments)||this}return dt.prototype.validate=function(Et,Rt,Mt){if(Et==null)return null;var _t=Ct.prototype.validate.call(this,Et,Rt,Mt);if(_t)return _t;var kt=[{field:"accessToken",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"id",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"groupId",validators:[ht.Validators.stringValidator]},{field:"settings",validators:[ht.Validators.paginatedReportsettingsValidator]},{field:"tokenType",validators:[ht.Validators.tokenTypeValidator]},{field:"embedUrl",validators:[ht.Validators.stringValidator]},{field:"type",validators:[ht.Validators.stringValidator]},{field:"parameterValues",validators:[ht.Validators.parameterValuesArrayValidator]},{field:"datasetBindings",validators:[ht.Validators.paginatedReportDatasetBindingArrayValidator]}],nt=new rt.MultipleFieldsValidator(kt);return nt.validate(Et,Rt,Mt)},dt}(bt.ObjectValidator);ft.PaginatedReportLoadValidator=wt;var At=function(){function Ct(){}return Ct.prototype.validate=function(dt,Et,Rt){if(dt==null)return null;var Mt=[{field:"name",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"value",validators:[ht.Validators.stringValidator]}],_t=new rt.MultipleFieldsValidator(Mt);return _t.validate(dt,Et,Rt)},Ct}();ft.ReportParameterFieldsValidator=At},function(gt,ft,yt){var vt=this&&this.__extends||function(){var At=function(Ct,dt){return At=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Et,Rt){Et.__proto__=Rt}||function(Et,Rt){for(var Mt in Rt)Object.prototype.hasOwnProperty.call(Rt,Mt)&&(Et[Mt]=Rt[Mt])},At(Ct,dt)};return function(Ct,dt){if(typeof dt!="function"&&dt!==null)throw new TypeError("Class extends value "+String(dt)+" is not a constructor or null");At(Ct,dt);function Et(){this.constructor=Ct}Ct.prototype=dt===null?Object.create(dt):(Et.prototype=dt.prototype,new Et)}}();Object.defineProperty(ft,"__esModule",{value:!0}),ft.SaveAsParametersValidator=void 0;var rt=yt(3),bt=yt(4),ht=yt(1),wt=function(At){vt(Ct,At);function Ct(){return At!==null&&At.apply(this,arguments)||this}return Ct.prototype.validate=function(dt,Et,Rt){if(dt==null)return null;var Mt=At.prototype.validate.call(this,dt,Et,Rt);if(Mt)return Mt;var _t=[{field:"name",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]}],kt=new rt.MultipleFieldsValidator(_t);return kt.validate(dt,Et,Rt)},Ct}(bt.ObjectValidator);ft.SaveAsParametersValidator=wt},function(gt,ft,yt){var vt=this&&this.__extends||function(){var Et=function(Rt,Mt){return Et=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_t,kt){_t.__proto__=kt}||function(_t,kt){for(var nt in kt)Object.prototype.hasOwnProperty.call(kt,nt)&&(_t[nt]=kt[nt])},Et(Rt,Mt)};return function(Rt,Mt){if(typeof Mt!="function"&&Mt!==null)throw new TypeError("Class extends value "+String(Mt)+" is not a constructor or null");Et(Rt,Mt);function _t(){this.constructor=Rt}Rt.prototype=Mt===null?Object.create(Mt):(_t.prototype=Mt.prototype,new _t)}}();Object.defineProperty(ft,"__esModule",{value:!0}),ft.SlicerTargetSelectorValidator=ft.VisualTypeSelectorValidator=ft.VisualSelectorValidator=void 0;var rt=yt(3),bt=yt(4),ht=yt(4),wt=yt(1),At=function(Et){vt(Rt,Et);function Rt(){return Et!==null&&Et.apply(this,arguments)||this}return Rt.prototype.validate=function(Mt,_t,kt){if(Mt==null)return null;var nt=Et.prototype.validate.call(this,Mt,_t,kt);if(nt)return nt;var s=[{field:"$schema",validators:[wt.Validators.stringValidator,new ht.SchemaValidator("http://powerbi.com/product/schema#visualSelector")]},{field:"visualName",validators:[wt.Validators.fieldRequiredValidator,wt.Validators.stringValidator]}],b=new rt.MultipleFieldsValidator(s);return b.validate(Mt,_t,kt)},Rt}(bt.ObjectValidator);ft.VisualSelectorValidator=At;var Ct=function(Et){vt(Rt,Et);function Rt(){return Et!==null&&Et.apply(this,arguments)||this}return Rt.prototype.validate=function(Mt,_t,kt){if(Mt==null)return null;var nt=Et.prototype.validate.call(this,Mt,_t,kt);if(nt)return nt;var s=[{field:"$schema",validators:[wt.Validators.fieldRequiredValidator,wt.Validators.stringValidator,new ht.SchemaValidator("http://powerbi.com/product/schema#visualTypeSelector")]},{field:"visualType",validators:[wt.Validators.fieldRequiredValidator,wt.Validators.stringValidator]}],b=new rt.MultipleFieldsValidator(s);return b.validate(Mt,_t,kt)},Rt}(bt.ObjectValidator);ft.VisualTypeSelectorValidator=Ct;var dt=function(Et){vt(Rt,Et);function Rt(){return Et!==null&&Et.apply(this,arguments)||this}return Rt.prototype.validate=function(Mt,_t,kt){if(Mt==null)return null;var nt=Et.prototype.validate.call(this,Mt,_t,kt);if(nt)return nt;var s=[{field:"$schema",validators:[wt.Validators.fieldRequiredValidator,wt.Validators.stringValidator,new ht.SchemaValidator("http://powerbi.com/product/schema#slicerTargetSelector")]},{field:"target",validators:[wt.Validators.fieldRequiredValidator,wt.Validators.slicerTargetValidator]}],b=new rt.MultipleFieldsValidator(s);return b.validate(Mt,_t,kt)},Rt}(bt.ObjectValidator);ft.SlicerTargetSelectorValidator=dt},function(gt,ft,yt){var vt=this&&this.__extends||function(){var Ct=function(dt,Et){return Ct=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Rt,Mt){Rt.__proto__=Mt}||function(Rt,Mt){for(var _t in Mt)Object.prototype.hasOwnProperty.call(Mt,_t)&&(Rt[_t]=Mt[_t])},Ct(dt,Et)};return function(dt,Et){if(typeof Et!="function"&&Et!==null)throw new TypeError("Class extends value "+String(Et)+" is not a constructor or null");Ct(dt,Et);function Rt(){this.constructor=dt}dt.prototype=Et===null?Object.create(Et):(Rt.prototype=Et.prototype,new Rt)}}();Object.defineProperty(ft,"__esModule",{value:!0}),ft.PaginatedReportSettingsValidator=ft.SettingsValidator=void 0;var rt=yt(3),bt=yt(4),ht=yt(1),wt=function(Ct){vt(dt,Ct);function dt(){return Ct!==null&&Ct.apply(this,arguments)||this}return dt.prototype.validate=function(Et,Rt,Mt){if(Et==null)return null;var _t=Ct.prototype.validate.call(this,Et,Rt,Mt);if(_t)return _t;var kt=[{field:"filterPaneEnabled",validators:[ht.Validators.booleanValidator]},{field:"navContentPaneEnabled",validators:[ht.Validators.booleanValidator]},{field:"bookmarksPaneEnabled",validators:[ht.Validators.booleanValidator]},{field:"useCustomSaveAsDialog",validators:[ht.Validators.booleanValidator]},{field:"extensions",validators:[ht.Validators.extensionsValidator]},{field:"layoutType",validators:[ht.Validators.layoutTypeValidator]},{field:"customLayout",validators:[ht.Validators.customLayoutValidator]},{field:"background",validators:[ht.Validators.backgroundValidator]},{field:"visualSettings",validators:[ht.Validators.visualSettingsValidator]},{field:"hideErrors",validators:[ht.Validators.booleanValidator]},{field:"commands",validators:[ht.Validators.commandsSettingsArrayValidator]},{field:"hyperlinkClickBehavior",validators:[ht.Validators.hyperlinkClickBehaviorValidator]},{field:"bars",validators:[ht.Validators.reportBarsValidator]},{field:"panes",validators:[ht.Validators.reportPanesValidator]},{field:"personalBookmarksEnabled",validators:[ht.Validators.booleanValidator]},{field:"persistentFiltersEnabled",validators:[ht.Validators.booleanValidator]},{field:"visualRenderedEvents",validators:[ht.Validators.booleanValidator]},{field:"authoringHintsEnabled",validators:[ht.Validators.booleanValidator]},{field:"printSettings",validators:[ht.Validators.printSettingsValidator]}],nt=new rt.MultipleFieldsValidator(kt);return nt.validate(Et,Rt,Mt)},dt}(bt.ObjectValidator);ft.SettingsValidator=wt;var At=function(Ct){vt(dt,Ct);function dt(){return Ct!==null&&Ct.apply(this,arguments)||this}return dt.prototype.validate=function(Et,Rt,Mt){if(Et==null)return null;var _t=Ct.prototype.validate.call(this,Et,Rt,Mt);if(_t)return _t;var kt=[{field:"commands",validators:[ht.Validators.paginatedReportCommandsValidator]}],nt=new rt.MultipleFieldsValidator(kt);return nt.validate(Et,Rt,Mt)},dt}(bt.ObjectValidator);ft.PaginatedReportSettingsValidator=At},function(gt,ft,yt){var vt=this&&this.__extends||function(){var Ct=function(dt,Et){return Ct=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Rt,Mt){Rt.__proto__=Mt}||function(Rt,Mt){for(var _t in Mt)Object.prototype.hasOwnProperty.call(Mt,_t)&&(Rt[_t]=Mt[_t])},Ct(dt,Et)};return function(dt,Et){if(typeof Et!="function"&&Et!==null)throw new TypeError("Class extends value "+String(Et)+" is not a constructor or null");Ct(dt,Et);function Rt(){this.constructor=dt}dt.prototype=Et===null?Object.create(Et):(Rt.prototype=Et.prototype,new Rt)}}();Object.defineProperty(ft,"__esModule",{value:!0}),ft.SlicerStateValidator=ft.SlicerValidator=void 0;var rt=yt(3),bt=yt(4),ht=yt(1),wt=function(Ct){vt(dt,Ct);function dt(){return Ct!==null&&Ct.apply(this,arguments)||this}return dt.prototype.validate=function(Et,Rt,Mt){if(Et==null)return null;var _t=Ct.prototype.validate.call(this,Et,Rt,Mt);if(_t)return _t;var kt=[{field:"selector",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.slicerSelectorValidator]},{field:"state",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.slicerStateValidator]}],nt=new rt.MultipleFieldsValidator(kt);return nt.validate(Et,Rt,Mt)},dt}(bt.ObjectValidator);ft.SlicerValidator=wt;var At=function(Ct){vt(dt,Ct);function dt(){return Ct!==null&&Ct.apply(this,arguments)||this}return dt.prototype.validate=function(Et,Rt,Mt){if(Et==null)return null;var _t=Ct.prototype.validate.call(this,Et,Rt,Mt);if(_t)return _t;var kt=[{field:"filters",validators:[ht.Validators.filtersArrayValidator]}],nt=new rt.MultipleFieldsValidator(kt);return nt.validate(Et,Rt,Mt)},dt}(bt.ObjectValidator);ft.SlicerStateValidator=At},function(gt,ft,yt){var vt=this&&this.__extends||function(){var At=function(Ct,dt){return At=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Et,Rt){Et.__proto__=Rt}||function(Et,Rt){for(var Mt in Rt)Object.prototype.hasOwnProperty.call(Rt,Mt)&&(Et[Mt]=Rt[Mt])},At(Ct,dt)};return function(Ct,dt){if(typeof dt!="function"&&dt!==null)throw new TypeError("Class extends value "+String(dt)+" is not a constructor or null");At(Ct,dt);function Et(){this.constructor=Ct}Ct.prototype=dt===null?Object.create(dt):(Et.prototype=dt.prototype,new Et)}}();Object.defineProperty(ft,"__esModule",{value:!0}),ft.TileLoadValidator=void 0;var rt=yt(3),bt=yt(4),ht=yt(1),wt=function(At){vt(Ct,At);function Ct(){return At!==null&&At.apply(this,arguments)||this}return Ct.prototype.validate=function(dt,Et,Rt){if(dt==null)return null;var Mt=At.prototype.validate.call(this,dt,Et,Rt);if(Mt)return Mt;var _t=[{field:"accessToken",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"id",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"dashboardId",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"groupId",validators:[ht.Validators.stringValidator]},{field:"pageView",validators:[ht.Validators.stringValidator]},{field:"tokenType",validators:[ht.Validators.tokenTypeValidator]},{field:"width",validators:[ht.Validators.numberValidator]},{field:"height",validators:[ht.Validators.numberValidator]}],kt=new rt.MultipleFieldsValidator(_t);return kt.validate(dt,Et,Rt)},Ct}(bt.ObjectValidator);ft.TileLoadValidator=wt},function(gt,ft,yt){var vt=this&&this.__extends||function(){var dt=function(Et,Rt){return dt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Mt,_t){Mt.__proto__=_t}||function(Mt,_t){for(var kt in _t)Object.prototype.hasOwnProperty.call(_t,kt)&&(Mt[kt]=_t[kt])},dt(Et,Rt)};return function(Et,Rt){if(typeof Rt!="function"&&Rt!==null)throw new TypeError("Class extends value "+String(Rt)+" is not a constructor or null");dt(Et,Rt);function Mt(){this.constructor=Et}Et.prototype=Rt===null?Object.create(Rt):(Mt.prototype=Rt.prototype,new Mt)}}();Object.defineProperty(ft,"__esModule",{value:!0}),ft.VisualHeaderValidator=ft.VisualHeaderSettingsValidator=ft.VisualSettingsValidator=void 0;var rt=yt(3),bt=yt(4),ht=yt(1),wt=function(dt){vt(Et,dt);function Et(){return dt!==null&&dt.apply(this,arguments)||this}return Et.prototype.validate=function(Rt,Mt,_t){if(Rt==null)return null;var kt=dt.prototype.validate.call(this,Rt,Mt,_t);if(kt)return kt;var nt=[{field:"visualHeaders",validators:[ht.Validators.visualHeadersValidator]}],s=new rt.MultipleFieldsValidator(nt);return s.validate(Rt,Mt,_t)},Et}(bt.ObjectValidator);ft.VisualSettingsValidator=wt;var At=function(dt){vt(Et,dt);function Et(){return dt!==null&&dt.apply(this,arguments)||this}return Et.prototype.validate=function(Rt,Mt,_t){if(Rt==null)return null;var kt=dt.prototype.validate.call(this,Rt,Mt,_t);if(kt)return kt;var nt=[{field:"visible",validators:[ht.Validators.booleanValidator]}],s=new rt.MultipleFieldsValidator(nt);return s.validate(Rt,Mt,_t)},Et}(bt.ObjectValidator);ft.VisualHeaderSettingsValidator=At;var Ct=function(dt){vt(Et,dt);function Et(){return dt!==null&&dt.apply(this,arguments)||this}return Et.prototype.validate=function(Rt,Mt,_t){if(Rt==null)return null;var kt=dt.prototype.validate.call(this,Rt,Mt,_t);if(kt)return kt;var nt=[{field:"settings",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.visualHeaderSettingsValidator]},{field:"selector",validators:[ht.Validators.visualHeaderSelectorValidator]}],s=new rt.MultipleFieldsValidator(nt);return s.validate(Rt,Mt,_t)},Et}(bt.ObjectValidator);ft.VisualHeaderValidator=Ct},(gt,ft)=>{Object.defineProperty(ft,"__esModule",{value:!0}),ft.AnyOfValidator=void 0;var yt=function(){function vt(rt){this.validators=rt}return vt.prototype.validate=function(rt,bt,ht){if(rt==null)return null;for(var wt=!1,At=0,Ct=this.validators;At<Ct.length;At++){var dt=Ct[At],Et=dt.validate(rt,bt,ht);if(!Et){wt=!0;break}}return wt?null:[{message:ht+" property is invalid",path:(bt?bt+".":"")+ht,keyword:"invalid"}]},vt}();ft.AnyOfValidator=yt},(gt,ft)=>{Object.defineProperty(ft,"__esModule",{value:!0}),ft.FieldForbiddenValidator=void 0;var yt=function(){function vt(){}return vt.prototype.validate=function(rt,bt,ht){return rt!==void 0?[{message:ht+" is forbidden",path:(bt?bt+".":"")+ht,keyword:"forbidden"}]:null},vt}();ft.FieldForbiddenValidator=yt},(gt,ft)=>{Object.defineProperty(ft,"__esModule",{value:!0}),ft.FieldRequiredValidator=void 0;var yt=function(){function vt(){}return vt.prototype.validate=function(rt,bt,ht){return rt==null?[{message:ht+" is required",path:(bt?bt+".":"")+ht,keyword:"required"}]:null},vt}();ft.FieldRequiredValidator=yt},function(gt,ft,yt){var vt=this&&this.__extends||function(){var ht=function(wt,At){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ct,dt){Ct.__proto__=dt}||function(Ct,dt){for(var Et in dt)Object.prototype.hasOwnProperty.call(dt,Et)&&(Ct[Et]=dt[Et])},ht(wt,At)};return function(wt,At){if(typeof At!="function"&&At!==null)throw new TypeError("Class extends value "+String(At)+" is not a constructor or null");ht(wt,At);function Ct(){this.constructor=wt}wt.prototype=At===null?Object.create(At):(Ct.prototype=At.prototype,new Ct)}}();Object.defineProperty(ft,"__esModule",{value:!0}),ft.MapValidator=void 0;var rt=yt(4),bt=function(ht){vt(wt,ht);function wt(At,Ct){var dt=ht.call(this)||this;return dt.keyValidators=At,dt.valueValidators=Ct,dt}return wt.prototype.validate=function(At,Ct,dt){if(At==null)return null;var Et=ht.prototype.validate.call(this,At,Ct,dt);if(Et)return Et;for(var Rt in At)if(At.hasOwnProperty(Rt)){for(var Mt=(Ct?Ct+".":"")+dt+"."+Rt,_t=0,kt=this.keyValidators;_t<kt.length;_t++){var nt=kt[_t];if(Et=nt.validate(Rt,Mt,dt),Et)return Et}for(var s=0,b=this.valueValidators;s<b.length;s++){var $=b[s];if(Et=$.validate(At[Rt],Mt,dt),Et)return Et}}return null},wt}(rt.ObjectValidator);ft.MapValidator=bt},function(gt,ft,yt){var vt=this&&this.__extends||function(){var At=function(Ct,dt){return At=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Et,Rt){Et.__proto__=Rt}||function(Et,Rt){for(var Mt in Rt)Object.prototype.hasOwnProperty.call(Rt,Mt)&&(Et[Mt]=Rt[Mt])},At(Ct,dt)};return function(Ct,dt){if(typeof dt!="function"&&dt!==null)throw new TypeError("Class extends value "+String(dt)+" is not a constructor or null");At(Ct,dt);function Et(){this.constructor=Ct}Ct.prototype=dt===null?Object.create(dt):(Et.prototype=dt.prototype,new Et)}}();Object.defineProperty(ft,"__esModule",{value:!0}),ft.ParametersPanelValidator=void 0;var rt=yt(3),bt=yt(4),ht=yt(1),wt=function(At){vt(Ct,At);function Ct(){return At!==null&&At.apply(this,arguments)||this}return Ct.prototype.validate=function(dt,Et,Rt){if(dt==null)return null;var Mt=At.prototype.validate.call(this,dt,Et,Rt);if(Mt)return Mt;var _t=[{field:"expanded",validators:[ht.Validators.booleanValidator]},{field:"enabled",validators:[ht.Validators.booleanValidator]}],kt=new rt.MultipleFieldsValidator(_t);return kt.validate(dt,Et,Rt)},Ct}(bt.ObjectValidator);ft.ParametersPanelValidator=wt},function(gt,ft,yt){var vt=this&&this.__extends||function(){var Mt=function(_t,kt){return Mt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(nt,s){nt.__proto__=s}||function(nt,s){for(var b in s)Object.prototype.hasOwnProperty.call(s,b)&&(nt[b]=s[b])},Mt(_t,kt)};return function(_t,kt){if(typeof kt!="function"&&kt!==null)throw new TypeError("Class extends value "+String(kt)+" is not a constructor or null");Mt(_t,kt);function nt(){this.constructor=_t}_t.prototype=kt===null?Object.create(kt):(nt.prototype=kt.prototype,new nt)}}();Object.defineProperty(ft,"__esModule",{value:!0}),ft.TableDataValidator=ft.TableSchemaValidator=ft.ColumnSchemaValidator=ft.CredentialsValidator=ft.DatasourceConnectionConfigValidator=ft.DatasetCreateConfigValidator=void 0;var rt=yt(3),bt=yt(4),ht=yt(1),wt=function(Mt){vt(_t,Mt);function _t(){return Mt!==null&&Mt.apply(this,arguments)||this}return _t.prototype.validate=function(kt,nt,s){if(kt==null)return null;var b=Mt.prototype.validate.call(this,kt,nt,s);if(b)return b;var $=[{field:"locale",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"mashupDocument",validators:[ht.Validators.stringValidator]},{field:"datasourceConnectionConfig",validators:[ht.Validators.datasourceConnectionConfigValidator]},{field:"tableSchemaList",validators:[ht.Validators.tableSchemaListValidator]},{field:"data",validators:[ht.Validators.tableDataArrayValidator]}],_e=new rt.MultipleFieldsValidator($);if(b=_e.validate(kt,nt,s),b)return b;if(kt.datasourceConnectionConfig&&kt.mashupDocument==null)return[{message:"mashupDocument cannot be empty when datasourceConnectionConfig is presented"}];if(kt.data&&kt.tableSchemaList==null)return[{message:"tableSchemaList cannot be empty when data is provided"}];if(kt.data==null&&kt.mashupDocument==null)return[{message:"At least one of data or mashupDocument must be provided"}]},_t}(bt.ObjectValidator);ft.DatasetCreateConfigValidator=wt;var At=function(Mt){vt(_t,Mt);function _t(){return Mt!==null&&Mt.apply(this,arguments)||this}return _t.prototype.validate=function(kt,nt,s){if(kt==null)return null;var b=Mt.prototype.validate.call(this,kt,nt,s);if(b)return b;var $=[{field:"dataCacheMode",validators:[ht.Validators.dataCacheModeValidator]},{field:"credentials",validators:[ht.Validators.credentialsValidator]}],_e=new rt.MultipleFieldsValidator($);return _e.validate(kt,nt,s)},_t}(bt.ObjectValidator);ft.DatasourceConnectionConfigValidator=At;var Ct=function(Mt){vt(_t,Mt);function _t(){return Mt!==null&&Mt.apply(this,arguments)||this}return _t.prototype.validate=function(kt,nt,s){if(kt==null)return null;var b=Mt.prototype.validate.call(this,kt,nt,s);if(b)return b;var $=[{field:"credentialType",validators:[ht.Validators.credentialTypeValidator]},{field:"credentialDetails",validators:[ht.Validators.credentialDetailsValidator]}],_e=new rt.MultipleFieldsValidator($);return _e.validate(kt,nt,s)},_t}(bt.ObjectValidator);ft.CredentialsValidator=Ct;var dt=function(Mt){vt(_t,Mt);function _t(){return Mt!==null&&Mt.apply(this,arguments)||this}return _t.prototype.validate=function(kt,nt,s){if(kt==null)return null;var b=Mt.prototype.validate.call(this,kt,nt,s);if(b)return b;var $=[{field:"name",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"displayName",validators:[ht.Validators.stringValidator]},{field:"dataType",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]}],_e=new rt.MultipleFieldsValidator($);return _e.validate(kt,nt,s)},_t}(bt.ObjectValidator);ft.ColumnSchemaValidator=dt;var Et=function(Mt){vt(_t,Mt);function _t(){return Mt!==null&&Mt.apply(this,arguments)||this}return _t.prototype.validate=function(kt,nt,s){if(kt==null)return null;var b=Mt.prototype.validate.call(this,kt,nt,s);if(b)return b;var $=[{field:"name",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"columns",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.columnSchemaArrayValidator]}],_e=new rt.MultipleFieldsValidator($);return _e.validate(kt,nt,s)},_t}(bt.ObjectValidator);ft.TableSchemaValidator=Et;var Rt=function(Mt){vt(_t,Mt);function _t(){return Mt!==null&&Mt.apply(this,arguments)||this}return _t.prototype.validate=function(kt,nt,s){if(kt==null)return null;var b=Mt.prototype.validate.call(this,kt,nt,s);if(b)return b;var $=[{field:"name",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"rows",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.rawDataValidator]}],_e=new rt.MultipleFieldsValidator($);return _e.validate(kt,nt,s)},_t}(bt.ObjectValidator);ft.TableDataValidator=Rt},function(gt,ft,yt){var vt=this&&this.__extends||function(){var At=function(Ct,dt){return At=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Et,Rt){Et.__proto__=Rt}||function(Et,Rt){for(var Mt in Rt)Object.prototype.hasOwnProperty.call(Rt,Mt)&&(Et[Mt]=Rt[Mt])},At(Ct,dt)};return function(Ct,dt){if(typeof dt!="function"&&dt!==null)throw new TypeError("Class extends value "+String(dt)+" is not a constructor or null");At(Ct,dt);function Et(){this.constructor=Ct}Ct.prototype=dt===null?Object.create(dt):(Et.prototype=dt.prototype,new Et)}}();Object.defineProperty(ft,"__esModule",{value:!0}),ft.QuickCreateValidator=void 0;var rt=yt(3),bt=yt(4),ht=yt(1),wt=function(At){vt(Ct,At);function Ct(){return At!==null&&At.apply(this,arguments)||this}return Ct.prototype.validate=function(dt,Et,Rt){if(dt==null)return null;var Mt=At.prototype.validate.call(this,dt,Et,Rt);if(Mt)return Mt;var _t=[{field:"accessToken",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"groupId",validators:[ht.Validators.stringValidator]},{field:"tokenType",validators:[ht.Validators.tokenTypeValidator]},{field:"theme",validators:[ht.Validators.customThemeValidator]},{field:"datasetCreateConfig",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.datasetCreateConfigValidator]}],kt=new rt.MultipleFieldsValidator(_t);return kt.validate(dt,Et,Rt)},Ct}(bt.ObjectValidator);ft.QuickCreateValidator=wt},function(gt,ft,yt){var vt=this&&this.__extends||function(){var wt=function(At,Ct){return wt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(dt,Et){dt.__proto__=Et}||function(dt,Et){for(var Rt in Et)Object.prototype.hasOwnProperty.call(Et,Rt)&&(dt[Rt]=Et[Rt])},wt(At,Ct)};return function(At,Ct){if(typeof Ct!="function"&&Ct!==null)throw new TypeError("Class extends value "+String(Ct)+" is not a constructor or null");wt(At,Ct);function dt(){this.constructor=At}At.prototype=Ct===null?Object.create(Ct):(dt.prototype=Ct.prototype,new dt)}}();Object.defineProperty(ft,"__esModule",{value:!0}),ft.PrintSettingsValidator=void 0;var rt=yt(3),bt=yt(4),ht=function(wt){vt(At,wt);function At(){return wt!==null&&wt.apply(this,arguments)||this}return At.prototype.validate=function(Ct,dt,Et){if(Ct==null)return null;var Rt=wt.prototype.validate.call(this,Ct,dt,Et);if(Rt)return Rt;var Mt=[{field:"browserPrintAdjustmentsMode",validators:[new bt.EnumValidator([0,1])]}],_t=new rt.MultipleFieldsValidator(Mt);return _t.validate(Ct,dt,Et)},At}(bt.ObjectValidator);ft.PrintSettingsValidator=ht},function(gt,ft,yt){var vt=this&&this.__extends||function(){var At=function(Ct,dt){return At=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Et,Rt){Et.__proto__=Rt}||function(Et,Rt){for(var Mt in Rt)Object.prototype.hasOwnProperty.call(Rt,Mt)&&(Et[Mt]=Rt[Mt])},At(Ct,dt)};return function(Ct,dt){if(typeof dt!="function"&&dt!==null)throw new TypeError("Class extends value "+String(dt)+" is not a constructor or null");At(Ct,dt);function Et(){this.constructor=Ct}Ct.prototype=dt===null?Object.create(dt):(Et.prototype=dt.prototype,new Et)}}();Object.defineProperty(ft,"__esModule",{value:!0}),ft.PaginatedReportDatasetBindingValidator=void 0;var rt=yt(3),bt=yt(4),ht=yt(1),wt=function(At){vt(Ct,At);function Ct(){return At!==null&&At.apply(this,arguments)||this}return Ct.prototype.validate=function(dt,Et,Rt){if(dt==null)return null;var Mt=At.prototype.validate.call(this,dt,Et,Rt);if(Mt)return Mt;var _t=[{field:"sourceDatasetId",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]},{field:"targetDatasetId",validators:[ht.Validators.fieldRequiredValidator,ht.Validators.stringValidator]}],kt=new rt.MultipleFieldsValidator(_t);return kt.validate(dt,Et,Rt)},Ct}(bt.ObjectValidator);ft.PaginatedReportDatasetBindingValidator=wt}],st={};function ct(gt){var ft=st[gt];if(ft!==void 0)return ft.exports;var yt=st[gt]={exports:{}};return at[gt].call(yt.exports,yt,yt.exports,ct),yt.exports}var ot=ct(0);return ot})())},"./node_modules/powerbi-router/dist/router.js":function(et){/*! powerbi-router v0.1.5 | (c) 2016 Microsoft Corporation MIT */(function(st,ct){et.exports=ct()})(this,function(){return function(at){var st={};function ct(ot){if(st[ot])return st[ot].exports;var gt=st[ot]={exports:{},id:ot,loaded:!1};return at[ot].call(gt.exports,gt,gt.exports,ct),gt.loaded=!0,gt.exports}return ct.m=at,ct.c=st,ct.p="",ct(0)}([function(at,st,ct){var ot=ct(1),gt=function(){function yt(vt){this.handlers=vt,this.getRouteRecognizer=new ot,this.patchRouteRecognizer=new ot,this.postRouteRecognizer=new ot,this.putRouteRecognizer=new ot,this.deleteRouteRecognizer=new ot}return yt.prototype.get=function(vt,rt){return this.registerHandler(this.getRouteRecognizer,"GET",vt,rt),this},yt.prototype.patch=function(vt,rt){return this.registerHandler(this.patchRouteRecognizer,"PATCH",vt,rt),this},yt.prototype.post=function(vt,rt){return this.registerHandler(this.postRouteRecognizer,"POST",vt,rt),this},yt.prototype.put=function(vt,rt){return this.registerHandler(this.putRouteRecognizer,"PUT",vt,rt),this},yt.prototype.delete=function(vt,rt){return this.registerHandler(this.deleteRouteRecognizer,"DELETE",vt,rt),this},yt.prototype.registerHandler=function(vt,rt,bt,ht){var wt=function(Ct){var dt=new ft;return Promise.resolve(ht(Ct,dt)).then(function(Et){return dt})};vt.add([{path:bt,handler:wt}]);var At={test:function(Ct){if(Ct.method!==rt)return!1;var dt=vt.recognize(Ct.url);if(dt===void 0)return!1;var Et=dt[0];return Ct.params=Et.params,Ct.queryParams=dt.queryParams,Ct.handler=Et.handler,!0},handle:function(Ct){return Ct.handler(Ct)}};this.handlers.addHandler(At)},yt}();st.Router=gt;var ft=function(){function yt(){this.statusCode=200,this.headers={},this.body=null}return yt.prototype.send=function(vt,rt){this.statusCode=vt,this.body=rt},yt}();st.Response=ft},function(at,st,ct){var ot;(function(gt){(function(){function ft(lt,_,tt){this.path=lt,this.matcher=_,this.delegate=tt}ft.prototype={to:function(lt,_){var tt=this.delegate;if(tt&&tt.willAddRoute&&(lt=tt.willAddRoute(this.matcher.target,lt)),this.matcher.add(this.path,lt),_){if(_.length===0)throw new Error("You must have an argument in the function passed to `to`");this.matcher.addChild(this.path,lt,_,this.delegate)}return this}};function yt(lt){this.routes={},this.children={},this.target=lt}yt.prototype={add:function(lt,_){this.routes[lt]=_},addChild:function(lt,_,tt,Tt){var It=new yt(_);this.children[lt]=It;var Nt=vt(lt,It,Tt);Tt&&Tt.contextEntered&&Tt.contextEntered(_,Nt),tt(Nt)}};function vt(lt,_,tt){return function(Tt,It){var Nt=lt+Tt;if(It)It(vt(Nt,_,tt));else return new ft(lt+Tt,_,tt)}}function rt(lt,_,tt){for(var Tt=0,It=0;It<lt.length;It++)Tt+=lt[It].path.length;_=_.substr(Tt);var Nt={path:_,handler:tt};lt.push(Nt)}function bt(lt,_,tt,Tt){var It=_.routes;for(var Nt in It)if(It.hasOwnProperty(Nt)){var Ut=lt.slice();rt(Ut,Nt,It[Nt]),_.children[Nt]?bt(Ut,_.children[Nt],tt,Tt):tt.call(Tt,Ut)}}var ht=function(lt,_){var tt=new yt;lt(vt("",tt,this.delegate)),bt([],tt,function(Tt){_?_(this,Tt):this.add(Tt)},this)},wt=["/",".","*","+","?","|","(",")","[","]","{","}","\\"],At=new RegExp("(\\"+wt.join("|\\")+")","g");function Ct(lt){return Object.prototype.toString.call(lt)==="[object Array]"}function dt(lt){this.string=lt}dt.prototype={eachChar:function(lt){for(var _=this.string,tt,Tt=0;Tt<_.length;Tt++)tt=_.charAt(Tt),lt=lt.put({invalidChars:void 0,repeat:!1,validChars:tt});return lt},regex:function(){return this.string.replace(At,"\\$1")},generate:function(){return this.string}};function Et(lt){this.name=lt}Et.prototype={eachChar:function(lt){return lt.put({invalidChars:"/",repeat:!0,validChars:void 0})},regex:function(){return"([^/]+)"},generate:function(lt){return lt[this.name]}};function Rt(lt){this.name=lt}Rt.prototype={eachChar:function(lt){return lt.put({invalidChars:"",repeat:!0,validChars:void 0})},regex:function(){return"(.+)"},generate:function(lt){return lt[this.name]}};function Mt(){}Mt.prototype={eachChar:function(lt){return lt},regex:function(){return""},generate:function(){return""}};function _t(lt,_,tt){lt.charAt(0)==="/"&&(lt=lt.substr(1));var Tt=lt.split("/"),It=new Array(Tt.length);tt.val="";for(var Nt=0;Nt<Tt.length;Nt++){var Ut=Tt[Nt],Gt;(Gt=Ut.match(/^:([^\/]+)$/))?(It[Nt]=new Et(Gt[1]),_.push(Gt[1]),tt.val+="3"):(Gt=Ut.match(/^\*([^\/]+)$/))?(It[Nt]=new Rt(Gt[1]),tt.val+="1",_.push(Gt[1])):Ut===""?(It[Nt]=new Mt,tt.val+="2"):(It[Nt]=new dt(Ut),tt.val+="4")}return tt.val=+tt.val,It}function kt(lt){this.charSpec=lt,this.nextStates=[],this.charSpecs={},this.regex=void 0,this.handlers=void 0,this.specificity=void 0}kt.prototype={get:function(lt){if(this.charSpecs[lt.validChars])return this.charSpecs[lt.validChars];for(var _=this.nextStates,tt=0;tt<_.length;tt++){var Tt=_[tt],It=Tt.charSpec.validChars===lt.validChars;if(It=It&&Tt.charSpec.invalidChars===lt.invalidChars,It)return this.charSpecs[lt.validChars]=Tt,Tt}},put:function(lt){var _;return(_=this.get(lt))||(_=new kt(lt),this.nextStates.push(_),lt.repeat&&_.nextStates.push(_)),_},match:function(lt){for(var _=this.nextStates,tt,Tt,It,Nt=[],Ut=0;Ut<_.length;Ut++)tt=_[Ut],Tt=tt.charSpec,typeof(It=Tt.validChars)<"u"?It.indexOf(lt)!==-1&&Nt.push(tt):typeof(It=Tt.invalidChars)<"u"&&It.indexOf(lt)===-1&&Nt.push(tt);return Nt}};function nt(lt){return lt.sort(function(_,tt){return tt.specificity.val-_.specificity.val})}function s(lt,_){for(var tt=[],Tt=0,It=lt.length;Tt<It;Tt++){var Nt=lt[Tt];tt=tt.concat(Nt.match(_))}return tt}var b=Object.create||function(lt){function _(){}return _.prototype=lt,new _};function $(lt){this.queryParams=lt||{}}$.prototype=b({splice:Array.prototype.splice,slice:Array.prototype.slice,push:Array.prototype.push,length:0,queryParams:null});function _e(lt,_,tt){var Tt=lt.handlers,It=lt.regex,Nt=_.match(It),Ut=1,Gt=new $(tt);Gt.length=Tt.length;for(var Pt=0;Pt<Tt.length;Pt++){for(var qt=Tt[Pt],Kt=qt.names,jt={},Ht=0;Ht<Kt.length;Ht++)jt[Kt[Ht]]=Nt[Ut++];Gt[Pt]={handler:qt.handler,params:jt,isDynamic:!!Kt.length}}return Gt}function it(lt){lt=lt.replace(/\+/gm,"%20");var _;try{_=decodeURIComponent(lt)}catch{_=""}return _}var pt=function(){this.rootState=new kt,this.names={}};pt.prototype={add:function(lt,_){for(var tt=this.rootState,Tt="^",It={},Nt=new Array(lt.length),Ut=[],Gt,Pt=!0,qt=0;qt<lt.length;qt++){var Kt=lt[qt],jt=[],Ht=_t(Kt.path,jt,It);Ut=Ut.concat(Ht);for(var Bt=0;Bt<Ht.length;Bt++){var Jt=Ht[Bt];Jt instanceof Mt||(Pt=!1,tt=tt.put({invalidChars:void 0,repeat:!1,validChars:"/"}),Tt+="/",tt=Jt.eachChar(tt),Tt+=Jt.regex())}var sr={handler:Kt.handler,names:jt};Nt[qt]=sr}Pt&&(tt=tt.put({invalidChars:void 0,repeat:!1,validChars:"/"}),Tt+="/"),tt.handlers=Nt,tt.regex=new RegExp(Tt+"$"),tt.specificity=It,(Gt=_&&_.as)&&(this.names[Gt]={segments:Ut,handlers:Nt})},handlersFor:function(lt){var _=this.names[lt];if(!_)throw new Error("There is no route named "+lt);for(var tt=new Array(_.handlers.length),Tt=0;Tt<_.handlers.length;Tt++)tt[Tt]=_.handlers[Tt];return tt},hasRoute:function(lt){return!!this.names[lt]},generate:function(lt,_){var tt=this.names[lt],Tt="";if(!tt)throw new Error("There is no route named "+lt);for(var It=tt.segments,Nt=0;Nt<It.length;Nt++){var Ut=It[Nt];Ut instanceof Mt||(Tt+="/",Tt+=Ut.generate(_))}return Tt.charAt(0)!=="/"&&(Tt="/"+Tt),_&&_.queryParams&&(Tt+=this.generateQueryString(_.queryParams,tt.handlers)),Tt},generateQueryString:function(lt,_){var tt=[],Tt=[];for(var It in lt)lt.hasOwnProperty(It)&&Tt.push(It);Tt.sort();for(var Nt=0;Nt<Tt.length;Nt++){It=Tt[Nt];var Ut=lt[It];if(Ut!=null){var Gt=encodeURIComponent(It);if(Ct(Ut))for(var Pt=0;Pt<Ut.length;Pt++){var qt=It+"[]="+encodeURIComponent(Ut[Pt]);tt.push(qt)}else Gt+="="+encodeURIComponent(Ut),tt.push(Gt)}}return tt.length===0?"":"?"+tt.join("&")},parseQueryString:function(lt){for(var _=lt.split("&"),tt={},Tt=0;Tt<_.length;Tt++){var It=_[Tt].split("="),Nt=it(It[0]),Ut=Nt.length,Gt=!1,Pt;It.length===1?Pt="true":(Ut>2&&Nt.slice(Ut-2)==="[]"&&(Gt=!0,Nt=Nt.slice(0,Ut-2),tt[Nt]||(tt[Nt]=[])),Pt=It[1]?it(It[1]):""),Gt?tt[Nt].push(Pt):tt[Nt]=Pt}return tt},recognize:function(lt){var _=[this.rootState],tt,Tt,It,Nt={},Ut=!1;if(It=lt.indexOf("?"),It!==-1){var Gt=lt.substr(It+1,lt.length);lt=lt.substr(0,It),Nt=this.parseQueryString(Gt)}for(lt=decodeURI(lt),lt.charAt(0)!=="/"&&(lt="/"+lt),tt=lt.length,tt>1&&lt.charAt(tt-1)==="/"&&(lt=lt.substr(0,tt-1),Ut=!0),Tt=0;Tt<lt.length&&(_=s(_,lt.charAt(Tt)),!!_.length);Tt++);var Pt=[];for(Tt=0;Tt<_.length;Tt++)_[Tt].handlers&&Pt.push(_[Tt]);_=nt(Pt);var qt=Pt[0];if(qt&&qt.handlers)return Ut&&qt.regex.source.slice(-5)==="(.+)$"&&(lt=lt+"/"),_e(qt,lt,Nt)}},pt.prototype.map=ht,pt.VERSION="0.1.11";var mt=pt;ct(3).amd?(ot=(function(){return mt}).call(st,ct,st,gt),ot!==void 0&&(gt.exports=ot)):typeof gt<"u"&&gt.exports?gt.exports=mt:typeof this<"u"&&(this.RouteRecognizer=mt)}).call(this)}).call(st,ct(2)(at))},function(at,st){at.exports=function(ct){return ct.webpackPolyfill||(ct.deprecate=function(){},ct.paths=[],ct.children=[],ct.webpackPolyfill=1),ct}},function(at,st){at.exports=function(){throw new Error("define cannot be used indirect")}}])})},"./src/FilterBuilders/advancedFilterBuilder.ts":function(et,at,st){var ct=this&&this.__extends||function(){var yt=function(vt,rt){return yt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(bt,ht){bt.__proto__=ht}||function(bt,ht){for(var wt in ht)Object.prototype.hasOwnProperty.call(ht,wt)&&(bt[wt]=ht[wt])},yt(vt,rt)};return function(vt,rt){if(typeof rt!="function"&&rt!==null)throw new TypeError("Class extends value "+String(rt)+" is not a constructor or null");yt(vt,rt);function bt(){this.constructor=vt}vt.prototype=rt===null?Object.create(rt):(bt.prototype=rt.prototype,new bt)}}();Object.defineProperty(at,"__esModule",{value:!0}),at.AdvancedFilterBuilder=void 0;var ot=st("./node_modules/powerbi-models/dist/models.js"),gt=st("./src/FilterBuilders/filterBuilder.ts"),ft=function(yt){ct(vt,yt);function vt(){var rt=yt!==null&&yt.apply(this,arguments)||this;return rt.conditions=[],rt}return vt.prototype.and=function(){return this.logicalOperator="And",this},vt.prototype.or=function(){return this.logicalOperator="Or",this},vt.prototype.addCondition=function(rt,bt){var ht={operator:rt,value:bt};return this.conditions.push(ht),this},vt.prototype.build=function(){var rt=new ot.AdvancedFilter(this.target,this.logicalOperator,this.conditions);return rt},vt}(gt.FilterBuilder);at.AdvancedFilterBuilder=ft},"./src/FilterBuilders/basicFilterBuilder.ts":function(et,at,st){var ct=this&&this.__extends||function(){var yt=function(vt,rt){return yt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(bt,ht){bt.__proto__=ht}||function(bt,ht){for(var wt in ht)Object.prototype.hasOwnProperty.call(ht,wt)&&(bt[wt]=ht[wt])},yt(vt,rt)};return function(vt,rt){if(typeof rt!="function"&&rt!==null)throw new TypeError("Class extends value "+String(rt)+" is not a constructor or null");yt(vt,rt);function bt(){this.constructor=vt}vt.prototype=rt===null?Object.create(rt):(bt.prototype=rt.prototype,new bt)}}();Object.defineProperty(at,"__esModule",{value:!0}),at.BasicFilterBuilder=void 0;var ot=st("./node_modules/powerbi-models/dist/models.js"),gt=st("./src/FilterBuilders/filterBuilder.ts"),ft=function(yt){ct(vt,yt);function vt(){var rt=yt!==null&&yt.apply(this,arguments)||this;return rt.isRequireSingleSelection=!1,rt}return vt.prototype.in=function(rt){return this.operator="In",this.values=rt,this},vt.prototype.notIn=function(rt){return this.operator="NotIn",this.values=rt,this},vt.prototype.all=function(){return this.operator="All",this.values=[],this},vt.prototype.requireSingleSelection=function(rt){return rt===void 0&&(rt=!1),this.isRequireSingleSelection=rt,this},vt.prototype.build=function(){var rt=new ot.BasicFilter(this.target,this.operator,this.values);return rt.requireSingleSelection=this.isRequireSingleSelection,rt},vt}(gt.FilterBuilder);at.BasicFilterBuilder=ft},"./src/FilterBuilders/filterBuilder.ts":(et,at)=>{Object.defineProperty(at,"__esModule",{value:!0}),at.FilterBuilder=void 0;var st=function(){function ct(){}return ct.prototype.withTargetObject=function(ot){return this.target=ot,this},ct.prototype.withColumnTarget=function(ot,gt){return this.target={table:ot,column:gt},this},ct.prototype.withMeasureTarget=function(ot,gt){return this.target={table:ot,measure:gt},this},ct.prototype.withHierarchyLevelTarget=function(ot,gt,ft){return this.target={table:ot,hierarchy:gt,hierarchyLevel:ft},this},ct.prototype.withColumnAggregation=function(ot,gt,ft){return this.target={table:ot,column:gt,aggregationFunction:ft},this},ct.prototype.withHierarchyLevelAggregationTarget=function(ot,gt,ft,yt){return this.target={table:ot,hierarchy:gt,hierarchyLevel:ft,aggregationFunction:yt},this},ct}();at.FilterBuilder=st},"./src/FilterBuilders/index.ts":(et,at,st)=>{Object.defineProperty(at,"__esModule",{value:!0}),at.RelativeTimeFilterBuilder=at.RelativeDateFilterBuilder=at.TopNFilterBuilder=at.AdvancedFilterBuilder=at.BasicFilterBuilder=void 0;var ct=st("./src/FilterBuilders/basicFilterBuilder.ts");Object.defineProperty(at,"BasicFilterBuilder",{enumerable:!0,get:function(){return ct.BasicFilterBuilder}});var ot=st("./src/FilterBuilders/advancedFilterBuilder.ts");Object.defineProperty(at,"AdvancedFilterBuilder",{enumerable:!0,get:function(){return ot.AdvancedFilterBuilder}});var gt=st("./src/FilterBuilders/topNFilterBuilder.ts");Object.defineProperty(at,"TopNFilterBuilder",{enumerable:!0,get:function(){return gt.TopNFilterBuilder}});var ft=st("./src/FilterBuilders/relativeDateFilterBuilder.ts");Object.defineProperty(at,"RelativeDateFilterBuilder",{enumerable:!0,get:function(){return ft.RelativeDateFilterBuilder}});var yt=st("./src/FilterBuilders/relativeTimeFilterBuilder.ts");Object.defineProperty(at,"RelativeTimeFilterBuilder",{enumerable:!0,get:function(){return yt.RelativeTimeFilterBuilder}})},"./src/FilterBuilders/relativeDateFilterBuilder.ts":function(et,at,st){var ct=this&&this.__extends||function(){var yt=function(vt,rt){return yt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(bt,ht){bt.__proto__=ht}||function(bt,ht){for(var wt in ht)Object.prototype.hasOwnProperty.call(ht,wt)&&(bt[wt]=ht[wt])},yt(vt,rt)};return function(vt,rt){if(typeof rt!="function"&&rt!==null)throw new TypeError("Class extends value "+String(rt)+" is not a constructor or null");yt(vt,rt);function bt(){this.constructor=vt}vt.prototype=rt===null?Object.create(rt):(bt.prototype=rt.prototype,new bt)}}();Object.defineProperty(at,"__esModule",{value:!0}),at.RelativeDateFilterBuilder=void 0;var ot=st("./node_modules/powerbi-models/dist/models.js"),gt=st("./src/FilterBuilders/filterBuilder.ts"),ft=function(yt){ct(vt,yt);function vt(){var rt=yt!==null&&yt.apply(this,arguments)||this;return rt.isTodayIncluded=!0,rt}return vt.prototype.inLast=function(rt,bt){return this.operator=ot.RelativeDateOperators.InLast,this.timeUnitsCount=rt,this.timeUnitType=bt,this},vt.prototype.inThis=function(rt,bt){return this.operator=ot.RelativeDateOperators.InThis,this.timeUnitsCount=rt,this.timeUnitType=bt,this},vt.prototype.inNext=function(rt,bt){return this.operator=ot.RelativeDateOperators.InNext,this.timeUnitsCount=rt,this.timeUnitType=bt,this},vt.prototype.includeToday=function(rt){return this.isTodayIncluded=rt,this},vt.prototype.build=function(){var rt=new ot.RelativeDateFilter(this.target,this.operator,this.timeUnitsCount,this.timeUnitType,this.isTodayIncluded);return rt},vt}(gt.FilterBuilder);at.RelativeDateFilterBuilder=ft},"./src/FilterBuilders/relativeTimeFilterBuilder.ts":function(et,at,st){var ct=this&&this.__extends||function(){var yt=function(vt,rt){return yt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(bt,ht){bt.__proto__=ht}||function(bt,ht){for(var wt in ht)Object.prototype.hasOwnProperty.call(ht,wt)&&(bt[wt]=ht[wt])},yt(vt,rt)};return function(vt,rt){if(typeof rt!="function"&&rt!==null)throw new TypeError("Class extends value "+String(rt)+" is not a constructor or null");yt(vt,rt);function bt(){this.constructor=vt}vt.prototype=rt===null?Object.create(rt):(bt.prototype=rt.prototype,new bt)}}();Object.defineProperty(at,"__esModule",{value:!0}),at.RelativeTimeFilterBuilder=void 0;var ot=st("./node_modules/powerbi-models/dist/models.js"),gt=st("./src/FilterBuilders/filterBuilder.ts"),ft=function(yt){ct(vt,yt);function vt(){return yt!==null&&yt.apply(this,arguments)||this}return vt.prototype.inLast=function(rt,bt){return this.operator=ot.RelativeDateOperators.InLast,this.timeUnitsCount=rt,this.timeUnitType=bt,this},vt.prototype.inThis=function(rt,bt){return this.operator=ot.RelativeDateOperators.InThis,this.timeUnitsCount=rt,this.timeUnitType=bt,this},vt.prototype.inNext=function(rt,bt){return this.operator=ot.RelativeDateOperators.InNext,this.timeUnitsCount=rt,this.timeUnitType=bt,this},vt.prototype.build=function(){var rt=new ot.RelativeTimeFilter(this.target,this.operator,this.timeUnitsCount,this.timeUnitType);return rt},vt}(gt.FilterBuilder);at.RelativeTimeFilterBuilder=ft},"./src/FilterBuilders/topNFilterBuilder.ts":function(et,at,st){var ct=this&&this.__extends||function(){var yt=function(vt,rt){return yt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(bt,ht){bt.__proto__=ht}||function(bt,ht){for(var wt in ht)Object.prototype.hasOwnProperty.call(ht,wt)&&(bt[wt]=ht[wt])},yt(vt,rt)};return function(vt,rt){if(typeof rt!="function"&&rt!==null)throw new TypeError("Class extends value "+String(rt)+" is not a constructor or null");yt(vt,rt);function bt(){this.constructor=vt}vt.prototype=rt===null?Object.create(rt):(bt.prototype=rt.prototype,new bt)}}();Object.defineProperty(at,"__esModule",{value:!0}),at.TopNFilterBuilder=void 0;var ot=st("./node_modules/powerbi-models/dist/models.js"),gt=st("./src/FilterBuilders/filterBuilder.ts"),ft=function(yt){ct(vt,yt);function vt(){return yt!==null&&yt.apply(this,arguments)||this}return vt.prototype.top=function(rt){return this.operator="Top",this.itemCount=rt,this},vt.prototype.bottom=function(rt){return this.operator="Bottom",this.itemCount=rt,this},vt.prototype.orderByTarget=function(rt){return this.orderByTargetValue=rt,this},vt.prototype.build=function(){var rt=new ot.TopNFilter(this.target,this.operator,this.itemCount,this.orderByTargetValue);return rt},vt}(gt.FilterBuilder);at.TopNFilterBuilder=ft},"./src/bookmarksManager.ts":function(et,at,st){var ct=this&&this.__awaiter||function(vt,rt,bt,ht){function wt(At){return At instanceof bt?At:new bt(function(Ct){Ct(At)})}return new(bt||(bt=Promise))(function(At,Ct){function dt(Mt){try{Rt(ht.next(Mt))}catch(_t){Ct(_t)}}function Et(Mt){try{Rt(ht.throw(Mt))}catch(_t){Ct(_t)}}function Rt(Mt){Mt.done?At(Mt.value):wt(Mt.value).then(dt,Et)}Rt((ht=ht.apply(vt,rt||[])).next())})},ot=this&&this.__generator||function(vt,rt){var bt={label:0,sent:function(){if(At[0]&1)throw At[1];return At[1]},trys:[],ops:[]},ht,wt,At,Ct;return Ct={next:dt(0),throw:dt(1),return:dt(2)},typeof Symbol=="function"&&(Ct[Symbol.iterator]=function(){return this}),Ct;function dt(Rt){return function(Mt){return Et([Rt,Mt])}}function Et(Rt){if(ht)throw new TypeError("Generator is already executing.");for(;bt;)try{if(ht=1,wt&&(At=Rt[0]&2?wt.return:Rt[0]?wt.throw||((At=wt.return)&&At.call(wt),0):wt.next)&&!(At=At.call(wt,Rt[1])).done)return At;switch(wt=0,At&&(Rt=[Rt[0]&2,At.value]),Rt[0]){case 0:case 1:At=Rt;break;case 4:return bt.label++,{value:Rt[1],done:!1};case 5:bt.label++,wt=Rt[1],Rt=[0];continue;case 7:Rt=bt.ops.pop(),bt.trys.pop();continue;default:if(At=bt.trys,!(At=At.length>0&&At[At.length-1])&&(Rt[0]===6||Rt[0]===2)){bt=0;continue}if(Rt[0]===3&&(!At||Rt[1]>At[0]&&Rt[1]<At[3])){bt.label=Rt[1];break}if(Rt[0]===6&&bt.label<At[1]){bt.label=At[1],At=Rt;break}if(At&&bt.label<At[2]){bt.label=At[2],bt.ops.push(Rt);break}At[2]&&bt.ops.pop(),bt.trys.pop();continue}Rt=rt.call(vt,bt)}catch(Mt){Rt=[6,Mt],wt=0}finally{ht=At=0}if(Rt[0]&5)throw Rt[1];return{value:Rt[0]?Rt[1]:void 0,done:!0}}};Object.defineProperty(at,"__esModule",{value:!0}),at.BookmarksManager=void 0;var gt=st("./src/util.ts"),ft=st("./src/errors.ts"),yt=function(){function vt(rt,bt,ht){this.service=rt,this.config=bt,this.iframe=ht}return vt.prototype.getBookmarks=function(){return ct(this,void 0,void 0,function(){var rt,bt;return ot(this,function(ht){switch(ht.label){case 0:if((0,gt.isRDLEmbed)(this.config.embedUrl))return[2,Promise.reject(ft.APINotSupportedForRDLError)];ht.label=1;case 1:return ht.trys.push([1,3,,4]),[4,this.service.hpm.get("/report/bookmarks",{uid:this.config.uniqueId},this.iframe.contentWindow)];case 2:return rt=ht.sent(),[2,rt.body];case 3:throw bt=ht.sent(),bt.body;case 4:return[2]}})})},vt.prototype.apply=function(rt){return ct(this,void 0,void 0,function(){var bt,ht;return ot(this,function(wt){switch(wt.label){case 0:if((0,gt.isRDLEmbed)(this.config.embedUrl))return[2,Promise.reject(ft.APINotSupportedForRDLError)];bt={name:rt},wt.label=1;case 1:return wt.trys.push([1,3,,4]),[4,this.service.hpm.post("/report/bookmarks/applyByName",bt,{uid:this.config.uniqueId},this.iframe.contentWindow)];case 2:return[2,wt.sent()];case 3:throw ht=wt.sent(),ht.body;case 4:return[2]}})})},vt.prototype.play=function(rt){return ct(this,void 0,void 0,function(){var bt,ht;return ot(this,function(wt){switch(wt.label){case 0:if((0,gt.isRDLEmbed)(this.config.embedUrl))return[2,Promise.reject(ft.APINotSupportedForRDLError)];bt={playMode:rt},wt.label=1;case 1:return wt.trys.push([1,3,,4]),[4,this.service.hpm.post("/report/bookmarks/play",bt,{uid:this.config.uniqueId},this.iframe.contentWindow)];case 2:return[2,wt.sent()];case 3:throw ht=wt.sent(),ht.body;case 4:return[2]}})})},vt.prototype.capture=function(rt){return ct(this,void 0,void 0,function(){var bt,ht,wt;return ot(this,function(At){switch(At.label){case 0:if((0,gt.isRDLEmbed)(this.config.embedUrl))return[2,Promise.reject(ft.APINotSupportedForRDLError)];bt={options:rt||{}},At.label=1;case 1:return At.trys.push([1,3,,4]),[4,this.service.hpm.post("/report/bookmarks/capture",bt,{uid:this.config.uniqueId},this.iframe.contentWindow)];case 2:return ht=At.sent(),[2,ht.body];case 3:throw wt=At.sent(),wt.body;case 4:return[2]}})})},vt.prototype.applyState=function(rt){return ct(this,void 0,void 0,function(){var bt,ht;return ot(this,function(wt){switch(wt.label){case 0:if((0,gt.isRDLEmbed)(this.config.embedUrl))return[2,Promise.reject(ft.APINotSupportedForRDLError)];bt={state:rt},wt.label=1;case 1:return wt.trys.push([1,3,,4]),[4,this.service.hpm.post("/report/bookmarks/applyState",bt,{uid:this.config.uniqueId},this.iframe.contentWindow)];case 2:return[2,wt.sent()];case 3:throw ht=wt.sent(),ht.body;case 4:return[2]}})})},vt}();at.BookmarksManager=yt},"./src/config.ts":(et,at)=>{Object.defineProperty(at,"__esModule",{value:!0});var st={version:"2.23.1",type:"js"};at.default=st},"./src/create.ts":function(et,at,st){var ct=this&&this.__extends||function(){var bt=function(ht,wt){return bt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(At,Ct){At.__proto__=Ct}||function(At,Ct){for(var dt in Ct)Object.prototype.hasOwnProperty.call(Ct,dt)&&(At[dt]=Ct[dt])},bt(ht,wt)};return function(ht,wt){if(typeof wt!="function"&&wt!==null)throw new TypeError("Class extends value "+String(wt)+" is not a constructor or null");bt(ht,wt);function At(){this.constructor=ht}ht.prototype=wt===null?Object.create(wt):(At.prototype=wt.prototype,new At)}}(),ot=this&&this.__awaiter||function(bt,ht,wt,At){function Ct(dt){return dt instanceof wt?dt:new wt(function(Et){Et(dt)})}return new(wt||(wt=Promise))(function(dt,Et){function Rt(kt){try{_t(At.next(kt))}catch(nt){Et(nt)}}function Mt(kt){try{_t(At.throw(kt))}catch(nt){Et(nt)}}function _t(kt){kt.done?dt(kt.value):Ct(kt.value).then(Rt,Mt)}_t((At=At.apply(bt,ht||[])).next())})},gt=this&&this.__generator||function(bt,ht){var wt={label:0,sent:function(){if(dt[0]&1)throw dt[1];return dt[1]},trys:[],ops:[]},At,Ct,dt,Et;return Et={next:Rt(0),throw:Rt(1),return:Rt(2)},typeof Symbol=="function"&&(Et[Symbol.iterator]=function(){return this}),Et;function Rt(_t){return function(kt){return Mt([_t,kt])}}function Mt(_t){if(At)throw new TypeError("Generator is already executing.");for(;wt;)try{if(At=1,Ct&&(dt=_t[0]&2?Ct.return:_t[0]?Ct.throw||((dt=Ct.return)&&dt.call(Ct),0):Ct.next)&&!(dt=dt.call(Ct,_t[1])).done)return dt;switch(Ct=0,dt&&(_t=[_t[0]&2,dt.value]),_t[0]){case 0:case 1:dt=_t;break;case 4:return wt.label++,{value:_t[1],done:!1};case 5:wt.label++,Ct=_t[1],_t=[0];continue;case 7:_t=wt.ops.pop(),wt.trys.pop();continue;default:if(dt=wt.trys,!(dt=dt.length>0&&dt[dt.length-1])&&(_t[0]===6||_t[0]===2)){wt=0;continue}if(_t[0]===3&&(!dt||_t[1]>dt[0]&&_t[1]<dt[3])){wt.label=_t[1];break}if(_t[0]===6&&wt.label<dt[1]){wt.label=dt[1],dt=_t;break}if(dt&&wt.label<dt[2]){wt.label=dt[2],wt.ops.push(_t);break}dt[2]&&wt.ops.pop(),wt.trys.pop();continue}_t=ht.call(bt,wt)}catch(kt){_t=[6,kt],Ct=0}finally{At=dt=0}if(_t[0]&5)throw _t[1];return{value:_t[0]?_t[1]:void 0,done:!0}}};Object.defineProperty(at,"__esModule",{value:!0}),at.Create=void 0;var ft=st("./node_modules/powerbi-models/dist/models.js"),yt=st("./src/embed.ts"),vt=st("./src/util.ts"),rt=function(bt){ct(ht,bt);function ht(wt,At,Ct,dt,Et){return bt.call(this,wt,At,Ct,void 0,dt,Et)||this}return ht.prototype.getId=function(){var wt=this.createConfig&&this.createConfig.datasetId?this.createConfig.datasetId:ht.findIdFromEmbedUrl(this.config.embedUrl);if(typeof wt!="string"||wt.length===0)throw new Error("Dataset id is required, but it was not found. You must provide an id either as part of embed configuration.");return wt},ht.prototype.validate=function(wt){return(0,ft.validateCreateReport)(wt)},ht.prototype.configChanged=function(wt){if(!wt){var At=this.config;this.createConfig={accessToken:At.accessToken,datasetId:At.datasetId||this.getId(),groupId:At.groupId,settings:At.settings,tokenType:At.tokenType,theme:At.theme}}},ht.prototype.getDefaultEmbedUrlEndpoint=function(){return"reportEmbed"},ht.prototype.isSaved=function(){return ot(this,void 0,void 0,function(){return gt(this,function(wt){switch(wt.label){case 0:return[4,vt.isSavedInternal(this.service.hpm,this.config.uniqueId,this.iframe.contentWindow)];case 1:return[2,wt.sent()]}})})},ht.findIdFromEmbedUrl=function(wt){var At=/datasetId="?([^&]+)"?/,Ct=wt.match(At),dt;return Ct&&(dt=Ct[1]),dt},ht.prototype.create=function(){var wt;return ot(this,void 0,void 0,function(){var At,Ct,dt,Et;return gt(this,function(Rt){switch(Rt.label){case 0:if(At=(0,ft.validateCreateReport)(this.createConfig),At)throw At;Rt.label=1;case 1:return Rt.trys.push([1,3,,4]),Ct={uid:this.config.uniqueId,sdkSessionId:this.service.getSdkSessionId()},!((wt=this.eventHooks)===null||wt===void 0)&&wt.accessTokenProvider&&(Ct.tokenProviderSupplied=!0),[4,this.service.hpm.post("/report/create",this.createConfig,Ct,this.iframe.contentWindow)];case 2:return dt=Rt.sent(),[2,dt.body];case 3:throw Et=Rt.sent(),Et.body;case 4:return[2]}})})},ht}(yt.Embed);at.Create=rt},"./src/dashboard.ts":function(et,at,st){var ct=this&&this.__extends||function(){var yt=function(vt,rt){return yt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(bt,ht){bt.__proto__=ht}||function(bt,ht){for(var wt in ht)Object.prototype.hasOwnProperty.call(ht,wt)&&(bt[wt]=ht[wt])},yt(vt,rt)};return function(vt,rt){if(typeof rt!="function"&&rt!==null)throw new TypeError("Class extends value "+String(rt)+" is not a constructor or null");yt(vt,rt);function bt(){this.constructor=vt}vt.prototype=rt===null?Object.create(rt):(bt.prototype=rt.prototype,new bt)}}();Object.defineProperty(at,"__esModule",{value:!0}),at.Dashboard=void 0;var ot=st("./node_modules/powerbi-models/dist/models.js"),gt=st("./src/embed.ts"),ft=function(yt){ct(vt,yt);function vt(rt,bt,ht,wt,At){var Ct=yt.call(this,rt,bt,ht,void 0,wt,At)||this;return Ct.loadPath="/dashboard/load",Ct.phasedLoadPath="/dashboard/prepare",Array.prototype.push.apply(Ct.allowedEvents,vt.allowedEvents),Ct}return vt.findIdFromEmbedUrl=function(rt){var bt=/dashboardId="?([^&]+)"?/,ht=rt.match(bt),wt;return ht&&(wt=ht[1]),wt},vt.prototype.getId=function(){var rt=this.config,bt=rt.id||this.element.getAttribute(vt.dashboardIdAttribute)||vt.findIdFromEmbedUrl(rt.embedUrl);if(typeof bt!="string"||bt.length===0)throw new Error("Dashboard id is required, but it was not found. You must provide an id either as part of embed configuration or as attribute '".concat(vt.dashboardIdAttribute,"'."));return bt},vt.prototype.validate=function(rt){var bt=rt,ht=(0,ot.validateDashboardLoad)(bt);return ht||this.validatePageView(bt.pageView)},vt.prototype.configChanged=function(rt){rt||(this.config.id=this.getId())},vt.prototype.getDefaultEmbedUrlEndpoint=function(){return"dashboardEmbed"},vt.prototype.validatePageView=function(rt){if(rt&&rt!=="fitToWidth"&&rt!=="oneColumn"&&rt!=="actualSize")return[{message:"pageView must be one of the followings: fitToWidth, oneColumn, actualSize"}]},vt.allowedEvents=["tileClicked","error"],vt.dashboardIdAttribute="powerbi-dashboard-id",vt.typeAttribute="powerbi-type",vt.type="Dashboard",vt}(gt.Embed);at.Dashboard=ft},"./src/embed.ts":function(et,at,st){var ct=this&&this.__awaiter||function(bt,ht,wt,At){function Ct(dt){return dt instanceof wt?dt:new wt(function(Et){Et(dt)})}return new(wt||(wt=Promise))(function(dt,Et){function Rt(kt){try{_t(At.next(kt))}catch(nt){Et(nt)}}function Mt(kt){try{_t(At.throw(kt))}catch(nt){Et(nt)}}function _t(kt){kt.done?dt(kt.value):Ct(kt.value).then(Rt,Mt)}_t((At=At.apply(bt,ht||[])).next())})},ot=this&&this.__generator||function(bt,ht){var wt={label:0,sent:function(){if(dt[0]&1)throw dt[1];return dt[1]},trys:[],ops:[]},At,Ct,dt,Et;return Et={next:Rt(0),throw:Rt(1),return:Rt(2)},typeof Symbol=="function"&&(Et[Symbol.iterator]=function(){return this}),Et;function Rt(_t){return function(kt){return Mt([_t,kt])}}function Mt(_t){if(At)throw new TypeError("Generator is already executing.");for(;wt;)try{if(At=1,Ct&&(dt=_t[0]&2?Ct.return:_t[0]?Ct.throw||((dt=Ct.return)&&dt.call(Ct),0):Ct.next)&&!(dt=dt.call(Ct,_t[1])).done)return dt;switch(Ct=0,dt&&(_t=[_t[0]&2,dt.value]),_t[0]){case 0:case 1:dt=_t;break;case 4:return wt.label++,{value:_t[1],done:!1};case 5:wt.label++,Ct=_t[1],_t=[0];continue;case 7:_t=wt.ops.pop(),wt.trys.pop();continue;default:if(dt=wt.trys,!(dt=dt.length>0&&dt[dt.length-1])&&(_t[0]===6||_t[0]===2)){wt=0;continue}if(_t[0]===3&&(!dt||_t[1]>dt[0]&&_t[1]<dt[3])){wt.label=_t[1];break}if(_t[0]===6&&wt.label<dt[1]){wt.label=dt[1],dt=_t;break}if(dt&&wt.label<dt[2]){wt.label=dt[2],wt.ops.push(_t);break}dt[2]&&wt.ops.pop(),wt.trys.pop();continue}_t=ht.call(bt,wt)}catch(kt){_t=[6,kt],Ct=0}finally{At=dt=0}if(_t[0]&5)throw _t[1];return{value:_t[0]?_t[1]:void 0,done:!0}}};Object.defineProperty(at,"__esModule",{value:!0}),at.Embed=void 0;var gt=st("./node_modules/powerbi-models/dist/models.js"),ft=st("./src/config.ts"),yt=st("./src/errors.ts"),vt=st("./src/util.ts"),rt=function(){function bt(ht,wt,At,Ct,dt,Et){if(this.allowedEvents=[],(0,vt.autoAuthInEmbedUrl)(At.embedUrl))throw new Error(yt.EmbedUrlNotSupported);Array.prototype.push.apply(this.allowedEvents,bt.allowedEvents),this.eventHandlers=[],this.service=ht,this.element=wt,this.iframe=Ct,this.iframeLoaded=!1,this.embedtype=At.type.toLowerCase(),this.commands=[],this.groups=[],this.populateConfig(At,Et),(0,vt.isCreate)(this.embedtype)?this.setIframe(!1,dt,Et):this.setIframe(!0,dt,Et)}return bt.prototype.create=function(){throw new Error("no create support")},bt.prototype.save=function(){return ct(this,void 0,void 0,function(){var ht,wt;return ot(this,function(At){switch(At.label){case 0:return At.trys.push([0,2,,3]),[4,this.service.hpm.post("/report/save",null,{uid:this.config.uniqueId},this.iframe.contentWindow)];case 1:return ht=At.sent(),[2,ht.body];case 2:throw wt=At.sent(),wt.body;case 3:return[2]}})})},bt.prototype.saveAs=function(ht){return ct(this,void 0,void 0,function(){var wt,At;return ot(this,function(Ct){switch(Ct.label){case 0:return Ct.trys.push([0,2,,3]),[4,this.service.hpm.post("/report/saveAs",ht,{uid:this.config.uniqueId},this.iframe.contentWindow)];case 1:return wt=Ct.sent(),[2,wt.body];case 2:throw At=Ct.sent(),At.body;case 3:return[2]}})})},bt.prototype.getCorrelationId=function(){return ct(this,void 0,void 0,function(){var ht,wt;return ot(this,function(At){switch(At.label){case 0:return At.trys.push([0,2,,3]),[4,this.service.hpm.get("/getCorrelationId",{uid:this.config.uniqueId},this.iframe.contentWindow)];case 1:return ht=At.sent(),[2,ht.body];case 2:throw wt=At.sent(),wt.body;case 3:return[2]}})})},bt.prototype.load=function(ht){var wt;return ct(this,void 0,void 0,function(){var At,Ct,dt,Et,Rt;return ot(this,function(Mt){switch(Mt.label){case 0:if(!this.config.accessToken)return console.debug("Power BI SDK iframe is loaded but powerbi.embed is not called yet."),[2];if(!this.iframeLoaded)return console.debug("Power BI SDK is trying to post /report/load before iframe is ready."),[2];if(At=ht&&this.config.type==="report"?this.phasedLoadPath:this.loadPath,Ct={uid:this.config.uniqueId,sdkSessionId:this.service.getSdkSessionId(),bootstrapped:this.config.bootstrapped,sdkVersion:ft.default.version},!((wt=this.eventHooks)===null||wt===void 0)&&wt.accessTokenProvider&&(Ct.tokenProviderSupplied=!0),dt=new Date,this.lastLoadRequest&&(0,vt.getTimeDiffInMilliseconds)(this.lastLoadRequest,dt)<100)return console.debug("Power BI SDK sent more than two /report/load requests in the last 100ms interval."),[2];this.lastLoadRequest=dt,Mt.label=1;case 1:return Mt.trys.push([1,3,,4]),[4,this.service.hpm.post(At,this.config,Ct,this.iframe.contentWindow)];case 2:return Et=Mt.sent(),[2,Et.body];case 3:throw Rt=Mt.sent(),Rt.body;case 4:return[2]}})})},bt.prototype.off=function(ht,wt){var At=this,Ct={name:ht,type:null,id:null,value:null};if(wt)(0,vt.remove)(function(Et){return Et.test(Ct)&&Et.handle===wt},this.eventHandlers),this.element.removeEventListener(ht,wt);else{var dt=this.eventHandlers.filter(function(Et){return Et.test(Ct)});dt.forEach(function(Et){(0,vt.remove)(function(Rt){return Rt===Et},At.eventHandlers),At.element.removeEventListener(ht,Et.handle)})}},bt.prototype.on=function(ht,wt){if(this.allowedEvents.indexOf(ht)===-1)throw new Error("eventName must be one of ".concat(this.allowedEvents,". You passed: ").concat(ht));this.eventHandlers.push({test:function(At){return At.name===ht},handle:wt}),this.element.addEventListener(ht,wt)},bt.prototype.reload=function(){return ct(this,void 0,void 0,function(){return ot(this,function(ht){switch(ht.label){case 0:return[4,this.load()];case 1:return[2,ht.sent()]}})})},bt.prototype.setAccessToken=function(ht){return ct(this,void 0,void 0,function(){var wt,At,Ct;return ot(this,function(dt){switch(dt.label){case 0:if(!ht)throw new Error("Access token cannot be empty");wt=this.config.type,wt=wt==="create"||wt==="visual"||wt==="qna"||wt==="quickCreate"?"report":wt,dt.label=1;case 1:return dt.trys.push([1,3,,4]),[4,this.service.hpm.post("/"+wt+"/token",ht,{uid:this.config.uniqueId},this.iframe.contentWindow)];case 2:return At=dt.sent(),this.config.accessToken=ht,this.element.setAttribute(bt.accessTokenAttribute,ht),this.service.accessToken=ht,[2,At.body];case 3:throw Ct=dt.sent(),Ct.body;case 4:return[2]}})})},bt.prototype.getAccessToken=function(ht){var wt=this.config.accessToken||this.element.getAttribute(bt.accessTokenAttribute)||ht;if(!wt)throw new Error("No access token was found for element. You must specify an access token directly on the element using attribute '".concat(bt.accessTokenAttribute,"' or specify a global token at: powerbi.accessToken."));return wt},bt.prototype.populateConfig=function(ht,wt){var At=this,Ct,dt,Et,Rt,Mt,_t,kt,nt,s;this.bootstrapConfig?(this.config=(0,vt.assign)({},this.bootstrapConfig,ht),this.bootstrapConfig=null):this.config=(0,vt.assign)({},ht),this.config.embedUrl=this.getEmbedUrl(wt),this.config.groupId=this.getGroupId(),this.addLocaleToEmbedUrl(ht),this.config.uniqueId=this.getUniqueId();var b=(dt=(Ct=this.config)===null||Ct===void 0?void 0:Ct.settings)===null||dt===void 0?void 0:dt.extensions;this.commands=(Et=b==null?void 0:b.commands)!==null&&Et!==void 0?Et:[],this.groups=(Rt=b==null?void 0:b.groups)!==null&&Rt!==void 0?Rt:[],this.initialLayoutType=(kt=(_t=(Mt=this.config)===null||Mt===void 0?void 0:Mt.settings)===null||_t===void 0?void 0:_t.layoutType)!==null&&kt!==void 0?kt:gt.LayoutType.Master;var $=(s=(nt=this.config)===null||nt===void 0?void 0:nt.settings)===null||s===void 0?void 0:s.extensions;Array.isArray($)&&(this.commands=[],$.map(function(_e){_e!=null&&_e.command&&At.commands.push(_e.command)})),wt?(this.bootstrapConfig=this.config,this.bootstrapConfig.bootstrapped=!0):this.config.accessToken=this.getAccessToken(this.service.accessToken),this.eventHooks=this.config.eventHooks,this.validateEventHooks(this.eventHooks),delete this.config.eventHooks,this.configChanged(wt)},bt.prototype.validateEventHooks=function(ht){if(ht){for(var wt in ht)if(ht.hasOwnProperty(wt)&&typeof ht[wt]!="function")throw new Error(wt+" must be a function");var At=ht.applicationContextProvider;if(At){if(this.embedtype.toLowerCase()!=="report")throw new Error("applicationContextProvider is only supported in report embed");this.config.embedUrl=(0,vt.addParamToUrl)(this.config.embedUrl,"registerQueryCallback","true")}var Ct=ht.accessTokenProvider;if(Ct&&(["create","quickcreate","report"].indexOf(this.embedtype.toLowerCase())===-1||this.config.tokenType!==gt.TokenType.Aad))throw new Error("accessTokenProvider is only supported in report SaaS embed")}},bt.prototype.addLocaleToEmbedUrl=function(ht){if(ht.settings){var wt=ht.settings.localeSettings;wt&&wt.language&&(this.config.embedUrl=(0,vt.addParamToUrl)(this.config.embedUrl,"language",wt.language)),wt&&wt.formatLocale&&(this.config.embedUrl=(0,vt.addParamToUrl)(this.config.embedUrl,"formatLocale",wt.formatLocale))}},bt.prototype.getEmbedUrl=function(ht){var wt=this.config.embedUrl||this.element.getAttribute(bt.embedUrlAttribute);if(ht&&!wt&&(wt=this.getDefaultEmbedUrl(this.config.hostname)),typeof wt!="string"||wt.length===0)throw new Error("Embed Url is required, but it was not found. You must provide an embed url either as part of embed configuration or as attribute '".concat(bt.embedUrlAttribute,"'."));return wt},bt.prototype.getDefaultEmbedUrl=function(ht){ht||(ht=bt.defaultEmbedHostName);var wt=this.getDefaultEmbedUrlEndpoint();return ht=ht.toLowerCase().trim(),ht.indexOf("https://")===0?"".concat(ht,"/").concat(wt):"https://".concat(ht,"/").concat(wt)},bt.prototype.getUniqueId=function(){return this.config.uniqueId||this.element.getAttribute(bt.nameAttribute)||(0,vt.createRandomString)()},bt.prototype.getGroupId=function(){return this.config.groupId||bt.findGroupIdFromEmbedUrl(this.config.embedUrl)},bt.prototype.fullscreen=function(){var ht=this.iframe.requestFullscreen||this.iframe.msRequestFullscreen||this.iframe.mozRequestFullScreen||this.iframe.webkitRequestFullscreen;ht.call(this.iframe)},bt.prototype.exitFullscreen=function(){if(this.isFullscreen(this.iframe)){var ht=document.exitFullscreen||document.mozCancelFullScreen||document.webkitExitFullscreen||document.msExitFullscreen;ht.call(document)}},bt.prototype.isFullscreen=function(ht){var wt=["fullscreenElement","webkitFullscreenElement","mozFullscreenScreenElement","msFullscreenElement"];return wt.some(function(At){return document[At]===ht})},bt.prototype.setIframe=function(ht,wt,At){var Ct=this;if(!this.iframe){var dt=document.createElement("iframe"),Et=this.config.uniqueId?(0,vt.addParamToUrl)(this.config.embedUrl,"uid",this.config.uniqueId):this.config.embedUrl;if(!(0,vt.validateEmbedUrl)(Et))throw new Error(yt.invalidEmbedUrlErrorMessage);dt.style.width="100%",dt.style.height="100%",dt.setAttribute("src",Et),dt.setAttribute("scrolling","no"),dt.setAttribute("allowfullscreen","true");for(var Rt=this.element;Rt.firstChild;)Rt.removeChild(Rt.firstChild);Rt.appendChild(dt),this.iframe=Rt.firstChild}if(ht){if(!At){var Mt=this.validate(this.config);if(Mt)throw Mt}this.iframe.addEventListener("load",function(){Ct.iframeLoaded=!0,Ct.load(wt)},!1),this.service.getNumberOfComponents()<=bt.maxFrontLoadTimes&&(this.frontLoadHandler=function(){Ct.frontLoadSendConfig(Ct.config)},this.element.addEventListener("ready",this.frontLoadHandler,!1))}else this.iframe.addEventListener("load",function(){return Ct.create()},!1)},bt.prototype.setComponentTitle=function(ht){this.iframe&&(ht==null?this.iframe.removeAttribute("title"):this.iframe.setAttribute("title",ht))},bt.prototype.setComponentTabIndex=function(ht){this.element&&this.element.setAttribute("tabindex",ht==null?"0":ht.toString())},bt.prototype.removeComponentTabIndex=function(ht){this.element&&this.element.removeAttribute("tabindex")},bt.findGroupIdFromEmbedUrl=function(ht){var wt=/groupId="?([^&]+)"?/,At=ht.match(wt),Ct;return At&&(Ct=At[1]),Ct},bt.prototype.frontLoadSendConfig=function(ht){return ct(this,void 0,void 0,function(){var wt,At,Ct;return ot(this,function(dt){switch(dt.label){case 0:if(!ht.accessToken)return[2];if(wt=this.validate(ht),wt)throw wt;if(this.iframe.contentWindow==null)return[2];dt.label=1;case 1:return dt.trys.push([1,3,,4]),[4,this.service.hpm.post("/frontload/config",ht,{uid:this.config.uniqueId},this.iframe.contentWindow)];case 2:return At=dt.sent(),[2,At.body];case 3:throw Ct=dt.sent(),Ct.body;case 4:return[2]}})})},bt.allowedEvents=["loaded","saved","rendered","saveAsTriggered","error","dataSelected","buttonClicked","info"],bt.accessTokenAttribute="powerbi-access-token",bt.embedUrlAttribute="powerbi-embed-url",bt.nameAttribute="powerbi-name",bt.typeAttribute="powerbi-type",bt.defaultEmbedHostName="https://app.powerbi.com",bt.maxFrontLoadTimes=2,bt}();at.Embed=rt},"./src/errors.ts":(et,at)=>{Object.defineProperty(at,"__esModule",{value:!0}),at.invalidEmbedUrlErrorMessage=at.EmbedUrlNotSupported=at.APINotSupportedForRDLError=void 0,at.APINotSupportedForRDLError="This API is currently not supported for RDL reports",at.EmbedUrlNotSupported="Embed URL is invalid for this scenario. Please use Power BI REST APIs to get the valid URL",at.invalidEmbedUrlErrorMessage="Invalid embed URL detected. Either URL hostname or protocol are invalid. Please use Power BI REST APIs to get the valid URL"},"./src/factories.ts":(et,at,st)=>{Object.defineProperty(at,"__esModule",{value:!0}),at.routerFactory=at.wpmpFactory=at.hpmFactory=void 0;var ct=st("./node_modules/window-post-message-proxy/dist/windowPostMessageProxy.js"),ot=st("./node_modules/http-post-message/dist/httpPostMessage.js"),gt=st("./node_modules/powerbi-router/dist/router.js"),ft=st("./src/config.ts"),yt=function(bt,ht,wt,At,Ct){return wt===void 0&&(wt=ft.default.version),At===void 0&&(At=ft.default.type),new ot.HttpPostMessage(bt,{"x-sdk-type":At,"x-sdk-version":wt,"x-sdk-wrapper-version":Ct},ht)};at.hpmFactory=yt;var vt=function(bt,ht,wt){return new ct.WindowPostMessageProxy({processTrackingProperties:{addTrackingProperties:ot.HttpPostMessage.addTrackingProperties,getTrackingProperties:ot.HttpPostMessage.getTrackingProperties},isErrorMessage:ot.HttpPostMessage.isErrorMessage,suppressWarnings:!0,name:bt,logMessages:ht,eventSourceOverrideWindow:wt})};at.wpmpFactory=vt;var rt=function(bt){return new gt.Router(bt)};at.routerFactory=rt},"./src/page.ts":function(et,at,st){var ct=this&&this.__awaiter||function(bt,ht,wt,At){function Ct(dt){return dt instanceof wt?dt:new wt(function(Et){Et(dt)})}return new(wt||(wt=Promise))(function(dt,Et){function Rt(kt){try{_t(At.next(kt))}catch(nt){Et(nt)}}function Mt(kt){try{_t(At.throw(kt))}catch(nt){Et(nt)}}function _t(kt){kt.done?dt(kt.value):Ct(kt.value).then(Rt,Mt)}_t((At=At.apply(bt,ht||[])).next())})},ot=this&&this.__generator||function(bt,ht){var wt={label:0,sent:function(){if(dt[0]&1)throw dt[1];return dt[1]},trys:[],ops:[]},At,Ct,dt,Et;return Et={next:Rt(0),throw:Rt(1),return:Rt(2)},typeof Symbol=="function"&&(Et[Symbol.iterator]=function(){return this}),Et;function Rt(_t){return function(kt){return Mt([_t,kt])}}function Mt(_t){if(At)throw new TypeError("Generator is already executing.");for(;wt;)try{if(At=1,Ct&&(dt=_t[0]&2?Ct.return:_t[0]?Ct.throw||((dt=Ct.return)&&dt.call(Ct),0):Ct.next)&&!(dt=dt.call(Ct,_t[1])).done)return dt;switch(Ct=0,dt&&(_t=[_t[0]&2,dt.value]),_t[0]){case 0:case 1:dt=_t;break;case 4:return wt.label++,{value:_t[1],done:!1};case 5:wt.label++,Ct=_t[1],_t=[0];continue;case 7:_t=wt.ops.pop(),wt.trys.pop();continue;default:if(dt=wt.trys,!(dt=dt.length>0&&dt[dt.length-1])&&(_t[0]===6||_t[0]===2)){wt=0;continue}if(_t[0]===3&&(!dt||_t[1]>dt[0]&&_t[1]<dt[3])){wt.label=_t[1];break}if(_t[0]===6&&wt.label<dt[1]){wt.label=dt[1],dt=_t;break}if(dt&&wt.label<dt[2]){wt.label=dt[2],wt.ops.push(_t);break}dt[2]&&wt.ops.pop(),wt.trys.pop();continue}_t=ht.call(bt,wt)}catch(kt){_t=[6,kt],Ct=0}finally{At=dt=0}if(_t[0]&5)throw _t[1];return{value:_t[0]?_t[1]:void 0,done:!0}}};Object.defineProperty(at,"__esModule",{value:!0}),at.Page=void 0;var gt=st("./node_modules/powerbi-models/dist/models.js"),ft=st("./src/visualDescriptor.ts"),yt=st("./src/util.ts"),vt=st("./src/errors.ts"),rt=function(){function bt(ht,wt,At,Ct,dt,Et,Rt,Mt,_t,kt){this.report=ht,this.name=wt,this.displayName=At,this.isActive=Ct,this.visibility=dt,this.defaultSize=Et,this.mobileSize=Mt,this.defaultDisplayOption=Rt,this.background=_t,this.wallpaper=kt}return bt.prototype.getSmartNarrativeInsights=function(){return ct(this,void 0,void 0,function(){var ht,wt;return ot(this,function(At){switch(At.label){case 0:if((0,yt.isRDLEmbed)(this.report.config.embedUrl))return[2,Promise.reject(vt.APINotSupportedForRDLError)];At.label=1;case 1:return At.trys.push([1,3,,4]),[4,this.report.service.hpm.get("/report/pages/".concat(this.name,"/smartNarrativeInsights"),{uid:this.report.config.uniqueId},this.report.iframe.contentWindow)];case 2:return ht=At.sent(),[2,ht.body];case 3:throw wt=At.sent(),wt.body;case 4:return[2]}})})},bt.prototype.getFilters=function(){return ct(this,void 0,void 0,function(){var ht,wt;return ot(this,function(At){switch(At.label){case 0:return At.trys.push([0,2,,3]),[4,this.report.service.hpm.get("/report/pages/".concat(this.name,"/filters"),{uid:this.report.config.uniqueId},this.report.iframe.contentWindow)];case 1:return ht=At.sent(),[2,ht.body];case 2:throw wt=At.sent(),wt.body;case 3:return[2]}})})},bt.prototype.updateFilters=function(ht,wt){return ct(this,void 0,void 0,function(){var At,Ct;return ot(this,function(dt){switch(dt.label){case 0:At={filtersOperation:ht,filters:wt},dt.label=1;case 1:return dt.trys.push([1,3,,4]),[4,this.report.service.hpm.post("/report/pages/".concat(this.name,"/filters"),At,{uid:this.report.config.uniqueId},this.report.iframe.contentWindow)];case 2:return[2,dt.sent()];case 3:throw Ct=dt.sent(),Ct.body;case 4:return[2]}})})},bt.prototype.removeFilters=function(){return ct(this,void 0,void 0,function(){return ot(this,function(ht){switch(ht.label){case 0:return[4,this.updateFilters(gt.FiltersOperations.RemoveAll)];case 1:return[2,ht.sent()]}})})},bt.prototype.setFilters=function(ht){return ct(this,void 0,void 0,function(){var wt;return ot(this,function(At){switch(At.label){case 0:return At.trys.push([0,2,,3]),[4,this.report.service.hpm.put("/report/pages/".concat(this.name,"/filters"),ht,{uid:this.report.config.uniqueId},this.report.iframe.contentWindow)];case 1:return[2,At.sent()];case 2:throw wt=At.sent(),wt.body;case 3:return[2]}})})},bt.prototype.delete=function(){return ct(this,void 0,void 0,function(){var ht,wt;return ot(this,function(At){switch(At.label){case 0:return At.trys.push([0,2,,3]),[4,this.report.service.hpm.delete("/report/pages/".concat(this.name),{},{uid:this.report.config.uniqueId},this.report.iframe.contentWindow)];case 1:return ht=At.sent(),[2,ht.body];case 2:throw wt=At.sent(),wt.body;case 3:return[2]}})})},bt.prototype.setActive=function(){return ct(this,void 0,void 0,function(){var ht,wt;return ot(this,function(At){switch(At.label){case 0:ht={name:this.name,displayName:null,isActive:!0},At.label=1;case 1:return At.trys.push([1,3,,4]),[4,this.report.service.hpm.put("/report/pages/active",ht,{uid:this.report.config.uniqueId},this.report.iframe.contentWindow)];case 2:return[2,At.sent()];case 3:throw wt=At.sent(),wt.body;case 4:return[2]}})})},bt.prototype.setDisplayName=function(ht){return ct(this,void 0,void 0,function(){var wt,At;return ot(this,function(Ct){switch(Ct.label){case 0:wt={name:this.name,displayName:ht},Ct.label=1;case 1:return Ct.trys.push([1,3,,4]),[4,this.report.service.hpm.put("/report/pages/".concat(this.name,"/name"),wt,{uid:this.report.config.uniqueId},this.report.iframe.contentWindow)];case 2:return[2,Ct.sent()];case 3:throw At=Ct.sent(),At.body;case 4:return[2]}})})},bt.prototype.getVisuals=function(){return ct(this,void 0,void 0,function(){var ht,wt,At=this;return ot(this,function(Ct){switch(Ct.label){case 0:if((0,yt.isRDLEmbed)(this.report.config.embedUrl))return[2,Promise.reject(vt.APINotSupportedForRDLError)];Ct.label=1;case 1:return Ct.trys.push([1,3,,4]),[4,this.report.service.hpm.get("/report/pages/".concat(this.name,"/visuals"),{uid:this.report.config.uniqueId},this.report.iframe.contentWindow)];case 2:return ht=Ct.sent(),[2,ht.body.map(function(dt){return new ft.VisualDescriptor(At,dt.name,dt.title,dt.type,dt.layout)})];case 3:throw wt=Ct.sent(),wt.body;case 4:return[2]}})})},bt.prototype.getVisualByName=function(ht){return ct(this,void 0,void 0,function(){var wt,At,Ct;return ot(this,function(dt){switch(dt.label){case 0:if((0,yt.isRDLEmbed)(this.report.config.embedUrl))return[2,Promise.reject(vt.APINotSupportedForRDLError)];dt.label=1;case 1:return dt.trys.push([1,3,,4]),[4,this.report.service.hpm.get("/report/pages/".concat(this.name,"/visuals"),{uid:this.report.config.uniqueId},this.report.iframe.contentWindow)];case 2:return wt=dt.sent(),At=wt.body.find(function(Et){return Et.name===ht}),At?[2,new ft.VisualDescriptor(this,At.name,At.title,At.type,At.layout)]:[2,Promise.reject(gt.CommonErrorCodes.NotFound)];case 3:throw Ct=dt.sent(),Ct.body;case 4:return[2]}})})},bt.prototype.setVisualDisplayState=function(ht,wt){return ct(this,void 0,void 0,function(){var At,Ct;return ot(this,function(dt){return At=this.name,Ct=this.report,[2,Ct.setVisualDisplayState(At,ht,wt)]})})},bt.prototype.moveVisual=function(ht,wt,At,Ct){return ct(this,void 0,void 0,function(){var dt,Et;return ot(this,function(Rt){return dt=this.name,Et=this.report,[2,Et.moveVisual(dt,ht,wt,At,Ct)]})})},bt.prototype.resizeVisual=function(ht,wt,At){return ct(this,void 0,void 0,function(){var Ct,dt;return ot(this,function(Et){return Ct=this.name,dt=this.report,[2,dt.resizeVisual(Ct,ht,wt,At)]})})},bt.prototype.resizePage=function(ht,wt,At){return ct(this,void 0,void 0,function(){var Ct;return ot(this,function(dt){return this.isActive?(Ct=this.report,[2,Ct.resizeActivePage(ht,wt,At)]):[2,Promise.reject("Cannot resize the page. Only the active page can be resized")]})})},bt.prototype.getSlicers=function(){return ct(this,void 0,void 0,function(){var ht,wt,At=this;return ot(this,function(Ct){switch(Ct.label){case 0:if((0,yt.isRDLEmbed)(this.report.config.embedUrl))return[2,Promise.reject(vt.APINotSupportedForRDLError)];Ct.label=1;case 1:return Ct.trys.push([1,3,,4]),[4,this.report.service.hpm.get("/report/pages/".concat(this.name,"/visuals"),{uid:this.report.config.uniqueId},this.report.iframe.contentWindow)];case 2:return ht=Ct.sent(),[2,ht.body.filter(function(dt){return dt.type==="slicer"}).map(function(dt){return new ft.VisualDescriptor(At,dt.name,dt.title,dt.type,dt.layout)})];case 3:throw wt=Ct.sent(),wt.body;case 4:return[2]}})})},bt.prototype.hasLayout=function(ht){return ct(this,void 0,void 0,function(){var wt,At,Ct;return ot(this,function(dt){switch(dt.label){case 0:if((0,yt.isRDLEmbed)(this.report.config.embedUrl))return[2,Promise.reject(vt.APINotSupportedForRDLError)];wt=gt.LayoutType[ht],dt.label=1;case 1:return dt.trys.push([1,3,,4]),[4,this.report.service.hpm.get("/report/pages/".concat(this.name,"/layoutTypes/").concat(wt),{uid:this.report.config.uniqueId},this.report.iframe.contentWindow)];case 2:return At=dt.sent(),[2,At.body];case 3:throw Ct=dt.sent(),Ct.body;case 4:return[2]}})})},bt}();at.Page=rt},"./src/qna.ts":function(et,at,st){var ct=this&&this.__extends||function(){var rt=function(bt,ht){return rt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(wt,At){wt.__proto__=At}||function(wt,At){for(var Ct in At)Object.prototype.hasOwnProperty.call(At,Ct)&&(wt[Ct]=At[Ct])},rt(bt,ht)};return function(bt,ht){if(typeof ht!="function"&&ht!==null)throw new TypeError("Class extends value "+String(ht)+" is not a constructor or null");rt(bt,ht);function wt(){this.constructor=bt}bt.prototype=ht===null?Object.create(ht):(wt.prototype=ht.prototype,new wt)}}(),ot=this&&this.__awaiter||function(rt,bt,ht,wt){function At(Ct){return Ct instanceof ht?Ct:new ht(function(dt){dt(Ct)})}return new(ht||(ht=Promise))(function(Ct,dt){function Et(_t){try{Mt(wt.next(_t))}catch(kt){dt(kt)}}function Rt(_t){try{Mt(wt.throw(_t))}catch(kt){dt(kt)}}function Mt(_t){_t.done?Ct(_t.value):At(_t.value).then(Et,Rt)}Mt((wt=wt.apply(rt,bt||[])).next())})},gt=this&&this.__generator||function(rt,bt){var ht={label:0,sent:function(){if(Ct[0]&1)throw Ct[1];return Ct[1]},trys:[],ops:[]},wt,At,Ct,dt;return dt={next:Et(0),throw:Et(1),return:Et(2)},typeof Symbol=="function"&&(dt[Symbol.iterator]=function(){return this}),dt;function Et(Mt){return function(_t){return Rt([Mt,_t])}}function Rt(Mt){if(wt)throw new TypeError("Generator is already executing.");for(;ht;)try{if(wt=1,At&&(Ct=Mt[0]&2?At.return:Mt[0]?At.throw||((Ct=At.return)&&Ct.call(At),0):At.next)&&!(Ct=Ct.call(At,Mt[1])).done)return Ct;switch(At=0,Ct&&(Mt=[Mt[0]&2,Ct.value]),Mt[0]){case 0:case 1:Ct=Mt;break;case 4:return ht.label++,{value:Mt[1],done:!1};case 5:ht.label++,At=Mt[1],Mt=[0];continue;case 7:Mt=ht.ops.pop(),ht.trys.pop();continue;default:if(Ct=ht.trys,!(Ct=Ct.length>0&&Ct[Ct.length-1])&&(Mt[0]===6||Mt[0]===2)){ht=0;continue}if(Mt[0]===3&&(!Ct||Mt[1]>Ct[0]&&Mt[1]<Ct[3])){ht.label=Mt[1];break}if(Mt[0]===6&&ht.label<Ct[1]){ht.label=Ct[1],Ct=Mt;break}if(Ct&&ht.label<Ct[2]){ht.label=Ct[2],ht.ops.push(Mt);break}Ct[2]&&ht.ops.pop(),ht.trys.pop();continue}Mt=bt.call(rt,ht)}catch(_t){Mt=[6,_t],At=0}finally{wt=Ct=0}if(Mt[0]&5)throw Mt[1];return{value:Mt[0]?Mt[1]:void 0,done:!0}}};Object.defineProperty(at,"__esModule",{value:!0}),at.Qna=void 0;var ft=st("./node_modules/powerbi-models/dist/models.js"),yt=st("./src/embed.ts"),vt=function(rt){ct(bt,rt);function bt(ht,wt,At,Ct,dt){var Et=rt.call(this,ht,wt,At,void 0,Ct,dt)||this;return Et.loadPath="/qna/load",Et.phasedLoadPath="/qna/prepare",Array.prototype.push.apply(Et.allowedEvents,bt.allowedEvents),Et}return bt.prototype.getId=function(){return null},bt.prototype.setQuestion=function(ht){return ot(this,void 0,void 0,function(){var wt,At;return gt(this,function(Ct){switch(Ct.label){case 0:wt={question:ht},Ct.label=1;case 1:return Ct.trys.push([1,3,,4]),[4,this.service.hpm.post("/qna/interpret",wt,{uid:this.config.uniqueId},this.iframe.contentWindow)];case 2:return[2,Ct.sent()];case 3:throw At=Ct.sent(),At.body;case 4:return[2]}})})},bt.prototype.configChanged=function(ht){},bt.prototype.getDefaultEmbedUrlEndpoint=function(){return"qnaEmbed"},bt.prototype.validate=function(ht){return(0,ft.validateLoadQnaConfiguration)(ht)},bt.type="Qna",bt.allowedEvents=["loaded","visualRendered"],bt}(yt.Embed);at.Qna=vt},"./src/quickCreate.ts":function(et,at,st){var ct=this&&this.__extends||function(){var rt=function(bt,ht){return rt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(wt,At){wt.__proto__=At}||function(wt,At){for(var Ct in At)Object.prototype.hasOwnProperty.call(At,Ct)&&(wt[Ct]=At[Ct])},rt(bt,ht)};return function(bt,ht){if(typeof ht!="function"&&ht!==null)throw new TypeError("Class extends value "+String(ht)+" is not a constructor or null");rt(bt,ht);function wt(){this.constructor=bt}bt.prototype=ht===null?Object.create(ht):(wt.prototype=ht.prototype,new wt)}}(),ot=this&&this.__awaiter||function(rt,bt,ht,wt){function At(Ct){return Ct instanceof ht?Ct:new ht(function(dt){dt(Ct)})}return new(ht||(ht=Promise))(function(Ct,dt){function Et(_t){try{Mt(wt.next(_t))}catch(kt){dt(kt)}}function Rt(_t){try{Mt(wt.throw(_t))}catch(kt){dt(kt)}}function Mt(_t){_t.done?Ct(_t.value):At(_t.value).then(Et,Rt)}Mt((wt=wt.apply(rt,bt||[])).next())})},gt=this&&this.__generator||function(rt,bt){var ht={label:0,sent:function(){if(Ct[0]&1)throw Ct[1];return Ct[1]},trys:[],ops:[]},wt,At,Ct,dt;return dt={next:Et(0),throw:Et(1),return:Et(2)},typeof Symbol=="function"&&(dt[Symbol.iterator]=function(){return this}),dt;function Et(Mt){return function(_t){return Rt([Mt,_t])}}function Rt(Mt){if(wt)throw new TypeError("Generator is already executing.");for(;ht;)try{if(wt=1,At&&(Ct=Mt[0]&2?At.return:Mt[0]?At.throw||((Ct=At.return)&&Ct.call(At),0):At.next)&&!(Ct=Ct.call(At,Mt[1])).done)return Ct;switch(At=0,Ct&&(Mt=[Mt[0]&2,Ct.value]),Mt[0]){case 0:case 1:Ct=Mt;break;case 4:return ht.label++,{value:Mt[1],done:!1};case 5:ht.label++,At=Mt[1],Mt=[0];continue;case 7:Mt=ht.ops.pop(),ht.trys.pop();continue;default:if(Ct=ht.trys,!(Ct=Ct.length>0&&Ct[Ct.length-1])&&(Mt[0]===6||Mt[0]===2)){ht=0;continue}if(Mt[0]===3&&(!Ct||Mt[1]>Ct[0]&&Mt[1]<Ct[3])){ht.label=Mt[1];break}if(Mt[0]===6&&ht.label<Ct[1]){ht.label=Ct[1],Ct=Mt;break}if(Ct&&ht.label<Ct[2]){ht.label=Ct[2],ht.ops.push(Mt);break}Ct[2]&&ht.ops.pop(),ht.trys.pop();continue}Mt=bt.call(rt,ht)}catch(_t){Mt=[6,_t],At=0}finally{wt=Ct=0}if(Mt[0]&5)throw Mt[1];return{value:Mt[0]?Mt[1]:void 0,done:!0}}};Object.defineProperty(at,"__esModule",{value:!0}),at.QuickCreate=void 0;var ft=st("./node_modules/powerbi-models/dist/models.js"),yt=st("./src/embed.ts"),vt=function(rt){ct(bt,rt);function bt(ht,wt,At,Ct,dt){var Et=rt.call(this,ht,wt,At,void 0,Ct,dt)||this;return ht.router.post("/reports/".concat(Et.config.uniqueId,"/eventHooks/:eventName"),function(Rt,Mt){return ot(Et,void 0,void 0,function(){var _t,kt;return gt(this,function(nt){switch(nt.label){case 0:switch(_t=Rt.params.eventName,_t){case"newAccessToken":return[3,1]}return[3,3];case 1:return Rt.body=Rt.body||{},Rt.body.report=this,[4,ht.invokeSDKHook((kt=this.eventHooks)===null||kt===void 0?void 0:kt.accessTokenProvider,Rt,Mt)];case 2:return nt.sent(),[3,4];case 3:return[3,4];case 4:return[2]}})})}),Et}return bt.prototype.getId=function(){return null},bt.prototype.validate=function(ht){return(0,ft.validateQuickCreate)(ht)},bt.prototype.configChanged=function(ht){ht||(this.createConfig=this.config)},bt.prototype.getDefaultEmbedUrlEndpoint=function(){return"quickCreate"},bt.prototype.create=function(){var ht;return ot(this,void 0,void 0,function(){var wt,At,Ct,dt;return gt(this,function(Et){switch(Et.label){case 0:if(wt=(0,ft.validateQuickCreate)(this.createConfig),wt)throw wt;Et.label=1;case 1:return Et.trys.push([1,3,,4]),At={uid:this.config.uniqueId,sdkSessionId:this.service.getSdkSessionId()},!((ht=this.eventHooks)===null||ht===void 0)&&ht.accessTokenProvider&&(At.tokenProviderSupplied=!0),[4,this.service.hpm.post("/quickcreate",this.createConfig,At,this.iframe.contentWindow)];case 2:return Ct=Et.sent(),[2,Ct.body];case 3:throw dt=Et.sent(),dt.body;case 4:return[2]}})})},bt}(yt.Embed);at.QuickCreate=vt},"./src/report.ts":function(et,at,st){var ct=this&&this.__extends||function(){var Ct=function(dt,Et){return Ct=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Rt,Mt){Rt.__proto__=Mt}||function(Rt,Mt){for(var _t in Mt)Object.prototype.hasOwnProperty.call(Mt,_t)&&(Rt[_t]=Mt[_t])},Ct(dt,Et)};return function(dt,Et){if(typeof Et!="function"&&Et!==null)throw new TypeError("Class extends value "+String(Et)+" is not a constructor or null");Ct(dt,Et);function Rt(){this.constructor=dt}dt.prototype=Et===null?Object.create(Et):(Rt.prototype=Et.prototype,new Rt)}}(),ot=this&&this.__awaiter||function(Ct,dt,Et,Rt){function Mt(_t){return _t instanceof Et?_t:new Et(function(kt){kt(_t)})}return new(Et||(Et=Promise))(function(_t,kt){function nt($){try{b(Rt.next($))}catch(_e){kt(_e)}}function s($){try{b(Rt.throw($))}catch(_e){kt(_e)}}function b($){$.done?_t($.value):Mt($.value).then(nt,s)}b((Rt=Rt.apply(Ct,dt||[])).next())})},gt=this&&this.__generator||function(Ct,dt){var Et={label:0,sent:function(){if(_t[0]&1)throw _t[1];return _t[1]},trys:[],ops:[]},Rt,Mt,_t,kt;return kt={next:nt(0),throw:nt(1),return:nt(2)},typeof Symbol=="function"&&(kt[Symbol.iterator]=function(){return this}),kt;function nt(b){return function($){return s([b,$])}}function s(b){if(Rt)throw new TypeError("Generator is already executing.");for(;Et;)try{if(Rt=1,Mt&&(_t=b[0]&2?Mt.return:b[0]?Mt.throw||((_t=Mt.return)&&_t.call(Mt),0):Mt.next)&&!(_t=_t.call(Mt,b[1])).done)return _t;switch(Mt=0,_t&&(b=[b[0]&2,_t.value]),b[0]){case 0:case 1:_t=b;break;case 4:return Et.label++,{value:b[1],done:!1};case 5:Et.label++,Mt=b[1],b=[0];continue;case 7:b=Et.ops.pop(),Et.trys.pop();continue;default:if(_t=Et.trys,!(_t=_t.length>0&&_t[_t.length-1])&&(b[0]===6||b[0]===2)){Et=0;continue}if(b[0]===3&&(!_t||b[1]>_t[0]&&b[1]<_t[3])){Et.label=b[1];break}if(b[0]===6&&Et.label<_t[1]){Et.label=_t[1],_t=b;break}if(_t&&Et.label<_t[2]){Et.label=_t[2],Et.ops.push(b);break}_t[2]&&Et.ops.pop(),Et.trys.pop();continue}b=dt.call(Ct,Et)}catch($){b=[6,$],Mt=0}finally{Rt=_t=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},ft=this&&this.__spreadArray||function(Ct,dt,Et){if(Et||arguments.length===2)for(var Rt=0,Mt=dt.length,_t;Rt<Mt;Rt++)(_t||!(Rt in dt))&&(_t||(_t=Array.prototype.slice.call(dt,0,Rt)),_t[Rt]=dt[Rt]);return Ct.concat(_t||Array.prototype.slice.call(dt))};Object.defineProperty(at,"__esModule",{value:!0}),at.Report=void 0;var yt=st("./node_modules/powerbi-models/dist/models.js"),vt=st("./src/embed.ts"),rt=st("./src/util.ts"),bt=st("./src/errors.ts"),ht=st("./src/page.ts"),wt=st("./src/bookmarksManager.ts"),At=function(Ct){ct(dt,Ct);function dt(Et,Rt,Mt,_t,kt,nt){var s=this,b=Mt;return s=Ct.call(this,Et,Rt,b,nt,_t,kt)||this,s.loadPath="/report/load",s.phasedLoadPath="/report/prepare",Array.prototype.push.apply(s.allowedEvents,dt.allowedEvents),s.bookmarksManager=new wt.BookmarksManager(Et,b,s.iframe),Et.router.post("/reports/".concat(s.config.uniqueId,"/eventHooks/:eventName"),function($,_e){return ot(s,void 0,void 0,function(){var it,pt,mt;return gt(this,function(lt){switch(lt.label){case 0:switch(it=$.params.eventName,it){case"preQuery":return[3,1];case"newAccessToken":return[3,3]}return[3,5];case 1:return $.body=$.body||{},$.body.report=this,[4,Et.invokeSDKHook((pt=this.eventHooks)===null||pt===void 0?void 0:pt.applicationContextProvider,$,_e)];case 2:return lt.sent(),[3,6];case 3:return $.body=$.body||{},$.body.report=this,[4,Et.invokeSDKHook((mt=this.eventHooks)===null||mt===void 0?void 0:mt.accessTokenProvider,$,_e)];case 4:return lt.sent(),[3,6];case 5:return[3,6];case 6:return[2]}})})}),s}return dt.findIdFromEmbedUrl=function(Et){var Rt=/reportId="?([^&]+)"?/,Mt=Et.match(Rt),_t;return Mt&&(_t=Mt[1]),_t},dt.prototype.render=function(Et){return ot(this,void 0,void 0,function(){var Rt,Mt;return gt(this,function(_t){switch(_t.label){case 0:return _t.trys.push([0,2,,3]),[4,this.service.hpm.post("/report/render",Et,{uid:this.config.uniqueId},this.iframe.contentWindow)];case 1:return Rt=_t.sent(),[2,Rt.body];case 2:throw Mt=_t.sent(),Mt.body;case 3:return[2]}})})},dt.prototype.addPage=function(Et){return ot(this,void 0,void 0,function(){var Rt,Mt,_t,kt;return gt(this,function(nt){switch(nt.label){case 0:Rt={displayName:Et},nt.label=1;case 1:return nt.trys.push([1,3,,4]),[4,this.service.hpm.post("/report/addPage",Rt,{uid:this.config.uniqueId},this.iframe.contentWindow)];case 2:return Mt=nt.sent(),_t=Mt.body,[2,new ht.Page(this,_t.name,_t.displayName,_t.isActive,_t.visibility,_t.defaultSize,_t.defaultDisplayOption)];case 3:throw kt=nt.sent(),kt.body;case 4:return[2]}})})},dt.prototype.deletePage=function(Et){return ot(this,void 0,void 0,function(){var Rt,Mt;return gt(this,function(_t){switch(_t.label){case 0:return _t.trys.push([0,2,,3]),[4,this.service.hpm.delete("/report/pages/".concat(Et),{},{uid:this.config.uniqueId},this.iframe.contentWindow)];case 1:return Rt=_t.sent(),[2,Rt.body];case 2:throw Mt=_t.sent(),Mt.body;case 3:return[2]}})})},dt.prototype.renamePage=function(Et,Rt){return ot(this,void 0,void 0,function(){var Mt,_t,kt;return gt(this,function(nt){switch(nt.label){case 0:Mt={name:Et,displayName:Rt},nt.label=1;case 1:return nt.trys.push([1,3,,4]),[4,this.service.hpm.put("/report/pages/".concat(Et,"/name"),Mt,{uid:this.config.uniqueId},this.iframe.contentWindow)];case 2:return _t=nt.sent(),[2,_t.body];case 3:throw kt=nt.sent(),kt.body;case 4:return[2]}})})},dt.prototype.getFilters=function(){return ot(this,void 0,void 0,function(){var Et,Rt;return gt(this,function(Mt){switch(Mt.label){case 0:if((0,rt.isRDLEmbed)(this.config.embedUrl))return[2,Promise.reject(bt.APINotSupportedForRDLError)];Mt.label=1;case 1:return Mt.trys.push([1,3,,4]),[4,this.service.hpm.get("/report/filters",{uid:this.config.uniqueId},this.iframe.contentWindow)];case 2:return Et=Mt.sent(),[2,Et.body];case 3:throw Rt=Mt.sent(),Rt.body;case 4:return[2]}})})},dt.prototype.updateFilters=function(Et,Rt){return ot(this,void 0,void 0,function(){var Mt,_t;return gt(this,function(kt){switch(kt.label){case 0:Mt={filtersOperation:Et,filters:Rt},kt.label=1;case 1:return kt.trys.push([1,3,,4]),[4,this.service.hpm.post("/report/filters",Mt,{uid:this.config.uniqueId},this.iframe.contentWindow)];case 2:return[2,kt.sent()];case 3:throw _t=kt.sent(),_t.body;case 4:return[2]}})})},dt.prototype.removeFilters=function(){return ot(this,void 0,void 0,function(){return gt(this,function(Et){return(0,rt.isRDLEmbed)(this.config.embedUrl)?[2,Promise.reject(bt.APINotSupportedForRDLError)]:[2,this.updateFilters(yt.FiltersOperations.RemoveAll)]})})},dt.prototype.setFilters=function(Et){return ot(this,void 0,void 0,function(){var Rt;return gt(this,function(Mt){switch(Mt.label){case 0:if((0,rt.isRDLEmbed)(this.config.embedUrl))return[2,Promise.reject(bt.APINotSupportedForRDLError)];Mt.label=1;case 1:return Mt.trys.push([1,3,,4]),[4,this.service.hpm.put("/report/filters",Et,{uid:this.config.uniqueId},this.iframe.contentWindow)];case 2:return[2,Mt.sent()];case 3:throw Rt=Mt.sent(),Rt.body;case 4:return[2]}})})},dt.prototype.getId=function(){var Et=this.config,Rt=Et.id||this.element.getAttribute(dt.reportIdAttribute)||dt.findIdFromEmbedUrl(Et.embedUrl);if(typeof Rt!="string"||Rt.length===0)throw new Error("Report id is required, but it was not found. You must provide an id either as part of embed configuration or as attribute '".concat(dt.reportIdAttribute,"'."));return Rt},dt.prototype.getPages=function(){return ot(this,void 0,void 0,function(){var Et,Rt,Mt=this;return gt(this,function(_t){switch(_t.label){case 0:if((0,rt.isRDLEmbed)(this.config.embedUrl))return[2,Promise.reject(bt.APINotSupportedForRDLError)];_t.label=1;case 1:return _t.trys.push([1,3,,4]),[4,this.service.hpm.get("/report/pages",{uid:this.config.uniqueId},this.iframe.contentWindow)];case 2:return Et=_t.sent(),[2,Et.body.map(function(kt){return new ht.Page(Mt,kt.name,kt.displayName,kt.isActive,kt.visibility,kt.defaultSize,kt.defaultDisplayOption,kt.mobileSize,kt.background,kt.wallpaper)})];case 3:throw Rt=_t.sent(),Rt.body;case 4:return[2]}})})},dt.prototype.getPageByName=function(Et){return ot(this,void 0,void 0,function(){var Rt,Mt,_t;return gt(this,function(kt){switch(kt.label){case 0:if((0,rt.isRDLEmbed)(this.config.embedUrl))return[2,Promise.reject(bt.APINotSupportedForRDLError)];kt.label=1;case 1:return kt.trys.push([1,3,,4]),[4,this.service.hpm.get("/report/pages",{uid:this.config.uniqueId},this.iframe.contentWindow)];case 2:return Rt=kt.sent(),Mt=Rt.body.find(function(nt){return nt.name===Et}),Mt?[2,new ht.Page(this,Mt.name,Mt.displayName,Mt.isActive,Mt.visibility,Mt.defaultSize,Mt.defaultDisplayOption,Mt.mobileSize,Mt.background,Mt.wallpaper)]:[2,Promise.reject(yt.CommonErrorCodes.NotFound)];case 3:throw _t=kt.sent(),_t.body;case 4:return[2]}})})},dt.prototype.getActivePage=function(){return ot(this,void 0,void 0,function(){var Et,Rt,Mt;return gt(this,function(_t){switch(_t.label){case 0:if((0,rt.isRDLEmbed)(this.config.embedUrl))return[2,Promise.reject(bt.APINotSupportedForRDLError)];_t.label=1;case 1:return _t.trys.push([1,3,,4]),[4,this.service.hpm.get("/report/pages",{uid:this.config.uniqueId},this.iframe.contentWindow)];case 2:return Et=_t.sent(),Rt=Et.body.find(function(kt){return kt.isActive}),[2,new ht.Page(this,Rt.name,Rt.displayName,Rt.isActive,Rt.visibility,Rt.defaultSize,Rt.defaultDisplayOption,Rt.mobileSize,Rt.background,Rt.wallpaper)];case 3:throw Mt=_t.sent(),Mt.body;case 4:return[2]}})})},dt.prototype.page=function(Et,Rt,Mt,_t){return new ht.Page(this,Et,Rt,Mt,_t)},dt.prototype.print=function(){return ot(this,void 0,void 0,function(){var Et,Rt;return gt(this,function(Mt){switch(Mt.label){case 0:if((0,rt.isRDLEmbed)(this.config.embedUrl))return[2,Promise.reject(bt.APINotSupportedForRDLError)];Mt.label=1;case 1:return Mt.trys.push([1,3,,4]),[4,this.service.hpm.post("/report/print",null,{uid:this.config.uniqueId},this.iframe.contentWindow)];case 2:return Et=Mt.sent(),[2,Et.body];case 3:throw Rt=Mt.sent(),Rt.body;case 4:return[2]}})})},dt.prototype.setPage=function(Et){return ot(this,void 0,void 0,function(){var Rt,Mt;return gt(this,function(_t){switch(_t.label){case 0:if((0,rt.isRDLEmbed)(this.config.embedUrl))return[2,Promise.reject(bt.APINotSupportedForRDLError)];Rt={name:Et,displayName:null,isActive:!0},_t.label=1;case 1:return _t.trys.push([1,3,,4]),[4,this.service.hpm.put("/report/pages/active",Rt,{uid:this.config.uniqueId},this.iframe.contentWindow)];case 2:return[2,_t.sent()];case 3:throw Mt=_t.sent(),Mt.body;case 4:return[2]}})})},dt.prototype.updateSettings=function(Et){var Rt,Mt;return ot(this,void 0,void 0,function(){var _t,kt,nt,s,b=this;return gt(this,function($){switch($.label){case 0:if((0,rt.isRDLEmbed)(this.config.embedUrl)&&Et.customLayout!=null)return[2,Promise.reject(bt.APINotSupportedForRDLError)];$.label=1;case 1:return $.trys.push([1,3,,4]),[4,this.service.hpm.patch("/report/settings",Et,{uid:this.config.uniqueId},this.iframe.contentWindow)];case 2:return _t=$.sent(),kt=Et==null?void 0:Et.extensions,this.commands=(Rt=kt==null?void 0:kt.commands)!==null&&Rt!==void 0?Rt:this.commands,this.groups=(Mt=kt==null?void 0:kt.groups)!==null&&Mt!==void 0?Mt:this.groups,nt=Et==null?void 0:Et.extensions,Array.isArray(nt)&&(this.commands=[],nt.map(function(_e){_e!=null&&_e.command&&b.commands.push(_e.command)})),[2,_t];case 3:throw s=$.sent(),s.body;case 4:return[2]}})})},dt.prototype.validate=function(Et){return(0,rt.isRDLEmbed)(this.config.embedUrl)?(0,yt.validatePaginatedReportLoad)(Et):(0,yt.validateReportLoad)(Et)},dt.prototype.configChanged=function(Et){var Rt=this.config;this.isMobileSettings(Rt.settings)&&(Rt.embedUrl=(0,rt.addParamToUrl)(Rt.embedUrl,"isMobile","true"));var Mt=this.element.getAttribute(dt.filterPaneEnabledAttribute),_t=this.element.getAttribute(dt.navContentPaneEnabledAttribute),kt={filterPaneEnabled:Mt==null?void 0:Mt!=="false",navContentPaneEnabled:_t==null?void 0:_t!=="false"};this.config.settings=(0,rt.assign)({},kt,Rt.settings),!Et&&(Rt.id=this.getId())},dt.prototype.getDefaultEmbedUrlEndpoint=function(){return"reportEmbed"},dt.prototype.switchMode=function(Et){return ot(this,void 0,void 0,function(){var Rt,Mt,_t,kt;return gt(this,function(nt){switch(nt.label){case 0:typeof Et=="string"?Rt=Et:Rt=this.viewModeToString(Et),Mt="/report/switchMode/"+Rt,nt.label=1;case 1:return nt.trys.push([1,3,,4]),[4,this.service.hpm.post(Mt,null,{uid:this.config.uniqueId},this.iframe.contentWindow)];case 2:return _t=nt.sent(),[2,_t.body];case 3:throw kt=nt.sent(),kt.body;case 4:return[2]}})})},dt.prototype.refresh=function(){return ot(this,void 0,void 0,function(){var Et,Rt;return gt(this,function(Mt){switch(Mt.label){case 0:if((0,rt.isRDLEmbed)(this.config.embedUrl))return[2,Promise.reject(bt.APINotSupportedForRDLError)];Mt.label=1;case 1:return Mt.trys.push([1,3,,4]),[4,this.service.hpm.post("/report/refresh",null,{uid:this.config.uniqueId},this.iframe.contentWindow)];case 2:return Et=Mt.sent(),[2,Et.body];case 3:throw Rt=Mt.sent(),Rt.body;case 4:return[2]}})})},dt.prototype.isSaved=function(){return ot(this,void 0,void 0,function(){return gt(this,function(Et){switch(Et.label){case 0:return(0,rt.isRDLEmbed)(this.config.embedUrl)?[2,Promise.reject(bt.APINotSupportedForRDLError)]:[4,(0,rt.isSavedInternal)(this.service.hpm,this.config.uniqueId,this.iframe.contentWindow)];case 1:return[2,Et.sent()]}})})},dt.prototype.applyTheme=function(Et){return ot(this,void 0,void 0,function(){return gt(this,function(Rt){switch(Rt.label){case 0:return(0,rt.isRDLEmbed)(this.config.embedUrl)?[2,Promise.reject(bt.APINotSupportedForRDLError)]:[4,this.applyThemeInternal(Et)];case 1:return[2,Rt.sent()]}})})},dt.prototype.resetTheme=function(){return ot(this,void 0,void 0,function(){return gt(this,function(Et){switch(Et.label){case 0:return(0,rt.isRDLEmbed)(this.config.embedUrl)?[2,Promise.reject(bt.APINotSupportedForRDLError)]:[4,this.applyThemeInternal({})];case 1:return[2,Et.sent()]}})})},dt.prototype.getTheme=function(){return ot(this,void 0,void 0,function(){var Et,Rt;return gt(this,function(Mt){switch(Mt.label){case 0:if((0,rt.isRDLEmbed)(this.config.embedUrl))return[2,Promise.reject(bt.APINotSupportedForRDLError)];Mt.label=1;case 1:return Mt.trys.push([1,3,,4]),[4,this.service.hpm.get("/report/theme",{uid:this.config.uniqueId},this.iframe.contentWindow)];case 2:return Et=Mt.sent(),[2,Et.body];case 3:throw Rt=Mt.sent(),Rt.body;case 4:return[2]}})})},dt.prototype.resetPersistentFilters=function(){return ot(this,void 0,void 0,function(){var Et;return gt(this,function(Rt){switch(Rt.label){case 0:return Rt.trys.push([0,2,,3]),[4,this.service.hpm.delete("/report/userState",null,{uid:this.config.uniqueId},this.iframe.contentWindow)];case 1:return[2,Rt.sent()];case 2:throw Et=Rt.sent(),Et.body;case 3:return[2]}})})},dt.prototype.savePersistentFilters=function(){return ot(this,void 0,void 0,function(){var Et;return gt(this,function(Rt){switch(Rt.label){case 0:return Rt.trys.push([0,2,,3]),[4,this.service.hpm.post("/report/userState",null,{uid:this.config.uniqueId},this.iframe.contentWindow)];case 1:return[2,Rt.sent()];case 2:throw Et=Rt.sent(),Et.body;case 3:return[2]}})})},dt.prototype.arePersistentFiltersApplied=function(){return ot(this,void 0,void 0,function(){var Et,Rt;return gt(this,function(Mt){switch(Mt.label){case 0:return Mt.trys.push([0,2,,3]),[4,this.service.hpm.get("/report/isUserStateApplied",{uid:this.config.uniqueId},this.iframe.contentWindow)];case 1:return Et=Mt.sent(),[2,Et.body];case 2:throw Rt=Mt.sent(),Rt.body;case 3:return[2]}})})},dt.prototype.removeContextMenuCommand=function(Et,Rt){return ot(this,void 0,void 0,function(){var Mt,_t,kt;return gt(this,function(nt){switch(nt.label){case 0:if((0,rt.isRDLEmbed)(this.config.embedUrl))return[2,Promise.reject(bt.APINotSupportedForRDLError)];if(Mt=JSON.parse(JSON.stringify(this.commands)),_t=this.findCommandMenuIndex("visualContextMenu",Mt,Et,Rt),_t===-1)throw yt.CommonErrorCodes.NotFound;return delete Mt[_t].extend.visualContextMenu,kt={extensions:{commands:Mt,groups:this.groups}},[4,this.updateSettings(kt)];case 1:return[2,nt.sent()]}})})},dt.prototype.addContextMenuCommand=function(Et,Rt,Mt,_t,kt,nt,s){return Mt===void 0&&(Mt=Rt),_t===void 0&&(_t=yt.MenuLocation.Bottom),kt===void 0&&(kt=void 0),s===void 0&&(s=void 0),ot(this,void 0,void 0,function(){var b,$;return gt(this,function(_e){switch(_e.label){case 0:return(0,rt.isRDLEmbed)(this.config.embedUrl)?[2,Promise.reject(bt.APINotSupportedForRDLError)]:(b=this.createMenuCommand("visualContextMenu",Et,Rt,Mt,_t,kt,nt,s),$={extensions:{commands:b,groups:this.groups}},[4,this.updateSettings($)]);case 1:return[2,_e.sent()]}})})},dt.prototype.removeOptionsMenuCommand=function(Et,Rt){return ot(this,void 0,void 0,function(){var Mt,_t,kt;return gt(this,function(nt){switch(nt.label){case 0:if((0,rt.isRDLEmbed)(this.config.embedUrl))return[2,Promise.reject(bt.APINotSupportedForRDLError)];if(Mt=JSON.parse(JSON.stringify(this.commands)),_t=this.findCommandMenuIndex("visualOptionsMenu",Mt,Et,Rt),_t===-1)throw yt.CommonErrorCodes.NotFound;return delete Mt[_t].extend.visualOptionsMenu,delete Mt[_t].icon,kt={extensions:{commands:Mt,groups:this.groups}},[4,this.updateSettings(kt)];case 1:return[2,nt.sent()]}})})},dt.prototype.addOptionsMenuCommand=function(Et,Rt,Mt,_t,kt,nt,s,b){return Mt===void 0&&(Mt=Rt),_t===void 0&&(_t=yt.MenuLocation.Bottom),kt===void 0&&(kt=void 0),nt===void 0&&(nt=void 0),s===void 0&&(s=void 0),b===void 0&&(b=void 0),ot(this,void 0,void 0,function(){var $,_e;return gt(this,function(it){switch(it.label){case 0:return(0,rt.isRDLEmbed)(this.config.embedUrl)?[2,Promise.reject(bt.APINotSupportedForRDLError)]:($=this.createMenuCommand("visualOptionsMenu",Et,Rt,Mt,_t,kt,nt,s,b),_e={extensions:{commands:$,groups:this.groups}},[4,this.updateSettings(_e)]);case 1:return[2,it.sent()]}})})},dt.prototype.setVisualDisplayState=function(Et,Rt,Mt){return ot(this,void 0,void 0,function(){var _t,kt;return gt(this,function(nt){switch(nt.label){case 0:return[4,this.validateVisual(Et,Rt)];case 1:return nt.sent(),_t={displayState:{mode:Mt}},kt=this.buildLayoutSettingsObject(Et,Rt,_t),[2,this.updateSettings(kt)]}})})},dt.prototype.resizeVisual=function(Et,Rt,Mt,_t){return ot(this,void 0,void 0,function(){var kt,nt;return gt(this,function(s){switch(s.label){case 0:return[4,this.validateVisual(Et,Rt)];case 1:return s.sent(),kt={width:Mt,height:_t},nt=this.buildLayoutSettingsObject(Et,Rt,kt),[2,this.updateSettings(nt)]}})})},dt.prototype.resizeActivePage=function(Et,Rt,Mt){return ot(this,void 0,void 0,function(){var _t,kt;return gt(this,function(nt){return _t={type:Et,width:Rt,height:Mt},kt={layoutType:yt.LayoutType.Custom,customLayout:{pageSize:_t}},[2,this.updateSettings(kt)]})})},dt.prototype.moveVisual=function(Et,Rt,Mt,_t,kt){return ot(this,void 0,void 0,function(){var nt,s;return gt(this,function(b){switch(b.label){case 0:return[4,this.validateVisual(Et,Rt)];case 1:return b.sent(),nt={x:Mt,y:_t,z:kt},s=this.buildLayoutSettingsObject(Et,Rt,nt),[2,this.updateSettings(s)]}})})},dt.prototype.switchLayout=function(Et){return ot(this,void 0,void 0,function(){var Rt,Mt,_t,kt;return gt(this,function(nt){switch(nt.label){case 0:if(Rt=this.isMobileSettings({layoutType:this.initialLayoutType}),Mt=this.isMobileSettings({layoutType:Et}),Rt!==Mt)throw"Switching between mobile and desktop layouts is not supported. Please reset the embed container and re-embed with required layout.";return _t={layoutType:Et},[4,this.updateSettings(_t)];case 1:return kt=nt.sent(),this.initialLayoutType=Et,[2,kt]}})})},dt.prototype.createMenuCommand=function(Et,Rt,Mt,_t,kt,nt,s,b,$){var _e={name:Rt,title:Mt,extend:{}};if(_e.extend[Et]={title:_t,menuLocation:kt},Et==="visualOptionsMenu"&&(_e.icon=$),b){var it=_e.extend[Et];delete it.menuLocation;var pt=_e.extend[Et];pt.groupName=b}return nt&&(_e.selector={$schema:"http://powerbi.com/product/schema#visualSelector",visualName:nt}),s&&(_e.selector={$schema:"http://powerbi.com/product/schema#visualTypeSelector",visualType:s}),ft(ft([],this.commands,!0),[_e],!1)},dt.prototype.findCommandMenuIndex=function(Et,Rt,Mt,_t){var kt=-1;return Rt.some(function(nt,s){return nt.name===Mt&&nt.extend[Et]&&nt.extend[Et].title===_t?(kt=s,!0):!1}),kt},dt.prototype.buildLayoutSettingsObject=function(Et,Rt,Mt){var _t={layoutType:yt.LayoutType.Custom,customLayout:{pagesLayout:{}}};return _t.customLayout.pagesLayout[Et]={visualsLayout:{}},_t.customLayout.pagesLayout[Et].visualsLayout[Rt]=Mt,_t},dt.prototype.validateVisual=function(Et,Rt){return ot(this,void 0,void 0,function(){var Mt;return gt(this,function(_t){switch(_t.label){case 0:return[4,this.getPageByName(Et)];case 1:return Mt=_t.sent(),[4,Mt.getVisualByName(Rt)];case 2:return[2,_t.sent()]}})})},dt.prototype.applyThemeInternal=function(Et){return ot(this,void 0,void 0,function(){var Rt,Mt;return gt(this,function(_t){switch(_t.label){case 0:return _t.trys.push([0,2,,3]),[4,this.service.hpm.put("/report/theme",Et,{uid:this.config.uniqueId},this.iframe.contentWindow)];case 1:return Rt=_t.sent(),[2,Rt.body];case 2:throw Mt=_t.sent(),Mt.body;case 3:return[2]}})})},dt.prototype.viewModeToString=function(Et){var Rt;switch(Et){case yt.ViewMode.Edit:Rt="edit";break;case yt.ViewMode.View:Rt="view";break}return Rt},dt.prototype.isMobileSettings=function(Et){return Et&&(Et.layoutType===yt.LayoutType.MobileLandscape||Et.layoutType===yt.LayoutType.MobilePortrait)},dt.prototype.getZoom=function(){return ot(this,void 0,void 0,function(){var Et,Rt;return gt(this,function(Mt){switch(Mt.label){case 0:return Mt.trys.push([0,2,,3]),[4,this.service.hpm.get("/report/zoom",{uid:this.config.uniqueId},this.iframe.contentWindow)];case 1:return Et=Mt.sent(),[2,Et.body];case 2:throw Rt=Mt.sent(),Rt.body;case 3:return[2]}})})},dt.prototype.setZoom=function(Et){return ot(this,void 0,void 0,function(){return gt(this,function(Rt){switch(Rt.label){case 0:return[4,this.updateSettings({zoomLevel:Et})];case 1:return Rt.sent(),[2]}})})},dt.prototype.closeAllOverlays=function(){return ot(this,void 0,void 0,function(){var Et,Rt;return gt(this,function(Mt){switch(Mt.label){case 0:if((0,rt.isRDLEmbed)(this.config.embedUrl))return[2,Promise.reject(bt.APINotSupportedForRDLError)];Mt.label=1;case 1:return Mt.trys.push([1,3,,4]),[4,this.service.hpm.post("/report/closeAllOverlays",null,{uid:this.config.uniqueId},this.iframe.contentWindow)];case 2:return Et=Mt.sent(),[2,Et.body];case 3:return Rt=Mt.sent(),[2,Promise.reject(Rt)];case 4:return[2]}})})},dt.prototype.clearSelectedVisuals=function(Et){return ot(this,void 0,void 0,function(){var Rt,Mt;return gt(this,function(_t){switch(_t.label){case 0:if(Et=Et===!0,(0,rt.isRDLEmbed)(this.config.embedUrl))return[2,Promise.reject(bt.APINotSupportedForRDLError)];_t.label=1;case 1:return _t.trys.push([1,3,,4]),[4,this.service.hpm.post("/report/clearSelectedVisuals/".concat(Et.toString()),null,{uid:this.config.uniqueId},this.iframe.contentWindow)];case 2:return Rt=_t.sent(),[2,Rt.body];case 3:return Mt=_t.sent(),[2,Promise.reject(Mt)];case 4:return[2]}})})},dt.allowedEvents=["filtersApplied","pageChanged","commandTriggered","swipeStart","swipeEnd","bookmarkApplied","dataHyperlinkClicked","visualRendered","visualClicked","selectionChanged","renderingStarted","blur"],dt.reportIdAttribute="powerbi-report-id",dt.filterPaneEnabledAttribute="powerbi-settings-filter-pane-enabled",dt.navContentPaneEnabledAttribute="powerbi-settings-nav-content-pane-enabled",dt.typeAttribute="powerbi-type",dt.type="Report",dt}(vt.Embed);at.Report=At},"./src/service.ts":function(et,at,st){var ct=this&&this.__assign||function(){return ct=Object.assign||function(_t){for(var kt,nt=1,s=arguments.length;nt<s;nt++){kt=arguments[nt];for(var b in kt)Object.prototype.hasOwnProperty.call(kt,b)&&(_t[b]=kt[b])}return _t},ct.apply(this,arguments)},ot=this&&this.__awaiter||function(_t,kt,nt,s){function b($){return $ instanceof nt?$:new nt(function(_e){_e($)})}return new(nt||(nt=Promise))(function($,_e){function it(lt){try{mt(s.next(lt))}catch(_){_e(_)}}function pt(lt){try{mt(s.throw(lt))}catch(_){_e(_)}}function mt(lt){lt.done?$(lt.value):b(lt.value).then(it,pt)}mt((s=s.apply(_t,kt||[])).next())})},gt=this&&this.__generator||function(_t,kt){var nt={label:0,sent:function(){if($[0]&1)throw $[1];return $[1]},trys:[],ops:[]},s,b,$,_e;return _e={next:it(0),throw:it(1),return:it(2)},typeof Symbol=="function"&&(_e[Symbol.iterator]=function(){return this}),_e;function it(mt){return function(lt){return pt([mt,lt])}}function pt(mt){if(s)throw new TypeError("Generator is already executing.");for(;nt;)try{if(s=1,b&&($=mt[0]&2?b.return:mt[0]?b.throw||(($=b.return)&&$.call(b),0):b.next)&&!($=$.call(b,mt[1])).done)return $;switch(b=0,$&&(mt=[mt[0]&2,$.value]),mt[0]){case 0:case 1:$=mt;break;case 4:return nt.label++,{value:mt[1],done:!1};case 5:nt.label++,b=mt[1],mt=[0];continue;case 7:mt=nt.ops.pop(),nt.trys.pop();continue;default:if($=nt.trys,!($=$.length>0&&$[$.length-1])&&(mt[0]===6||mt[0]===2)){nt=0;continue}if(mt[0]===3&&(!$||mt[1]>$[0]&&mt[1]<$[3])){nt.label=mt[1];break}if(mt[0]===6&&nt.label<$[1]){nt.label=$[1],$=mt;break}if($&&nt.label<$[2]){nt.label=$[2],nt.ops.push(mt);break}$[2]&&nt.ops.pop(),nt.trys.pop();continue}mt=kt.call(_t,nt)}catch(lt){mt=[6,lt],b=0}finally{s=$=0}if(mt[0]&5)throw mt[1];return{value:mt[0]?mt[1]:void 0,done:!0}}};Object.defineProperty(at,"__esModule",{value:!0}),at.Service=void 0;var ft=st("./src/embed.ts"),yt=st("./src/report.ts"),vt=st("./src/create.ts"),rt=st("./src/dashboard.ts"),bt=st("./src/tile.ts"),ht=st("./src/page.ts"),wt=st("./src/qna.ts"),At=st("./src/visual.ts"),Ct=st("./src/util.ts"),dt=st("./src/quickCreate.ts"),Et=st("./src/config.ts"),Rt=st("./src/errors.ts"),Mt=function(){function _t(kt,nt,s,b){b===void 0&&(b={});var $=this;this.registeredComponents={},this.wpmp=nt(b.wpmpName,b.logMessages),this.hpm=kt(this.wpmp,null,b.version,b.type,b.sdkWrapperVersion),this.router=s(this.wpmp),this.uniqueSessionId=Ct.generateUUID(),this.router.post("/reports/:uniqueId/events/:eventName",function(_e,it){var pt={type:"report",id:_e.params.uniqueId,name:_e.params.eventName,value:_e.body};$.handleEvent(pt)}),this.router.post("/reports/:uniqueId/pages/:pageName/events/:eventName",function(_e,it){var pt={type:"report",id:_e.params.uniqueId,name:_e.params.eventName,value:_e.body};$.handleEvent(pt)}),this.router.post("/reports/:uniqueId/pages/:pageName/visuals/:visualName/events/:eventName",function(_e,it){var pt={type:"report",id:_e.params.uniqueId,name:_e.params.eventName,value:_e.body};$.handleEvent(pt)}),this.router.post("/dashboards/:uniqueId/events/:eventName",function(_e,it){var pt={type:"dashboard",id:_e.params.uniqueId,name:_e.params.eventName,value:_e.body};$.handleEvent(pt)}),this.router.post("/tile/:uniqueId/events/:eventName",function(_e,it){var pt={type:"tile",id:_e.params.uniqueId,name:_e.params.eventName,value:_e.body};$.handleEvent(pt)}),this.router.post("/qna/:uniqueId/events/:eventName",function(_e,it){var pt={type:"qna",id:_e.params.uniqueId,name:_e.params.eventName,value:_e.body};$.handleEvent(pt)}),this.router.post("/ready/:uniqueId",function(_e,it){var pt={type:"report",id:_e.params.uniqueId,name:"ready",value:_e.body};$.handleEvent(pt)}),this.embeds=[],this.config=Ct.assign({},_t.defaultConfig,b),this.config.autoEmbedOnContentLoaded&&this.enableAutoEmbed()}return _t.prototype.createReport=function(kt,nt){nt.type="create";var s=kt,b=new vt.Create(this,s,nt);return s.powerBiEmbed=b,this.addOrOverwriteEmbed(b,kt),b},_t.prototype.quickCreate=function(kt,nt){nt.type="quickCreate";var s=kt,b=new dt.QuickCreate(this,s,nt);return s.powerBiEmbed=b,this.addOrOverwriteEmbed(b,kt),b},_t.prototype.init=function(kt,nt){var s=this;nt===void 0&&(nt=void 0),kt=kt&&kt instanceof HTMLElement?kt:document.body;var b=Array.prototype.slice.call(kt.querySelectorAll("[".concat(ft.Embed.embedUrlAttribute,"]")));return b.map(function($){return s.embed($,nt)})},_t.prototype.embed=function(kt,nt){return nt===void 0&&(nt={}),this.embedInternal(kt,nt)},_t.prototype.load=function(kt,nt){return nt===void 0&&(nt={}),this.embedInternal(kt,nt,!0,!1)},_t.prototype.bootstrap=function(kt,nt){return this.embedInternal(kt,nt,!1,!0)},_t.prototype.embedInternal=function(kt,nt,s,b){nt===void 0&&(nt={});var $,_e=kt;if(_e.powerBiEmbed){if(b)throw new Error("Attempted to bootstrap element ".concat(kt.outerHTML,", but the element is already a powerbi element."));$=this.embedExisting(_e,nt,s)}else $=this.embedNew(_e,nt,s,b);return $},_t.prototype.getNumberOfComponents=function(){return this.embeds?this.embeds.length:0},_t.prototype.getSdkSessionId=function(){return this.uniqueSessionId},_t.prototype.getSDKVersion=function(){return Et.default.version},_t.prototype.embedNew=function(kt,nt,s,b){var $=nt.type||kt.getAttribute(ft.Embed.typeAttribute);if(!$){var _e=ct(ct({},nt),{accessToken:""});throw new Error("Attempted to embed using config ".concat(JSON.stringify(_e)," on element ").concat(kt.outerHTML,", but could not determine what type of component to embed. You must specify a type in the configuration or as an attribute such as '").concat(ft.Embed.typeAttribute,'="').concat(yt.Report.type.toLowerCase(),`"'.`))}nt.type=$;var it=this.createEmbedComponent($,kt,nt,s,b);return kt.powerBiEmbed=it,this.addOrOverwriteEmbed(it,kt),it},_t.prototype.createEmbedComponent=function(kt,nt,s,b,$){var _e=Ct.find(function(pt){return kt===pt.type.toLowerCase()},_t.components);if(_e)return new _e(this,nt,s,b,$);var it=Ct.find(function(pt){return kt.toLowerCase()===pt.toLowerCase()},Object.keys(this.registeredComponents));if(!it)throw new Error("Attempted to embed component of type: ".concat(kt," but did not find any matching component.  Please verify the type you specified is intended."));return this.registeredComponents[it](this,nt,s,b,$)},_t.prototype.embedExisting=function(kt,nt,s){var b=Ct.find(function(it){return it.element===kt},this.embeds);if(!b){var $=ct(ct({},nt),{accessToken:""});throw new Error("Attempted to embed using config ".concat(JSON.stringify($)," on element ").concat(kt.outerHTML," which already has embedded component associated, but could not find the existing component in the list of active components. This could indicate the embeds list is out of sync with the DOM, or the component is referencing the incorrect HTML element."))}if(nt.type&&nt.type.toLowerCase()==="qna")return this.embedNew(kt,nt);if(typeof nt.type=="string"&&nt.type!==b.config.type){if(nt.type==="report"&&Ct.isCreate(b.config.type)){var _e=new yt.Report(this,kt,nt,!1,!1,kt.powerBiEmbed.iframe);return b.populateConfig(nt,!1),_e.load(),kt.powerBiEmbed=_e,this.addOrOverwriteEmbed(b,kt),_e}var $=ct(ct({},nt),{accessToken:""});throw new Error("Embedding on an existing element with a different type than the previous embed object is not supported.  Attempted to embed using config ".concat(JSON.stringify($)," on element ").concat(kt.outerHTML,", but the existing element contains an embed of type: ").concat(this.config.type," which does not match the new type: ").concat(nt.type))}return b.populateConfig(nt,!1),b.load(s),b},_t.prototype.enableAutoEmbed=function(){var kt=this;window.addEventListener("DOMContentLoaded",function(nt){return kt.init(document.body)},!1)},_t.prototype.get=function(kt){var nt=kt;if(!nt.powerBiEmbed)throw new Error("You attempted to get an instance of powerbi component associated with element: ".concat(kt.outerHTML," but there was no associated instance."));return nt.powerBiEmbed},_t.prototype.find=function(kt){return Ct.find(function(nt){return nt.config.uniqueId===kt},this.embeds)},_t.prototype.addOrOverwriteEmbed=function(kt,nt){this.embeds=this.embeds.filter(function(s){return s.element!==nt}),this.embeds.push(kt)},_t.prototype.reset=function(kt){var nt=kt;if(nt.powerBiEmbed){var s=nt.powerBiEmbed;s.frontLoadHandler&&s.element.removeEventListener("ready",s.frontLoadHandler,!1),s.allowedEvents.forEach(function($){s.off($)}),Ct.remove(function($){return $===nt.powerBiEmbed},this.embeds),delete nt.powerBiEmbed;var b=kt.querySelector("iframe");b&&(b.remove!==void 0?b.remove():b.parentElement.removeChild(b))}},_t.prototype.handleTileEvents=function(kt){kt.type==="tile"&&this.handleEvent(kt)},_t.prototype.invokeSDKHook=function(kt,nt,s){return ot(this,void 0,void 0,function(){var b,$;return gt(this,function(_e){switch(_e.label){case 0:if(!kt)return s.send(404,null),[2];_e.label=1;case 1:return _e.trys.push([1,3,,4]),[4,kt(nt.body)];case 2:return b=_e.sent(),s.send(200,b),[3,4];case 3:return $=_e.sent(),s.send(400,null),console.error($),[3,4];case 4:return[2]}})})},_t.prototype.handleEvent=function(kt){var nt=Ct.find(function(_e){return _e.config.uniqueId===kt.id},this.embeds);if(nt){var s=kt.value;if(kt.name==="pageChanged"){var b="newPage",$=s[b];if(!$)throw new Error("Page model not found at 'event.value.".concat(b,"'."));s[b]=new ht.Page(nt,$.name,$.displayName,!0)}Ct.raiseCustomEvent(nt.element,kt.name,s)}},_t.prototype.preload=function(kt,nt){if(!Ct.validateEmbedUrl(kt.embedUrl))throw new Error(Rt.invalidEmbedUrlErrorMessage);var s=document.createElement("iframe");s.setAttribute("style","display:none;"),s.setAttribute("src",kt.embedUrl),s.setAttribute("scrolling","no"),s.setAttribute("allowfullscreen","false");var b=nt;return b||(b=document.getElementsByTagName("body")[0]),b.appendChild(s),s.onload=function(){Ct.raiseCustomEvent(s,"preloaded",{})},s},_t.prototype.setSdkInfo=function(kt,nt){this.hpm.defaultHeaders["x-sdk-type"]=kt,this.hpm.defaultHeaders["x-sdk-wrapper-version"]=nt},_t.prototype.register=function(kt,nt,s){var b=this;if(Ct.find(function($){return kt.toLowerCase()===$.type.toLowerCase()},_t.components))throw new Error("The component name is reserved. Cannot register a component with this name.");if(Ct.find(function($){return kt.toLowerCase()===$.toLowerCase()},Object.keys(this.registeredComponents)))throw new Error("A component with this type is already registered.");this.registeredComponents[kt]=nt,s.forEach(function($){if(!$.includes(":uniqueId")||!$.includes(":eventName"))throw new Error("Invalid router event URL");b.router.post($,function(_e,it){var pt={type:kt,id:_e.params.uniqueId,name:_e.params.eventName,value:_e.body};b.handleEvent(pt)})})},_t.components=[bt.Tile,yt.Report,rt.Dashboard,wt.Qna,At.Visual],_t.defaultConfig={autoEmbedOnContentLoaded:!1,onError:function(){for(var kt=[],nt=0;nt<arguments.length;nt++)kt[nt]=arguments[nt];return console.log(kt[0],kt.slice(1))}},_t}();at.Service=Mt},"./src/tile.ts":function(et,at,st){var ct=this&&this.__extends||function(){var yt=function(vt,rt){return yt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(bt,ht){bt.__proto__=ht}||function(bt,ht){for(var wt in ht)Object.prototype.hasOwnProperty.call(ht,wt)&&(bt[wt]=ht[wt])},yt(vt,rt)};return function(vt,rt){if(typeof rt!="function"&&rt!==null)throw new TypeError("Class extends value "+String(rt)+" is not a constructor or null");yt(vt,rt);function bt(){this.constructor=vt}vt.prototype=rt===null?Object.create(rt):(bt.prototype=rt.prototype,new bt)}}();Object.defineProperty(at,"__esModule",{value:!0}),at.Tile=void 0;var ot=st("./node_modules/powerbi-models/dist/models.js"),gt=st("./src/embed.ts"),ft=function(yt){ct(vt,yt);function vt(rt,bt,ht,wt,At){var Ct=this,dt=ht;return Ct=yt.call(this,rt,bt,dt,void 0,wt,At)||this,Ct.loadPath="/tile/load",Array.prototype.push.apply(Ct.allowedEvents,vt.allowedEvents),Ct}return vt.prototype.getId=function(){var rt=this.config,bt=rt.id||vt.findIdFromEmbedUrl(this.config.embedUrl);if(typeof bt!="string"||bt.length===0)throw new Error("Tile id is required, but it was not found. You must provide an id either as part of embed configuration.");return bt},vt.prototype.validate=function(rt){var bt=rt;return(0,ot.validateTileLoad)(bt)},vt.prototype.configChanged=function(rt){rt||(this.config.id=this.getId())},vt.prototype.getDefaultEmbedUrlEndpoint=function(){return"tileEmbed"},vt.findIdFromEmbedUrl=function(rt){var bt=/tileId="?([^&]+)"?/,ht=rt.match(bt),wt;return ht&&(wt=ht[1]),wt},vt.type="Tile",vt.allowedEvents=["tileClicked","tileLoaded"],vt}(gt.Embed);at.Tile=ft},"./src/util.ts":function(et,at){var st=this&&this.__awaiter||function(s,b,$,_e){function it(pt){return pt instanceof $?pt:new $(function(mt){mt(pt)})}return new($||($=Promise))(function(pt,mt){function lt(Tt){try{tt(_e.next(Tt))}catch(It){mt(It)}}function _(Tt){try{tt(_e.throw(Tt))}catch(It){mt(It)}}function tt(Tt){Tt.done?pt(Tt.value):it(Tt.value).then(lt,_)}tt((_e=_e.apply(s,b||[])).next())})},ct=this&&this.__generator||function(s,b){var $={label:0,sent:function(){if(pt[0]&1)throw pt[1];return pt[1]},trys:[],ops:[]},_e,it,pt,mt;return mt={next:lt(0),throw:lt(1),return:lt(2)},typeof Symbol=="function"&&(mt[Symbol.iterator]=function(){return this}),mt;function lt(tt){return function(Tt){return _([tt,Tt])}}function _(tt){if(_e)throw new TypeError("Generator is already executing.");for(;$;)try{if(_e=1,it&&(pt=tt[0]&2?it.return:tt[0]?it.throw||((pt=it.return)&&pt.call(it),0):it.next)&&!(pt=pt.call(it,tt[1])).done)return pt;switch(it=0,pt&&(tt=[tt[0]&2,pt.value]),tt[0]){case 0:case 1:pt=tt;break;case 4:return $.label++,{value:tt[1],done:!1};case 5:$.label++,it=tt[1],tt=[0];continue;case 7:tt=$.ops.pop(),$.trys.pop();continue;default:if(pt=$.trys,!(pt=pt.length>0&&pt[pt.length-1])&&(tt[0]===6||tt[0]===2)){$=0;continue}if(tt[0]===3&&(!pt||tt[1]>pt[0]&&tt[1]<pt[3])){$.label=tt[1];break}if(tt[0]===6&&$.label<pt[1]){$.label=pt[1],pt=tt;break}if(pt&&$.label<pt[2]){$.label=pt[2],$.ops.push(tt);break}pt[2]&&$.ops.pop(),$.trys.pop();continue}tt=b.call(s,$)}catch(Tt){tt=[6,Tt],it=0}finally{_e=pt=0}if(tt[0]&5)throw tt[1];return{value:tt[0]?tt[1]:void 0,done:!0}}};Object.defineProperty(at,"__esModule",{value:!0}),at.validateEmbedUrl=at.isCreate=at.getTimeDiffInMilliseconds=at.getRandomValue=at.autoAuthInEmbedUrl=at.isRDLEmbed=at.isSavedInternal=at.addParamToUrl=at.generateUUID=at.createRandomString=at.assign=at.remove=at.find=at.findIndex=at.raiseCustomEvent=void 0;var ot=new RegExp(/(.+\.powerbi\.com$)|(.+\.fabric\.microsoft\.com$)|(.+\.analysis\.windows-int\.net$)|(.+\.analysis-df\.windows\.net$)/),gt=new RegExp(/^app\.powerbi\.cn$|^app(\.mil\.|\.high\.|\.)powerbigov\.us$|^app\.powerbi\.eaglex\.ic\.gov$|^app\.powerbi\.microsoft\.scloud$/),ft="https:";function yt(s,b,$){var _e;typeof CustomEvent=="function"?_e=new CustomEvent(b,{detail:$,bubbles:!0,cancelable:!0}):(_e=document.createEvent("CustomEvent"),_e.initCustomEvent(b,!0,!0,$)),s.dispatchEvent(_e)}at.raiseCustomEvent=yt;function vt(s,b){if(!Array.isArray(b))throw new Error("You attempted to call find with second parameter that was not an array. You passed: ".concat(b));var $;return b.some(function(_e,it){if(s(_e))return $=it,!0}),$}at.findIndex=vt;function rt(s,b){var $=vt(s,b);return b[$]}at.find=rt;function bt(s,b){var $=vt(s,b);b.splice($,1)}at.remove=bt;function ht(){for(var s=[],b=0;b<arguments.length;b++)s[b]=arguments[b];var $=s[0];if($==null)throw new TypeError("Cannot convert undefined or null to object");for(var _e=Object($),it=1;it<arguments.length;it++){var pt=arguments[it];if(pt!=null)for(var mt in pt)pt.hasOwnProperty(mt)&&(_e[mt]=pt[mt])}return _e}at.assign=ht;function wt(){return Mt().toString(36).substring(1)}at.createRandomString=wt;function At(){var s=new Date().getTime();return typeof performance<"u"&&typeof performance.now=="function"&&(s+=performance.now()),"xxxxxxxxxxxxxxxxxxxx".replace(/[xy]/g,function(b){var $=Mt()%16;return s>>=4,$.toString(16)})}at.generateUUID=At;function Ct(s,b,$){var _e=s.indexOf("?")>0?"&":"?";return s+=_e+b+"="+$,s}at.addParamToUrl=Ct;function dt(s,b,$){return st(this,void 0,void 0,function(){var _e,it;return ct(this,function(pt){switch(pt.label){case 0:return pt.trys.push([0,2,,3]),[4,s.get("/report/hasUnsavedChanges",{uid:b},$)];case 1:return _e=pt.sent(),[2,!_e.body];case 2:throw it=pt.sent(),it.body;case 3:return[2]}})})}at.isSavedInternal=dt;function Et(s){return s&&s.toLowerCase().indexOf("/rdlembed?")>=0}at.isRDLEmbed=Et;function Rt(s){return s&&decodeURIComponent(s).toLowerCase().indexOf("autoauth=true")>=0}at.autoAuthInEmbedUrl=Rt;function Mt(){var s=window.crypto||window.msCrypto,b=new Uint32Array(1);return s.getRandomValues(b),b[0]}at.getRandomValue=Mt;function _t(s,b){return Math.abs(s.getTime()-b.getTime())}at.getTimeDiffInMilliseconds=_t;function kt(s){return s==="create"||s==="quickcreate"}at.isCreate=kt;function nt(s){if(s){var b=void 0;try{b=new URL(s.toLowerCase())}catch{return!1}return b.protocol===ft&&(ot.test(b.hostname)||gt.test(b.hostname))}}at.validateEmbedUrl=nt},"./src/visual.ts":function(et,at,st){var ct=this&&this.__extends||function(){var bt=function(ht,wt){return bt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(At,Ct){At.__proto__=Ct}||function(At,Ct){for(var dt in Ct)Object.prototype.hasOwnProperty.call(Ct,dt)&&(At[dt]=Ct[dt])},bt(ht,wt)};return function(ht,wt){if(typeof wt!="function"&&wt!==null)throw new TypeError("Class extends value "+String(wt)+" is not a constructor or null");bt(ht,wt);function At(){this.constructor=ht}ht.prototype=wt===null?Object.create(wt):(At.prototype=wt.prototype,new At)}}(),ot=this&&this.__awaiter||function(bt,ht,wt,At){function Ct(dt){return dt instanceof wt?dt:new wt(function(Et){Et(dt)})}return new(wt||(wt=Promise))(function(dt,Et){function Rt(kt){try{_t(At.next(kt))}catch(nt){Et(nt)}}function Mt(kt){try{_t(At.throw(kt))}catch(nt){Et(nt)}}function _t(kt){kt.done?dt(kt.value):Ct(kt.value).then(Rt,Mt)}_t((At=At.apply(bt,ht||[])).next())})},gt=this&&this.__generator||function(bt,ht){var wt={label:0,sent:function(){if(dt[0]&1)throw dt[1];return dt[1]},trys:[],ops:[]},At,Ct,dt,Et;return Et={next:Rt(0),throw:Rt(1),return:Rt(2)},typeof Symbol=="function"&&(Et[Symbol.iterator]=function(){return this}),Et;function Rt(_t){return function(kt){return Mt([_t,kt])}}function Mt(_t){if(At)throw new TypeError("Generator is already executing.");for(;wt;)try{if(At=1,Ct&&(dt=_t[0]&2?Ct.return:_t[0]?Ct.throw||((dt=Ct.return)&&dt.call(Ct),0):Ct.next)&&!(dt=dt.call(Ct,_t[1])).done)return dt;switch(Ct=0,dt&&(_t=[_t[0]&2,dt.value]),_t[0]){case 0:case 1:dt=_t;break;case 4:return wt.label++,{value:_t[1],done:!1};case 5:wt.label++,Ct=_t[1],_t=[0];continue;case 7:_t=wt.ops.pop(),wt.trys.pop();continue;default:if(dt=wt.trys,!(dt=dt.length>0&&dt[dt.length-1])&&(_t[0]===6||_t[0]===2)){wt=0;continue}if(_t[0]===3&&(!dt||_t[1]>dt[0]&&_t[1]<dt[3])){wt.label=_t[1];break}if(_t[0]===6&&wt.label<dt[1]){wt.label=dt[1],dt=_t;break}if(dt&&wt.label<dt[2]){wt.label=dt[2],wt.ops.push(_t);break}dt[2]&&wt.ops.pop(),wt.trys.pop();continue}_t=ht.call(bt,wt)}catch(kt){_t=[6,kt],Ct=0}finally{At=dt=0}if(_t[0]&5)throw _t[1];return{value:_t[0]?_t[1]:void 0,done:!0}}};Object.defineProperty(at,"__esModule",{value:!0}),at.Visual=void 0;var ft=st("./node_modules/powerbi-models/dist/models.js"),yt=st("./src/report.ts"),vt=st("./src/visualDescriptor.ts"),rt=function(bt){ct(ht,bt);function ht(wt,At,Ct,dt,Et,Rt){return bt.call(this,wt,At,Ct,dt,Et,Rt)||this}return ht.prototype.load=function(wt){var At=this.config;if(At.accessToken){if(typeof At.pageName!="string"||At.pageName.length===0)throw new Error("Page name is required when embedding a visual.");if(typeof At.visualName!="string"||At.visualName.length===0)throw new Error("Visual name is required, but it was not found. You must provide a visual name as part of embed configuration.");var Ct=At.width?At.width:this.iframe.offsetWidth,dt=At.height?At.height:this.iframe.offsetHeight,Et={type:ft.PageSizeType.Custom,width:Ct,height:dt},Rt={};return Rt[At.pageName]={defaultLayout:{displayState:{mode:ft.VisualContainerDisplayMode.Hidden}},visualsLayout:{}},Rt[At.pageName].visualsLayout[At.visualName]={displayState:{mode:ft.VisualContainerDisplayMode.Visible},x:1,y:1,z:1,width:Et.width,height:Et.height},At.settings=At.settings||{},At.settings.filterPaneEnabled=!1,At.settings.navContentPaneEnabled=!1,At.settings.layoutType=ft.LayoutType.Custom,At.settings.customLayout={displayOption:ft.DisplayOption.FitToPage,pageSize:Et,pagesLayout:Rt},this.config=At,bt.prototype.load.call(this,wt)}},ht.prototype.getPages=function(){throw ht.GetPagesNotSupportedError},ht.prototype.setPage=function(wt){throw ht.SetPageNotSupportedError},ht.prototype.render=function(wt){return ot(this,void 0,void 0,function(){return gt(this,function(At){throw ht.RenderNotSupportedError})})},ht.prototype.getVisualDescriptor=function(){return ot(this,void 0,void 0,function(){var wt,At,Ct,dt,Et,Rt,Mt;return gt(this,function(_t){switch(_t.label){case 0:wt=this.config,_t.label=1;case 1:return _t.trys.push([1,3,,4]),[4,this.service.hpm.get("/report/pages/".concat(wt.pageName,"/visuals"),{uid:this.config.uniqueId},this.iframe.contentWindow)];case 2:if(At=_t.sent(),Ct=At.body.filter(function(kt){return kt.name===wt.visualName}),Ct.length===0)throw dt={message:"visualNotFound",detailedMessage:"Visual not found"},dt;return Et=Ct[0],Rt=this.page(wt.pageName),[2,new vt.VisualDescriptor(Rt,Et.name,Et.title,Et.type,Et.layout)];case 3:throw Mt=_t.sent(),Mt.body;case 4:return[2]}})})},ht.prototype.getFilters=function(wt){return ot(this,void 0,void 0,function(){var At,Ct,dt;return gt(this,function(Et){switch(Et.label){case 0:At=this.getFiltersLevelUrl(wt),Et.label=1;case 1:return Et.trys.push([1,3,,4]),[4,this.service.hpm.get(At,{uid:this.config.uniqueId},this.iframe.contentWindow)];case 2:return Ct=Et.sent(),[2,Ct.body];case 3:throw dt=Et.sent(),dt.body;case 4:return[2]}})})},ht.prototype.updateFilters=function(wt,At,Ct){return ot(this,void 0,void 0,function(){var dt,Et,Rt;return gt(this,function(Mt){switch(Mt.label){case 0:dt={filtersOperation:wt,filters:At},Et=this.getFiltersLevelUrl(Ct),Mt.label=1;case 1:return Mt.trys.push([1,3,,4]),[4,this.service.hpm.post(Et,dt,{uid:this.config.uniqueId},this.iframe.contentWindow)];case 2:return[2,Mt.sent()];case 3:throw Rt=Mt.sent(),Rt.body;case 4:return[2]}})})},ht.prototype.setFilters=function(wt,At){return ot(this,void 0,void 0,function(){var Ct,dt;return gt(this,function(Et){switch(Et.label){case 0:Ct=this.getFiltersLevelUrl(At),Et.label=1;case 1:return Et.trys.push([1,3,,4]),[4,this.service.hpm.put(Ct,wt,{uid:this.config.uniqueId},this.iframe.contentWindow)];case 2:return[2,Et.sent()];case 3:throw dt=Et.sent(),dt.body;case 4:return[2]}})})},ht.prototype.removeFilters=function(wt){return ot(this,void 0,void 0,function(){return gt(this,function(At){switch(At.label){case 0:return[4,this.updateFilters(ft.FiltersOperations.RemoveAll,void 0,wt)];case 1:return[2,At.sent()]}})})},ht.prototype.getFiltersLevelUrl=function(wt){var At=this.config;switch(wt){case ft.FiltersLevel.Report:return"/report/filters";case ft.FiltersLevel.Page:return"/report/pages/".concat(At.pageName,"/filters");default:return"/report/pages/".concat(At.pageName,"/visuals/").concat(At.visualName,"/filters")}},ht.type="visual",ht.GetPagesNotSupportedError="Get pages is not supported while embedding a visual.",ht.SetPageNotSupportedError="Set page is not supported while embedding a visual.",ht.RenderNotSupportedError="render is not supported while embedding a visual.",ht}(yt.Report);at.Visual=rt},"./src/visualDescriptor.ts":function(et,at,st){var ct=this&&this.__awaiter||function(yt,vt,rt,bt){function ht(wt){return wt instanceof rt?wt:new rt(function(At){At(wt)})}return new(rt||(rt=Promise))(function(wt,At){function Ct(Rt){try{Et(bt.next(Rt))}catch(Mt){At(Mt)}}function dt(Rt){try{Et(bt.throw(Rt))}catch(Mt){At(Mt)}}function Et(Rt){Rt.done?wt(Rt.value):ht(Rt.value).then(Ct,dt)}Et((bt=bt.apply(yt,vt||[])).next())})},ot=this&&this.__generator||function(yt,vt){var rt={label:0,sent:function(){if(wt[0]&1)throw wt[1];return wt[1]},trys:[],ops:[]},bt,ht,wt,At;return At={next:Ct(0),throw:Ct(1),return:Ct(2)},typeof Symbol=="function"&&(At[Symbol.iterator]=function(){return this}),At;function Ct(Et){return function(Rt){return dt([Et,Rt])}}function dt(Et){if(bt)throw new TypeError("Generator is already executing.");for(;rt;)try{if(bt=1,ht&&(wt=Et[0]&2?ht.return:Et[0]?ht.throw||((wt=ht.return)&&wt.call(ht),0):ht.next)&&!(wt=wt.call(ht,Et[1])).done)return wt;switch(ht=0,wt&&(Et=[Et[0]&2,wt.value]),Et[0]){case 0:case 1:wt=Et;break;case 4:return rt.label++,{value:Et[1],done:!1};case 5:rt.label++,ht=Et[1],Et=[0];continue;case 7:Et=rt.ops.pop(),rt.trys.pop();continue;default:if(wt=rt.trys,!(wt=wt.length>0&&wt[wt.length-1])&&(Et[0]===6||Et[0]===2)){rt=0;continue}if(Et[0]===3&&(!wt||Et[1]>wt[0]&&Et[1]<wt[3])){rt.label=Et[1];break}if(Et[0]===6&&rt.label<wt[1]){rt.label=wt[1],wt=Et;break}if(wt&&rt.label<wt[2]){rt.label=wt[2],rt.ops.push(Et);break}wt[2]&&rt.ops.pop(),rt.trys.pop();continue}Et=vt.call(yt,rt)}catch(Rt){Et=[6,Rt],ht=0}finally{bt=wt=0}if(Et[0]&5)throw Et[1];return{value:Et[0]?Et[1]:void 0,done:!0}}};Object.defineProperty(at,"__esModule",{value:!0}),at.VisualDescriptor=void 0;var gt=st("./node_modules/powerbi-models/dist/models.js"),ft=function(){function yt(vt,rt,bt,ht,wt){this.name=rt,this.title=bt,this.type=ht,this.layout=wt,this.page=vt}return yt.prototype.getFilters=function(){return ct(this,void 0,void 0,function(){var vt,rt;return ot(this,function(bt){switch(bt.label){case 0:return bt.trys.push([0,2,,3]),[4,this.page.report.service.hpm.get("/report/pages/".concat(this.page.name,"/visuals/").concat(this.name,"/filters"),{uid:this.page.report.config.uniqueId},this.page.report.iframe.contentWindow)];case 1:return vt=bt.sent(),[2,vt.body];case 2:throw rt=bt.sent(),rt.body;case 3:return[2]}})})},yt.prototype.updateFilters=function(vt,rt){return ct(this,void 0,void 0,function(){var bt,ht;return ot(this,function(wt){switch(wt.label){case 0:bt={filtersOperation:vt,filters:rt},wt.label=1;case 1:return wt.trys.push([1,3,,4]),[4,this.page.report.service.hpm.post("/report/pages/".concat(this.page.name,"/visuals/").concat(this.name,"/filters"),bt,{uid:this.page.report.config.uniqueId},this.page.report.iframe.contentWindow)];case 2:return[2,wt.sent()];case 3:throw ht=wt.sent(),ht.body;case 4:return[2]}})})},yt.prototype.removeFilters=function(){return ct(this,void 0,void 0,function(){return ot(this,function(vt){switch(vt.label){case 0:return[4,this.updateFilters(gt.FiltersOperations.RemoveAll)];case 1:return[2,vt.sent()]}})})},yt.prototype.setFilters=function(vt){return ct(this,void 0,void 0,function(){var rt;return ot(this,function(bt){switch(bt.label){case 0:return bt.trys.push([0,2,,3]),[4,this.page.report.service.hpm.put("/report/pages/".concat(this.page.name,"/visuals/").concat(this.name,"/filters"),vt,{uid:this.page.report.config.uniqueId},this.page.report.iframe.contentWindow)];case 1:return[2,bt.sent()];case 2:throw rt=bt.sent(),rt.body;case 3:return[2]}})})},yt.prototype.exportData=function(vt,rt){return ct(this,void 0,void 0,function(){var bt,ht,wt;return ot(this,function(At){switch(At.label){case 0:bt={rows:rt,exportDataType:vt},At.label=1;case 1:return At.trys.push([1,3,,4]),[4,this.page.report.service.hpm.post("/report/pages/".concat(this.page.name,"/visuals/").concat(this.name,"/exportData"),bt,{uid:this.page.report.config.uniqueId},this.page.report.iframe.contentWindow)];case 2:return ht=At.sent(),[2,ht.body];case 3:throw wt=At.sent(),wt.body;case 4:return[2]}})})},yt.prototype.setSlicerState=function(vt){return ct(this,void 0,void 0,function(){var rt;return ot(this,function(bt){switch(bt.label){case 0:return bt.trys.push([0,2,,3]),[4,this.page.report.service.hpm.put("/report/pages/".concat(this.page.name,"/visuals/").concat(this.name,"/slicer"),vt,{uid:this.page.report.config.uniqueId},this.page.report.iframe.contentWindow)];case 1:return[2,bt.sent()];case 2:throw rt=bt.sent(),rt.body;case 3:return[2]}})})},yt.prototype.getSlicerState=function(){return ct(this,void 0,void 0,function(){var vt,rt;return ot(this,function(bt){switch(bt.label){case 0:return bt.trys.push([0,2,,3]),[4,this.page.report.service.hpm.get("/report/pages/".concat(this.page.name,"/visuals/").concat(this.name,"/slicer"),{uid:this.page.report.config.uniqueId},this.page.report.iframe.contentWindow)];case 1:return vt=bt.sent(),[2,vt.body];case 2:throw rt=bt.sent(),rt.body;case 3:return[2]}})})},yt.prototype.clone=function(vt){return vt===void 0&&(vt={}),ct(this,void 0,void 0,function(){var rt,bt;return ot(this,function(ht){switch(ht.label){case 0:return ht.trys.push([0,2,,3]),[4,this.page.report.service.hpm.post("/report/pages/".concat(this.page.name,"/visuals/").concat(this.name,"/clone"),vt,{uid:this.page.report.config.uniqueId},this.page.report.iframe.contentWindow)];case 1:return rt=ht.sent(),[2,rt.body];case 2:throw bt=ht.sent(),bt.body;case 3:return[2]}})})},yt.prototype.sortBy=function(vt){return ct(this,void 0,void 0,function(){var rt;return ot(this,function(bt){switch(bt.label){case 0:return bt.trys.push([0,2,,3]),[4,this.page.report.service.hpm.put("/report/pages/".concat(this.page.name,"/visuals/").concat(this.name,"/sortBy"),vt,{uid:this.page.report.config.uniqueId},this.page.report.iframe.contentWindow)];case 1:return[2,bt.sent()];case 2:throw rt=bt.sent(),rt.body;case 3:return[2]}})})},yt.prototype.moveVisual=function(vt,rt,bt){return ct(this,void 0,void 0,function(){var ht,wt,At;return ot(this,function(Ct){return ht=this.page.name,wt=this.name,At=this.page.report,[2,At.moveVisual(ht,wt,vt,rt,bt)]})})},yt.prototype.setVisualDisplayState=function(vt){return ct(this,void 0,void 0,function(){var rt,bt,ht;return ot(this,function(wt){return rt=this.page.name,bt=this.name,ht=this.page.report,[2,ht.setVisualDisplayState(rt,bt,vt)]})})},yt.prototype.resizeVisual=function(vt,rt){return ct(this,void 0,void 0,function(){var bt,ht,wt;return ot(this,function(At){return bt=this.page.name,ht=this.name,wt=this.page.report,[2,wt.resizeVisual(bt,ht,vt,rt)]})})},yt.prototype.getSmartNarrativeInsights=function(){return ct(this,void 0,void 0,function(){var vt,rt;return ot(this,function(bt){switch(bt.label){case 0:return bt.trys.push([0,2,,3]),[4,this.page.report.service.hpm.get("/report/pages/".concat(this.page.name,"/visuals/").concat(this.name,"/smartNarrativeInsights"),{uid:this.page.report.config.uniqueId},this.page.report.iframe.contentWindow)];case 1:return vt=bt.sent(),[2,vt.body];case 2:throw rt=bt.sent(),rt.body;case 3:return[2]}})})},yt}();at.VisualDescriptor=ft},"./node_modules/window-post-message-proxy/dist/windowPostMessageProxy.js":et=>{/*! For license information please see windowPostMessageProxy.js.LICENSE.txt */(function(at,st){et.exports=st()})(self,()=>(()=>{var at={};return(()=>{var st=at;Object.defineProperty(st,"__esModule",{value:!0}),st.WindowPostMessageProxy=void 0;var ct=function(){function ot(gt){gt===void 0&&(gt={processTrackingProperties:{addTrackingProperties:ot.defaultAddTrackingProperties,getTrackingProperties:ot.defaultGetTrackingProperties},isErrorMessage:ot.defaultIsErrorMessage,receiveWindow:window,name:ot.createRandomString()});var ft=this;this.pendingRequestPromises={},this.addTrackingProperties=gt.processTrackingProperties&&gt.processTrackingProperties.addTrackingProperties||ot.defaultAddTrackingProperties,this.getTrackingProperties=gt.processTrackingProperties&&gt.processTrackingProperties.getTrackingProperties||ot.defaultGetTrackingProperties,this.isErrorMessage=gt.isErrorMessage||ot.defaultIsErrorMessage,this.receiveWindow=gt.receiveWindow||window,this.name=gt.name||ot.createRandomString(),this.logMessages=gt.logMessages||!1,this.eventSourceOverrideWindow=gt.eventSourceOverrideWindow,this.suppressWarnings=gt.suppressWarnings||!1,this.logMessages&&console.log("new WindowPostMessageProxy created with name: ".concat(this.name," receiving on window: ").concat(this.receiveWindow.document.title)),this.handlers=[],this.windowMessageHandler=function(yt){return ft.onMessageReceived(yt)},this.start()}return ot.defaultAddTrackingProperties=function(gt,ft){return gt[ot.messagePropertyName]=ft,gt},ot.defaultGetTrackingProperties=function(gt){return gt[ot.messagePropertyName]},ot.defaultIsErrorMessage=function(gt){return!!gt.error},ot.createDeferred=function(){var gt={resolve:null,reject:null,promise:null},ft=new Promise(function(yt,vt){gt.resolve=yt,gt.reject=vt});return gt.promise=ft,gt},ot.createRandomString=function(){var gt=window.crypto||window.msCrypto,ft=new Uint32Array(1);return gt.getRandomValues(ft),ft[0].toString(36).substring(1)},ot.prototype.addHandler=function(gt){this.handlers.push(gt)},ot.prototype.removeHandler=function(gt){var ft=this.handlers.indexOf(gt);if(ft===-1)throw new Error("You attempted to remove a handler but no matching handler was found.");this.handlers.splice(ft,1)},ot.prototype.start=function(){this.receiveWindow.addEventListener("message",this.windowMessageHandler)},ot.prototype.stop=function(){this.receiveWindow.removeEventListener("message",this.windowMessageHandler)},ot.prototype.postMessage=function(gt,ft){var yt={id:ot.createRandomString()};this.addTrackingProperties(ft,yt),this.logMessages&&(console.log("".concat(this.name," Posting message:")),console.log(JSON.stringify(ft,null,"  "))),gt.postMessage(ft,"*");var vt=ot.createDeferred();return this.pendingRequestPromises[yt.id]=vt,vt.promise},ot.prototype.sendResponse=function(gt,ft,yt){this.addTrackingProperties(ft,yt),this.logMessages&&(console.log("".concat(this.name," Sending response:")),console.log(JSON.stringify(ft,null,"  "))),gt.postMessage(ft,"*")},ot.prototype.onMessageReceived=function(gt){var ft=this;this.logMessages&&(console.log("".concat(this.name," Received message:")),console.log("type: ".concat(gt.type)),console.log(JSON.stringify(gt.data,null,"  ")));var yt=this.eventSourceOverrideWindow||gt.source;if(yt){var vt=gt.data;if(typeof vt=="object"){var rt,bt;try{rt=this.getTrackingProperties(vt)}catch(wt){this.suppressWarnings||console.warn("Proxy(".concat(this.name,"): Error occurred when attempting to get tracking properties from incoming message:"),JSON.stringify(vt,null,"  "),"Error: ",wt)}if(rt&&(bt=this.pendingRequestPromises[rt.id]),bt){var ht=!0;try{ht=this.isErrorMessage(vt)}catch(wt){console.warn("Proxy(".concat(this.name,") Error occurred when trying to determine if message is consider an error response. Message: "),JSON.stringify(vt,null,""),"Error: ",wt)}ht?bt.reject(vt):bt.resolve(vt),delete this.pendingRequestPromises[rt.id]}else this.handlers.some(function(wt){var At=!1;try{At=wt.test(vt)}catch(dt){ft.suppressWarnings||console.warn("Proxy(".concat(ft.name,"): Error occurred when handler was testing incoming message:"),JSON.stringify(vt,null,"  "),"Error: ",dt)}if(At){var Ct=void 0;try{Ct=Promise.resolve(wt.handle(vt))}catch(dt){ft.suppressWarnings||console.warn("Proxy(".concat(ft.name,"): Error occurred when handler was processing incoming message:"),JSON.stringify(vt,null,"  "),"Error: ",dt),Ct=Promise.resolve()}return Ct.then(function(dt){if(!dt){var Et="Handler for message: ".concat(JSON.stringify(vt,null,"  ")," did not return a response message. The default response message will be returned instead.");ft.suppressWarnings||console.warn("Proxy(".concat(ft.name,"): ").concat(Et)),dt={warning:Et}}ft.sendResponse(yt,dt,rt)}),!0}})||this.suppressWarnings||console.warn("Proxy(".concat(this.name,") did not handle message. Handlers: ").concat(this.handlers.length,"  Message: ").concat(JSON.stringify(vt,null,""),"."))}else this.suppressWarnings||console.warn("Proxy(".concat(this.name,"): Received message that was not an object. Discarding message"))}},ot.messagePropertyName="windowPostMessageProxy",ot}();st.WindowPostMessageProxy=ct})(),at})())}},c={};function j(et){var at=c[et];if(at!==void 0)return at.exports;var st=c[et]={exports:{}};return a[et].call(st.exports,st,st.exports,j),st.exports}var d={};return(()=>{var et=d;/*!*******************************!*\
  !*** ./src/powerbi-client.ts ***!
  \*******************************/Object.defineProperty(et,"__esModule",{value:!0}),et.RelativeTimeFilterBuilder=et.RelativeDateFilterBuilder=et.TopNFilterBuilder=et.AdvancedFilterBuilder=et.BasicFilterBuilder=et.Create=et.QuickCreate=et.VisualDescriptor=et.Visual=et.Qna=et.Page=et.Embed=et.Tile=et.Dashboard=et.Report=et.models=et.factories=et.service=void 0;var at=j("./node_modules/powerbi-models/dist/models.js");et.models=at;var st=j("./src/service.ts");et.service=st;var ct=j("./src/factories.ts");et.factories=ct;var ot=j("./src/report.ts");Object.defineProperty(et,"Report",{enumerable:!0,get:function(){return ot.Report}});var gt=j("./src/dashboard.ts");Object.defineProperty(et,"Dashboard",{enumerable:!0,get:function(){return gt.Dashboard}});var ft=j("./src/tile.ts");Object.defineProperty(et,"Tile",{enumerable:!0,get:function(){return ft.Tile}});var yt=j("./src/embed.ts");Object.defineProperty(et,"Embed",{enumerable:!0,get:function(){return yt.Embed}});var vt=j("./src/page.ts");Object.defineProperty(et,"Page",{enumerable:!0,get:function(){return vt.Page}});var rt=j("./src/qna.ts");Object.defineProperty(et,"Qna",{enumerable:!0,get:function(){return rt.Qna}});var bt=j("./src/visual.ts");Object.defineProperty(et,"Visual",{enumerable:!0,get:function(){return bt.Visual}});var ht=j("./src/visualDescriptor.ts");Object.defineProperty(et,"VisualDescriptor",{enumerable:!0,get:function(){return ht.VisualDescriptor}});var wt=j("./src/quickCreate.ts");Object.defineProperty(et,"QuickCreate",{enumerable:!0,get:function(){return wt.QuickCreate}});var At=j("./src/create.ts");Object.defineProperty(et,"Create",{enumerable:!0,get:function(){return At.Create}});var Ct=j("./src/FilterBuilders/index.ts");Object.defineProperty(et,"BasicFilterBuilder",{enumerable:!0,get:function(){return Ct.BasicFilterBuilder}}),Object.defineProperty(et,"AdvancedFilterBuilder",{enumerable:!0,get:function(){return Ct.AdvancedFilterBuilder}}),Object.defineProperty(et,"TopNFilterBuilder",{enumerable:!0,get:function(){return Ct.TopNFilterBuilder}}),Object.defineProperty(et,"RelativeDateFilterBuilder",{enumerable:!0,get:function(){return Ct.RelativeDateFilterBuilder}}),Object.defineProperty(et,"RelativeTimeFilterBuilder",{enumerable:!0,get:function(){return Ct.RelativeTimeFilterBuilder}});var dt=new st.Service(ct.hpmFactory,ct.wpmpFactory,ct.routerFactory);window.powerbi&&window.powerBISDKGlobalServiceInstanceName?window[window.powerBISDKGlobalServiceInstanceName]=dt:window.powerbi=dt})(),d})())}(powerbi)),powerbi.exports}var powerbiExports=requirePowerbi(),powerbiClientReact={exports:{}},lodash_isequal={exports:{}};lodash_isequal.exports;var hasRequiredLodash_isequal;function requireLodash_isequal(){return hasRequiredLodash_isequal||(hasRequiredLodash_isequal=1,function(o,e){var a=200,c="__lodash_hash_undefined__",j=1,d=2,et=9007199254740991,at="[object Arguments]",st="[object Array]",ct="[object AsyncFunction]",ot="[object Boolean]",gt="[object Date]",ft="[object Error]",yt="[object Function]",vt="[object GeneratorFunction]",rt="[object Map]",bt="[object Number]",ht="[object Null]",wt="[object Object]",At="[object Promise]",Ct="[object Proxy]",dt="[object RegExp]",Et="[object Set]",Rt="[object String]",Mt="[object Symbol]",_t="[object Undefined]",kt="[object WeakMap]",nt="[object ArrayBuffer]",s="[object DataView]",b="[object Float32Array]",$="[object Float64Array]",_e="[object Int8Array]",it="[object Int16Array]",pt="[object Int32Array]",mt="[object Uint8Array]",lt="[object Uint8ClampedArray]",_="[object Uint16Array]",tt="[object Uint32Array]",Tt=/[\\^$.*+?()[\]{}|]/g,It=/^\[object .+?Constructor\]$/,Nt=/^(?:0|[1-9]\d*)$/,Ut={};Ut[b]=Ut[$]=Ut[_e]=Ut[it]=Ut[pt]=Ut[mt]=Ut[lt]=Ut[_]=Ut[tt]=!0,Ut[at]=Ut[st]=Ut[nt]=Ut[ot]=Ut[s]=Ut[gt]=Ut[ft]=Ut[yt]=Ut[rt]=Ut[bt]=Ut[wt]=Ut[dt]=Ut[Et]=Ut[Rt]=Ut[kt]=!1;var Gt=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,Pt=typeof self=="object"&&self&&self.Object===Object&&self,qt=Gt||Pt||Function("return this")(),Kt=e&&!e.nodeType&&e,jt=Kt&&!0&&o&&!o.nodeType&&o,Ht=jt&&jt.exports===Kt,Bt=Ht&&Gt.process,Jt=function(){try{return Bt&&Bt.binding&&Bt.binding("util")}catch{}}(),sr=Jt&&Jt.isTypedArray;function hr(pr,qr){for(var hn=-1,Nn=pr==null?0:pr.length,Eo=0,to=[];++hn<Nn;){var Ro=pr[hn];qr(Ro,hn,pr)&&(to[Eo++]=Ro)}return to}function Ar(pr,qr){for(var hn=-1,Nn=qr.length,Eo=pr.length;++hn<Nn;)pr[Eo+hn]=qr[hn];return pr}function gn(pr,qr){for(var hn=-1,Nn=pr==null?0:pr.length;++hn<Nn;)if(qr(pr[hn],hn,pr))return!0;return!1}function Lr(pr,qr){for(var hn=-1,Nn=Array(pr);++hn<pr;)Nn[hn]=qr(hn);return Nn}function wr(pr){return function(qr){return pr(qr)}}function En(pr,qr){return pr.has(qr)}function Dr(pr,qr){return pr==null?void 0:pr[qr]}function Qr(pr){var qr=-1,hn=Array(pr.size);return pr.forEach(function(Nn,Eo){hn[++qr]=[Eo,Nn]}),hn}function Dn(pr,qr){return function(hn){return pr(qr(hn))}}function Br(pr){var qr=-1,hn=Array(pr.size);return pr.forEach(function(Nn){hn[++qr]=Nn}),hn}var Gr=Array.prototype,Ln=Function.prototype,Fr=Object.prototype,_i=qt["__core-js_shared__"],Kn=Ln.toString,Wt=Fr.hasOwnProperty,Lt=function(){var pr=/[^.]+$/.exec(_i&&_i.keys&&_i.keys.IE_PROTO||"");return pr?"Symbol(src)_1."+pr:""}(),zt=Fr.toString,Zt=RegExp("^"+Kn.call(Wt).replace(Tt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ar=Ht?qt.Buffer:void 0,Or=qt.Symbol,vr=qt.Uint8Array,Rr=Fr.propertyIsEnumerable,fr=Gr.splice,tr=Or?Or.toStringTag:void 0,yr=Object.getOwnPropertySymbols,fn=ar?ar.isBuffer:void 0,Nr=Dn(Object.keys,Object),zr=as(qt,"DataView"),xn=as(qt,"Map"),Kr=as(qt,"Promise"),nn=as(qt,"Set"),Wn=as(qt,"WeakMap"),Zr=as(Object,"create"),on=ds(zr),Xn=ds(xn),en=ds(Kr),ln=ds(nn),Zn=ds(Wn),$t=Or?Or.prototype:void 0,or=$t?$t.valueOf:void 0;function Yr(pr){var qr=-1,hn=pr==null?0:pr.length;for(this.clear();++qr<hn;){var Nn=pr[qr];this.set(Nn[0],Nn[1])}}function Vr(){this.__data__=Zr?Zr(null):{},this.size=0}function Hr(pr){var qr=this.has(pr)&&delete this.__data__[pr];return this.size-=qr?1:0,qr}function Mn(pr){var qr=this.__data__;if(Zr){var hn=qr[pr];return hn===c?void 0:hn}return Wt.call(qr,pr)?qr[pr]:void 0}function Ur(pr){var qr=this.__data__;return Zr?qr[pr]!==void 0:Wt.call(qr,pr)}function tn(pr,qr){var hn=this.__data__;return this.size+=this.has(pr)?0:1,hn[pr]=Zr&&qr===void 0?c:qr,this}Yr.prototype.clear=Vr,Yr.prototype.delete=Hr,Yr.prototype.get=Mn,Yr.prototype.has=Ur,Yr.prototype.set=tn;function jn(pr){var qr=-1,hn=pr==null?0:pr.length;for(this.clear();++qr<hn;){var Nn=pr[qr];this.set(Nn[0],Nn[1])}}function Un(){this.__data__=[],this.size=0}function ao(pr){var qr=this.__data__,hn=Yn(qr,pr);if(hn<0)return!1;var Nn=qr.length-1;return hn==Nn?qr.pop():fr.call(qr,hn,1),--this.size,!0}function co(pr){var qr=this.__data__,hn=Yn(qr,pr);return hn<0?void 0:qr[hn][1]}function ro(pr){return Yn(this.__data__,pr)>-1}function vo(pr,qr){var hn=this.__data__,Nn=Yn(hn,pr);return Nn<0?(++this.size,hn.push([pr,qr])):hn[Nn][1]=qr,this}jn.prototype.clear=Un,jn.prototype.delete=ao,jn.prototype.get=co,jn.prototype.has=ro,jn.prototype.set=vo;function oo(pr){var qr=-1,hn=pr==null?0:pr.length;for(this.clear();++qr<hn;){var Nn=pr[qr];this.set(Nn[0],Nn[1])}}function mo(){this.size=0,this.__data__={hash:new Yr,map:new(xn||jn),string:new Yr}}function ho(pr){var qr=Go(this,pr).delete(pr);return this.size-=qr?1:0,qr}function go(pr){return Go(this,pr).get(pr)}function bo(pr){return Go(this,pr).has(pr)}function ur(pr,qr){var hn=Go(this,pr),Nn=hn.size;return hn.set(pr,qr),this.size+=hn.size==Nn?0:1,this}oo.prototype.clear=mo,oo.prototype.delete=ho,oo.prototype.get=go,oo.prototype.has=bo,oo.prototype.set=ur;function Cr(pr){var qr=-1,hn=pr==null?0:pr.length;for(this.__data__=new oo;++qr<hn;)this.add(pr[qr])}function $r(pr){return this.__data__.set(pr,c),this}function dn(pr){return this.__data__.has(pr)}Cr.prototype.add=Cr.prototype.push=$r,Cr.prototype.has=dn;function rn(pr){var qr=this.__data__=new jn(pr);this.size=qr.size}function Sn(){this.__data__=new jn,this.size=0}function In(pr){var qr=this.__data__,hn=qr.delete(pr);return this.size=qr.size,hn}function Cn(pr){return this.__data__.get(pr)}function qn(pr){return this.__data__.has(pr)}function Vn(pr,qr){var hn=this.__data__;if(hn instanceof jn){var Nn=hn.__data__;if(!xn||Nn.length<a-1)return Nn.push([pr,qr]),this.size=++hn.size,this;hn=this.__data__=new oo(Nn)}return hn.set(pr,qr),this.size=hn.size,this}rn.prototype.clear=Sn,rn.prototype.delete=In,rn.prototype.get=Cn,rn.prototype.has=qn,rn.prototype.set=Vn;function Hn(pr,qr){var hn=Cs(pr),Nn=!hn&&Us(pr),Eo=!hn&&!Nn&&vs(pr),to=!hn&&!Nn&&!Eo&&Ts(pr),Ro=hn||Nn||Eo||to,Io=Ro?Lr(pr.length,String):[],ko=Io.length;for(var _o in pr)Wt.call(pr,_o)&&!(Ro&&(_o=="length"||Eo&&(_o=="offset"||_o=="parent")||to&&(_o=="buffer"||_o=="byteLength"||_o=="byteOffset")||El(_o,ko)))&&Io.push(_o);return Io}function Yn(pr,qr){for(var hn=pr.length;hn--;)if(Tl(pr[hn][0],qr))return hn;return-1}function Ao(pr,qr,hn){var Nn=qr(pr);return Cs(pr)?Nn:Ar(Nn,hn(pr))}function uo(pr){return pr==null?pr===void 0?_t:ht:tr&&tr in Object(pr)?Sl(pr):js(pr)}function Fo(pr){return gs(pr)&&uo(pr)==at}function Es(pr,qr,hn,Nn,Eo){return pr===qr?!0:pr==null||qr==null||!gs(pr)&&!gs(qr)?pr!==pr&&qr!==qr:Fs(pr,qr,hn,Nn,Es,Eo)}function Fs(pr,qr,hn,Nn,Eo,to){var Ro=Cs(pr),Io=Cs(qr),ko=Ro?st:ss(pr),_o=Io?st:ss(qr);ko=ko==at?wt:ko,_o=_o==at?wt:_o;var Lo=ko==wt,$o=_o==wt,No=ko==_o;if(No&&vs(pr)){if(!vs(qr))return!1;Ro=!0,Lo=!1}if(No&&!Lo)return to||(to=new rn),Ro||Ts(pr)?$s(pr,qr,hn,Nn,Eo,to):qs(pr,qr,ko,hn,Nn,Eo,to);if(!(hn&j)){var Ho=Lo&&Wt.call(pr,"__wrapped__"),Bo=$o&&Wt.call(qr,"__wrapped__");if(Ho||Bo){var ga=Ho?pr.value():pr,Xo=Bo?qr.value():qr;return to||(to=new rn),Eo(ga,Xo,hn,Nn,to)}}return No?(to||(to=new rn),Oo(pr,qr,hn,Nn,Eo,to)):!1}function Uo(pr){if(!Ks(pr)||_s(pr))return!1;var qr=Ps(pr)?Zt:It;return qr.test(ds(pr))}function wl(pr){return gs(pr)&&zs(pr.length)&&!!Ut[uo(pr)]}function rs(pr){if(!Cl(pr))return Nr(pr);var qr=[];for(var hn in Object(pr))Wt.call(pr,hn)&&hn!="constructor"&&qr.push(hn);return qr}function $s(pr,qr,hn,Nn,Eo,to){var Ro=hn&j,Io=pr.length,ko=qr.length;if(Io!=ko&&!(Ro&&ko>Io))return!1;var _o=to.get(pr);if(_o&&to.get(qr))return _o==qr;var Lo=-1,$o=!0,No=hn&d?new Cr:void 0;for(to.set(pr,qr),to.set(qr,pr);++Lo<Io;){var Ho=pr[Lo],Bo=qr[Lo];if(Nn)var ga=Ro?Nn(Bo,Ho,Lo,qr,pr,to):Nn(Ho,Bo,Lo,pr,qr,to);if(ga!==void 0){if(ga)continue;$o=!1;break}if(No){if(!gn(qr,function(Xo,er){if(!En(No,er)&&(Ho===Xo||Eo(Ho,Xo,hn,Nn,to)))return No.push(er)})){$o=!1;break}}else if(!(Ho===Bo||Eo(Ho,Bo,hn,Nn,to))){$o=!1;break}}return to.delete(pr),to.delete(qr),$o}function qs(pr,qr,hn,Nn,Eo,to,Ro){switch(hn){case s:if(pr.byteLength!=qr.byteLength||pr.byteOffset!=qr.byteOffset)return!1;pr=pr.buffer,qr=qr.buffer;case nt:return!(pr.byteLength!=qr.byteLength||!to(new vr(pr),new vr(qr)));case ot:case gt:case bt:return Tl(+pr,+qr);case ft:return pr.name==qr.name&&pr.message==qr.message;case dt:case Rt:return pr==qr+"";case rt:var Io=Qr;case Et:var ko=Nn&j;if(Io||(Io=Br),pr.size!=qr.size&&!ko)return!1;var _o=Ro.get(pr);if(_o)return _o==qr;Nn|=d,Ro.set(pr,qr);var Lo=$s(Io(pr),Io(qr),Nn,Eo,to,Ro);return Ro.delete(pr),Lo;case Mt:if(or)return or.call(pr)==or.call(qr)}return!1}function Oo(pr,qr,hn,Nn,Eo,to){var Ro=hn&j,Io=ns(pr),ko=Io.length,_o=ns(qr),Lo=_o.length;if(ko!=Lo&&!Ro)return!1;for(var $o=ko;$o--;){var No=Io[$o];if(!(Ro?No in qr:Wt.call(qr,No)))return!1}var Ho=to.get(pr);if(Ho&&to.get(qr))return Ho==qr;var Bo=!0;to.set(pr,qr),to.set(qr,pr);for(var ga=Ro;++$o<ko;){No=Io[$o];var Xo=pr[No],er=qr[No];if(Nn)var Pr=Ro?Nn(er,Xo,No,qr,pr,to):Nn(Xo,er,No,pr,qr,to);if(!(Pr===void 0?Xo===er||Eo(Xo,er,hn,Nn,to):Pr)){Bo=!1;break}ga||(ga=No=="constructor")}if(Bo&&!ga){var xr=pr.constructor,jr=qr.constructor;xr!=jr&&"constructor"in pr&&"constructor"in qr&&!(typeof xr=="function"&&xr instanceof xr&&typeof jr=="function"&&jr instanceof jr)&&(Bo=!1)}return to.delete(pr),to.delete(qr),Bo}function ns(pr){return Ao(pr,Gl,Al)}function Go(pr,qr){var hn=pr.__data__;return _l(qr)?hn[typeof qr=="string"?"string":"hash"]:hn.map}function as(pr,qr){var hn=Dr(pr,qr);return Uo(hn)?hn:void 0}function Sl(pr){var qr=Wt.call(pr,tr),hn=pr[tr];try{pr[tr]=void 0;var Nn=!0}catch{}var Eo=zt.call(pr);return Nn&&(qr?pr[tr]=hn:delete pr[tr]),Eo}var Al=yr?function(pr){return pr==null?[]:(pr=Object(pr),hr(yr(pr),function(qr){return Rr.call(pr,qr)}))}:Rl,ss=uo;(zr&&ss(new zr(new ArrayBuffer(1)))!=s||xn&&ss(new xn)!=rt||Kr&&ss(Kr.resolve())!=At||nn&&ss(new nn)!=Et||Wn&&ss(new Wn)!=kt)&&(ss=function(pr){var qr=uo(pr),hn=qr==wt?pr.constructor:void 0,Nn=hn?ds(hn):"";if(Nn)switch(Nn){case on:return s;case Xn:return rt;case en:return At;case ln:return Et;case Zn:return kt}return qr});function El(pr,qr){return qr=qr??et,!!qr&&(typeof pr=="number"||Nt.test(pr))&&pr>-1&&pr%1==0&&pr<qr}function _l(pr){var qr=typeof pr;return qr=="string"||qr=="number"||qr=="symbol"||qr=="boolean"?pr!=="__proto__":pr===null}function _s(pr){return!!Lt&&Lt in pr}function Cl(pr){var qr=pr&&pr.constructor,hn=typeof qr=="function"&&qr.prototype||Fr;return pr===hn}function js(pr){return zt.call(pr)}function ds(pr){if(pr!=null){try{return Kn.call(pr)}catch{}try{return pr+""}catch{}}return""}function Tl(pr,qr){return pr===qr||pr!==pr&&qr!==qr}var Us=Fo(function(){return arguments}())?Fo:function(pr){return gs(pr)&&Wt.call(pr,"callee")&&!Rr.call(pr,"callee")},Cs=Array.isArray;function Hs(pr){return pr!=null&&zs(pr.length)&&!Ps(pr)}var vs=fn||Jo;function Ml(pr,qr){return Es(pr,qr)}function Ps(pr){if(!Ks(pr))return!1;var qr=uo(pr);return qr==yt||qr==vt||qr==ct||qr==Ct}function zs(pr){return typeof pr=="number"&&pr>-1&&pr%1==0&&pr<=et}function Ks(pr){var qr=typeof pr;return pr!=null&&(qr=="object"||qr=="function")}function gs(pr){return pr!=null&&typeof pr=="object"}var Ts=sr?wr(sr):wl;function Gl(pr){return Hs(pr)?Hn(pr):rs(pr)}function Rl(){return[]}function Jo(){return!1}o.exports=Ml}(lodash_isequal,lodash_isequal.exports)),lodash_isequal.exports}(function(o,e){(function(a,c){o.exports=c(reactExports,requirePowerbi(),requireLodash_isequal())})(self,(a,c,j)=>(()=>{var d={149:function(ct){var ot;ot=()=>(()=>{var gt=[function(vt,rt,bt){var ht,wt=this&&this.__extends||(ht=function(fr,tr){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(yr,fn){yr.__proto__=fn}||function(yr,fn){for(var Nr in fn)Object.prototype.hasOwnProperty.call(fn,Nr)&&(yr[Nr]=fn[Nr])},ht(fr,tr)},function(fr,tr){if(typeof tr!="function"&&tr!==null)throw new TypeError("Class extends value "+String(tr)+" is not a constructor or null");function yr(){this.constructor=fr}ht(fr,tr),fr.prototype=tr===null?Object.create(tr):(yr.prototype=tr.prototype,new yr)});Object.defineProperty(rt,"__esModule",{value:!0}),rt.TextAlignment=rt.CommonErrorCodes=rt.BookmarksPlayMode=rt.ExportDataType=rt.QnaMode=rt.PageNavigationPosition=rt.BrowserPrintAdjustmentsMode=rt.AggregateFunction=rt.DataCacheMode=rt.CredentialType=rt.isPercentOfGrandTotal=rt.isColumnAggr=rt.isHierarchyLevelAggr=rt.isHierarchyLevel=rt.isColumn=rt.isMeasure=rt.getFilterType=rt.isBasicFilterWithKeys=rt.isFilterKeyColumnsTarget=rt.HierarchyFilter=rt.AdvancedFilter=rt.TupleFilter=rt.IdentityFilter=rt.BasicFilterWithKeys=rt.BasicFilter=rt.RelativeTimeFilter=rt.RelativeDateFilter=rt.TopNFilter=rt.IncludeExcludeFilter=rt.NotSupportedFilter=rt.Filter=rt.RelativeDateOperators=rt.RelativeDateFilterTimeUnit=rt.FilterType=rt.FiltersLevel=rt.FiltersOperations=rt.MenuLocation=rt.ContrastMode=rt.TokenType=rt.ViewMode=rt.Permissions=rt.SectionVisibility=rt.ReportAlignment=rt.HyperlinkClickBehavior=rt.LayoutType=rt.VisualContainerDisplayMode=rt.BackgroundType=rt.DisplayOption=rt.PageSizeType=rt.TraceType=void 0,rt.validateVisualHeader=rt.validateExportDataRequest=rt.validateQnaInterpretInputData=rt.validateLoadQnaConfiguration=rt.validateSaveAsParameters=rt.validateUpdateFiltersRequest=rt.validateFilter=rt.validatePage=rt.validateTileLoad=rt.validateDashboardLoad=rt.validateQuickCreate=rt.validateCreateReport=rt.validatePaginatedReportLoad=rt.validateReportLoad=rt.validateMenuGroupExtension=rt.validateExtension=rt.validateCustomPageSize=rt.validateVisualizationsPane=rt.validateSyncSlicersPane=rt.validateSelectionPane=rt.validatePageNavigationPane=rt.validateFieldsPane=rt.validateFiltersPane=rt.validateBookmarksPane=rt.validatePanes=rt.validateSettings=rt.validateCaptureBookmarkRequest=rt.validateApplyBookmarkStateRequest=rt.validateApplyBookmarkByNameRequest=rt.validateAddBookmarkRequest=rt.validatePlayBookmarkRequest=rt.validateSlicerState=rt.validateSlicer=rt.validateVisualSelector=rt.isIExtensionArray=rt.isIExtensions=rt.isGroupedMenuExtension=rt.isFlatMenuExtension=rt.isReportFiltersArray=rt.isOnLoadFilters=rt.VisualDataRoleKindPreference=rt.VisualDataRoleKind=rt.CommandDisplayOption=rt.SlicerTargetSelector=rt.VisualTypeSelector=rt.VisualSelector=rt.PageSelector=rt.Selector=rt.SortDirection=rt.LegendPosition=void 0,rt.validatePrintSettings=rt.validateZoomLevel=rt.validateCustomTheme=rt.validateCommandsSettings=rt.validateVisualSettings=void 0;var At,Ct,dt,Et,Rt,Mt,_t,kt,nt,s,b,$,_e,it,pt,mt,lt,_,tt,Tt=bt(1);(tt=rt.TraceType||(rt.TraceType={}))[tt.Information=0]="Information",tt[tt.Verbose=1]="Verbose",tt[tt.Warning=2]="Warning",tt[tt.Error=3]="Error",tt[tt.ExpectedError=4]="ExpectedError",tt[tt.UnexpectedError=5]="UnexpectedError",tt[tt.Fatal=6]="Fatal",(_=rt.PageSizeType||(rt.PageSizeType={}))[_.Widescreen=0]="Widescreen",_[_.Standard=1]="Standard",_[_.Cortana=2]="Cortana",_[_.Letter=3]="Letter",_[_.Custom=4]="Custom",_[_.Mobile=5]="Mobile",(lt=rt.DisplayOption||(rt.DisplayOption={}))[lt.FitToPage=0]="FitToPage",lt[lt.FitToWidth=1]="FitToWidth",lt[lt.ActualSize=2]="ActualSize",(mt=rt.BackgroundType||(rt.BackgroundType={}))[mt.Default=0]="Default",mt[mt.Transparent=1]="Transparent",(pt=rt.VisualContainerDisplayMode||(rt.VisualContainerDisplayMode={}))[pt.Visible=0]="Visible",pt[pt.Hidden=1]="Hidden",(it=rt.LayoutType||(rt.LayoutType={}))[it.Master=0]="Master",it[it.Custom=1]="Custom",it[it.MobilePortrait=2]="MobilePortrait",it[it.MobileLandscape=3]="MobileLandscape",(_e=rt.HyperlinkClickBehavior||(rt.HyperlinkClickBehavior={}))[_e.Navigate=0]="Navigate",_e[_e.NavigateAndRaiseEvent=1]="NavigateAndRaiseEvent",_e[_e.RaiseEvent=2]="RaiseEvent",($=rt.ReportAlignment||(rt.ReportAlignment={}))[$.Left=0]="Left",$[$.Center=1]="Center",$[$.Right=2]="Right",$[$.None=3]="None",(b=rt.SectionVisibility||(rt.SectionVisibility={}))[b.AlwaysVisible=0]="AlwaysVisible",b[b.HiddenInViewMode=1]="HiddenInViewMode",(s=rt.Permissions||(rt.Permissions={}))[s.Read=0]="Read",s[s.ReadWrite=1]="ReadWrite",s[s.Copy=2]="Copy",s[s.Create=4]="Create",s[s.All=7]="All",(nt=rt.ViewMode||(rt.ViewMode={}))[nt.View=0]="View",nt[nt.Edit=1]="Edit",(kt=rt.TokenType||(rt.TokenType={}))[kt.Aad=0]="Aad",kt[kt.Embed=1]="Embed",(_t=rt.ContrastMode||(rt.ContrastMode={}))[_t.None=0]="None",_t[_t.HighContrast1=1]="HighContrast1",_t[_t.HighContrast2=2]="HighContrast2",_t[_t.HighContrastBlack=3]="HighContrastBlack",_t[_t.HighContrastWhite=4]="HighContrastWhite",(Mt=rt.MenuLocation||(rt.MenuLocation={}))[Mt.Bottom=0]="Bottom",Mt[Mt.Top=1]="Top",(Rt=rt.FiltersOperations||(rt.FiltersOperations={}))[Rt.RemoveAll=0]="RemoveAll",Rt[Rt.ReplaceAll=1]="ReplaceAll",Rt[Rt.Add=2]="Add",Rt[Rt.Replace=3]="Replace",(Et=rt.FiltersLevel||(rt.FiltersLevel={}))[Et.Report=0]="Report",Et[Et.Page=1]="Page",Et[Et.Visual=2]="Visual",function(fr){fr[fr.Advanced=0]="Advanced",fr[fr.Basic=1]="Basic",fr[fr.Unknown=2]="Unknown",fr[fr.IncludeExclude=3]="IncludeExclude",fr[fr.RelativeDate=4]="RelativeDate",fr[fr.TopN=5]="TopN",fr[fr.Tuple=6]="Tuple",fr[fr.RelativeTime=7]="RelativeTime",fr[fr.Identity=8]="Identity",fr[fr.Hierarchy=9]="Hierarchy"}(At=rt.FilterType||(rt.FilterType={})),(dt=rt.RelativeDateFilterTimeUnit||(rt.RelativeDateFilterTimeUnit={}))[dt.Days=0]="Days",dt[dt.Weeks=1]="Weeks",dt[dt.CalendarWeeks=2]="CalendarWeeks",dt[dt.Months=3]="Months",dt[dt.CalendarMonths=4]="CalendarMonths",dt[dt.Years=5]="Years",dt[dt.CalendarYears=6]="CalendarYears",dt[dt.Minutes=7]="Minutes",dt[dt.Hours=8]="Hours",(Ct=rt.RelativeDateOperators||(rt.RelativeDateOperators={}))[Ct.InLast=0]="InLast",Ct[Ct.InThis=1]="InThis",Ct[Ct.InNext=2]="InNext";var It=function(){function fr(tr,yr){this.target=tr,this.filterType=yr}return fr.prototype.toJSON=function(){var tr={$schema:this.schemaUrl,target:this.target,filterType:this.filterType};return this.displaySettings!==void 0&&(tr.displaySettings=this.displaySettings),tr},fr}();rt.Filter=It;var Nt=function(fr){function tr(yr,fn,Nr){var zr=fr.call(this,yr,At.Unknown)||this;return zr.message=fn,zr.notSupportedTypeName=Nr,zr.schemaUrl=tr.schemaUrl,zr}return wt(tr,fr),tr.prototype.toJSON=function(){var yr=fr.prototype.toJSON.call(this);return yr.message=this.message,yr.notSupportedTypeName=this.notSupportedTypeName,yr},tr.schemaUrl="http://powerbi.com/product/schema#notSupported",tr}(It);rt.NotSupportedFilter=Nt;var Ut=function(fr){function tr(yr,fn,Nr){var zr=fr.call(this,yr,At.IncludeExclude)||this;return zr.values=Nr,zr.isExclude=fn,zr.schemaUrl=tr.schemaUrl,zr}return wt(tr,fr),tr.prototype.toJSON=function(){var yr=fr.prototype.toJSON.call(this);return yr.isExclude=this.isExclude,yr.values=this.values,yr},tr.schemaUrl="http://powerbi.com/product/schema#includeExclude",tr}(It);rt.IncludeExcludeFilter=Ut;var Gt=function(fr){function tr(yr,fn,Nr,zr){var xn=fr.call(this,yr,At.TopN)||this;return xn.operator=fn,xn.itemCount=Nr,xn.schemaUrl=tr.schemaUrl,xn.orderBy=zr,xn}return wt(tr,fr),tr.prototype.toJSON=function(){var yr=fr.prototype.toJSON.call(this);return yr.operator=this.operator,yr.itemCount=this.itemCount,yr.orderBy=this.orderBy,yr},tr.schemaUrl="http://powerbi.com/product/schema#topN",tr}(It);rt.TopNFilter=Gt;var Pt=function(fr){function tr(yr,fn,Nr,zr,xn){var Kr=fr.call(this,yr,At.RelativeDate)||this;return Kr.operator=fn,Kr.timeUnitsCount=Nr,Kr.timeUnitType=zr,Kr.includeToday=xn,Kr.schemaUrl=tr.schemaUrl,Kr}return wt(tr,fr),tr.prototype.toJSON=function(){var yr=fr.prototype.toJSON.call(this);return yr.operator=this.operator,yr.timeUnitsCount=this.timeUnitsCount,yr.timeUnitType=this.timeUnitType,yr.includeToday=this.includeToday,yr},tr.schemaUrl="http://powerbi.com/product/schema#relativeDate",tr}(It);rt.RelativeDateFilter=Pt;var qt=function(fr){function tr(yr,fn,Nr,zr){var xn=fr.call(this,yr,At.RelativeTime)||this;return xn.operator=fn,xn.timeUnitsCount=Nr,xn.timeUnitType=zr,xn.schemaUrl=tr.schemaUrl,xn}return wt(tr,fr),tr.prototype.toJSON=function(){var yr=fr.prototype.toJSON.call(this);return yr.operator=this.operator,yr.timeUnitsCount=this.timeUnitsCount,yr.timeUnitType=this.timeUnitType,yr},tr.schemaUrl="http://powerbi.com/product/schema#relativeTime",tr}(It);rt.RelativeTimeFilter=qt;var Kt=function(fr){function tr(yr,fn){for(var Nr=[],zr=2;zr<arguments.length;zr++)Nr[zr-2]=arguments[zr];var xn=fr.call(this,yr,At.Basic)||this;if(xn.operator=fn,xn.schemaUrl=tr.schemaUrl,Nr.length===0&&fn!=="All")throw new Error('values must be a non-empty array unless your operator is "All".');return Array.isArray(Nr[0])?xn.values=Nr[0]:xn.values=Nr,xn}return wt(tr,fr),tr.prototype.toJSON=function(){var yr=fr.prototype.toJSON.call(this);return yr.operator=this.operator,yr.values=this.values,yr.requireSingleSelection=!!this.requireSingleSelection,yr},tr.schemaUrl="http://powerbi.com/product/schema#basic",tr}(It);rt.BasicFilter=Kt;var jt=function(fr){function tr(yr,fn,Nr,zr){var xn=fr.call(this,yr,fn,Nr)||this;xn.keyValues=zr,xn.target=yr;var Kr=yr.keys?yr.keys.length:0;if(Kr>0&&!zr)throw new Error("You should pass the values to be filtered for each key. You passed: no values and ".concat(Kr," keys"));if(Kr===0&&zr&&zr.length>0)throw new Error("You passed key values but your target object doesn't contain the keys to be filtered");for(var nn=0,Wn=xn.keyValues;nn<Wn.length;nn++){var Zr=Wn[nn];if(Zr){var on=Zr.length;if(on!==Kr)throw new Error("Each tuple of key values should contain a value for each of the keys. You passed: ".concat(on," values and ").concat(Kr," keys"))}}return xn}return wt(tr,fr),tr.prototype.toJSON=function(){var yr=fr.prototype.toJSON.call(this);return yr.keyValues=this.keyValues,yr},tr}(Kt);rt.BasicFilterWithKeys=jt;var Ht=function(fr){function tr(yr,fn){var Nr=fr.call(this,yr,At.Identity)||this;return Nr.operator=fn,Nr.schemaUrl=tr.schemaUrl,Nr}return wt(tr,fr),tr.prototype.toJSON=function(){var yr=fr.prototype.toJSON.call(this);return yr.operator=this.operator,yr.target=this.target,yr},tr.schemaUrl="http://powerbi.com/product/schema#identity",tr}(It);rt.IdentityFilter=Ht;var Bt=function(fr){function tr(yr,fn,Nr){var zr=fr.call(this,yr,At.Tuple)||this;return zr.operator=fn,zr.schemaUrl=tr.schemaUrl,zr.values=Nr,zr}return wt(tr,fr),tr.prototype.toJSON=function(){var yr=fr.prototype.toJSON.call(this);return yr.operator=this.operator,yr.values=this.values,yr.target=this.target,yr},tr.schemaUrl="http://powerbi.com/product/schema#tuple",tr}(It);rt.TupleFilter=Bt;var Jt=function(fr){function tr(yr,fn){for(var Nr=[],zr=2;zr<arguments.length;zr++)Nr[zr-2]=arguments[zr];var xn,Kr=fr.call(this,yr,At.Advanced)||this;if(Kr.schemaUrl=tr.schemaUrl,typeof fn!="string"||fn.length===0)throw new Error("logicalOperator must be a valid operator, You passed: ".concat(fn));if(Kr.logicalOperator=fn,(xn=Array.isArray(Nr[0])?Nr[0]:Nr).length>2)throw new Error("AdvancedFilters may not have more than two conditions. You passed: ".concat(Nr.length));if(xn.length===1&&fn!=="And")throw new Error('Logical Operator must be "And" when there is only one condition provided');return Kr.conditions=xn,Kr}return wt(tr,fr),tr.prototype.toJSON=function(){var yr=fr.prototype.toJSON.call(this);return yr.logicalOperator=this.logicalOperator,yr.conditions=this.conditions,yr},tr.schemaUrl="http://powerbi.com/product/schema#advanced",tr}(It);rt.AdvancedFilter=Jt;var sr,hr,Ar,gn,Lr,wr,En,Dr,Qr,Dn=function(fr){function tr(yr,fn){var Nr=fr.call(this,yr,At.Hierarchy)||this;return Nr.schemaUrl=tr.schemaUrl,Nr.hierarchyData=fn,Nr}return wt(tr,fr),tr.prototype.toJSON=function(){var yr=fr.prototype.toJSON.call(this);return yr.hierarchyData=this.hierarchyData,yr.target=this.target,yr},tr.schemaUrl="http://powerbi.com/product/schema#hierarchy",tr}(It);function Br(fr){if(fr.filterType)return fr.filterType;var tr=fr,yr=fr;return typeof tr.operator=="string"&&Array.isArray(tr.values)?At.Basic:typeof yr.logicalOperator=="string"&&Array.isArray(yr.conditions)?At.Advanced:At.Unknown}function Gr(fr){return!(!fr.table||!fr.column||fr.aggregationFunction)}rt.HierarchyFilter=Dn,rt.isFilterKeyColumnsTarget=function(fr){return Gr(fr)&&!!fr.keys},rt.isBasicFilterWithKeys=function(fr){return Br(fr)===At.Basic&&!!fr.keyValues},rt.getFilterType=Br,rt.isMeasure=function(fr){return fr.table!==void 0&&fr.measure!==void 0},rt.isColumn=Gr,rt.isHierarchyLevel=function(fr){return!(!(fr.table&&fr.hierarchy&&fr.hierarchyLevel)||fr.aggregationFunction)},rt.isHierarchyLevelAggr=function(fr){return!!(fr.table&&fr.hierarchy&&fr.hierarchyLevel&&fr.aggregationFunction)},rt.isColumnAggr=function(fr){return!!(fr.table&&fr.column&&fr.aggregationFunction)},rt.isPercentOfGrandTotal=function(fr){return!!fr.percentOfGrandTotal},(Qr=rt.CredentialType||(rt.CredentialType={}))[Qr.NoConnection=0]="NoConnection",Qr[Qr.OnBehalfOf=1]="OnBehalfOf",Qr[Qr.Anonymous=2]="Anonymous",(Dr=rt.DataCacheMode||(rt.DataCacheMode={}))[Dr.Import=0]="Import",Dr[Dr.DirectQuery=1]="DirectQuery",(En=rt.AggregateFunction||(rt.AggregateFunction={}))[En.Default=1]="Default",En[En.None=2]="None",En[En.Sum=3]="Sum",En[En.Min=4]="Min",En[En.Max=5]="Max",En[En.Count=6]="Count",En[En.Average=7]="Average",En[En.DistinctCount=8]="DistinctCount",(wr=rt.BrowserPrintAdjustmentsMode||(rt.BrowserPrintAdjustmentsMode={}))[wr.Default=0]="Default",wr[wr.NoAdjustments=1]="NoAdjustments",(Lr=rt.PageNavigationPosition||(rt.PageNavigationPosition={}))[Lr.Bottom=0]="Bottom",Lr[Lr.Left=1]="Left",(gn=rt.QnaMode||(rt.QnaMode={}))[gn.Interactive=0]="Interactive",gn[gn.ResultOnly=1]="ResultOnly",(Ar=rt.ExportDataType||(rt.ExportDataType={}))[Ar.Summarized=0]="Summarized",Ar[Ar.Underlying=1]="Underlying",(hr=rt.BookmarksPlayMode||(rt.BookmarksPlayMode={}))[hr.Off=0]="Off",hr[hr.Presentation=1]="Presentation",rt.CommonErrorCodes={TokenExpired:"TokenExpired",NotFound:"PowerBIEntityNotFound",InvalidParameters:"Invalid parameters",LoadReportFailed:"LoadReportFailed",NotAuthorized:"PowerBINotAuthorizedException",FailedToLoadModel:"ExplorationContainer_FailedToLoadModel_DefaultDetails"},rt.TextAlignment={Left:"left",Center:"center",Right:"right"},rt.LegendPosition={Top:"Top",Bottom:"Bottom",Right:"Right",Left:"Left",TopCenter:"TopCenter",BottomCenter:"BottomCenter",RightCenter:"RightCenter",LeftCenter:"LeftCenter"},(sr=rt.SortDirection||(rt.SortDirection={}))[sr.Ascending=1]="Ascending",sr[sr.Descending=2]="Descending";var Ln=function(){function fr(tr){this.$schema=tr}return fr.prototype.toJSON=function(){return{$schema:this.$schema}},fr}();rt.Selector=Ln;var Fr=function(fr){function tr(yr){var fn=fr.call(this,tr.schemaUrl)||this;return fn.pageName=yr,fn}return wt(tr,fr),tr.prototype.toJSON=function(){var yr=fr.prototype.toJSON.call(this);return yr.pageName=this.pageName,yr},tr.schemaUrl="http://powerbi.com/product/schema#pageSelector",tr}(Ln);rt.PageSelector=Fr;var _i=function(fr){function tr(yr){var fn=fr.call(this,tr.schemaUrl)||this;return fn.visualName=yr,fn}return wt(tr,fr),tr.prototype.toJSON=function(){var yr=fr.prototype.toJSON.call(this);return yr.visualName=this.visualName,yr},tr.schemaUrl="http://powerbi.com/product/schema#visualSelector",tr}(Ln);rt.VisualSelector=_i;var Kn=function(fr){function tr(yr){var fn=fr.call(this,_i.schemaUrl)||this;return fn.visualType=yr,fn}return wt(tr,fr),tr.prototype.toJSON=function(){var yr=fr.prototype.toJSON.call(this);return yr.visualType=this.visualType,yr},tr.schemaUrl="http://powerbi.com/product/schema#visualTypeSelector",tr}(Ln);rt.VisualTypeSelector=Kn;var Wt,Lt,zt,Zt=function(fr){function tr(yr){var fn=fr.call(this,_i.schemaUrl)||this;return fn.target=yr,fn}return wt(tr,fr),tr.prototype.toJSON=function(){var yr=fr.prototype.toJSON.call(this);return yr.target=this.target,yr},tr.schemaUrl="http://powerbi.com/product/schema#slicerTargetSelector",tr}(Ln);function ar(fr){return Array.isArray(fr)}function Or(fr){return fr&&!!fr.groupName}function vr(fr){return Array.isArray(fr)}function Rr(fr){var tr=fr.message;return tr||(tr="".concat(fr.path," is invalid. Not meeting ").concat(fr.keyword," constraint")),{message:tr}}rt.SlicerTargetSelector=Zt,(zt=rt.CommandDisplayOption||(rt.CommandDisplayOption={}))[zt.Enabled=0]="Enabled",zt[zt.Disabled=1]="Disabled",zt[zt.Hidden=2]="Hidden",(Lt=rt.VisualDataRoleKind||(rt.VisualDataRoleKind={}))[Lt.Grouping=0]="Grouping",Lt[Lt.Measure=1]="Measure",Lt[Lt.GroupingOrMeasure=2]="GroupingOrMeasure",(Wt=rt.VisualDataRoleKindPreference||(rt.VisualDataRoleKindPreference={}))[Wt.Measure=0]="Measure",Wt[Wt.Grouping=1]="Grouping",rt.isOnLoadFilters=function(fr){return fr&&!ar(fr)},rt.isReportFiltersArray=ar,rt.isFlatMenuExtension=function(fr){return fr&&!Or(fr)},rt.isGroupedMenuExtension=Or,rt.isIExtensions=function(fr){return fr&&!vr(fr)},rt.isIExtensionArray=vr,rt.validateVisualSelector=function(fr){var tr=Tt.Validators.visualSelectorValidator.validate(fr);return tr?tr.map(Rr):void 0},rt.validateSlicer=function(fr){var tr=Tt.Validators.slicerValidator.validate(fr);return tr?tr.map(Rr):void 0},rt.validateSlicerState=function(fr){var tr=Tt.Validators.slicerStateValidator.validate(fr);return tr?tr.map(Rr):void 0},rt.validatePlayBookmarkRequest=function(fr){var tr=Tt.Validators.playBookmarkRequestValidator.validate(fr);return tr?tr.map(Rr):void 0},rt.validateAddBookmarkRequest=function(fr){var tr=Tt.Validators.addBookmarkRequestValidator.validate(fr);return tr?tr.map(Rr):void 0},rt.validateApplyBookmarkByNameRequest=function(fr){var tr=Tt.Validators.applyBookmarkByNameRequestValidator.validate(fr);return tr?tr.map(Rr):void 0},rt.validateApplyBookmarkStateRequest=function(fr){var tr=Tt.Validators.applyBookmarkStateRequestValidator.validate(fr);return tr?tr.map(Rr):void 0},rt.validateCaptureBookmarkRequest=function(fr){var tr=Tt.Validators.captureBookmarkRequestValidator.validate(fr);return tr?tr.map(Rr):void 0},rt.validateSettings=function(fr){var tr=Tt.Validators.settingsValidator.validate(fr);return tr?tr.map(Rr):void 0},rt.validatePanes=function(fr){var tr=Tt.Validators.reportPanesValidator.validate(fr);return tr?tr.map(Rr):void 0},rt.validateBookmarksPane=function(fr){var tr=Tt.Validators.bookmarksPaneValidator.validate(fr);return tr?tr.map(Rr):void 0},rt.validateFiltersPane=function(fr){var tr=Tt.Validators.filtersPaneValidator.validate(fr);return tr?tr.map(Rr):void 0},rt.validateFieldsPane=function(fr){var tr=Tt.Validators.fieldsPaneValidator.validate(fr);return tr?tr.map(Rr):void 0},rt.validatePageNavigationPane=function(fr){var tr=Tt.Validators.pageNavigationPaneValidator.validate(fr);return tr?tr.map(Rr):void 0},rt.validateSelectionPane=function(fr){var tr=Tt.Validators.selectionPaneValidator.validate(fr);return tr?tr.map(Rr):void 0},rt.validateSyncSlicersPane=function(fr){var tr=Tt.Validators.syncSlicersPaneValidator.validate(fr);return tr?tr.map(Rr):void 0},rt.validateVisualizationsPane=function(fr){var tr=Tt.Validators.visualizationsPaneValidator.validate(fr);return tr?tr.map(Rr):void 0},rt.validateCustomPageSize=function(fr){var tr=Tt.Validators.customPageSizeValidator.validate(fr);return tr?tr.map(Rr):void 0},rt.validateExtension=function(fr){var tr=Tt.Validators.extensionValidator.validate(fr);return tr?tr.map(Rr):void 0},rt.validateMenuGroupExtension=function(fr){var tr=Tt.Validators.menuGroupExtensionValidator.validate(fr);return tr?tr.map(Rr):void 0},rt.validateReportLoad=function(fr){var tr=Tt.Validators.reportLoadValidator.validate(fr);return tr?tr.map(Rr):void 0},rt.validatePaginatedReportLoad=function(fr){var tr=Tt.Validators.paginatedReportLoadValidator.validate(fr);return tr?tr.map(Rr):void 0},rt.validateCreateReport=function(fr){var tr=Tt.Validators.reportCreateValidator.validate(fr);return tr?tr.map(Rr):void 0},rt.validateQuickCreate=function(fr){var tr=Tt.Validators.quickCreateValidator.validate(fr);return tr?tr.map(Rr):void 0},rt.validateDashboardLoad=function(fr){var tr=Tt.Validators.dashboardLoadValidator.validate(fr);return tr?tr.map(Rr):void 0},rt.validateTileLoad=function(fr){var tr=Tt.Validators.tileLoadValidator.validate(fr);return tr?tr.map(Rr):void 0},rt.validatePage=function(fr){var tr=Tt.Validators.pageValidator.validate(fr);return tr?tr.map(Rr):void 0},rt.validateFilter=function(fr){var tr=Tt.Validators.filterValidator.validate(fr);return tr?tr.map(Rr):void 0},rt.validateUpdateFiltersRequest=function(fr){var tr=Tt.Validators.updateFiltersRequestValidator.validate(fr);return tr?tr.map(Rr):void 0},rt.validateSaveAsParameters=function(fr){var tr=Tt.Validators.saveAsParametersValidator.validate(fr);return tr?tr.map(Rr):void 0},rt.validateLoadQnaConfiguration=function(fr){var tr=Tt.Validators.loadQnaValidator.validate(fr);return tr?tr.map(Rr):void 0},rt.validateQnaInterpretInputData=function(fr){var tr=Tt.Validators.qnaInterpretInputDataValidator.validate(fr);return tr?tr.map(Rr):void 0},rt.validateExportDataRequest=function(fr){var tr=Tt.Validators.exportDataRequestValidator.validate(fr);return tr?tr.map(Rr):void 0},rt.validateVisualHeader=function(fr){var tr=Tt.Validators.visualHeaderValidator.validate(fr);return tr?tr.map(Rr):void 0},rt.validateVisualSettings=function(fr){var tr=Tt.Validators.visualSettingsValidator.validate(fr);return tr?tr.map(Rr):void 0},rt.validateCommandsSettings=function(fr){var tr=Tt.Validators.commandsSettingsValidator.validate(fr);return tr?tr.map(Rr):void 0},rt.validateCustomTheme=function(fr){var tr=Tt.Validators.customThemeValidator.validate(fr);return tr?tr.map(Rr):void 0},rt.validateZoomLevel=function(fr){var tr=Tt.Validators.zoomLevelValidator.validate(fr);return tr?tr.map(Rr):void 0},rt.validatePrintSettings=function(fr){var tr=Tt.Validators.printSettingsValidator.validate(fr);return tr?tr.map(Rr):void 0}},(vt,rt,bt)=>{Object.defineProperty(rt,"__esModule",{value:!0}),rt.Validators=void 0;var ht=bt(2),wt=bt(5),At=bt(6),Ct=bt(7),dt=bt(8),Et=bt(9),Rt=bt(10),Mt=bt(11),_t=bt(12),kt=bt(13),nt=bt(14),s=bt(15),b=bt(16),$=bt(17),_e=bt(18),it=bt(19),pt=bt(20),mt=bt(21),lt=bt(22),_=bt(23),tt=bt(24),Tt=bt(25),It=bt(26),Nt=bt(27),Ut=bt(28),Gt=bt(29),Pt=bt(4),qt=bt(30),Kt=bt(31),jt=bt(32),Ht=bt(33);rt.Validators={addBookmarkRequestValidator:new wt.AddBookmarkRequestValidator,advancedFilterTypeValidator:new Pt.EnumValidator([0]),advancedFilterValidator:new _t.AdvancedFilterValidator,anyArrayValidator:new Pt.ArrayValidator([new It.AnyOfValidator([new Pt.StringValidator,new Pt.NumberValidator,new Pt.BooleanValidator])]),anyFilterValidator:new It.AnyOfValidator([new _t.BasicFilterValidator,new _t.AdvancedFilterValidator,new _t.IncludeExcludeFilterValidator,new _t.NotSupportedFilterValidator,new _t.RelativeDateFilterValidator,new _t.TopNFilterValidator,new _t.RelativeTimeFilterValidator,new _t.HierarchyFilterValidator]),anyValueValidator:new It.AnyOfValidator([new Pt.StringValidator,new Pt.NumberValidator,new Pt.BooleanValidator]),actionBarValidator:new ht.ActionBarValidator,statusBarValidator:new ht.StatusBarValidator,applyBookmarkByNameRequestValidator:new wt.ApplyBookmarkByNameRequestValidator,applyBookmarkStateRequestValidator:new wt.ApplyBookmarkStateRequestValidator,applyBookmarkValidator:new It.AnyOfValidator([new wt.ApplyBookmarkByNameRequestValidator,new wt.ApplyBookmarkStateRequestValidator]),backgroundValidator:new Pt.EnumValidator([0,1]),basicFilterTypeValidator:new Pt.EnumValidator([1]),basicFilterValidator:new _t.BasicFilterValidator,booleanArrayValidator:new Pt.BooleanArrayValidator,booleanValidator:new Pt.BooleanValidator,bookmarksPaneValidator:new s.BookmarksPaneValidator,captureBookmarkOptionsValidator:new wt.CaptureBookmarkOptionsValidator,captureBookmarkRequestValidator:new wt.CaptureBookmarkRequestValidator,columnSchemaArrayValidator:new Pt.ArrayValidator([new Kt.ColumnSchemaValidator]),commandDisplayOptionValidator:new Pt.EnumValidator([0,1,2]),commandExtensionSelectorValidator:new It.AnyOfValidator([new mt.VisualSelectorValidator,new mt.VisualTypeSelectorValidator]),commandExtensionArrayValidator:new Pt.ArrayValidator([new Mt.CommandExtensionValidator]),commandExtensionValidator:new Mt.CommandExtensionValidator,commandsSettingsArrayValidator:new Pt.ArrayValidator([new At.CommandsSettingsValidator]),commandsSettingsValidator:new At.CommandsSettingsValidator,conditionItemValidator:new _t.ConditionItemValidator,contrastModeValidator:new Pt.EnumValidator([0,1,2,3,4]),credentialDetailsValidator:new Gt.MapValidator([new Pt.StringValidator],[new Pt.StringValidator]),credentialsValidator:new Kt.CredentialsValidator,credentialTypeValidator:new Pt.EnumValidator([0,1,2]),customLayoutDisplayOptionValidator:new Pt.EnumValidator([0,1,2]),customLayoutValidator:new kt.CustomLayoutValidator,customPageSizeValidator:new nt.CustomPageSizeValidator,customThemeValidator:new Ct.CustomThemeValidator,dashboardLoadValidator:new dt.DashboardLoadValidator,dataCacheModeValidator:new Pt.EnumValidator([0,1]),datasetBindingValidator:new Et.DatasetBindingValidator,datasetCreateConfigValidator:new Kt.DatasetCreateConfigValidator,datasourceConnectionConfigValidator:new Kt.DatasourceConnectionConfigValidator,displayStateModeValidator:new Pt.EnumValidator([0,1]),displayStateValidator:new kt.DisplayStateValidator,exportDataRequestValidator:new Rt.ExportDataRequestValidator,extensionArrayValidator:new Pt.ArrayValidator([new Mt.ExtensionValidator]),extensionsValidator:new It.AnyOfValidator([new Pt.ArrayValidator([new Mt.ExtensionValidator]),new Mt.ExtensionsValidator]),extensionPointsValidator:new Mt.ExtensionPointsValidator,extensionValidator:new Mt.ExtensionValidator,fieldForbiddenValidator:new Nt.FieldForbiddenValidator,fieldRequiredValidator:new Ut.FieldRequiredValidator,fieldsPaneValidator:new s.FieldsPaneValidator,filterColumnTargetValidator:new _t.FilterColumnTargetValidator,filterDisplaySettingsValidator:new _t.FilterDisplaySettingsValidator,filterConditionsValidator:new Pt.ArrayValidator([new _t.ConditionItemValidator]),filterHierarchyTargetValidator:new _t.FilterHierarchyTargetValidator,filterMeasureTargetValidator:new _t.FilterMeasureTargetValidator,filterTargetValidator:new It.AnyOfValidator([new _t.FilterColumnTargetValidator,new _t.FilterHierarchyTargetValidator,new _t.FilterMeasureTargetValidator,new Pt.ArrayValidator([new It.AnyOfValidator([new _t.FilterColumnTargetValidator,new _t.FilterHierarchyTargetValidator,new _t.FilterMeasureTargetValidator,new _t.FilterKeyColumnsTargetValidator,new _t.FilterKeyHierarchyTargetValidator])])]),filterValidator:new _t.FilterValidator,filterTypeValidator:new Pt.EnumValidator([0,1,2,3,4,5,6,7,9]),filtersArrayValidator:new Pt.ArrayValidator([new _t.FilterValidator]),filtersOperationsUpdateValidator:new Pt.EnumValidator([1,2,3]),filtersOperationsRemoveAllValidator:new Pt.EnumValidator([0]),filtersPaneValidator:new s.FiltersPaneValidator,hyperlinkClickBehaviorValidator:new Pt.EnumValidator([0,1,2]),includeExcludeFilterValidator:new _t.IncludeExcludeFilterValidator,includeExludeFilterTypeValidator:new Pt.EnumValidator([3]),hierarchyFilterTypeValidator:new Pt.EnumValidator([9]),hierarchyFilterValuesValidator:new Pt.ArrayValidator([new _t.HierarchyFilterNodeValidator]),layoutTypeValidator:new Pt.EnumValidator([0,1,2,3]),loadQnaValidator:new b.LoadQnaValidator,menuExtensionValidator:new It.AnyOfValidator([new Mt.FlatMenuExtensionValidator,new Mt.GroupedMenuExtensionValidator]),menuGroupExtensionArrayValidator:new Pt.ArrayValidator([new Mt.MenuGroupExtensionValidator]),menuGroupExtensionValidator:new Mt.MenuGroupExtensionValidator,menuLocationValidator:new Pt.EnumValidator([0,1]),notSupportedFilterTypeValidator:new Pt.EnumValidator([2]),notSupportedFilterValidator:new _t.NotSupportedFilterValidator,numberArrayValidator:new Pt.NumberArrayValidator,numberValidator:new Pt.NumberValidator,onLoadFiltersBaseValidator:new It.AnyOfValidator([new _t.OnLoadFiltersBaseValidator,new _t.OnLoadFiltersBaseRemoveOperationValidator]),pageLayoutValidator:new Gt.MapValidator([new Pt.StringValidator],[new kt.VisualLayoutValidator]),pageNavigationPaneValidator:new s.PageNavigationPaneValidator,pageNavigationPositionValidator:new Pt.EnumValidator([0,1]),pageSizeTypeValidator:new Pt.EnumValidator([0,1,2,3,4,5]),pageSizeValidator:new nt.PageSizeValidator,pageValidator:new nt.PageValidator,pageViewFieldValidator:new nt.PageViewFieldValidator,pagesLayoutValidator:new Gt.MapValidator([new Pt.StringValidator],[new kt.PageLayoutValidator]),paginatedReportCommandsValidator:new At.PaginatedReportCommandsValidator,paginatedReportLoadValidator:new it.PaginatedReportLoadValidator,paginatedReportsettingsValidator:new lt.PaginatedReportSettingsValidator,parameterValuesArrayValidator:new Pt.ArrayValidator([new it.ReportParameterFieldsValidator]),parametersPanelValidator:new qt.ParametersPanelValidator,permissionsValidator:new Pt.EnumValidator([0,1,2,4,7]),playBookmarkRequestValidator:new wt.PlayBookmarkRequestValidator,printSettingsValidator:new Ht.PrintSettingsValidator,qnaInterpretInputDataValidator:new b.QnaInterpretInputDataValidator,qnaPanesValidator:new s.QnaPanesValidator,qnaSettingValidator:new b.QnaSettingsValidator,quickCreateValidator:new jt.QuickCreateValidator,rawDataValidator:new Pt.ArrayValidator([new Pt.ArrayValidator([new Pt.StringValidator])]),relativeDateFilterOperatorValidator:new Pt.EnumValidator([0,1,2]),relativeDateFilterTimeUnitTypeValidator:new Pt.EnumValidator([0,1,2,3,4,5,6]),relativeDateFilterTypeValidator:new Pt.EnumValidator([4]),relativeDateFilterValidator:new _t.RelativeDateFilterValidator,relativeDateTimeFilterTypeValidator:new Pt.EnumValidator([4,7]),relativeDateTimeFilterUnitTypeValidator:new Pt.EnumValidator([0,1,2,3,4,5,6,7,8]),relativeTimeFilterTimeUnitTypeValidator:new Pt.EnumValidator([7,8]),relativeTimeFilterTypeValidator:new Pt.EnumValidator([7]),relativeTimeFilterValidator:new _t.RelativeTimeFilterValidator,reportBarsValidator:new ht.ReportBarsValidator,reportCreateValidator:new $.ReportCreateValidator,reportLoadFiltersValidator:new It.AnyOfValidator([new Pt.ArrayValidator([new _t.FilterValidator]),new _t.OnLoadFiltersValidator]),reportLoadValidator:new _e.ReportLoadValidator,reportPanesValidator:new s.ReportPanesValidator,saveAsParametersValidator:new pt.SaveAsParametersValidator,selectionPaneValidator:new s.SelectionPaneValidator,settingsValidator:new lt.SettingsValidator,singleCommandSettingsValidator:new At.SingleCommandSettingsValidator,slicerSelectorValidator:new It.AnyOfValidator([new mt.VisualSelectorValidator,new mt.SlicerTargetSelectorValidator]),slicerStateValidator:new _.SlicerStateValidator,slicerTargetValidator:new It.AnyOfValidator([new _t.FilterColumnTargetValidator,new _t.FilterHierarchyTargetValidator,new _t.FilterMeasureTargetValidator,new _t.FilterKeyColumnsTargetValidator,new _t.FilterKeyHierarchyTargetValidator]),slicerValidator:new _.SlicerValidator,stringArrayValidator:new Pt.StringArrayValidator,stringValidator:new Pt.StringValidator,syncSlicersPaneValidator:new s.SyncSlicersPaneValidator,tableDataArrayValidator:new Pt.ArrayValidator([new Kt.TableDataValidator]),tableSchemaListValidator:new Pt.ArrayValidator([new Kt.TableSchemaValidator]),tileLoadValidator:new tt.TileLoadValidator,tokenTypeValidator:new Pt.EnumValidator([0,1]),topNFilterTypeValidator:new Pt.EnumValidator([5]),topNFilterValidator:new _t.TopNFilterValidator,updateFiltersRequestValidator:new It.AnyOfValidator([new _t.UpdateFiltersRequestValidator,new _t.RemoveFiltersRequestValidator]),viewModeValidator:new Pt.EnumValidator([0,1]),visualCommandSelectorValidator:new It.AnyOfValidator([new mt.VisualSelectorValidator,new mt.VisualTypeSelectorValidator]),visualHeaderSelectorValidator:new It.AnyOfValidator([new mt.VisualSelectorValidator,new mt.VisualTypeSelectorValidator]),visualHeaderSettingsValidator:new Tt.VisualHeaderSettingsValidator,visualHeaderValidator:new Tt.VisualHeaderValidator,visualHeadersValidator:new Pt.ArrayValidator([new Tt.VisualHeaderValidator]),visualizationsPaneValidator:new s.VisualizationsPaneValidator,visualLayoutValidator:new kt.VisualLayoutValidator,visualSelectorValidator:new mt.VisualSelectorValidator,visualSettingsValidator:new Tt.VisualSettingsValidator,visualTypeSelectorValidator:new mt.VisualTypeSelectorValidator,zoomLevelValidator:new Pt.RangeValidator(.25,4)}},function(vt,rt,bt){var ht,wt=this&&this.__extends||(ht=function(_t,kt){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(nt,s){nt.__proto__=s}||function(nt,s){for(var b in s)Object.prototype.hasOwnProperty.call(s,b)&&(nt[b]=s[b])},ht(_t,kt)},function(_t,kt){if(typeof kt!="function"&&kt!==null)throw new TypeError("Class extends value "+String(kt)+" is not a constructor or null");function nt(){this.constructor=_t}ht(_t,kt),_t.prototype=kt===null?Object.create(kt):(nt.prototype=kt.prototype,new nt)});Object.defineProperty(rt,"__esModule",{value:!0}),rt.StatusBarValidator=rt.ActionBarValidator=rt.ReportBarsValidator=void 0;var At=bt(3),Ct=bt(4),dt=bt(1),Et=function(_t){function kt(){return _t!==null&&_t.apply(this,arguments)||this}return wt(kt,_t),kt.prototype.validate=function(nt,s,b){if(nt==null)return null;var $=_t.prototype.validate.call(this,nt,s,b);if($)return $;var _e=[{field:"actionBar",validators:[dt.Validators.actionBarValidator]},{field:"statusBar",validators:[dt.Validators.statusBarValidator]}];return new At.MultipleFieldsValidator(_e).validate(nt,s,b)},kt}(Ct.ObjectValidator);rt.ReportBarsValidator=Et;var Rt=function(_t){function kt(){return _t!==null&&_t.apply(this,arguments)||this}return wt(kt,_t),kt.prototype.validate=function(nt,s,b){if(nt==null)return null;var $=_t.prototype.validate.call(this,nt,s,b);if($)return $;var _e=[{field:"visible",validators:[dt.Validators.booleanValidator]}];return new At.MultipleFieldsValidator(_e).validate(nt,s,b)},kt}(Ct.ObjectValidator);rt.ActionBarValidator=Rt;var Mt=function(_t){function kt(){return _t!==null&&_t.apply(this,arguments)||this}return wt(kt,_t),kt.prototype.validate=function(nt,s,b){if(nt==null)return null;var $=_t.prototype.validate.call(this,nt,s,b);if($)return $;var _e=[{field:"visible",validators:[dt.Validators.booleanValidator]}];return new At.MultipleFieldsValidator(_e).validate(nt,s,b)},kt}(Ct.ObjectValidator);rt.StatusBarValidator=Mt},(vt,rt)=>{Object.defineProperty(rt,"__esModule",{value:!0}),rt.MultipleFieldsValidator=void 0;var bt=function(){function ht(wt){this.fieldValidatorsPairs=wt}return ht.prototype.validate=function(wt,At,Ct){if(!this.fieldValidatorsPairs)return null;for(var dt=At?At+"."+Ct:Ct,Et=0,Rt=this.fieldValidatorsPairs;Et<Rt.length;Et++)for(var Mt=Rt[Et],_t=0,kt=Mt.validators;_t<kt.length;_t++){var nt=kt[_t].validate(wt[Mt.field],dt,Mt.field);if(nt)return nt}return null},ht}();rt.MultipleFieldsValidator=bt},function(vt,rt){var bt,ht=this&&this.__extends||(bt=function(_e,it){return bt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(pt,mt){pt.__proto__=mt}||function(pt,mt){for(var lt in mt)Object.prototype.hasOwnProperty.call(mt,lt)&&(pt[lt]=mt[lt])},bt(_e,it)},function(_e,it){if(typeof it!="function"&&it!==null)throw new TypeError("Class extends value "+String(it)+" is not a constructor or null");function pt(){this.constructor=_e}bt(_e,it),_e.prototype=it===null?Object.create(it):(pt.prototype=it.prototype,new pt)});Object.defineProperty(rt,"__esModule",{value:!0}),rt.RangeValidator=rt.NumberArrayValidator=rt.BooleanArrayValidator=rt.StringArrayValidator=rt.EnumValidator=rt.SchemaValidator=rt.ValueValidator=rt.NumberValidator=rt.BooleanValidator=rt.StringValidator=rt.TypeValidator=rt.ArrayValidator=rt.ObjectValidator=void 0;var wt=function(){function _e(){}return _e.prototype.validate=function(it,pt,mt){return it==null?null:typeof it!="object"||Array.isArray(it)?[{message:mt!==void 0?mt+" must be an object":"input must be an object",path:pt,keyword:"type"}]:null},_e}();rt.ObjectValidator=wt;var At=function(){function _e(it){this.itemValidators=it}return _e.prototype.validate=function(it,pt,mt){if(it==null)return null;if(!Array.isArray(it))return[{message:mt+" property is invalid",path:(pt?pt+".":"")+mt,keyword:"type"}];for(var lt=0;lt<it.length;lt++)for(var _=(pt?pt+".":"")+mt+"."+lt.toString(),tt=0,Tt=this.itemValidators;tt<Tt.length;tt++)if(Tt[tt].validate(it[lt],_,mt))return[{message:mt+" property is invalid",path:(pt?pt+".":"")+mt,keyword:"type"}];return null},_e}();rt.ArrayValidator=At;var Ct=function(){function _e(it){this.expectedType=it}return _e.prototype.validate=function(it,pt,mt){return it==null?null:typeof it!==this.expectedType?[{message:mt+" must be a "+this.expectedType,path:(pt?pt+".":"")+mt,keyword:"type"}]:null},_e}();rt.TypeValidator=Ct;var dt=function(_e){function it(){return _e.call(this,"string")||this}return ht(it,_e),it}(Ct);rt.StringValidator=dt;var Et=function(_e){function it(){return _e.call(this,"boolean")||this}return ht(it,_e),it}(Ct);rt.BooleanValidator=Et;var Rt=function(_e){function it(){return _e.call(this,"number")||this}return ht(it,_e),it}(Ct);rt.NumberValidator=Rt;var Mt=function(){function _e(it){this.possibleValues=it}return _e.prototype.validate=function(it,pt,mt){return it==null?null:this.possibleValues.indexOf(it)<0?[{message:mt+" property is invalid",path:(pt?pt+".":"")+mt,keyword:"invalid"}]:null},_e}();rt.ValueValidator=Mt;var _t=function(_e){function it(pt){var mt=_e.call(this,[pt])||this;return mt.schemaValue=pt,mt}return ht(it,_e),it.prototype.validate=function(pt,mt,lt){return _e.prototype.validate.call(this,pt,mt,lt)},it}(Mt);rt.SchemaValidator=_t;var kt=function(_e){function it(pt){var mt=_e.call(this)||this;return mt.possibleValues=pt,mt}return ht(it,_e),it.prototype.validate=function(pt,mt,lt){return pt==null?null:_e.prototype.validate.call(this,pt,mt,lt)||new Mt(this.possibleValues).validate(pt,mt,lt)},it}(Rt);rt.EnumValidator=kt;var nt=function(_e){function it(){return _e.call(this,[new dt])||this}return ht(it,_e),it.prototype.validate=function(pt,mt,lt){return _e.prototype.validate.call(this,pt,mt,lt)?[{message:lt+" must be an array of strings",path:(mt?mt+".":"")+lt,keyword:"type"}]:null},it}(At);rt.StringArrayValidator=nt;var s=function(_e){function it(){return _e.call(this,[new Et])||this}return ht(it,_e),it.prototype.validate=function(pt,mt,lt){return _e.prototype.validate.call(this,pt,mt,lt)?[{message:lt+" must be an array of booleans",path:(mt?mt+".":"")+lt,keyword:"type"}]:null},it}(At);rt.BooleanArrayValidator=s;var b=function(_e){function it(){return _e.call(this,[new Rt])||this}return ht(it,_e),it.prototype.validate=function(pt,mt,lt){return _e.prototype.validate.call(this,pt,mt,lt)?[{message:lt+" must be an array of numbers",path:(mt?mt+".":"")+lt,keyword:"type"}]:null},it}(At);rt.NumberArrayValidator=b;var $=function(_e){function it(pt,mt){var lt=_e.call(this)||this;return lt.minValue=pt,lt.maxValue=mt,lt}return ht(it,_e),it.prototype.validate=function(pt,mt,lt){return pt==null?null:_e.prototype.validate.call(this,pt,mt,lt)||(pt>this.maxValue||pt<this.minValue?[{message:lt+" must be a number between "+this.minValue.toString()+" and "+this.maxValue.toString(),path:(mt?mt+".":"")+lt,keyword:"range"}]:null)},it}(Rt);rt.RangeValidator=$},function(vt,rt,bt){var ht,wt=this&&this.__extends||(ht=function(s,b){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,_e){$.__proto__=_e}||function($,_e){for(var it in _e)Object.prototype.hasOwnProperty.call(_e,it)&&($[it]=_e[it])},ht(s,b)},function(s,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function $(){this.constructor=s}ht(s,b),s.prototype=b===null?Object.create(b):($.prototype=b.prototype,new $)});Object.defineProperty(rt,"__esModule",{value:!0}),rt.CaptureBookmarkRequestValidator=rt.CaptureBookmarkOptionsValidator=rt.ApplyBookmarkStateRequestValidator=rt.ApplyBookmarkByNameRequestValidator=rt.AddBookmarkRequestValidator=rt.PlayBookmarkRequestValidator=void 0;var At=bt(3),Ct=bt(4),dt=bt(1),Et=function(s){function b(){return s!==null&&s.apply(this,arguments)||this}return wt(b,s),b.prototype.validate=function($,_e,it){if($==null)return null;var pt=s.prototype.validate.call(this,$,_e,it);if(pt)return pt;var mt=[{field:"playMode",validators:[dt.Validators.fieldRequiredValidator,new Ct.EnumValidator([0,1])]}];return new At.MultipleFieldsValidator(mt).validate($,_e,it)},b}(Ct.ObjectValidator);rt.PlayBookmarkRequestValidator=Et;var Rt=function(s){function b(){return s!==null&&s.apply(this,arguments)||this}return wt(b,s),b.prototype.validate=function($,_e,it){if($==null)return null;var pt=s.prototype.validate.call(this,$,_e,it);if(pt)return pt;var mt=[{field:"state",validators:[dt.Validators.stringValidator]},{field:"displayName",validators:[dt.Validators.stringValidator]},{field:"apply",validators:[dt.Validators.booleanValidator]}];return new At.MultipleFieldsValidator(mt).validate($,_e,it)},b}(Ct.ObjectValidator);rt.AddBookmarkRequestValidator=Rt;var Mt=function(s){function b(){return s!==null&&s.apply(this,arguments)||this}return wt(b,s),b.prototype.validate=function($,_e,it){if($==null)return null;var pt=s.prototype.validate.call(this,$,_e,it);if(pt)return pt;var mt=[{field:"name",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.stringValidator]}];return new At.MultipleFieldsValidator(mt).validate($,_e,it)},b}(Ct.ObjectValidator);rt.ApplyBookmarkByNameRequestValidator=Mt;var _t=function(s){function b(){return s!==null&&s.apply(this,arguments)||this}return wt(b,s),b.prototype.validate=function($,_e,it){if($==null)return null;var pt=s.prototype.validate.call(this,$,_e,it);if(pt)return pt;var mt=[{field:"state",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.stringValidator]}];return new At.MultipleFieldsValidator(mt).validate($,_e,it)},b}(Ct.ObjectValidator);rt.ApplyBookmarkStateRequestValidator=_t;var kt=function(s){function b(){return s!==null&&s.apply(this,arguments)||this}return wt(b,s),b.prototype.validate=function($,_e,it){if($==null)return null;var pt=s.prototype.validate.call(this,$,_e,it);if(pt)return pt;var mt=[{field:"personalizeVisuals",validators:[dt.Validators.booleanValidator]},{field:"allPages",validators:[dt.Validators.booleanValidator]}];return new At.MultipleFieldsValidator(mt).validate($,_e,it)},b}(Ct.ObjectValidator);rt.CaptureBookmarkOptionsValidator=kt;var nt=function(s){function b(){return s!==null&&s.apply(this,arguments)||this}return wt(b,s),b.prototype.validate=function($,_e,it){if($==null)return null;var pt=s.prototype.validate.call(this,$,_e,it);if(pt)return pt;var mt=[{field:"options",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.captureBookmarkOptionsValidator]}];return new At.MultipleFieldsValidator(mt).validate($,_e,it)},b}(Ct.ObjectValidator);rt.CaptureBookmarkRequestValidator=nt},function(vt,rt,bt){var ht,wt=this&&this.__extends||(ht=function(_t,kt){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(nt,s){nt.__proto__=s}||function(nt,s){for(var b in s)Object.prototype.hasOwnProperty.call(s,b)&&(nt[b]=s[b])},ht(_t,kt)},function(_t,kt){if(typeof kt!="function"&&kt!==null)throw new TypeError("Class extends value "+String(kt)+" is not a constructor or null");function nt(){this.constructor=_t}ht(_t,kt),_t.prototype=kt===null?Object.create(kt):(nt.prototype=kt.prototype,new nt)});Object.defineProperty(rt,"__esModule",{value:!0}),rt.PaginatedReportCommandsValidator=rt.SingleCommandSettingsValidator=rt.CommandsSettingsValidator=void 0;var At=bt(3),Ct=bt(4),dt=bt(1),Et=function(_t){function kt(){return _t!==null&&_t.apply(this,arguments)||this}return wt(kt,_t),kt.prototype.validate=function(nt,s,b){if(nt==null)return null;var $=_t.prototype.validate.call(this,nt,s,b);if($)return $;var _e=[{field:"copy",validators:[dt.Validators.singleCommandSettingsValidator]},{field:"drill",validators:[dt.Validators.singleCommandSettingsValidator]},{field:"drillthrough",validators:[dt.Validators.singleCommandSettingsValidator]},{field:"expandCollapse",validators:[dt.Validators.singleCommandSettingsValidator]},{field:"exportData",validators:[dt.Validators.singleCommandSettingsValidator]},{field:"includeExclude",validators:[dt.Validators.singleCommandSettingsValidator]},{field:"removeVisual",validators:[dt.Validators.singleCommandSettingsValidator]},{field:"search",validators:[dt.Validators.singleCommandSettingsValidator]},{field:"seeData",validators:[dt.Validators.singleCommandSettingsValidator]},{field:"sort",validators:[dt.Validators.singleCommandSettingsValidator]},{field:"spotlight",validators:[dt.Validators.singleCommandSettingsValidator]},{field:"insightsAnalysis",validators:[dt.Validators.singleCommandSettingsValidator]},{field:"addComment",validators:[dt.Validators.singleCommandSettingsValidator]},{field:"groupVisualContainers",validators:[dt.Validators.singleCommandSettingsValidator]},{field:"summarize",validators:[dt.Validators.singleCommandSettingsValidator]},{field:"clearSelection",validators:[dt.Validators.singleCommandSettingsValidator]}];return new At.MultipleFieldsValidator(_e).validate(nt,s,b)},kt}(Ct.ObjectValidator);rt.CommandsSettingsValidator=Et;var Rt=function(_t){function kt(){return _t!==null&&_t.apply(this,arguments)||this}return wt(kt,_t),kt.prototype.validate=function(nt,s,b){if(nt==null)return null;var $=_t.prototype.validate.call(this,nt,s,b);if($)return $;var _e=[{field:"displayOption",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.commandDisplayOptionValidator]},{field:"selector",validators:[dt.Validators.visualCommandSelectorValidator]}];return new At.MultipleFieldsValidator(_e).validate(nt,s,b)},kt}(Ct.ObjectValidator);rt.SingleCommandSettingsValidator=Rt;var Mt=function(_t){function kt(){return _t!==null&&_t.apply(this,arguments)||this}return wt(kt,_t),kt.prototype.validate=function(nt,s,b){if(nt==null)return null;var $=_t.prototype.validate.call(this,nt,s,b);if($)return $;var _e=[{field:"parameterPanel",validators:[dt.Validators.parametersPanelValidator]}];return new At.MultipleFieldsValidator(_e).validate(nt,s,b)},kt}(Ct.ObjectValidator);rt.PaginatedReportCommandsValidator=Mt},function(vt,rt,bt){var ht,wt=this&&this.__extends||(ht=function(Et,Rt){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Mt,_t){Mt.__proto__=_t}||function(Mt,_t){for(var kt in _t)Object.prototype.hasOwnProperty.call(_t,kt)&&(Mt[kt]=_t[kt])},ht(Et,Rt)},function(Et,Rt){if(typeof Rt!="function"&&Rt!==null)throw new TypeError("Class extends value "+String(Rt)+" is not a constructor or null");function Mt(){this.constructor=Et}ht(Et,Rt),Et.prototype=Rt===null?Object.create(Rt):(Mt.prototype=Rt.prototype,new Mt)});Object.defineProperty(rt,"__esModule",{value:!0}),rt.CustomThemeValidator=void 0;var At=bt(3),Ct=bt(4),dt=function(Et){function Rt(){return Et!==null&&Et.apply(this,arguments)||this}return wt(Rt,Et),Rt.prototype.validate=function(Mt,_t,kt){if(Mt==null)return null;var nt=Et.prototype.validate.call(this,Mt,_t,kt);if(nt)return nt;var s=[{field:"themeJson",validators:[new Ct.ObjectValidator]}];return new At.MultipleFieldsValidator(s).validate(Mt,_t,kt)},Rt}(Ct.ObjectValidator);rt.CustomThemeValidator=dt},function(vt,rt,bt){var ht,wt=this&&this.__extends||(ht=function(Rt,Mt){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_t,kt){_t.__proto__=kt}||function(_t,kt){for(var nt in kt)Object.prototype.hasOwnProperty.call(kt,nt)&&(_t[nt]=kt[nt])},ht(Rt,Mt)},function(Rt,Mt){if(typeof Mt!="function"&&Mt!==null)throw new TypeError("Class extends value "+String(Mt)+" is not a constructor or null");function _t(){this.constructor=Rt}ht(Rt,Mt),Rt.prototype=Mt===null?Object.create(Mt):(_t.prototype=Mt.prototype,new _t)});Object.defineProperty(rt,"__esModule",{value:!0}),rt.DashboardLoadValidator=void 0;var At=bt(3),Ct=bt(4),dt=bt(1),Et=function(Rt){function Mt(){return Rt!==null&&Rt.apply(this,arguments)||this}return wt(Mt,Rt),Mt.prototype.validate=function(_t,kt,nt){if(_t==null)return null;var s=Rt.prototype.validate.call(this,_t,kt,nt);if(s)return s;var b=[{field:"accessToken",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.stringValidator]},{field:"id",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.stringValidator]},{field:"groupId",validators:[dt.Validators.stringValidator]},{field:"pageView",validators:[dt.Validators.pageViewFieldValidator]},{field:"tokenType",validators:[dt.Validators.tokenTypeValidator]},{field:"embedUrl",validators:[dt.Validators.stringValidator]}];return new At.MultipleFieldsValidator(b).validate(_t,kt,nt)},Mt}(Ct.ObjectValidator);rt.DashboardLoadValidator=Et},function(vt,rt,bt){var ht,wt=this&&this.__extends||(ht=function(Rt,Mt){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_t,kt){_t.__proto__=kt}||function(_t,kt){for(var nt in kt)Object.prototype.hasOwnProperty.call(kt,nt)&&(_t[nt]=kt[nt])},ht(Rt,Mt)},function(Rt,Mt){if(typeof Mt!="function"&&Mt!==null)throw new TypeError("Class extends value "+String(Mt)+" is not a constructor or null");function _t(){this.constructor=Rt}ht(Rt,Mt),Rt.prototype=Mt===null?Object.create(Mt):(_t.prototype=Mt.prototype,new _t)});Object.defineProperty(rt,"__esModule",{value:!0}),rt.DatasetBindingValidator=void 0;var At=bt(3),Ct=bt(4),dt=bt(1),Et=function(Rt){function Mt(){return Rt!==null&&Rt.apply(this,arguments)||this}return wt(Mt,Rt),Mt.prototype.validate=function(_t,kt,nt){if(_t==null)return null;var s=Rt.prototype.validate.call(this,_t,kt,nt);if(s)return s;var b=[{field:"datasetId",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.stringValidator]}];return new At.MultipleFieldsValidator(b).validate(_t,kt,nt)},Mt}(Ct.ObjectValidator);rt.DatasetBindingValidator=Et},function(vt,rt,bt){var ht,wt=this&&this.__extends||(ht=function(Et,Rt){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Mt,_t){Mt.__proto__=_t}||function(Mt,_t){for(var kt in _t)Object.prototype.hasOwnProperty.call(_t,kt)&&(Mt[kt]=_t[kt])},ht(Et,Rt)},function(Et,Rt){if(typeof Rt!="function"&&Rt!==null)throw new TypeError("Class extends value "+String(Rt)+" is not a constructor or null");function Mt(){this.constructor=Et}ht(Et,Rt),Et.prototype=Rt===null?Object.create(Rt):(Mt.prototype=Rt.prototype,new Mt)});Object.defineProperty(rt,"__esModule",{value:!0}),rt.ExportDataRequestValidator=void 0;var At=bt(3),Ct=bt(4),dt=function(Et){function Rt(){return Et!==null&&Et.apply(this,arguments)||this}return wt(Rt,Et),Rt.prototype.validate=function(Mt,_t,kt){if(Mt==null)return null;var nt=Et.prototype.validate.call(this,Mt,_t,kt);if(nt)return nt;var s=[{field:"rows",validators:[new Ct.NumberValidator]},{field:"exportDataType",validators:[new Ct.EnumValidator([0,1])]}];return new At.MultipleFieldsValidator(s).validate(Mt,_t,kt)},Rt}(Ct.ObjectValidator);rt.ExportDataRequestValidator=dt},function(vt,rt,bt){var ht,wt=this&&this.__extends||(ht=function(_e,it){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(pt,mt){pt.__proto__=mt}||function(pt,mt){for(var lt in mt)Object.prototype.hasOwnProperty.call(mt,lt)&&(pt[lt]=mt[lt])},ht(_e,it)},function(_e,it){if(typeof it!="function"&&it!==null)throw new TypeError("Class extends value "+String(it)+" is not a constructor or null");function pt(){this.constructor=_e}ht(_e,it),_e.prototype=it===null?Object.create(it):(pt.prototype=it.prototype,new pt)});Object.defineProperty(rt,"__esModule",{value:!0}),rt.ExtensionsValidator=rt.MenuGroupExtensionValidator=rt.ExtensionValidator=rt.CommandExtensionValidator=rt.ExtensionItemValidator=rt.ExtensionPointsValidator=rt.GroupedMenuExtensionValidator=rt.FlatMenuExtensionValidator=rt.MenuExtensionBaseValidator=void 0;var At=bt(3),Ct=bt(4),dt=bt(1),Et=function(_e){function it(){return _e!==null&&_e.apply(this,arguments)||this}return wt(it,_e),it.prototype.validate=function(pt,mt,lt){if(pt==null)return null;var _=_e.prototype.validate.call(this,pt,mt,lt);if(_)return _;var tt=[{field:"title",validators:[dt.Validators.stringValidator]},{field:"icon",validators:[dt.Validators.stringValidator]}];return new At.MultipleFieldsValidator(tt).validate(pt,mt,lt)},it}(Ct.ObjectValidator);rt.MenuExtensionBaseValidator=Et;var Rt=function(_e){function it(){return _e!==null&&_e.apply(this,arguments)||this}return wt(it,_e),it.prototype.validate=function(pt,mt,lt){if(pt==null)return null;var _=_e.prototype.validate.call(this,pt,mt,lt);if(_)return _;var tt=[{field:"menuLocation",validators:[dt.Validators.menuLocationValidator]},{field:"groupName",validators:[dt.Validators.fieldForbiddenValidator]}];return new At.MultipleFieldsValidator(tt).validate(pt,mt,lt)},it}(Et);rt.FlatMenuExtensionValidator=Rt;var Mt=function(_e){function it(){return _e!==null&&_e.apply(this,arguments)||this}return wt(it,_e),it.prototype.validate=function(pt,mt,lt){if(pt==null)return null;var _=_e.prototype.validate.call(this,pt,mt,lt);if(_)return _;var tt=[{field:"groupName",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.stringValidator]},{field:"menuLocation",validators:[dt.Validators.fieldForbiddenValidator]}];return new At.MultipleFieldsValidator(tt).validate(pt,mt,lt)},it}(Et);rt.GroupedMenuExtensionValidator=Mt;var _t=function(_e){function it(){return _e!==null&&_e.apply(this,arguments)||this}return wt(it,_e),it.prototype.validate=function(pt,mt,lt){if(pt==null)return null;var _=_e.prototype.validate.call(this,pt,mt,lt);if(_)return _;var tt=[{field:"visualContextMenu",validators:[dt.Validators.menuExtensionValidator]},{field:"visualOptionsMenu",validators:[dt.Validators.menuExtensionValidator]}];return new At.MultipleFieldsValidator(tt).validate(pt,mt,lt)},it}(Ct.ObjectValidator);rt.ExtensionPointsValidator=_t;var kt=function(_e){function it(){return _e!==null&&_e.apply(this,arguments)||this}return wt(it,_e),it.prototype.validate=function(pt,mt,lt){if(pt==null)return null;var _=_e.prototype.validate.call(this,pt,mt,lt);if(_)return _;var tt=[{field:"name",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.stringValidator]},{field:"extend",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.extensionPointsValidator]}];return new At.MultipleFieldsValidator(tt).validate(pt,mt,lt)},it}(Ct.ObjectValidator);rt.ExtensionItemValidator=kt;var nt=function(_e){function it(){return _e!==null&&_e.apply(this,arguments)||this}return wt(it,_e),it.prototype.validate=function(pt,mt,lt){if(pt==null)return null;var _=_e.prototype.validate.call(this,pt,mt,lt);if(_)return _;var tt=[{field:"title",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.stringValidator]},{field:"icon",validators:[dt.Validators.stringValidator]},{field:"selector",validators:[dt.Validators.commandExtensionSelectorValidator]}];return new At.MultipleFieldsValidator(tt).validate(pt,mt,lt)},it}(kt);rt.CommandExtensionValidator=nt;var s=function(_e){function it(){return _e!==null&&_e.apply(this,arguments)||this}return wt(it,_e),it.prototype.validate=function(pt,mt,lt){if(pt==null)return null;var _=_e.prototype.validate.call(this,pt,mt,lt);if(_)return _;var tt=[{field:"command",validators:[dt.Validators.commandExtensionValidator]}];return new At.MultipleFieldsValidator(tt).validate(pt,mt,lt)},it}(Ct.ObjectValidator);rt.ExtensionValidator=s;var b=function(_e){function it(){return _e!==null&&_e.apply(this,arguments)||this}return wt(it,_e),it.prototype.validate=function(pt,mt,lt){if(pt==null)return null;var _=_e.prototype.validate.call(this,pt,mt,lt);if(_)return _;var tt=[{field:"name",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.stringValidator]},{field:"title",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.stringValidator]},{field:"menuLocation",validators:[dt.Validators.menuLocationValidator]}];return new At.MultipleFieldsValidator(tt).validate(pt,mt,lt)},it}(Ct.ObjectValidator);rt.MenuGroupExtensionValidator=b;var $=function(_e){function it(){return _e!==null&&_e.apply(this,arguments)||this}return wt(it,_e),it.prototype.validate=function(pt,mt,lt){if(pt==null)return null;var _=_e.prototype.validate.call(this,pt,mt,lt);if(_)return _;var tt=[{field:"commands",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.commandExtensionArrayValidator]},{field:"groups",validators:[dt.Validators.menuGroupExtensionArrayValidator]}];return new At.MultipleFieldsValidator(tt).validate(pt,mt,lt)},it}(Ct.ObjectValidator);rt.ExtensionsValidator=$},function(vt,rt,bt){var ht,wt=this&&this.__extends||(ht=function(jt,Ht){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Bt,Jt){Bt.__proto__=Jt}||function(Bt,Jt){for(var sr in Jt)Object.prototype.hasOwnProperty.call(Jt,sr)&&(Bt[sr]=Jt[sr])},ht(jt,Ht)},function(jt,Ht){if(typeof Ht!="function"&&Ht!==null)throw new TypeError("Class extends value "+String(Ht)+" is not a constructor or null");function Bt(){this.constructor=jt}ht(jt,Ht),jt.prototype=Ht===null?Object.create(Ht):(Bt.prototype=Ht.prototype,new Bt)});Object.defineProperty(rt,"__esModule",{value:!0}),rt.OnLoadFiltersValidator=rt.OnLoadFiltersBaseRemoveOperationValidator=rt.OnLoadFiltersBaseValidator=rt.ConditionItemValidator=rt.RemoveFiltersRequestValidator=rt.UpdateFiltersRequestValidator=rt.FilterValidator=rt.HierarchyFilterNodeValidator=rt.HierarchyFilterValidator=rt.IncludeExcludeFilterValidator=rt.NotSupportedFilterValidator=rt.TopNFilterValidator=rt.RelativeTimeFilterValidator=rt.RelativeDateFilterValidator=rt.RelativeDateTimeFilterValidator=rt.AdvancedFilterValidator=rt.BasicFilterValidator=rt.FilterValidatorBase=rt.FilterDisplaySettingsValidator=rt.FilterMeasureTargetValidator=rt.FilterKeyHierarchyTargetValidator=rt.FilterHierarchyTargetValidator=rt.FilterKeyColumnsTargetValidator=rt.FilterColumnTargetValidator=void 0;var At=bt(3),Ct=bt(4),dt=bt(1),Et=function(jt){function Ht(){return jt!==null&&jt.apply(this,arguments)||this}return wt(Ht,jt),Ht.prototype.validate=function(Bt,Jt,sr){if(Bt==null)return null;var hr=jt.prototype.validate.call(this,Bt,Jt,sr);if(hr)return hr;var Ar=[{field:"table",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.stringValidator]},{field:"column",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.stringValidator]}];return new At.MultipleFieldsValidator(Ar).validate(Bt,Jt,sr)},Ht}(Ct.ObjectValidator);rt.FilterColumnTargetValidator=Et;var Rt=function(jt){function Ht(){return jt!==null&&jt.apply(this,arguments)||this}return wt(Ht,jt),Ht.prototype.validate=function(Bt,Jt,sr){if(Bt==null)return null;var hr=jt.prototype.validate.call(this,Bt,Jt,sr);if(hr)return hr;var Ar=[{field:"keys",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.stringArrayValidator]}];return new At.MultipleFieldsValidator(Ar).validate(Bt,Jt,sr)},Ht}(Et);rt.FilterKeyColumnsTargetValidator=Rt;var Mt=function(jt){function Ht(){return jt!==null&&jt.apply(this,arguments)||this}return wt(Ht,jt),Ht.prototype.validate=function(Bt,Jt,sr){if(Bt==null)return null;var hr=jt.prototype.validate.call(this,Bt,Jt,sr);if(hr)return hr;var Ar=[{field:"table",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.stringValidator]},{field:"hierarchy",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.stringValidator]},{field:"hierarchyLevel",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.stringValidator]}];return new At.MultipleFieldsValidator(Ar).validate(Bt,Jt,sr)},Ht}(Ct.ObjectValidator);rt.FilterHierarchyTargetValidator=Mt;var _t=function(jt){function Ht(){return jt!==null&&jt.apply(this,arguments)||this}return wt(Ht,jt),Ht.prototype.validate=function(Bt,Jt,sr){if(Bt==null)return null;var hr=jt.prototype.validate.call(this,Bt,Jt,sr);if(hr)return hr;var Ar=[{field:"keys",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.stringArrayValidator]}];return new At.MultipleFieldsValidator(Ar).validate(Bt,Jt,sr)},Ht}(Mt);rt.FilterKeyHierarchyTargetValidator=_t;var kt=function(jt){function Ht(){return jt!==null&&jt.apply(this,arguments)||this}return wt(Ht,jt),Ht.prototype.validate=function(Bt,Jt,sr){if(Bt==null)return null;var hr=jt.prototype.validate.call(this,Bt,Jt,sr);if(hr)return hr;var Ar=[{field:"table",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.stringValidator]},{field:"measure",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.stringValidator]}];return new At.MultipleFieldsValidator(Ar).validate(Bt,Jt,sr)},Ht}(Ct.ObjectValidator);rt.FilterMeasureTargetValidator=kt;var nt=function(jt){function Ht(){return jt!==null&&jt.apply(this,arguments)||this}return wt(Ht,jt),Ht.prototype.validate=function(Bt,Jt,sr){if(Bt==null)return null;var hr=jt.prototype.validate.call(this,Bt,Jt,sr);if(hr)return hr;var Ar=[{field:"isLockedInViewMode",validators:[dt.Validators.booleanValidator]},{field:"isHiddenInViewMode",validators:[dt.Validators.booleanValidator]},{field:"displayName",validators:[dt.Validators.stringValidator]}];return new At.MultipleFieldsValidator(Ar).validate(Bt,Jt,sr)},Ht}(Ct.ObjectValidator);rt.FilterDisplaySettingsValidator=nt;var s=function(jt){function Ht(){return jt!==null&&jt.apply(this,arguments)||this}return wt(Ht,jt),Ht.prototype.validate=function(Bt,Jt,sr){if(Bt==null)return null;var hr=jt.prototype.validate.call(this,Bt,Jt,sr);if(hr)return hr;var Ar=[{field:"target",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.filterTargetValidator]},{field:"$schema",validators:[dt.Validators.stringValidator]},{field:"filterType",validators:[dt.Validators.filterTypeValidator]},{field:"displaySettings",validators:[dt.Validators.filterDisplaySettingsValidator]}];return new At.MultipleFieldsValidator(Ar).validate(Bt,Jt,sr)},Ht}(Ct.ObjectValidator);rt.FilterValidatorBase=s;var b=function(jt){function Ht(){return jt!==null&&jt.apply(this,arguments)||this}return wt(Ht,jt),Ht.prototype.validate=function(Bt,Jt,sr){if(Bt==null)return null;var hr=jt.prototype.validate.call(this,Bt,Jt,sr);if(hr)return hr;var Ar=[{field:"operator",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.stringValidator]},{field:"values",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.anyArrayValidator]},{field:"filterType",validators:[dt.Validators.basicFilterTypeValidator]},{field:"requireSingleSelection",validators:[dt.Validators.booleanValidator]}];return new At.MultipleFieldsValidator(Ar).validate(Bt,Jt,sr)},Ht}(s);rt.BasicFilterValidator=b;var $=function(jt){function Ht(){return jt!==null&&jt.apply(this,arguments)||this}return wt(Ht,jt),Ht.prototype.validate=function(Bt,Jt,sr){if(Bt==null)return null;var hr=jt.prototype.validate.call(this,Bt,Jt,sr);if(hr)return hr;var Ar=[{field:"logicalOperator",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.stringValidator]},{field:"conditions",validators:[dt.Validators.filterConditionsValidator]},{field:"filterType",validators:[dt.Validators.advancedFilterTypeValidator]}];return new At.MultipleFieldsValidator(Ar).validate(Bt,Jt,sr)},Ht}(s);rt.AdvancedFilterValidator=$;var _e=function(jt){function Ht(){return jt!==null&&jt.apply(this,arguments)||this}return wt(Ht,jt),Ht.prototype.validate=function(Bt,Jt,sr){if(Bt==null)return null;var hr=jt.prototype.validate.call(this,Bt,Jt,sr);if(hr)return hr;var Ar=[{field:"operator",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.relativeDateFilterOperatorValidator]},{field:"timeUnitsCount",validators:[dt.Validators.numberValidator]},{field:"timeUnitType",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.relativeDateTimeFilterUnitTypeValidator]},{field:"filterType",validators:[dt.Validators.relativeDateTimeFilterTypeValidator]}];return new At.MultipleFieldsValidator(Ar).validate(Bt,Jt,sr)},Ht}(s);rt.RelativeDateTimeFilterValidator=_e;var it=function(jt){function Ht(){return jt!==null&&jt.apply(this,arguments)||this}return wt(Ht,jt),Ht.prototype.validate=function(Bt,Jt,sr){if(Bt==null)return null;var hr=jt.prototype.validate.call(this,Bt,Jt,sr);if(hr)return hr;var Ar=[{field:"includeToday",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.booleanValidator]},{field:"timeUnitType",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.relativeDateFilterTimeUnitTypeValidator]},{field:"filterType",validators:[dt.Validators.relativeDateFilterTypeValidator]}];return new At.MultipleFieldsValidator(Ar).validate(Bt,Jt,sr)},Ht}(_e);rt.RelativeDateFilterValidator=it;var pt=function(jt){function Ht(){return jt!==null&&jt.apply(this,arguments)||this}return wt(Ht,jt),Ht.prototype.validate=function(Bt,Jt,sr){if(Bt==null)return null;var hr=jt.prototype.validate.call(this,Bt,Jt,sr);if(hr)return hr;var Ar=[{field:"timeUnitType",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.relativeTimeFilterTimeUnitTypeValidator]},{field:"filterType",validators:[dt.Validators.relativeTimeFilterTypeValidator]}];return new At.MultipleFieldsValidator(Ar).validate(Bt,Jt,sr)},Ht}(_e);rt.RelativeTimeFilterValidator=pt;var mt=function(jt){function Ht(){return jt!==null&&jt.apply(this,arguments)||this}return wt(Ht,jt),Ht.prototype.validate=function(Bt,Jt,sr){if(Bt==null)return null;var hr=jt.prototype.validate.call(this,Bt,Jt,sr);if(hr)return hr;var Ar=[{field:"operator",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.stringValidator]},{field:"itemCount",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.numberValidator]},{field:"filterType",validators:[dt.Validators.topNFilterTypeValidator]},{field:"orderBy",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.filterTargetValidator]}];return new At.MultipleFieldsValidator(Ar).validate(Bt,Jt,sr)},Ht}(s);rt.TopNFilterValidator=mt;var lt=function(jt){function Ht(){return jt!==null&&jt.apply(this,arguments)||this}return wt(Ht,jt),Ht.prototype.validate=function(Bt,Jt,sr){if(Bt==null)return null;var hr=jt.prototype.validate.call(this,Bt,Jt,sr);if(hr)return hr;var Ar=[{field:"message",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.stringValidator]},{field:"notSupportedTypeName",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.stringValidator]},{field:"filterType",validators:[dt.Validators.notSupportedFilterTypeValidator]}];return new At.MultipleFieldsValidator(Ar).validate(Bt,Jt,sr)},Ht}(s);rt.NotSupportedFilterValidator=lt;var _=function(jt){function Ht(){return jt!==null&&jt.apply(this,arguments)||this}return wt(Ht,jt),Ht.prototype.validate=function(Bt,Jt,sr){if(Bt==null)return null;var hr=jt.prototype.validate.call(this,Bt,Jt,sr);if(hr)return hr;var Ar=[{field:"isExclude",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.booleanValidator]},{field:"values",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.anyArrayValidator]},{field:"filterType",validators:[dt.Validators.includeExludeFilterTypeValidator]}];return new At.MultipleFieldsValidator(Ar).validate(Bt,Jt,sr)},Ht}(s);rt.IncludeExcludeFilterValidator=_;var tt=function(jt){function Ht(){return jt!==null&&jt.apply(this,arguments)||this}return wt(Ht,jt),Ht.prototype.validate=function(Bt,Jt,sr){if(Bt==null)return null;var hr=jt.prototype.validate.call(this,Bt,Jt,sr);if(hr)return hr;var Ar=[{field:"hierarchyData",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.hierarchyFilterValuesValidator]},{field:"filterType",validators:[dt.Validators.hierarchyFilterTypeValidator]}];return new At.MultipleFieldsValidator(Ar).validate(Bt,Jt,sr)},Ht}(s);rt.HierarchyFilterValidator=tt;var Tt=function(jt){function Ht(){return jt!==null&&jt.apply(this,arguments)||this}return wt(Ht,jt),Ht.prototype.validate=function(Bt,Jt,sr){if(Bt==null)return null;var hr=jt.prototype.validate.call(this,Bt,Jt,sr);if(hr)return hr;var Ar=[{field:"value",validators:[dt.Validators.anyValueValidator]},{field:"keyValues",validators:[dt.Validators.anyArrayValidator]},{field:"children",validators:[dt.Validators.hierarchyFilterValuesValidator]},{field:"operator",validators:[dt.Validators.stringValidator]}];return new At.MultipleFieldsValidator(Ar).validate(Bt,Jt,sr)},Ht}(Ct.ObjectValidator);rt.HierarchyFilterNodeValidator=Tt;var It=function(jt){function Ht(){return jt!==null&&jt.apply(this,arguments)||this}return wt(Ht,jt),Ht.prototype.validate=function(Bt,Jt,sr){return Bt==null?null:jt.prototype.validate.call(this,Bt,Jt,sr)||dt.Validators.anyFilterValidator.validate(Bt,Jt,sr)},Ht}(Ct.ObjectValidator);rt.FilterValidator=It;var Nt=function(jt){function Ht(){return jt!==null&&jt.apply(this,arguments)||this}return wt(Ht,jt),Ht.prototype.validate=function(Bt,Jt,sr){if(Bt==null)return null;var hr=jt.prototype.validate.call(this,Bt,Jt,sr);if(hr)return hr;var Ar=[{field:"filtersOperation",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.filtersOperationsUpdateValidator]},{field:"filters",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.filtersArrayValidator]}];return new At.MultipleFieldsValidator(Ar).validate(Bt,Jt,sr)},Ht}(Ct.ObjectValidator);rt.UpdateFiltersRequestValidator=Nt;var Ut=function(jt){function Ht(){return jt!==null&&jt.apply(this,arguments)||this}return wt(Ht,jt),Ht.prototype.validate=function(Bt,Jt,sr){if(Bt==null)return null;var hr=jt.prototype.validate.call(this,Bt,Jt,sr);if(hr)return hr;var Ar=[{field:"filtersOperation",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.filtersOperationsRemoveAllValidator]},{field:"filters",validators:[dt.Validators.fieldForbiddenValidator,dt.Validators.filtersArrayValidator]}];return new At.MultipleFieldsValidator(Ar).validate(Bt,Jt,sr)},Ht}(Ct.ObjectValidator);rt.RemoveFiltersRequestValidator=Ut;var Gt=function(jt){function Ht(){return jt!==null&&jt.apply(this,arguments)||this}return wt(Ht,jt),Ht.prototype.validate=function(Bt,Jt,sr){if(Bt==null)return null;var hr=jt.prototype.validate.call(this,Bt,Jt,sr);if(hr)return hr;var Ar=[{field:"value",validators:[dt.Validators.anyValueValidator]},{field:"operator",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.stringValidator]}];return new At.MultipleFieldsValidator(Ar).validate(Bt,Jt,sr)},Ht}(Ct.ObjectValidator);rt.ConditionItemValidator=Gt;var Pt=function(jt){function Ht(){return jt!==null&&jt.apply(this,arguments)||this}return wt(Ht,jt),Ht.prototype.validate=function(Bt,Jt,sr){if(Bt==null)return null;var hr=jt.prototype.validate.call(this,Bt,Jt,sr);if(hr)return hr;var Ar=[{field:"operation",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.filtersOperationsUpdateValidator]},{field:"filters",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.filtersArrayValidator]}];return new At.MultipleFieldsValidator(Ar).validate(Bt,Jt,sr)},Ht}(Ct.ObjectValidator);rt.OnLoadFiltersBaseValidator=Pt;var qt=function(jt){function Ht(){return jt!==null&&jt.apply(this,arguments)||this}return wt(Ht,jt),Ht.prototype.validate=function(Bt,Jt,sr){if(Bt==null)return null;var hr=jt.prototype.validate.call(this,Bt,Jt,sr);if(hr)return hr;var Ar=[{field:"operation",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.filtersOperationsRemoveAllValidator]},{field:"filters",validators:[dt.Validators.fieldForbiddenValidator,dt.Validators.filtersArrayValidator]}];return new At.MultipleFieldsValidator(Ar).validate(Bt,Jt,sr)},Ht}(Ct.ObjectValidator);rt.OnLoadFiltersBaseRemoveOperationValidator=qt;var Kt=function(jt){function Ht(){return jt!==null&&jt.apply(this,arguments)||this}return wt(Ht,jt),Ht.prototype.validate=function(Bt,Jt,sr){if(Bt==null)return null;var hr=jt.prototype.validate.call(this,Bt,Jt,sr);if(hr)return hr;var Ar=[{field:"allPages",validators:[dt.Validators.onLoadFiltersBaseValidator]},{field:"currentPage",validators:[dt.Validators.onLoadFiltersBaseValidator]}];return new At.MultipleFieldsValidator(Ar).validate(Bt,Jt,sr)},Ht}(Ct.ObjectValidator);rt.OnLoadFiltersValidator=Kt},function(vt,rt,bt){var ht,wt=this&&this.__extends||(ht=function(kt,nt){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,b){s.__proto__=b}||function(s,b){for(var $ in b)Object.prototype.hasOwnProperty.call(b,$)&&(s[$]=b[$])},ht(kt,nt)},function(kt,nt){if(typeof nt!="function"&&nt!==null)throw new TypeError("Class extends value "+String(nt)+" is not a constructor or null");function s(){this.constructor=kt}ht(kt,nt),kt.prototype=nt===null?Object.create(nt):(s.prototype=nt.prototype,new s)});Object.defineProperty(rt,"__esModule",{value:!0}),rt.PageLayoutValidator=rt.DisplayStateValidator=rt.VisualLayoutValidator=rt.CustomLayoutValidator=void 0;var At=bt(3),Ct=bt(4),dt=bt(1),Et=function(kt){function nt(){return kt!==null&&kt.apply(this,arguments)||this}return wt(nt,kt),nt.prototype.validate=function(s,b,$){if(s==null)return null;var _e=kt.prototype.validate.call(this,s,b,$);if(_e)return _e;var it=[{field:"pageSize",validators:[dt.Validators.pageSizeValidator]},{field:"displayOption",validators:[dt.Validators.customLayoutDisplayOptionValidator]},{field:"pagesLayout",validators:[dt.Validators.pagesLayoutValidator]}];return new At.MultipleFieldsValidator(it).validate(s,b,$)},nt}(Ct.ObjectValidator);rt.CustomLayoutValidator=Et;var Rt=function(kt){function nt(){return kt!==null&&kt.apply(this,arguments)||this}return wt(nt,kt),nt.prototype.validate=function(s,b,$){if(s==null)return null;var _e=kt.prototype.validate.call(this,s,b,$);if(_e)return _e;var it=[{field:"x",validators:[dt.Validators.numberValidator]},{field:"y",validators:[dt.Validators.numberValidator]},{field:"z",validators:[dt.Validators.numberValidator]},{field:"width",validators:[dt.Validators.numberValidator]},{field:"height",validators:[dt.Validators.numberValidator]},{field:"displayState",validators:[dt.Validators.displayStateValidator]}];return new At.MultipleFieldsValidator(it).validate(s,b,$)},nt}(Ct.ObjectValidator);rt.VisualLayoutValidator=Rt;var Mt=function(kt){function nt(){return kt!==null&&kt.apply(this,arguments)||this}return wt(nt,kt),nt.prototype.validate=function(s,b,$){if(s==null)return null;var _e=kt.prototype.validate.call(this,s,b,$);if(_e)return _e;var it=[{field:"mode",validators:[dt.Validators.displayStateModeValidator]}];return new At.MultipleFieldsValidator(it).validate(s,b,$)},nt}(Ct.ObjectValidator);rt.DisplayStateValidator=Mt;var _t=function(kt){function nt(){return kt!==null&&kt.apply(this,arguments)||this}return wt(nt,kt),nt.prototype.validate=function(s,b,$){if(s==null)return null;var _e=kt.prototype.validate.call(this,s,b,$);if(_e)return _e;var it=[{field:"visualsLayout",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.pageLayoutValidator]},{field:"defaultLayout",validators:[dt.Validators.visualLayoutValidator]}];return new At.MultipleFieldsValidator(it).validate(s,b,$)},nt}(Ct.ObjectValidator);rt.PageLayoutValidator=_t},function(vt,rt,bt){var ht,wt=this&&this.__extends||(ht=function(kt,nt){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,b){s.__proto__=b}||function(s,b){for(var $ in b)Object.prototype.hasOwnProperty.call(b,$)&&(s[$]=b[$])},ht(kt,nt)},function(kt,nt){if(typeof nt!="function"&&nt!==null)throw new TypeError("Class extends value "+String(nt)+" is not a constructor or null");function s(){this.constructor=kt}ht(kt,nt),kt.prototype=nt===null?Object.create(nt):(s.prototype=nt.prototype,new s)});Object.defineProperty(rt,"__esModule",{value:!0}),rt.PageViewFieldValidator=rt.PageValidator=rt.CustomPageSizeValidator=rt.PageSizeValidator=void 0;var At=bt(3),Ct=bt(4),dt=bt(1),Et=function(kt){function nt(){return kt!==null&&kt.apply(this,arguments)||this}return wt(nt,kt),nt.prototype.validate=function(s,b,$){if(s==null)return null;var _e=kt.prototype.validate.call(this,s,b,$);if(_e)return _e;var it=[{field:"type",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.pageSizeTypeValidator]}];return new At.MultipleFieldsValidator(it).validate(s,b,$)},nt}(Ct.ObjectValidator);rt.PageSizeValidator=Et;var Rt=function(kt){function nt(){return kt!==null&&kt.apply(this,arguments)||this}return wt(nt,kt),nt.prototype.validate=function(s,b,$){if(s==null)return null;var _e=kt.prototype.validate.call(this,s,b,$);if(_e)return _e;var it=[{field:"width",validators:[dt.Validators.numberValidator]},{field:"height",validators:[dt.Validators.numberValidator]}];return new At.MultipleFieldsValidator(it).validate(s,b,$)},nt}(Et);rt.CustomPageSizeValidator=Rt;var Mt=function(kt){function nt(){return kt!==null&&kt.apply(this,arguments)||this}return wt(nt,kt),nt.prototype.validate=function(s,b,$){if(s==null)return null;var _e=kt.prototype.validate.call(this,s,b,$);if(_e)return _e;var it=[{field:"name",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.stringValidator]}];return new At.MultipleFieldsValidator(it).validate(s,b,$)},nt}(Ct.ObjectValidator);rt.PageValidator=Mt;var _t=function(kt){function nt(){return kt!==null&&kt.apply(this,arguments)||this}return wt(nt,kt),nt.prototype.validate=function(s,b,$){return s==null?null:kt.prototype.validate.call(this,s,b,$)||(["actualSize","fitToWidth","oneColumn"].indexOf(s)<0?[{message:'pageView must be a string with one of the following values: "actualSize", "fitToWidth", "oneColumn"'}]:null)},nt}(Ct.StringValidator);rt.PageViewFieldValidator=_t},function(vt,rt,bt){var ht,wt=this&&this.__extends||(ht=function(_e,it){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(pt,mt){pt.__proto__=mt}||function(pt,mt){for(var lt in mt)Object.prototype.hasOwnProperty.call(mt,lt)&&(pt[lt]=mt[lt])},ht(_e,it)},function(_e,it){if(typeof it!="function"&&it!==null)throw new TypeError("Class extends value "+String(it)+" is not a constructor or null");function pt(){this.constructor=_e}ht(_e,it),_e.prototype=it===null?Object.create(it):(pt.prototype=it.prototype,new pt)});Object.defineProperty(rt,"__esModule",{value:!0}),rt.VisualizationsPaneValidator=rt.SyncSlicersPaneValidator=rt.SelectionPaneValidator=rt.PageNavigationPaneValidator=rt.FiltersPaneValidator=rt.FieldsPaneValidator=rt.BookmarksPaneValidator=rt.QnaPanesValidator=rt.ReportPanesValidator=void 0;var At=bt(3),Ct=bt(4),dt=bt(1),Et=function(_e){function it(){return _e!==null&&_e.apply(this,arguments)||this}return wt(it,_e),it.prototype.validate=function(pt,mt,lt){if(pt==null)return null;var _=_e.prototype.validate.call(this,pt,mt,lt);if(_)return _;var tt=[{field:"bookmarks",validators:[dt.Validators.bookmarksPaneValidator]},{field:"fields",validators:[dt.Validators.fieldsPaneValidator]},{field:"filters",validators:[dt.Validators.filtersPaneValidator]},{field:"pageNavigation",validators:[dt.Validators.pageNavigationPaneValidator]},{field:"selection",validators:[dt.Validators.selectionPaneValidator]},{field:"syncSlicers",validators:[dt.Validators.syncSlicersPaneValidator]},{field:"visualizations",validators:[dt.Validators.visualizationsPaneValidator]}];return new At.MultipleFieldsValidator(tt).validate(pt,mt,lt)},it}(Ct.ObjectValidator);rt.ReportPanesValidator=Et;var Rt=function(_e){function it(){return _e!==null&&_e.apply(this,arguments)||this}return wt(it,_e),it.prototype.validate=function(pt,mt,lt){if(pt==null)return null;var _=_e.prototype.validate.call(this,pt,mt,lt);if(_)return _;var tt=[{field:"filters",validators:[dt.Validators.filtersPaneValidator]}];return new At.MultipleFieldsValidator(tt).validate(pt,mt,lt)},it}(Ct.ObjectValidator);rt.QnaPanesValidator=Rt;var Mt=function(_e){function it(){return _e!==null&&_e.apply(this,arguments)||this}return wt(it,_e),it.prototype.validate=function(pt,mt,lt){if(pt==null)return null;var _=_e.prototype.validate.call(this,pt,mt,lt);if(_)return _;var tt=[{field:"visible",validators:[dt.Validators.booleanValidator]}];return new At.MultipleFieldsValidator(tt).validate(pt,mt,lt)},it}(Ct.ObjectValidator);rt.BookmarksPaneValidator=Mt;var _t=function(_e){function it(){return _e!==null&&_e.apply(this,arguments)||this}return wt(it,_e),it.prototype.validate=function(pt,mt,lt){if(pt==null)return null;var _=_e.prototype.validate.call(this,pt,mt,lt);if(_)return _;var tt=[{field:"expanded",validators:[dt.Validators.booleanValidator]}];return new At.MultipleFieldsValidator(tt).validate(pt,mt,lt)},it}(Ct.ObjectValidator);rt.FieldsPaneValidator=_t;var kt=function(_e){function it(){return _e!==null&&_e.apply(this,arguments)||this}return wt(it,_e),it.prototype.validate=function(pt,mt,lt){if(pt==null)return null;var _=_e.prototype.validate.call(this,pt,mt,lt);if(_)return _;var tt=[{field:"visible",validators:[dt.Validators.booleanValidator]},{field:"expanded",validators:[dt.Validators.booleanValidator]}];return new At.MultipleFieldsValidator(tt).validate(pt,mt,lt)},it}(Ct.ObjectValidator);rt.FiltersPaneValidator=kt;var nt=function(_e){function it(){return _e!==null&&_e.apply(this,arguments)||this}return wt(it,_e),it.prototype.validate=function(pt,mt,lt){if(pt==null)return null;var _=_e.prototype.validate.call(this,pt,mt,lt);if(_)return _;var tt=[{field:"visible",validators:[dt.Validators.booleanValidator]},{field:"position",validators:[dt.Validators.pageNavigationPositionValidator]}];return new At.MultipleFieldsValidator(tt).validate(pt,mt,lt)},it}(Ct.ObjectValidator);rt.PageNavigationPaneValidator=nt;var s=function(_e){function it(){return _e!==null&&_e.apply(this,arguments)||this}return wt(it,_e),it.prototype.validate=function(pt,mt,lt){if(pt==null)return null;var _=_e.prototype.validate.call(this,pt,mt,lt);if(_)return _;var tt=[{field:"visible",validators:[dt.Validators.booleanValidator]}];return new At.MultipleFieldsValidator(tt).validate(pt,mt,lt)},it}(Ct.ObjectValidator);rt.SelectionPaneValidator=s;var b=function(_e){function it(){return _e!==null&&_e.apply(this,arguments)||this}return wt(it,_e),it.prototype.validate=function(pt,mt,lt){if(pt==null)return null;var _=_e.prototype.validate.call(this,pt,mt,lt);if(_)return _;var tt=[{field:"visible",validators:[dt.Validators.booleanValidator]}];return new At.MultipleFieldsValidator(tt).validate(pt,mt,lt)},it}(Ct.ObjectValidator);rt.SyncSlicersPaneValidator=b;var $=function(_e){function it(){return _e!==null&&_e.apply(this,arguments)||this}return wt(it,_e),it.prototype.validate=function(pt,mt,lt){if(pt==null)return null;var _=_e.prototype.validate.call(this,pt,mt,lt);if(_)return _;var tt=[{field:"expanded",validators:[dt.Validators.booleanValidator]}];return new At.MultipleFieldsValidator(tt).validate(pt,mt,lt)},it}(Ct.ObjectValidator);rt.VisualizationsPaneValidator=$},function(vt,rt,bt){var ht,wt=this&&this.__extends||(ht=function(_t,kt){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(nt,s){nt.__proto__=s}||function(nt,s){for(var b in s)Object.prototype.hasOwnProperty.call(s,b)&&(nt[b]=s[b])},ht(_t,kt)},function(_t,kt){if(typeof kt!="function"&&kt!==null)throw new TypeError("Class extends value "+String(kt)+" is not a constructor or null");function nt(){this.constructor=_t}ht(_t,kt),_t.prototype=kt===null?Object.create(kt):(nt.prototype=kt.prototype,new nt)});Object.defineProperty(rt,"__esModule",{value:!0}),rt.QnaInterpretInputDataValidator=rt.QnaSettingsValidator=rt.LoadQnaValidator=void 0;var At=bt(3),Ct=bt(4),dt=bt(1),Et=function(_t){function kt(){return _t!==null&&_t.apply(this,arguments)||this}return wt(kt,_t),kt.prototype.validate=function(nt,s,b){if(nt==null)return null;var $=_t.prototype.validate.call(this,nt,s,b);if($)return $;var _e=[{field:"accessToken",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.stringValidator]},{field:"datasetIds",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.stringArrayValidator]},{field:"question",validators:[dt.Validators.stringValidator]},{field:"viewMode",validators:[dt.Validators.viewModeValidator]},{field:"settings",validators:[dt.Validators.qnaSettingValidator]},{field:"tokenType",validators:[dt.Validators.tokenTypeValidator]},{field:"groupId",validators:[dt.Validators.stringValidator]}];return new At.MultipleFieldsValidator(_e).validate(nt,s,b)},kt}(Ct.ObjectValidator);rt.LoadQnaValidator=Et;var Rt=function(_t){function kt(){return _t!==null&&_t.apply(this,arguments)||this}return wt(kt,_t),kt.prototype.validate=function(nt,s,b){if(nt==null)return null;var $=_t.prototype.validate.call(this,nt,s,b);if($)return $;var _e=[{field:"filterPaneEnabled",validators:[dt.Validators.booleanValidator]},{field:"hideErrors",validators:[dt.Validators.booleanValidator]},{field:"panes",validators:[dt.Validators.qnaPanesValidator]}];return new At.MultipleFieldsValidator(_e).validate(nt,s,b)},kt}(Ct.ObjectValidator);rt.QnaSettingsValidator=Rt;var Mt=function(_t){function kt(){return _t!==null&&_t.apply(this,arguments)||this}return wt(kt,_t),kt.prototype.validate=function(nt,s,b){if(nt==null)return null;var $=_t.prototype.validate.call(this,nt,s,b);if($)return $;var _e=[{field:"datasetIds",validators:[dt.Validators.stringArrayValidator]},{field:"question",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.stringValidator]}];return new At.MultipleFieldsValidator(_e).validate(nt,s,b)},kt}(Ct.ObjectValidator);rt.QnaInterpretInputDataValidator=Mt},function(vt,rt,bt){var ht,wt=this&&this.__extends||(ht=function(Rt,Mt){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_t,kt){_t.__proto__=kt}||function(_t,kt){for(var nt in kt)Object.prototype.hasOwnProperty.call(kt,nt)&&(_t[nt]=kt[nt])},ht(Rt,Mt)},function(Rt,Mt){if(typeof Mt!="function"&&Mt!==null)throw new TypeError("Class extends value "+String(Mt)+" is not a constructor or null");function _t(){this.constructor=Rt}ht(Rt,Mt),Rt.prototype=Mt===null?Object.create(Mt):(_t.prototype=Mt.prototype,new _t)});Object.defineProperty(rt,"__esModule",{value:!0}),rt.ReportCreateValidator=void 0;var At=bt(3),Ct=bt(4),dt=bt(1),Et=function(Rt){function Mt(){return Rt!==null&&Rt.apply(this,arguments)||this}return wt(Mt,Rt),Mt.prototype.validate=function(_t,kt,nt){if(_t==null)return null;var s=Rt.prototype.validate.call(this,_t,kt,nt);if(s)return s;var b=[{field:"accessToken",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.stringValidator]},{field:"datasetId",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.stringValidator]},{field:"groupId",validators:[dt.Validators.stringValidator]},{field:"tokenType",validators:[dt.Validators.tokenTypeValidator]},{field:"theme",validators:[dt.Validators.customThemeValidator]}];return new At.MultipleFieldsValidator(b).validate(_t,kt,nt)},Mt}(Ct.ObjectValidator);rt.ReportCreateValidator=Et},function(vt,rt,bt){var ht,wt=this&&this.__extends||(ht=function(Rt,Mt){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_t,kt){_t.__proto__=kt}||function(_t,kt){for(var nt in kt)Object.prototype.hasOwnProperty.call(kt,nt)&&(_t[nt]=kt[nt])},ht(Rt,Mt)},function(Rt,Mt){if(typeof Mt!="function"&&Mt!==null)throw new TypeError("Class extends value "+String(Mt)+" is not a constructor or null");function _t(){this.constructor=Rt}ht(Rt,Mt),Rt.prototype=Mt===null?Object.create(Mt):(_t.prototype=Mt.prototype,new _t)});Object.defineProperty(rt,"__esModule",{value:!0}),rt.ReportLoadValidator=void 0;var At=bt(3),Ct=bt(4),dt=bt(1),Et=function(Rt){function Mt(){return Rt!==null&&Rt.apply(this,arguments)||this}return wt(Mt,Rt),Mt.prototype.validate=function(_t,kt,nt){if(_t==null)return null;var s=Rt.prototype.validate.call(this,_t,kt,nt);if(s)return s;var b=[{field:"accessToken",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.stringValidator]},{field:"id",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.stringValidator]},{field:"groupId",validators:[dt.Validators.stringValidator]},{field:"settings",validators:[dt.Validators.settingsValidator]},{field:"pageName",validators:[dt.Validators.stringValidator]},{field:"filters",validators:[dt.Validators.reportLoadFiltersValidator]},{field:"permissions",validators:[dt.Validators.permissionsValidator]},{field:"viewMode",validators:[dt.Validators.viewModeValidator]},{field:"tokenType",validators:[dt.Validators.tokenTypeValidator]},{field:"bookmark",validators:[dt.Validators.applyBookmarkValidator]},{field:"theme",validators:[dt.Validators.customThemeValidator]},{field:"embedUrl",validators:[dt.Validators.stringValidator]},{field:"datasetBinding",validators:[dt.Validators.datasetBindingValidator]},{field:"contrastMode",validators:[dt.Validators.contrastModeValidator]}];return new At.MultipleFieldsValidator(b).validate(_t,kt,nt)},Mt}(Ct.ObjectValidator);rt.ReportLoadValidator=Et},function(vt,rt,bt){var ht,wt=this&&this.__extends||(ht=function(Mt,_t){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(kt,nt){kt.__proto__=nt}||function(kt,nt){for(var s in nt)Object.prototype.hasOwnProperty.call(nt,s)&&(kt[s]=nt[s])},ht(Mt,_t)},function(Mt,_t){if(typeof _t!="function"&&_t!==null)throw new TypeError("Class extends value "+String(_t)+" is not a constructor or null");function kt(){this.constructor=Mt}ht(Mt,_t),Mt.prototype=_t===null?Object.create(_t):(kt.prototype=_t.prototype,new kt)});Object.defineProperty(rt,"__esModule",{value:!0}),rt.ReportParameterFieldsValidator=rt.PaginatedReportLoadValidator=void 0;var At=bt(3),Ct=bt(4),dt=bt(1),Et=function(Mt){function _t(){return Mt!==null&&Mt.apply(this,arguments)||this}return wt(_t,Mt),_t.prototype.validate=function(kt,nt,s){if(kt==null)return null;var b=Mt.prototype.validate.call(this,kt,nt,s);if(b)return b;var $=[{field:"accessToken",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.stringValidator]},{field:"id",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.stringValidator]},{field:"groupId",validators:[dt.Validators.stringValidator]},{field:"settings",validators:[dt.Validators.paginatedReportsettingsValidator]},{field:"tokenType",validators:[dt.Validators.tokenTypeValidator]},{field:"embedUrl",validators:[dt.Validators.stringValidator]},{field:"type",validators:[dt.Validators.stringValidator]},{field:"parameterValues",validators:[dt.Validators.parameterValuesArrayValidator]}];return new At.MultipleFieldsValidator($).validate(kt,nt,s)},_t}(Ct.ObjectValidator);rt.PaginatedReportLoadValidator=Et;var Rt=function(){function Mt(){}return Mt.prototype.validate=function(_t,kt,nt){if(_t==null)return null;var s=[{field:"name",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.stringValidator]},{field:"value",validators:[dt.Validators.stringValidator]}];return new At.MultipleFieldsValidator(s).validate(_t,kt,nt)},Mt}();rt.ReportParameterFieldsValidator=Rt},function(vt,rt,bt){var ht,wt=this&&this.__extends||(ht=function(Rt,Mt){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_t,kt){_t.__proto__=kt}||function(_t,kt){for(var nt in kt)Object.prototype.hasOwnProperty.call(kt,nt)&&(_t[nt]=kt[nt])},ht(Rt,Mt)},function(Rt,Mt){if(typeof Mt!="function"&&Mt!==null)throw new TypeError("Class extends value "+String(Mt)+" is not a constructor or null");function _t(){this.constructor=Rt}ht(Rt,Mt),Rt.prototype=Mt===null?Object.create(Mt):(_t.prototype=Mt.prototype,new _t)});Object.defineProperty(rt,"__esModule",{value:!0}),rt.SaveAsParametersValidator=void 0;var At=bt(3),Ct=bt(4),dt=bt(1),Et=function(Rt){function Mt(){return Rt!==null&&Rt.apply(this,arguments)||this}return wt(Mt,Rt),Mt.prototype.validate=function(_t,kt,nt){if(_t==null)return null;var s=Rt.prototype.validate.call(this,_t,kt,nt);if(s)return s;var b=[{field:"name",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.stringValidator]}];return new At.MultipleFieldsValidator(b).validate(_t,kt,nt)},Mt}(Ct.ObjectValidator);rt.SaveAsParametersValidator=Et},function(vt,rt,bt){var ht,wt=this&&this.__extends||(ht=function(kt,nt){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,b){s.__proto__=b}||function(s,b){for(var $ in b)Object.prototype.hasOwnProperty.call(b,$)&&(s[$]=b[$])},ht(kt,nt)},function(kt,nt){if(typeof nt!="function"&&nt!==null)throw new TypeError("Class extends value "+String(nt)+" is not a constructor or null");function s(){this.constructor=kt}ht(kt,nt),kt.prototype=nt===null?Object.create(nt):(s.prototype=nt.prototype,new s)});Object.defineProperty(rt,"__esModule",{value:!0}),rt.SlicerTargetSelectorValidator=rt.VisualTypeSelectorValidator=rt.VisualSelectorValidator=void 0;var At=bt(3),Ct=bt(4),dt=bt(4),Et=bt(1),Rt=function(kt){function nt(){return kt!==null&&kt.apply(this,arguments)||this}return wt(nt,kt),nt.prototype.validate=function(s,b,$){if(s==null)return null;var _e=kt.prototype.validate.call(this,s,b,$);if(_e)return _e;var it=[{field:"$schema",validators:[Et.Validators.stringValidator,new dt.SchemaValidator("http://powerbi.com/product/schema#visualSelector")]},{field:"visualName",validators:[Et.Validators.fieldRequiredValidator,Et.Validators.stringValidator]}];return new At.MultipleFieldsValidator(it).validate(s,b,$)},nt}(Ct.ObjectValidator);rt.VisualSelectorValidator=Rt;var Mt=function(kt){function nt(){return kt!==null&&kt.apply(this,arguments)||this}return wt(nt,kt),nt.prototype.validate=function(s,b,$){if(s==null)return null;var _e=kt.prototype.validate.call(this,s,b,$);if(_e)return _e;var it=[{field:"$schema",validators:[Et.Validators.fieldRequiredValidator,Et.Validators.stringValidator,new dt.SchemaValidator("http://powerbi.com/product/schema#visualTypeSelector")]},{field:"visualType",validators:[Et.Validators.fieldRequiredValidator,Et.Validators.stringValidator]}];return new At.MultipleFieldsValidator(it).validate(s,b,$)},nt}(Ct.ObjectValidator);rt.VisualTypeSelectorValidator=Mt;var _t=function(kt){function nt(){return kt!==null&&kt.apply(this,arguments)||this}return wt(nt,kt),nt.prototype.validate=function(s,b,$){if(s==null)return null;var _e=kt.prototype.validate.call(this,s,b,$);if(_e)return _e;var it=[{field:"$schema",validators:[Et.Validators.fieldRequiredValidator,Et.Validators.stringValidator,new dt.SchemaValidator("http://powerbi.com/product/schema#slicerTargetSelector")]},{field:"target",validators:[Et.Validators.fieldRequiredValidator,Et.Validators.slicerTargetValidator]}];return new At.MultipleFieldsValidator(it).validate(s,b,$)},nt}(Ct.ObjectValidator);rt.SlicerTargetSelectorValidator=_t},function(vt,rt,bt){var ht,wt=this&&this.__extends||(ht=function(Mt,_t){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(kt,nt){kt.__proto__=nt}||function(kt,nt){for(var s in nt)Object.prototype.hasOwnProperty.call(nt,s)&&(kt[s]=nt[s])},ht(Mt,_t)},function(Mt,_t){if(typeof _t!="function"&&_t!==null)throw new TypeError("Class extends value "+String(_t)+" is not a constructor or null");function kt(){this.constructor=Mt}ht(Mt,_t),Mt.prototype=_t===null?Object.create(_t):(kt.prototype=_t.prototype,new kt)});Object.defineProperty(rt,"__esModule",{value:!0}),rt.PaginatedReportSettingsValidator=rt.SettingsValidator=void 0;var At=bt(3),Ct=bt(4),dt=bt(1),Et=function(Mt){function _t(){return Mt!==null&&Mt.apply(this,arguments)||this}return wt(_t,Mt),_t.prototype.validate=function(kt,nt,s){if(kt==null)return null;var b=Mt.prototype.validate.call(this,kt,nt,s);if(b)return b;var $=[{field:"filterPaneEnabled",validators:[dt.Validators.booleanValidator]},{field:"navContentPaneEnabled",validators:[dt.Validators.booleanValidator]},{field:"bookmarksPaneEnabled",validators:[dt.Validators.booleanValidator]},{field:"useCustomSaveAsDialog",validators:[dt.Validators.booleanValidator]},{field:"extensions",validators:[dt.Validators.extensionsValidator]},{field:"layoutType",validators:[dt.Validators.layoutTypeValidator]},{field:"customLayout",validators:[dt.Validators.customLayoutValidator]},{field:"background",validators:[dt.Validators.backgroundValidator]},{field:"visualSettings",validators:[dt.Validators.visualSettingsValidator]},{field:"hideErrors",validators:[dt.Validators.booleanValidator]},{field:"commands",validators:[dt.Validators.commandsSettingsArrayValidator]},{field:"hyperlinkClickBehavior",validators:[dt.Validators.hyperlinkClickBehaviorValidator]},{field:"bars",validators:[dt.Validators.reportBarsValidator]},{field:"panes",validators:[dt.Validators.reportPanesValidator]},{field:"personalBookmarksEnabled",validators:[dt.Validators.booleanValidator]},{field:"persistentFiltersEnabled",validators:[dt.Validators.booleanValidator]},{field:"visualRenderedEvents",validators:[dt.Validators.booleanValidator]},{field:"authoringHintsEnabled",validators:[dt.Validators.booleanValidator]},{field:"printSettings",validators:[dt.Validators.printSettingsValidator]}];return new At.MultipleFieldsValidator($).validate(kt,nt,s)},_t}(Ct.ObjectValidator);rt.SettingsValidator=Et;var Rt=function(Mt){function _t(){return Mt!==null&&Mt.apply(this,arguments)||this}return wt(_t,Mt),_t.prototype.validate=function(kt,nt,s){if(kt==null)return null;var b=Mt.prototype.validate.call(this,kt,nt,s);if(b)return b;var $=[{field:"commands",validators:[dt.Validators.paginatedReportCommandsValidator]}];return new At.MultipleFieldsValidator($).validate(kt,nt,s)},_t}(Ct.ObjectValidator);rt.PaginatedReportSettingsValidator=Rt},function(vt,rt,bt){var ht,wt=this&&this.__extends||(ht=function(Mt,_t){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(kt,nt){kt.__proto__=nt}||function(kt,nt){for(var s in nt)Object.prototype.hasOwnProperty.call(nt,s)&&(kt[s]=nt[s])},ht(Mt,_t)},function(Mt,_t){if(typeof _t!="function"&&_t!==null)throw new TypeError("Class extends value "+String(_t)+" is not a constructor or null");function kt(){this.constructor=Mt}ht(Mt,_t),Mt.prototype=_t===null?Object.create(_t):(kt.prototype=_t.prototype,new kt)});Object.defineProperty(rt,"__esModule",{value:!0}),rt.SlicerStateValidator=rt.SlicerValidator=void 0;var At=bt(3),Ct=bt(4),dt=bt(1),Et=function(Mt){function _t(){return Mt!==null&&Mt.apply(this,arguments)||this}return wt(_t,Mt),_t.prototype.validate=function(kt,nt,s){if(kt==null)return null;var b=Mt.prototype.validate.call(this,kt,nt,s);if(b)return b;var $=[{field:"selector",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.slicerSelectorValidator]},{field:"state",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.slicerStateValidator]}];return new At.MultipleFieldsValidator($).validate(kt,nt,s)},_t}(Ct.ObjectValidator);rt.SlicerValidator=Et;var Rt=function(Mt){function _t(){return Mt!==null&&Mt.apply(this,arguments)||this}return wt(_t,Mt),_t.prototype.validate=function(kt,nt,s){if(kt==null)return null;var b=Mt.prototype.validate.call(this,kt,nt,s);if(b)return b;var $=[{field:"filters",validators:[dt.Validators.filtersArrayValidator]}];return new At.MultipleFieldsValidator($).validate(kt,nt,s)},_t}(Ct.ObjectValidator);rt.SlicerStateValidator=Rt},function(vt,rt,bt){var ht,wt=this&&this.__extends||(ht=function(Rt,Mt){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_t,kt){_t.__proto__=kt}||function(_t,kt){for(var nt in kt)Object.prototype.hasOwnProperty.call(kt,nt)&&(_t[nt]=kt[nt])},ht(Rt,Mt)},function(Rt,Mt){if(typeof Mt!="function"&&Mt!==null)throw new TypeError("Class extends value "+String(Mt)+" is not a constructor or null");function _t(){this.constructor=Rt}ht(Rt,Mt),Rt.prototype=Mt===null?Object.create(Mt):(_t.prototype=Mt.prototype,new _t)});Object.defineProperty(rt,"__esModule",{value:!0}),rt.TileLoadValidator=void 0;var At=bt(3),Ct=bt(4),dt=bt(1),Et=function(Rt){function Mt(){return Rt!==null&&Rt.apply(this,arguments)||this}return wt(Mt,Rt),Mt.prototype.validate=function(_t,kt,nt){if(_t==null)return null;var s=Rt.prototype.validate.call(this,_t,kt,nt);if(s)return s;var b=[{field:"accessToken",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.stringValidator]},{field:"id",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.stringValidator]},{field:"dashboardId",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.stringValidator]},{field:"groupId",validators:[dt.Validators.stringValidator]},{field:"pageView",validators:[dt.Validators.stringValidator]},{field:"tokenType",validators:[dt.Validators.tokenTypeValidator]},{field:"width",validators:[dt.Validators.numberValidator]},{field:"height",validators:[dt.Validators.numberValidator]}];return new At.MultipleFieldsValidator(b).validate(_t,kt,nt)},Mt}(Ct.ObjectValidator);rt.TileLoadValidator=Et},function(vt,rt,bt){var ht,wt=this&&this.__extends||(ht=function(_t,kt){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(nt,s){nt.__proto__=s}||function(nt,s){for(var b in s)Object.prototype.hasOwnProperty.call(s,b)&&(nt[b]=s[b])},ht(_t,kt)},function(_t,kt){if(typeof kt!="function"&&kt!==null)throw new TypeError("Class extends value "+String(kt)+" is not a constructor or null");function nt(){this.constructor=_t}ht(_t,kt),_t.prototype=kt===null?Object.create(kt):(nt.prototype=kt.prototype,new nt)});Object.defineProperty(rt,"__esModule",{value:!0}),rt.VisualHeaderValidator=rt.VisualHeaderSettingsValidator=rt.VisualSettingsValidator=void 0;var At=bt(3),Ct=bt(4),dt=bt(1),Et=function(_t){function kt(){return _t!==null&&_t.apply(this,arguments)||this}return wt(kt,_t),kt.prototype.validate=function(nt,s,b){if(nt==null)return null;var $=_t.prototype.validate.call(this,nt,s,b);if($)return $;var _e=[{field:"visualHeaders",validators:[dt.Validators.visualHeadersValidator]}];return new At.MultipleFieldsValidator(_e).validate(nt,s,b)},kt}(Ct.ObjectValidator);rt.VisualSettingsValidator=Et;var Rt=function(_t){function kt(){return _t!==null&&_t.apply(this,arguments)||this}return wt(kt,_t),kt.prototype.validate=function(nt,s,b){if(nt==null)return null;var $=_t.prototype.validate.call(this,nt,s,b);if($)return $;var _e=[{field:"visible",validators:[dt.Validators.booleanValidator]}];return new At.MultipleFieldsValidator(_e).validate(nt,s,b)},kt}(Ct.ObjectValidator);rt.VisualHeaderSettingsValidator=Rt;var Mt=function(_t){function kt(){return _t!==null&&_t.apply(this,arguments)||this}return wt(kt,_t),kt.prototype.validate=function(nt,s,b){if(nt==null)return null;var $=_t.prototype.validate.call(this,nt,s,b);if($)return $;var _e=[{field:"settings",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.visualHeaderSettingsValidator]},{field:"selector",validators:[dt.Validators.visualHeaderSelectorValidator]}];return new At.MultipleFieldsValidator(_e).validate(nt,s,b)},kt}(Ct.ObjectValidator);rt.VisualHeaderValidator=Mt},(vt,rt)=>{Object.defineProperty(rt,"__esModule",{value:!0}),rt.AnyOfValidator=void 0;var bt=function(){function ht(wt){this.validators=wt}return ht.prototype.validate=function(wt,At,Ct){if(wt==null)return null;for(var dt=!1,Et=0,Rt=this.validators;Et<Rt.length;Et++)if(!Rt[Et].validate(wt,At,Ct)){dt=!0;break}return dt?null:[{message:Ct+" property is invalid",path:(At?At+".":"")+Ct,keyword:"invalid"}]},ht}();rt.AnyOfValidator=bt},(vt,rt)=>{Object.defineProperty(rt,"__esModule",{value:!0}),rt.FieldForbiddenValidator=void 0;var bt=function(){function ht(){}return ht.prototype.validate=function(wt,At,Ct){return wt!==void 0?[{message:Ct+" is forbidden",path:(At?At+".":"")+Ct,keyword:"forbidden"}]:null},ht}();rt.FieldForbiddenValidator=bt},(vt,rt)=>{Object.defineProperty(rt,"__esModule",{value:!0}),rt.FieldRequiredValidator=void 0;var bt=function(){function ht(){}return ht.prototype.validate=function(wt,At,Ct){return wt==null?[{message:Ct+" is required",path:(At?At+".":"")+Ct,keyword:"required"}]:null},ht}();rt.FieldRequiredValidator=bt},function(vt,rt,bt){var ht,wt=this&&this.__extends||(ht=function(Ct,dt){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Et,Rt){Et.__proto__=Rt}||function(Et,Rt){for(var Mt in Rt)Object.prototype.hasOwnProperty.call(Rt,Mt)&&(Et[Mt]=Rt[Mt])},ht(Ct,dt)},function(Ct,dt){if(typeof dt!="function"&&dt!==null)throw new TypeError("Class extends value "+String(dt)+" is not a constructor or null");function Et(){this.constructor=Ct}ht(Ct,dt),Ct.prototype=dt===null?Object.create(dt):(Et.prototype=dt.prototype,new Et)});Object.defineProperty(rt,"__esModule",{value:!0}),rt.MapValidator=void 0;var At=function(Ct){function dt(Et,Rt){var Mt=Ct.call(this)||this;return Mt.keyValidators=Et,Mt.valueValidators=Rt,Mt}return wt(dt,Ct),dt.prototype.validate=function(Et,Rt,Mt){if(Et==null)return null;var _t=Ct.prototype.validate.call(this,Et,Rt,Mt);if(_t)return _t;for(var kt in Et)if(Et.hasOwnProperty(kt)){for(var nt=(Rt?Rt+".":"")+Mt+"."+kt,s=0,b=this.keyValidators;s<b.length;s++)if(_t=b[s].validate(kt,nt,Mt))return _t;for(var $=0,_e=this.valueValidators;$<_e.length;$++)if(_t=_e[$].validate(Et[kt],nt,Mt))return _t}return null},dt}(bt(4).ObjectValidator);rt.MapValidator=At},function(vt,rt,bt){var ht,wt=this&&this.__extends||(ht=function(Rt,Mt){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_t,kt){_t.__proto__=kt}||function(_t,kt){for(var nt in kt)Object.prototype.hasOwnProperty.call(kt,nt)&&(_t[nt]=kt[nt])},ht(Rt,Mt)},function(Rt,Mt){if(typeof Mt!="function"&&Mt!==null)throw new TypeError("Class extends value "+String(Mt)+" is not a constructor or null");function _t(){this.constructor=Rt}ht(Rt,Mt),Rt.prototype=Mt===null?Object.create(Mt):(_t.prototype=Mt.prototype,new _t)});Object.defineProperty(rt,"__esModule",{value:!0}),rt.ParametersPanelValidator=void 0;var At=bt(3),Ct=bt(4),dt=bt(1),Et=function(Rt){function Mt(){return Rt!==null&&Rt.apply(this,arguments)||this}return wt(Mt,Rt),Mt.prototype.validate=function(_t,kt,nt){if(_t==null)return null;var s=Rt.prototype.validate.call(this,_t,kt,nt);if(s)return s;var b=[{field:"expanded",validators:[dt.Validators.booleanValidator]},{field:"enabled",validators:[dt.Validators.booleanValidator]}];return new At.MultipleFieldsValidator(b).validate(_t,kt,nt)},Mt}(Ct.ObjectValidator);rt.ParametersPanelValidator=Et},function(vt,rt,bt){var ht,wt=this&&this.__extends||(ht=function(s,b){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,_e){$.__proto__=_e}||function($,_e){for(var it in _e)Object.prototype.hasOwnProperty.call(_e,it)&&($[it]=_e[it])},ht(s,b)},function(s,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function $(){this.constructor=s}ht(s,b),s.prototype=b===null?Object.create(b):($.prototype=b.prototype,new $)});Object.defineProperty(rt,"__esModule",{value:!0}),rt.TableDataValidator=rt.TableSchemaValidator=rt.ColumnSchemaValidator=rt.CredentialsValidator=rt.DatasourceConnectionConfigValidator=rt.DatasetCreateConfigValidator=void 0;var At=bt(3),Ct=bt(4),dt=bt(1),Et=function(s){function b(){return s!==null&&s.apply(this,arguments)||this}return wt(b,s),b.prototype.validate=function($,_e,it){if($==null)return null;var pt=s.prototype.validate.call(this,$,_e,it);if(pt)return pt;var mt=[{field:"locale",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.stringValidator]},{field:"mashupDocument",validators:[dt.Validators.stringValidator]},{field:"datasourceConnectionConfig",validators:[dt.Validators.datasourceConnectionConfigValidator]},{field:"tableSchemaList",validators:[dt.Validators.tableSchemaListValidator]},{field:"data",validators:[dt.Validators.tableDataArrayValidator]}];return(pt=new At.MultipleFieldsValidator(mt).validate($,_e,it))||($.datasourceConnectionConfig&&$.mashupDocument==null?[{message:"mashupDocument cannot be empty when datasourceConnectionConfig is presented"}]:$.data&&$.tableSchemaList==null?[{message:"tableSchemaList cannot be empty when data is provided"}]:$.data==null&&$.mashupDocument==null?[{message:"At least one of data or mashupDocument must be provided"}]:void 0)},b}(Ct.ObjectValidator);rt.DatasetCreateConfigValidator=Et;var Rt=function(s){function b(){return s!==null&&s.apply(this,arguments)||this}return wt(b,s),b.prototype.validate=function($,_e,it){if($==null)return null;var pt=s.prototype.validate.call(this,$,_e,it);if(pt)return pt;var mt=[{field:"dataCacheMode",validators:[dt.Validators.dataCacheModeValidator]},{field:"credentials",validators:[dt.Validators.credentialsValidator]}];return new At.MultipleFieldsValidator(mt).validate($,_e,it)},b}(Ct.ObjectValidator);rt.DatasourceConnectionConfigValidator=Rt;var Mt=function(s){function b(){return s!==null&&s.apply(this,arguments)||this}return wt(b,s),b.prototype.validate=function($,_e,it){if($==null)return null;var pt=s.prototype.validate.call(this,$,_e,it);if(pt)return pt;var mt=[{field:"credentialType",validators:[dt.Validators.credentialTypeValidator]},{field:"credentialDetails",validators:[dt.Validators.credentialDetailsValidator]}];return new At.MultipleFieldsValidator(mt).validate($,_e,it)},b}(Ct.ObjectValidator);rt.CredentialsValidator=Mt;var _t=function(s){function b(){return s!==null&&s.apply(this,arguments)||this}return wt(b,s),b.prototype.validate=function($,_e,it){if($==null)return null;var pt=s.prototype.validate.call(this,$,_e,it);if(pt)return pt;var mt=[{field:"name",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.stringValidator]},{field:"displayName",validators:[dt.Validators.stringValidator]},{field:"dataType",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.stringValidator]}];return new At.MultipleFieldsValidator(mt).validate($,_e,it)},b}(Ct.ObjectValidator);rt.ColumnSchemaValidator=_t;var kt=function(s){function b(){return s!==null&&s.apply(this,arguments)||this}return wt(b,s),b.prototype.validate=function($,_e,it){if($==null)return null;var pt=s.prototype.validate.call(this,$,_e,it);if(pt)return pt;var mt=[{field:"name",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.stringValidator]},{field:"columns",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.columnSchemaArrayValidator]}];return new At.MultipleFieldsValidator(mt).validate($,_e,it)},b}(Ct.ObjectValidator);rt.TableSchemaValidator=kt;var nt=function(s){function b(){return s!==null&&s.apply(this,arguments)||this}return wt(b,s),b.prototype.validate=function($,_e,it){if($==null)return null;var pt=s.prototype.validate.call(this,$,_e,it);if(pt)return pt;var mt=[{field:"name",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.stringValidator]},{field:"rows",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.rawDataValidator]}];return new At.MultipleFieldsValidator(mt).validate($,_e,it)},b}(Ct.ObjectValidator);rt.TableDataValidator=nt},function(vt,rt,bt){var ht,wt=this&&this.__extends||(ht=function(Rt,Mt){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_t,kt){_t.__proto__=kt}||function(_t,kt){for(var nt in kt)Object.prototype.hasOwnProperty.call(kt,nt)&&(_t[nt]=kt[nt])},ht(Rt,Mt)},function(Rt,Mt){if(typeof Mt!="function"&&Mt!==null)throw new TypeError("Class extends value "+String(Mt)+" is not a constructor or null");function _t(){this.constructor=Rt}ht(Rt,Mt),Rt.prototype=Mt===null?Object.create(Mt):(_t.prototype=Mt.prototype,new _t)});Object.defineProperty(rt,"__esModule",{value:!0}),rt.QuickCreateValidator=void 0;var At=bt(3),Ct=bt(4),dt=bt(1),Et=function(Rt){function Mt(){return Rt!==null&&Rt.apply(this,arguments)||this}return wt(Mt,Rt),Mt.prototype.validate=function(_t,kt,nt){if(_t==null)return null;var s=Rt.prototype.validate.call(this,_t,kt,nt);if(s)return s;var b=[{field:"accessToken",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.stringValidator]},{field:"groupId",validators:[dt.Validators.stringValidator]},{field:"tokenType",validators:[dt.Validators.tokenTypeValidator]},{field:"theme",validators:[dt.Validators.customThemeValidator]},{field:"datasetCreateConfig",validators:[dt.Validators.fieldRequiredValidator,dt.Validators.datasetCreateConfigValidator]}];return new At.MultipleFieldsValidator(b).validate(_t,kt,nt)},Mt}(Ct.ObjectValidator);rt.QuickCreateValidator=Et},function(vt,rt,bt){var ht,wt=this&&this.__extends||(ht=function(Et,Rt){return ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Mt,_t){Mt.__proto__=_t}||function(Mt,_t){for(var kt in _t)Object.prototype.hasOwnProperty.call(_t,kt)&&(Mt[kt]=_t[kt])},ht(Et,Rt)},function(Et,Rt){if(typeof Rt!="function"&&Rt!==null)throw new TypeError("Class extends value "+String(Rt)+" is not a constructor or null");function Mt(){this.constructor=Et}ht(Et,Rt),Et.prototype=Rt===null?Object.create(Rt):(Mt.prototype=Rt.prototype,new Mt)});Object.defineProperty(rt,"__esModule",{value:!0}),rt.PrintSettingsValidator=void 0;var At=bt(3),Ct=bt(4),dt=function(Et){function Rt(){return Et!==null&&Et.apply(this,arguments)||this}return wt(Rt,Et),Rt.prototype.validate=function(Mt,_t,kt){if(Mt==null)return null;var nt=Et.prototype.validate.call(this,Mt,_t,kt);if(nt)return nt;var s=[{field:"browserPrintAdjustmentsMode",validators:[new Ct.EnumValidator([0,1])]}];return new At.MultipleFieldsValidator(s).validate(Mt,_t,kt)},Rt}(Ct.ObjectValidator);rt.PrintSettingsValidator=dt}],ft={},yt=function vt(rt){var bt=ft[rt];if(bt!==void 0)return bt.exports;var ht=ft[rt]={exports:{}};return gt[rt].call(ht.exports,ht,ht.exports,vt),ht.exports}(0);return yt})(),ct.exports=ot()},890:ct=>{ct.exports=j},719:ct=>{ct.exports=c},156:ct=>{ct.exports=a}},et={};function at(ct){var ot=et[ct];if(ot!==void 0)return ot.exports;var gt=et[ct]={exports:{}};return d[ct].call(gt.exports,gt,gt.exports,at),gt.exports}at.n=ct=>{var ot=ct&&ct.__esModule?()=>ct.default:()=>ct;return at.d(ot,{a:ot}),ot},at.d=(ct,ot)=>{for(var gt in ot)at.o(ot,gt)&&!at.o(ct,gt)&&Object.defineProperty(ct,gt,{enumerable:!0,get:ot[gt]})},at.o=(ct,ot)=>Object.prototype.hasOwnProperty.call(ct,ot),at.r=ct=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(ct,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(ct,"__esModule",{value:!0})};var st={};return(()=>{at.r(st),at.d(st,{EmbedType:()=>ot,PowerBIEmbed:()=>Ct});var ct,ot,gt=at(156),ft=at(719),yt=at(149),vt=at(890),rt=at.n(vt),bt=(ct=function(dt,Et){return ct=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Rt,Mt){Rt.__proto__=Mt}||function(Rt,Mt){for(var _t in Mt)Object.prototype.hasOwnProperty.call(Mt,_t)&&(Rt[_t]=Mt[_t])},ct(dt,Et)},function(dt,Et){if(typeof Et!="function"&&Et!==null)throw new TypeError("Class extends value "+String(Et)+" is not a constructor or null");function Rt(){this.constructor=dt}ct(dt,Et),dt.prototype=Et===null?Object.create(Et):(Rt.prototype=Et.prototype,new Rt)}),ht=function(dt,Et,Rt,Mt){return new(Rt||(Rt=Promise))(function(_t,kt){function nt($){try{b(Mt.next($))}catch(_e){kt(_e)}}function s($){try{b(Mt.throw($))}catch(_e){kt(_e)}}function b($){var _e;$.done?_t($.value):(_e=$.value,_e instanceof Rt?_e:new Rt(function(it){it(_e)})).then(nt,s)}b((Mt=Mt.apply(dt,[])).next())})},wt=function(dt,Et){var Rt,Mt,_t,kt,nt={label:0,sent:function(){if(1&_t[0])throw _t[1];return _t[1]},trys:[],ops:[]};return kt={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(kt[Symbol.iterator]=function(){return this}),kt;function s(b){return function($){return function(_e){if(Rt)throw new TypeError("Generator is already executing.");for(;kt&&(kt=0,_e[0]&&(nt=0)),nt;)try{if(Rt=1,Mt&&(_t=2&_e[0]?Mt.return:_e[0]?Mt.throw||((_t=Mt.return)&&_t.call(Mt),0):Mt.next)&&!(_t=_t.call(Mt,_e[1])).done)return _t;switch(Mt=0,_t&&(_e=[2&_e[0],_t.value]),_e[0]){case 0:case 1:_t=_e;break;case 4:return nt.label++,{value:_e[1],done:!1};case 5:nt.label++,Mt=_e[1],_e=[0];continue;case 7:_e=nt.ops.pop(),nt.trys.pop();continue;default:if(!((_t=(_t=nt.trys).length>0&&_t[_t.length-1])||_e[0]!==6&&_e[0]!==2)){nt=0;continue}if(_e[0]===3&&(!_t||_e[1]>_t[0]&&_e[1]<_t[3])){nt.label=_e[1];break}if(_e[0]===6&&nt.label<_t[1]){nt.label=_t[1],_t=_e;break}if(_t&&nt.label<_t[2]){nt.label=_t[2],nt.ops.push(_e);break}_t[2]&&nt.ops.pop(),nt.trys.pop();continue}_e=Et.call(dt,nt)}catch(it){_e=[6,it],Mt=0}finally{Rt=_t=0}if(5&_e[0])throw _e[1];return{value:_e[0]?_e[1]:void 0,done:!0}}([b,$])}}},At=function(dt,Et,Rt){for(var Mt,_t=0,kt=Et.length;_t<kt;_t++)!Mt&&_t in Et||(Mt||(Mt=Array.prototype.slice.call(Et,0,_t)),Mt[_t]=Et[_t]);return dt.concat(Mt||Array.prototype.slice.call(Et))};(function(dt){dt.Create="create",dt.Report="report",dt.Dashboard="dashboard",dt.Tile="tile",dt.Qna="qna",dt.Visual="visual"})(ot||(ot={}));var Ct=function(dt){function Et(Rt){var Mt=dt.call(this,Rt)||this;return Mt.containerRef=gt.createRef(),Mt.prevEventHandlerMapString="",Mt.props.service?Mt.powerbi=Mt.props.service:Mt.powerbi=new ft.service.Service(ft.factories.hpmFactory,ft.factories.wpmpFactory,ft.factories.routerFactory),Mt.powerbi.setSdkInfo("powerbi-client-react","1.4.0"),Mt}return bt(Et,dt),Object.defineProperty(Et.prototype,"embed",{get:function(){return this._embed},set:function(Rt){this._embed=Rt,this.invokeGetEmbedCallback()},enumerable:!1,configurable:!0}),Et.prototype.componentDidMount=function(){this.containerRef.current&&(this.props.embedConfig.accessToken&&this.props.embedConfig.embedUrl?this.embedEntity():this.embed=this.powerbi.bootstrap(this.containerRef.current,this.props.embedConfig)),this.props.eventHandlers&&this.embed&&this.setEventHandlers(this.embed,this.props.eventHandlers)},Et.prototype.componentDidUpdate=function(Rt){return ht(this,void 0,void 0,function(){var Mt,_t,kt,nt;return wt(this,function(s){switch(s.label){case 0:return this.embedOrUpdateAccessToken(Rt),this.props.eventHandlers&&this.embed&&this.setEventHandlers(this.embed,this.props.eventHandlers),rt()(this.props.embedConfig.settings,Rt.embedConfig.settings)?[3,2]:[4,this.updateSettings()];case 1:s.sent(),s.label=2;case 2:if(this.props.embedConfig.type!==ot.Report)return[3,11];s.label=3;case 3:return s.trys.push([3,10,,11]),Mt=this.props.embedConfig,_t=Mt.filters,kt=Rt.embedConfig,Mt.pageName&&Mt.pageName!==kt.pageName?[4,this.embed.setPage(Mt.pageName)]:[3,5];case 4:s.sent(),s.label=5;case 5:return!_t||rt()(_t,kt.filters)?[3,7]:[4,this.embed.updateFilters(yt.FiltersOperations.Replace,_t)];case 6:return s.sent(),[3,9];case 7:return _t||!kt.filters?[3,9]:[4,this.embed.updateFilters(yt.FiltersOperations.RemoveAll)];case 8:s.sent(),s.label=9;case 9:return[3,11];case 10:return nt=s.sent(),console.error(nt),[3,11];case 11:return[2]}})})},Et.prototype.componentWillUnmount=function(){this.containerRef.current&&this.powerbi.reset(this.containerRef.current),this.prevEventHandlerMapString=""},Et.prototype.render=function(){return gt.createElement("div",{ref:this.containerRef,className:this.props.cssClassName})},Et.prototype.embedEntity=function(){this.containerRef.current&&(this.props.phasedEmbedding&&this.props.embedConfig.type===ot.Report?this.embed=this.powerbi.load(this.containerRef.current,this.props.embedConfig):(this.props.phasedEmbedding&&console.error("Phased embedding is not supported for type ".concat(this.props.embedConfig.type)),this.props.embedConfig.type===ot.Create?this.embed=this.powerbi.createReport(this.containerRef.current,this.props.embedConfig):this.embed=this.powerbi.embed(this.containerRef.current,this.props.embedConfig)))},Et.prototype.embedOrUpdateAccessToken=function(Rt){return ht(this,void 0,void 0,function(){var Mt;return wt(this,function(_t){switch(_t.label){case 0:return this.props.embedConfig.accessToken&&this.props.embedConfig.embedUrl?!this.containerRef.current||Rt.embedConfig.accessToken&&this.props.embedConfig.embedUrl===Rt.embedConfig.embedUrl?[3,1]:(this.embedEntity(),[3,5]):[2];case 1:if(this.props.embedConfig.accessToken===Rt.embedConfig.accessToken||this.props.embedConfig.embedUrl!==Rt.embedConfig.embedUrl||!this.embed)return[3,5];_t.label=2;case 2:return _t.trys.push([2,4,,5]),[4,this.embed.setAccessToken(this.props.embedConfig.accessToken)];case 3:return _t.sent(),[3,5];case 4:return Mt=_t.sent(),console.error(`setAccessToken error:
`,Mt),[3,5];case 5:return[2]}})})},Et.prototype.setEventHandlers=function(Rt,Mt){var _t=this,kt=function($){if(!$)return"";var _e=Array.from($);return JSON.stringify(_e.map(function(it){return[it[0],it[1]?it[1].toString():""]}))}(this.props.eventHandlers);if(this.prevEventHandlerMapString!==kt){this.prevEventHandlerMapString=kt;var nt=ft.Embed.allowedEvents,s=Rt.embedtype;switch(s){case ot.Create:break;case ot.Report:nt=At(At([],nt,!0),ft.Report.allowedEvents);break;case ot.Dashboard:nt=At(At([],nt,!0),ft.Dashboard.allowedEvents);break;case ot.Tile:nt=At(At([],nt,!0),ft.Tile.allowedEvents);break;case ot.Qna:nt=At(At([],nt,!0),ft.Qna.allowedEvents);break;case ot.Visual:nt=At(At([],nt,!0),ft.Visual.allowedEvents);break;default:console.error("Invalid embed type ".concat(s))}var b=[];Mt.forEach(function($,_e){nt.includes(_e)?(Rt.off(_e),$&&Rt.on(_e,function(it){$(it,_t.embed)})):b.push(_e)}),b.length&&console.error("Following events are invalid: ".concat(b.join(",")))}},Et.prototype.invokeGetEmbedCallback=function(){this.props.getEmbeddedComponent&&this.embed&&this.props.getEmbeddedComponent(this.embed)},Et.prototype.updateSettings=function(){return ht(this,void 0,void 0,function(){var Rt,Mt;return wt(this,function(_t){switch(_t.label){case 0:if(!this.embed||!this.props.embedConfig.settings)return[2];switch(this.props.embedConfig.type){case ot.Report:return[3,1];case ot.Dashboard:case ot.Tile:case ot.Qna:case ot.Visual:return[3,6]}return[3,7];case 1:Rt=this.props.embedConfig.settings,_t.label=2;case 2:return _t.trys.push([2,4,,5]),[4,this.embed.updateSettings(Rt)];case 3:return _t.sent(),[3,5];case 4:return Mt=_t.sent(),console.error("Error in method updateSettings: ".concat(Mt)),[3,5];case 5:case 6:return[3,8];case 7:console.error("Invalid embed type ".concat(this.props.embedConfig.type)),_t.label=8;case 8:return[2]}})})},Et}(gt.Component)})(),st})())})(powerbiClientReact);var powerbiClientReactExports=powerbiClientReact.exports;const EmbedPowerBIComponent=o=>{const e=useDispatch(),{powerBIVisualName:a,powerBITable:c,powerBIColumn:j,powerBIVisualReportId:d,powerBIVisualReportEmbedURL:et}=o,[at,st]=reactExports.useState(!0),{instance:ct}=useMsal(),ot=ct.getActiveAccount(),[gt,ft]=reactExports.useState(),yt=useSelector(wt=>wt.selection.assetIds),vt=async()=>{const wt={scopes:["https://analysis.windows.net/powerbi/api/Report.Read.All"],account:ot};try{const At=await ct.acquireTokenSilent(wt);ft(At.accessToken),st(!1)}catch(At){console.error(At),st(!1)}};reactExports.useEffect(()=>{st(!0),vt()},[]);const rt=wt=>{let At;yt.includes(wt)?At=yt.filter(Ct=>Ct!==wt):At=[...yt,wt],e(setSelection(At))},bt={$schema:"http://powerbi.com/product/schema#basic",target:{table:c,column:j},operator:"In",values:yt,filterType:powerbiExports.models.FilterType.Basic},ht=()=>{if(window.report)return window.report.getPages().then(At=>{At[0].getVisuals().then(Ct=>{for(let dt of Ct)dt.type==="slicer"&&dt.name===a&&(bt.values.length>0?dt.setSlicerState({filters:[bt]}):dt.setSlicerState({filters:[]}))})}),""};return jsxRuntimeExports.jsxs("div",{children:[ht(),at?jsxRuntimeExports.jsx("div",{className:"pbi-div",children:"Loading"}):jsxRuntimeExports.jsx("div",{className:"pbi-div",children:jsxRuntimeExports.jsx(powerbiClientReactExports.PowerBIEmbed,{embedConfig:{type:"report",id:d,embedUrl:et,accessToken:gt||"",tokenType:powerbiExports.models.TokenType.Aad,settings:{panes:{filters:{expanded:!1,visible:!1},pageNavigation:{visible:!1}},background:powerbiExports.models.BackgroundType.Transparent}},eventHandlers:new Map([["loaded",function(){ht();let wt=window.report;wt==null||wt.on("visualClicked",async function(){const At=await(wt==null?void 0:wt.getPages()),Ct=await(At==null?void 0:At[0].getVisuals());if(Ct){for(let dt of Ct)if(dt.type==="slicer"&&dt.name===a){const Et=await dt.getSlicerState();Et.filters.length>0&&Et.filters[0].values.forEach(Mt=>{rt(Mt)})}}})}],["rendered",function(){console.log("Report rendered")}],["error",function(wt){console.log(wt.detail)}]]),cssClassName:"bi-embedded",getEmbeddedComponent:wt=>{window.report=wt}})})]})},PageLayout=o=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(NavigationBar,{}),o.children,jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs(AuthenticatedTemplate,{children:[jsxRuntimeExports.jsx(EventHubStreamComponent,{eventHubsResourceName:"hou-ns-1",eventHubName:"from-hou-aiom2-k8s",consumerGroup:"reacttest"}),jsxRuntimeExports.jsx(EmbedPowerBIComponent,{powerBIVisualName:"544a19b2352fd10bab76",powerBITable:"digital_twins",powerBIColumn:"module",powerBIVisualReportId:"143ada8b-39fe-4cc0-8810-c7ddbd3c5727",powerBIVisualReportEmbedURL:"https://app.powerbi.com/reportEmbed?reportId=143ada8b-39fe-4cc0-8810-c7ddbd3c5727&ctid=d2e5ac16-7068-4b2d-995b-3924af59cc7a"}),jsxRuntimeExports.jsx(ServiceComponent,{}),jsxRuntimeExports.jsx(AppStreamComponent,{}),jsxRuntimeExports.jsx(USDStorageComponent,{}),jsxRuntimeExports.jsx(SelectionComponent,{}),jsxRuntimeExports.jsx(StatusComponent,{})]})]}),store=configureStore({reducer:{service:serviceReducer,appStream:appStreamReducer,usdStorage:usdStorageReducer,selection:selectionReducer,status:statusReducer}}),Controls$1=()=>{const o=useDispatch(),[e,a]=reactExports.useState(!0),c=useSelector(At=>At.service.sessionService),j=useSelector(At=>At.appStream.server),d=useSelector(At=>At.selection.assetIds),[et,at]=reactExports.useState(j),[st,ct]=reactExports.useState(c.address);reactExports.useEffect(()=>{at(j)},[j]),reactExports.useEffect(()=>{ct(c.address)},[c]),reactExports.useEffect(()=>{const At=Ct=>{Ct.ctrlKey&&Ct.key==="m"&&a(dt=>!dt)};return window.addEventListener("keydown",At),()=>{window.removeEventListener("keydown",At)}},[]);const ot=()=>{o(setURL("/app/samples/stage02.usd")),o(setService({address:st,desiredState:"connected"}))},gt=()=>{o(setService({address:st,desiredState:"destroyed"}))},ft=()=>{o(setServer(et))},yt=()=>{o(setService({address:st,desiredState:"destroyed"})),o(setServer(""))},vt=()=>{c.address&&c.desiredState=="connected"?o(setURL("/app/samples/stage01.usd")):o(setURL("./samples/stage01.usd"))},rt=()=>{c.address&&c.desiredState=="connected"?o(setURL("/app/samples/stage02.usd")):o(setURL("./samples/stage02.usd"))},bt=()=>{o(setURL("https://stovusd.blob.core.windows.net/private/scn_houston_facility_3/scn_houston_facility.usd?sasToken=sp=r&st=2024-11-08T15:17:47Z&se=2024-11-08T23:17:47Z&spr=https&sv=2022-11-02&sr=c&sig=9Vr%2FySxwge5UDkQ1CV1KdJ2Zc9RPJPqZ1qsS5%2FF3gZY%3D&hostName=stovusd.blob.core.windows.net&containerName=private"))},ht=At=>{let Ct;d.includes(At)?Ct=d.filter(dt=>dt!==At):Ct=[...d,At],o(setSelection(Ct))},wt=(At,Ct)=>{o(setStatus({assetId:At,assetStatus:Ct}))};return e?jsxRuntimeExports.jsxs("div",{style:{marginBottom:"1px",fontFamily:"Arial, sans-serif",fontSize:"12px"},children:[jsxRuntimeExports.jsx("strong",{children:"DEBUG CONTROLS"}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1px"},children:[jsxRuntimeExports.jsx("div",{style:{flex:"0 0 80px"},children:"Service"}),jsxRuntimeExports.jsxs("div",{style:{flex:1,display:"flex",gap:"1px"},children:[jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Enter Service Address",value:st,onChange:At=>ct(At.target.value),style:{flex:1,fontSize:"12px"}}),jsxRuntimeExports.jsx("button",{onClick:ot,style:{fontSize:"12px"},children:"Start Service"}),jsxRuntimeExports.jsx("button",{onClick:gt,style:{fontSize:"12px"},children:"End Service"})]})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1px",marginTop:"2px"},children:[jsxRuntimeExports.jsx("div",{style:{flex:"0 0 80px"},children:"Server"}),jsxRuntimeExports.jsxs("div",{style:{flex:1,display:"flex",gap:"1px"},children:[jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Enter Server URL",value:et,onChange:At=>at(At.target.value),style:{flex:2,fontSize:"12px"}}),jsxRuntimeExports.jsx("button",{onClick:ft,style:{fontSize:"12px"},children:"Start Local Server"}),jsxRuntimeExports.jsx("button",{onClick:yt,style:{fontSize:"12px"},children:"Stop Local Server"})]})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1px",marginTop:"2px"},children:[jsxRuntimeExports.jsx("div",{style:{flex:"0 0 80px"},children:"Assets"}),jsxRuntimeExports.jsxs("div",{style:{flex:1,display:"flex",gap:"1px"},children:[jsxRuntimeExports.jsx("button",{onClick:vt,style:{fontSize:"12px"},children:"Set Asset 1 URL"}),jsxRuntimeExports.jsx("button",{onClick:rt,style:{fontSize:"12px"},children:"Set Asset 2 URL"}),jsxRuntimeExports.jsx("button",{onClick:bt,style:{fontSize:"12px"},children:"Set SAS Asset URL"})]})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1px",marginTop:"2px"},children:[jsxRuntimeExports.jsx("div",{style:{flex:"0 0 80px"},children:"Selection"}),jsxRuntimeExports.jsxs("div",{style:{flex:1,display:"flex",gap:"1px"},children:[jsxRuntimeExports.jsx("button",{onClick:()=>ht("cube"),style:{fontSize:"12px"},children:"cube"}),jsxRuntimeExports.jsx("button",{onClick:()=>ht("sphere"),style:{fontSize:"12px"},children:"sphere"}),jsxRuntimeExports.jsx("button",{onClick:()=>ht("cone"),style:{fontSize:"12px"},children:"cone"}),jsxRuntimeExports.jsx("button",{onClick:()=>ht("group"),style:{fontSize:"12px"},children:"group"})]})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1px",marginTop:"2px"},children:[jsxRuntimeExports.jsx("div",{style:{flex:"0 0 80px"},children:"Asset State"}),jsxRuntimeExports.jsxs("div",{style:{flex:1,display:"grid",gridTemplateColumns:"repeat(12, 1fr)",gap:"1px"},children:[jsxRuntimeExports.jsx("button",{onClick:()=>wt("Pump 1","nominal"),style:{fontSize:"12px"},children:"Pump 1 nominal"}),jsxRuntimeExports.jsx("button",{onClick:()=>wt("Pump 1","warning"),style:{fontSize:"12px"},children:"Pump 1 warning"}),jsxRuntimeExports.jsx("button",{onClick:()=>wt("Pump 1","fault"),style:{fontSize:"12px"},children:"Pump 1 fault"}),jsxRuntimeExports.jsx("button",{onClick:()=>wt("Fluid Cell","nominal"),style:{fontSize:"12px"},children:"Fluid Cell nominal"}),jsxRuntimeExports.jsx("button",{onClick:()=>wt("Fluid Cell","warning"),style:{fontSize:"12px"},children:"Fluid Cell warning"}),jsxRuntimeExports.jsx("button",{onClick:()=>wt("Fluid Cell","fault"),style:{fontSize:"12px"},children:"Fluid Cell fault"}),jsxRuntimeExports.jsx("button",{onClick:()=>wt("cone","nominal"),style:{fontSize:"12px"},children:"cone nominal"}),jsxRuntimeExports.jsx("button",{onClick:()=>wt("cone","warning"),style:{fontSize:"12px"},children:"cone warning"}),jsxRuntimeExports.jsx("button",{onClick:()=>wt("cone","fault"),style:{fontSize:"12px"},children:"cone fault"}),jsxRuntimeExports.jsx("button",{onClick:()=>wt("group","nominal"),style:{fontSize:"12px"},children:"group nominal"}),jsxRuntimeExports.jsx("button",{onClick:()=>wt("group","warning"),style:{fontSize:"12px"},children:"group warning"}),jsxRuntimeExports.jsx("button",{onClick:()=>wt("group","fault"),style:{fontSize:"12px"},children:"group fault"})]})]})]}):null},State=()=>{const[o,e]=reactExports.useState(!0),a=useSelector(wt=>wt.service.jwt),c=useSelector(wt=>wt.service.sessionService),j=useSelector(wt=>wt.service.appId),d=useSelector(wt=>wt.service.version),et=useSelector(wt=>wt.service.profile),at=useSelector(wt=>wt.service.sessionId),st=useSelector(wt=>wt.appStream.server),ct=useSelector(wt=>wt.appStream.remoteStream),ot=useSelector(wt=>wt.appStream.kitState),gt=useSelector(wt=>wt.usdStorage.url),ft=useSelector(wt=>wt.usdStorage.loadingState),yt=useSelector(wt=>wt.usdStorage.loadedUrl),vt=useSelector(wt=>wt.selection.assetIds),rt=useSelector(wt=>wt.selection.selectionChangeOrigin),bt=useSelector(wt=>wt.status.assetId),ht=useSelector(wt=>wt.status.assetStatus);return reactExports.useEffect(()=>{const wt=At=>{At.ctrlKey&&At.key==="m"&&e(Ct=>!Ct)};return window.addEventListener("keydown",wt),()=>{window.removeEventListener("keydown",wt)}},[]),o?jsxRuntimeExports.jsxs("div",{style:{fontFamily:"Arial, sans-serif",fontSize:"12px"},children:[jsxRuntimeExports.jsx("strong",{children:"DEBUG STATE"}),jsxRuntimeExports.jsx("table",{style:{width:"100%",tableLayout:"fixed"},children:jsxRuntimeExports.jsx("tbody",{children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{style:{verticalAlign:"top"},children:jsxRuntimeExports.jsx("table",{style:{width:"100%"},children:jsxRuntimeExports.jsxs("tbody",{children:[jsxRuntimeExports.jsx("tr",{children:jsxRuntimeExports.jsx("td",{children:jsxRuntimeExports.jsx("i",{children:"sessionService"})})}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"jwt"}),jsxRuntimeExports.jsx("td",{children:a})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"address"}),jsxRuntimeExports.jsx("td",{children:c.address})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"desiredState"}),jsxRuntimeExports.jsx("td",{children:c.desiredState})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"appId"}),jsxRuntimeExports.jsx("td",{children:j})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"version"}),jsxRuntimeExports.jsx("td",{children:d})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"profile"}),jsxRuntimeExports.jsx("td",{children:et})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"sessionId"}),jsxRuntimeExports.jsx("td",{children:at})]})]})})}),jsxRuntimeExports.jsx("td",{style:{verticalAlign:"top"},children:jsxRuntimeExports.jsx("table",{style:{width:"100%"},children:jsxRuntimeExports.jsxs("tbody",{children:[jsxRuntimeExports.jsx("tr",{children:jsxRuntimeExports.jsx("td",{children:jsxRuntimeExports.jsx("i",{children:"appStream"})})}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"remoteStream.accessToken"}),jsxRuntimeExports.jsx("td",{children:ct.accessToken})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"remoteStream.mediaport"}),jsxRuntimeExports.jsx("td",{children:ct.mediaport})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"remoteStream.mediaserver"}),jsxRuntimeExports.jsx("td",{children:ct.mediaserver})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"remoteStream.sessionid"}),jsxRuntimeExports.jsx("td",{children:ct.sessionid})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"remoteStream.signalingport"}),jsxRuntimeExports.jsx("td",{children:ct.signalingport})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"remoteStream.signalingserver"}),jsxRuntimeExports.jsx("td",{children:ct.signalingserver})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"server"}),jsxRuntimeExports.jsx("td",{children:st})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"kitState"}),jsxRuntimeExports.jsx("td",{children:ot})]})]})})}),jsxRuntimeExports.jsx("td",{style:{verticalAlign:"top"},children:jsxRuntimeExports.jsx("table",{style:{width:"100%"},children:jsxRuntimeExports.jsxs("tbody",{children:[jsxRuntimeExports.jsx("tr",{children:jsxRuntimeExports.jsx("td",{children:jsxRuntimeExports.jsx("i",{children:"usdStorage"})})}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"url"}),jsxRuntimeExports.jsx("td",{children:gt})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"loadingState"}),jsxRuntimeExports.jsx("td",{children:ft})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"loadedUrl"}),jsxRuntimeExports.jsx("td",{children:yt})]})]})})}),jsxRuntimeExports.jsx("td",{style:{verticalAlign:"top"},children:jsxRuntimeExports.jsx("table",{style:{width:"100%"},children:jsxRuntimeExports.jsxs("tbody",{children:[jsxRuntimeExports.jsx("tr",{children:jsxRuntimeExports.jsx("td",{children:jsxRuntimeExports.jsx("i",{children:"selection"})})}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"assetIds"}),jsxRuntimeExports.jsx("td",{children:jsxRuntimeExports.jsx("ul",{style:{margin:0,padding:0,listStyle:"none"},children:vt&&vt.length>0?vt.map((wt,At)=>jsxRuntimeExports.jsx("li",{style:{margin:0},children:wt},At)):jsxRuntimeExports.jsx("li",{children:"EMPTY"})})})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"selectionChangeOrigin"}),jsxRuntimeExports.jsx("td",{children:rt})]})]})})}),jsxRuntimeExports.jsx("td",{style:{verticalAlign:"top"},children:jsxRuntimeExports.jsx("table",{style:{width:"100%"},children:jsxRuntimeExports.jsxs("tbody",{children:[jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:jsxRuntimeExports.jsx("i",{children:"status"})}),jsxRuntimeExports.jsx("td",{children:jsxRuntimeExports.jsx("i",{children:"(most recent)"})})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"assetId"}),jsxRuntimeExports.jsx("td",{children:bt})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"assetStatus"}),jsxRuntimeExports.jsx("td",{children:ht})]})]})})})]})})})]}):null},Controls=()=>{const[o,e]=reactExports.useState(!0),[a,c]=reactExports.useState([]),j="https://ov-streaming.iai-contoso.com/";reactExports.useEffect(()=>{const st=ct=>{ct.ctrlKey&&ct.key==="m"&&e(ot=>!ot)};return window.addEventListener("keydown",st),()=>{window.removeEventListener("keydown",st)}},[]);const d=async()=>{const ct=(await getStreamingSessions(j)).data;c(ct.items)},et=async st=>{await destroyStreamingSession(j,st),d()},at=async()=>{for(const st of a)await destroyStreamingSession(j,st.id);d()};return o?jsxRuntimeExports.jsxs("div",{style:{marginBottom:"1px",fontFamily:"Arial, sans-serif",fontSize:"12px"},children:[jsxRuntimeExports.jsx("strong",{children:"SESSION MANAGEMENT"}),jsxRuntimeExports.jsx("button",{onClick:d,style:{fontSize:"12px"},children:"Get Sessions"}),a.length>0&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("ul",{children:a.map(st=>jsxRuntimeExports.jsxs("li",{style:{marginBottom:"5px"},children:[st.id,jsxRuntimeExports.jsx("button",{onClick:()=>et(st.id),style:{marginLeft:"10px",fontSize:"12px"},children:"Delete"})]},st.id))}),jsxRuntimeExports.jsx("button",{onClick:at,style:{marginTop:"10px",fontSize:"12px"},children:"Delete All Sessions"})]})]}):null},MainContent=()=>jsxRuntimeExports.jsx("div",{className:"App"}),App=o=>{const[e,a]=reactExports.useState(!0);return reactExports.useEffect(()=>{const c=j=>{j.ctrlKey&&j.key==="m"&&a(d=>!d)};return window.addEventListener("keydown",c),()=>{window.removeEventListener("keydown",c)}},[]),jsxRuntimeExports.jsx(Provider_default,{store,children:jsxRuntimeExports.jsxs(MsalProvider,{instance:o.instance,children:[e&&jsxRuntimeExports.jsxs("div",{id:"debug",children:[jsxRuntimeExports.jsx("h2",{children:"Debug Panel"}),jsxRuntimeExports.jsx(Controls,{}),jsxRuntimeExports.jsx(Controls$1,{}),jsxRuntimeExports.jsx(State,{})]}),jsxRuntimeExports.jsx(PageLayout,{children:jsxRuntimeExports.jsx(MainContent,{})})]})})},msalInstance=new PublicClientApplication(msalConfig),allAccounts=msalInstance.getAllAccounts();!msalInstance.getActiveAccount()&&allAccounts.length>0&&msalInstance.setActiveAccount(allAccounts[0]);msalInstance.addEventCallback(o=>{if(o.eventType===EventType.LOGIN_SUCCESS&&o.payload){const a=o.payload.account;msalInstance.setActiveAccount(a)}});const root=client.createRoot(document.getElementById("root"));root.render(jsxRuntimeExports.jsx(React$1.StrictMode,{children:jsxRuntimeExports.jsx(App,{instance:msalInstance})}));
